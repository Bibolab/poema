webpackJsonp([0],[function(module,exports,__webpack_require__){"use strict";var platform_browser_dynamic_1=__webpack_require__(1),core_1=__webpack_require__(7),http_1=__webpack_require__(281),router_1=__webpack_require__(302),common_1=__webpack_require__(182);__webpack_require__(324);var app_1=__webpack_require__(583),app_service_1=__webpack_require__(584),task_service_1=__webpack_require__(598),project_service_1=__webpack_require__(590),reference_service_1=__webpack_require__(585),staff_service_1=__webpack_require__(586);core_1.enableProdMode(),platform_browser_dynamic_1.bootstrap(app_1.App,[http_1.HTTP_PROVIDERS,router_1.ROUTER_DIRECTIVES,router_1.ROUTER_PROVIDERS,core_1.provide(core_1.PLATFORM_DIRECTIVES,{useValue:router_1.ROUTER_DIRECTIVES,multi:!0}),core_1.provide(common_1.LocationStrategy,{useClass:common_1.HashLocationStrategy}),common_1.FORM_PROVIDERS,app_service_1.AppService,task_service_1.TaskService,project_service_1.ProjectService,reference_service_1.ReferenceService,staff_service_1.StaffService])["catch"](function(err){return console.error(err)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var Subject_1=__webpack_require__(40);exports.Subject=Subject_1.Subject;var Observable_1=__webpack_require__(41);exports.Observable=Observable_1.Observable,__webpack_require__(325),__webpack_require__(329),__webpack_require__(332),__webpack_require__(343),__webpack_require__(347),__webpack_require__(350),__webpack_require__(352),__webpack_require__(355),__webpack_require__(362),__webpack_require__(365),__webpack_require__(368),__webpack_require__(370),__webpack_require__(372),__webpack_require__(381),__webpack_require__(384),__webpack_require__(386),__webpack_require__(390),__webpack_require__(392),__webpack_require__(395),__webpack_require__(398),__webpack_require__(402),__webpack_require__(405),__webpack_require__(407),__webpack_require__(409),__webpack_require__(411),__webpack_require__(413),__webpack_require__(415),__webpack_require__(422),__webpack_require__(424),__webpack_require__(426),__webpack_require__(427),__webpack_require__(428),__webpack_require__(430),__webpack_require__(433),__webpack_require__(436),__webpack_require__(438),__webpack_require__(440),__webpack_require__(442),__webpack_require__(444),__webpack_require__(446),__webpack_require__(448),__webpack_require__(450),__webpack_require__(452),__webpack_require__(454),__webpack_require__(456),__webpack_require__(458),__webpack_require__(460),__webpack_require__(463),__webpack_require__(468),__webpack_require__(470),__webpack_require__(472),__webpack_require__(474),__webpack_require__(476),__webpack_require__(478),__webpack_require__(480),__webpack_require__(482),__webpack_require__(484),__webpack_require__(486),__webpack_require__(487),__webpack_require__(488),__webpack_require__(489),__webpack_require__(490),__webpack_require__(491),__webpack_require__(492),__webpack_require__(495),__webpack_require__(497),__webpack_require__(499),__webpack_require__(502),__webpack_require__(503),__webpack_require__(505),__webpack_require__(506),__webpack_require__(508),__webpack_require__(510),__webpack_require__(512),__webpack_require__(514),__webpack_require__(516),__webpack_require__(518),__webpack_require__(520),__webpack_require__(522),__webpack_require__(524),__webpack_require__(526),__webpack_require__(528),__webpack_require__(530),__webpack_require__(532),__webpack_require__(541),__webpack_require__(543),__webpack_require__(545),__webpack_require__(547),__webpack_require__(550),__webpack_require__(552),__webpack_require__(554),__webpack_require__(556),__webpack_require__(558),__webpack_require__(560),__webpack_require__(562),__webpack_require__(564),__webpack_require__(566),__webpack_require__(567),__webpack_require__(569),__webpack_require__(571),__webpack_require__(573),__webpack_require__(575),__webpack_require__(577),__webpack_require__(579),__webpack_require__(580);var Operator_1=__webpack_require__(582);exports.Operator=Operator_1.Operator;var Subscription_1=__webpack_require__(47);exports.Subscription=Subscription_1.Subscription;var Subscriber_1=__webpack_require__(45);exports.Subscriber=Subscriber_1.Subscriber;var AsyncSubject_1=__webpack_require__(328);exports.AsyncSubject=AsyncSubject_1.AsyncSubject;var ReplaySubject_1=__webpack_require__(418);exports.ReplaySubject=ReplaySubject_1.ReplaySubject;var BehaviorSubject_1=__webpack_require__(501);exports.BehaviorSubject=BehaviorSubject_1.BehaviorSubject;var ConnectableObservable_1=__webpack_require__(421);exports.ConnectableObservable=ConnectableObservable_1.ConnectableObservable;var Notification_1=__webpack_require__(361);exports.Notification=Notification_1.Notification;var EmptyError_1=__webpack_require__(462);exports.EmptyError=EmptyError_1.EmptyError;var ArgumentOutOfRangeError_1=__webpack_require__(549);exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var ObjectUnsubscribedError_1=__webpack_require__(59);exports.ObjectUnsubscribedError=ObjectUnsubscribedError_1.ObjectUnsubscribedError;var UnsubscriptionError_1=__webpack_require__(52);exports.UnsubscriptionError=UnsubscriptionError_1.UnsubscriptionError;var asap_1=__webpack_require__(535),async_1=__webpack_require__(376),queue_1=__webpack_require__(419),rxSubscriber_1=__webpack_require__(53),iterator_1=__webpack_require__(341),observable=__webpack_require__(55),Scheduler={asap:asap_1.asap,async:async_1.async,queue:queue_1.queue};exports.Scheduler=Scheduler;var Symbol={rxSubscriber:rxSubscriber_1.$$rxSubscriber,observable:observable,iterator:iterator_1.$$iterator};exports.Symbol=Symbol},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bindCallback_1=__webpack_require__(326);Observable_1.Observable.bindCallback=bindCallback_1.bindCallback},function(module,exports,__webpack_require__){"use strict";var BoundCallbackObservable_1=__webpack_require__(327);exports.bindCallback=BoundCallbackObservable_1.BoundCallbackObservable.create},function(module,exports,__webpack_require__){"use strict";function dispatch(state){var self=this,source=state.source,subscriber=state.subscriber,callbackFunc=source.callbackFunc,args=source.args,scheduler=source.scheduler,subject=source.subject;if(!subject){subject=source.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject;if(selector){var result_2=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_2===errorObject_1.errorObject?self.add(scheduler.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:subject})):self.add(scheduler.schedule(dispatchNext,0,{value:result_2,subject:subject}))}else{var value=1===innerArgs.length?innerArgs[0]:innerArgs;self.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};handler.source=source;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}self.add(subject.subscribe(subscriber))}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),AsyncSubject_1=__webpack_require__(328),BoundCallbackObservable=function(_super){function BoundCallbackObservable(callbackFunc,selector,args,scheduler){_super.call(this),this.callbackFunc=callbackFunc,this.selector=selector,this.args=args,this.scheduler=scheduler}return __extends(BoundCallbackObservable,_super),BoundCallbackObservable.create=function(func,selector,scheduler){return void 0===selector&&(selector=void 0),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return new BoundCallbackObservable(func,selector,args,scheduler)}},BoundCallbackObservable.prototype._subscribe=function(subscriber){var callbackFunc=this.callbackFunc,args=this.args,scheduler=this.scheduler,subject=this.subject;if(scheduler)return scheduler.schedule(dispatch,0,{source:this,subscriber:subscriber});if(!subject){subject=this.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject;if(selector){var result_1=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_1===errorObject_1.errorObject?subject.error(errorObject_1.errorObject.e):(subject.next(result_1),subject.complete())}else subject.next(1===innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};handler.source=this;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}return subject.subscribe(subscriber)},BoundCallbackObservable}(Observable_1.Observable);exports.BoundCallbackObservable=BoundCallbackObservable},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),AsyncSubject=function(_super){function AsyncSubject(){_super.apply(this,arguments),this.value=null,this.hasNext=!1}return __extends(AsyncSubject,_super),AsyncSubject.prototype._subscribe=function(subscriber){return this.hasCompleted&&this.hasNext&&subscriber.next(this.value),_super.prototype._subscribe.call(this,subscriber)},AsyncSubject.prototype._next=function(value){this.value=value,this.hasNext=!0},AsyncSubject.prototype._complete=function(){var index=-1,observers=this.observers,len=observers.length;if(this.isUnsubscribed=!0,this.hasNext)for(;++index<len;){var o=observers[index];o.next(this.value),o.complete()}else for(;++index<len;)observers[index].complete();this.isUnsubscribed=!1,this.unsubscribe()},AsyncSubject}(Subject_1.Subject);exports.AsyncSubject=AsyncSubject},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bindNodeCallback_1=__webpack_require__(330);Observable_1.Observable.bindNodeCallback=bindNodeCallback_1.bindNodeCallback},function(module,exports,__webpack_require__){"use strict";var BoundNodeCallbackObservable_1=__webpack_require__(331);exports.bindNodeCallback=BoundNodeCallbackObservable_1.BoundNodeCallbackObservable.create},function(module,exports,__webpack_require__){"use strict";function dispatch(state){var self=this,source=state.source,subscriber=state.subscriber,callbackFunc=source.callbackFunc,args=source.args,scheduler=source.scheduler,subject=source.subject;if(!subject){subject=source.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject,err=innerArgs.shift();if(err)subject.error(err);else if(selector){var result_2=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_2===errorObject_1.errorObject?self.add(scheduler.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:subject})):self.add(scheduler.schedule(dispatchNext,0,{value:result_2,subject:subject}))}else{var value=1===innerArgs.length?innerArgs[0]:innerArgs;self.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};handler.source=source;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}self.add(subject.subscribe(subscriber))}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),AsyncSubject_1=__webpack_require__(328),BoundNodeCallbackObservable=function(_super){function BoundNodeCallbackObservable(callbackFunc,selector,args,scheduler){_super.call(this),this.callbackFunc=callbackFunc,this.selector=selector,this.args=args,this.scheduler=scheduler}return __extends(BoundNodeCallbackObservable,_super),BoundNodeCallbackObservable.create=function(func,selector,scheduler){return void 0===selector&&(selector=void 0),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return new BoundNodeCallbackObservable(func,selector,args,scheduler)}},BoundNodeCallbackObservable.prototype._subscribe=function(subscriber){var callbackFunc=this.callbackFunc,args=this.args,scheduler=this.scheduler,subject=this.subject;if(scheduler)return scheduler.schedule(dispatch,0,{source:this,subscriber:subscriber});if(!subject){subject=this.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject,err=innerArgs.shift();if(err)subject.error(err);else if(selector){var result_1=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_1===errorObject_1.errorObject?subject.error(errorObject_1.errorObject.e):(subject.next(result_1),subject.complete())}else subject.next(1===innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};handler.source=this;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}return subject.subscribe(subscriber)},BoundNodeCallbackObservable}(Observable_1.Observable);exports.BoundNodeCallbackObservable=BoundNodeCallbackObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),combineLatest_1=__webpack_require__(333);Observable_1.Observable.combineLatest=combineLatest_1.combineLatestStatic},function(module,exports,__webpack_require__){"use strict";function combineLatest(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=null;return"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),observables.unshift(this),new ArrayObservable_1.ArrayObservable(observables).lift(new CombineLatestOperator(project))}function combineLatestStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=null,scheduler=null;return isScheduler_1.isScheduler(observables[observables.length-1])&&(scheduler=observables.pop()),"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new CombineLatestOperator(project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArrayObservable_1=__webpack_require__(334),isArray_1=__webpack_require__(48),isScheduler_1=__webpack_require__(337),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.combineLatest=combineLatest,exports.combineLatestStatic=combineLatestStatic;var CombineLatestOperator=function(){function CombineLatestOperator(project){this.project=project}return CombineLatestOperator.prototype.call=function(subscriber,source){return source._subscribe(new CombineLatestSubscriber(subscriber,this.project))},CombineLatestOperator}();exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(_super){function CombineLatestSubscriber(destination,project){_super.call(this,destination),this.project=project,this.active=0,this.values=[],this.observables=[],this.toRespond=[]}return __extends(CombineLatestSubscriber,_super),CombineLatestSubscriber.prototype._next=function(observable){var toRespond=this.toRespond;toRespond.push(toRespond.length),this.observables.push(observable)},CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len;for(var i=0;len>i;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i))}}},CombineLatestSubscriber.prototype.notifyComplete=function(unused){0===(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var values=this.values;values[outerIndex]=innerValue;var toRespond=this.toRespond;if(toRespond.length>0){var found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}0===toRespond.length&&(this.project?this._tryProject(values):this.destination.next(values))},CombineLatestSubscriber.prototype._tryProject=function(values){var result;try{result=this.project.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)},CombineLatestSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.CombineLatestSubscriber=CombineLatestSubscriber},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ScalarObservable_1=__webpack_require__(335),EmptyObservable_1=__webpack_require__(336),isScheduler_1=__webpack_require__(337),ArrayObservable=function(_super){function ArrayObservable(array,scheduler){_super.call(this),this.array=array,this.scheduler=scheduler,scheduler||1!==array.length||(this._isScalar=!0,this.value=array[0])}return __extends(ArrayObservable,_super),ArrayObservable.create=function(array,scheduler){return new ArrayObservable(array,scheduler)},ArrayObservable.of=function(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i-0]=arguments[_i];var scheduler=array[array.length-1];isScheduler_1.isScheduler(scheduler)?array.pop():scheduler=null;var len=array.length;return len>1?new ArrayObservable(array,scheduler):1===len?new ScalarObservable_1.ScalarObservable(array[0],scheduler):new EmptyObservable_1.EmptyObservable(scheduler)},ArrayObservable.dispatch=function(state){var array=state.array,index=state.index,count=state.count,subscriber=state.subscriber;return index>=count?void subscriber.complete():(subscriber.next(array[index]),void(subscriber.isUnsubscribed||(state.index=index+1,this.schedule(state))))},ArrayObservable.prototype._subscribe=function(subscriber){var index=0,array=this.array,count=array.length,scheduler=this.scheduler;if(scheduler)return scheduler.schedule(ArrayObservable.dispatch,0,{array:array,index:index,count:count,subscriber:subscriber});for(var i=0;count>i&&!subscriber.isUnsubscribed;i++)subscriber.next(array[i]);subscriber.complete()},ArrayObservable}(Observable_1.Observable);exports.ArrayObservable=ArrayObservable},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ScalarObservable=function(_super){function ScalarObservable(value,scheduler){_super.call(this),this.value=value,this.scheduler=scheduler,this._isScalar=!0}return __extends(ScalarObservable,_super),ScalarObservable.create=function(value,scheduler){return new ScalarObservable(value,scheduler)},ScalarObservable.dispatch=function(state){var done=state.done,value=state.value,subscriber=state.subscriber;return done?void subscriber.complete():(subscriber.next(value),void(subscriber.isUnsubscribed||(state.done=!0,this.schedule(state))))},ScalarObservable.prototype._subscribe=function(subscriber){var value=this.value,scheduler=this.scheduler;return scheduler?scheduler.schedule(ScalarObservable.dispatch,0,{done:!1,value:value,subscriber:subscriber}):(subscriber.next(value),void(subscriber.isUnsubscribed||subscriber.complete()))},ScalarObservable}(Observable_1.Observable);exports.ScalarObservable=ScalarObservable},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),EmptyObservable=function(_super){function EmptyObservable(scheduler){_super.call(this),this.scheduler=scheduler}return __extends(EmptyObservable,_super),EmptyObservable.create=function(scheduler){return new EmptyObservable(scheduler)},EmptyObservable.dispatch=function(arg){var subscriber=arg.subscriber;subscriber.complete()},EmptyObservable.prototype._subscribe=function(subscriber){var scheduler=this.scheduler;return scheduler?scheduler.schedule(EmptyObservable.dispatch,0,{subscriber:subscriber}):void subscriber.complete()},EmptyObservable}(Observable_1.Observable);exports.EmptyObservable=EmptyObservable},function(module,exports){"use strict";function isScheduler(value){return value&&"function"==typeof value.schedule}exports.isScheduler=isScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),OuterSubscriber=function(_super){function OuterSubscriber(){_super.apply(this,arguments)}return __extends(OuterSubscriber,_super),OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},OuterSubscriber.prototype.notifyError=function(error,innerSub){this.destination.error(error)},OuterSubscriber.prototype.notifyComplete=function(innerSub){this.destination.complete()},OuterSubscriber}(Subscriber_1.Subscriber);exports.OuterSubscriber=OuterSubscriber},function(module,exports,__webpack_require__){"use strict";function subscribeToResult(outerSubscriber,result,outerValue,outerIndex){var destination=new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex);if(!destination.isUnsubscribed){if(result instanceof Observable_1.Observable)return result._isScalar?(destination.next(result.value),void destination.complete()):result.subscribe(destination);if(isArray_1.isArray(result)){for(var i=0,len=result.length;len>i&&!destination.isUnsubscribed;i++)destination.next(result[i]);destination.isUnsubscribed||destination.complete()}else{if(isPromise_1.isPromise(result))return result.then(function(value){destination.isUnsubscribed||(destination.next(value),destination.complete())},function(err){return destination.error(err)}).then(null,function(err){root_1.root.setTimeout(function(){throw err})}),destination;if("function"==typeof result[iterator_1.$$iterator]){for(var _i=0,_a=result;_i<_a.length;_i++){var item=_a[_i];if(destination.next(item),destination.isUnsubscribed)break}destination.isUnsubscribed||destination.complete()}else if("function"==typeof result[$$observable]){var obs=result[$$observable]();if("function"==typeof obs.subscribe)return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex));destination.error("invalid observable")}else destination.error(new TypeError("unknown type returned"))}}}var root_1=__webpack_require__(42),isArray_1=__webpack_require__(48),isPromise_1=__webpack_require__(340),Observable_1=__webpack_require__(41),iterator_1=__webpack_require__(341),InnerSubscriber_1=__webpack_require__(342),$$observable=__webpack_require__(55);exports.subscribeToResult=subscribeToResult},function(module,exports){"use strict";function isPromise(value){return value&&"function"!=typeof value.subscribe&&"function"==typeof value.then}exports.isPromise=isPromise},function(module,exports,__webpack_require__){"use strict";var root_1=__webpack_require__(42),Symbol=root_1.root.Symbol;if("function"==typeof Symbol)Symbol.iterator?exports.$$iterator=Symbol.iterator:"function"==typeof Symbol["for"]&&(exports.$$iterator=Symbol["for"]("iterator"));else if(root_1.root.Set&&"function"==typeof(new root_1.root.Set)["@@iterator"])exports.$$iterator="@@iterator";else if(root_1.root.Map)for(var keys=Object.getOwnPropertyNames(root_1.root.Map.prototype),i=0;i<keys.length;++i){var key=keys[i];if("entries"!==key&&"size"!==key&&root_1.root.Map.prototype[key]===root_1.root.Map.prototype.entries){exports.$$iterator=key;break}}else exports.$$iterator="@@iterator"},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),InnerSubscriber=function(_super){function InnerSubscriber(parent,outerValue,outerIndex){_super.call(this),this.parent=parent,this.outerValue=outerValue,this.outerIndex=outerIndex,this.index=0}return __extends(InnerSubscriber,_super),InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(Subscriber_1.Subscriber);exports.InnerSubscriber=InnerSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concat_1=__webpack_require__(344);Observable_1.Observable.concat=concat_1.concat},function(module,exports,__webpack_require__){"use strict";var concat_1=__webpack_require__(345);exports.concat=concat_1.concatStatic},function(module,exports,__webpack_require__){"use strict";function concat(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return concatStatic.apply(void 0,[this].concat(observables))}function concatStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var scheduler=null,args=observables;return isScheduler_1.isScheduler(args[observables.length-1])&&(scheduler=args.pop()),new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new mergeAll_1.MergeAllOperator(1))}var isScheduler_1=__webpack_require__(337),ArrayObservable_1=__webpack_require__(334),mergeAll_1=__webpack_require__(346);exports.concat=concat,exports.concatStatic=concatStatic},function(module,exports,__webpack_require__){"use strict";function mergeAll(concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.lift(new MergeAllOperator(concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.mergeAll=mergeAll;var MergeAllOperator=function(){function MergeAllOperator(concurrent){this.concurrent=concurrent}return MergeAllOperator.prototype.call=function(observer,source){return source._subscribe(new MergeAllSubscriber(observer,this.concurrent))},MergeAllOperator}();exports.MergeAllOperator=MergeAllOperator;var MergeAllSubscriber=function(_super){function MergeAllSubscriber(destination,concurrent){_super.call(this,destination),this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0}return __extends(MergeAllSubscriber,_super),MergeAllSubscriber.prototype._next=function(observable){this.active<this.concurrent?(this.active++,this.add(subscribeToResult_1.subscribeToResult(this,observable))):this.buffer.push(observable)},MergeAllSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeAllSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeAllSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeAllSubscriber=MergeAllSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),defer_1=__webpack_require__(348);Observable_1.Observable.defer=defer_1.defer},function(module,exports,__webpack_require__){"use strict";var DeferObservable_1=__webpack_require__(349);exports.defer=DeferObservable_1.DeferObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338),DeferObservable=function(_super){function DeferObservable(observableFactory){_super.call(this),this.observableFactory=observableFactory}return __extends(DeferObservable,_super),DeferObservable.create=function(observableFactory){return new DeferObservable(observableFactory)},DeferObservable.prototype._subscribe=function(subscriber){return new DeferSubscriber(subscriber,this.observableFactory)},DeferObservable}(Observable_1.Observable);exports.DeferObservable=DeferObservable;var DeferSubscriber=function(_super){function DeferSubscriber(destination,factory){_super.call(this,destination),this.factory=factory,this.tryDefer()}return __extends(DeferSubscriber,_super),DeferSubscriber.prototype.tryDefer=function(){try{this._callFactory()}catch(err){this._error(err)}},DeferSubscriber.prototype._callFactory=function(){var result=this.factory();result&&this.add(subscribeToResult_1.subscribeToResult(this,result))},DeferSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),empty_1=__webpack_require__(351);Observable_1.Observable.empty=empty_1.empty},function(module,exports,__webpack_require__){"use strict";var EmptyObservable_1=__webpack_require__(336);exports.empty=EmptyObservable_1.EmptyObservable.create},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),forkJoin_1=__webpack_require__(353);Observable_1.Observable.forkJoin=forkJoin_1.forkJoin},function(module,exports,__webpack_require__){"use strict";var ForkJoinObservable_1=__webpack_require__(354);exports.forkJoin=ForkJoinObservable_1.ForkJoinObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),EmptyObservable_1=__webpack_require__(336),isArray_1=__webpack_require__(48),subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338),ForkJoinObservable=function(_super){function ForkJoinObservable(sources,resultSelector){_super.call(this),this.sources=sources,this.resultSelector=resultSelector}return __extends(ForkJoinObservable,_super),ForkJoinObservable.create=function(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i-0]=arguments[_i];if(null===sources||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var resultSelector=null;return"function"==typeof sources[sources.length-1]&&(resultSelector=sources.pop()),1===sources.length&&isArray_1.isArray(sources[0])&&(sources=sources[0]),0===sources.length?new EmptyObservable_1.EmptyObservable:new ForkJoinObservable(sources,resultSelector)},ForkJoinObservable.prototype._subscribe=function(subscriber){return new ForkJoinSubscriber(subscriber,this.sources,this.resultSelector)},ForkJoinObservable}(Observable_1.Observable);exports.ForkJoinObservable=ForkJoinObservable;var ForkJoinSubscriber=function(_super){function ForkJoinSubscriber(destination,sources,resultSelector){_super.call(this,destination),this.sources=sources,this.resultSelector=resultSelector,this.completed=0,this.haveValues=0;var len=sources.length;this.total=len,this.values=new Array(len);for(var i=0;len>i;i++){var source=sources[i],innerSubscription=subscribeToResult_1.subscribeToResult(this,source,null,i);innerSubscription&&(innerSubscription.outerIndex=i,this.add(innerSubscription))}}return __extends(ForkJoinSubscriber,_super),ForkJoinSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue,innerSub._hasValue||(innerSub._hasValue=!0,this.haveValues++)},ForkJoinSubscriber.prototype.notifyComplete=function(innerSub){var destination=this.destination,_a=this,haveValues=_a.haveValues,resultSelector=_a.resultSelector,values=_a.values,len=values.length;if(!innerSub._hasValue)return void destination.complete();if(this.completed++,this.completed===len){if(haveValues===len){var value=resultSelector?resultSelector.apply(this,values):values;destination.next(value)}destination.complete()}},ForkJoinSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),from_1=__webpack_require__(356);Observable_1.Observable.from=from_1.from},function(module,exports,__webpack_require__){"use strict";var FromObservable_1=__webpack_require__(357);exports.from=FromObservable_1.FromObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isArray_1=__webpack_require__(48),isFunction_1=__webpack_require__(46),isPromise_1=__webpack_require__(340),isScheduler_1=__webpack_require__(337),PromiseObservable_1=__webpack_require__(60),IteratorObservable_1=__webpack_require__(358),ArrayObservable_1=__webpack_require__(334),ArrayLikeObservable_1=__webpack_require__(359),iterator_1=__webpack_require__(341),Observable_1=__webpack_require__(41),observeOn_1=__webpack_require__(360),$$observable=__webpack_require__(55),isArrayLike=function(x){return x&&"number"==typeof x.length},FromObservable=function(_super){function FromObservable(ish,scheduler){_super.call(this,null),this.ish=ish,this.scheduler=scheduler}return __extends(FromObservable,_super),FromObservable.create=function(ish,mapFnOrScheduler,thisArg,lastScheduler){var scheduler=null,mapFn=null;if(isFunction_1.isFunction(mapFnOrScheduler)?(scheduler=lastScheduler||null,mapFn=mapFnOrScheduler):isScheduler_1.isScheduler(scheduler)&&(scheduler=mapFnOrScheduler),null!=ish){if("function"==typeof ish[$$observable])return ish instanceof Observable_1.Observable&&!scheduler?ish:new FromObservable(ish,scheduler);if(isArray_1.isArray(ish))return new ArrayObservable_1.ArrayObservable(ish,scheduler);if(isPromise_1.isPromise(ish))return new PromiseObservable_1.PromiseObservable(ish,scheduler);if("function"==typeof ish[iterator_1.$$iterator]||"string"==typeof ish)return new IteratorObservable_1.IteratorObservable(ish,null,null,scheduler);if(isArrayLike(ish))return new ArrayLikeObservable_1.ArrayLikeObservable(ish,mapFn,thisArg,scheduler)}throw new TypeError((null!==ish&&typeof ish||ish)+" is not observable")},FromObservable.prototype._subscribe=function(subscriber){var ish=this.ish,scheduler=this.scheduler;return null==scheduler?ish[$$observable]().subscribe(subscriber):ish[$$observable]().subscribe(new observeOn_1.ObserveOnSubscriber(subscriber,scheduler,0))},FromObservable}(Observable_1.Observable);exports.FromObservable=FromObservable},function(module,exports,__webpack_require__){"use strict";function getIterator(obj){var i=obj[iterator_1.$$iterator];if(!i&&"string"==typeof obj)return new StringIterator(obj);if(!i&&void 0!==obj.length)return new ArrayIterator(obj);if(!i)throw new TypeError("Object is not iterable");return obj[iterator_1.$$iterator]()}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),0>=len?0:len>maxSafeInteger?maxSafeInteger:len):len}function numberIsFinite(value){return"number"==typeof value&&root_1.root.isFinite(value)}function sign(value){var valueAsNumber=+value;return 0===valueAsNumber?valueAsNumber:isNaN(valueAsNumber)?valueAsNumber:0>valueAsNumber?-1:1}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=__webpack_require__(42),isObject_1=__webpack_require__(49),tryCatch_1=__webpack_require__(50),Observable_1=__webpack_require__(41),isFunction_1=__webpack_require__(46),iterator_1=__webpack_require__(341),errorObject_1=__webpack_require__(51),IteratorObservable=function(_super){function IteratorObservable(iterator,project,thisArg,scheduler){if(_super.call(this),null==iterator)throw new Error("iterator cannot be null.");if(isObject_1.isObject(project))this.thisArg=project,this.scheduler=thisArg;else if(isFunction_1.isFunction(project))this.project=project,this.thisArg=thisArg,this.scheduler=scheduler;else if(null!=project)throw new Error("When provided, `project` must be a function.");this.iterator=getIterator(iterator)}return __extends(IteratorObservable,_super),IteratorObservable.create=function(iterator,project,thisArg,scheduler){return new IteratorObservable(iterator,project,thisArg,scheduler)},IteratorObservable.dispatch=function(state){var index=state.index,hasError=state.hasError,thisArg=state.thisArg,project=state.project,iterator=state.iterator,subscriber=state.subscriber;if(hasError)return void subscriber.error(state.error);var result=iterator.next();return result.done?void subscriber.complete():(project?(result=tryCatch_1.tryCatch(project).call(thisArg,result.value,index),result===errorObject_1.errorObject?(state.error=errorObject_1.errorObject.e,state.hasError=!0):(subscriber.next(result),state.index=index+1)):(subscriber.next(result.value),state.index=index+1),void(subscriber.isUnsubscribed||this.schedule(state)))},IteratorObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,iterator=_a.iterator,project=_a.project,thisArg=_a.thisArg,scheduler=_a.scheduler;if(scheduler)return scheduler.schedule(IteratorObservable.dispatch,0,{index:index,thisArg:thisArg,project:project,iterator:iterator,subscriber:subscriber});for(;;){var result=iterator.next();if(result.done){subscriber.complete();break}if(project){if(result=tryCatch_1.tryCatch(project).call(thisArg,result.value,index++),result===errorObject_1.errorObject){subscriber.error(errorObject_1.errorObject.e);break}subscriber.next(result)}else subscriber.next(result.value);if(subscriber.isUnsubscribed)break}},IteratorObservable}(Observable_1.Observable);exports.IteratorObservable=IteratorObservable;var StringIterator=function(){function StringIterator(str,idx,len){void 0===idx&&(idx=0),void 0===len&&(len=str.length),this.str=str,this.idx=idx,this.len=len}return StringIterator.prototype[iterator_1.$$iterator]=function(){return this},StringIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},StringIterator}(),ArrayIterator=function(){function ArrayIterator(arr,idx,len){void 0===idx&&(idx=0),void 0===len&&(len=toLength(arr)),this.arr=arr,this.idx=idx,this.len=len}return ArrayIterator.prototype[iterator_1.$$iterator]=function(){return this},ArrayIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},ArrayIterator}(),maxSafeInteger=Math.pow(2,53)-1},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ScalarObservable_1=__webpack_require__(335),EmptyObservable_1=__webpack_require__(336),ArrayLikeObservable=function(_super){function ArrayLikeObservable(arrayLike,mapFn,thisArg,scheduler){_super.call(this),this.arrayLike=arrayLike,this.scheduler=scheduler,mapFn||scheduler||1!==arrayLike.length||(this._isScalar=!0,this.value=arrayLike[0]),mapFn&&(this.mapFn=mapFn.bind(thisArg))}return __extends(ArrayLikeObservable,_super),ArrayLikeObservable.create=function(arrayLike,mapFn,thisArg,scheduler){var length=arrayLike.length;return 0===length?new EmptyObservable_1.EmptyObservable:1!==length||mapFn?new ArrayLikeObservable(arrayLike,mapFn,thisArg,scheduler):new ScalarObservable_1.ScalarObservable(arrayLike[0],scheduler)},ArrayLikeObservable.dispatch=function(state){var arrayLike=state.arrayLike,index=state.index,length=state.length,mapFn=state.mapFn,subscriber=state.subscriber;if(!subscriber.isUnsubscribed){if(index>=length)return void subscriber.complete();var result=mapFn?mapFn(arrayLike[index],index):arrayLike[index];subscriber.next(result),state.index=index+1,this.schedule(state)}},ArrayLikeObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,arrayLike=_a.arrayLike,mapFn=_a.mapFn,scheduler=_a.scheduler,length=arrayLike.length;if(scheduler)return scheduler.schedule(ArrayLikeObservable.dispatch,0,{arrayLike:arrayLike,index:index,length:length,mapFn:mapFn,subscriber:subscriber});for(var i=0;length>i&&!subscriber.isUnsubscribed;i++){var result=mapFn?mapFn(arrayLike[i],i):arrayLike[i];subscriber.next(result)}subscriber.complete()},ArrayLikeObservable}(Observable_1.Observable);exports.ArrayLikeObservable=ArrayLikeObservable},function(module,exports,__webpack_require__){"use strict";function observeOn(scheduler,delay){return void 0===delay&&(delay=0),this.lift(new ObserveOnOperator(scheduler,delay))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Notification_1=__webpack_require__(361);exports.observeOn=observeOn;var ObserveOnOperator=function(){function ObserveOnOperator(scheduler,delay){void 0===delay&&(delay=0),this.scheduler=scheduler,this.delay=delay}return ObserveOnOperator.prototype.call=function(subscriber,source){return source._subscribe(new ObserveOnSubscriber(subscriber,this.scheduler,this.delay))},ObserveOnOperator}();exports.ObserveOnOperator=ObserveOnOperator;var ObserveOnSubscriber=function(_super){function ObserveOnSubscriber(destination,scheduler,delay){void 0===delay&&(delay=0),_super.call(this,destination),this.scheduler=scheduler,this.delay=delay}return __extends(ObserveOnSubscriber,_super),ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination)},ObserveOnSubscriber.prototype.scheduleMessage=function(notification){this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))},ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(Notification_1.Notification.createNext(value))},ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(Notification_1.Notification.createError(err))},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete())},ObserveOnSubscriber}(Subscriber_1.Subscriber);exports.ObserveOnSubscriber=ObserveOnSubscriber;var ObserveOnMessage=function(){function ObserveOnMessage(notification,destination){this.notification=notification,this.destination=destination}return ObserveOnMessage}();exports.ObserveOnMessage=ObserveOnMessage},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),Notification=function(){function Notification(kind,value,exception){this.kind=kind,this.value=value,this.exception=exception,this.hasValue="N"===kind}return Notification.prototype.observe=function(observer){switch(this.kind){case"N":return observer.next&&observer.next(this.value);case"E":return observer.error&&observer.error(this.exception);case"C":return observer.complete&&observer.complete()}},Notification.prototype["do"]=function(next,error,complete){var kind=this.kind;switch(kind){case"N":return next&&next(this.value);case"E":return error&&error(this.exception);case"C":return complete&&complete()}},Notification.prototype.accept=function(nextOrObserver,error,complete){return nextOrObserver&&"function"==typeof nextOrObserver.next?this.observe(nextOrObserver):this["do"](nextOrObserver,error,complete)},Notification.prototype.toObservable=function(){var kind=this.kind;switch(kind){case"N":return Observable_1.Observable.of(this.value);case"E":return Observable_1.Observable["throw"](this.exception);case"C":return Observable_1.Observable.empty()}},Notification.createNext=function(value){return"undefined"!=typeof value?new Notification("N",value):this.undefinedValueNotification},Notification.createError=function(err){return new Notification("E",void 0,err)},Notification.createComplete=function(){return this.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}();exports.Notification=Notification},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),fromEvent_1=__webpack_require__(363);Observable_1.Observable.fromEvent=fromEvent_1.fromEvent},function(module,exports,__webpack_require__){"use strict";var FromEventObservable_1=__webpack_require__(364);exports.fromEvent=FromEventObservable_1.FromEventObservable.create},function(module,exports,__webpack_require__){"use strict";function isNodeStyleEventEmmitter(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}function isJQueryStyleEventEmitter(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}function isNodeList(sourceObj){return!!sourceObj&&"[object NodeList]"===sourceObj.toString()}function isHTMLCollection(sourceObj){return!!sourceObj&&"[object HTMLCollection]"===sourceObj.toString()}function isEventTarget(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),Subscription_1=__webpack_require__(47),FromEventObservable=function(_super){function FromEventObservable(sourceObj,eventName,selector){_super.call(this),this.sourceObj=sourceObj,this.eventName=eventName,this.selector=selector}return __extends(FromEventObservable,_super),FromEventObservable.create=function(target,eventName,selector){return new FromEventObservable(target,eventName,selector)},FromEventObservable.setupSubscription=function(sourceObj,eventName,handler,subscriber){var unsubscribe;if(isNodeList(sourceObj)||isHTMLCollection(sourceObj))for(var i=0,len=sourceObj.length;len>i;i++)FromEventObservable.setupSubscription(sourceObj[i],eventName,handler,subscriber);else isEventTarget(sourceObj)?(sourceObj.addEventListener(eventName,handler),unsubscribe=function(){return sourceObj.removeEventListener(eventName,handler)}):isJQueryStyleEventEmitter(sourceObj)?(sourceObj.on(eventName,handler),unsubscribe=function(){return sourceObj.off(eventName,handler)}):isNodeStyleEventEmmitter(sourceObj)&&(sourceObj.addListener(eventName,handler),unsubscribe=function(){return sourceObj.removeListener(eventName,handler)});subscriber.add(new Subscription_1.Subscription(unsubscribe))},FromEventObservable.prototype._subscribe=function(subscriber){var sourceObj=this.sourceObj,eventName=this.eventName,selector=this.selector,handler=selector?function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var result=tryCatch_1.tryCatch(selector).apply(void 0,args);result===errorObject_1.errorObject?subscriber.error(errorObject_1.errorObject.e):subscriber.next(result)}:function(e){return subscriber.next(e)};FromEventObservable.setupSubscription(sourceObj,eventName,handler,subscriber)},FromEventObservable}(Observable_1.Observable);exports.FromEventObservable=FromEventObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),fromEventPattern_1=__webpack_require__(366);Observable_1.Observable.fromEventPattern=fromEventPattern_1.fromEventPattern},function(module,exports,__webpack_require__){"use strict";var FromEventPatternObservable_1=__webpack_require__(367);exports.fromEventPattern=FromEventPatternObservable_1.FromEventPatternObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),Subscription_1=__webpack_require__(47),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),FromEventPatternObservable=function(_super){function FromEventPatternObservable(addHandler,removeHandler,selector){_super.call(this),this.addHandler=addHandler,this.removeHandler=removeHandler,this.selector=selector}return __extends(FromEventPatternObservable,_super),FromEventPatternObservable.create=function(addHandler,removeHandler,selector){return new FromEventPatternObservable(addHandler,removeHandler,selector)},FromEventPatternObservable.prototype._subscribe=function(subscriber){var addHandler=this.addHandler,removeHandler=this.removeHandler,selector=this.selector,handler=selector?function(e){var result=tryCatch_1.tryCatch(selector).apply(null,arguments);result===errorObject_1.errorObject?subscriber.error(result.e):subscriber.next(result)}:function(e){subscriber.next(e)},result=tryCatch_1.tryCatch(addHandler)(handler);result===errorObject_1.errorObject&&subscriber.error(result.e),subscriber.add(new Subscription_1.Subscription(function(){removeHandler(handler)}))},FromEventPatternObservable}(Observable_1.Observable);exports.FromEventPatternObservable=FromEventPatternObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),fromPromise_1=__webpack_require__(369);Observable_1.Observable.fromPromise=fromPromise_1.fromPromise},function(module,exports,__webpack_require__){"use strict";var PromiseObservable_1=__webpack_require__(60);exports.fromPromise=PromiseObservable_1.PromiseObservable.create},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),GenerateObservable_1=__webpack_require__(371);Observable_1.Observable.generate=GenerateObservable_1.GenerateObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),isScheduler_1=__webpack_require__(337),selfSelector=function(value){return value},GenerateObservable=function(_super){function GenerateObservable(initialState,condition,iterate,resultSelector,scheduler){_super.call(this),this.initialState=initialState,this.condition=condition,this.iterate=iterate,this.resultSelector=resultSelector,this.scheduler=scheduler}return __extends(GenerateObservable,_super),GenerateObservable.create=function(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){return 1==arguments.length?new GenerateObservable(initialStateOrOptions.initialState,initialStateOrOptions.condition,initialStateOrOptions.iterate,initialStateOrOptions.resultSelector||selfSelector,initialStateOrOptions.scheduler):void 0===resultSelectorOrObservable||isScheduler_1.isScheduler(resultSelectorOrObservable)?new GenerateObservable(initialStateOrOptions,condition,iterate,selfSelector,resultSelectorOrObservable):new GenerateObservable(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler)},GenerateObservable.prototype._subscribe=function(subscriber){var state=this.initialState;if(this.scheduler)return this.scheduler.schedule(GenerateObservable.dispatch,0,{subscriber:subscriber,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:state});for(var _a=this,condition=_a.condition,resultSelector=_a.resultSelector,iterate=_a.iterate;;){if(condition){var conditionResult=void 0;try{conditionResult=condition(state)}catch(err){return void subscriber.error(err)}if(!conditionResult){subscriber.complete();break}}var value=void 0;try{value=resultSelector(state)}catch(err){return void subscriber.error(err)}if(subscriber.next(value),subscriber.isUnsubscribed)break;try{state=iterate(state)}catch(err){return void subscriber.error(err)}}},GenerateObservable.dispatch=function(state){var subscriber=state.subscriber,condition=state.condition;if(!subscriber.isUnsubscribed){if(state.needIterate)try{state.state=state.iterate(state.state)}catch(err){return void subscriber.error(err)}else state.needIterate=!0;if(condition){var conditionResult=void 0;try{conditionResult=condition(state.state)}catch(err){return void subscriber.error(err)}if(!conditionResult)return void subscriber.complete();if(subscriber.isUnsubscribed)return}var value;try{value=state.resultSelector(state.state)}catch(err){return void subscriber.error(err)}if(!subscriber.isUnsubscribed&&(subscriber.next(value),!subscriber.isUnsubscribed))return this.schedule(state)}},GenerateObservable}(Observable_1.Observable);exports.GenerateObservable=GenerateObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),interval_1=__webpack_require__(373);Observable_1.Observable.interval=interval_1.interval},function(module,exports,__webpack_require__){"use strict";var IntervalObservable_1=__webpack_require__(374);exports.interval=IntervalObservable_1.IntervalObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isNumeric_1=__webpack_require__(375),Observable_1=__webpack_require__(41),async_1=__webpack_require__(376),IntervalObservable=function(_super){function IntervalObservable(period,scheduler){void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),_super.call(this),this.period=period,this.scheduler=scheduler,(!isNumeric_1.isNumeric(period)||0>period)&&(this.period=0),scheduler&&"function"==typeof scheduler.schedule||(this.scheduler=async_1.async)}return __extends(IntervalObservable,_super),IntervalObservable.create=function(period,scheduler){return void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),new IntervalObservable(period,scheduler)},IntervalObservable.dispatch=function(state){var index=state.index,subscriber=state.subscriber,period=state.period;subscriber.next(index),subscriber.isUnsubscribed||(state.index+=1,this.schedule(state,period))},IntervalObservable.prototype._subscribe=function(subscriber){var index=0,period=this.period,scheduler=this.scheduler;subscriber.add(scheduler.schedule(IntervalObservable.dispatch,period,{index:index,subscriber:subscriber,period:period}))},IntervalObservable}(Observable_1.Observable);exports.IntervalObservable=IntervalObservable},function(module,exports,__webpack_require__){"use strict";function isNumeric(val){return!isArray_1.isArray(val)&&val-parseFloat(val)+1>=0}var isArray_1=__webpack_require__(48);exports.isNumeric=isNumeric},function(module,exports,__webpack_require__){"use strict";var AsyncScheduler_1=__webpack_require__(377);exports.async=new AsyncScheduler_1.AsyncScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},FutureAction_1=__webpack_require__(378),QueueScheduler_1=__webpack_require__(379),AsyncScheduler=function(_super){function AsyncScheduler(){_super.apply(this,arguments)}return __extends(AsyncScheduler,_super),AsyncScheduler.prototype.scheduleNow=function(work,state){return new FutureAction_1.FutureAction(this,work).schedule(state,0)},AsyncScheduler}(QueueScheduler_1.QueueScheduler);exports.AsyncScheduler=AsyncScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=__webpack_require__(42),Subscription_1=__webpack_require__(47),FutureAction=function(_super){function FutureAction(scheduler,work){_super.call(this),this.scheduler=scheduler,this.work=work,this.pending=!1}return __extends(FutureAction,_super),FutureAction.prototype.execute=function(){if(this.isUnsubscribed)this.error=new Error("executing a cancelled action");else try{this.work(this.state)}catch(e){this.unsubscribe(),this.error=e}},FutureAction.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this.isUnsubscribed?this:this._schedule(state,delay)},FutureAction.prototype._schedule=function(state,delay){var _this=this;void 0===delay&&(delay=0),this.state=state,this.pending=!0;var id=this.id;return null!=id&&this.delay===delay?this:(this.delay=delay,null!=id&&(this.id=null,root_1.root.clearInterval(id)),this.id=root_1.root.setInterval(function(){_this.pending=!1;var _a=_this,id=_a.id,scheduler=_a.scheduler;scheduler.actions.push(_this),scheduler.flush(),_this.pending===!1&&null!=id&&(_this.id=null,root_1.root.clearInterval(id))},delay),this)},FutureAction.prototype._unsubscribe=function(){this.pending=!1;var _a=this,id=_a.id,scheduler=_a.scheduler,actions=scheduler.actions,index=actions.indexOf(this);null!=id&&(this.id=null,root_1.root.clearInterval(id)),-1!==index&&actions.splice(index,1),this.work=null,this.state=null,this.scheduler=null},FutureAction}(Subscription_1.Subscription);exports.FutureAction=FutureAction},function(module,exports,__webpack_require__){"use strict";var QueueAction_1=__webpack_require__(380),FutureAction_1=__webpack_require__(378),QueueScheduler=function(){function QueueScheduler(){this.active=!1,this.actions=[],this.scheduledId=null}return QueueScheduler.prototype.now=function(){return Date.now()},QueueScheduler.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var actions=this.actions,action=null;action=actions.shift();)if(action.execute(),action.error)throw this.active=!1,action.error;this.active=!1}},QueueScheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),0>=delay?this.scheduleNow(work,state):this.scheduleLater(work,delay,state)},QueueScheduler.prototype.scheduleNow=function(work,state){return new QueueAction_1.QueueAction(this,work).schedule(state)},QueueScheduler.prototype.scheduleLater=function(work,delay,state){return new FutureAction_1.FutureAction(this,work).schedule(state,delay)},QueueScheduler}();exports.QueueScheduler=QueueScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},FutureAction_1=__webpack_require__(378),QueueAction=function(_super){function QueueAction(){_super.apply(this,arguments)}return __extends(QueueAction,_super),QueueAction.prototype._schedule=function(state,delay){if(void 0===delay&&(delay=0),delay>0)return _super.prototype._schedule.call(this,state,delay);this.delay=delay,this.state=state;var scheduler=this.scheduler;return scheduler.actions.push(this),scheduler.flush(),this},QueueAction}(FutureAction_1.FutureAction);exports.QueueAction=QueueAction},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),merge_1=__webpack_require__(382);Observable_1.Observable.merge=merge_1.merge},function(module,exports,__webpack_require__){"use strict";var merge_1=__webpack_require__(383);exports.merge=merge_1.mergeStatic},function(module,exports,__webpack_require__){"use strict";function merge(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return observables.unshift(this),mergeStatic.apply(this,observables)}function mergeStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return isScheduler_1.isScheduler(last)?(scheduler=observables.pop(),observables.length>1&&"number"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):"number"==typeof last&&(concurrent=observables.pop()),1===observables.length?observables[0]:new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new mergeAll_1.MergeAllOperator(concurrent))}var ArrayObservable_1=__webpack_require__(334),mergeAll_1=__webpack_require__(346),isScheduler_1=__webpack_require__(337);exports.merge=merge,exports.mergeStatic=mergeStatic},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),race_1=__webpack_require__(385);Observable_1.Observable.race=race_1.raceStatic},function(module,exports,__webpack_require__){"use strict";function race(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return 1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),observables.unshift(this),raceStatic.apply(this,observables)}function raceStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];if(1===observables.length){if(!isArray_1.isArray(observables[0]))return observables[0];observables=observables[0]}return new ArrayObservable_1.ArrayObservable(observables).lift(new RaceOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d;
}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isArray_1=__webpack_require__(48),ArrayObservable_1=__webpack_require__(334),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.race=race,exports.raceStatic=raceStatic;var RaceOperator=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(subscriber,source){return source._subscribe(new RaceSubscriber(subscriber))},RaceOperator}();exports.RaceOperator=RaceOperator;var RaceSubscriber=function(_super){function RaceSubscriber(destination){_super.call(this,destination),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends(RaceSubscriber,_super),RaceSubscriber.prototype._next=function(observable){this.observables.push(observable)},RaceSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{for(var i=0;len>i;i++){var observable=observables[i],subscription=subscribeToResult_1.subscribeToResult(this,observable,observable,i);this.subscriptions&&(this.subscriptions.push(subscription),this.add(subscription))}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe(),this.remove(subscription)}this.subscriptions=null}this.destination.next(innerValue)},RaceSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.RaceSubscriber=RaceSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),never_1=__webpack_require__(387);Observable_1.Observable.never=never_1.never},function(module,exports,__webpack_require__){"use strict";var NeverObservable_1=__webpack_require__(388);exports.never=NeverObservable_1.NeverObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),noop_1=__webpack_require__(389),NeverObservable=function(_super){function NeverObservable(){_super.call(this)}return __extends(NeverObservable,_super),NeverObservable.create=function(){return new NeverObservable},NeverObservable.prototype._subscribe=function(subscriber){noop_1.noop()},NeverObservable}(Observable_1.Observable);exports.NeverObservable=NeverObservable},function(module,exports){"use strict";function noop(){}exports.noop=noop},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),of_1=__webpack_require__(391);Observable_1.Observable.of=of_1.of},function(module,exports,__webpack_require__){"use strict";var ArrayObservable_1=__webpack_require__(334);exports.of=ArrayObservable_1.ArrayObservable.of},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),range_1=__webpack_require__(393);Observable_1.Observable.range=range_1.range},function(module,exports,__webpack_require__){"use strict";var RangeObservable_1=__webpack_require__(394);exports.range=RangeObservable_1.RangeObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),RangeObservable=function(_super){function RangeObservable(start,count,scheduler){_super.call(this),this.start=start,this._count=count,this.scheduler=scheduler}return __extends(RangeObservable,_super),RangeObservable.create=function(start,count,scheduler){return void 0===start&&(start=0),void 0===count&&(count=0),new RangeObservable(start,count,scheduler)},RangeObservable.dispatch=function(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;return index>=count?void subscriber.complete():(subscriber.next(start),void(subscriber.isUnsubscribed||(state.index=index+1,state.start=start+1,this.schedule(state))))},RangeObservable.prototype._subscribe=function(subscriber){var index=0,start=this.start,count=this._count,scheduler=this.scheduler;if(scheduler)return scheduler.schedule(RangeObservable.dispatch,0,{index:index,count:count,start:start,subscriber:subscriber});for(;;){if(index++>=count){subscriber.complete();break}if(subscriber.next(start++),subscriber.isUnsubscribed)break}},RangeObservable}(Observable_1.Observable);exports.RangeObservable=RangeObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),throw_1=__webpack_require__(396);Observable_1.Observable["throw"]=throw_1._throw},function(module,exports,__webpack_require__){"use strict";var ErrorObservable_1=__webpack_require__(397);exports._throw=ErrorObservable_1.ErrorObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ErrorObservable=function(_super){function ErrorObservable(error,scheduler){_super.call(this),this.error=error,this.scheduler=scheduler}return __extends(ErrorObservable,_super),ErrorObservable.create=function(error,scheduler){return new ErrorObservable(error,scheduler)},ErrorObservable.dispatch=function(arg){var error=arg.error,subscriber=arg.subscriber;subscriber.error(error)},ErrorObservable.prototype._subscribe=function(subscriber){var error=this.error,scheduler=this.scheduler;return scheduler?scheduler.schedule(ErrorObservable.dispatch,0,{error:error,subscriber:subscriber}):void subscriber.error(error)},ErrorObservable}(Observable_1.Observable);exports.ErrorObservable=ErrorObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),timer_1=__webpack_require__(399);Observable_1.Observable.timer=timer_1.timer},function(module,exports,__webpack_require__){"use strict";var TimerObservable_1=__webpack_require__(400);exports.timer=TimerObservable_1.TimerObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isNumeric_1=__webpack_require__(375),Observable_1=__webpack_require__(41),async_1=__webpack_require__(376),isScheduler_1=__webpack_require__(337),isDate_1=__webpack_require__(401),TimerObservable=function(_super){function TimerObservable(dueTime,period,scheduler){void 0===dueTime&&(dueTime=0),_super.call(this),this.period=-1,this.dueTime=0,isNumeric_1.isNumeric(period)?this.period=Number(period)<1&&1||Number(period):isScheduler_1.isScheduler(period)&&(scheduler=period),isScheduler_1.isScheduler(scheduler)||(scheduler=async_1.async),this.scheduler=scheduler,this.dueTime=isDate_1.isDate(dueTime)?+dueTime-this.scheduler.now():dueTime}return __extends(TimerObservable,_super),TimerObservable.create=function(initialDelay,period,scheduler){return void 0===initialDelay&&(initialDelay=0),new TimerObservable(initialDelay,period,scheduler)},TimerObservable.dispatch=function(state){var index=state.index,period=state.period,subscriber=state.subscriber,action=this;if(subscriber.next(index),!subscriber.isUnsubscribed){if(-1===period)return subscriber.complete();state.index=index+1,action.schedule(state,period)}},TimerObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,period=_a.period,dueTime=_a.dueTime,scheduler=_a.scheduler;return scheduler.schedule(TimerObservable.dispatch,dueTime,{index:index,period:period,subscriber:subscriber})},TimerObservable}(Observable_1.Observable);exports.TimerObservable=TimerObservable},function(module,exports){"use strict";function isDate(value){return value instanceof Date&&!isNaN(+value)}exports.isDate=isDate},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),zip_1=__webpack_require__(403);Observable_1.Observable.zip=zip_1.zip},function(module,exports,__webpack_require__){"use strict";var zip_1=__webpack_require__(404);exports.zip=zip_1.zipStatic},function(module,exports,__webpack_require__){"use strict";function zipProto(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return observables.unshift(this),zipStatic.apply(this,observables)}function zipStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=observables[observables.length-1];return"function"==typeof project&&observables.pop(),new ArrayObservable_1.ArrayObservable(observables).lift(new ZipOperator(project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArrayObservable_1=__webpack_require__(334),isArray_1=__webpack_require__(48),Subscriber_1=__webpack_require__(45),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339),iterator_1=__webpack_require__(341);exports.zipProto=zipProto,exports.zipStatic=zipStatic;var ZipOperator=function(){function ZipOperator(project){this.project=project}return ZipOperator.prototype.call=function(subscriber,source){return source._subscribe(new ZipSubscriber(subscriber,this.project))},ZipOperator}();exports.ZipOperator=ZipOperator;var ZipSubscriber=function(_super){function ZipSubscriber(destination,project,values){void 0===values&&(values=Object.create(null)),_super.call(this,destination),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof project?project:null,this.values=values}return __extends(ZipSubscriber,_super),ZipSubscriber.prototype._next=function(value){var iterators=this.iterators,index=this.index++;isArray_1.isArray(value)?iterators.push(new StaticArrayIterator(value)):"function"==typeof value[iterator_1.$$iterator]?iterators.push(new StaticIterator(value[iterator_1.$$iterator]())):iterators.push(new ZipBufferIterator(this.destination,this,value,index))},ZipSubscriber.prototype._complete=function(){var iterators=this.iterators,len=iterators.length;this.active=len;for(var i=0;len>i;i++){var iterator=iterators[i];iterator.stillUnsubscribed?this.add(iterator.subscribe(iterator,i)):this.active--}},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var iterators=this.iterators,len=iterators.length,destination=this.destination,i=0;len>i;i++){var iterator=iterators[i];if("function"==typeof iterator.hasValue&&!iterator.hasValue())return}for(var shouldComplete=!1,args=[],i=0;len>i;i++){var iterator=iterators[i],result=iterator.next();if(iterator.hasCompleted()&&(shouldComplete=!0),result.done)return void destination.complete();args.push(result.value)}this.project?this._tryProject(args):destination.next(args),shouldComplete&&destination.complete()},ZipSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},ZipSubscriber}(Subscriber_1.Subscriber);exports.ZipSubscriber=ZipSubscriber;var StaticIterator=function(){function StaticIterator(iterator){this.iterator=iterator,this.nextResult=iterator.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var result=this.nextResult;return this.nextResult=this.iterator.next(),result},StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return nextResult&&nextResult.done},StaticIterator}(),StaticArrayIterator=function(){function StaticArrayIterator(array){this.array=array,this.index=0,this.length=0,this.length=array.length}return StaticArrayIterator.prototype[iterator_1.$$iterator]=function(){return this},StaticArrayIterator.prototype.next=function(value){var i=this.index++,array=this.array;return i<this.length?{value:array[i],done:!1}:{done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),ZipBufferIterator=function(_super){function ZipBufferIterator(destination,parent,observable,index){_super.call(this,destination),this.parent=parent,this.observable=observable,this.index=index,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return __extends(ZipBufferIterator,_super),ZipBufferIterator.prototype[iterator_1.$$iterator]=function(){return this},ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;return 0===buffer.length&&this.isComplete?{done:!0}:{value:buffer.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.buffer.push(innerValue),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(value,index){return subscribeToResult_1.subscribeToResult(this,this.observable,this,index)},ZipBufferIterator}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),buffer_1=__webpack_require__(406);Observable_1.Observable.prototype.buffer=buffer_1.buffer},function(module,exports,__webpack_require__){"use strict";function buffer(closingNotifier){return this.lift(new BufferOperator(closingNotifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.buffer=buffer;var BufferOperator=function(){function BufferOperator(closingNotifier){this.closingNotifier=closingNotifier}return BufferOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferSubscriber(subscriber,this.closingNotifier))},BufferOperator}(),BufferSubscriber=function(_super){function BufferSubscriber(destination,closingNotifier){_super.call(this,destination),this.buffer=[],this.add(subscribeToResult_1.subscribeToResult(this,closingNotifier))}return __extends(BufferSubscriber,_super),BufferSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var buffer=this.buffer;this.buffer=[],this.destination.next(buffer)},BufferSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferCount_1=__webpack_require__(408);Observable_1.Observable.prototype.bufferCount=bufferCount_1.bufferCount},function(module,exports,__webpack_require__){"use strict";function bufferCount(bufferSize,startBufferEvery){return void 0===startBufferEvery&&(startBufferEvery=null),this.lift(new BufferCountOperator(bufferSize,startBufferEvery))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.bufferCount=bufferCount;var BufferCountOperator=function(){function BufferCountOperator(bufferSize,startBufferEvery){this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery}return BufferCountOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferCountSubscriber(subscriber,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),BufferCountSubscriber=function(_super){function BufferCountSubscriber(destination,bufferSize,startBufferEvery){_super.call(this,destination),this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.buffers=[[]],this.count=0}return __extends(BufferCountSubscriber,_super),BufferCountSubscriber.prototype._next=function(value){var count=this.count+=1,destination=this.destination,bufferSize=this.bufferSize,startBufferEvery=null==this.startBufferEvery?bufferSize:this.startBufferEvery,buffers=this.buffers,len=buffers.length,remove=-1;count%startBufferEvery===0&&buffers.push([]);for(var i=0;len>i;i++){var buffer=buffers[i];buffer.push(value),buffer.length===bufferSize&&(remove=i,destination.next(buffer))}-1!==remove&&buffers.splice(remove,1)},BufferCountSubscriber.prototype._complete=function(){for(var destination=this.destination,buffers=this.buffers;buffers.length>0;){var buffer=buffers.shift();buffer.length>0&&destination.next(buffer)}_super.prototype._complete.call(this)},BufferCountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferTime_1=__webpack_require__(410);Observable_1.Observable.prototype.bufferTime=bufferTime_1.bufferTime},function(module,exports,__webpack_require__){"use strict";function bufferTime(bufferTimeSpan,bufferCreationInterval,scheduler){return void 0===bufferCreationInterval&&(bufferCreationInterval=null),void 0===scheduler&&(scheduler=async_1.async),this.lift(new BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,scheduler))}function dispatchBufferTimeSpanOnly(state){var subscriber=state.subscriber,prevBuffer=state.buffer;prevBuffer&&subscriber.closeBuffer(prevBuffer),state.buffer=subscriber.openBuffer(),subscriber.isUnsubscribed||this.schedule(state,state.bufferTimeSpan)}function dispatchBufferCreation(state){var bufferCreationInterval=state.bufferCreationInterval,bufferTimeSpan=state.bufferTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,buffer=subscriber.openBuffer(),action=this;subscriber.isUnsubscribed||(action.add(scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:subscriber,buffer:buffer})),action.schedule(state,bufferCreationInterval))}function dispatchBufferClose(arg){var subscriber=arg.subscriber,buffer=arg.buffer;subscriber.closeBuffer(buffer)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.bufferTime=bufferTime;var BufferTimeOperator=function(){function BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,scheduler){this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.scheduler=scheduler}return BufferTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferTimeSubscriber(subscriber,this.bufferTimeSpan,this.bufferCreationInterval,this.scheduler))},BufferTimeOperator}(),BufferTimeSubscriber=function(_super){function BufferTimeSubscriber(destination,bufferTimeSpan,bufferCreationInterval,scheduler){_super.call(this,destination),this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.scheduler=scheduler,this.buffers=[];var buffer=this.openBuffer();if(null!==bufferCreationInterval&&bufferCreationInterval>=0){var closeState={subscriber:this,buffer:buffer},creationState={bufferTimeSpan:bufferTimeSpan,bufferCreationInterval:bufferCreationInterval,subscriber:this,scheduler:scheduler};this.add(scheduler.schedule(dispatchBufferClose,bufferTimeSpan,closeState)),this.add(scheduler.schedule(dispatchBufferCreation,bufferCreationInterval,creationState))}else{var timeSpanOnlyState={subscriber:this,buffer:buffer,bufferTimeSpan:bufferTimeSpan};this.add(scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}}return __extends(BufferTimeSubscriber,_super),BufferTimeSubscriber.prototype._next=function(value){for(var buffers=this.buffers,len=buffers.length,i=0;len>i;i++)buffers[i].push(value)},BufferTimeSubscriber.prototype._error=function(err){this.buffers.length=0,_super.prototype._error.call(this,err)},BufferTimeSubscriber.prototype._complete=function(){for(var _a=this,buffers=_a.buffers,destination=_a.destination;buffers.length>0;)destination.next(buffers.shift());_super.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.buffers=null},BufferTimeSubscriber.prototype.openBuffer=function(){var buffer=[];return this.buffers.push(buffer),buffer},BufferTimeSubscriber.prototype.closeBuffer=function(buffer){this.destination.next(buffer);var buffers=this.buffers;buffers.splice(buffers.indexOf(buffer),1)},BufferTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferToggle_1=__webpack_require__(412);Observable_1.Observable.prototype.bufferToggle=bufferToggle_1.bufferToggle},function(module,exports,__webpack_require__){"use strict";function bufferToggle(openings,closingSelector){return this.lift(new BufferToggleOperator(openings,closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=__webpack_require__(47),subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338);exports.bufferToggle=bufferToggle;var BufferToggleOperator=function(){function BufferToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return BufferToggleOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferToggleSubscriber(subscriber,this.openings,this.closingSelector))},BufferToggleOperator}(),BufferToggleSubscriber=function(_super){function BufferToggleSubscriber(destination,openings,closingSelector){_super.call(this,destination),this.openings=openings,this.closingSelector=closingSelector,this.contexts=[],this.add(subscribeToResult_1.subscribeToResult(this,openings))}return __extends(BufferToggleSubscriber,_super),BufferToggleSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0;len>i;i++)contexts[i].buffer.push(value)},BufferToggleSubscriber.prototype._error=function(err){for(var contexts=this.contexts;contexts.length>0;){var context=contexts.shift();context.subscription.unsubscribe(),context.buffer=null,context.subscription=null}this.contexts=null,_super.prototype._error.call(this,err)},BufferToggleSubscriber.prototype._complete=function(){for(var contexts=this.contexts;contexts.length>0;){var context=contexts.shift();this.destination.next(context.buffer),context.subscription.unsubscribe(),context.buffer=null,context.subscription=null}this.contexts=null,_super.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){outerValue?this.closeBuffer(outerValue):this.openBuffer(innerValue)},BufferToggleSubscriber.prototype.notifyComplete=function(innerSub){this.closeBuffer(innerSub.context)},BufferToggleSubscriber.prototype.openBuffer=function(value){try{var closingSelector=this.closingSelector,closingNotifier=closingSelector.call(this,value);closingNotifier&&this.trySubscribe(closingNotifier)}catch(err){this._error(err)}},BufferToggleSubscriber.prototype.closeBuffer=function(context){var contexts=this.contexts;if(contexts&&context){var buffer=context.buffer,subscription=context.subscription;this.destination.next(buffer),contexts.splice(contexts.indexOf(context),1),this.remove(subscription),subscription.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(closingNotifier){var contexts=this.contexts,buffer=[],subscription=new Subscription_1.Subscription,context={buffer:buffer,subscription:subscription};contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);!innerSubscription||innerSubscription.isUnsubscribed?this.closeBuffer(context):(innerSubscription.context=context,this.add(innerSubscription),subscription.add(innerSubscription))},BufferToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferWhen_1=__webpack_require__(414);Observable_1.Observable.prototype.bufferWhen=bufferWhen_1.bufferWhen},function(module,exports,__webpack_require__){"use strict";function bufferWhen(closingSelector){return this.lift(new BufferWhenOperator(closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=__webpack_require__(47),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.bufferWhen=bufferWhen;var BufferWhenOperator=function(){function BufferWhenOperator(closingSelector){this.closingSelector=closingSelector}return BufferWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferWhenSubscriber(subscriber,this.closingSelector))},BufferWhenOperator}(),BufferWhenSubscriber=function(_super){function BufferWhenSubscriber(destination,closingSelector){_super.call(this,destination),this.closingSelector=closingSelector,this.subscribing=!1,this.openBuffer()}return __extends(BufferWhenSubscriber,_super),BufferWhenSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferWhenSubscriber.prototype._complete=function(){var buffer=this.buffer;buffer&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var closingSubscription=this.closingSubscription;closingSubscription&&(this.remove(closingSubscription),closingSubscription.unsubscribe());var buffer=this.buffer;this.buffer&&this.destination.next(buffer),this.buffer=[];var closingNotifier=tryCatch_1.tryCatch(this.closingSelector)();closingNotifier===errorObject_1.errorObject?this.error(errorObject_1.errorObject.e):(closingSubscription=new Subscription_1.Subscription,this.closingSubscription=closingSubscription,this.add(closingSubscription),this.subscribing=!0,closingSubscription.add(subscribeToResult_1.subscribeToResult(this,closingNotifier)),this.subscribing=!1)},BufferWhenSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),cache_1=__webpack_require__(416);Observable_1.Observable.prototype.cache=cache_1.cache},function(module,exports,__webpack_require__){"use strict";function cache(bufferSize,windowTime,scheduler){return void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),publishReplay_1.publishReplay.call(this,bufferSize,windowTime,scheduler).refCount()}var publishReplay_1=__webpack_require__(417);exports.cache=cache},function(module,exports,__webpack_require__){"use strict";function publishReplay(bufferSize,windowTime,scheduler){return void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),multicast_1.multicast.call(this,new ReplaySubject_1.ReplaySubject(bufferSize,windowTime,scheduler))}var ReplaySubject_1=__webpack_require__(418),multicast_1=__webpack_require__(420);exports.publishReplay=publishReplay},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),queue_1=__webpack_require__(419),observeOn_1=__webpack_require__(360),ReplaySubject=function(_super){function ReplaySubject(bufferSize,windowTime,scheduler){void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),_super.call(this),this.events=[],this.scheduler=scheduler,this.bufferSize=1>bufferSize?1:bufferSize,this._windowTime=1>windowTime?1:windowTime}return __extends(ReplaySubject,_super),ReplaySubject.prototype._next=function(value){var now=this._getNow();this.events.push(new ReplayEvent(now,value)),this._trimBufferThenGetEvents(now),_super.prototype._next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){var events=this._trimBufferThenGetEvents(this._getNow()),scheduler=this.scheduler;scheduler&&subscriber.add(subscriber=new observeOn_1.ObserveOnSubscriber(subscriber,scheduler));for(var index=-1,len=events.length;++index<len&&!subscriber.isUnsubscribed;)subscriber.next(events[index].value);return _super.prototype._subscribe.call(this,subscriber)},ReplaySubject.prototype._getNow=function(){return(this.scheduler||queue_1.queue).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(now){for(var bufferSize=this.bufferSize,_windowTime=this._windowTime,events=this.events,eventsCount=events.length,spliceCount=0;eventsCount>spliceCount&&!(now-events[spliceCount].time<_windowTime);)spliceCount+=1;return eventsCount>bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-bufferSize)),spliceCount>0&&events.splice(0,spliceCount),events},ReplaySubject}(Subject_1.Subject);exports.ReplaySubject=ReplaySubject;var ReplayEvent=function(){function ReplayEvent(time,value){this.time=time,this.value=value}return ReplayEvent}()},function(module,exports,__webpack_require__){"use strict";var QueueScheduler_1=__webpack_require__(379);exports.queue=new QueueScheduler_1.QueueScheduler},function(module,exports,__webpack_require__){"use strict";function multicast(subjectOrSubjectFactory){var subjectFactory;return subjectFactory="function"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory},new ConnectableObservable_1.ConnectableObservable(this,subjectFactory)}var ConnectableObservable_1=__webpack_require__(421);exports.multicast=multicast},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),Subscriber_1=__webpack_require__(45),Subscription_1=__webpack_require__(47),ConnectableObservable=function(_super){function ConnectableObservable(source,subjectFactory){_super.call(this),this.source=source,this.subjectFactory=subjectFactory}return __extends(ConnectableObservable,_super),ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)},ConnectableObservable.prototype.getSubject=function(){var subject=this.subject;return subject&&!subject.isUnsubscribed?subject:this.subject=this.subjectFactory();
},ConnectableObservable.prototype.connect=function(){var source=this.source,subscription=this.subscription;return subscription&&!subscription.isUnsubscribed?subscription:(subscription=source.subscribe(this.getSubject()),subscription.add(new ConnectableSubscription(this)),this.subscription=subscription)},ConnectableObservable.prototype.refCount=function(){return new RefCountObservable(this)},ConnectableObservable.prototype._closeSubscription=function(){this.subject=null,this.subscription=null},ConnectableObservable}(Observable_1.Observable);exports.ConnectableObservable=ConnectableObservable;var ConnectableSubscription=function(_super){function ConnectableSubscription(connectable){_super.call(this),this.connectable=connectable}return __extends(ConnectableSubscription,_super),ConnectableSubscription.prototype._unsubscribe=function(){var connectable=this.connectable;connectable._closeSubscription(),this.connectable=null},ConnectableSubscription}(Subscription_1.Subscription),RefCountObservable=function(_super){function RefCountObservable(connectable,refCount){void 0===refCount&&(refCount=0),_super.call(this),this.connectable=connectable,this.refCount=refCount}return __extends(RefCountObservable,_super),RefCountObservable.prototype._subscribe=function(subscriber){var connectable=this.connectable,refCountSubscriber=new RefCountSubscriber(subscriber,this),subscription=connectable.subscribe(refCountSubscriber);return subscription.isUnsubscribed||1!==++this.refCount||(refCountSubscriber.connection=this.connection=connectable.connect()),subscription},RefCountObservable}(Observable_1.Observable),RefCountSubscriber=function(_super){function RefCountSubscriber(destination,refCountObservable){_super.call(this,null),this.destination=destination,this.refCountObservable=refCountObservable,this.connection=refCountObservable.connection,destination.add(this)}return __extends(RefCountSubscriber,_super),RefCountSubscriber.prototype._next=function(value){this.destination.next(value)},RefCountSubscriber.prototype._error=function(err){this._resetConnectable(),this.destination.error(err)},RefCountSubscriber.prototype._complete=function(){this._resetConnectable(),this.destination.complete()},RefCountSubscriber.prototype._resetConnectable=function(){var observable=this.refCountObservable,obsConnection=observable.connection,subConnection=this.connection;subConnection&&subConnection===obsConnection&&(observable.refCount=0,obsConnection.unsubscribe(),observable.connection=null,this.unsubscribe())},RefCountSubscriber.prototype._unsubscribe=function(){var observable=this.refCountObservable;if(0!==observable.refCount&&0===--observable.refCount){var obsConnection=observable.connection,subConnection=this.connection;subConnection&&subConnection===obsConnection&&(obsConnection.unsubscribe(),observable.connection=null)}},RefCountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),catch_1=__webpack_require__(423);Observable_1.Observable.prototype["catch"]=catch_1._catch},function(module,exports,__webpack_require__){"use strict";function _catch(selector){var operator=new CatchOperator(selector),caught=this.lift(operator);return operator.caught=caught}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports._catch=_catch;var CatchOperator=function(){function CatchOperator(selector){this.selector=selector}return CatchOperator.prototype.call=function(subscriber,source){return source._subscribe(new CatchSubscriber(subscriber,this.selector,this.caught))},CatchOperator}(),CatchSubscriber=function(_super){function CatchSubscriber(destination,selector,caught){_super.call(this,destination),this.selector=selector,this.caught=caught}return __extends(CatchSubscriber,_super),CatchSubscriber.prototype.error=function(err){if(!this.isStopped){var result=void 0;try{result=this.selector(err,this.caught)}catch(err){return void this.destination.error(err)}this._innerSub(result)}},CatchSubscriber.prototype._innerSub=function(result){this.unsubscribe(),this.destination.remove(this),result.subscribe(this.destination)},CatchSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),combineAll_1=__webpack_require__(425);Observable_1.Observable.prototype.combineAll=combineAll_1.combineAll},function(module,exports,__webpack_require__){"use strict";function combineAll(project){return this.lift(new combineLatest_1.CombineLatestOperator(project))}var combineLatest_1=__webpack_require__(333);exports.combineAll=combineAll},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),combineLatest_1=__webpack_require__(333);Observable_1.Observable.prototype.combineLatest=combineLatest_1.combineLatest},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concat_1=__webpack_require__(345);Observable_1.Observable.prototype.concat=concat_1.concat},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concatAll_1=__webpack_require__(429);Observable_1.Observable.prototype.concatAll=concatAll_1.concatAll},function(module,exports,__webpack_require__){"use strict";function concatAll(){return this.lift(new mergeAll_1.MergeAllOperator(1))}var mergeAll_1=__webpack_require__(346);exports.concatAll=concatAll},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concatMap_1=__webpack_require__(431);Observable_1.Observable.prototype.concatMap=concatMap_1.concatMap},function(module,exports,__webpack_require__){"use strict";function concatMap(project,resultSelector){return this.lift(new mergeMap_1.MergeMapOperator(project,resultSelector,1))}var mergeMap_1=__webpack_require__(432);exports.concatMap=concatMap},function(module,exports,__webpack_require__){"use strict";function mergeMap(project,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"number"==typeof resultSelector&&(concurrent=resultSelector,resultSelector=null),this.lift(new MergeMapOperator(project,resultSelector,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338);exports.mergeMap=mergeMap;var MergeMapOperator=function(){function MergeMapOperator(project,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.project=project,this.resultSelector=resultSelector,this.concurrent=concurrent}return MergeMapOperator.prototype.call=function(observer,source){return source._subscribe(new MergeMapSubscriber(observer,this.project,this.resultSelector,this.concurrent))},MergeMapOperator}();exports.MergeMapOperator=MergeMapOperator;var MergeMapSubscriber=function(_super){function MergeMapSubscriber(destination,project,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeMapSubscriber,_super),MergeMapSubscriber.prototype._next=function(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)},MergeMapSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result,value,index)},MergeMapSubscriber.prototype._innerSub=function(ish,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.resultSelector?this._notifyResultSelector(outerValue,innerValue,outerIndex,innerIndex):this.destination.next(innerValue)},MergeMapSubscriber.prototype._notifyResultSelector=function(outerValue,innerValue,outerIndex,innerIndex){var result;try{result=this.resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MergeMapSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeMapSubscriber=MergeMapSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concatMapTo_1=__webpack_require__(434);Observable_1.Observable.prototype.concatMapTo=concatMapTo_1.concatMapTo},function(module,exports,__webpack_require__){"use strict";function concatMapTo(innerObservable,resultSelector){return this.lift(new mergeMapTo_1.MergeMapToOperator(innerObservable,resultSelector,1))}var mergeMapTo_1=__webpack_require__(435);exports.concatMapTo=concatMapTo},function(module,exports,__webpack_require__){"use strict";function mergeMapTo(innerObservable,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"number"==typeof resultSelector&&(concurrent=resultSelector,resultSelector=null),this.lift(new MergeMapToOperator(innerObservable,resultSelector,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.mergeMapTo=mergeMapTo;var MergeMapToOperator=function(){function MergeMapToOperator(ish,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.ish=ish,this.resultSelector=resultSelector,this.concurrent=concurrent}return MergeMapToOperator.prototype.call=function(observer,source){return source._subscribe(new MergeMapToSubscriber(observer,this.ish,this.resultSelector,this.concurrent))},MergeMapToOperator}();exports.MergeMapToOperator=MergeMapToOperator;var MergeMapToSubscriber=function(_super){function MergeMapToSubscriber(destination,ish,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),_super.call(this,destination),this.ish=ish,this.resultSelector=resultSelector,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeMapToSubscriber,_super),MergeMapToSubscriber.prototype._next=function(value){if(this.active<this.concurrent){var resultSelector=this.resultSelector,index=this.index++,ish=this.ish,destination=this.destination;this.active++,this._innerSub(ish,destination,resultSelector,value,index)}else this.buffer.push(value)},MergeMapToSubscriber.prototype._innerSub=function(ish,destination,resultSelector,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeMapToSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapToSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.trySelectResult(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},MergeMapToSubscriber.prototype.trySelectResult=function(outerValue,innerValue,outerIndex,innerIndex){var result,_a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{result=resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void destination.error(err)}destination.next(result)},MergeMapToSubscriber.prototype.notifyError=function(err){this.destination.error(err)},MergeMapToSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapToSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeMapToSubscriber=MergeMapToSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),count_1=__webpack_require__(437);Observable_1.Observable.prototype.count=count_1.count},function(module,exports,__webpack_require__){"use strict";function count(predicate){return this.lift(new CountOperator(predicate,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.count=count;var CountOperator=function(){function CountOperator(predicate,source){this.predicate=predicate,this.source=source}return CountOperator.prototype.call=function(subscriber,source){return source._subscribe(new CountSubscriber(subscriber,this.predicate,this.source))},CountOperator}(),CountSubscriber=function(_super){function CountSubscriber(destination,predicate,source){_super.call(this,destination),this.predicate=predicate,this.source=source,this.count=0,this.index=0}return __extends(CountSubscriber,_super),CountSubscriber.prototype._next=function(value){this.predicate?this._tryPredicate(value):this.count++},CountSubscriber.prototype._tryPredicate=function(value){var result;try{result=this.predicate(value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),dematerialize_1=__webpack_require__(439);Observable_1.Observable.prototype.dematerialize=dematerialize_1.dematerialize},function(module,exports,__webpack_require__){"use strict";function dematerialize(){return this.lift(new DeMaterializeOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.dematerialize=dematerialize;var DeMaterializeOperator=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(subscriber,source){return source._subscribe(new DeMaterializeSubscriber(subscriber))},DeMaterializeOperator}(),DeMaterializeSubscriber=function(_super){function DeMaterializeSubscriber(destination){_super.call(this,destination)}return __extends(DeMaterializeSubscriber,_super),DeMaterializeSubscriber.prototype._next=function(value){value.observe(this.destination)},DeMaterializeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),debounce_1=__webpack_require__(441);Observable_1.Observable.prototype.debounce=debounce_1.debounce},function(module,exports,__webpack_require__){"use strict";function debounce(durationSelector){return this.lift(new DebounceOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.debounce=debounce;var DebounceOperator=function(){function DebounceOperator(durationSelector){this.durationSelector=durationSelector}return DebounceOperator.prototype.call=function(subscriber,source){return source._subscribe(new DebounceSubscriber(subscriber,this.durationSelector))},DebounceOperator}(),DebounceSubscriber=function(_super){function DebounceSubscriber(destination,durationSelector){_super.call(this,destination),this.durationSelector=durationSelector,this.hasValue=!1,this.durationSubscription=null}return __extends(DebounceSubscriber,_super),DebounceSubscriber.prototype._next=function(value){try{var result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(value,duration){var subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),subscription=subscribeToResult_1.subscribeToResult(this,duration),subscription.isUnsubscribed||this.add(this.durationSubscription=subscription)},DebounceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=null,subscription.unsubscribe(),this.remove(subscription)),this.value=null,this.hasValue=!1,_super.prototype._next.call(this,value)}},DebounceSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),debounceTime_1=__webpack_require__(443);Observable_1.Observable.prototype.debounceTime=debounceTime_1.debounceTime},function(module,exports,__webpack_require__){"use strict";function debounceTime(dueTime,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new DebounceTimeOperator(dueTime,scheduler))}function dispatchNext(subscriber){subscriber.debouncedNext()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.debounceTime=debounceTime;var DebounceTimeOperator=function(){function DebounceTimeOperator(dueTime,scheduler){this.dueTime=dueTime,this.scheduler=scheduler}return DebounceTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new DebounceTimeSubscriber(subscriber,this.dueTime,this.scheduler))},DebounceTimeOperator}(),DebounceTimeSubscriber=function(_super){function DebounceTimeSubscriber(destination,dueTime,scheduler){_super.call(this,destination),this.dueTime=dueTime,this.scheduler=scheduler,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return __extends(DebounceTimeSubscriber,_super),DebounceTimeSubscriber.prototype._next=function(value){this.clearDebounce(),this.lastValue=value,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},DebounceTimeSubscriber.prototype.clearDebounce=function(){var debouncedSubscription=this.debouncedSubscription;null!==debouncedSubscription&&(this.remove(debouncedSubscription),debouncedSubscription.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),defaultIfEmpty_1=__webpack_require__(445);Observable_1.Observable.prototype.defaultIfEmpty=defaultIfEmpty_1.defaultIfEmpty},function(module,exports,__webpack_require__){"use strict";function defaultIfEmpty(defaultValue){return void 0===defaultValue&&(defaultValue=null),this.lift(new DefaultIfEmptyOperator(defaultValue))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.defaultIfEmpty=defaultIfEmpty;var DefaultIfEmptyOperator=function(){function DefaultIfEmptyOperator(defaultValue){this.defaultValue=defaultValue}return DefaultIfEmptyOperator.prototype.call=function(subscriber,source){return source._subscribe(new DefaultIfEmptySubscriber(subscriber,this.defaultValue))},DefaultIfEmptyOperator}(),DefaultIfEmptySubscriber=function(_super){function DefaultIfEmptySubscriber(destination,defaultValue){_super.call(this,destination),this.defaultValue=defaultValue,this.isEmpty=!0}return __extends(DefaultIfEmptySubscriber,_super),DefaultIfEmptySubscriber.prototype._next=function(value){this.isEmpty=!1,this.destination.next(value)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),delay_1=__webpack_require__(447);Observable_1.Observable.prototype.delay=delay_1.delay},function(module,exports,__webpack_require__){"use strict";function delay(delay,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteDelay=isDate_1.isDate(delay),delayFor=absoluteDelay?+delay-scheduler.now():Math.abs(delay);return this.lift(new DelayOperator(delayFor,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),isDate_1=__webpack_require__(401),Subscriber_1=__webpack_require__(45),Notification_1=__webpack_require__(361);exports.delay=delay;var DelayOperator=function(){function DelayOperator(delay,scheduler){this.delay=delay,this.scheduler=scheduler}return DelayOperator.prototype.call=function(subscriber,source){return source._subscribe(new DelaySubscriber(subscriber,this.delay,this.scheduler))},DelayOperator}(),DelaySubscriber=function(_super){function DelaySubscriber(destination,delay,scheduler){_super.call(this,destination),this.delay=delay,this.scheduler=scheduler,this.queue=[],this.active=!1,this.errored=!1}return __extends(DelaySubscriber,_super),DelaySubscriber.dispatch=function(state){for(var source=state.source,queue=source.queue,scheduler=state.scheduler,destination=state.destination;queue.length>0&&queue[0].time-scheduler.now()<=0;)queue.shift().notification.observe(destination);if(queue.length>0){var delay_1=Math.max(0,queue[0].time-scheduler.now());this.schedule(state,delay_1)}else source.active=!1},DelaySubscriber.prototype._schedule=function(scheduler){this.active=!0,this.add(scheduler.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:scheduler}))},DelaySubscriber.prototype.scheduleNotification=function(notification){if(this.errored!==!0){var scheduler=this.scheduler,message=new DelayMessage(scheduler.now()+this.delay,notification);this.queue.push(message),this.active===!1&&this._schedule(scheduler)}},DelaySubscriber.prototype._next=function(value){this.scheduleNotification(Notification_1.Notification.createNext(value))},DelaySubscriber.prototype._error=function(err){this.errored=!0,this.queue=[],this.destination.error(err)},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(Notification_1.Notification.createComplete())},DelaySubscriber}(Subscriber_1.Subscriber),DelayMessage=function(){function DelayMessage(time,notification){this.time=time,this.notification=notification}return DelayMessage}()},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),delayWhen_1=__webpack_require__(449);Observable_1.Observable.prototype.delayWhen=delayWhen_1.delayWhen},function(module,exports,__webpack_require__){"use strict";function delayWhen(delayDurationSelector,subscriptionDelay){return subscriptionDelay?new SubscriptionDelayObservable(this,subscriptionDelay).lift(new DelayWhenOperator(delayDurationSelector)):this.lift(new DelayWhenOperator(delayDurationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Observable_1=__webpack_require__(41),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.delayWhen=delayWhen;var DelayWhenOperator=function(){function DelayWhenOperator(delayDurationSelector){this.delayDurationSelector=delayDurationSelector}return DelayWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new DelayWhenSubscriber(subscriber,this.delayDurationSelector))},DelayWhenOperator}(),DelayWhenSubscriber=function(_super){function DelayWhenSubscriber(destination,delayDurationSelector){_super.call(this,destination),this.delayDurationSelector=delayDurationSelector,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return __extends(DelayWhenSubscriber,_super),DelayWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(outerValue),this.removeSubscription(innerSub),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},DelayWhenSubscriber.prototype.notifyComplete=function(innerSub){var value=this.removeSubscription(innerSub);value&&this.destination.next(value),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(value){try{var delayNotifier=this.delayDurationSelector(value);delayNotifier&&this.tryDelay(delayNotifier,value)}catch(err){this.destination.error(err)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete()},DelayWhenSubscriber.prototype.removeSubscription=function(subscription){subscription.unsubscribe();var subscriptionIdx=this.delayNotifierSubscriptions.indexOf(subscription),value=null;return-1!==subscriptionIdx&&(value=this.values[subscriptionIdx],this.delayNotifierSubscriptions.splice(subscriptionIdx,1),this.values.splice(subscriptionIdx,1)),value},DelayWhenSubscriber.prototype.tryDelay=function(delayNotifier,value){var notifierSubscription=subscribeToResult_1.subscribeToResult(this,delayNotifier,value);this.add(notifierSubscription),this.delayNotifierSubscriptions.push(notifierSubscription),this.values.push(value)},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(OuterSubscriber_1.OuterSubscriber),SubscriptionDelayObservable=function(_super){function SubscriptionDelayObservable(source,subscriptionDelay){_super.call(this),this.source=source,this.subscriptionDelay=subscriptionDelay}return __extends(SubscriptionDelayObservable,_super),SubscriptionDelayObservable.prototype._subscribe=function(subscriber){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber,this.source))},SubscriptionDelayObservable}(Observable_1.Observable),SubscriptionDelaySubscriber=function(_super){function SubscriptionDelaySubscriber(parent,source){_super.call(this),this.parent=parent,this.source=source,this.sourceSubscribed=!1}return __extends(SubscriptionDelaySubscriber,_super),SubscriptionDelaySubscriber.prototype._next=function(unused){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(err){this.unsubscribe(),this.parent.error(err)},SubscriptionDelaySubscriber.prototype._complete=function(){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),distinctUntilChanged_1=__webpack_require__(451);Observable_1.Observable.prototype.distinctUntilChanged=distinctUntilChanged_1.distinctUntilChanged},function(module,exports,__webpack_require__){"use strict";function distinctUntilChanged(compare,keySelector){return this.lift(new DistinctUntilChangedOperator(compare,keySelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51);exports.distinctUntilChanged=distinctUntilChanged;var DistinctUntilChangedOperator=function(){function DistinctUntilChangedOperator(compare,keySelector){this.compare=compare,this.keySelector=keySelector}return DistinctUntilChangedOperator.prototype.call=function(subscriber,source){return source._subscribe(new DistinctUntilChangedSubscriber(subscriber,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),DistinctUntilChangedSubscriber=function(_super){function DistinctUntilChangedSubscriber(destination,compare,keySelector){_super.call(this,destination),this.keySelector=keySelector,this.hasKey=!1,"function"==typeof compare&&(this.compare=compare)}return __extends(DistinctUntilChangedSubscriber,_super),DistinctUntilChangedSubscriber.prototype.compare=function(x,y){return x===y},DistinctUntilChangedSubscriber.prototype._next=function(value){var keySelector=this.keySelector,key=value;if(keySelector&&(key=tryCatch_1.tryCatch(this.keySelector)(value),key===errorObject_1.errorObject))return this.destination.error(errorObject_1.errorObject.e);var result=!1;if(this.hasKey){if(result=tryCatch_1.tryCatch(this.compare)(this.key,key),result===errorObject_1.errorObject)return this.destination.error(errorObject_1.errorObject.e)}else this.hasKey=!0;Boolean(result)===!1&&(this.key=key,this.destination.next(value))},DistinctUntilChangedSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),do_1=__webpack_require__(453);Observable_1.Observable.prototype["do"]=do_1._do},function(module,exports,__webpack_require__){"use strict";function _do(nextOrObserver,error,complete){return this.lift(new DoOperator(nextOrObserver,error,complete))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports._do=_do;var DoOperator=function(){function DoOperator(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}return DoOperator.prototype.call=function(subscriber,source){return source._subscribe(new DoSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))},DoOperator}(),DoSubscriber=function(_super){function DoSubscriber(destination,nextOrObserver,error,complete){_super.call(this,destination);var safeSubscriber=new Subscriber_1.Subscriber(nextOrObserver,error,complete);safeSubscriber.syncErrorThrowable=!0,this.add(safeSubscriber),this.safeSubscriber=safeSubscriber}return __extends(DoSubscriber,_super),DoSubscriber.prototype._next=function(value){var safeSubscriber=this.safeSubscriber;safeSubscriber.next(value),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.next(value);
},DoSubscriber.prototype._error=function(err){var safeSubscriber=this.safeSubscriber;safeSubscriber.error(err),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.error(err)},DoSubscriber.prototype._complete=function(){var safeSubscriber=this.safeSubscriber;safeSubscriber.complete(),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.complete()},DoSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),expand_1=__webpack_require__(455);Observable_1.Observable.prototype.expand=expand_1.expand},function(module,exports,__webpack_require__){"use strict";function expand(project,concurrent,scheduler){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),void 0===scheduler&&(scheduler=void 0),concurrent=1>(concurrent||0)?Number.POSITIVE_INFINITY:concurrent,this.lift(new ExpandOperator(project,concurrent,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.expand=expand;var ExpandOperator=function(){function ExpandOperator(project,concurrent,scheduler){this.project=project,this.concurrent=concurrent,this.scheduler=scheduler}return ExpandOperator.prototype.call=function(subscriber,source){return source._subscribe(new ExpandSubscriber(subscriber,this.project,this.concurrent,this.scheduler))},ExpandOperator}();exports.ExpandOperator=ExpandOperator;var ExpandSubscriber=function(_super){function ExpandSubscriber(destination,project,concurrent,scheduler){_super.call(this,destination),this.project=project,this.concurrent=concurrent,this.scheduler=scheduler,this.index=0,this.active=0,this.hasCompleted=!1,concurrent<Number.POSITIVE_INFINITY&&(this.buffer=[])}return __extends(ExpandSubscriber,_super),ExpandSubscriber.dispatch=function(arg){var subscriber=arg.subscriber,result=arg.result,value=arg.value,index=arg.index;subscriber.subscribeToProjection(result,value,index)},ExpandSubscriber.prototype._next=function(value){var destination=this.destination;if(destination.isUnsubscribed)return void this._complete();var index=this.index++;if(this.active<this.concurrent){destination.next(value);var result=tryCatch_1.tryCatch(this.project)(value,index);if(result===errorObject_1.errorObject)destination.error(errorObject_1.errorObject.e);else if(this.scheduler){var state={subscriber:this,result:result,value:value,index:index};this.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,state))}else this.subscribeToProjection(result,value,index)}else this.buffer.push(value)},ExpandSubscriber.prototype.subscribeToProjection=function(result,value,index){this.active++,this.add(subscribeToResult_1.subscribeToResult(this,result,value,index))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._next(innerValue)},ExpandSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer&&buffer.length>0&&this._next(buffer.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.ExpandSubscriber=ExpandSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),filter_1=__webpack_require__(457);Observable_1.Observable.prototype.filter=filter_1.filter},function(module,exports,__webpack_require__){"use strict";function filter(predicate,thisArg){return this.lift(new FilterOperator(predicate,thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.filter=filter;var FilterOperator=function(){function FilterOperator(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}return FilterOperator.prototype.call=function(subscriber,source){return source._subscribe(new FilterSubscriber(subscriber,this.predicate,this.thisArg))},FilterOperator}(),FilterSubscriber=function(_super){function FilterSubscriber(destination,predicate,thisArg){_super.call(this,destination),this.predicate=predicate,this.thisArg=thisArg,this.count=0,this.predicate=predicate}return __extends(FilterSubscriber,_super),FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)},FilterSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),finally_1=__webpack_require__(459);Observable_1.Observable.prototype["finally"]=finally_1._finally},function(module,exports,__webpack_require__){"use strict";function _finally(finallySelector){return this.lift(new FinallyOperator(finallySelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subscription_1=__webpack_require__(47);exports._finally=_finally;var FinallyOperator=function(){function FinallyOperator(finallySelector){this.finallySelector=finallySelector}return FinallyOperator.prototype.call=function(subscriber,source){return source._subscribe(new FinallySubscriber(subscriber,this.finallySelector))},FinallyOperator}(),FinallySubscriber=function(_super){function FinallySubscriber(destination,finallySelector){_super.call(this,destination),this.add(new Subscription_1.Subscription(finallySelector))}return __extends(FinallySubscriber,_super),FinallySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),first_1=__webpack_require__(461);Observable_1.Observable.prototype.first=first_1.first},function(module,exports,__webpack_require__){"use strict";function first(predicate,resultSelector,defaultValue){return this.lift(new FirstOperator(predicate,resultSelector,defaultValue,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyError_1=__webpack_require__(462);exports.first=first;var FirstOperator=function(){function FirstOperator(predicate,resultSelector,defaultValue,source){this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source}return FirstOperator.prototype.call=function(observer,source){return source._subscribe(new FirstSubscriber(observer,this.predicate,this.resultSelector,this.defaultValue,this.source))},FirstOperator}(),FirstSubscriber=function(_super){function FirstSubscriber(destination,predicate,resultSelector,defaultValue,source){_super.call(this,destination),this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source,this.index=0,this.hasCompleted=!1}return __extends(FirstSubscriber,_super),FirstSubscriber.prototype._next=function(value){var index=this.index++;this.predicate?this._tryPredicate(value,index):this._emit(value,index)},FirstSubscriber.prototype._tryPredicate=function(value,index){var result;try{result=this.predicate(value,index,this.source)}catch(err){return void this.destination.error(err)}result&&this._emit(value,index)},FirstSubscriber.prototype._emit=function(value,index){return this.resultSelector?void this._tryResultSelector(value,index):void this._emitFinal(value)},FirstSubscriber.prototype._tryResultSelector=function(value,index){var result;try{result=this.resultSelector(value,index)}catch(err){return void this.destination.error(err)}this._emitFinal(result)},FirstSubscriber.prototype._emitFinal=function(value){var destination=this.destination;destination.next(value),destination.complete(),this.hasCompleted=!0},FirstSubscriber.prototype._complete=function(){var destination=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||destination.error(new EmptyError_1.EmptyError):(destination.next(this.defaultValue),destination.complete())},FirstSubscriber}(Subscriber_1.Subscriber)},function(module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},EmptyError=function(_super){function EmptyError(){_super.call(this,"no elements in sequence"),this.name="EmptyError"}return __extends(EmptyError,_super),EmptyError}(Error);exports.EmptyError=EmptyError},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),groupBy_1=__webpack_require__(464);Observable_1.Observable.prototype.groupBy=groupBy_1.groupBy},function(module,exports,__webpack_require__){"use strict";function groupBy(keySelector,elementSelector,durationSelector){return this.lift(new GroupByOperator(this,keySelector,elementSelector,durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subscription_1=__webpack_require__(47),Observable_1=__webpack_require__(41),Subject_1=__webpack_require__(40),Map_1=__webpack_require__(465),FastMap_1=__webpack_require__(467);exports.groupBy=groupBy;var GroupByOperator=function(){function GroupByOperator(source,keySelector,elementSelector,durationSelector){this.source=source,this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector}return GroupByOperator.prototype.call=function(subscriber,source){return source._subscribe(new GroupBySubscriber(subscriber,this.keySelector,this.elementSelector,this.durationSelector))},GroupByOperator}(),GroupBySubscriber=function(_super){function GroupBySubscriber(destination,keySelector,elementSelector,durationSelector){_super.call(this),this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0,this.destination=destination,this.add(destination)}return __extends(GroupBySubscriber,_super),GroupBySubscriber.prototype._next=function(value){var key;try{key=this.keySelector(value)}catch(err){return void this.error(err)}this._group(value,key)},GroupBySubscriber.prototype._group=function(value,key){var groups=this.groups;groups||(groups=this.groups="string"==typeof key?new FastMap_1.FastMap:new Map_1.Map);var group=groups.get(key);if(!group){groups.set(key,group=new Subject_1.Subject);var groupedObservable=new GroupedObservable(key,group,this);this.durationSelector&&this._selectDuration(key,group),this.destination.next(groupedObservable)}this.elementSelector?this._selectElement(value,group):this.tryGroupNext(value,group)},GroupBySubscriber.prototype._selectElement=function(value,group){var result;try{result=this.elementSelector(value)}catch(err){return void this.error(err)}this.tryGroupNext(result,group)},GroupBySubscriber.prototype._selectDuration=function(key,group){var duration;try{duration=this.durationSelector(new GroupedObservable(key,group))}catch(err){return void this.error(err)}this.add(duration.subscribe(new GroupDurationSubscriber(key,group,this)))},GroupBySubscriber.prototype.tryGroupNext=function(value,group){group.isUnsubscribed||group.next(value)},GroupBySubscriber.prototype._error=function(err){var groups=this.groups;groups&&(groups.forEach(function(group,key){group.error(err)}),groups.clear()),this.destination.error(err)},GroupBySubscriber.prototype._complete=function(){var groups=this.groups;groups&&(groups.forEach(function(group,key){group.complete()}),groups.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(key){this.groups["delete"](key)},GroupBySubscriber.prototype.unsubscribe=function(){this.isUnsubscribed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&_super.prototype.unsubscribe.call(this))},GroupBySubscriber}(Subscriber_1.Subscriber),GroupDurationSubscriber=function(_super){function GroupDurationSubscriber(key,group,parent){_super.call(this),this.key=key,this.group=group,this.parent=parent}return __extends(GroupDurationSubscriber,_super),GroupDurationSubscriber.prototype._next=function(value){this.tryComplete()},GroupDurationSubscriber.prototype._error=function(err){this.tryError(err)},GroupDurationSubscriber.prototype._complete=function(){this.tryComplete()},GroupDurationSubscriber.prototype.tryError=function(err){var group=this.group;group.isUnsubscribed||group.error(err),this.parent.removeGroup(this.key)},GroupDurationSubscriber.prototype.tryComplete=function(){var group=this.group;group.isUnsubscribed||group.complete(),this.parent.removeGroup(this.key)},GroupDurationSubscriber}(Subscriber_1.Subscriber),GroupedObservable=function(_super){function GroupedObservable(key,groupSubject,refCountSubscription){_super.call(this),this.key=key,this.groupSubject=groupSubject,this.refCountSubscription=refCountSubscription}return __extends(GroupedObservable,_super),GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new Subscription_1.Subscription,_a=this,refCountSubscription=_a.refCountSubscription,groupSubject=_a.groupSubject;return refCountSubscription&&!refCountSubscription.isUnsubscribed&&subscription.add(new InnerRefCountSubscription(refCountSubscription)),subscription.add(groupSubject.subscribe(subscriber)),subscription},GroupedObservable}(Observable_1.Observable);exports.GroupedObservable=GroupedObservable;var InnerRefCountSubscription=function(_super){function InnerRefCountSubscription(parent){_super.call(this),this.parent=parent,parent.count++}return __extends(InnerRefCountSubscription,_super),InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;parent.isUnsubscribed||this.isUnsubscribed||(_super.prototype.unsubscribe.call(this),parent.count-=1,0===parent.count&&parent.attemptedToUnsubscribe&&parent.unsubscribe())},InnerRefCountSubscription}(Subscription_1.Subscription)},function(module,exports,__webpack_require__){"use strict";var root_1=__webpack_require__(42),MapPolyfill_1=__webpack_require__(466);exports.Map=root_1.root.Map||function(){return MapPolyfill_1.MapPolyfill}()},function(module,exports){"use strict";var MapPolyfill=function(){function MapPolyfill(){this.size=0,this._values=[],this._keys=[]}return MapPolyfill.prototype.get=function(key){var i=this._keys.indexOf(key);return-1===i?void 0:this._values[i]},MapPolyfill.prototype.set=function(key,value){var i=this._keys.indexOf(key);return-1===i?(this._keys.push(key),this._values.push(value),this.size++):this._values[i]=value,this},MapPolyfill.prototype["delete"]=function(key){var i=this._keys.indexOf(key);return-1===i?!1:(this._values.splice(i,1),this._keys.splice(i,1),this.size--,!0)},MapPolyfill.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},MapPolyfill.prototype.forEach=function(cb,thisArg){for(var i=0;i<this.size;i++)cb.call(thisArg,this._values[i],this._keys[i])},MapPolyfill}();exports.MapPolyfill=MapPolyfill},function(module,exports){"use strict";var FastMap=function(){function FastMap(){this.values={}}return FastMap.prototype["delete"]=function(key){return this.values[key]=null,!0},FastMap.prototype.set=function(key,value){return this.values[key]=value,this},FastMap.prototype.get=function(key){return this.values[key]},FastMap.prototype.forEach=function(cb,thisArg){var values=this.values;for(var key in values)values.hasOwnProperty(key)&&null!==values[key]&&cb.call(thisArg,values[key],key)},FastMap.prototype.clear=function(){this.values={}},FastMap}();exports.FastMap=FastMap},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),ignoreElements_1=__webpack_require__(469);Observable_1.Observable.prototype.ignoreElements=ignoreElements_1.ignoreElements},function(module,exports,__webpack_require__){"use strict";function ignoreElements(){return this.lift(new IgnoreElementsOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),noop_1=__webpack_require__(389);exports.ignoreElements=ignoreElements;var IgnoreElementsOperator=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(subscriber,source){return source._subscribe(new IgnoreElementsSubscriber(subscriber))},IgnoreElementsOperator}(),IgnoreElementsSubscriber=function(_super){function IgnoreElementsSubscriber(){_super.apply(this,arguments)}return __extends(IgnoreElementsSubscriber,_super),IgnoreElementsSubscriber.prototype._next=function(unused){noop_1.noop()},IgnoreElementsSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),audit_1=__webpack_require__(471);Observable_1.Observable.prototype.audit=audit_1.audit},function(module,exports,__webpack_require__){"use strict";function audit(durationSelector){return this.lift(new AuditOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.audit=audit;var AuditOperator=function(){function AuditOperator(durationSelector){this.durationSelector=durationSelector}return AuditOperator.prototype.call=function(subscriber,source){return source._subscribe(new AuditSubscriber(subscriber,this.durationSelector))},AuditOperator}(),AuditSubscriber=function(_super){function AuditSubscriber(destination,durationSelector){_super.call(this,destination),this.durationSelector=durationSelector,this.hasValue=!1}return __extends(AuditSubscriber,_super),AuditSubscriber.prototype._next=function(value){if(this.value=value,this.hasValue=!0,!this.throttled){var duration=tryCatch_1.tryCatch(this.durationSelector)(value);duration===errorObject_1.errorObject?this.destination.error(errorObject_1.errorObject.e):this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,duration))}},AuditSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),auditTime_1=__webpack_require__(473);Observable_1.Observable.prototype.auditTime=auditTime_1.auditTime},function(module,exports,__webpack_require__){"use strict";function auditTime(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new AuditTimeOperator(duration,scheduler))}function dispatchNext(subscriber){subscriber.clearThrottle()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),Subscriber_1=__webpack_require__(45);exports.auditTime=auditTime;var AuditTimeOperator=function(){function AuditTimeOperator(duration,scheduler){this.duration=duration,this.scheduler=scheduler}return AuditTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new AuditTimeSubscriber(subscriber,this.duration,this.scheduler))},AuditTimeOperator}(),AuditTimeSubscriber=function(_super){function AuditTimeSubscriber(destination,duration,scheduler){_super.call(this,destination),this.duration=duration,this.scheduler=scheduler,this.hasValue=!1}return __extends(AuditTimeSubscriber,_super),AuditTimeSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,this))},AuditTimeSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),last_1=__webpack_require__(475);Observable_1.Observable.prototype.last=last_1.last},function(module,exports,__webpack_require__){"use strict";function last(predicate,resultSelector,defaultValue){return this.lift(new LastOperator(predicate,resultSelector,defaultValue,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyError_1=__webpack_require__(462);exports.last=last;var LastOperator=function(){function LastOperator(predicate,resultSelector,defaultValue,source){this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source}return LastOperator.prototype.call=function(observer,source){return source._subscribe(new LastSubscriber(observer,this.predicate,this.resultSelector,this.defaultValue,this.source))},LastOperator}(),LastSubscriber=function(_super){function LastSubscriber(destination,predicate,resultSelector,defaultValue,source){_super.call(this,destination),this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source,this.hasValue=!1,this.index=0,"undefined"!=typeof defaultValue&&(this.lastValue=defaultValue,this.hasValue=!0)}return __extends(LastSubscriber,_super),LastSubscriber.prototype._next=function(value){var index=this.index++;if(this.predicate)this._tryPredicate(value,index);else{if(this.resultSelector)return void this._tryResultSelector(value,index);this.lastValue=value,this.hasValue=!0}},LastSubscriber.prototype._tryPredicate=function(value,index){var result;try{result=this.predicate(value,index,this.source)}catch(err){return void this.destination.error(err)}if(result){if(this.resultSelector)return void this._tryResultSelector(value,index);this.lastValue=value,this.hasValue=!0}},LastSubscriber.prototype._tryResultSelector=function(value,index){var result;try{result=this.resultSelector(value,index)}catch(err){return void this.destination.error(err)}this.lastValue=result,this.hasValue=!0},LastSubscriber.prototype._complete=function(){var destination=this.destination;this.hasValue?(destination.next(this.lastValue),destination.complete()):destination.error(new EmptyError_1.EmptyError)},LastSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),let_1=__webpack_require__(477);Observable_1.Observable.prototype.let=let_1.letProto,Observable_1.Observable.prototype.letBind=let_1.letProto},function(module,exports){"use strict";function letProto(func){return func(this)}exports.letProto=letProto},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),every_1=__webpack_require__(479);Observable_1.Observable.prototype.every=every_1.every},function(module,exports,__webpack_require__){"use strict";function every(predicate,thisArg){return this.lift(new EveryOperator(predicate,thisArg,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.every=every;var EveryOperator=function(){function EveryOperator(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}return EveryOperator.prototype.call=function(observer,source){return source._subscribe(new EverySubscriber(observer,this.predicate,this.thisArg,this.source))},EveryOperator}(),EverySubscriber=function(_super){function EverySubscriber(destination,predicate,thisArg,source){_super.call(this,destination),this.predicate=predicate,this.thisArg=thisArg,this.source=source,this.index=0,this.thisArg=thisArg||this}return __extends(EverySubscriber,_super),EverySubscriber.prototype.notifyComplete=function(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()},EverySubscriber.prototype._next=function(value){var result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),map_1=__webpack_require__(481);Observable_1.Observable.prototype.map=map_1.map},function(module,exports,__webpack_require__){"use strict";function map(project,thisArg){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new MapOperator(project,thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.map=map;var MapOperator=function(){function MapOperator(project,thisArg){this.project=project,this.thisArg=thisArg}return MapOperator.prototype.call=function(subscriber,source){return source._subscribe(new MapSubscriber(subscriber,this.project,this.thisArg))},MapOperator}(),MapSubscriber=function(_super){function MapSubscriber(destination,project,thisArg){_super.call(this,destination),this.project=project,this.count=0,this.thisArg=thisArg||this}return __extends(MapSubscriber,_super),MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MapSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mapTo_1=__webpack_require__(483);Observable_1.Observable.prototype.mapTo=mapTo_1.mapTo},function(module,exports,__webpack_require__){"use strict";function mapTo(value){return this.lift(new MapToOperator(value))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.mapTo=mapTo;var MapToOperator=function(){function MapToOperator(value){this.value=value}return MapToOperator.prototype.call=function(subscriber,source){return source._subscribe(new MapToSubscriber(subscriber,this.value))},MapToOperator}(),MapToSubscriber=function(_super){function MapToSubscriber(destination,value){_super.call(this,destination),this.value=value}return __extends(MapToSubscriber,_super),MapToSubscriber.prototype._next=function(x){this.destination.next(this.value)},MapToSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),materialize_1=__webpack_require__(485);Observable_1.Observable.prototype.materialize=materialize_1.materialize},function(module,exports,__webpack_require__){"use strict";function materialize(){return this.lift(new MaterializeOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Notification_1=__webpack_require__(361);exports.materialize=materialize;var MaterializeOperator=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(subscriber,source){return source._subscribe(new MaterializeSubscriber(subscriber))},MaterializeOperator}(),MaterializeSubscriber=function(_super){function MaterializeSubscriber(destination){_super.call(this,destination)}return __extends(MaterializeSubscriber,_super),MaterializeSubscriber.prototype._next=function(value){this.destination.next(Notification_1.Notification.createNext(value))},MaterializeSubscriber.prototype._error=function(err){var destination=this.destination;destination.next(Notification_1.Notification.createError(err)),destination.complete()},MaterializeSubscriber.prototype._complete=function(){var destination=this.destination;destination.next(Notification_1.Notification.createComplete()),destination.complete()},MaterializeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),merge_1=__webpack_require__(383);Observable_1.Observable.prototype.merge=merge_1.merge},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mergeAll_1=__webpack_require__(346);Observable_1.Observable.prototype.mergeAll=mergeAll_1.mergeAll},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mergeMap_1=__webpack_require__(432);Observable_1.Observable.prototype.mergeMap=mergeMap_1.mergeMap,Observable_1.Observable.prototype.flatMap=mergeMap_1.mergeMap},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mergeMapTo_1=__webpack_require__(435);Observable_1.Observable.prototype.flatMapTo=mergeMapTo_1.mergeMapTo,Observable_1.Observable.prototype.mergeMapTo=mergeMapTo_1.mergeMapTo},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),multicast_1=__webpack_require__(420);Observable_1.Observable.prototype.multicast=multicast_1.multicast},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),observeOn_1=__webpack_require__(360);Observable_1.Observable.prototype.observeOn=observeOn_1.observeOn},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),partition_1=__webpack_require__(493);Observable_1.Observable.prototype.partition=partition_1.partition},function(module,exports,__webpack_require__){"use strict";function partition(predicate,thisArg){return[filter_1.filter.call(this,predicate),filter_1.filter.call(this,not_1.not(predicate,thisArg))]}var not_1=__webpack_require__(494),filter_1=__webpack_require__(457);exports.partition=partition},function(module,exports){"use strict";function not(pred,thisArg){function notPred(){
return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=pred,notPred.thisArg=thisArg,notPred}exports.not=not},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),pluck_1=__webpack_require__(496);Observable_1.Observable.prototype.pluck=pluck_1.pluck},function(module,exports,__webpack_require__){"use strict";function pluck(){for(var properties=[],_i=0;_i<arguments.length;_i++)properties[_i-0]=arguments[_i];var length=properties.length;if(0===length)throw new Error("List of properties cannot be empty.");return map_1.map.call(this,plucker(properties,length))}function plucker(props,length){var mapper=function(x){for(var currentProp=x,i=0;length>i;i++){var p=currentProp[props[i]];if("undefined"==typeof p)return;currentProp=p}return currentProp};return mapper}var map_1=__webpack_require__(481);exports.pluck=pluck},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publish_1=__webpack_require__(498);Observable_1.Observable.prototype.publish=publish_1.publish},function(module,exports,__webpack_require__){"use strict";function publish(){return multicast_1.multicast.call(this,new Subject_1.Subject)}var Subject_1=__webpack_require__(40),multicast_1=__webpack_require__(420);exports.publish=publish},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publishBehavior_1=__webpack_require__(500);Observable_1.Observable.prototype.publishBehavior=publishBehavior_1.publishBehavior},function(module,exports,__webpack_require__){"use strict";function publishBehavior(value){return multicast_1.multicast.call(this,new BehaviorSubject_1.BehaviorSubject(value))}var BehaviorSubject_1=__webpack_require__(501),multicast_1=__webpack_require__(420);exports.publishBehavior=publishBehavior},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),throwError_1=__webpack_require__(58),ObjectUnsubscribedError_1=__webpack_require__(59),BehaviorSubject=function(_super){function BehaviorSubject(_value){_super.call(this),this._value=_value}return __extends(BehaviorSubject,_super),BehaviorSubject.prototype.getValue=function(){if(this.hasErrored)throwError_1.throwError(this.errorValue);else{if(!this.isUnsubscribed)return this._value;throwError_1.throwError(new ObjectUnsubscribedError_1.ObjectUnsubscribedError)}},Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.isUnsubscribed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype._next=function(value){_super.prototype._next.call(this,this._value=value)},BehaviorSubject.prototype._error=function(err){this.hasErrored=!0,_super.prototype._error.call(this,this.errorValue=err)},BehaviorSubject}(Subject_1.Subject);exports.BehaviorSubject=BehaviorSubject},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publishReplay_1=__webpack_require__(417);Observable_1.Observable.prototype.publishReplay=publishReplay_1.publishReplay},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publishLast_1=__webpack_require__(504);Observable_1.Observable.prototype.publishLast=publishLast_1.publishLast},function(module,exports,__webpack_require__){"use strict";function publishLast(){return multicast_1.multicast.call(this,new AsyncSubject_1.AsyncSubject)}var AsyncSubject_1=__webpack_require__(328),multicast_1=__webpack_require__(420);exports.publishLast=publishLast},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),race_1=__webpack_require__(385);Observable_1.Observable.prototype.race=race_1.race},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),reduce_1=__webpack_require__(507);Observable_1.Observable.prototype.reduce=reduce_1.reduce},function(module,exports,__webpack_require__){"use strict";function reduce(project,seed){return this.lift(new ReduceOperator(project,seed))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.reduce=reduce;var ReduceOperator=function(){function ReduceOperator(project,seed){this.project=project,this.seed=seed}return ReduceOperator.prototype.call=function(subscriber,source){return source._subscribe(new ReduceSubscriber(subscriber,this.project,this.seed))},ReduceOperator}();exports.ReduceOperator=ReduceOperator;var ReduceSubscriber=function(_super){function ReduceSubscriber(destination,project,seed){_super.call(this,destination),this.hasValue=!1,this.acc=seed,this.project=project,this.hasSeed="undefined"!=typeof seed}return __extends(ReduceSubscriber,_super),ReduceSubscriber.prototype._next=function(value){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(value):(this.acc=value,this.hasValue=!0)},ReduceSubscriber.prototype._tryReduce=function(value){var result;try{result=this.project(this.acc,value)}catch(err){return void this.destination.error(err)}this.acc=result},ReduceSubscriber.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},ReduceSubscriber}(Subscriber_1.Subscriber);exports.ReduceSubscriber=ReduceSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),repeat_1=__webpack_require__(509);Observable_1.Observable.prototype.repeat=repeat_1.repeat},function(module,exports,__webpack_require__){"use strict";function repeat(count){return void 0===count&&(count=-1),0===count?new EmptyObservable_1.EmptyObservable:0>count?this.lift(new RepeatOperator(-1,this)):this.lift(new RepeatOperator(count-1,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyObservable_1=__webpack_require__(336);exports.repeat=repeat;var RepeatOperator=function(){function RepeatOperator(count,source){this.count=count,this.source=source}return RepeatOperator.prototype.call=function(subscriber,source){return source._subscribe(new RepeatSubscriber(subscriber,this.count,this.source))},RepeatOperator}(),RepeatSubscriber=function(_super){function RepeatSubscriber(destination,count,source){_super.call(this,destination),this.count=count,this.source=source}return __extends(RepeatSubscriber,_super),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.complete.call(this);count>-1&&(this.count=count-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,source.subscribe(this)}},RepeatSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),retry_1=__webpack_require__(511);Observable_1.Observable.prototype.retry=retry_1.retry},function(module,exports,__webpack_require__){"use strict";function retry(count){return void 0===count&&(count=-1),this.lift(new RetryOperator(count,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.retry=retry;var RetryOperator=function(){function RetryOperator(count,source){this.count=count,this.source=source}return RetryOperator.prototype.call=function(subscriber,source){return source._subscribe(new RetrySubscriber(subscriber,this.count,this.source))},RetryOperator}(),RetrySubscriber=function(_super){function RetrySubscriber(destination,count,source){_super.call(this,destination),this.count=count,this.source=source}return __extends(RetrySubscriber,_super),RetrySubscriber.prototype.error=function(err){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.error.call(this,err);count>-1&&(this.count=count-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,source.subscribe(this)}},RetrySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),retryWhen_1=__webpack_require__(513);Observable_1.Observable.prototype.retryWhen=retryWhen_1.retryWhen},function(module,exports,__webpack_require__){"use strict";function retryWhen(notifier){return this.lift(new RetryWhenOperator(notifier,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.retryWhen=retryWhen;var RetryWhenOperator=function(){function RetryWhenOperator(notifier,source){this.notifier=notifier,this.source=source}return RetryWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new RetryWhenSubscriber(subscriber,this.notifier,this.source))},RetryWhenOperator}(),RetryWhenSubscriber=function(_super){function RetryWhenSubscriber(destination,notifier,source){_super.call(this,destination),this.notifier=notifier,this.source=source}return __extends(RetryWhenSubscriber,_super),RetryWhenSubscriber.prototype.error=function(err){if(!this.isStopped){var errors=this.errors,retries=this.retries,retriesSubscription=this.retriesSubscription;if(retries)this.errors=null,this.retriesSubscription=null;else{if(errors=new Subject_1.Subject,retries=tryCatch_1.tryCatch(this.notifier)(errors),retries===errorObject_1.errorObject)return _super.prototype.error.call(this,errorObject_1.errorObject.e);retriesSubscription=subscribeToResult_1.subscribeToResult(this,retries)}this.unsubscribe(),this.isUnsubscribed=!1,this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,errors.next(err)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var _a=this,errors=_a.errors,retriesSubscription=_a.retriesSubscription;errors&&(errors.unsubscribe(),this.errors=null),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,errors=_a.errors,retries=_a.retries,retriesSubscription=_a.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,this.source.subscribe(this)},RetryWhenSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),sample_1=__webpack_require__(515);Observable_1.Observable.prototype.sample=sample_1.sample},function(module,exports,__webpack_require__){"use strict";function sample(notifier){return this.lift(new SampleOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.sample=sample;var SampleOperator=function(){function SampleOperator(notifier){this.notifier=notifier}return SampleOperator.prototype.call=function(subscriber,source){return source._subscribe(new SampleSubscriber(subscriber,this.notifier))},SampleOperator}(),SampleSubscriber=function(_super){function SampleSubscriber(destination,notifier){_super.call(this,destination),this.hasValue=!1,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(SampleSubscriber,_super),SampleSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),sampleTime_1=__webpack_require__(517);Observable_1.Observable.prototype.sampleTime=sampleTime_1.sampleTime},function(module,exports,__webpack_require__){"use strict";function sampleTime(period,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new SampleTimeOperator(period,scheduler))}function dispatchNotification(state){var subscriber=state.subscriber,period=state.period;subscriber.notifyNext(),this.schedule(state,period)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.sampleTime=sampleTime;var SampleTimeOperator=function(){function SampleTimeOperator(period,scheduler){this.period=period,this.scheduler=scheduler}return SampleTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new SampleTimeSubscriber(subscriber,this.period,this.scheduler))},SampleTimeOperator}(),SampleTimeSubscriber=function(_super){function SampleTimeSubscriber(destination,period,scheduler){_super.call(this,destination),this.period=period,this.scheduler=scheduler,this.hasValue=!1,this.add(scheduler.schedule(dispatchNotification,period,{subscriber:this,period:period}))}return __extends(SampleTimeSubscriber,_super),SampleTimeSubscriber.prototype._next=function(value){this.lastValue=value,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),scan_1=__webpack_require__(519);Observable_1.Observable.prototype.scan=scan_1.scan},function(module,exports,__webpack_require__){"use strict";function scan(accumulator,seed){return this.lift(new ScanOperator(accumulator,seed))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.scan=scan;var ScanOperator=function(){function ScanOperator(accumulator,seed){this.accumulator=accumulator,this.seed=seed}return ScanOperator.prototype.call=function(subscriber,source){return source._subscribe(new ScanSubscriber(subscriber,this.accumulator,this.seed))},ScanOperator}(),ScanSubscriber=function(_super){function ScanSubscriber(destination,accumulator,seed){_super.call(this,destination),this.accumulator=accumulator,this.index=0,this.accumulatorSet=!1,this.seed=seed,this.accumulatorSet="undefined"!=typeof seed}return __extends(ScanSubscriber,_super),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(value){this.accumulatorSet=!0,this._seed=value},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(value){return this.accumulatorSet?this._tryNext(value):(this.seed=value,void this.destination.next(value))},ScanSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)},ScanSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),share_1=__webpack_require__(521);Observable_1.Observable.prototype.share=share_1.share},function(module,exports,__webpack_require__){"use strict";function shareSubjectFactory(){return new Subject_1.Subject}function share(){return multicast_1.multicast.call(this,shareSubjectFactory).refCount()}var multicast_1=__webpack_require__(420),Subject_1=__webpack_require__(40);exports.share=share},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),single_1=__webpack_require__(523);Observable_1.Observable.prototype.single=single_1.single},function(module,exports,__webpack_require__){"use strict";function single(predicate){return this.lift(new SingleOperator(predicate,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyError_1=__webpack_require__(462);exports.single=single;var SingleOperator=function(){function SingleOperator(predicate,source){this.predicate=predicate,this.source=source}return SingleOperator.prototype.call=function(subscriber,source){return source._subscribe(new SingleSubscriber(subscriber,this.predicate,this.source))},SingleOperator}(),SingleSubscriber=function(_super){function SingleSubscriber(destination,predicate,source){_super.call(this,destination),this.predicate=predicate,this.source=source,this.seenValue=!1,this.index=0}return __extends(SingleSubscriber,_super),SingleSubscriber.prototype.applySingleValue=function(value){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=value)},SingleSubscriber.prototype._next=function(value){var predicate=this.predicate;this.index++,predicate?this.tryNext(value):this.applySingleValue(value)},SingleSubscriber.prototype.tryNext=function(value){try{var result=this.predicate(value,this.index,this.source);result&&this.applySingleValue(value)}catch(err){this.destination.error(err)}},SingleSubscriber.prototype._complete=function(){var destination=this.destination;this.index>0?(destination.next(this.seenValue?this.singleValue:void 0),destination.complete()):destination.error(new EmptyError_1.EmptyError)},SingleSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),skip_1=__webpack_require__(525);Observable_1.Observable.prototype.skip=skip_1.skip},function(module,exports,__webpack_require__){"use strict";function skip(total){return this.lift(new SkipOperator(total))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.skip=skip;var SkipOperator=function(){function SkipOperator(total){this.total=total}return SkipOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipSubscriber(subscriber,this.total))},SkipOperator}(),SkipSubscriber=function(_super){function SkipSubscriber(destination,total){_super.call(this,destination),this.total=total,this.count=0}return __extends(SkipSubscriber,_super),SkipSubscriber.prototype._next=function(x){++this.count>this.total&&this.destination.next(x)},SkipSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),skipUntil_1=__webpack_require__(527);Observable_1.Observable.prototype.skipUntil=skipUntil_1.skipUntil},function(module,exports,__webpack_require__){"use strict";function skipUntil(notifier){return this.lift(new SkipUntilOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.skipUntil=skipUntil;var SkipUntilOperator=function(){function SkipUntilOperator(notifier){this.notifier=notifier}return SkipUntilOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipUntilSubscriber(subscriber,this.notifier))},SkipUntilOperator}(),SkipUntilSubscriber=function(_super){function SkipUntilSubscriber(destination,notifier){_super.call(this,destination),this.hasValue=!1,this.isInnerStopped=!1,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(SkipUntilSubscriber,_super),SkipUntilSubscriber.prototype._next=function(value){this.hasValue&&_super.prototype._next.call(this,value)},SkipUntilSubscriber.prototype._complete=function(){this.isInnerStopped?_super.prototype._complete.call(this):this.unsubscribe()},SkipUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.hasValue=!0},SkipUntilSubscriber.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&_super.prototype._complete.call(this)},SkipUntilSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),skipWhile_1=__webpack_require__(529);Observable_1.Observable.prototype.skipWhile=skipWhile_1.skipWhile},function(module,exports,__webpack_require__){"use strict";function skipWhile(predicate){return this.lift(new SkipWhileOperator(predicate))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.skipWhile=skipWhile;var SkipWhileOperator=function(){function SkipWhileOperator(predicate){this.predicate=predicate}return SkipWhileOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipWhileSubscriber(subscriber,this.predicate))},SkipWhileOperator}(),SkipWhileSubscriber=function(_super){function SkipWhileSubscriber(destination,predicate){_super.call(this,destination),this.predicate=predicate,this.skipping=!0,this.index=0}return __extends(SkipWhileSubscriber,_super),SkipWhileSubscriber.prototype._next=function(value){var destination=this.destination;this.skipping&&this.tryCallPredicate(value),this.skipping||destination.next(value)},SkipWhileSubscriber.prototype.tryCallPredicate=function(value){try{var result=this.predicate(value,this.index++);this.skipping=Boolean(result)}catch(err){this.destination.error(err)}},SkipWhileSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),startWith_1=__webpack_require__(531);Observable_1.Observable.prototype.startWith=startWith_1.startWith},function(module,exports,__webpack_require__){"use strict";function startWith(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i-0]=arguments[_i];var scheduler=array[array.length-1];isScheduler_1.isScheduler(scheduler)?array.pop():scheduler=null;var len=array.length;return 1===len?concat_1.concatStatic(new ScalarObservable_1.ScalarObservable(array[0],scheduler),this):len>1?concat_1.concatStatic(new ArrayObservable_1.ArrayObservable(array,scheduler),this):concat_1.concatStatic(new EmptyObservable_1.EmptyObservable(scheduler),this)}var ArrayObservable_1=__webpack_require__(334),ScalarObservable_1=__webpack_require__(335),EmptyObservable_1=__webpack_require__(336),concat_1=__webpack_require__(345),isScheduler_1=__webpack_require__(337);exports.startWith=startWith},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),subscribeOn_1=__webpack_require__(533);Observable_1.Observable.prototype.subscribeOn=subscribeOn_1.subscribeOn},function(module,exports,__webpack_require__){"use strict";function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),new SubscribeOnObservable_1.SubscribeOnObservable(this,delay,scheduler)}var SubscribeOnObservable_1=__webpack_require__(534);exports.subscribeOn=subscribeOn},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),asap_1=__webpack_require__(535),isNumeric_1=__webpack_require__(375),SubscribeOnObservable=function(_super){function SubscribeOnObservable(source,delayTime,scheduler){void 0===delayTime&&(delayTime=0),void 0===scheduler&&(scheduler=asap_1.asap),_super.call(this),this.source=source,this.delayTime=delayTime,this.scheduler=scheduler,(!isNumeric_1.isNumeric(delayTime)||0>delayTime)&&(this.delayTime=0),scheduler&&"function"==typeof scheduler.schedule||(this.scheduler=asap_1.asap)}return __extends(SubscribeOnObservable,_super),SubscribeOnObservable.create=function(source,delay,scheduler){return void 0===delay&&(delay=0),void 0===scheduler&&(scheduler=asap_1.asap),new SubscribeOnObservable(source,delay,scheduler)},SubscribeOnObservable.dispatch=function(arg){var source=arg.source,subscriber=arg.subscriber;return source.subscribe(subscriber)},SubscribeOnObservable.prototype._subscribe=function(subscriber){var delay=this.delayTime,source=this.source,scheduler=this.scheduler;return scheduler.schedule(SubscribeOnObservable.dispatch,delay,{source:source,subscriber:subscriber})},SubscribeOnObservable}(Observable_1.Observable);exports.SubscribeOnObservable=SubscribeOnObservable},function(module,exports,__webpack_require__){"use strict";var AsapScheduler_1=__webpack_require__(536);exports.asap=new AsapScheduler_1.AsapScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsapAction_1=__webpack_require__(537),QueueScheduler_1=__webpack_require__(379),AsapScheduler=function(_super){function AsapScheduler(){_super.apply(this,arguments)}return __extends(AsapScheduler,_super),AsapScheduler.prototype.scheduleNow=function(work,state){return new AsapAction_1.AsapAction(this,work).schedule(state)},AsapScheduler}(QueueScheduler_1.QueueScheduler);exports.AsapScheduler=AsapScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Immediate_1=__webpack_require__(538),FutureAction_1=__webpack_require__(378),AsapAction=function(_super){function AsapAction(){_super.apply(this,arguments)}return __extends(AsapAction,_super),AsapAction.prototype._schedule=function(state,delay){if(void 0===delay&&(delay=0),delay>0)return _super.prototype._schedule.call(this,state,delay);this.delay=delay,this.state=state;var scheduler=this.scheduler;return scheduler.actions.push(this),scheduler.scheduledId||(scheduler.scheduledId=Immediate_1.Immediate.setImmediate(function(){scheduler.scheduledId=null,scheduler.flush()})),this},AsapAction.prototype._unsubscribe=function(){var scheduler=this.scheduler,scheduledId=scheduler.scheduledId,actions=scheduler.actions;_super.prototype._unsubscribe.call(this),0===actions.length&&(scheduler.active=!1,null!=scheduledId&&(scheduler.scheduledId=null,Immediate_1.Immediate.clearImmediate(scheduledId)))},AsapAction}(FutureAction_1.FutureAction);exports.AsapAction=AsapAction},function(module,exports,__webpack_require__){(function(clearImmediate,setImmediate){"use strict";var root_1=__webpack_require__(42),ImmediateDefinition=function(){function ImmediateDefinition(root){if(this.root=root,root.setImmediate&&"function"==typeof root.setImmediate)this.setImmediate=root.setImmediate.bind(root),this.clearImmediate=root.clearImmediate.bind(root);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var ci=function clearImmediate(handle){delete clearImmediate.instance.tasksByHandle[handle]};ci.instance=this,this.clearImmediate=ci}}return ImmediateDefinition.prototype.identify=function(o){return this.root.Object.prototype.toString.call(o)},ImmediateDefinition.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},ImmediateDefinition.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},ImmediateDefinition.prototype.canUseReadyStateChange=function(){var document=this.root.document;return Boolean(document&&"onreadystatechange"in document.createElement("script"))},ImmediateDefinition.prototype.canUsePostMessage=function(){var root=this.root;if(root.postMessage&&!root.importScripts){var postMessageIsAsynchronous_1=!0,oldOnMessage=root.onmessage;return root.onmessage=function(){postMessageIsAsynchronous_1=!1},root.postMessage("","*"),root.onmessage=oldOnMessage,postMessageIsAsynchronous_1}return!1},ImmediateDefinition.prototype.partiallyApplied=function(handler){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var fn=function result(){var _a=result,handler=_a.handler,args=_a.args;"function"==typeof handler?handler.apply(void 0,args):new Function(""+handler)()};return fn.handler=handler,fn.args=args,fn},ImmediateDefinition.prototype.addFromSetImmediateArguments=function(args){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,args),this.nextHandle++},ImmediateDefinition.prototype.createProcessNextTickSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.process.nextTick(instance.partiallyApplied(instance.runIfPresent,handle)),handle};return fn.instance=this,fn},ImmediateDefinition.prototype.createPostMessageSetImmediate=function(){var root=this.root,messagePrefix="setImmediate$"+root.Math.random()+"$",onGlobalMessage=function globalMessageHandler(event){var instance=globalMessageHandler.instance;event.source===root&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&instance.runIfPresent(+event.data.slice(messagePrefix.length))};onGlobalMessage.instance=this,root.addEventListener("message",onGlobalMessage,!1);var fn=function setImmediate(){var _a=setImmediate,messagePrefix=_a.messagePrefix,instance=_a.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.postMessage(messagePrefix+handle,"*"),handle};return fn.instance=this,fn.messagePrefix=messagePrefix,fn},ImmediateDefinition.prototype.runIfPresent=function(handle){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,handle),0);else{var task=this.tasksByHandle[handle];if(task){this.currentlyRunningATask=!0;try{task()}finally{this.clearImmediate(handle),this.currentlyRunningATask=!1;
}}}},ImmediateDefinition.prototype.createMessageChannelSetImmediate=function(){var _this=this,channel=new this.root.MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;_this.runIfPresent(handle)};var fn=function setImmediate(){var _a=setImmediate,channel=_a.channel,instance=_a.instance,handle=instance.addFromSetImmediateArguments(arguments);return channel.port2.postMessage(handle),handle};return fn.channel=channel,fn.instance=this,fn},ImmediateDefinition.prototype.createReadyStateChangeSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,root=instance.root,doc=root.document,html=doc.documentElement,handle=instance.addFromSetImmediateArguments(arguments),script=doc.createElement("script");return script.onreadystatechange=function(){instance.runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script),handle};return fn.instance=this,fn},ImmediateDefinition.prototype.createSetTimeoutSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.setTimeout(instance.partiallyApplied(instance.runIfPresent,handle),0),handle};return fn.instance=this,fn},ImmediateDefinition}();exports.ImmediateDefinition=ImmediateDefinition,exports.Immediate=new ImmediateDefinition(root_1.root)}).call(exports,__webpack_require__(539).clearImmediate,__webpack_require__(539).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=__webpack_require__(540).nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=arguments.length<2?!1:slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(539).setImmediate,__webpack_require__(539).clearImmediate)},,function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),switch_1=__webpack_require__(542);Observable_1.Observable.prototype["switch"]=switch_1._switch},function(module,exports,__webpack_require__){"use strict";function _switch(){return this.lift(new SwitchOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports._switch=_switch;var SwitchOperator=function(){function SwitchOperator(){}return SwitchOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchSubscriber(subscriber))},SwitchOperator}(),SwitchSubscriber=function(_super){function SwitchSubscriber(destination){_super.call(this,destination),this.active=0,this.hasCompleted=!1}return __extends(SwitchSubscriber,_super),SwitchSubscriber.prototype._next=function(value){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,value))},SwitchSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},SwitchSubscriber.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var innerSubscription=this.innerSubscription;innerSubscription&&(innerSubscription.unsubscribe(),this.remove(innerSubscription))},SwitchSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},SwitchSubscriber.prototype.notifyError=function(err){this.destination.error(err)},SwitchSubscriber.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},SwitchSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),switchMap_1=__webpack_require__(544);Observable_1.Observable.prototype.switchMap=switchMap_1.switchMap},function(module,exports,__webpack_require__){"use strict";function switchMap(project,resultSelector){return this.lift(new SwitchMapOperator(project,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.switchMap=switchMap;var SwitchMapOperator=function(){function SwitchMapOperator(project,resultSelector){this.project=project,this.resultSelector=resultSelector}return SwitchMapOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchMapSubscriber(subscriber,this.project,this.resultSelector))},SwitchMapOperator}(),SwitchMapSubscriber=function(_super){function SwitchMapSubscriber(destination,project,resultSelector){_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.index=0}return __extends(SwitchMapSubscriber,_super),SwitchMapSubscriber.prototype._next=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result,value,index)},SwitchMapSubscriber.prototype._innerSub=function(result,value,index){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,result,value,index))},SwitchMapSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.isUnsubscribed||_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.resultSelector?this._tryNotifyNext(outerValue,innerValue,outerIndex,innerIndex):this.destination.next(innerValue)},SwitchMapSubscriber.prototype._tryNotifyNext=function(outerValue,innerValue,outerIndex,innerIndex){var result;try{result=this.resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void this.destination.error(err)}this.destination.next(result)},SwitchMapSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),switchMapTo_1=__webpack_require__(546);Observable_1.Observable.prototype.switchMapTo=switchMapTo_1.switchMapTo},function(module,exports,__webpack_require__){"use strict";function switchMapTo(innerObservable,resultSelector){return this.lift(new SwitchMapToOperator(innerObservable,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.switchMapTo=switchMapTo;var SwitchMapToOperator=function(){function SwitchMapToOperator(observable,resultSelector){this.observable=observable,this.resultSelector=resultSelector}return SwitchMapToOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchMapToSubscriber(subscriber,this.observable,this.resultSelector))},SwitchMapToOperator}(),SwitchMapToSubscriber=function(_super){function SwitchMapToSubscriber(destination,inner,resultSelector){_super.call(this,destination),this.inner=inner,this.resultSelector=resultSelector,this.index=0}return __extends(SwitchMapToSubscriber,_super),SwitchMapToSubscriber.prototype._next=function(value){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,this.inner,value,this.index++))},SwitchMapToSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.isUnsubscribed||_super.prototype._complete.call(this)},SwitchMapToSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapToSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapToSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.tryResultSelector(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},SwitchMapToSubscriber.prototype.tryResultSelector=function(outerValue,innerValue,outerIndex,innerIndex){var result,_a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{result=resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void destination.error(err)}destination.next(result)},SwitchMapToSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),take_1=__webpack_require__(548);Observable_1.Observable.prototype.take=take_1.take},function(module,exports,__webpack_require__){"use strict";function take(count){return 0===count?new EmptyObservable_1.EmptyObservable:this.lift(new TakeOperator(count))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),ArgumentOutOfRangeError_1=__webpack_require__(549),EmptyObservable_1=__webpack_require__(336);exports.take=take;var TakeOperator=function(){function TakeOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeSubscriber(subscriber,this.total))},TakeOperator}(),TakeSubscriber=function(_super){function TakeSubscriber(destination,total){_super.call(this,destination),this.total=total,this.count=0}return __extends(TakeSubscriber,_super),TakeSubscriber.prototype._next=function(value){var total=this.total;++this.count<=total&&(this.destination.next(value),this.count===total&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(Subscriber_1.Subscriber)},function(module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArgumentOutOfRangeError=function(_super){function ArgumentOutOfRangeError(){_super.call(this,"argument out of range"),this.name="ArgumentOutOfRangeError"}return __extends(ArgumentOutOfRangeError,_super),ArgumentOutOfRangeError}(Error);exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),takeLast_1=__webpack_require__(551);Observable_1.Observable.prototype.takeLast=takeLast_1.takeLast},function(module,exports,__webpack_require__){"use strict";function takeLast(count){return 0===count?new EmptyObservable_1.EmptyObservable:this.lift(new TakeLastOperator(count))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),ArgumentOutOfRangeError_1=__webpack_require__(549),EmptyObservable_1=__webpack_require__(336);exports.takeLast=takeLast;var TakeLastOperator=function(){function TakeLastOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeLastOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeLastSubscriber(subscriber,this.total))},TakeLastOperator}(),TakeLastSubscriber=function(_super){function TakeLastSubscriber(destination,total){_super.call(this,destination),this.total=total,this.ring=new Array,this.count=0}return __extends(TakeLastSubscriber,_super),TakeLastSubscriber.prototype._next=function(value){var ring=this.ring,total=this.total,count=this.count++;if(ring.length<total)ring.push(value);else{var index=count%total;ring[index]=value}},TakeLastSubscriber.prototype._complete=function(){var destination=this.destination,count=this.count;if(count>0)for(var total=this.count>=this.total?this.total:this.count,ring=this.ring,i=0;total>i;i++){var idx=count++%total;destination.next(ring[idx])}destination.complete()},TakeLastSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),takeUntil_1=__webpack_require__(553);Observable_1.Observable.prototype.takeUntil=takeUntil_1.takeUntil},function(module,exports,__webpack_require__){"use strict";function takeUntil(notifier){return this.lift(new TakeUntilOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.takeUntil=takeUntil;var TakeUntilOperator=function(){function TakeUntilOperator(notifier){this.notifier=notifier}return TakeUntilOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeUntilSubscriber(subscriber,this.notifier))},TakeUntilOperator}(),TakeUntilSubscriber=function(_super){function TakeUntilSubscriber(destination,notifier){_super.call(this,destination),this.notifier=notifier,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(TakeUntilSubscriber,_super),TakeUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),takeWhile_1=__webpack_require__(555);Observable_1.Observable.prototype.takeWhile=takeWhile_1.takeWhile},function(module,exports,__webpack_require__){"use strict";function takeWhile(predicate){return this.lift(new TakeWhileOperator(predicate))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.takeWhile=takeWhile;var TakeWhileOperator=function(){function TakeWhileOperator(predicate){this.predicate=predicate}return TakeWhileOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeWhileSubscriber(subscriber,this.predicate))},TakeWhileOperator}(),TakeWhileSubscriber=function(_super){function TakeWhileSubscriber(destination,predicate){_super.call(this,destination),this.predicate=predicate,this.index=0}return __extends(TakeWhileSubscriber,_super),TakeWhileSubscriber.prototype._next=function(value){var result,destination=this.destination;try{result=this.predicate(value,this.index++)}catch(err){return void destination.error(err)}this.nextOrComplete(value,result)},TakeWhileSubscriber.prototype.nextOrComplete=function(value,predicateResult){var destination=this.destination;Boolean(predicateResult)?destination.next(value):destination.complete()},TakeWhileSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),throttle_1=__webpack_require__(557);Observable_1.Observable.prototype.throttle=throttle_1.throttle},function(module,exports,__webpack_require__){"use strict";function throttle(durationSelector){return this.lift(new ThrottleOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.throttle=throttle;var ThrottleOperator=function(){function ThrottleOperator(durationSelector){this.durationSelector=durationSelector}return ThrottleOperator.prototype.call=function(subscriber,source){return source._subscribe(new ThrottleSubscriber(subscriber,this.durationSelector))},ThrottleOperator}(),ThrottleSubscriber=function(_super){function ThrottleSubscriber(destination,durationSelector){_super.call(this,destination),this.destination=destination,this.durationSelector=durationSelector}return __extends(ThrottleSubscriber,_super),ThrottleSubscriber.prototype._next=function(value){this.throttled||this.tryDurationSelector(value)},ThrottleSubscriber.prototype.tryDurationSelector=function(value){var duration=null;try{duration=this.durationSelector(value)}catch(err){return void this.destination.error(err)}this.emitAndThrottle(value,duration)},ThrottleSubscriber.prototype.emitAndThrottle=function(value,duration){this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,duration)),this.destination.next(value)},ThrottleSubscriber.prototype._unsubscribe=function(){var throttled=this.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe())},ThrottleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._unsubscribe()},ThrottleSubscriber.prototype.notifyComplete=function(){this._unsubscribe()},ThrottleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),throttleTime_1=__webpack_require__(559);Observable_1.Observable.prototype.throttleTime=throttleTime_1.throttleTime},function(module,exports,__webpack_require__){"use strict";function throttleTime(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new ThrottleTimeOperator(duration,scheduler))}function dispatchNext(arg){var subscriber=arg.subscriber;subscriber.clearThrottle()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.throttleTime=throttleTime;var ThrottleTimeOperator=function(){function ThrottleTimeOperator(duration,scheduler){this.duration=duration,this.scheduler=scheduler}return ThrottleTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new ThrottleTimeSubscriber(subscriber,this.duration,this.scheduler))},ThrottleTimeOperator}(),ThrottleTimeSubscriber=function(_super){function ThrottleTimeSubscriber(destination,duration,scheduler){_super.call(this,destination),this.duration=duration,this.scheduler=scheduler}return __extends(ThrottleTimeSubscriber,_super),ThrottleTimeSubscriber.prototype._next=function(value){this.throttled||(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.destination.next(value))},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var throttled=this.throttled;throttled&&(throttled.unsubscribe(),this.remove(throttled),this.throttled=null)},ThrottleTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),timeout_1=__webpack_require__(561);Observable_1.Observable.prototype.timeout=timeout_1.timeout},function(module,exports,__webpack_require__){"use strict";function timeout(due,errorToSend,scheduler){void 0===errorToSend&&(errorToSend=null),void 0===scheduler&&(scheduler=async_1.async);var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return this.lift(new TimeoutOperator(waitFor,absoluteTimeout,errorToSend,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),isDate_1=__webpack_require__(401),Subscriber_1=__webpack_require__(45);exports.timeout=timeout;var TimeoutOperator=function(){function TimeoutOperator(waitFor,absoluteTimeout,errorToSend,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.errorToSend=errorToSend,this.scheduler=scheduler}return TimeoutOperator.prototype.call=function(subscriber,source){return source._subscribe(new TimeoutSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},TimeoutOperator}(),TimeoutSubscriber=function(_super){function TimeoutSubscriber(destination,absoluteTimeout,waitFor,errorToSend,scheduler){_super.call(this,destination),this.absoluteTimeout=absoluteTimeout,this.waitFor=waitFor,this.errorToSend=errorToSend,this.scheduler=scheduler,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return __extends(TimeoutSubscriber,_super),Object.defineProperty(TimeoutSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutSubscriber.dispatchTimeout=function(state){var source=state.subscriber,currentIndex=state.index;source.hasCompleted||source.previousIndex!==currentIndex||source.notifyTimeout()},TimeoutSubscriber.prototype.scheduleTimeout=function(){var currentIndex=this.index;this.scheduler.schedule(TimeoutSubscriber.dispatchTimeout,this.waitFor,{subscriber:this,index:currentIndex}),this.index++,this._previousIndex=currentIndex},TimeoutSubscriber.prototype._next=function(value){this.destination.next(value),this.absoluteTimeout||this.scheduleTimeout()},TimeoutSubscriber.prototype._error=function(err){this.destination.error(err),this._hasCompleted=!0},TimeoutSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutSubscriber.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},TimeoutSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),timeoutWith_1=__webpack_require__(563);Observable_1.Observable.prototype.timeoutWith=timeoutWith_1.timeoutWith},function(module,exports,__webpack_require__){"use strict";function timeoutWith(due,withObservable,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return this.lift(new TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),isDate_1=__webpack_require__(401),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.timeoutWith=timeoutWith;var TimeoutWithOperator=function(){function TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.withObservable=withObservable,this.scheduler=scheduler}return TimeoutWithOperator.prototype.call=function(subscriber,source){return source._subscribe(new TimeoutWithSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),TimeoutWithSubscriber=function(_super){function TimeoutWithSubscriber(destination,absoluteTimeout,waitFor,withObservable,scheduler){_super.call(this),this.destination=destination,this.absoluteTimeout=absoluteTimeout,this.waitFor=waitFor,this.withObservable=withObservable,this.scheduler=scheduler,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,destination.add(this),this.scheduleTimeout()}return __extends(TimeoutWithSubscriber,_super),Object.defineProperty(TimeoutWithSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutWithSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutWithSubscriber.dispatchTimeout=function(state){var source=state.subscriber,currentIndex=state.index;source.hasCompleted||source.previousIndex!==currentIndex||source.handleTimeout()},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var currentIndex=this.index,timeoutState={subscriber:this,index:currentIndex};this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,timeoutState),this.index++,this._previousIndex=currentIndex},TimeoutWithSubscriber.prototype._next=function(value){this.destination.next(value),this.absoluteTimeout||this.scheduleTimeout()},TimeoutWithSubscriber.prototype._error=function(err){this.destination.error(err),this._hasCompleted=!0},TimeoutWithSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutWithSubscriber.prototype.handleTimeout=function(){if(!this.isUnsubscribed){var withObservable=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=subscribeToResult_1.subscribeToResult(this,withObservable))}},TimeoutWithSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),toArray_1=__webpack_require__(565);Observable_1.Observable.prototype.toArray=toArray_1.toArray},function(module,exports,__webpack_require__){"use strict";function toArray(){return this.lift(new ToArrayOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.toArray=toArray;var ToArrayOperator=function(){function ToArrayOperator(){}return ToArrayOperator.prototype.call=function(subscriber,source){return source._subscribe(new ToArraySubscriber(subscriber))},ToArrayOperator}(),ToArraySubscriber=function(_super){function ToArraySubscriber(destination){_super.call(this,destination),this.array=[]}return __extends(ToArraySubscriber,_super),ToArraySubscriber.prototype._next=function(x){this.array.push(x)},ToArraySubscriber.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},ToArraySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),toPromise_1=__webpack_require__(61);Observable_1.Observable.prototype.toPromise=toPromise_1.toPromise},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),window_1=__webpack_require__(568);Observable_1.Observable.prototype.window=window_1.window},function(module,exports,__webpack_require__){"use strict";function window(windowBoundaries){return this.lift(new WindowOperator(windowBoundaries))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.window=window;var WindowOperator=function(){function WindowOperator(windowBoundaries){this.windowBoundaries=windowBoundaries}return WindowOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowSubscriber(subscriber,this.windowBoundaries))},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination,windowBoundaries){_super.call(this,destination),this.destination=destination,this.windowBoundaries=windowBoundaries,this.add(subscribeToResult_1.subscribeToResult(this,windowBoundaries)),this.openWindow()}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow()},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this._complete()},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype.openWindow=function(){var prevWindow=this.window;prevWindow&&prevWindow.complete();var destination=this.destination,newWindow=this.window=new Subject_1.Subject;destination.add(newWindow),destination.next(newWindow)},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowCount_1=__webpack_require__(570);Observable_1.Observable.prototype.windowCount=windowCount_1.windowCount},function(module,exports,__webpack_require__){"use strict";function windowCount(windowSize,startWindowEvery){return void 0===startWindowEvery&&(startWindowEvery=0),this.lift(new WindowCountOperator(windowSize,startWindowEvery))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subject_1=__webpack_require__(40);exports.windowCount=windowCount;var WindowCountOperator=function(){function WindowCountOperator(windowSize,startWindowEvery){this.windowSize=windowSize,this.startWindowEvery=startWindowEvery}return WindowCountOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowCountSubscriber(subscriber,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),WindowCountSubscriber=function(_super){function WindowCountSubscriber(destination,windowSize,startWindowEvery){_super.call(this,destination),this.destination=destination,this.windowSize=windowSize,this.startWindowEvery=startWindowEvery,
this.windows=[new Subject_1.Subject],this.count=0;var firstWindow=this.windows[0];destination.add(firstWindow),destination.next(firstWindow)}return __extends(WindowCountSubscriber,_super),WindowCountSubscriber.prototype._next=function(value){for(var startWindowEvery=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,destination=this.destination,windowSize=this.windowSize,windows=this.windows,len=windows.length,i=0;len>i;i++)windows[i].next(value);var c=this.count-windowSize+1;if(c>=0&&c%startWindowEvery===0&&windows.shift().complete(),++this.count%startWindowEvery===0){var window_1=new Subject_1.Subject;windows.push(window_1),destination.add(window_1),destination.next(window_1)}},WindowCountSubscriber.prototype._error=function(err){for(var windows=this.windows;windows.length>0;)windows.shift().error(err);this.destination.error(err)},WindowCountSubscriber.prototype._complete=function(){for(var windows=this.windows;windows.length>0;)windows.shift().complete();this.destination.complete()},WindowCountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowTime_1=__webpack_require__(572);Observable_1.Observable.prototype.windowTime=windowTime_1.windowTime},function(module,exports,__webpack_require__){"use strict";function windowTime(windowTimeSpan,windowCreationInterval,scheduler){return void 0===windowCreationInterval&&(windowCreationInterval=null),void 0===scheduler&&(scheduler=async_1.async),this.lift(new WindowTimeOperator(windowTimeSpan,windowCreationInterval,scheduler))}function dispatchWindowTimeSpanOnly(state){var subscriber=state.subscriber,windowTimeSpan=state.windowTimeSpan,window=state.window;window&&window.complete(),state.window=subscriber.openWindow(),this.schedule(state,windowTimeSpan)}function dispatchWindowCreation(state){var windowTimeSpan=state.windowTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,windowCreationInterval=state.windowCreationInterval,window=subscriber.openWindow(),action=this,context={action:action,subscription:null},timeSpanState={subscriber:subscriber,window:window,context:context};context.subscription=scheduler.schedule(dispatchWindowClose,windowTimeSpan,timeSpanState),action.add(context.subscription),action.schedule(state,windowCreationInterval)}function dispatchWindowClose(arg){var subscriber=arg.subscriber,window=arg.window,context=arg.context;context&&context.action&&context.subscription&&context.action.remove(context.subscription),subscriber.closeWindow(window)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subject_1=__webpack_require__(40),async_1=__webpack_require__(376);exports.windowTime=windowTime;var WindowTimeOperator=function(){function WindowTimeOperator(windowTimeSpan,windowCreationInterval,scheduler){this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.scheduler=scheduler}return WindowTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowTimeSubscriber(subscriber,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},WindowTimeOperator}(),WindowTimeSubscriber=function(_super){function WindowTimeSubscriber(destination,windowTimeSpan,windowCreationInterval,scheduler){if(_super.call(this,destination),this.destination=destination,this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.scheduler=scheduler,this.windows=[],null!==windowCreationInterval&&windowCreationInterval>=0){var window_1=this.openWindow(),closeState={subscriber:this,window:window_1,context:null},creationState={windowTimeSpan:windowTimeSpan,windowCreationInterval:windowCreationInterval,subscriber:this,scheduler:scheduler};this.add(scheduler.schedule(dispatchWindowClose,windowTimeSpan,closeState)),this.add(scheduler.schedule(dispatchWindowCreation,windowCreationInterval,creationState))}else{var window_2=this.openWindow(),timeSpanOnlyState={subscriber:this,window:window_2,windowTimeSpan:windowTimeSpan};this.add(scheduler.schedule(dispatchWindowTimeSpanOnly,windowTimeSpan,timeSpanOnlyState))}}return __extends(WindowTimeSubscriber,_super),WindowTimeSubscriber.prototype._next=function(value){for(var windows=this.windows,len=windows.length,i=0;len>i;i++){var window_3=windows[i];window_3.isUnsubscribed||window_3.next(value)}},WindowTimeSubscriber.prototype._error=function(err){for(var windows=this.windows;windows.length>0;)windows.shift().error(err);this.destination.error(err)},WindowTimeSubscriber.prototype._complete=function(){for(var windows=this.windows;windows.length>0;){var window_4=windows.shift();window_4.isUnsubscribed||window_4.complete()}this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var window=new Subject_1.Subject;this.windows.push(window);var destination=this.destination;return destination.add(window),destination.next(window),window},WindowTimeSubscriber.prototype.closeWindow=function(window){window.complete();var windows=this.windows;windows.splice(windows.indexOf(window),1)},WindowTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowToggle_1=__webpack_require__(574);Observable_1.Observable.prototype.windowToggle=windowToggle_1.windowToggle},function(module,exports,__webpack_require__){"use strict";function windowToggle(openings,closingSelector){return this.lift(new WindowToggleOperator(openings,closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),Subscription_1=__webpack_require__(47),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.windowToggle=windowToggle;var WindowToggleOperator=function(){function WindowToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return WindowToggleOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowToggleSubscriber(subscriber,this.openings,this.closingSelector))},WindowToggleOperator}(),WindowToggleSubscriber=function(_super){function WindowToggleSubscriber(destination,openings,closingSelector){_super.call(this,destination),this.openings=openings,this.closingSelector=closingSelector,this.contexts=[],this.add(this.openSubscription=subscribeToResult_1.subscribeToResult(this,openings,openings))}return __extends(WindowToggleSubscriber,_super),WindowToggleSubscriber.prototype._next=function(value){var contexts=this.contexts;if(contexts)for(var len=contexts.length,i=0;len>i;i++)contexts[i].window.next(value)},WindowToggleSubscriber.prototype._error=function(err){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.error(err),context.subscription.unsubscribe()}_super.prototype._error.call(this,err)},WindowToggleSubscriber.prototype._complete=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.complete(),context.subscription.unsubscribe()}_super.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.unsubscribe(),context.subscription.unsubscribe()}},WindowToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(outerValue===this.openings){var closingSelector=this.closingSelector,closingNotifier=tryCatch_1.tryCatch(closingSelector)(innerValue);if(closingNotifier===errorObject_1.errorObject)return this.error(errorObject_1.errorObject.e);var window_1=new Subject_1.Subject,subscription=new Subscription_1.Subscription,context={window:window_1,subscription:subscription};this.contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);innerSubscription.isUnsubscribed?this.closeWindow(this.contexts.length-1):(innerSubscription.context=context,subscription.add(innerSubscription)),this.destination.next(window_1)}else this.closeWindow(this.contexts.indexOf(outerValue))},WindowToggleSubscriber.prototype.notifyError=function(err){this.error(err)},WindowToggleSubscriber.prototype.notifyComplete=function(inner){inner!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(inner.context))},WindowToggleSubscriber.prototype.closeWindow=function(index){if(-1!==index){var contexts=this.contexts,context=contexts[index],window=context.window,subscription=context.subscription;contexts.splice(index,1),window.complete(),subscription.unsubscribe()}},WindowToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowWhen_1=__webpack_require__(576);Observable_1.Observable.prototype.windowWhen=windowWhen_1.windowWhen},function(module,exports,__webpack_require__){"use strict";function windowWhen(closingSelector){return this.lift(new WindowOperator(closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.windowWhen=windowWhen;var WindowOperator=function(){function WindowOperator(closingSelector){this.closingSelector=closingSelector}return WindowOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowSubscriber(subscriber,this.closingSelector))},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination,closingSelector){_super.call(this,destination),this.destination=destination,this.closingSelector=closingSelector,this.openWindow()}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(innerSub){void 0===innerSub&&(innerSub=null),innerSub&&(this.remove(innerSub),innerSub.unsubscribe());var prevWindow=this.window;prevWindow&&prevWindow.complete();var window=this.window=new Subject_1.Subject;this.destination.next(window);var closingNotifier=tryCatch_1.tryCatch(this.closingSelector)();if(closingNotifier===errorObject_1.errorObject){var err=errorObject_1.errorObject.e;this.destination.error(err),this.window.error(err)}else this.add(this.closingNotification=subscribeToResult_1.subscribeToResult(this,closingNotifier)),this.add(window)},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),withLatestFrom_1=__webpack_require__(578);Observable_1.Observable.prototype.withLatestFrom=withLatestFrom_1.withLatestFrom},function(module,exports,__webpack_require__){"use strict";function withLatestFrom(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var project;"function"==typeof args[args.length-1]&&(project=args.pop());var observables=args;return this.lift(new WithLatestFromOperator(observables,project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.withLatestFrom=withLatestFrom;var WithLatestFromOperator=function(){function WithLatestFromOperator(observables,project){this.observables=observables,this.project=project}return WithLatestFromOperator.prototype.call=function(subscriber,source){return source._subscribe(new WithLatestFromSubscriber(subscriber,this.observables,this.project))},WithLatestFromOperator}(),WithLatestFromSubscriber=function(_super){function WithLatestFromSubscriber(destination,observables,project){_super.call(this,destination),this.observables=observables,this.project=project,this.toRespond=[];var len=observables.length;this.values=new Array(len);for(var i=0;len>i;i++)this.toRespond.push(i);for(var i=0;len>i;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i))}}return __extends(WithLatestFromSubscriber,_super),WithLatestFromSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue;var toRespond=this.toRespond;if(toRespond.length>0){var found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(value){if(0===this.toRespond.length){var args=[value].concat(this.values);this.project?this._tryProject(args):this.destination.next(args)}},WithLatestFromSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},WithLatestFromSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),zip_1=__webpack_require__(404);Observable_1.Observable.prototype.zip=zip_1.zipProto},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),zipAll_1=__webpack_require__(581);Observable_1.Observable.prototype.zipAll=zipAll_1.zipAll},function(module,exports,__webpack_require__){"use strict";function zipAll(project){return this.lift(new zip_1.ZipOperator(project))}var zip_1=__webpack_require__(404);exports.zipAll=zipAll},function(module,exports,__webpack_require__){"use strict";var Subscriber_1=__webpack_require__(45),Operator=function(){function Operator(){}return Operator.prototype.call=function(subscriber,source){return source._subscribe(new Subscriber_1.Subscriber(subscriber))},Operator}();exports.Operator=Operator},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),app_service_1=__webpack_require__(584),reference_service_1=__webpack_require__(585),staff_service_1=__webpack_require__(586),nav_1=__webpack_require__(587),projects_1=__webpack_require__(589),project_1=__webpack_require__(594),tasks_1=__webpack_require__(597),task_1=__webpack_require__(602),user_profile_1=__webpack_require__(604),login_1=__webpack_require__(606),user_1=__webpack_require__(607),App=function(){function App(_router,_appService,_referenceService,_staffService){this._router=_router,this._appService=_appService,this._referenceService=_referenceService,this._staffService=_staffService,this.HEADER_TITLE="Projects"}return App.prototype.resize=function(window){this.onResize(window)},Object.defineProperty(App.prototype,"device",{get:function(){return this.isMobileDevice},enumerable:!0,configurable:!0}),Object.defineProperty(App.prototype,"toggleNavVisible",{get:function(){return this.isNavCollapsed},enumerable:!0,configurable:!0}),App.prototype.ngOnInit=function(){var _this=this;this.isNavCollapsed=!1,this.loggedUser=new user_1.User,this.isMobileDevice=this.isMobile(),this._appService.getTranslations().subscribe(function(captions){return console.log(captions)},function(err){return _this._router.navigate(["Login"])})},App.prototype.toggleNav=function(){this.isNavCollapsed=!this.isNavCollapsed},App.prototype.hideNav=function(){this.isNavCollapsed=!1},App.prototype.logout=function(event){event.preventDefault(),this.loggedUser=null},App.prototype.goBack=function(){window.history.back()},App.prototype.preventDefault=function(event){event.preventDefault()},App.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},App.prototype.onResize=function(window){this.isMobileDevice=window.innerWidth<=1024||this.isMobile()},__decorate([core_1.HostListener("window:resize",["$event.target"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],App.prototype,"resize",null),__decorate([core_1.HostBinding("class.phone"),__metadata("design:type",Object)],App.prototype,"device",null),__decorate([core_1.HostBinding("class.side-nav-toggle"),__metadata("design:type",Object)],App.prototype,"toggleNavVisible",null),App=__decorate([core_1.Component({selector:"project-app",template:__webpack_require__(608),directives:[router_1.ROUTER_DIRECTIVES,nav_1.NavComponent]}),router_1.Routes([{path:"/projects",component:projects_1.ProjectsComponent},{path:"/project/:id",component:project_1.ProjectComponent},{path:"/tasks",component:tasks_1.TasksComponent},{path:"/tasks/:id",component:tasks_1.TasksComponent},{path:"/task/:id",component:task_1.TaskComponent},{path:"/user-profile",component:user_profile_1.UserProfileComponent},{path:"/login",component:login_1.LoginComponent}]),__metadata("design:paramtypes",[router_1.Router,app_service_1.AppService,reference_service_1.ReferenceService,staff_service_1.StaffService])],App)}();exports.App=App},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),HEADER={headers:new http_1.Headers({Accept:"application/json"})},AppService=function(){function AppService(http){this.http=http}return AppService.prototype.getTranslations=function(){var url="p?id=common-captions";return this.http.get(url,HEADER).map(function(response){return response.json().captions})},AppService.prototype.getNav=function(){var url="p?id=outline";return this.http.get(url,HEADER)},AppService.prototype.logout=function(){return this.http["delete"]("")},AppService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],AppService)}();exports.AppService=AppService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),HEADER={headers:new http_1.Headers({Accept:"application/json"})},ReferenceService=function(){function ReferenceService(http){this.http=http,this.getTags().subscribe(function(resp){return console.log(resp)}),this.getTaskTypes().subscribe(function(resp){return console.log(resp)})}return ReferenceService.prototype.getTags=function(){var url="/Reference/p?id=tags";return this.http.get(url,HEADER).map(function(response){return response.json().objects[0].list})},ReferenceService.prototype.getTaskTypes=function(){var url="/Reference/p?id=tasktypes";return this.http.get(url,HEADER).map(function(response){return response.json().objects[0].list})},ReferenceService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],ReferenceService)}();exports.ReferenceService=ReferenceService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),HEADER={headers:new http_1.Headers({Accept:"application/json"})},StaffService=function(){function StaffService(http){this.http=http,this.getOrganizations().subscribe(function(resp){return console.log(resp)}),this.getEmployees().subscribe(function(resp){return console.log(resp)})}return StaffService.prototype.getOrganizations=function(){var url="/Staff/p?id=get-organizations";return this.http.get(url,HEADER).map(function(response){return response.json().objects[0].list})},StaffService.prototype.getEmployees=function(){var url="p?id=users";return this.http.get(url,HEADER).map(function(response){return response.json().objects[0].list})},StaffService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],StaffService)}();exports.StaffService=StaffService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),app_service_1=__webpack_require__(584),NavComponent=function(){function NavComponent(_appService,_router){this._appService=_appService,this._router=_router}return NavComponent=__decorate([core_1.Component({selector:"[nav]",template:__webpack_require__(588),directives:[router_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[app_service_1.AppService,router_1.Router])],NavComponent)}();exports.NavComponent=NavComponent},function(module,exports){module.exports='<ul>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'inbox\']" class="nav-link">\r\n            <i class="fa fa-inbox"></i>\r\n            <span>{{\'inbox\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'today\']" class="nav-link">\r\n            <i class="fa fa-calendar-o"></i>\r\n            <span>{{\'today\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'week\']" class="nav-link">\r\n            <i class="fa fa-calendar"></i>\r\n            <span>{{\'week\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\']" class="nav-link">\r\n            <i class="fa fa-database"></i>\r\n            <span>{{\'all\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'completed\']" class="nav-link">\r\n            <i class="fa fa-check-square-o"></i>\r\n            <span>{{\'completed\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'my\']" class="nav-link">\r\n            <i class="fa fa-ticket"></i>\r\n            <span>{{\'my_tasks\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li class="divider"></li>\r\n    <li>\r\n        <a [routerLink]="[\'/projects\']" class="nav-link">\r\n            <i class="fa fa-puzzle-piece"></i>\r\n            <span>{{\'projects\'}}</span>\r\n        </a>\r\n    </li>\r\n</ul>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),project_service_1=__webpack_require__(590),project_1=__webpack_require__(594),ProjectsComponent=function(){function ProjectsComponent(_router,projectService){var _this=this;this._router=_router,this.projectService=projectService,projectService.getProjects().subscribe(function(projects){return _this.projects=projects})}return ProjectsComponent.prototype.composeRecord=function(){this._router.navigate(["/project","new"])},ProjectsComponent.prototype.deleteProject=function(project){this.projectService.deleteProject(project).map(function(response){return response}).subscribe()},ProjectsComponent=__decorate([core_1.Component({selector:"[projects]",template:__webpack_require__(596)}),router_1.Routes([{path:"/:id",component:project_1.ProjectComponent}]),__metadata("design:paramtypes",[router_1.Router,project_service_1.ProjectService])],ProjectsComponent)}();exports.ProjectsComponent=ProjectsComponent},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),project_factory_1=__webpack_require__(591),VIEW_URL="p?id=project-view",FORM_URL="p?id=project-form",HEADER={headers:new http_1.Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json"})},ProjectService=function(){function ProjectService(http){this.http=http}return ProjectService.prototype.getProjects=function(){return this.http.get(VIEW_URL,HEADER).map(function(resp){return project_factory_1.ProjectFactory.createProjectList(resp.json().objects[0].list)})},ProjectService.prototype.getProjectById=function(projectId){return this.http.get(FORM_URL+"&docid="+projectId,HEADER).map(function(resp){return project_factory_1.ProjectFactory.createProject(resp.json().objects[1])})},ProjectService.prototype.saveProject=function(project){var url=FORM_URL+(project.id?"&docid="+project.id:"");return this.http.post(url,project.serialize(),HEADER)},ProjectService.prototype.deleteProject=function(project){return this.http["delete"](VIEW_URL)},ProjectService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],ProjectService)}();exports.ProjectService=ProjectService},function(module,exports,__webpack_require__){"use strict";function createProject(json){var result=new project_1.Project;return result.id=json.id,result.author=json.author,result.regDate=json.regDate,result.name=json.name,result.status=json.status,result.customer=null,result.manager=null,result.programmer=null,result.tester=null,result.observers=null,result.comment=json.comment,result.finishDate=json.finishDate,result.attachments=null,result}function createProjectList(json){var result=[];return json.forEach(function(project){return result.push(createProject(project))}),result}var project_1=__webpack_require__(592);exports.ProjectFactory={createProject:createProject,createProjectList:createProjectList}},function(module,exports,__webpack_require__){"use strict";var obj_utils_1=__webpack_require__(593);exports.ProjectStatusType={UNKNOWN:0,DRAFT:899,PROCESSED:900,FINISHED:901};var Project=function(){function Project(){this.finishDate=new Date}return Project.prototype.serialize=function(){return obj_utils_1.serializeObj({name:this.name,status:this.status,customer:(this.customer?this.customer.id:"")||"",manager:this.manager||0,programmer:this.programmer||0,tester:this.tester||0,observers:this.observers?this.observers:"",comment:this.comment,finishDate:this.finishDate?this.finishDate.toString():"",attachments:""})},Project}();exports.Project=Project},function(module,exports){"use strict";function serializeObj(obj){var result=[];for(var property in obj)result.push(encodeURIComponent(property)+"="+encodeURIComponent(obj[property]));return result.join("&")}exports.serializeObj=serializeObj},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),project_1=__webpack_require__(592),project_service_1=__webpack_require__(590),staff_service_1=__webpack_require__(586),ProjectComponent=function(){
function ProjectComponent(_projectService,_staffService,_router,_params,_formBuilder){var _this=this;this._projectService=_projectService,this._staffService=_staffService,this._router=_router,this._params=_params,this._formBuilder=_formBuilder,this.loading=!0,this.project=new project_1.Project,this.name=new common_1.Control(""),this.status=new common_1.Control(""),this.customer=new common_1.Control(""),this.manager=new common_1.Control(""),this.programmer=new common_1.Control(""),this.tester=new common_1.Control(""),this.observers=new common_1.Control(""),this.comment=new common_1.Control(""),this.finishDate=new common_1.Control(""),this.attachments=new common_1.Control(""),this.projectForm=_formBuilder.group({name:this.name,status:this.status,customer:this.customer,manager:this.manager,programmer:this.programmer,tester:this.tester,observers:this.observers,comment:this.comment,finishDate:this.finishDate,attachments:this.attachments}),"new"!==this._params.getParam("id")?(this._projectService.getProjectById(this._params.getParam("id")).subscribe(function(project){_this.project=project,_this.loading=!1},function(err){console.log(err)}),this.project.id=this._params.getParam("id")):this.loading=!1,_staffService.getEmployees().subscribe(function(users){return _this.users=users})}return ProjectComponent.prototype.ngOnInit=function(){},ProjectComponent.prototype.saveProject=function(){var _this=this;this._projectService.saveProject(this.project).subscribe(function(response){return _this.close()})},ProjectComponent.prototype.close=function(){this._router.navigate(["/projects"])},ProjectComponent=__decorate([core_1.Component({selector:"[project]",template:__webpack_require__(595)}),__metadata("design:paramtypes",[project_service_1.ProjectService,staff_service_1.StaffService,router_1.Router,router_1.RouteSegment,common_1.FormBuilder])],ProjectComponent)}();exports.ProjectComponent=ProjectComponent},function(module,exports){module.exports='<div *ngIf="loading">\r\n    {{\'loading\'}}\r\n</div>\r\n<form [ngFormModel]="projectForm" [hidden]="loading">\r\n    <header class="content-header">\r\n        <button class="btn-back" type="button" (click)="close($event)">\r\n            <i class="fa fa-chevron-left"></i>\r\n        </button>\r\n        <h1 class="header-title">\r\n            {{\'project\'}}\r\n        </h1>\r\n        <div class="content-actions">\r\n            <button class="btn btn-primary" type="button" [disabled]="!projectForm.valid" (click)="saveProject()">\r\n                {{\'save_close\'}}\r\n            </button>\r\n            <button class="btn" type="button" (click)="close($event)">\r\n                {{\'close\'}}\r\n            </button>\r\n        </div>\r\n    </header>\r\n    <section class="content-body">\r\n        <fieldset class="fieldset">\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'name\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input class="span6" [(ngModel)]="project.name" ngControl="name" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'customer\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span6" [(ngModel)]="project.customer" ngControl="customer">\r\n                        <option *ngFor="let c of customers" [value]="c">{{c}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'manager\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span6" [(ngModel)]="project.manager" ngControl="manager">\r\n                        <option *ngFor="let m of users" [value]="m.id">{{m.login}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'programmer\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span6" [(ngModel)]="project.programmer" ngControl="programmer">\r\n                        <option *ngFor="let p of users" [value]="p.id">{{p.login}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'tester\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span6" [(ngModel)]="project.tester" ngControl="tester">\r\n                        <option *ngFor="let t of users" [value]="t.id">{{t.login}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'observers\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span6" [(ngModel)]="project.observers" ngControl="observers">\r\n                        <option *ngFor="let obs of users" [value]="obs.id">{{obs.login}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'status\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span6" [(ngModel)]="project.status" ngControl="status">\r\n                        <option *ngFor="let st of statuses" [value]="st">{{st}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'finishDate\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input type="date" class="span2" [(ngModel)]="project.finishDate" ngControl="finishDate" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'comment\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <textarea class="span6" [(ngModel)]="project.comment" ngControl="comment"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                attachments\r\n            </div>\r\n        </fieldset>\r\n    </section>\r\n</form>\r\n'},function(module,exports){module.exports='<div class="content-header">\r\n    <h1 class="header-title">\r\n        {{\'projects\'}}\r\n    </h1>\r\n    <div class="content-actions">\r\n        <button class="btn" type="button" (click)="composeRecord()">\r\n            {{\'new_project\'}}\r\n        </button>\r\n    </div>\r\n</div>\r\n<div class="content-body">\r\n    <div class="view">\r\n        <header class="entries-head">\r\n            <div class="head-wrap">\r\n                <label class="entry-select">\r\n                    <input type="checkbox" data-toggle="docid" class="all" />\r\n                </label>\r\n                <div class="entry-captions">\r\n                    <span>\r\n                        {{\'name\'}}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </header>\r\n        <div class="entries">\r\n            <div *ngIf="!projects">\r\n                {{\'loading\'}}\r\n            </div>\r\n            <div class="entry-wrap" *ngFor="let project of projects">\r\n                <div data-id="{{project.id}}" class="entry">\r\n                    <label class="entry-select">\r\n                        <input type="checkbox" name="docid" value="{{project.id}}" />\r\n                    </label>\r\n                    <a class="entry-link" [routerLink]="[\'/project\', project.id]">\r\n                        <div class="entry-fields">\r\n                            <span>\r\n                                {{project.name}}\r\n                            </span>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),task_service_1=__webpack_require__(598),TasksComponent=function(){function TasksComponent(_router,_params,taskService){var _this=this;this._router=_router,this._params=_params,this.taskService=taskService,taskService.getTasks(_params.getParam("at")).subscribe(function(tasks){return _this.tasks=tasks})}return TasksComponent.prototype.composeRecord=function(){this._router.navigate(["/task","new"])},TasksComponent.prototype.deleteTask=function(task){this.taskService.deleteTask(task).map(function(response){return response}).subscribe()},TasksComponent=__decorate([core_1.Component({selector:"[tasks]",template:__webpack_require__(601)}),__metadata("design:paramtypes",[router_1.Router,router_1.RouteSegment,task_service_1.TaskService])],TasksComponent)}();exports.TasksComponent=TasksComponent},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),task_factory_1=__webpack_require__(599),VIEW_URL="p?id=task-view",FORM_URL="p?id=task-form",HEADER={headers:new http_1.Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json"})},TaskService=function(){function TaskService(http){this.http=http}return TaskService.prototype.getTasks=function(at){return this.http.get(VIEW_URL+(at?"&at="+at:""),HEADER).map(function(resp){return task_factory_1.TaskFactory.createTaskList(resp.json().objects[0].list)})},TaskService.prototype.getTaskById=function(taskId){return this.http.get(FORM_URL+"&docid="+taskId,HEADER).map(function(response){return task_factory_1.TaskFactory.createTask(response.json().objects[1])})},TaskService.prototype.saveTask=function(task){var url=FORM_URL+(task.id?"&docid="+task.id:"");return this.http.post(url,task.serialize(),HEADER)},TaskService.prototype.deleteTask=function(task){return this.http["delete"](VIEW_URL)},TaskService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],TaskService)}();exports.TaskService=TaskService},function(module,exports,__webpack_require__){"use strict";function createTask(json){var result=new task_1.Task;return result.id=json.id,result.author=json.author,result.regDate=json.regDate,result.type=json.type,result.status=json.status,result.priority=json.priority,result.body=json.body,result.assignee=json.assignee,result.startDate=json.startDate,result.dueDate=json.dueDate,result.tags=json.tags,result.attachments=null,result}function createTaskList(json){var result=[];return json.forEach(function(task){return result.push(createTask(task))}),result}var task_1=__webpack_require__(600);exports.TaskFactory={createTask:createTask,createTaskList:createTaskList}},function(module,exports,__webpack_require__){"use strict";var obj_utils_1=__webpack_require__(593);exports.TaskPriorityType={UNKNOWN:0,HEIGHEST:1,HEIGHT:2,MEDIUM:3,NORMAL:4},exports.TaskStatusType={UNKNOWN:0,DRAFT:453,WAITING:454,PROCESSED:455,FINISHED:456};var Task=function(){function Task(){}return Task.prototype.serialize=function(){return obj_utils_1.serializeObj({body:this.body})},Task}();exports.Task=Task},function(module,exports){module.exports='<div class="content-header">\r\n    <h1 class="header-title">\r\n        {{\'tasks\'}}\r\n    </h1>\r\n    <div class="content-actions">\r\n        <button class="btn" type="button" (click)="composeRecord()">\r\n            {{\'new_task\'}}\r\n        </button>\r\n    </div>\r\n</div>\r\n<div class="content-body">\r\n    <div class="view">\r\n        <header class="entries-head">\r\n            <div class="head-wrap">\r\n                <label class="entry-select">\r\n                    <input type="checkbox" data-toggle="docid" class="all" />\r\n                </label>\r\n                <div class="entry-captions">\r\n                    <span>\r\n                        {{\'body\'}}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </header>\r\n        <div class="entries">\r\n            <div *ngIf="!tasks">\r\n                {{\'loading\'}}\r\n            </div>\r\n            <div class="entry-wrap" *ngFor="let task of tasks">\r\n                <div data-id="{{task.id}}" class="entry">\r\n                    <label class="entry-select">\r\n                        <input type="checkbox" name="docid" value="{{task.id}}" />\r\n                    </label>\r\n                    <a class="entry-link" [routerLink]="[\'/task\', task.id]">\r\n                        <div class="entry-fields">\r\n                            <span>\r\n                                {{task.body}}\r\n                            </span>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),task_1=__webpack_require__(600),task_service_1=__webpack_require__(598),TaskComponent=function(){function TaskComponent(_taskService,_router,_params,_formBuilder){var _this=this;this._taskService=_taskService,this._router=_router,this._params=_params,this._formBuilder=_formBuilder,this.loading=!0,this.task=new task_1.Task,this.body=new common_1.Control(""),this.taskForm=_formBuilder.group({body:this.body}),"new"!==this._params.getParam("id")?this._taskService.getTaskById(this._params.getParam("id")).subscribe(function(task){_this.task=task,_this.loading=!1},function(err){console.log(err)}):this.loading=!1}return TaskComponent.prototype.ngOnInit=function(){},TaskComponent.prototype.saveTask=function(){var _this=this;this._taskService.saveTask(this.task).subscribe(function(resp){return _this.close()})},TaskComponent.prototype.close=function(){this._router.navigate(["/tasks"])},TaskComponent=__decorate([core_1.Component({selector:"[task]",template:__webpack_require__(603)}),__metadata("design:paramtypes",[task_service_1.TaskService,router_1.Router,router_1.RouteSegment,common_1.FormBuilder])],TaskComponent)}();exports.TaskComponent=TaskComponent},function(module,exports){module.exports='<div *ngIf="loading">\r\n    {{\'loading\'}}\r\n</div>\r\n<form [ngFormModel]="taskForm" [hidden]="loading">\r\n    <header class="content-header">\r\n        <button class="btn-back" type="button" (click)="close($event)">\r\n            <i class="fa fa-chevron-left"></i>\r\n        </button>\r\n        <h1 class="header-title">\r\n            {{\'task\'}}\r\n        </h1>\r\n        <div class="content-actions">\r\n            <button class="btn btn-primary" type="button" [disabled]="!taskForm.valid" (click)="saveTask()">\r\n                {{\'save_close\'}}\r\n            </button>\r\n            <button class="btn" type="button" (click)="close($event)">\r\n                {{\'close\'}}\r\n            </button>\r\n        </div>\r\n    </header>\r\n    <section class="content-body">\r\n        <fieldset class="fieldset">\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'task_type\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select name="taskType">\r\n                        <option value=""></option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'status\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select name="status">\r\n                        <option value=""></option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'priority\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select name="priority">\r\n                        <option value=""></option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'body\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <textarea class="span7" [(ngModel)]="task.body" ngControl="body"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'assignee_user\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select name="assignee">\r\n                        <option value=""></option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'start_date\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input type="date" name="startDate" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'due_date\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input type="date" name="dueDate" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'tags\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select name="tags">\r\n                        <option value=""></option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                attachments\r\n            </div>\r\n        </fieldset>\r\n    </section>\r\n</form>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),UserProfileComponent=function(){function UserProfileComponent(){}return UserProfileComponent.prototype.close=function(){window.history.back()},UserProfileComponent=__decorate([core_1.Component({selector:"[user-profile]",template:__webpack_require__(605)}),__metadata("design:paramtypes",[])],UserProfileComponent)}();exports.UserProfileComponent=UserProfileComponent},function(module,exports){module.exports='<form name="{@entity}" class="form form-userprofile" action="" autocomplete="off">\r\n    <header class="content-header">\r\n        <h1 class="header-title">\r\n            <xsl:value-of select="concat(//captions/employee/@caption, \' - \', fields/name)"/>\r\n        </h1>\r\n        <div class="content-actions">\r\n            <xsl:apply-templates select="//actionbar" />\r\n        </div>\r\n    </header>\r\n    <section class="content-body">\r\n        <ul class="nav nav-tabs" role="tablist">\r\n            <li class="active">\r\n                <a href="#tabs-1" role="tab" data-toggle="tab">\r\n                    <xsl:value-of select="//captions/properties/@caption" />\r\n                </a>\r\n            </li>\r\n            <li>\r\n                <a href="#tabs-3" role="tab" data-toggle="tab">\r\n                    <xsl:value-of select="//captions/interface/@caption" />\r\n                </a>\r\n            </li>\r\n        </ul>\r\n        <div class="tab-content">\r\n            <div role="tabpanel" class="tab-pane active" id="tabs-1">\r\n                <!--<fieldset class="fieldset fieldset-user-avatar">\r\n                            <img class="user-avatar" src="img/avatar.png"/>\r\n                </fieldset>-->\r\n                <fieldset class="fieldset fieldset-user-fields">\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/user_name/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                <xsl:value-of select="fields/name"/>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/login_name/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="text" name="login" value="{fields/login}" class="span3" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/password/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="password" name="pwd" class="span3" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/password_confirm/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="password" name="pwd_confirm" class="span3" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/email/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="text" name="email" value="{fields/email}" class="span3" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/org_name/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                <xsl:value-of select="fields/organization"/>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/department/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                <xsl:value-of select="fields/department"/>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/position/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                <xsl:value-of select="fields/position"/>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/roles/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <ul class="input-placeholder list-style-none">\r\n                                <xsl:for-each select="fields/roles/entry">\r\n                                    <li>\r\n                                        <xsl:value-of select="." />\r\n                                    </li>\r\n                                </xsl:for-each>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n            </div>\r\n            <div role="tabpanel" class="tab-pane" id="tabs-3">\r\n                <fieldset class="fieldset">\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/limit_view/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <select name="pagesize" class="native span2">\r\n                                <option value="10">\r\n                                    <xsl:if test="//pagesize = \'10\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    10\r\n                                </option>\r\n                                <option value="20">\r\n                                    <xsl:if test="//pagesize = \'20\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    20\r\n                                </option>\r\n                                <option value="30">\r\n                                    <xsl:if test="//pagesize = \'30\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    30\r\n                                </option>\r\n                                <option value="50">\r\n                                    <xsl:if test="//pagesize = \'50\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    50\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            <xsl:value-of select="//captions/interface_lang/@caption" />\r\n                        </div>\r\n                        <div class="controls">\r\n                            <xsl:variable name="currentlang" select="/request/@lang" />\r\n                            <select name="lang" class="native span2">\r\n                                <xsl:for-each select="//query[@entity = \'language\']/entry">\r\n                                    <option value="{viewcontent/lang/@id}">\r\n                                        <xsl:if test="viewcontent/lang/@id = $currentlang">\r\n                                            <xsl:attribute name="selected" select="\'selected\'" />\r\n                                        </xsl:if>\r\n                                        <xsl:value-of select="viewcontent/lang" />\r\n                                    </option>\r\n                                </xsl:for-each>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label"></div>\r\n                        <div class="controls">\r\n                            <a href="javascript:void(0)" data-toggle-theme="theme1" class="input-placeholder">\r\n                                <xsl:value-of select="//captions/change_skin/@caption" />\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</form>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),LoginComponent=function(){function LoginComponent(){}return LoginComponent=__decorate([core_1.Component({selector:"[login]",template:"login"
}),__metadata("design:paramtypes",[])],LoginComponent)}();exports.LoginComponent=LoginComponent},function(module,exports){"use strict";var User=function(){function User(){this.userName="@anonymous"}return User}();exports.User=User},function(module,exports){module.exports='<div class="layout">\r\n    <div class="content-overlay" (mousedown)="hideNav()" (touchstart)="hideNav()"></div>\r\n    <header class="header navbar navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <button class="btn-side-nav-toggle" type="button" (click)="toggleNav()"></button>\r\n                <img class="brand-logo" alt="logo" src="img/logo.png" />\r\n                <span class="brand-title">\r\n                    {{HEADER_TITLE}}\r\n                </span>\r\n            </div>\r\n            <nav class="navbar-nav navbar-right">\r\n                <ul class="nav navbar-right">\r\n                    <li class="dropdown">\r\n                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" (click)="preventDefault($event)">\r\n                            <i class="fa fa-user"></i>\r\n                        </a>\r\n                        <ul class="dropdown-menu right">\r\n                            <li>\r\n                                <a class="user-profile" [routerLink]="[\'user-profile\']">\r\n                                    {{loggedUser.userName}}\r\n                                </a>\r\n                            </li>\r\n                            <li class="divider"></li>\r\n                            <li>\r\n                                <a class="logout" href="#logout" (click)="logout($event)">\r\n                                    logout\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n                <form class="navbar-form navbar-search" name="ft-search">\r\n                    <input type="hidden" name="id" value="search" />\r\n                    <input type="search" class="q" name="keyword" value="{{search_keyword}}" placeholder={{search_placeholder}} required="required" autocomplete="off" />\r\n                    <button type="reset">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                    <input type="submit" value="search" />\r\n                </form>\r\n            </nav>\r\n        </div>\r\n    </header>\r\n    <section class="container">\r\n        <aside nav class="aside side-nav"></aside>\r\n        <main class="content">\r\n            <router-outlet></router-outlet>\r\n        </main>\r\n    </section>\r\n</div>\r\n'}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy8uL2FwcC9tYWluLnRzIiwid2VicGFjazovLy8uL34vcnhqcy9SeC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvYmluZENhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvQXN5bmNTdWJqZWN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb21iaW5lTGF0ZXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc1NjaGVkdWxlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvT3V0ZXJTdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL2lzUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc3ltYm9sL2l0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9Jbm5lclN1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2NvbmNhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9jb25jYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2RlZmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2RlZmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0RlZmVyT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZW1wdHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvZW1wdHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0ZvcmtKb2luT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0l0ZXJhdG9yT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9BcnJheUxpa2VPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9vYnNlcnZlT24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL05vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9nZW5lcmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9HZW5lcmF0ZU9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2ludGVydmFsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2ludGVydmFsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0ludGVydmFsT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc051bWVyaWMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9hc3luYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvUXVldWVTY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9RdWV1ZUFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvbWVyZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvbWVyZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21lcmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9yYWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yYWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9uZXZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9uZXZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9OZXZlck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3JhbmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL3JhbmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL1JhbmdlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvdGhyb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvdGhyb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvRXJyb3JPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS90aW1lci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS90aW1lci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9UaW1lck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvaXNEYXRlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS96aXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvemlwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci96aXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlckNvdW50LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9idWZmZXJDb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlclRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlclRvZ2dsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlcldoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlcldoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL1JlcGxheVN1YmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbXVsdGljYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NhdGNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbWJpbmVBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbWJpbmVBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb21iaW5lTGF0ZXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0QWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb25jYXRBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0TWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21lcmdlTWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZW1hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kZW1hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kZWJvdW5jZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZGVmYXVsdElmRW1wdHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWxheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWxheVdoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RlbGF5V2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2RvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2V4cGFuZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZXhwYW5kLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9maW5hbGx5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9maW5hbGx5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZmlyc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2ZpcnN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL0VtcHR5RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9ncm91cEJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9ncm91cEJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL01hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9NYXBQb2x5ZmlsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9GYXN0TWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvaWdub3JlRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYXVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2F1ZGl0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYXVkaXRUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9hdWRpdFRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9sYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9sYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbGV0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9sZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9ldmVyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZXZlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9tYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9tYXRlcmlhbGl6ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tdWx0aWNhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9vYnNlcnZlT24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wYXJ0aXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3BhcnRpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9ub3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wbHVjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcGx1Y2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL0JlaGF2aW9yU3ViamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoTGFzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaExhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9yYWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcmVkdWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yZWR1Y2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZXBlYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3JlcGVhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3JldHJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yZXRyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3JldHJ5V2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcmV0cnlXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2FtcGxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zYW1wbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zYW1wbGVUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zYW1wbGVUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2Nhbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2Nhbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NoYXJlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zaGFyZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NpbmdsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2luZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2tpcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NraXBVbnRpbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2tpcFVudGlsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFdoaWxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9za2lwV2hpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zdGFydFdpdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N0YXJ0V2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3N1YnNjcmliZU9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zdWJzY3JpYmVPbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9hc2FwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvQXNhcFNjaGVkdWxlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL0FzYXBBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvSW1tZWRpYXRlLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc3dpdGNoTWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaE1hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGFrZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VMYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90YWtlTGFzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VVbnRpbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGFrZVVudGlsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZVdoaWxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90YWtlV2hpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGhyb3R0bGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3Rocm90dGxlVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3RpbWVvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3RpbWVvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0V2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGltZW91dFdpdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90b0FycmF5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90b0FycmF5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdG9Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93Q291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dUb2dnbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb20uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvemlwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvemlwQWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci96aXBBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL09wZXJhdG9yLmpzIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvYXBwLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3NlcnZpY2VzL3JlZmVyZW5jZS1zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2FwcC9zZXJ2aWNlcy9zdGFmZi1zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL25hdi50cyIsIndlYnBhY2s6Ly8vLi9hcHAvdGVtcGxhdGVzL25hdi5odG1sIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL3Byb2plY3RzLnRzIiwid2VicGFjazovLy8uL2FwcC9zZXJ2aWNlcy9wcm9qZWN0LXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2ZhY3Rvcmllcy9wcm9qZWN0LWZhY3RvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovLy8uL2FwcC91dGlscy9vYmotdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbXBvbmVudHMvcHJvamVjdC50cyIsIndlYnBhY2s6Ly8vLi9hcHAvdGVtcGxhdGVzL3Byb2plY3QuaHRtbCIsIndlYnBhY2s6Ly8vLi9hcHAvdGVtcGxhdGVzL3Byb2plY3RzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbXBvbmVudHMvdGFza3MudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3NlcnZpY2VzL3Rhc2stc2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9hcHAvZmFjdG9yaWVzL3Rhc2stZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9hcHAvbW9kZWxzL3Rhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RlbXBsYXRlcy90YXNrcy5odG1sIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL3Rhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RlbXBsYXRlcy90YXNrLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbXBvbmVudHMvdXNlci1wcm9maWxlLnRzIiwid2VicGFjazovLy8uL2FwcC90ZW1wbGF0ZXMvdXNlci1wcm9maWxlLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbXBvbmVudHMvbG9naW4udHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGVscy91c2VyLnRzIiwid2VicGFjazovLy8uL2FwcC90ZW1wbGF0ZXMvYXBwLmh0bWwiXSwibmFtZXMiOlsid2VicGFja0pzb25wIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJwbGF0Zm9ybV9icm93c2VyX2R5bmFtaWNfMSIsImNvcmVfMSIsImh0dHBfMSIsInJvdXRlcl8xIiwiY29tbW9uXzEiLCJhcHBfMSIsImFwcF9zZXJ2aWNlXzEiLCJ0YXNrX3NlcnZpY2VfMSIsInByb2plY3Rfc2VydmljZV8xIiwicmVmZXJlbmNlX3NlcnZpY2VfMSIsInN0YWZmX3NlcnZpY2VfMSIsImVuYWJsZVByb2RNb2RlIiwiYm9vdHN0cmFwIiwiQXBwIiwiSFRUUF9QUk9WSURFUlMiLCJST1VURVJfRElSRUNUSVZFUyIsIlJPVVRFUl9QUk9WSURFUlMiLCJwcm92aWRlIiwiUExBVEZPUk1fRElSRUNUSVZFUyIsInVzZVZhbHVlIiwibXVsdGkiLCJMb2NhdGlvblN0cmF0ZWd5IiwidXNlQ2xhc3MiLCJIYXNoTG9jYXRpb25TdHJhdGVneSIsIkZPUk1fUFJPVklERVJTIiwiQXBwU2VydmljZSIsIlRhc2tTZXJ2aWNlIiwiUHJvamVjdFNlcnZpY2UiLCJSZWZlcmVuY2VTZXJ2aWNlIiwiU3RhZmZTZXJ2aWNlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiU3ViamVjdF8xIiwiU3ViamVjdCIsIk9ic2VydmFibGVfMSIsIk9ic2VydmFibGUiLCJPcGVyYXRvcl8xIiwiT3BlcmF0b3IiLCJTdWJzY3JpcHRpb25fMSIsIlN1YnNjcmlwdGlvbiIsIlN1YnNjcmliZXJfMSIsIlN1YnNjcmliZXIiLCJBc3luY1N1YmplY3RfMSIsIkFzeW5jU3ViamVjdCIsIlJlcGxheVN1YmplY3RfMSIsIlJlcGxheVN1YmplY3QiLCJCZWhhdmlvclN1YmplY3RfMSIsIkJlaGF2aW9yU3ViamVjdCIsIkNvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xIiwiQ29ubmVjdGFibGVPYnNlcnZhYmxlIiwiTm90aWZpY2F0aW9uXzEiLCJOb3RpZmljYXRpb24iLCJFbXB0eUVycm9yXzEiLCJFbXB0eUVycm9yIiwiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSIsIkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIiwiVW5zdWJzY3JpcHRpb25FcnJvcl8xIiwiVW5zdWJzY3JpcHRpb25FcnJvciIsImFzYXBfMSIsImFzeW5jXzEiLCJxdWV1ZV8xIiwicnhTdWJzY3JpYmVyXzEiLCJpdGVyYXRvcl8xIiwib2JzZXJ2YWJsZSIsIlNjaGVkdWxlciIsImFzYXAiLCJhc3luYyIsInF1ZXVlIiwiU3ltYm9sIiwicnhTdWJzY3JpYmVyIiwiJCRyeFN1YnNjcmliZXIiLCJpdGVyYXRvciIsIiQkaXRlcmF0b3IiLCJiaW5kQ2FsbGJhY2tfMSIsImJpbmRDYWxsYmFjayIsIkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlXzEiLCJCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSIsImNyZWF0ZSIsImRpc3BhdGNoIiwic3RhdGUiLCJzZWxmIiwidGhpcyIsInNvdXJjZSIsInN1YnNjcmliZXIiLCJjYWxsYmFja0Z1bmMiLCJhcmdzIiwic2NoZWR1bGVyIiwic3ViamVjdCIsImhhbmRsZXIiLCJoYW5kbGVyRm4iLCJpbm5lckFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNlbGVjdG9yIiwicmVzdWx0XzIiLCJ0cnlDYXRjaF8xIiwidHJ5Q2F0Y2giLCJhcHBseSIsImVycm9yT2JqZWN0XzEiLCJlcnJvck9iamVjdCIsImFkZCIsInNjaGVkdWxlIiwiZGlzcGF0Y2hFcnJvciIsImUiLCJkaXNwYXRjaE5leHQiLCJ2YWx1ZSIsInJlc3VsdCIsImNvbmNhdCIsInN1YnNjcmliZSIsImFyZyIsIm5leHQiLCJjb21wbGV0ZSIsIl9fZXh0ZW5kcyIsImQiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3RvdHlwZSIsIk9iamVjdCIsIl9zdXBlciIsImNhbGwiLCJmdW5jIiwidW5kZWZpbmVkIiwiX3N1YnNjcmliZSIsInJlc3VsdF8xIiwiaGFzTmV4dCIsImhhc0NvbXBsZXRlZCIsIl9uZXh0IiwiX2NvbXBsZXRlIiwiaW5kZXgiLCJvYnNlcnZlcnMiLCJsZW4iLCJpc1Vuc3Vic2NyaWJlZCIsIm8iLCJ1bnN1YnNjcmliZSIsImJpbmROb2RlQ2FsbGJhY2tfMSIsImJpbmROb2RlQ2FsbGJhY2siLCJCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMSIsIkJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSIsInNoaWZ0IiwiY29tYmluZUxhdGVzdF8xIiwiY29tYmluZUxhdGVzdCIsImNvbWJpbmVMYXRlc3RTdGF0aWMiLCJvYnNlcnZhYmxlcyIsInByb2plY3QiLCJwb3AiLCJpc0FycmF5XzEiLCJpc0FycmF5IiwidW5zaGlmdCIsIkFycmF5T2JzZXJ2YWJsZV8xIiwiQXJyYXlPYnNlcnZhYmxlIiwibGlmdCIsIkNvbWJpbmVMYXRlc3RPcGVyYXRvciIsImlzU2NoZWR1bGVyXzEiLCJpc1NjaGVkdWxlciIsIk91dGVyU3Vic2NyaWJlcl8xIiwic3Vic2NyaWJlVG9SZXN1bHRfMSIsIkNvbWJpbmVMYXRlc3RTdWJzY3JpYmVyIiwiZGVzdGluYXRpb24iLCJhY3RpdmUiLCJ2YWx1ZXMiLCJ0b1Jlc3BvbmQiLCJwdXNoIiwiaSIsInN1YnNjcmliZVRvUmVzdWx0Iiwibm90aWZ5Q29tcGxldGUiLCJ1bnVzZWQiLCJub3RpZnlOZXh0Iiwib3V0ZXJWYWx1ZSIsImlubmVyVmFsdWUiLCJvdXRlckluZGV4IiwiaW5uZXJJbmRleCIsImlubmVyU3ViIiwiZm91bmQiLCJpbmRleE9mIiwic3BsaWNlIiwiX3RyeVByb2plY3QiLCJPdXRlclN1YnNjcmliZXIiLCJTY2FsYXJPYnNlcnZhYmxlXzEiLCJFbXB0eU9ic2VydmFibGVfMSIsImFycmF5IiwiX2lzU2NhbGFyIiwib2YiLCJTY2FsYXJPYnNlcnZhYmxlIiwiRW1wdHlPYnNlcnZhYmxlIiwiY291bnQiLCJkb25lIiwibm90aWZ5RXJyb3IiLCJvdXRlclN1YnNjcmliZXIiLCJJbm5lclN1YnNjcmliZXJfMSIsIklubmVyU3Vic2NyaWJlciIsImlzUHJvbWlzZV8xIiwiaXNQcm9taXNlIiwidGhlbiIsInJvb3RfMSIsInJvb3QiLCJzZXRUaW1lb3V0IiwiX2EiLCJpdGVtIiwiJCRvYnNlcnZhYmxlIiwib2JzIiwiVHlwZUVycm9yIiwiU2V0IiwiTWFwIiwia2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJrZXkiLCJwYXJlbnQiLCJfZXJyb3IiLCJjb25jYXRfMSIsImNvbmNhdFN0YXRpYyIsIm1lcmdlQWxsXzEiLCJNZXJnZUFsbE9wZXJhdG9yIiwibWVyZ2VBbGwiLCJjb25jdXJyZW50IiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJvYnNlcnZlciIsIk1lcmdlQWxsU3Vic2NyaWJlciIsImJ1ZmZlciIsInJlbW92ZSIsImRlZmVyXzEiLCJkZWZlciIsIkRlZmVyT2JzZXJ2YWJsZV8xIiwiRGVmZXJPYnNlcnZhYmxlIiwib2JzZXJ2YWJsZUZhY3RvcnkiLCJEZWZlclN1YnNjcmliZXIiLCJmYWN0b3J5IiwidHJ5RGVmZXIiLCJfY2FsbEZhY3RvcnkiLCJlbXB0eV8xIiwiZW1wdHkiLCJmb3JrSm9pbl8xIiwiZm9ya0pvaW4iLCJGb3JrSm9pbk9ic2VydmFibGVfMSIsIkZvcmtKb2luT2JzZXJ2YWJsZSIsInNvdXJjZXMiLCJyZXN1bHRTZWxlY3RvciIsIkZvcmtKb2luU3Vic2NyaWJlciIsImNvbXBsZXRlZCIsImhhdmVWYWx1ZXMiLCJ0b3RhbCIsIkFycmF5IiwiaW5uZXJTdWJzY3JpcHRpb24iLCJfaGFzVmFsdWUiLCJmcm9tXzEiLCJmcm9tIiwiRnJvbU9ic2VydmFibGVfMSIsIkZyb21PYnNlcnZhYmxlIiwiaXNGdW5jdGlvbl8xIiwiUHJvbWlzZU9ic2VydmFibGVfMSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZV8xIiwiQXJyYXlMaWtlT2JzZXJ2YWJsZV8xIiwib2JzZXJ2ZU9uXzEiLCJpc0FycmF5TGlrZSIsIngiLCJpc2giLCJtYXBGbk9yU2NoZWR1bGVyIiwidGhpc0FyZyIsImxhc3RTY2hlZHVsZXIiLCJtYXBGbiIsImlzRnVuY3Rpb24iLCJQcm9taXNlT2JzZXJ2YWJsZSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZSIsIkFycmF5TGlrZU9ic2VydmFibGUiLCJPYnNlcnZlT25TdWJzY3JpYmVyIiwiZ2V0SXRlcmF0b3IiLCJvYmoiLCJTdHJpbmdJdGVyYXRvciIsIkFycmF5SXRlcmF0b3IiLCJ0b0xlbmd0aCIsImlzTmFOIiwibnVtYmVySXNGaW5pdGUiLCJzaWduIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibWF4U2FmZUludGVnZXIiLCJpc0Zpbml0ZSIsInZhbHVlQXNOdW1iZXIiLCJpc09iamVjdF8xIiwiRXJyb3IiLCJpc09iamVjdCIsImhhc0Vycm9yIiwic3RyIiwiaWR4IiwiY2hhckF0IiwiYXJyIiwicG93IiwiYXJyYXlMaWtlIiwiYmluZCIsIm9ic2VydmVPbiIsImRlbGF5IiwiT2JzZXJ2ZU9uT3BlcmF0b3IiLCJub3RpZmljYXRpb24iLCJvYnNlcnZlIiwic2NoZWR1bGVNZXNzYWdlIiwiT2JzZXJ2ZU9uTWVzc2FnZSIsImNyZWF0ZU5leHQiLCJjcmVhdGVFcnJvciIsImNyZWF0ZUNvbXBsZXRlIiwia2luZCIsImV4Y2VwdGlvbiIsImhhc1ZhbHVlIiwiYWNjZXB0IiwibmV4dE9yT2JzZXJ2ZXIiLCJ0b09ic2VydmFibGUiLCJ1bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbiIsImNvbXBsZXRlTm90aWZpY2F0aW9uIiwiZnJvbUV2ZW50XzEiLCJmcm9tRXZlbnQiLCJGcm9tRXZlbnRPYnNlcnZhYmxlXzEiLCJGcm9tRXZlbnRPYnNlcnZhYmxlIiwiaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyIiwic291cmNlT2JqIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImlzSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXIiLCJvbiIsIm9mZiIsImlzTm9kZUxpc3QiLCJ0b1N0cmluZyIsImlzSFRNTENvbGxlY3Rpb24iLCJpc0V2ZW50VGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJ0YXJnZXQiLCJzZXR1cFN1YnNjcmlwdGlvbiIsImZyb21FdmVudFBhdHRlcm5fMSIsImZyb21FdmVudFBhdHRlcm4iLCJGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZV8xIiwiRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUiLCJhZGRIYW5kbGVyIiwicmVtb3ZlSGFuZGxlciIsImZyb21Qcm9taXNlXzEiLCJmcm9tUHJvbWlzZSIsIkdlbmVyYXRlT2JzZXJ2YWJsZV8xIiwiZ2VuZXJhdGUiLCJHZW5lcmF0ZU9ic2VydmFibGUiLCJzZWxmU2VsZWN0b3IiLCJpbml0aWFsU3RhdGUiLCJjb25kaXRpb24iLCJpdGVyYXRlIiwiaW5pdGlhbFN0YXRlT3JPcHRpb25zIiwicmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUiLCJjb25kaXRpb25SZXN1bHQiLCJuZWVkSXRlcmF0ZSIsImludGVydmFsXzEiLCJpbnRlcnZhbCIsIkludGVydmFsT2JzZXJ2YWJsZV8xIiwiSW50ZXJ2YWxPYnNlcnZhYmxlIiwiaXNOdW1lcmljXzEiLCJwZXJpb2QiLCJpc051bWVyaWMiLCJ2YWwiLCJwYXJzZUZsb2F0IiwiQXN5bmNTY2hlZHVsZXJfMSIsIkFzeW5jU2NoZWR1bGVyIiwiRnV0dXJlQWN0aW9uXzEiLCJRdWV1ZVNjaGVkdWxlcl8xIiwic2NoZWR1bGVOb3ciLCJ3b3JrIiwiRnV0dXJlQWN0aW9uIiwiUXVldWVTY2hlZHVsZXIiLCJwZW5kaW5nIiwiZXhlY3V0ZSIsIl9zY2hlZHVsZSIsIl90aGlzIiwiaWQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJhY3Rpb25zIiwiZmx1c2giLCJfdW5zdWJzY3JpYmUiLCJRdWV1ZUFjdGlvbl8xIiwic2NoZWR1bGVkSWQiLCJub3ciLCJEYXRlIiwiYWN0aW9uIiwic2NoZWR1bGVMYXRlciIsIlF1ZXVlQWN0aW9uIiwibWVyZ2VfMSIsIm1lcmdlIiwibWVyZ2VTdGF0aWMiLCJsYXN0IiwicmFjZV8xIiwicmFjZSIsInJhY2VTdGF0aWMiLCJSYWNlT3BlcmF0b3IiLCJSYWNlU3Vic2NyaWJlciIsImhhc0ZpcnN0Iiwic3Vic2NyaXB0aW9ucyIsInN1YnNjcmlwdGlvbiIsIm5ldmVyXzEiLCJuZXZlciIsIk5ldmVyT2JzZXJ2YWJsZV8xIiwiTmV2ZXJPYnNlcnZhYmxlIiwibm9vcF8xIiwibm9vcCIsIm9mXzEiLCJyYW5nZV8xIiwicmFuZ2UiLCJSYW5nZU9ic2VydmFibGVfMSIsIlJhbmdlT2JzZXJ2YWJsZSIsInN0YXJ0IiwiX2NvdW50IiwidGhyb3dfMSIsIl90aHJvdyIsIkVycm9yT2JzZXJ2YWJsZV8xIiwiRXJyb3JPYnNlcnZhYmxlIiwidGltZXJfMSIsInRpbWVyIiwiVGltZXJPYnNlcnZhYmxlXzEiLCJUaW1lck9ic2VydmFibGUiLCJpc0RhdGVfMSIsImR1ZVRpbWUiLCJpc0RhdGUiLCJpbml0aWFsRGVsYXkiLCJ6aXBfMSIsInppcCIsInppcFN0YXRpYyIsInppcFByb3RvIiwiWmlwT3BlcmF0b3IiLCJaaXBTdWJzY3JpYmVyIiwiaXRlcmF0b3JzIiwiU3RhdGljQXJyYXlJdGVyYXRvciIsIlN0YXRpY0l0ZXJhdG9yIiwiWmlwQnVmZmVySXRlcmF0b3IiLCJzdGlsbFVuc3Vic2NyaWJlZCIsIm5vdGlmeUluYWN0aXZlIiwiY2hlY2tJdGVyYXRvcnMiLCJzaG91bGRDb21wbGV0ZSIsIm5leHRSZXN1bHQiLCJpc0NvbXBsZXRlIiwiYnVmZmVyXzEiLCJjbG9zaW5nTm90aWZpZXIiLCJCdWZmZXJPcGVyYXRvciIsIkJ1ZmZlclN1YnNjcmliZXIiLCJidWZmZXJDb3VudF8xIiwiYnVmZmVyQ291bnQiLCJidWZmZXJTaXplIiwic3RhcnRCdWZmZXJFdmVyeSIsIkJ1ZmZlckNvdW50T3BlcmF0b3IiLCJCdWZmZXJDb3VudFN1YnNjcmliZXIiLCJidWZmZXJzIiwiYnVmZmVyVGltZV8xIiwiYnVmZmVyVGltZSIsImJ1ZmZlclRpbWVTcGFuIiwiYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCIsIkJ1ZmZlclRpbWVPcGVyYXRvciIsImRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5IiwicHJldkJ1ZmZlciIsImNsb3NlQnVmZmVyIiwib3BlbkJ1ZmZlciIsImRpc3BhdGNoQnVmZmVyQ3JlYXRpb24iLCJkaXNwYXRjaEJ1ZmZlckNsb3NlIiwiQnVmZmVyVGltZVN1YnNjcmliZXIiLCJjbG9zZVN0YXRlIiwiY3JlYXRpb25TdGF0ZSIsInRpbWVTcGFuT25seVN0YXRlIiwiYnVmZmVyVG9nZ2xlXzEiLCJidWZmZXJUb2dnbGUiLCJvcGVuaW5ncyIsImNsb3NpbmdTZWxlY3RvciIsIkJ1ZmZlclRvZ2dsZU9wZXJhdG9yIiwiQnVmZmVyVG9nZ2xlU3Vic2NyaWJlciIsImNvbnRleHRzIiwiY29udGV4dCIsInRyeVN1YnNjcmliZSIsImJ1ZmZlcldoZW5fMSIsImJ1ZmZlcldoZW4iLCJCdWZmZXJXaGVuT3BlcmF0b3IiLCJCdWZmZXJXaGVuU3Vic2NyaWJlciIsInN1YnNjcmliaW5nIiwiY2xvc2luZ1N1YnNjcmlwdGlvbiIsImNhY2hlXzEiLCJjYWNoZSIsIndpbmRvd1RpbWUiLCJwdWJsaXNoUmVwbGF5XzEiLCJwdWJsaXNoUmVwbGF5IiwicmVmQ291bnQiLCJtdWx0aWNhc3RfMSIsIm11bHRpY2FzdCIsImV2ZW50cyIsIl93aW5kb3dUaW1lIiwiX2dldE5vdyIsIlJlcGxheUV2ZW50IiwiX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzIiwiZXZlbnRzQ291bnQiLCJzcGxpY2VDb3VudCIsInRpbWUiLCJtYXgiLCJzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeSIsInN1YmplY3RGYWN0b3J5IiwiZ2V0U3ViamVjdCIsImNvbm5lY3QiLCJDb25uZWN0YWJsZVN1YnNjcmlwdGlvbiIsIlJlZkNvdW50T2JzZXJ2YWJsZSIsIl9jbG9zZVN1YnNjcmlwdGlvbiIsImNvbm5lY3RhYmxlIiwicmVmQ291bnRTdWJzY3JpYmVyIiwiUmVmQ291bnRTdWJzY3JpYmVyIiwiY29ubmVjdGlvbiIsInJlZkNvdW50T2JzZXJ2YWJsZSIsIl9yZXNldENvbm5lY3RhYmxlIiwib2JzQ29ubmVjdGlvbiIsInN1YkNvbm5lY3Rpb24iLCJjYXRjaF8xIiwiX2NhdGNoIiwib3BlcmF0b3IiLCJDYXRjaE9wZXJhdG9yIiwiY2F1Z2h0IiwiQ2F0Y2hTdWJzY3JpYmVyIiwiaXNTdG9wcGVkIiwiX2lubmVyU3ViIiwiY29tYmluZUFsbF8xIiwiY29tYmluZUFsbCIsImNvbmNhdEFsbF8xIiwiY29uY2F0QWxsIiwiY29uY2F0TWFwXzEiLCJjb25jYXRNYXAiLCJtZXJnZU1hcF8xIiwiTWVyZ2VNYXBPcGVyYXRvciIsIm1lcmdlTWFwIiwiTWVyZ2VNYXBTdWJzY3JpYmVyIiwiX3RyeU5leHQiLCJfbm90aWZ5UmVzdWx0U2VsZWN0b3IiLCJjb25jYXRNYXBUb18xIiwiY29uY2F0TWFwVG8iLCJpbm5lck9ic2VydmFibGUiLCJtZXJnZU1hcFRvXzEiLCJNZXJnZU1hcFRvT3BlcmF0b3IiLCJtZXJnZU1hcFRvIiwiTWVyZ2VNYXBUb1N1YnNjcmliZXIiLCJ0cnlTZWxlY3RSZXN1bHQiLCJjb3VudF8xIiwicHJlZGljYXRlIiwiQ291bnRPcGVyYXRvciIsIkNvdW50U3Vic2NyaWJlciIsIl90cnlQcmVkaWNhdGUiLCJkZW1hdGVyaWFsaXplXzEiLCJkZW1hdGVyaWFsaXplIiwiRGVNYXRlcmlhbGl6ZU9wZXJhdG9yIiwiRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIiLCJkZWJvdW5jZV8xIiwiZGVib3VuY2UiLCJkdXJhdGlvblNlbGVjdG9yIiwiRGVib3VuY2VPcGVyYXRvciIsIkRlYm91bmNlU3Vic2NyaWJlciIsImR1cmF0aW9uU3Vic2NyaXB0aW9uIiwiZW1pdFZhbHVlIiwiZHVyYXRpb24iLCJkZWJvdW5jZVRpbWVfMSIsImRlYm91bmNlVGltZSIsIkRlYm91bmNlVGltZU9wZXJhdG9yIiwiZGVib3VuY2VkTmV4dCIsIkRlYm91bmNlVGltZVN1YnNjcmliZXIiLCJkZWJvdW5jZWRTdWJzY3JpcHRpb24iLCJsYXN0VmFsdWUiLCJjbGVhckRlYm91bmNlIiwiZGVmYXVsdElmRW1wdHlfMSIsImRlZmF1bHRJZkVtcHR5IiwiZGVmYXVsdFZhbHVlIiwiRGVmYXVsdElmRW1wdHlPcGVyYXRvciIsIkRlZmF1bHRJZkVtcHR5U3Vic2NyaWJlciIsImlzRW1wdHkiLCJkZWxheV8xIiwiYWJzb2x1dGVEZWxheSIsImRlbGF5Rm9yIiwiRGVsYXlPcGVyYXRvciIsIkRlbGF5U3Vic2NyaWJlciIsImVycm9yZWQiLCJzY2hlZHVsZU5vdGlmaWNhdGlvbiIsIm1lc3NhZ2UiLCJEZWxheU1lc3NhZ2UiLCJkZWxheVdoZW5fMSIsImRlbGF5V2hlbiIsImRlbGF5RHVyYXRpb25TZWxlY3RvciIsInN1YnNjcmlwdGlvbkRlbGF5IiwiU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlIiwiRGVsYXlXaGVuT3BlcmF0b3IiLCJEZWxheVdoZW5TdWJzY3JpYmVyIiwiZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMiLCJyZW1vdmVTdWJzY3JpcHRpb24iLCJ0cnlDb21wbGV0ZSIsImRlbGF5Tm90aWZpZXIiLCJ0cnlEZWxheSIsInN1YnNjcmlwdGlvbklkeCIsIm5vdGlmaWVyU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyIiwic291cmNlU3Vic2NyaWJlZCIsInN1YnNjcmliZVRvU291cmNlIiwiZGlzdGluY3RVbnRpbENoYW5nZWRfMSIsImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwiY29tcGFyZSIsImtleVNlbGVjdG9yIiwiRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvciIsIkRpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciIsImhhc0tleSIsInkiLCJCb29sZWFuIiwiZG9fMSIsIl9kbyIsIkRvT3BlcmF0b3IiLCJEb1N1YnNjcmliZXIiLCJzYWZlU3Vic2NyaWJlciIsInN5bmNFcnJvclRocm93YWJsZSIsInN5bmNFcnJvclRocm93biIsInN5bmNFcnJvclZhbHVlIiwiZXhwYW5kXzEiLCJleHBhbmQiLCJFeHBhbmRPcGVyYXRvciIsIkV4cGFuZFN1YnNjcmliZXIiLCJzdWJzY3JpYmVUb1Byb2plY3Rpb24iLCJmaWx0ZXJfMSIsImZpbHRlciIsIkZpbHRlck9wZXJhdG9yIiwiRmlsdGVyU3Vic2NyaWJlciIsImZpbmFsbHlfMSIsIl9maW5hbGx5IiwiZmluYWxseVNlbGVjdG9yIiwiRmluYWxseU9wZXJhdG9yIiwiRmluYWxseVN1YnNjcmliZXIiLCJmaXJzdF8xIiwiZmlyc3QiLCJGaXJzdE9wZXJhdG9yIiwiRmlyc3RTdWJzY3JpYmVyIiwiX2VtaXQiLCJfdHJ5UmVzdWx0U2VsZWN0b3IiLCJfZW1pdEZpbmFsIiwibmFtZSIsImdyb3VwQnlfMSIsImdyb3VwQnkiLCJlbGVtZW50U2VsZWN0b3IiLCJHcm91cEJ5T3BlcmF0b3IiLCJNYXBfMSIsIkZhc3RNYXBfMSIsIkdyb3VwQnlTdWJzY3JpYmVyIiwiZ3JvdXBzIiwiYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSIsIl9ncm91cCIsIkZhc3RNYXAiLCJncm91cCIsImdldCIsInNldCIsImdyb3VwZWRPYnNlcnZhYmxlIiwiR3JvdXBlZE9ic2VydmFibGUiLCJfc2VsZWN0RHVyYXRpb24iLCJfc2VsZWN0RWxlbWVudCIsInRyeUdyb3VwTmV4dCIsIkdyb3VwRHVyYXRpb25TdWJzY3JpYmVyIiwiZm9yRWFjaCIsImNsZWFyIiwicmVtb3ZlR3JvdXAiLCJ0cnlFcnJvciIsImdyb3VwU3ViamVjdCIsInJlZkNvdW50U3Vic2NyaXB0aW9uIiwiSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiIsIk1hcFBvbHlmaWxsXzEiLCJNYXBQb2x5ZmlsbCIsInNpemUiLCJfdmFsdWVzIiwiX2tleXMiLCJjYiIsImlnbm9yZUVsZW1lbnRzXzEiLCJpZ25vcmVFbGVtZW50cyIsIklnbm9yZUVsZW1lbnRzT3BlcmF0b3IiLCJJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIiLCJhdWRpdF8xIiwiYXVkaXQiLCJBdWRpdE9wZXJhdG9yIiwiQXVkaXRTdWJzY3JpYmVyIiwidGhyb3R0bGVkIiwiY2xlYXJUaHJvdHRsZSIsImF1ZGl0VGltZV8xIiwiYXVkaXRUaW1lIiwiQXVkaXRUaW1lT3BlcmF0b3IiLCJBdWRpdFRpbWVTdWJzY3JpYmVyIiwibGFzdF8xIiwiTGFzdE9wZXJhdG9yIiwiTGFzdFN1YnNjcmliZXIiLCJsZXRfMSIsImxldCIsImxldFByb3RvIiwibGV0QmluZCIsImV2ZXJ5XzEiLCJldmVyeSIsIkV2ZXJ5T3BlcmF0b3IiLCJFdmVyeVN1YnNjcmliZXIiLCJldmVyeVZhbHVlTWF0Y2giLCJtYXBfMSIsIm1hcCIsIk1hcE9wZXJhdG9yIiwiTWFwU3Vic2NyaWJlciIsIm1hcFRvXzEiLCJtYXBUbyIsIk1hcFRvT3BlcmF0b3IiLCJNYXBUb1N1YnNjcmliZXIiLCJtYXRlcmlhbGl6ZV8xIiwibWF0ZXJpYWxpemUiLCJNYXRlcmlhbGl6ZU9wZXJhdG9yIiwiTWF0ZXJpYWxpemVTdWJzY3JpYmVyIiwiZmxhdE1hcCIsImZsYXRNYXBUbyIsInBhcnRpdGlvbl8xIiwicGFydGl0aW9uIiwibm90XzEiLCJub3QiLCJwcmVkIiwibm90UHJlZCIsInBsdWNrXzEiLCJwbHVjayIsInByb3BlcnRpZXMiLCJwbHVja2VyIiwicHJvcHMiLCJtYXBwZXIiLCJjdXJyZW50UHJvcCIsInB1Ymxpc2hfMSIsInB1Ymxpc2giLCJwdWJsaXNoQmVoYXZpb3JfMSIsInB1Ymxpc2hCZWhhdmlvciIsInRocm93RXJyb3JfMSIsIl92YWx1ZSIsImdldFZhbHVlIiwiaGFzRXJyb3JlZCIsInRocm93RXJyb3IiLCJlcnJvclZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwicHVibGlzaExhc3RfMSIsInB1Ymxpc2hMYXN0IiwicmVkdWNlXzEiLCJyZWR1Y2UiLCJzZWVkIiwiUmVkdWNlT3BlcmF0b3IiLCJSZWR1Y2VTdWJzY3JpYmVyIiwiYWNjIiwiaGFzU2VlZCIsIl90cnlSZWR1Y2UiLCJyZXBlYXRfMSIsInJlcGVhdCIsIlJlcGVhdE9wZXJhdG9yIiwiUmVwZWF0U3Vic2NyaWJlciIsInJldHJ5XzEiLCJyZXRyeSIsIlJldHJ5T3BlcmF0b3IiLCJSZXRyeVN1YnNjcmliZXIiLCJyZXRyeVdoZW5fMSIsInJldHJ5V2hlbiIsIm5vdGlmaWVyIiwiUmV0cnlXaGVuT3BlcmF0b3IiLCJSZXRyeVdoZW5TdWJzY3JpYmVyIiwiZXJyb3JzIiwicmV0cmllcyIsInJldHJpZXNTdWJzY3JpcHRpb24iLCJzYW1wbGVfMSIsInNhbXBsZSIsIlNhbXBsZU9wZXJhdG9yIiwiU2FtcGxlU3Vic2NyaWJlciIsInNhbXBsZVRpbWVfMSIsInNhbXBsZVRpbWUiLCJTYW1wbGVUaW1lT3BlcmF0b3IiLCJkaXNwYXRjaE5vdGlmaWNhdGlvbiIsIlNhbXBsZVRpbWVTdWJzY3JpYmVyIiwic2Nhbl8xIiwic2NhbiIsImFjY3VtdWxhdG9yIiwiU2Nhbk9wZXJhdG9yIiwiU2NhblN1YnNjcmliZXIiLCJhY2N1bXVsYXRvclNldCIsIl9zZWVkIiwic2hhcmVfMSIsInNoYXJlIiwic2hhcmVTdWJqZWN0RmFjdG9yeSIsInNpbmdsZV8xIiwic2luZ2xlIiwiU2luZ2xlT3BlcmF0b3IiLCJTaW5nbGVTdWJzY3JpYmVyIiwic2VlblZhbHVlIiwiYXBwbHlTaW5nbGVWYWx1ZSIsInNpbmdsZVZhbHVlIiwidHJ5TmV4dCIsInNraXBfMSIsInNraXAiLCJTa2lwT3BlcmF0b3IiLCJTa2lwU3Vic2NyaWJlciIsInNraXBVbnRpbF8xIiwic2tpcFVudGlsIiwiU2tpcFVudGlsT3BlcmF0b3IiLCJTa2lwVW50aWxTdWJzY3JpYmVyIiwiaXNJbm5lclN0b3BwZWQiLCJza2lwV2hpbGVfMSIsInNraXBXaGlsZSIsIlNraXBXaGlsZU9wZXJhdG9yIiwiU2tpcFdoaWxlU3Vic2NyaWJlciIsInNraXBwaW5nIiwidHJ5Q2FsbFByZWRpY2F0ZSIsInN0YXJ0V2l0aF8xIiwic3RhcnRXaXRoIiwic3Vic2NyaWJlT25fMSIsInN1YnNjcmliZU9uIiwiU3Vic2NyaWJlT25PYnNlcnZhYmxlXzEiLCJTdWJzY3JpYmVPbk9ic2VydmFibGUiLCJkZWxheVRpbWUiLCJBc2FwU2NoZWR1bGVyXzEiLCJBc2FwU2NoZWR1bGVyIiwiQXNhcEFjdGlvbl8xIiwiQXNhcEFjdGlvbiIsIkltbWVkaWF0ZV8xIiwiSW1tZWRpYXRlIiwic2V0SW1tZWRpYXRlIiwiY2xlYXJJbW1lZGlhdGUiLCJJbW1lZGlhdGVEZWZpbml0aW9uIiwibmV4dEhhbmRsZSIsInRhc2tzQnlIYW5kbGUiLCJjdXJyZW50bHlSdW5uaW5nQVRhc2siLCJjYW5Vc2VQcm9jZXNzTmV4dFRpY2siLCJjcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGUiLCJjYW5Vc2VQb3N0TWVzc2FnZSIsImNyZWF0ZVBvc3RNZXNzYWdlU2V0SW1tZWRpYXRlIiwiY2FuVXNlTWVzc2FnZUNoYW5uZWwiLCJjcmVhdGVNZXNzYWdlQ2hhbm5lbFNldEltbWVkaWF0ZSIsImNhblVzZVJlYWR5U3RhdGVDaGFuZ2UiLCJjcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlIiwiY3JlYXRlU2V0VGltZW91dFNldEltbWVkaWF0ZSIsImNpIiwiaGFuZGxlIiwiaW5zdGFuY2UiLCJpZGVudGlmeSIsInByb2Nlc3MiLCJNZXNzYWdlQ2hhbm5lbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXNfMSIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsInBhcnRpYWxseUFwcGxpZWQiLCJmbiIsIkZ1bmN0aW9uIiwiYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyIsIm5leHRUaWNrIiwicnVuSWZQcmVzZW50IiwibWVzc2FnZVByZWZpeCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImdsb2JhbE1lc3NhZ2VIYW5kbGVyIiwiZXZlbnQiLCJkYXRhIiwic2xpY2UiLCJ0YXNrIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJkb2MiLCJodG1sIiwiZG9jdW1lbnRFbGVtZW50Iiwic2NyaXB0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJpbW1lZGlhdGVJZHMiLCJuZXh0SW1tZWRpYXRlSWQiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJ0aW1lb3V0IiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsIl9vblRpbWVvdXQiLCJzd2l0Y2hfMSIsIl9zd2l0Y2giLCJTd2l0Y2hPcGVyYXRvciIsIlN3aXRjaFN1YnNjcmliZXIiLCJ1bnN1YnNjcmliZUlubmVyIiwic3dpdGNoTWFwXzEiLCJzd2l0Y2hNYXAiLCJTd2l0Y2hNYXBPcGVyYXRvciIsIlN3aXRjaE1hcFN1YnNjcmliZXIiLCJfdHJ5Tm90aWZ5TmV4dCIsInN3aXRjaE1hcFRvXzEiLCJzd2l0Y2hNYXBUbyIsIlN3aXRjaE1hcFRvT3BlcmF0b3IiLCJTd2l0Y2hNYXBUb1N1YnNjcmliZXIiLCJpbm5lciIsInRyeVJlc3VsdFNlbGVjdG9yIiwidGFrZV8xIiwidGFrZSIsIlRha2VPcGVyYXRvciIsIlRha2VTdWJzY3JpYmVyIiwidGFrZUxhc3RfMSIsInRha2VMYXN0IiwiVGFrZUxhc3RPcGVyYXRvciIsIlRha2VMYXN0U3Vic2NyaWJlciIsInJpbmciLCJ0YWtlVW50aWxfMSIsInRha2VVbnRpbCIsIlRha2VVbnRpbE9wZXJhdG9yIiwiVGFrZVVudGlsU3Vic2NyaWJlciIsInRha2VXaGlsZV8xIiwidGFrZVdoaWxlIiwiVGFrZVdoaWxlT3BlcmF0b3IiLCJUYWtlV2hpbGVTdWJzY3JpYmVyIiwibmV4dE9yQ29tcGxldGUiLCJwcmVkaWNhdGVSZXN1bHQiLCJ0aHJvdHRsZV8xIiwidGhyb3R0bGUiLCJUaHJvdHRsZU9wZXJhdG9yIiwiVGhyb3R0bGVTdWJzY3JpYmVyIiwidHJ5RHVyYXRpb25TZWxlY3RvciIsImVtaXRBbmRUaHJvdHRsZSIsInRocm90dGxlVGltZV8xIiwidGhyb3R0bGVUaW1lIiwiVGhyb3R0bGVUaW1lT3BlcmF0b3IiLCJUaHJvdHRsZVRpbWVTdWJzY3JpYmVyIiwidGltZW91dF8xIiwiZHVlIiwiZXJyb3JUb1NlbmQiLCJhYnNvbHV0ZVRpbWVvdXQiLCJ3YWl0Rm9yIiwiVGltZW91dE9wZXJhdG9yIiwiVGltZW91dFN1YnNjcmliZXIiLCJfcHJldmlvdXNJbmRleCIsIl9oYXNDb21wbGV0ZWQiLCJzY2hlZHVsZVRpbWVvdXQiLCJkaXNwYXRjaFRpbWVvdXQiLCJjdXJyZW50SW5kZXgiLCJwcmV2aW91c0luZGV4Iiwibm90aWZ5VGltZW91dCIsInRpbWVvdXRXaXRoXzEiLCJ0aW1lb3V0V2l0aCIsIndpdGhPYnNlcnZhYmxlIiwiVGltZW91dFdpdGhPcGVyYXRvciIsIlRpbWVvdXRXaXRoU3Vic2NyaWJlciIsInRpbWVvdXRTdWJzY3JpcHRpb24iLCJoYW5kbGVUaW1lb3V0IiwidGltZW91dFN0YXRlIiwidG9BcnJheV8xIiwidG9BcnJheSIsIlRvQXJyYXlPcGVyYXRvciIsIlRvQXJyYXlTdWJzY3JpYmVyIiwidG9Qcm9taXNlXzEiLCJ0b1Byb21pc2UiLCJ3aW5kb3dfMSIsIndpbmRvd0JvdW5kYXJpZXMiLCJXaW5kb3dPcGVyYXRvciIsIldpbmRvd1N1YnNjcmliZXIiLCJvcGVuV2luZG93IiwicHJldldpbmRvdyIsIm5ld1dpbmRvdyIsIndpbmRvd0NvdW50XzEiLCJ3aW5kb3dDb3VudCIsIndpbmRvd1NpemUiLCJzdGFydFdpbmRvd0V2ZXJ5IiwiV2luZG93Q291bnRPcGVyYXRvciIsIldpbmRvd0NvdW50U3Vic2NyaWJlciIsIndpbmRvd3MiLCJmaXJzdFdpbmRvdyIsImMiLCJ3aW5kb3dUaW1lXzEiLCJ3aW5kb3dUaW1lU3BhbiIsIndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwiLCJXaW5kb3dUaW1lT3BlcmF0b3IiLCJkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seSIsImRpc3BhdGNoV2luZG93Q3JlYXRpb24iLCJ0aW1lU3BhblN0YXRlIiwiZGlzcGF0Y2hXaW5kb3dDbG9zZSIsImNsb3NlV2luZG93IiwiV2luZG93VGltZVN1YnNjcmliZXIiLCJ3aW5kb3dfMiIsIndpbmRvd18zIiwid2luZG93XzQiLCJ3aW5kb3dUb2dnbGVfMSIsIndpbmRvd1RvZ2dsZSIsIldpbmRvd1RvZ2dsZU9wZXJhdG9yIiwiV2luZG93VG9nZ2xlU3Vic2NyaWJlciIsIm9wZW5TdWJzY3JpcHRpb24iLCJ3aW5kb3dXaGVuXzEiLCJ3aW5kb3dXaGVuIiwidW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uIiwiY2xvc2luZ05vdGlmaWNhdGlvbiIsIndpdGhMYXRlc3RGcm9tXzEiLCJ3aXRoTGF0ZXN0RnJvbSIsIldpdGhMYXRlc3RGcm9tT3BlcmF0b3IiLCJXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIiLCJ6aXBBbGxfMSIsInppcEFsbCIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwiZGVzYyIsInIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsIm5hdl8xIiwicHJvamVjdHNfMSIsInByb2plY3RfMSIsInRhc2tzXzEiLCJ0YXNrXzEiLCJ1c2VyX3Byb2ZpbGVfMSIsImxvZ2luXzEiLCJ1c2VyXzEiLCJfcm91dGVyIiwiX2FwcFNlcnZpY2UiLCJfcmVmZXJlbmNlU2VydmljZSIsIl9zdGFmZlNlcnZpY2UiLCJIRUFERVJfVElUTEUiLCJyZXNpemUiLCJvblJlc2l6ZSIsImlzTW9iaWxlRGV2aWNlIiwiaXNOYXZDb2xsYXBzZWQiLCJuZ09uSW5pdCIsImxvZ2dlZFVzZXIiLCJVc2VyIiwiaXNNb2JpbGUiLCJnZXRUcmFuc2xhdGlvbnMiLCJjYXB0aW9ucyIsImxvZyIsIm5hdmlnYXRlIiwidG9nZ2xlTmF2IiwiaGlkZU5hdiIsImxvZ291dCIsInByZXZlbnREZWZhdWx0IiwiZ29CYWNrIiwiaGlzdG9yeSIsImJhY2siLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5uZXJXaWR0aCIsIkhvc3RMaXN0ZW5lciIsIkhvc3RCaW5kaW5nIiwiQ29tcG9uZW50IiwidGVtcGxhdGUiLCJkaXJlY3RpdmVzIiwiTmF2Q29tcG9uZW50IiwiUm91dGVzIiwicGF0aCIsImNvbXBvbmVudCIsIlByb2plY3RzQ29tcG9uZW50IiwiUHJvamVjdENvbXBvbmVudCIsIlRhc2tzQ29tcG9uZW50IiwiVGFza0NvbXBvbmVudCIsIlVzZXJQcm9maWxlQ29tcG9uZW50IiwiTG9naW5Db21wb25lbnQiLCJSb3V0ZXIiLCJIRUFERVIiLCJoZWFkZXJzIiwiSGVhZGVycyIsIkFjY2VwdCIsImh0dHAiLCJ1cmwiLCJyZXNwb25zZSIsImpzb24iLCJnZXROYXYiLCJJbmplY3RhYmxlIiwiSHR0cCIsImdldFRhZ3MiLCJyZXNwIiwiZ2V0VGFza1R5cGVzIiwib2JqZWN0cyIsImxpc3QiLCJnZXRPcmdhbml6YXRpb25zIiwiZ2V0RW1wbG95ZWVzIiwicHJvamVjdFNlcnZpY2UiLCJnZXRQcm9qZWN0cyIsInByb2plY3RzIiwiY29tcG9zZVJlY29yZCIsImRlbGV0ZVByb2plY3QiLCJwcm9qZWN0X2ZhY3RvcnlfMSIsIlZJRVdfVVJMIiwiRk9STV9VUkwiLCJDb250ZW50LVR5cGUiLCJQcm9qZWN0RmFjdG9yeSIsImNyZWF0ZVByb2plY3RMaXN0IiwiZ2V0UHJvamVjdEJ5SWQiLCJwcm9qZWN0SWQiLCJjcmVhdGVQcm9qZWN0Iiwic2F2ZVByb2plY3QiLCJwb3N0Iiwic2VyaWFsaXplIiwiUHJvamVjdCIsImF1dGhvciIsInJlZ0RhdGUiLCJzdGF0dXMiLCJjdXN0b21lciIsIm1hbmFnZXIiLCJwcm9ncmFtbWVyIiwidGVzdGVyIiwiY29tbWVudCIsImZpbmlzaERhdGUiLCJhdHRhY2htZW50cyIsIm9ial91dGlsc18xIiwiUHJvamVjdFN0YXR1c1R5cGUiLCJVTktOT1dOIiwiRFJBRlQiLCJQUk9DRVNTRUQiLCJGSU5JU0hFRCIsInNlcmlhbGl6ZU9iaiIsInByb3BlcnR5IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsIl9wcm9qZWN0U2VydmljZSIsIl9wYXJhbXMiLCJfZm9ybUJ1aWxkZXIiLCJsb2FkaW5nIiwiQ29udHJvbCIsInByb2plY3RGb3JtIiwiZ2V0UGFyYW0iLCJ1c2VycyIsIlJvdXRlU2VnbWVudCIsIkZvcm1CdWlsZGVyIiwidGFza1NlcnZpY2UiLCJnZXRUYXNrcyIsInRhc2tzIiwiZGVsZXRlVGFzayIsInRhc2tfZmFjdG9yeV8xIiwiYXQiLCJUYXNrRmFjdG9yeSIsImNyZWF0ZVRhc2tMaXN0IiwiZ2V0VGFza0J5SWQiLCJ0YXNrSWQiLCJjcmVhdGVUYXNrIiwic2F2ZVRhc2siLCJUYXNrIiwidHlwZSIsInByaW9yaXR5IiwiYm9keSIsImFzc2lnbmVlIiwic3RhcnREYXRlIiwiZHVlRGF0ZSIsInRhZ3MiLCJUYXNrUHJpb3JpdHlUeXBlIiwiSEVJR0hFU1QiLCJIRUlHSFQiLCJNRURJVU0iLCJOT1JNQUwiLCJUYXNrU3RhdHVzVHlwZSIsIldBSVRJTkciLCJfdGFza1NlcnZpY2UiLCJ0YXNrRm9ybSIsInVzZXJOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSLFNBQVNDLE9BQVFDLFFBQVNDLHFCQUUvQixZQ0pELElBQUFDLDRCQUFBRCxvQkFBd0IsR0FDeEJFLE9BQUFGLG9CQUFpRSxHQUNqRUcsT0FBQUgsb0JBQTBFLEtBQzFFSSxTQUFBSixvQkFBa0QsS0FDbERLLFNBQUFMLG9CQUFxRSxJQUNyRUEscUJBQU8sSUFFUCxJQUFBTSxPQUFBTixvQkFBa0IsS0FDbEJPLGNBQUFQLG9CQUF5QixLQUN6QlEsZUFBQVIsb0JBQTBCLEtBQzFCUyxrQkFBQVQsb0JBQTZCLEtBQzdCVSxvQkFBQVYsb0JBQStCLEtBQy9CVyxnQkFBQVgsb0JBQTJCLElBSXZCRSxRQUFBVSxpQkFVSlgsMkJBQUFZLFVBQVVQLE1BQUFRLEtBQ05YLE9BQUFZLGVBQ0FYLFNBQUFZLGtCQUNBWixTQUFBYSxpQkFDQWYsT0FBQWdCLFFBQVFoQixPQUFBaUIscUJBQXVCQyxTQUFVaEIsU0FBQVksa0JBQW1CSyxPQUFPLElBQ25FbkIsT0FBQWdCLFFBQVFiLFNBQUFpQixrQkFBb0JDLFNBQVVsQixTQUFBbUIsdUJBRXRDbkIsU0FBQW9CLGVBQ0FsQixjQUFBbUIsV0FDQWxCLGVBQUFtQixZQUNBbEIsa0JBQUFtQixlQUNBbEIsb0JBQUFtQixpQkFDQWxCLGdCQUFBbUIsZUFaSjdCLFNBYVMsU0FBQThCLEtBQU8sTUFBQUMsU0FBUUMsTUFBTUYsUURJdkIsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0MsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0MsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUVILFNBQVNqQyxPQUFRQyxRQUFTQyxxQkUvV2hDLFlBS0EsSUFBQWtDLFdBQUFsQyxvQkFBQSxHQUNBRCxTQUFBb0MsUUFBQUQsVUFBQUMsT0FFQSxJQUFBQyxjQUFBcEMsb0JBQUEsR0FDQUQsU0FBQXNDLFdBQUFELGFBQUFDLFdBR0FyQyxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUVBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFBQSxLQUNBQSxvQkFB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QzcrQixPQUFBOGhDLFdBQ0c5N0IsU0FBVSxVQUNWKzdCLFNBQVU7RzNSaXRjTDNDLFdBQVcseUJBQ1pzRCxrQjJSL3NjSzdpQyxTQUFBNmlDLGVBQWNBLGdCM1J1dGNyQixTQUFTOWlDLE9BQVFDLFNBRXRCLFk0Umh1Y0QsSUFBQThnQyxNQUFBLG1CQUFBQSxRQUlJeDdCLEtBQUF3akMsU0FBbUIsYUFDdkIsTUFBQWhJLFFBTGE5Z0MsU0FBQThnQyxLQUFJQSxNNVI0dWNYLFNBQVMvZ0MsT0FBUUMsUzZSNXVjdkJELE9BQUFDLFFBQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFswXSxbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgcGxhdGZvcm1fYnJvd3Nlcl9keW5hbWljXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBodHRwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4MSk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBjb21tb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMyNCk7XHJcblx0dmFyIGFwcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODMpO1xyXG5cdHZhciBhcHBfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODQpO1xyXG5cdHZhciB0YXNrX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTk4KTtcclxuXHR2YXIgcHJvamVjdF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5MCk7XHJcblx0dmFyIHJlZmVyZW5jZV9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4NSk7XHJcblx0dmFyIHN0YWZmX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg2KTtcclxuXHRpZiAodHJ1ZSkge1xyXG5cdCAgICBjb3JlXzEuZW5hYmxlUHJvZE1vZGUoKTtcclxuXHR9XHJcblx0LypjbGFzcyBNeUJhc2VSZXF1ZXN0T3B0aW9ucyBleHRlbmRzIEJhc2VSZXF1ZXN0T3B0aW9ucyB7XHJcblx0ICAgIGhlYWRlcnM6IEhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XHJcblx0ICAgICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCdcclxuXHQgICAgfSk7XHJcblx0ICAgIHdpdGhDcmVkZW50aWFsczogYm9vbGVhbiA9IHRydWU7XHJcblx0fSovXHJcblx0cGxhdGZvcm1fYnJvd3Nlcl9keW5hbWljXzEuYm9vdHN0cmFwKGFwcF8xLkFwcCwgW1xyXG5cdCAgICBodHRwXzEuSFRUUF9QUk9WSURFUlMsXHJcblx0ICAgIHJvdXRlcl8xLlJPVVRFUl9ESVJFQ1RJVkVTLFxyXG5cdCAgICByb3V0ZXJfMS5ST1VURVJfUFJPVklERVJTLFxyXG5cdCAgICBjb3JlXzEucHJvdmlkZShjb3JlXzEuUExBVEZPUk1fRElSRUNUSVZFUywgeyB1c2VWYWx1ZTogcm91dGVyXzEuUk9VVEVSX0RJUkVDVElWRVMsIG11bHRpOiB0cnVlIH0pLFxyXG5cdCAgICBjb3JlXzEucHJvdmlkZShjb21tb25fMS5Mb2NhdGlvblN0cmF0ZWd5LCB7IHVzZUNsYXNzOiBjb21tb25fMS5IYXNoTG9jYXRpb25TdHJhdGVneSB9KSxcclxuXHQgICAgLy8gcHJvdmlkZShSZXF1ZXN0T3B0aW9ucywgeyB1c2VDbGFzczogTXlCYXNlUmVxdWVzdE9wdGlvbnMgfSksXHJcblx0ICAgIGNvbW1vbl8xLkZPUk1fUFJPVklERVJTLFxyXG5cdCAgICBhcHBfc2VydmljZV8xLkFwcFNlcnZpY2UsXHJcblx0ICAgIHRhc2tfc2VydmljZV8xLlRhc2tTZXJ2aWNlLFxyXG5cdCAgICBwcm9qZWN0X3NlcnZpY2VfMS5Qcm9qZWN0U2VydmljZSxcclxuXHQgICAgcmVmZXJlbmNlX3NlcnZpY2VfMS5SZWZlcmVuY2VTZXJ2aWNlLFxyXG5cdCAgICBzdGFmZl9zZXJ2aWNlXzEuU3RhZmZTZXJ2aWNlXHJcblx0XSkuY2F0Y2goZnVuY3Rpb24gKGVycikgeyByZXR1cm4gY29uc29sZS5lcnJvcihlcnIpOyB9KTtcclxuXG5cbi8qKiovIH0sXG4vKiAxICovLFxuLyogMiAqLyxcbi8qIDMgKi8sXG4vKiA0ICovLFxuLyogNSAqLyxcbi8qIDYgKi8sXG4vKiA3ICovLFxuLyogOCAqLyxcbi8qIDkgKi8sXG4vKiAxMCAqLyxcbi8qIDExICovLFxuLyogMTIgKi8sXG4vKiAxMyAqLyxcbi8qIDE0ICovLFxuLyogMTUgKi8sXG4vKiAxNiAqLyxcbi8qIDE3ICovLFxuLyogMTggKi8sXG4vKiAxOSAqLyxcbi8qIDIwICovLFxuLyogMjEgKi8sXG4vKiAyMiAqLyxcbi8qIDIzICovLFxuLyogMjQgKi8sXG4vKiAyNSAqLyxcbi8qIDI2ICovLFxuLyogMjcgKi8sXG4vKiAyOCAqLyxcbi8qIDI5ICovLFxuLyogMzAgKi8sXG4vKiAzMSAqLyxcbi8qIDMyICovLFxuLyogMzMgKi8sXG4vKiAzNCAqLyxcbi8qIDM1ICovLFxuLyogMzYgKi8sXG4vKiAzNyAqLyxcbi8qIDM4ICovLFxuLyogMzkgKi8sXG4vKiA0MCAqLyxcbi8qIDQxICovLFxuLyogNDIgKi8sXG4vKiA0MyAqLyxcbi8qIDQ0ICovLFxuLyogNDUgKi8sXG4vKiA0NiAqLyxcbi8qIDQ3ICovLFxuLyogNDggKi8sXG4vKiA0OSAqLyxcbi8qIDUwICovLFxuLyogNTEgKi8sXG4vKiA1MiAqLyxcbi8qIDUzICovLFxuLyogNTQgKi8sXG4vKiA1NSAqLyxcbi8qIDU2ICovLFxuLyogNTcgKi8sXG4vKiA1OCAqLyxcbi8qIDU5ICovLFxuLyogNjAgKi8sXG4vKiA2MSAqLyxcbi8qIDYyICovLFxuLyogNjMgKi8sXG4vKiA2NCAqLyxcbi8qIDY1ICovLFxuLyogNjYgKi8sXG4vKiA2NyAqLyxcbi8qIDY4ICovLFxuLyogNjkgKi8sXG4vKiA3MCAqLyxcbi8qIDcxICovLFxuLyogNzIgKi8sXG4vKiA3MyAqLyxcbi8qIDc0ICovLFxuLyogNzUgKi8sXG4vKiA3NiAqLyxcbi8qIDc3ICovLFxuLyogNzggKi8sXG4vKiA3OSAqLyxcbi8qIDgwICovLFxuLyogODEgKi8sXG4vKiA4MiAqLyxcbi8qIDgzICovLFxuLyogODQgKi8sXG4vKiA4NSAqLyxcbi8qIDg2ICovLFxuLyogODcgKi8sXG4vKiA4OCAqLyxcbi8qIDg5ICovLFxuLyogOTAgKi8sXG4vKiA5MSAqLyxcbi8qIDkyICovLFxuLyogOTMgKi8sXG4vKiA5NCAqLyxcbi8qIDk1ICovLFxuLyogOTYgKi8sXG4vKiA5NyAqLyxcbi8qIDk4ICovLFxuLyogOTkgKi8sXG4vKiAxMDAgKi8sXG4vKiAxMDEgKi8sXG4vKiAxMDIgKi8sXG4vKiAxMDMgKi8sXG4vKiAxMDQgKi8sXG4vKiAxMDUgKi8sXG4vKiAxMDYgKi8sXG4vKiAxMDcgKi8sXG4vKiAxMDggKi8sXG4vKiAxMDkgKi8sXG4vKiAxMTAgKi8sXG4vKiAxMTEgKi8sXG4vKiAxMTIgKi8sXG4vKiAxMTMgKi8sXG4vKiAxMTQgKi8sXG4vKiAxMTUgKi8sXG4vKiAxMTYgKi8sXG4vKiAxMTcgKi8sXG4vKiAxMTggKi8sXG4vKiAxMTkgKi8sXG4vKiAxMjAgKi8sXG4vKiAxMjEgKi8sXG4vKiAxMjIgKi8sXG4vKiAxMjMgKi8sXG4vKiAxMjQgKi8sXG4vKiAxMjUgKi8sXG4vKiAxMjYgKi8sXG4vKiAxMjcgKi8sXG4vKiAxMjggKi8sXG4vKiAxMjkgKi8sXG4vKiAxMzAgKi8sXG4vKiAxMzEgKi8sXG4vKiAxMzIgKi8sXG4vKiAxMzMgKi8sXG4vKiAxMzQgKi8sXG4vKiAxMzUgKi8sXG4vKiAxMzYgKi8sXG4vKiAxMzcgKi8sXG4vKiAxMzggKi8sXG4vKiAxMzkgKi8sXG4vKiAxNDAgKi8sXG4vKiAxNDEgKi8sXG4vKiAxNDIgKi8sXG4vKiAxNDMgKi8sXG4vKiAxNDQgKi8sXG4vKiAxNDUgKi8sXG4vKiAxNDYgKi8sXG4vKiAxNDcgKi8sXG4vKiAxNDggKi8sXG4vKiAxNDkgKi8sXG4vKiAxNTAgKi8sXG4vKiAxNTEgKi8sXG4vKiAxNTIgKi8sXG4vKiAxNTMgKi8sXG4vKiAxNTQgKi8sXG4vKiAxNTUgKi8sXG4vKiAxNTYgKi8sXG4vKiAxNTcgKi8sXG4vKiAxNTggKi8sXG4vKiAxNTkgKi8sXG4vKiAxNjAgKi8sXG4vKiAxNjEgKi8sXG4vKiAxNjIgKi8sXG4vKiAxNjMgKi8sXG4vKiAxNjQgKi8sXG4vKiAxNjUgKi8sXG4vKiAxNjYgKi8sXG4vKiAxNjcgKi8sXG4vKiAxNjggKi8sXG4vKiAxNjkgKi8sXG4vKiAxNzAgKi8sXG4vKiAxNzEgKi8sXG4vKiAxNzIgKi8sXG4vKiAxNzMgKi8sXG4vKiAxNzQgKi8sXG4vKiAxNzUgKi8sXG4vKiAxNzYgKi8sXG4vKiAxNzcgKi8sXG4vKiAxNzggKi8sXG4vKiAxNzkgKi8sXG4vKiAxODAgKi8sXG4vKiAxODEgKi8sXG4vKiAxODIgKi8sXG4vKiAxODMgKi8sXG4vKiAxODQgKi8sXG4vKiAxODUgKi8sXG4vKiAxODYgKi8sXG4vKiAxODcgKi8sXG4vKiAxODggKi8sXG4vKiAxODkgKi8sXG4vKiAxOTAgKi8sXG4vKiAxOTEgKi8sXG4vKiAxOTIgKi8sXG4vKiAxOTMgKi8sXG4vKiAxOTQgKi8sXG4vKiAxOTUgKi8sXG4vKiAxOTYgKi8sXG4vKiAxOTcgKi8sXG4vKiAxOTggKi8sXG4vKiAxOTkgKi8sXG4vKiAyMDAgKi8sXG4vKiAyMDEgKi8sXG4vKiAyMDIgKi8sXG4vKiAyMDMgKi8sXG4vKiAyMDQgKi8sXG4vKiAyMDUgKi8sXG4vKiAyMDYgKi8sXG4vKiAyMDcgKi8sXG4vKiAyMDggKi8sXG4vKiAyMDkgKi8sXG4vKiAyMTAgKi8sXG4vKiAyMTEgKi8sXG4vKiAyMTIgKi8sXG4vKiAyMTMgKi8sXG4vKiAyMTQgKi8sXG4vKiAyMTUgKi8sXG4vKiAyMTYgKi8sXG4vKiAyMTcgKi8sXG4vKiAyMTggKi8sXG4vKiAyMTkgKi8sXG4vKiAyMjAgKi8sXG4vKiAyMjEgKi8sXG4vKiAyMjIgKi8sXG4vKiAyMjMgKi8sXG4vKiAyMjQgKi8sXG4vKiAyMjUgKi8sXG4vKiAyMjYgKi8sXG4vKiAyMjcgKi8sXG4vKiAyMjggKi8sXG4vKiAyMjkgKi8sXG4vKiAyMzAgKi8sXG4vKiAyMzEgKi8sXG4vKiAyMzIgKi8sXG4vKiAyMzMgKi8sXG4vKiAyMzQgKi8sXG4vKiAyMzUgKi8sXG4vKiAyMzYgKi8sXG4vKiAyMzcgKi8sXG4vKiAyMzggKi8sXG4vKiAyMzkgKi8sXG4vKiAyNDAgKi8sXG4vKiAyNDEgKi8sXG4vKiAyNDIgKi8sXG4vKiAyNDMgKi8sXG4vKiAyNDQgKi8sXG4vKiAyNDUgKi8sXG4vKiAyNDYgKi8sXG4vKiAyNDcgKi8sXG4vKiAyNDggKi8sXG4vKiAyNDkgKi8sXG4vKiAyNTAgKi8sXG4vKiAyNTEgKi8sXG4vKiAyNTIgKi8sXG4vKiAyNTMgKi8sXG4vKiAyNTQgKi8sXG4vKiAyNTUgKi8sXG4vKiAyNTYgKi8sXG4vKiAyNTcgKi8sXG4vKiAyNTggKi8sXG4vKiAyNTkgKi8sXG4vKiAyNjAgKi8sXG4vKiAyNjEgKi8sXG4vKiAyNjIgKi8sXG4vKiAyNjMgKi8sXG4vKiAyNjQgKi8sXG4vKiAyNjUgKi8sXG4vKiAyNjYgKi8sXG4vKiAyNjcgKi8sXG4vKiAyNjggKi8sXG4vKiAyNjkgKi8sXG4vKiAyNzAgKi8sXG4vKiAyNzEgKi8sXG4vKiAyNzIgKi8sXG4vKiAyNzMgKi8sXG4vKiAyNzQgKi8sXG4vKiAyNzUgKi8sXG4vKiAyNzYgKi8sXG4vKiAyNzcgKi8sXG4vKiAyNzggKi8sXG4vKiAyNzkgKi8sXG4vKiAyODAgKi8sXG4vKiAyODEgKi8sXG4vKiAyODIgKi8sXG4vKiAyODMgKi8sXG4vKiAyODQgKi8sXG4vKiAyODUgKi8sXG4vKiAyODYgKi8sXG4vKiAyODcgKi8sXG4vKiAyODggKi8sXG4vKiAyODkgKi8sXG4vKiAyOTAgKi8sXG4vKiAyOTEgKi8sXG4vKiAyOTIgKi8sXG4vKiAyOTMgKi8sXG4vKiAyOTQgKi8sXG4vKiAyOTUgKi8sXG4vKiAyOTYgKi8sXG4vKiAyOTcgKi8sXG4vKiAyOTggKi8sXG4vKiAyOTkgKi8sXG4vKiAzMDAgKi8sXG4vKiAzMDEgKi8sXG4vKiAzMDIgKi8sXG4vKiAzMDMgKi8sXG4vKiAzMDQgKi8sXG4vKiAzMDUgKi8sXG4vKiAzMDYgKi8sXG4vKiAzMDcgKi8sXG4vKiAzMDggKi8sXG4vKiAzMDkgKi8sXG4vKiAzMTAgKi8sXG4vKiAzMTEgKi8sXG4vKiAzMTIgKi8sXG4vKiAzMTMgKi8sXG4vKiAzMTQgKi8sXG4vKiAzMTUgKi8sXG4vKiAzMTYgKi8sXG4vKiAzMTcgKi8sXG4vKiAzMTggKi8sXG4vKiAzMTkgKi8sXG4vKiAzMjAgKi8sXG4vKiAzMjEgKi8sXG4vKiAzMjIgKi8sXG4vKiAzMjMgKi8sXG4vKiAzMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cblx0Ly8gU3ViamVjdCBpbXBvcnRlZCBiZWZvcmUgT2JzZXJ2YWJsZSB0byBieXBhc3MgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZSBzaW5jZVxuXHQvLyBTdWJqZWN0IGV4dGVuZHMgT2JzZXJ2YWJsZSBhbmQgT2JzZXJ2YWJsZSByZWZlcmVuY2VzIFN1YmplY3QgaW4gaXQnc1xuXHQvLyBkZWZpbml0aW9uXG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0ZXhwb3J0cy5TdWJqZWN0ID0gU3ViamVjdF8xLlN1YmplY3Q7XG5cdC8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0ZXhwb3J0cy5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGU7XG5cdC8vIHN0YXRpY3Ncblx0LyogdHNsaW50OmRpc2FibGU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXG5cdF9fd2VicGFja19yZXF1aXJlX18oMzI1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMjkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzQzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNDcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM1MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNjgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM3MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzcyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM4NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzg2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzOTApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzk1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzOTgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMik7XG5cdC8vb3BlcmF0b3JzXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MDcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQwOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDExKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MTMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQxNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDIyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MjQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDI3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MjgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQzMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDMzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MzYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQzOCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDQwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NDIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDQ2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NDgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDUyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NTQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDU4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NjApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDY4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NzApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDc0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NzYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDgwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0ODIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDg2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0ODcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDg5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OTApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5MSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDkyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDk5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MDIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUwMyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MDYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUwOCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTEwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MTIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUxNCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTE2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MTgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUyMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTIyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MjQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTI4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MzApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUzMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NDMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU0NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQ3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NTApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU1Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTU0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NTYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU1OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTYwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NjIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU2NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTY2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NjcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU2OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTcxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NzMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU3NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTc3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NzkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU4MCk7XG5cdC8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuXHR2YXIgT3BlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgyKTtcblx0ZXhwb3J0cy5PcGVyYXRvciA9IE9wZXJhdG9yXzEuT3BlcmF0b3I7XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRleHBvcnRzLlN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbjtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHRleHBvcnRzLlN1YnNjcmliZXIgPSBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcjtcblx0dmFyIEFzeW5jU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMjgpO1xuXHRleHBvcnRzLkFzeW5jU3ViamVjdCA9IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdDtcblx0dmFyIFJlcGxheVN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDE4KTtcblx0ZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdF8xLlJlcGxheVN1YmplY3Q7XG5cdHZhciBCZWhhdmlvclN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTAxKTtcblx0ZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3Q7XG5cdHZhciBDb25uZWN0YWJsZU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIxKTtcblx0ZXhwb3J0cy5Db25uZWN0YWJsZU9ic2VydmFibGUgPSBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGU7XG5cdHZhciBOb3RpZmljYXRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYxKTtcblx0ZXhwb3J0cy5Ob3RpZmljYXRpb24gPSBOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb247XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdGV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yO1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ5KTtcblx0ZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG5cdHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cdGV4cG9ydHMuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO1xuXHR2YXIgVW5zdWJzY3JpcHRpb25FcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdGV4cG9ydHMuVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yO1xuXHR2YXIgYXNhcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzUpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIHF1ZXVlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxOSk7XG5cdHZhciByeFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHR2YXIgaXRlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQxKTtcblx0dmFyIG9ic2VydmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0LyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cblx0LyoqXG5cdCAqIEB0eXBlZGVmIHtPYmplY3R9IFJ4LlNjaGVkdWxlclxuXHQgKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gcXVldWUgU2NoZWR1bGVzIG9uIGEgcXVldWUgaW4gdGhlIGN1cnJlbnQgZXZlbnQgZnJhbWVcblx0ICogKHRyYW1wb2xpbmUgc2NoZWR1bGVyKS4gVXNlIHRoaXMgZm9yIGl0ZXJhdGlvbiBvcGVyYXRpb25zLlxuXHQgKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXNhcCBTY2hlZHVsZXMgb24gdGhlIG1pY3JvIHRhc2sgcXVldWUsIHdoaWNoIHVzZXMgdGhlXG5cdCAqIGZhc3Rlc3QgdHJhbnNwb3J0IG1lY2hhbmlzbSBhdmFpbGFibGUsIGVpdGhlciBOb2RlLmpzJyBgcHJvY2Vzcy5uZXh0VGljaygpYFxuXHQgKiBvciBXZWIgV29ya2VyIE1lc3NhZ2VDaGFubmVsIG9yIHNldFRpbWVvdXQgb3Igb3RoZXJzLiBVc2UgdGhpcyBmb3Jcblx0ICogYXN5bmNocm9ub3VzIGNvbnZlcnNpb25zLlxuXHQgKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXN5bmMgU2NoZWR1bGVzIHdvcmsgd2l0aCBgc2V0SW50ZXJ2YWxgLiBVc2UgdGhpcyBmb3Jcblx0ICogdGltZS1iYXNlZCBvcGVyYXRpb25zLlxuXHQgKi9cblx0dmFyIFNjaGVkdWxlciA9IHtcblx0ICAgIGFzYXA6IGFzYXBfMS5hc2FwLFxuXHQgICAgYXN5bmM6IGFzeW5jXzEuYXN5bmMsXG5cdCAgICBxdWV1ZTogcXVldWVfMS5xdWV1ZVxuXHR9O1xuXHRleHBvcnRzLlNjaGVkdWxlciA9IFNjaGVkdWxlcjtcblx0LyoqXG5cdCAqIEB0eXBlZGVmIHtPYmplY3R9IFJ4LlN5bWJvbFxuXHQgKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IHJ4U3Vic2NyaWJlciBBIHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvXG5cdCAqIHJldHJpZXZlIGFuIFwiUnggc2FmZVwiIE9ic2VydmVyIGZyb20gYW4gb2JqZWN0LiBcIlJ4IHNhZmV0eVwiIGNhbiBiZSBkZWZpbmVkIGFzXG5cdCAqIGFuIG9iamVjdCB0aGF0IGhhcyBhbGwgb2YgdGhlIHRyYWl0cyBvZiBhbiBSeCBTdWJzY3JpYmVyLCBpbmNsdWRpbmcgdGhlXG5cdCAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc3Vic2NyaXB0aW9uIGNoYWluIGFuZFxuXHQgKiBndWFyYW50ZWVzIGludm9sdmluZyBldmVudCB0cmlnZ2VyaW5nIChjYW4ndCBcIm5leHRcIiBhZnRlciB1bnN1YnNjcmlwdGlvbixcblx0ICogZXRjKS5cblx0ICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSBvYnNlcnZhYmxlIEEgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWUgdG9cblx0ICogcmV0cmlldmUgYW4gT2JzZXJ2YWJsZSBhcyBkZWZpbmVkIGJ5IHRoZSBbRUNNQVNjcmlwdCBcIk9ic2VydmFibGVcIiBzcGVjXShodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlKS5cblx0ICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSBpdGVyYXRvciBUaGUgRVM2IHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lXG5cdCAqIHRvIHJldHJpZXZlIGFuIGl0ZXJhdG9yIGZyb20gYW4gb2JqZWN0LlxuXHQgKi9cblx0dmFyIFN5bWJvbCA9IHtcblx0ICAgIHJ4U3Vic2NyaWJlcjogcnhTdWJzY3JpYmVyXzEuJCRyeFN1YnNjcmliZXIsXG5cdCAgICBvYnNlcnZhYmxlOiBvYnNlcnZhYmxlLFxuXHQgICAgaXRlcmF0b3I6IGl0ZXJhdG9yXzEuJCRpdGVyYXRvclxuXHR9O1xuXHRleHBvcnRzLlN5bWJvbCA9IFN5bWJvbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9UnguanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBiaW5kQ2FsbGJhY2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzI2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZENhbGxiYWNrID0gYmluZENhbGxiYWNrXzEuYmluZENhbGxiYWNrO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kQ2FsbGJhY2suanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQm91bmRDYWxsYmFja09ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzI3KTtcblx0ZXhwb3J0cy5iaW5kQ2FsbGJhY2sgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZENhbGxiYWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgQXN5bmNTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOCk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGNhbGxiYWNrRnVuYywgc2VsZWN0b3IsIGFyZ3MsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jO1xuXHQgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0ICAgIC8qKlxuXHQgICAgICogQ29udmVydHMgYSBjYWxsYmFjayBBUEkgdG8gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZS5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+R2l2ZSBpdCBhIGZ1bmN0aW9uIGBmYCBvZiB0eXBlIGBmKHgsIGNhbGxiYWNrKWAgYW5kXG5cdCAgICAgKiBpdCB3aWxsIHJldHVybiBhIGZ1bmN0aW9uIGBnYCB0aGF0IHdoZW4gY2FsbGVkIGFzIGBnKHgpYCB3aWxsIG91dHB1dCBhblxuXHQgICAgICogT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogYGJpbmRDYWxsYmFja2AgaXMgbm90IGFuIG9wZXJhdG9yIGJlY2F1c2UgaXRzIGlucHV0IGFuZCBvdXRwdXQgYXJlIG5vdFxuXHQgICAgICogT2JzZXJ2YWJsZXMuIFRoZSBpbnB1dCBpcyBhIGZ1bmN0aW9uIGBmdW5jYCB3aXRoIHNvbWUgcGFyYW1ldGVycywgYnV0IHRoZVxuXHQgICAgICogbGFzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYGZ1bmNgIGNhbGxzIHdoZW4gaXQgaXNcblx0ICAgICAqIGRvbmUuIFRoZSBvdXRwdXQgb2YgYGJpbmRDYWxsYmFja2AgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBzYW1lXG5cdCAgICAgKiBwYXJhbWV0ZXJzIGFzIGBmdW5jYCwgZXhjZXB0IHRoZSBsYXN0IG9uZSAodGhlIGNhbGxiYWNrKS4gV2hlbiB0aGUgb3V0cHV0XG5cdCAgICAgKiBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhcmd1bWVudHMsIGl0IHdpbGwgcmV0dXJuIGFuIE9ic2VydmFibGUgd2hlcmUgdGhlXG5cdCAgICAgKiByZXN1bHRzIHdpbGwgYmUgZGVsaXZlcmVkIHRvLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbnZlcnQgalF1ZXJ5J3MgZ2V0SlNPTiB0byBhbiBPYnNlcnZhYmxlIEFQSTwvY2FwdGlvbj5cblx0ICAgICAqIC8vIFN1cHBvc2Ugd2UgaGF2ZSBqUXVlcnkuZ2V0SlNPTignL215L3VybCcsIGNhbGxiYWNrKVxuXHQgICAgICogdmFyIGdldEpTT05Bc09ic2VydmFibGUgPSBSeC5PYnNlcnZhYmxlLmJpbmRDYWxsYmFjayhqUXVlcnkuZ2V0SlNPTik7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gZ2V0SlNPTkFzT2JzZXJ2YWJsZSgnL215L3VybCcpO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGJpbmROb2RlQ2FsbGJhY2t9XG5cdCAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbVByb21pc2V9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuYyBGdW5jdGlvbiB3aXRoIGEgY2FsbGJhY2sgYXMgdGhlIGxhc3QgcGFyYW1ldGVyLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc2VsZWN0b3IgQSBmdW5jdGlvbiB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlXG5cdCAgICAgKiBjYWxsYmFjayBhbmQgbWFwcyB0aG9zZSBhIHZhbHVlIHRvIGVtaXQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG5cdCAgICAgKiBjYWxsYmFja3MuXG5cdCAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5wYXJhbXM6ICopOiBPYnNlcnZhYmxlfSBBIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlXG5cdCAgICAgKiBPYnNlcnZhYmxlIHRoYXQgZGVsaXZlcnMgdGhlIHNhbWUgdmFsdWVzIHRoZSBjYWxsYmFjayB3b3VsZCBkZWxpdmVyLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBiaW5kQ2FsbGJhY2tcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmdW5jLCBzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGZ1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgIH07XG5cdCAgICB9O1xuXHQgICAgQm91bmRDYWxsYmFja09ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBjYWxsYmFja0Z1bmMgPSB0aGlzLmNhbGxiYWNrRnVuYztcblx0ICAgICAgICB2YXIgYXJncyA9IHRoaXMuYXJncztcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgaWYgKCFzdWJqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuXHQgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuXHQgICAgICAgICAgICAgICAgaGFuZGxlci5zb3VyY2UgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIDAsIHsgc291cmNlOiB0aGlzLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQm91bmRDYWxsYmFja09ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSA9IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHRmdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgY2FsbGJhY2tGdW5jID0gc291cmNlLmNhbGxiYWNrRnVuYywgYXJncyA9IHNvdXJjZS5hcmdzLCBzY2hlZHVsZXIgPSBzb3VyY2Uuc2NoZWR1bGVyO1xuXHQgICAgdmFyIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgIGlmICghc3ViamVjdCkge1xuXHQgICAgICAgIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcblx0ICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuXHQgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8yID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogcmVzdWx0XzIsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncztcblx0ICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gdXNlIG5hbWVkIGZ1bmN0aW9uIHRvIHBhc3MgdmFsdWVzIGluIHdpdGhvdXQgY2xvc3VyZVxuXHQgICAgICAgIGhhbmRsZXIuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuXHQgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHNlbGYuYWRkKHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBhcmcudmFsdWUsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcblx0ICAgIHN1YmplY3QubmV4dCh2YWx1ZSk7XG5cdCAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hFcnJvcihhcmcpIHtcblx0ICAgIHZhciBlcnIgPSBhcmcuZXJyLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG5cdCAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Qm91bmRDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgQXN5bmNTdWJqZWN0PFQ+XG5cdCAqL1xuXHR2YXIgQXN5bmNTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc3luY1N1YmplY3QsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5oYXNOZXh0ID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmhhc05leHQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc05leHQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcblx0ICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cblx0ICAgICAgICAvLyBzcGxpY2luZyB0aGVtc2VsdmVzIG91dCBvZiB0aGUgb2JzZXJ2ZXJzIGxpc3Qgb25lIGJ5IG9uZS5cblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNOZXh0KSB7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgbyA9IG9ic2VydmVyc1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBvLm5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICBvLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXN5bmNTdWJqZWN0O1xuXHR9KFN1YmplY3RfMS5TdWJqZWN0KSk7XG5cdGV4cG9ydHMuQXN5bmNTdWJqZWN0ID0gQXN5bmNTdWJqZWN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY1N1YmplY3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBiaW5kTm9kZUNhbGxiYWNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmJpbmROb2RlQ2FsbGJhY2sgPSBiaW5kTm9kZUNhbGxiYWNrXzEuYmluZE5vZGVDYWxsYmFjaztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZE5vZGVDYWxsYmFjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMxKTtcblx0ZXhwb3J0cy5iaW5kTm9kZUNhbGxiYWNrID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXzEuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZE5vZGVDYWxsYmFjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIEFzeW5jU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMjgpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrRnVuYyA9IGNhbGxiYWNrRnVuYztcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5hcmdzID0gYXJncztcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdCAgICAvKipcblx0ICAgICAqIENvbnZlcnRzIGEgTm9kZS5qcy1zdHlsZSBjYWxsYmFjayBBUEkgdG8gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW5cblx0ICAgICAqIE9ic2VydmFibGUuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MganVzdCBsaWtlIHtAbGluayBiaW5kQ2FsbGJhY2t9LCBidXQgdGhlXG5cdCAgICAgKiBjYWxsYmFjayBpcyBleHBlY3RlZCB0byBiZSBvZiB0eXBlIGBjYWxsYmFjayhlcnJvciwgcmVzdWx0KWAuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIGBiaW5kTm9kZUNhbGxiYWNrYCBpcyBub3QgYW4gb3BlcmF0b3IgYmVjYXVzZSBpdHMgaW5wdXQgYW5kIG91dHB1dCBhcmUgbm90XG5cdCAgICAgKiBPYnNlcnZhYmxlcy4gVGhlIGlucHV0IGlzIGEgZnVuY3Rpb24gYGZ1bmNgIHdpdGggc29tZSBwYXJhbWV0ZXJzLCBidXQgdGhlXG5cdCAgICAgKiBsYXN0IHBhcmFtZXRlciBtdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBgZnVuY2AgY2FsbHMgd2hlbiBpdCBpc1xuXHQgICAgICogZG9uZS4gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGV4cGVjdGVkIHRvIGZvbGxvdyBOb2RlLmpzIGNvbnZlbnRpb25zLFxuXHQgICAgICogd2hlcmUgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBjYWxsYmFjayBpcyBhbiBlcnJvciwgd2hpbGUgcmVtYWluaW5nXG5cdCAgICAgKiBhcmd1bWVudHMgYXJlIHRoZSBjYWxsYmFjayByZXN1bHQuIFRoZSBvdXRwdXQgb2YgYGJpbmROb2RlQ2FsbGJhY2tgIGlzIGFcblx0ICAgICAqIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHNhbWUgcGFyYW1ldGVycyBhcyBgZnVuY2AsIGV4Y2VwdCB0aGUgbGFzdCBvbmUgKHRoZVxuXHQgICAgICogY2FsbGJhY2spLiBXaGVuIHRoZSBvdXRwdXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYXJndW1lbnRzLCBpdCB3aWxsXG5cdCAgICAgKiByZXR1cm4gYW4gT2JzZXJ2YWJsZSB3aGVyZSB0aGUgcmVzdWx0cyB3aWxsIGJlIGRlbGl2ZXJlZCB0by5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZWFkIGEgZmlsZSBmcm9tIHRoZSBmaWxlc3lzdGVtIGFuZCBnZXQgdGhlIGRhdGEgYXMgYW4gT2JzZXJ2YWJsZTwvY2FwdGlvbj5cblx0ICAgICAqIGltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcblx0ICAgICAqIHZhciByZWFkRmlsZUFzT2JzZXJ2YWJsZSA9IFJ4Lk9ic2VydmFibGUuYmluZE5vZGVDYWxsYmFjayhmcy5yZWFkRmlsZSk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gcmVhZEZpbGVBc09ic2VydmFibGUoJy4vcm9hZE5hbWVzLnR4dCcsICd1dGY4Jyk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgYmluZENhbGxiYWNrfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21Qcm9taXNlfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gd2l0aCBhIGNhbGxiYWNrIGFzIHRoZSBsYXN0IHBhcmFtZXRlci5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIEEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZVxuXHQgICAgICogY2FsbGJhY2sgYW5kIG1hcHMgdGhvc2UgYSB2YWx1ZSB0byBlbWl0IG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuXHQgICAgICogY2FsbGJhY2tzLlxuXHQgICAgICogQHJldHVybiB7ZnVuY3Rpb24oLi4ucGFyYW1zOiAqKTogT2JzZXJ2YWJsZX0gQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZVxuXHQgICAgICogT2JzZXJ2YWJsZSB0aGF0IGRlbGl2ZXJzIHRoZSBzYW1lIHZhbHVlcyB0aGUgTm9kZS5qcyBjYWxsYmFjayB3b3VsZFxuXHQgICAgICogZGVsaXZlci5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgYmluZE5vZGVDYWxsYmFja1xuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmdW5jLCBzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShmdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKTtcblx0ICAgICAgICB9O1xuXHQgICAgfTtcblx0ICAgIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHRoaXMuY2FsbGJhY2tGdW5jO1xuXHQgICAgICAgIHZhciBhcmdzID0gdGhpcy5hcmdzO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcblx0ICAgICAgICBpZiAoIXNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICBpZiAoIXN1YmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHN1YmplY3QgPSB0aGlzLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJBcmdzID0gW107XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gaW5uZXJBcmdzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuXHQgICAgICAgICAgICAgICAgaGFuZGxlci5zb3VyY2UgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIDAsIHsgc291cmNlOiB0aGlzLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHRmdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgY2FsbGJhY2tGdW5jID0gc291cmNlLmNhbGxiYWNrRnVuYywgYXJncyA9IHNvdXJjZS5hcmdzLCBzY2hlZHVsZXIgPSBzb3VyY2Uuc2NoZWR1bGVyO1xuXHQgICAgdmFyIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgIGlmICghc3ViamVjdCkge1xuXHQgICAgICAgIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcblx0ICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuXHQgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgICAgICAgICAgdmFyIGVyciA9IGlubmVyQXJncy5zaGlmdCgpO1xuXHQgICAgICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hFcnJvciwgMCwgeyBlcnI6IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSwgc3ViamVjdDogc3ViamVjdCB9KSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiByZXN1bHRfMiwgc3ViamVjdDogc3ViamVjdCB9KSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdmFsdWUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gdG8gcGFzcyB2YWx1ZXMgaW4gd2l0aG91dCBjbG9zdXJlXG5cdCAgICAgICAgaGFuZGxlci5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG5cdCAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgc2VsZi5hZGQoc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcikpO1xuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcblx0ICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3ViamVjdCA9IGFyZy5zdWJqZWN0O1xuXHQgICAgc3ViamVjdC5uZXh0KHZhbHVlKTtcblx0ICAgIHN1YmplY3QuY29tcGxldGUoKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaEVycm9yKGFyZykge1xuXHQgICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcblx0ICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb21iaW5lTGF0ZXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdFN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBBcnJheU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM0KTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIENvbWJpbmVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvIGNyZWF0ZSBhbiBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmVcblx0ICogY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2ggb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgYW55IGlucHV0IE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcblx0ICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dHMsIHRoZW4gZW1pdHNcblx0ICogdGhlIG91dHB1dCBvZiB0aGF0IGZvcm11bGEuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVMYXRlc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBjb21iaW5lTGF0ZXN0YCBjb21iaW5lcyB0aGUgdmFsdWVzIGZyb20gdGhpcyBPYnNlcnZhYmxlIHdpdGggdmFsdWVzIGZyb21cblx0ICogT2JzZXJ2YWJsZXMgcGFzc2VkIGFzIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nIHRvIGVhY2hcblx0ICogT2JzZXJ2YWJsZSwgaW4gb3JkZXIsIGFuZCBjb2xsZWN0aW5nIGFuIGFycmF5IG9mIGVhY2ggb2YgdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBhbnkgdGltZSBhbnkgb2YgdGhlIGlucHV0IE9ic2VydmFibGVzIGVtaXRzLCB0aGVuIGVpdGhlciB0YWtpbmcgdGhhdFxuXHQgKiBhcnJheSBhbmQgcGFzc2luZyBpdCBhcyBhcmd1bWVudHMgdG8gYW4gb3B0aW9uYWwgYHByb2plY3RgIGZ1bmN0aW9uIGFuZFxuXHQgKiBlbWl0dGluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoYXQsIG9yIGp1c3QgZW1pdHRpbmcgdGhlIGFycmF5IG9mIHJlY2VudFxuXHQgKiB2YWx1ZXMgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm8gYHByb2plY3RgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5EeW5hbWljYWxseSBjYWxjdWxhdGUgdGhlIEJvZHktTWFzcyBJbmRleCBmcm9tIGFuIE9ic2VydmFibGUgb2Ygd2VpZ2h0IGFuZCBvbmUgZm9yIGhlaWdodDwvY2FwdGlvbj5cblx0ICogdmFyIHdlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoNzAsIDcyLCA3NiwgNzksIDc1KTtcblx0ICogdmFyIGhlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoMS43NiwgMS43NywgMS43OCk7XG5cdCAqIHZhciBibWkgPSB3ZWlnaHQuY29tYmluZUxhdGVzdChoZWlnaHQsICh3LCBoKSA9PiB3IC8gKGggKiBoKSk7XG5cdCAqIGJtaS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnQk1JIGlzICcgKyB4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlfVxuXHQgKiBAc2VlIHtAbGluayB3aXRoTGF0ZXN0RnJvbX1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbWJpbmUgd2l0aCB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gcHJvamVjdCB0aGUgdmFsdWVzIGZyb21cblx0ICogdGhlIGNvbWJpbmVkIGxhdGVzdCB2YWx1ZXMgaW50byBhIG5ldyB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZXMgZnJvbSBlYWNoIGlucHV0IE9ic2VydmFibGUsIG9yIGFuIGFycmF5IG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbVxuXHQgKiBlYWNoIGlucHV0IE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgY29tYmluZUxhdGVzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29tYmluZUxhdGVzdCgpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9qZWN0ID0gbnVsbDtcblx0ICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9qZWN0ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcblx0ICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBwcm9qZWN0KWBcblx0ICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcblx0ICAgIH1cblx0ICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0O1xuXHQvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuXHQvKipcblx0ICogQ29tYmluZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGUgd2hvc2UgdmFsdWVzIGFyZVxuXHQgKiBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCBvZiBpdHMgaW5wdXQgT2JzZXJ2YWJsZXMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciBhbnkgaW5wdXQgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLCBpdFxuXHQgKiBjb21wdXRlcyBhIGZvcm11bGEgdXNpbmcgdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlucHV0cywgdGhlbiBlbWl0c1xuXHQgKiB0aGUgb3V0cHV0IG9mIHRoYXQgZm9ybXVsYS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvY29tYmluZUxhdGVzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYGNvbWJpbmVMYXRlc3RgIGNvbWJpbmVzIHRoZSB2YWx1ZXMgZnJvbSBhbGwgdGhlIE9ic2VydmFibGVzIHBhc3NlZCBhc1xuXHQgKiBhcmd1bWVudHMuIFRoaXMgaXMgZG9uZSBieSBzdWJzY3JpYmluZyB0byBlYWNoIE9ic2VydmFibGUsIGluIG9yZGVyLCBhbmRcblx0ICogY29sbGVjdGluZyBhbiBhcnJheSBvZiBlYWNoIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgYW55IHRpbWUgYW55IG9mIHRoZVxuXHQgKiBpbnB1dCBPYnNlcnZhYmxlcyBlbWl0cywgdGhlbiBlaXRoZXIgdGFraW5nIHRoYXQgYXJyYXkgYW5kIHBhc3NpbmcgaXQgYXNcblx0ICogYXJndW1lbnRzIHRvIGFuIG9wdGlvbmFsIGBwcm9qZWN0YCBmdW5jdGlvbiBhbmQgZW1pdHRpbmcgdGhlIHJldHVybiB2YWx1ZSBvZlxuXHQgKiB0aGF0LCBvciBqdXN0IGVtaXR0aW5nIHRoZSBhcnJheSBvZiByZWNlbnQgdmFsdWVzIGRpcmVjdGx5IGlmIHRoZXJlIGlzIG5vXG5cdCAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RHluYW1pY2FsbHkgY2FsY3VsYXRlIHRoZSBCb2R5LU1hc3MgSW5kZXggZnJvbSBhbiBPYnNlcnZhYmxlIG9mIHdlaWdodCBhbmQgb25lIGZvciBoZWlnaHQ8L2NhcHRpb24+XG5cdCAqIHZhciB3ZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDcwLCA3MiwgNzYsIDc5LCA3NSk7XG5cdCAqIHZhciBoZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDEuNzYsIDEuNzcsIDEuNzgpO1xuXHQgKiB2YXIgYm1pID0gUnguT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KHdlaWdodCwgaGVpZ2h0LCAodywgaCkgPT4gdyAvIChoICogaCkpO1xuXHQgKiBibWkuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coJ0JNSSBpcyAnICsgeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgd2l0aExhdGVzdEZyb219XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZTEgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb21iaW5lIHdpdGggdGhlXG5cdCAqIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG9ic2VydmFibGUyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZVxuXHQgKiBzb3VyY2UgT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSB2YWx1ZXMgZnJvbVxuXHQgKiB0aGUgY29tYmluZWQgbGF0ZXN0IHZhbHVlcyBpbnRvIGEgbmV3IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIHN1YnNjcmliaW5nIHRvXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQHN0YXRpYyB0cnVlXG5cdCAqIEBuYW1lIGNvbWJpbmVMYXRlc3Rcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvbWJpbmVMYXRlc3RTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvamVjdCA9IG51bGw7XG5cdCAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdKSkge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb2plY3QgPSBvYnNlcnZhYmxlcy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHRoZSBmaXJzdCBhbmQgb25seSBvdGhlciBhcmd1bWVudCBiZXNpZGVzIHRoZSByZXN1bHRTZWxlY3RvciBpcyBhbiBhcnJheVxuXHQgICAgLy8gYXNzdW1lIGl0J3MgYmVlbiBjYWxsZWQgd2l0aCBgY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIHByb2plY3QpYFxuXHQgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcblx0ICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLmNvbWJpbmVMYXRlc3RTdGF0aWMgPSBjb21iaW5lTGF0ZXN0U3RhdGljO1xuXHR2YXIgQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENvbWJpbmVMYXRlc3RPcGVyYXRvcihwcm9qZWN0KSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgIH1cblx0ICAgIENvbWJpbmVMYXRlc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb21iaW5lTGF0ZXN0T3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQ29tYmluZUxhdGVzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuXHQgICAgfVxuXHQgICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0ICAgICAgICB2YXIgdG9SZXNwb25kID0gdGhpcy50b1Jlc3BvbmQ7XG5cdCAgICAgICAgdG9SZXNwb25kLnB1c2godG9SZXNwb25kLmxlbmd0aCk7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUpO1xuXHQgICAgfTtcblx0ICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIG9ic2VydmFibGVzID0gdGhpcy5vYnNlcnZhYmxlcztcblx0ICAgICAgICB2YXIgbGVuID0gb2JzZXJ2YWJsZXMubGVuZ3RoO1xuXHQgICAgICAgIGlmIChsZW4gPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAodW51c2VkKSB7XG5cdCAgICAgICAgaWYgKCh0aGlzLmFjdGl2ZSAtPSAxKSA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMudmFsdWVzO1xuXHQgICAgICAgIHZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG5cdCAgICAgICAgdmFyIHRvUmVzcG9uZCA9IHRoaXMudG9SZXNwb25kO1xuXHQgICAgICAgIGlmICh0b1Jlc3BvbmQubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgZm91bmQgPSB0b1Jlc3BvbmQuaW5kZXhPZihvdXRlckluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKGZvdW5kICE9PSAtMSkge1xuXHQgICAgICAgICAgICAgICAgdG9SZXNwb25kLnNwbGljZShmb3VuZCwgMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRvUmVzcG9uZC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fdHJ5UHJvamVjdCh2YWx1ZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlcyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcm9qZWN0ID0gZnVuY3Rpb24gKHZhbHVlcykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIHZhbHVlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5Db21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lTGF0ZXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgU2NhbGFyT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzUpO1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNik7XG5cdHZhciBpc1NjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzcpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFycmF5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhcnJheVswXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBBcnJheU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFycmF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcblx0ICAgICAqIGltbWVkaWF0ZWx5IG9uZSBhZnRlciB0aGUgb3RoZXIsIGFuZCB0aGVuIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuXHQgICAgICogYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgd2l0aCB7QGxpbmsgY29uY2F0fS5cblx0ICAgICAqIEJ5IGRlZmF1bHQsIGl0IHVzZXMgYSBgbnVsbGAgU2NoZWR1bGVyLCB3aGljaCBtZWFucyB0aGUgYG5leHRgXG5cdCAgICAgKiBub3RpZmljYXRpb25zIGFyZSBzZW50IHN5bmNocm9ub3VzbHksIGFsdGhvdWdoIHdpdGggYSBkaWZmZXJlbnQgU2NoZWR1bGVyXG5cdCAgICAgKiBpdCBpcyBwb3NzaWJsZSB0byBkZXRlcm1pbmUgd2hlbiB0aG9zZSBub3RpZmljYXRpb25zIHdpbGwgYmUgZGVsaXZlcmVkLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgMTAsIDIwLCAzMCwgdGhlbiAnYScsICdiJywgJ2MnLCB0aGVuIHN0YXJ0IHRpY2tpbmcgZXZlcnkgc2Vjb25kLjwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5vZigxMCwgMjAsIDMwKTtcblx0ICAgICAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcblx0ICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb25jYXQobGV0dGVycykuY29uY2F0KGludGVydmFsKTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG5cdCAgICAgKiBAc2VlIHtAbGluayBuZXZlcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7Li4uVH0gdmFsdWVzIEFyZ3VtZW50cyB0aGF0IHJlcHJlc2VudCBgbmV4dGAgdmFsdWVzIHRvIGJlIGVtaXR0ZWQuXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbnMgb2YgdGhlIGBuZXh0YCBub3RpZmljYXRpb25zLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIG9mXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBBcnJheU9ic2VydmFibGUub2YgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGFycmF5ID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgYXJyYXlbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblx0ICAgICAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuID4gMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlbMF0sIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBBcnJheU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgYXJyYXkgPSBzdGF0ZS5hcnJheSwgaW5kZXggPSBzdGF0ZS5pbmRleCwgY291bnQgPSBzdGF0ZS5jb3VudCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaW5kZXhdKTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIEFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuXHQgICAgICAgIHZhciBjb3VudCA9IGFycmF5Lmxlbmd0aDtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5T2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgYXJyYXk6IGFycmF5LCBpbmRleDogaW5kZXgsIGNvdW50OiBjb3VudCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQgJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2ldKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBcnJheU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5BcnJheU9ic2VydmFibGUgPSBBcnJheU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgU2NhbGFyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2NhbGFyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBTY2FsYXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTY2FsYXJPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFNjYWxhck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgZG9uZSA9IHN0YXRlLmRvbmUsIHZhbHVlID0gc3RhdGUudmFsdWUsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChkb25lKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUuZG9uZSA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG5cdCAgICB9O1xuXHQgICAgU2NhbGFyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFNjYWxhck9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcblx0ICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2NhbGFyT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLlNjYWxhck9ic2VydmFibGUgPSBTY2FsYXJPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1TY2FsYXJPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBFbXB0eU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEVtcHR5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuXHQgICAgICogZW1pdHMgYSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuXHQgICAgICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cblx0ICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmVtcHR5KCkuc3RhcnRXaXRoKDcpO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gb25seSBvZGQgbnVtYmVycyB0byB0aGUgc2VxdWVuY2UgJ2EnLCAnYicsICdjJzwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuXHQgICAgICogICB4ICUgMiA9PT0gMSA/IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJykgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcblx0ICAgICAqICk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cblx0ICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuXHQgICAgICogQHNlZSB7QGxpbmsgb2Z9XG5cdCAgICAgKiBAc2VlIHtAbGluayB0aHJvd31cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbiBvZiB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG5cdCAgICAgKiBub3RpZmljYXRpb24uXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGVtcHR5XG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBFbXB0eU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG5cdCAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIEVtcHR5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShFbXB0eU9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkVtcHR5T2JzZXJ2YWJsZSA9IEVtcHR5T2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RW1wdHlPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gaXNTY2hlZHVsZXIodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc2NoZWR1bGUgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZXhwb3J0cy5pc1NjaGVkdWxlciA9IGlzU2NoZWR1bGVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc1NjaGVkdWxlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhPdXRlclN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBPdXRlclN1YnNjcmliZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBPdXRlclN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5PdXRlclN1YnNjcmliZXIgPSBPdXRlclN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU91dGVyU3Vic2NyaWJlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNQcm9taXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MCk7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MSk7XG5cdHZhciBJbm5lclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQyKTtcblx0dmFyICQkb2JzZXJ2YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRmdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuXHQgICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IElubmVyU3Vic2NyaWJlcl8xLklubmVyU3Vic2NyaWJlcihvdXRlclN1YnNjcmliZXIsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpO1xuXHQgICAgaWYgKGRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgaWYgKHJlc3VsdC5faXNTY2FsYXIpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHJlc3VsdCkpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGxlbiAmJiAhZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJlc3VsdFtpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UocmVzdWx0KSkge1xuXHQgICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBkZXN0aW5hdGlvbi5lcnJvcihlcnIpOyB9KVxuXHQgICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgICAgIC8vIEVzY2FwaW5nIHRoZSBQcm9taXNlIHRyYXA6IGdsb2JhbGx5IHRocm93IHVuaGFuZGxlZCBlcnJvcnNcblx0ICAgICAgICAgICAgcm9vdF8xLnJvb3Quc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJlc3VsdDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbSk7XG5cdCAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRbJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHZhciBvYnMgPSByZXN1bHRbJCRvYnNlcnZhYmxlXSgpO1xuXHQgICAgICAgIGlmICh0eXBlb2Ygb2JzLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcignaW52YWxpZCBvYnNlcnZhYmxlJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JzLnN1YnNjcmliZShuZXcgSW5uZXJTdWJzY3JpYmVyXzEuSW5uZXJTdWJzY3JpYmVyKG91dGVyU3Vic2NyaWJlciwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBUeXBlRXJyb3IoJ3Vua25vd24gdHlwZSByZXR1cm5lZCcpKTtcblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLnN1YnNjcmliZVRvUmVzdWx0ID0gc3Vic2NyaWJlVG9SZXN1bHQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvUmVzdWx0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRleHBvcnRzLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNQcm9taXNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgU3ltYm9sID0gcm9vdF8xLnJvb3QuU3ltYm9sO1xuXHRpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgaWYgKFN5bWJvbC5pdGVyYXRvcikge1xuXHQgICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9IFN5bWJvbC5pdGVyYXRvcjtcblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gU3ltYm9sLmZvcignaXRlcmF0b3InKTtcblx0ICAgIH1cblx0fVxuXHRlbHNlIHtcblx0ICAgIGlmIChyb290XzEucm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290XzEucm9vdC5TZXQoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gQnVnIGZvciBtb3ppbGxhIHZlcnNpb25cblx0ICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSAnQEBpdGVyYXRvcic7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChyb290XzEucm9vdC5NYXApIHtcblx0ICAgICAgICAvLyBlczYtc2hpbSBzcGVjaWZpYyBsb2dpY1xuXHQgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZSk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgICAgICBpZiAoa2V5ICE9PSAnZW50cmllcycgJiYga2V5ICE9PSAnc2l6ZScgJiYgcm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZVtrZXldID09PSByb290XzEucm9vdC5NYXAucHJvdG90eXBlWydlbnRyaWVzJ10pIHtcblx0ICAgICAgICAgICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9IGtleTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gJ0BAaXRlcmF0b3InO1xuXHQgICAgfVxuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZXJhdG9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBJbm5lclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKElubmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuXHQgICAgICAgIHRoaXMub3V0ZXJJbmRleCA9IG91dGVySW5kZXg7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBJbm5lclN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5TmV4dCh0aGlzLm91dGVyVmFsdWUsIHZhbHVlLCB0aGlzLm91dGVySW5kZXgsIHRoaXMuaW5kZXgrKywgdGhpcyk7XG5cdCAgICB9O1xuXHQgICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlFcnJvcihlcnJvciwgdGhpcyk7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuSW5uZXJTdWJzY3JpYmVyID0gSW5uZXJTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb25jYXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuY29uY2F0ID0gY29uY2F0XzEuY29uY2F0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgY29uY2F0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NSk7XG5cdGV4cG9ydHMuY29uY2F0ID0gY29uY2F0XzEuY29uY2F0U3RhdGljO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgbWVyZ2VBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ2KTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggc2VxdWVudGlhbGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuXHQgKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIGFmdGVyIHRoZSBjdXJyZW50IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db25jYXRlbmF0ZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnlcblx0ICogc2VxdWVudGlhbGx5IGVtaXR0aW5nIHRoZWlyIHZhbHVlcywgb25lIE9ic2VydmFibGUgYWZ0ZXIgdGhlIG90aGVyLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEpvaW5zIHRoaXMgT2JzZXJ2YWJsZSB3aXRoIG11bHRpcGxlIG90aGVyIE9ic2VydmFibGVzIGJ5IHN1YnNjcmliaW5nIHRvIHRoZW1cblx0ICogb25lIGF0IGEgdGltZSwgc3RhcnRpbmcgd2l0aCB0aGUgc291cmNlLCBhbmQgbWVyZ2luZyB0aGVpciByZXN1bHRzIGludG8gdGhlXG5cdCAqIG91dHB1dCBPYnNlcnZhYmxlLiBXaWxsIHdhaXQgZm9yIGVhY2ggT2JzZXJ2YWJsZSB0byBjb21wbGV0ZSBiZWZvcmUgbW92aW5nXG5cdCAqIG9uIHRvIHRoZSBuZXh0LlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSBhIHRpbWVyIGNvdW50aW5nIGZyb20gMCB0byAzIHdpdGggYSBzeW5jaHJvbm91cyBzZXF1ZW5jZSBmcm9tIDEgdG8gMTA8L2NhcHRpb24+XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KTtcblx0ICogdmFyIHNlcXVlbmNlID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG5cdCAqIHZhciByZXN1bHQgPSB0aW1lci5jb25jYXQoc2VxdWVuY2UpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSAzIE9ic2VydmFibGVzPC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcblx0ICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcblx0ICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcblx0ICogdmFyIHJlc3VsdCA9IHRpbWVyMS5jb25jYXQodGltZXIyLCB0aW1lcjMpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb3RoZXIgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb25jYXRlbmF0ZSBhZnRlciB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBBbiBvcHRpb25hbCBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgZWFjaFxuXHQgKiBPYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQWxsIHZhbHVlcyBvZiBlYWNoIHBhc3NlZCBPYnNlcnZhYmxlIG1lcmdlZCBpbnRvIGFcblx0ICogc2luZ2xlIE9ic2VydmFibGUsIGluIG9yZGVyLCBpbiBzZXJpYWwgZmFzaGlvbi5cblx0ICogQG1ldGhvZCBjb25jYXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvbmNhdCgpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBjb25jYXRTdGF0aWMuYXBwbHkodm9pZCAwLCBbdGhpc10uY29uY2F0KG9ic2VydmFibGVzKSk7XG5cdH1cblx0ZXhwb3J0cy5jb25jYXQgPSBjb25jYXQ7XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIHNlcXVlbnRpYWxseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcblx0ICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSBhZnRlciB0aGUgY3VycmVudCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29uY2F0ZW5hdGVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5XG5cdCAqIHNlcXVlbnRpYWxseSBlbWl0dGluZyB0aGVpciB2YWx1ZXMsIG9uZSBPYnNlcnZhYmxlIGFmdGVyIHRoZSBvdGhlci48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBKb2lucyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0b2dldGhlciBieSBzdWJzY3JpYmluZyB0byB0aGVtIG9uZSBhdCBhIHRpbWUgYW5kXG5cdCAqIG1lcmdpbmcgdGhlaXIgcmVzdWx0cyBpbnRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gV2lsbCB3YWl0IGZvciBlYWNoXG5cdCAqIE9ic2VydmFibGUgdG8gY29tcGxldGUgYmVmb3JlIG1vdmluZyBvbiB0byB0aGUgbmV4dC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q29uY2F0ZW5hdGUgYSB0aW1lciBjb3VudGluZyBmcm9tIDAgdG8gMyB3aXRoIGEgc3luY2hyb25vdXMgc2VxdWVuY2UgZnJvbSAxIHRvIDEwPC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCk7XG5cdCAqIHZhciBzZXF1ZW5jZSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTApO1xuXHQgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5jb25jYXQodGltZXIsIHNlcXVlbmNlKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q29uY2F0ZW5hdGUgMyBPYnNlcnZhYmxlczwvY2FwdGlvbj5cblx0ICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG5cdCAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG5cdCAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG5cdCAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lcjEsIHRpbWVyMiwgdGltZXIzKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MSBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIHdpdGggb3RoZXJzLlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIHdpdGggb3RoZXJzLlxuXHQgKiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gQW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHNjaGVkdWxlIGVhY2hcblx0ICogT2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gb24uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFsbCB2YWx1ZXMgb2YgZWFjaCBwYXNzZWQgT2JzZXJ2YWJsZSBtZXJnZWQgaW50byBhXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCBpbiBvcmRlciwgaW4gc2VyaWFsIGZhc2hpb24uXG5cdCAqIEBzdGF0aWMgdHJ1ZVxuXHQgKiBAbmFtZSBjb25jYXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvbmNhdFN0YXRpYygpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuXHQgICAgdmFyIGFyZ3MgPSBvYnNlcnZhYmxlcztcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKGFyZ3Nbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0pKSB7XG5cdCAgICAgICAgc2NoZWR1bGVyID0gYXJncy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzLCBzY2hlZHVsZXIpLmxpZnQobmV3IG1lcmdlQWxsXzEuTWVyZ2VBbGxPcGVyYXRvcigxKSk7XG5cdH1cblx0ZXhwb3J0cy5jb25jYXRTdGF0aWMgPSBjb25jYXRTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIHdoaWNoXG5cdCAqIGNvbmN1cnJlbnRseSBkZWxpdmVycyBhbGwgdmFsdWVzIHRoYXQgYXJlIGVtaXR0ZWQgb24gdGhlIGlubmVyIE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2VBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBtZXJnZUFsbGAgc3Vic2NyaWJlcyB0byBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgT2JzZXJ2YWJsZXMsIGFsc28ga25vd24gYXNcblx0ICogYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZS4gRWFjaCB0aW1lIGl0IG9ic2VydmVzIG9uZSBvZiB0aGVzZSBlbWl0dGVkIGlubmVyXG5cdCAqIE9ic2VydmFibGVzLCBpdCBzdWJzY3JpYmVzIHRvIHRoYXQgYW5kIGRlbGl2ZXJzIGFsbCB0aGUgdmFsdWVzIGZyb20gdGhlXG5cdCAqIGlubmVyIE9ic2VydmFibGUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgb25seVxuXHQgKiBjb21wbGV0ZXMgb25jZSBhbGwgaW5uZXIgT2JzZXJ2YWJsZXMgaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnlcblx0ICogYSBpbm5lciBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPlNwYXduIGEgbmV3IGludGVydmFsIE9ic2VydmFibGUgZm9yIGVhY2ggY2xpY2sgZXZlbnQsIGFuZCBibGVuZCB0aGVpciBvdXRwdXRzIGFzIG9uZSBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG5cdCAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIubWVyZ2VBbGwoKTtcblx0ICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50IGZyb20gMCB0byA5IGV2ZXJ5IHNlY29uZCBmb3IgZWFjaCBjbGljaywgYnV0IG9ubHkgYWxsb3cgMiBjb25jdXJyZW50IHRpbWVyczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCkpO1xuXHQgKiB2YXIgZmlyc3RPcmRlciA9IGhpZ2hlck9yZGVyLm1lcmdlQWxsKDIpO1xuXHQgKiBmaXJzdE9yZGVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0fVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayB6aXBBbGx9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlubmVyXG5cdCAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdmFsdWVzIGNvbWluZyBmcm9tIGFsbCB0aGVcblx0ICogaW5uZXIgT2JzZXJ2YWJsZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgbWVyZ2VBbGxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlQWxsKGNvbmN1cnJlbnQpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSk7XG5cdH1cblx0ZXhwb3J0cy5tZXJnZUFsbCA9IG1lcmdlQWxsO1xuXHR2YXIgTWVyZ2VBbGxPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNZXJnZUFsbE9wZXJhdG9yKGNvbmN1cnJlbnQpIHtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgfVxuXHQgICAgTWVyZ2VBbGxPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNZXJnZUFsbFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMuY29uY3VycmVudCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZXJnZUFsbE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk1lcmdlQWxsT3BlcmF0b3IgPSBNZXJnZUFsbE9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNZXJnZUFsbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1lcmdlQWxsU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlQWxsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29uY3VycmVudCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICB9XG5cdCAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKG9ic2VydmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlQWxsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlLS07XG5cdCAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZXJnZUFsbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuTWVyZ2VBbGxTdWJzY3JpYmVyID0gTWVyZ2VBbGxTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGRlZmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmRlZmVyID0gZGVmZXJfMS5kZWZlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRGVmZXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0OSk7XG5cdGV4cG9ydHMuZGVmZXIgPSBEZWZlck9ic2VydmFibGVfMS5EZWZlck9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZWZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRGVmZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhEZWZlck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVGYWN0b3J5ID0gb2JzZXJ2YWJsZUZhY3Rvcnk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0LCBvbiBzdWJzY3JpYmUsIGNhbGxzIGFuIE9ic2VydmFibGUgZmFjdG9yeSB0b1xuXHQgICAgICogbWFrZSBhbiBPYnNlcnZhYmxlIGZvciBlYWNoIG5ldyBPYnNlcnZlci5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q3JlYXRlcyB0aGUgT2JzZXJ2YWJsZSBsYXppbHksIHRoYXQgaXMsIG9ubHkgd2hlbiBpdFxuXHQgICAgICogaXMgc3Vic2NyaWJlZC5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGBkZWZlcmAgYWxsb3dzIHlvdSB0byBjcmVhdGUgdGhlIE9ic2VydmFibGUgb25seSB3aGVuIHRoZSBPYnNlcnZlclxuXHQgICAgICogc3Vic2NyaWJlcywgYW5kIGNyZWF0ZSBhIGZyZXNoIE9ic2VydmFibGUgZm9yIGVhY2ggT2JzZXJ2ZXIuIEl0IHdhaXRzIHVudGlsXG5cdCAgICAgKiBhbiBPYnNlcnZlciBzdWJzY3JpYmVzIHRvIGl0LCBhbmQgdGhlbiBpdCBnZW5lcmF0ZXMgYW4gT2JzZXJ2YWJsZSxcblx0ICAgICAqIHR5cGljYWxseSB3aXRoIGFuIE9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi4gSXQgZG9lcyB0aGlzIGFmcmVzaCBmb3IgZWFjaFxuXHQgICAgICogc3Vic2NyaWJlciwgc28gYWx0aG91Z2ggZWFjaCBzdWJzY3JpYmVyIG1heSB0aGluayBpdCBpcyBzdWJzY3JpYmluZyB0byB0aGVcblx0ICAgICAqIHNhbWUgT2JzZXJ2YWJsZSwgaW4gZmFjdCBlYWNoIHN1YnNjcmliZXIgZ2V0cyBpdHMgb3duIGluZGl2aWR1YWxcblx0ICAgICAqIE9ic2VydmFibGUuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHRvIGVpdGhlciBhbiBPYnNlcnZhYmxlIG9mIGNsaWNrcyBvciBhbiBPYnNlcnZhYmxlIG9mIGludGVydmFsLCBhdCByYW5kb208L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgY2xpY2tzT3JJbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICogICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuXHQgICAgICogICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAgICAgKiAgIH0gZWxzZSB7XG5cdCAgICAgKiAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiAgIH1cblx0ICAgICAqIH0pO1xuXHQgICAgICogY2xpY2tzT3JJbnRlcnZhbC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBvYnNlcnZhYmxlRmFjdG9yeSBUaGUgT2JzZXJ2YWJsZVxuXHQgICAgICogZmFjdG9yeSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggT2JzZXJ2ZXIgdGhhdCBzdWJzY3JpYmVzIHRvIHRoZSBvdXRwdXRcblx0ICAgICAqIE9ic2VydmFibGUuIE1heSBhbHNvIHJldHVybiBhIFByb21pc2UsIHdoaWNoIHdpbGwgYmUgY29udmVydGVkIG9uIHRoZSBmbHlcblx0ICAgICAqIHRvIGFuIE9ic2VydmFibGUuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHdob3NlIE9ic2VydmVycycgc3Vic2NyaXB0aW9ucyB0cmlnZ2VyXG5cdCAgICAgKiBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGRlZmVyXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBEZWZlck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKG9ic2VydmFibGVGYWN0b3J5KSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpO1xuXHQgICAgfTtcblx0ICAgIERlZmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEZWZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlRmFjdG9yeSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlZmVyT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkRlZmVyT2JzZXJ2YWJsZSA9IERlZmVyT2JzZXJ2YWJsZTtcblx0dmFyIERlZmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVmZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmYWN0b3J5KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG5cdCAgICAgICAgdGhpcy50cnlEZWZlcigpO1xuXHQgICAgfVxuXHQgICAgRGVmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEZWZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9jYWxsRmFjdG9yeSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NhbGxGYWN0b3J5ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmZhY3RvcnkoKTtcblx0ICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgcmVzdWx0KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWZlclN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGVtcHR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmVtcHR5ID0gZW1wdHlfMS5lbXB0eTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1wdHkuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNik7XG5cdGV4cG9ydHMuZW1wdHkgPSBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1lbXB0eS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZvcmtKb2luXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZvcmtKb2luID0gZm9ya0pvaW5fMS5mb3JrSm9pbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ya0pvaW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRm9ya0pvaW5PYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1NCk7XG5cdGV4cG9ydHMuZm9ya0pvaW4gPSBGb3JrSm9pbk9ic2VydmFibGVfMS5Gb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mb3JrSm9pbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzYpO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEZvcmtKb2luT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRm9ya0pvaW5PYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZhYmxlKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSBzb3VyY2VzXG5cdCAgICAgKiBAcmV0dXJuIHthbnl9XG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGZvcmtKb2luXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBGb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzb3VyY2VzID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgc291cmNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHNvdXJjZXMgPT09IG51bGwgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc291cmNlc1tzb3VyY2VzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdFNlbGVjdG9yID0gc291cmNlcy5wb3AoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGFuZCBvbmx5IG90aGVyIGFyZ3VtZW50IGJlc2lkZXMgdGhlIHJlc3VsdFNlbGVjdG9yIGlzIGFuIGFycmF5XG5cdCAgICAgICAgLy8gYXNzdW1lIGl0J3MgYmVlbiBjYWxsZWQgd2l0aCBgZm9ya0pvaW4oW29iczEsIG9iczIsIG9iczNdLCByZXN1bHRTZWxlY3RvcilgXG5cdCAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KHNvdXJjZXNbMF0pKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pbk9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpO1xuXHQgICAgfTtcblx0ICAgIEZvcmtKb2luT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zb3VyY2VzLCB0aGlzLnJlc3VsdFNlbGVjdG9yKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRm9ya0pvaW5PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuRm9ya0pvaW5PYnNlcnZhYmxlID0gRm9ya0pvaW5PYnNlcnZhYmxlO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGb3JrSm9pblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZvcmtKb2luU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZvcmtKb2luU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuXHQgICAgICAgIHRoaXMuaGF2ZVZhbHVlcyA9IDA7XG5cdCAgICAgICAgdmFyIGxlbiA9IHNvdXJjZXMubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSBsZW47XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuXHQgICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHNvdXJjZSwgbnVsbCwgaSk7XG5cdCAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24ub3V0ZXJJbmRleCA9IGk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgaW5uZXJTdWIuX2hhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdGhpcy5oYXZlVmFsdWVzKys7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGhhdmVWYWx1ZXMgPSBfYS5oYXZlVmFsdWVzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCB2YWx1ZXMgPSBfYS52YWx1ZXM7XG5cdCAgICAgICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmNvbXBsZXRlZCsrO1xuXHQgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAhPT0gbGVuKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGhhdmVWYWx1ZXMgPT09IGxlbikge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHRTZWxlY3RvciA/IHJlc3VsdFNlbGVjdG9yLmFwcGx5KHRoaXMsIHZhbHVlcykgOiB2YWx1ZXM7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGb3JrSm9pblN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvcmtKb2luT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZyb21fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbSA9IGZyb21fMS5mcm9tO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEZyb21PYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Nyk7XG5cdGV4cG9ydHMuZnJvbSA9IEZyb21PYnNlcnZhYmxlXzEuRnJvbU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNGdW5jdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdHZhciBpc1Byb21pc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQwKTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdHZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdHZhciBJdGVyYXRvck9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU4KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTkpO1xuXHR2YXIgaXRlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQxKTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdHZhciAkJG9ic2VydmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0dmFyIGlzQXJyYXlMaWtlID0gKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBGcm9tT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRnJvbU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIG51bGwpO1xuXHQgICAgICAgIHRoaXMuaXNoID0gaXNoO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBcnJheSwgYW4gYXJyYXktbGlrZSBvYmplY3QsIGEgUHJvbWlzZSwgYW5cblx0ICAgICAqIGl0ZXJhYmxlIG9iamVjdCwgb3IgYW4gT2JzZXJ2YWJsZS1saWtlIG9iamVjdC5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29udmVydHMgYWxtb3N0IGFueXRoaW5nIHRvIGFuIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBDb252ZXJ0IHZhcmlvdXMgb3RoZXIgb2JqZWN0cyBhbmQgZGF0YSB0eXBlcyBpbnRvIE9ic2VydmFibGVzLiBgZnJvbWBcblx0ICAgICAqIGNvbnZlcnRzIGEgUHJvbWlzZSBvciBhbiBhcnJheS1saWtlIG9yIGFuXG5cdCAgICAgKiBbaXRlcmFibGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMjaXRlcmFibGUpXG5cdCAgICAgKiBvYmplY3QgaW50byBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGluIHRoYXQgcHJvbWlzZSBvciBhcnJheSBvclxuXHQgICAgICogaXRlcmFibGUuIEEgU3RyaW5nLCBpbiB0aGlzIGNvbnRleHQsIGlzIHRyZWF0ZWQgYXMgYW4gYXJyYXkgb2YgY2hhcmFjdGVycy5cblx0ICAgICAqIE9ic2VydmFibGUtbGlrZSBvYmplY3RzIChjb250YWlucyBhIGZ1bmN0aW9uIG5hbWVkIHdpdGggdGhlIEVTMjAxNSBTeW1ib2xcblx0ICAgICAqIGZvciBPYnNlcnZhYmxlKSBjYW4gYWxzbyBiZSBjb252ZXJ0ZWQgdGhyb3VnaCB0aGlzIG9wZXJhdG9yLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbnZlcnRzIGFuIGFycmF5IHRvIGFuIE9ic2VydmFibGU8L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgYXJyYXkgPSBbMTAsIDIwLCAzMF07XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5mcm9tKGFycmF5KTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q29udmVydCBhbiBpbmZpbml0ZSBpdGVyYWJsZSAoZnJvbSBhIGdlbmVyYXRvcikgdG8gYW4gT2JzZXJ2YWJsZTwvY2FwdGlvbj5cblx0ICAgICAqIGZ1bmN0aW9uKiBnZW5lcmF0ZURvdWJsZXMoc2VlZCkge1xuXHQgICAgICogICB2YXIgaSA9IHNlZWQ7XG5cdCAgICAgKiAgIHdoaWxlICh0cnVlKSB7XG5cdCAgICAgKiAgICAgeWllbGQgaTtcblx0ICAgICAqICAgICBpID0gMiAqIGk7IC8vIGRvdWJsZSBpdFxuXHQgICAgICogICB9XG5cdCAgICAgKiB9XG5cdCAgICAgKlxuXHQgICAgICogdmFyIGl0ZXJhdG9yID0gZ2VuZXJhdGVEb3VibGVzKDMpO1xuXHQgICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUuZnJvbShpdGVyYXRvcikudGFrZSgxMCk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudH1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudFBhdHRlcm59XG5cdCAgICAgKiBAc2VlIHtAbGluayBmcm9tUHJvbWlzZX1cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmFibGVJbnB1dDxUPn0gaXNoIEEgc3Vic2NyaWJhYmxlIG9iamVjdCwgYSBQcm9taXNlLCBhblxuXHQgICAgICogT2JzZXJ2YWJsZS1saWtlLCBhbiBBcnJheSwgYW4gaXRlcmFibGUgb3IgYW4gYXJyYXktbGlrZSBvYmplY3QgdG8gYmVcblx0ICAgICAqIGNvbnZlcnRlZC5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oeDogYW55LCBpOiBudW1iZXIpOiBUfSBbbWFwRm5dIEEgXCJtYXBcIiBmdW5jdGlvbiB0byBjYWxsXG5cdCAgICAgKiB3aGVuIGNvbnZlcnRpbmcgYXJyYXktbGlrZSBvYmplY3RzLCB3aGVyZSBgeGAgaXMgYSB2YWx1ZSBmcm9tIHRoZVxuXHQgICAgICogYXJyYXktbGlrZSBhbmQgYGlgIGlzIHRoZSBpbmRleCBvZiB0aGF0IHZhbHVlIGluIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gVGhlIGNvbnRleHQgb2JqZWN0IHRvIHVzZSB3aGVuIGNhbGxpbmcgdGhlIGBtYXBGbmAsXG5cdCAgICAgKiBpZiBwcm92aWRlZC5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuXHQgICAgICogZW1pc3Npb25zIG9mIHZhbHVlcy5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IFRoZSBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmUgb3JpZ2luYWxseSBmcm9tIHRoZVxuXHQgICAgICogaW5wdXQgb2JqZWN0IHRoYXQgd2FzIGNvbnZlcnRlZC5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgZnJvbVxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRnJvbU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGlzaCwgbWFwRm5PclNjaGVkdWxlciwgdGhpc0FyZywgbGFzdFNjaGVkdWxlcikge1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuXHQgICAgICAgIHZhciBtYXBGbiA9IG51bGw7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKG1hcEZuT3JTY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlciA9IGxhc3RTY2hlZHVsZXIgfHwgbnVsbDtcblx0ICAgICAgICAgICAgbWFwRm4gPSBtYXBGbk9yU2NoZWR1bGVyO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gbWFwRm5PclNjaGVkdWxlcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzaCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgaXNoWyQkb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChpc2ggaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSAmJiAhc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzaDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlfMS5pc0FycmF5KGlzaCkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UoaXNoKSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXNoW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGlzaCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlXzEuSXRlcmF0b3JPYnNlcnZhYmxlKGlzaCwgbnVsbCwgbnVsbCwgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5TGlrZShpc2gpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlrZU9ic2VydmFibGVfMS5BcnJheUxpa2VPYnNlcnZhYmxlKGlzaCwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigoaXNoICE9PSBudWxsICYmIHR5cGVvZiBpc2ggfHwgaXNoKSArICcgaXMgbm90IG9ic2VydmFibGUnKTtcblx0ICAgIH07XG5cdCAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGlzaCA9IHRoaXMuaXNoO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzaFskJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzaFskJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKG5ldyBvYnNlcnZlT25fMS5PYnNlcnZlT25TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgMCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRnJvbU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Gcm9tT2JzZXJ2YWJsZSA9IEZyb21PYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Gcm9tT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGlzT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgaXNGdW5jdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdHZhciBpdGVyYXRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDEpO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBJdGVyYXRvck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEl0ZXJhdG9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEl0ZXJhdG9yT2JzZXJ2YWJsZShpdGVyYXRvciwgcHJvamVjdCwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgaWYgKGl0ZXJhdG9yID09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpdGVyYXRvciBjYW5ub3QgYmUgbnVsbC4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0XzEuaXNPYmplY3QocHJvamVjdCkpIHtcblx0ICAgICAgICAgICAgdGhpcy50aGlzQXJnID0gcHJvamVjdDtcblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSB0aGlzQXJnO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihwcm9qZWN0KSkge1xuXHQgICAgICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAocHJvamVjdCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2hlbiBwcm92aWRlZCwgYHByb2plY3RgIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5pdGVyYXRvciA9IGdldEl0ZXJhdG9yKGl0ZXJhdG9yKTtcblx0ICAgIH1cblx0ICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXRlcmF0b3IsIHByb2plY3QsIHRoaXNBcmcsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlKGl0ZXJhdG9yLCBwcm9qZWN0LCB0aGlzQXJnLCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IHN0YXRlLmluZGV4LCBoYXNFcnJvciA9IHN0YXRlLmhhc0Vycm9yLCB0aGlzQXJnID0gc3RhdGUudGhpc0FyZywgcHJvamVjdCA9IHN0YXRlLnByb2plY3QsIGl0ZXJhdG9yID0gc3RhdGUuaXRlcmF0b3IsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChoYXNFcnJvcikge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHN0YXRlLmVycm9yKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHByb2plY3QpIHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChwcm9qZWN0KS5jYWxsKHRoaXNBcmcsIHJlc3VsdC52YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZTtcblx0ICAgICAgICAgICAgICAgIHN0YXRlLmhhc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBJdGVyYXRvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgaXRlcmF0b3IgPSBfYS5pdGVyYXRvciwgcHJvamVjdCA9IF9hLnByb2plY3QsIHRoaXNBcmcgPSBfYS50aGlzQXJnLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCB0aGlzQXJnOiB0aGlzQXJnLCBwcm9qZWN0OiBwcm9qZWN0LCBpdGVyYXRvcjogaXRlcmF0b3IsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkbyB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2gocHJvamVjdCkuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIGluZGV4KyspO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gSXRlcmF0b3JPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuSXRlcmF0b3JPYnNlcnZhYmxlID0gSXRlcmF0b3JPYnNlcnZhYmxlO1xuXHR2YXIgU3RyaW5nSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Ioc3RyLCBpZHgsIGxlbikge1xuXHQgICAgICAgIGlmIChpZHggPT09IHZvaWQgMCkgeyBpZHggPSAwOyB9XG5cdCAgICAgICAgaWYgKGxlbiA9PT0gdm9pZCAwKSB7IGxlbiA9IHN0ci5sZW5ndGg7IH1cblx0ICAgICAgICB0aGlzLnN0ciA9IHN0cjtcblx0ICAgICAgICB0aGlzLmlkeCA9IGlkeDtcblx0ICAgICAgICB0aGlzLmxlbiA9IGxlbjtcblx0ICAgIH1cblx0ICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHRoaXMpOyB9O1xuXHQgICAgU3RyaW5nSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG5cdCAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdHIuY2hhckF0KHRoaXMuaWR4KyspXG5cdCAgICAgICAgfSA6IHtcblx0ICAgICAgICAgICAgZG9uZTogdHJ1ZSxcblx0ICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuXHQgICAgICAgIH07XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN0cmluZ0l0ZXJhdG9yO1xuXHR9KCkpO1xuXHR2YXIgQXJyYXlJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBBcnJheUl0ZXJhdG9yKGFyciwgaWR4LCBsZW4pIHtcblx0ICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuXHQgICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSB0b0xlbmd0aChhcnIpOyB9XG5cdCAgICAgICAgdGhpcy5hcnIgPSBhcnI7XG5cdCAgICAgICAgdGhpcy5pZHggPSBpZHg7XG5cdCAgICAgICAgdGhpcy5sZW4gPSBsZW47XG5cdCAgICB9XG5cdCAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcblx0ICAgIEFycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG5cdCAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTogdGhpcy5hcnJbdGhpcy5pZHgrK11cblx0ICAgICAgICB9IDoge1xuXHQgICAgICAgICAgICBkb25lOiB0cnVlLFxuXHQgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG5cdCAgICAgICAgfTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXJyYXlJdGVyYXRvcjtcblx0fSgpKTtcblx0ZnVuY3Rpb24gZ2V0SXRlcmF0b3Iob2JqKSB7XG5cdCAgICB2YXIgaSA9IG9ialtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdO1xuXHQgICAgaWYgKCFpICYmIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdJdGVyYXRvcihvYmopO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpICYmIG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcihvYmopO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9ialtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdKCk7XG5cdH1cblx0dmFyIG1heFNhZmVJbnRlZ2VyID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblx0ZnVuY3Rpb24gdG9MZW5ndGgobykge1xuXHQgICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcblx0ICAgIGlmIChpc05hTihsZW4pKSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICB9XG5cdCAgICBpZiAobGVuID09PSAwIHx8ICFudW1iZXJJc0Zpbml0ZShsZW4pKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlbjtcblx0ICAgIH1cblx0ICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG5cdCAgICBpZiAobGVuIDw9IDApIHtcblx0ICAgICAgICByZXR1cm4gMDtcblx0ICAgIH1cblx0ICAgIGlmIChsZW4gPiBtYXhTYWZlSW50ZWdlcikge1xuXHQgICAgICAgIHJldHVybiBtYXhTYWZlSW50ZWdlcjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBsZW47XG5cdH1cblx0ZnVuY3Rpb24gbnVtYmVySXNGaW5pdGUodmFsdWUpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHJvb3RfMS5yb290LmlzRmluaXRlKHZhbHVlKTtcblx0fVxuXHRmdW5jdGlvbiBzaWduKHZhbHVlKSB7XG5cdCAgICB2YXIgdmFsdWVBc051bWJlciA9ICt2YWx1ZTtcblx0ICAgIGlmICh2YWx1ZUFzTnVtYmVyID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNOYU4odmFsdWVBc051bWJlcikpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWVBc051bWJlcjtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyIDwgMCA/IC0xIDogMTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1JdGVyYXRvck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXJyYXlMaWtlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hcnJheUxpa2UgPSBhcnJheUxpa2U7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKCFtYXBGbiAmJiAhc2NoZWR1bGVyICYmIGFycmF5TGlrZS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlID0gYXJyYXlMaWtlWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobWFwRm4pIHtcblx0ICAgICAgICAgICAgdGhpcy5tYXBGbiA9IG1hcEZuLmJpbmQodGhpc0FyZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG5cdCAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChsZW5ndGggPT09IDEgJiYgIW1hcEZuKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgYXJyYXlMaWtlID0gc3RhdGUuYXJyYXlMaWtlLCBpbmRleCA9IHN0YXRlLmluZGV4LCBsZW5ndGggPSBzdGF0ZS5sZW5ndGgsIG1hcEZuID0gc3RhdGUubWFwRm4sIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGluZGV4ID49IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2luZGV4XSwgaW5kZXgpIDogYXJyYXlMaWtlW2luZGV4XTtcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBBcnJheUxpa2VPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGFycmF5TGlrZSA9IF9hLmFycmF5TGlrZSwgbWFwRm4gPSBfYS5tYXBGbiwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShBcnJheUxpa2VPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG5cdCAgICAgICAgICAgICAgICBhcnJheUxpa2U6IGFycmF5TGlrZSwgaW5kZXg6IGluZGV4LCBsZW5ndGg6IGxlbmd0aCwgbWFwRm46IG1hcEZuLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2ldLCBpKSA6IGFycmF5TGlrZVtpXTtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEFycmF5TGlrZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5BcnJheUxpa2VPYnNlcnZhYmxlID0gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlMaWtlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE5vdGlmaWNhdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjEpO1xuXHQvKipcblx0ICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuXHQgKlxuXHQgKiBAcGFyYW0gc2NoZWR1bGVyXG5cdCAqIEBwYXJhbSBkZWxheVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCBvYnNlcnZlT25cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG9ic2VydmVPbihzY2hlZHVsZXIsIGRlbGF5KSB7XG5cdCAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpKTtcblx0fVxuXHRleHBvcnRzLm9ic2VydmVPbiA9IG9ic2VydmVPbjtcblx0dmFyIE9ic2VydmVPbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICB9XG5cdCAgICBPYnNlcnZlT25PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gT2JzZXJ2ZU9uT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuT2JzZXJ2ZU9uT3BlcmF0b3IgPSBPYnNlcnZlT25PcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoT2JzZXJ2ZU9uU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgfVxuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gYXJnLm5vdGlmaWNhdGlvbiwgZGVzdGluYXRpb24gPSBhcmcuZGVzdGluYXRpb247XG5cdCAgICAgICAgbm90aWZpY2F0aW9uLm9ic2VydmUoZGVzdGluYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTWVzc2FnZSA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcblx0ICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShPYnNlcnZlT25TdWJzY3JpYmVyLmRpc3BhdGNoLCB0aGlzLmRlbGF5LCBuZXcgT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIHRoaXMuZGVzdGluYXRpb24pKSk7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZXJyKSk7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gT2JzZXJ2ZU9uU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLk9ic2VydmVPblN1YnNjcmliZXIgPSBPYnNlcnZlT25TdWJzY3JpYmVyO1xuXHR2YXIgT2JzZXJ2ZU9uTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBPYnNlcnZlT25NZXNzYWdlKG5vdGlmaWNhdGlvbiwgZGVzdGluYXRpb24pIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICB9XG5cdCAgICByZXR1cm4gT2JzZXJ2ZU9uTWVzc2FnZTtcblx0fSgpKTtcblx0ZXhwb3J0cy5PYnNlcnZlT25NZXNzYWdlID0gT2JzZXJ2ZU9uTWVzc2FnZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2ZU9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQvKipcblx0ICogUmVwcmVzZW50cyBhIHB1c2gtYmFzZWQgZXZlbnQgb3IgdmFsdWUgdGhhdCBhbiB7QGxpbmsgT2JzZXJ2YWJsZX0gY2FuIGVtaXQuXG5cdCAqIFRoaXMgY2xhc3MgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igb3BlcmF0b3JzIHRoYXQgbWFuYWdlIG5vdGlmaWNhdGlvbnMsXG5cdCAqIGxpa2Uge0BsaW5rIG1hdGVyaWFsaXplfSwge0BsaW5rIGRlbWF0ZXJpYWxpemV9LCB7QGxpbmsgb2JzZXJ2ZU9ufSwgYW5kXG5cdCAqIG90aGVycy4gQmVzaWRlcyB3cmFwcGluZyB0aGUgYWN0dWFsIGRlbGl2ZXJlZCB2YWx1ZSwgaXQgYWxzbyBhbm5vdGF0ZXMgaXRcblx0ICogd2l0aCBtZXRhZGF0YSBvZiwgZm9yIGluc3RhbmNlLCB3aGF0IHR5cGUgb2YgcHVzaCBtZXNzYWdlIGl0IGlzIChgbmV4dGAsXG5cdCAqIGBlcnJvcmAsIG9yIGBjb21wbGV0ZWApLlxuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXRlcmlhbGl6ZX1cblx0ICogQHNlZSB7QGxpbmsgZGVtYXRlcmlhbGl6ZX1cblx0ICogQHNlZSB7QGxpbmsgb2JzZXJ2ZU9ufVxuXHQgKlxuXHQgKiBAY2xhc3MgTm90aWZpY2F0aW9uPFQ+XG5cdCAqL1xuXHR2YXIgTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbihraW5kLCB2YWx1ZSwgZXhjZXB0aW9uKSB7XG5cdCAgICAgICAgdGhpcy5raW5kID0ga2luZDtcblx0ICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgdGhpcy5leGNlcHRpb24gPSBleGNlcHRpb247XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09ICdOJztcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogRGVsaXZlcnMgdG8gdGhlIGdpdmVuIGBvYnNlcnZlcmAgdGhlIHZhbHVlIHdyYXBwZWQgYnkgdGhpcyBOb3RpZmljYXRpb24uXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlclxuXHQgICAgICogQHJldHVyblxuXHQgICAgICovXG5cdCAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcblx0ICAgICAgICBzd2l0Y2ggKHRoaXMua2luZCkge1xuXHQgICAgICAgICAgICBjYXNlICdOJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5uZXh0ICYmIG9ic2VydmVyLm5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKHRoaXMuZXhjZXB0aW9uKTtcblx0ICAgICAgICAgICAgY2FzZSAnQyc6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuY29tcGxldGUgJiYgb2JzZXJ2ZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBHaXZlbiBzb21lIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2tzLCBkZWxpdmVyIHRoZSB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGVcblx0ICAgICAqIGN1cnJlbnQgTm90aWZpY2F0aW9uIHRvIHRoZSBjb3JyZWN0bHkgY29ycmVzcG9uZGluZyBjYWxsYmFjay5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiB2b2lkfSBuZXh0IEFuIE9ic2VydmVyIGBuZXh0YCBjYWxsYmFjay5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gQW4gT2JzZXJ2ZXIgYGNvbXBsZXRlYCBjYWxsYmFjay5cblx0ICAgICAqIEByZXR1cm4ge2FueX1cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5kbyA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcblx0ICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcblx0ICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcblx0ICAgICAgICAgICAgY2FzZSAnTic6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCAmJiBuZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgICAgICAgICBjYXNlICdFJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBlcnJvciAmJiBlcnJvcih0aGlzLmV4Y2VwdGlvbik7XG5cdCAgICAgICAgICAgIGNhc2UgJ0MnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogVGFrZXMgYW4gT2JzZXJ2ZXIgb3IgaXRzIGluZGl2aWR1YWwgY2FsbGJhY2sgZnVuY3Rpb25zLCBhbmQgY2FsbHMgYG9ic2VydmVgXG5cdCAgICAgKiBvciBgZG9gIG1ldGhvZHMgYWNjb3JkaW5nbHkuXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dE9yT2JzZXJ2ZXIgQW4gT2JzZXJ2ZXIgb3Jcblx0ICAgICAqIHRoZSBgbmV4dGAgY2FsbGJhY2suXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVycjogYW55KTogdm9pZH0gW2Vycm9yXSBBbiBPYnNlcnZlciBgZXJyb3JgIGNhbGxiYWNrLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG5cdCAgICAgKiBAcmV0dXJuIHthbnl9XG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcblx0ICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgJiYgdHlwZW9mIG5leHRPck9ic2VydmVyLm5leHQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZShuZXh0T3JPYnNlcnZlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kbyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm5zIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb24gcmVwcmVzZW50ZWRcblx0ICAgICAqIGJ5IHRoaXMgTm90aWZpY2F0aW9uIGluc3RhbmNlLlxuXHQgICAgICogQHJldHVybiB7YW55fVxuXHQgICAgICovXG5cdCAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcblx0ICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcblx0ICAgICAgICAgICAgY2FzZSAnTic6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUub2YodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRocm93KHRoaXMuZXhjZXB0aW9uKTtcblx0ICAgICAgICAgICAgY2FzZSAnQyc6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZW1wdHkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgbmV4dGAgZnJvbSBhXG5cdCAgICAgKiBnaXZlbiB2YWx1ZS5cblx0ICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cblx0ICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxUPn0gVGhlIFwibmV4dFwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG5cdCAgICAgKiBhcmd1bWVudC5cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignTicsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb247XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgZXJyb3JgIGZyb20gYVxuXHQgICAgICogZ2l2ZW4gZXJyb3IuXG5cdCAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXhjZXB0aW9uLlxuXHQgICAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uPFQ+fSBUaGUgXCJlcnJvclwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG5cdCAgICAgKiBhcmd1bWVudC5cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnIpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGNvbXBsZXRlYC5cblx0ICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxhbnk+fSBUaGUgdmFsdWVsZXNzIFwiY29tcGxldGVcIiBOb3RpZmljYXRpb24uXG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZU5vdGlmaWNhdGlvbjtcblx0ICAgIH07XG5cdCAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG5cdCAgICBOb3RpZmljYXRpb24udW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdOJywgdW5kZWZpbmVkKTtcblx0ICAgIHJldHVybiBOb3RpZmljYXRpb247XG5cdH0oKSk7XG5cdGV4cG9ydHMuTm90aWZpY2F0aW9uID0gTm90aWZpY2F0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Ob3RpZmljYXRpb24uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBmcm9tRXZlbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnJvbUV2ZW50XzEuZnJvbUV2ZW50O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRnJvbUV2ZW50T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHRleHBvcnRzLmZyb21FdmVudCA9IEZyb21FdmVudE9ic2VydmFibGVfMS5Gcm9tRXZlbnRPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0ZnVuY3Rpb24gaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHR5cGVvZiBzb3VyY2VPYmouYWRkTGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRmdW5jdGlvbiBpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHR5cGVvZiBzb3VyY2VPYmoub24gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5vZmYgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZnVuY3Rpb24gaXNOb2RlTGlzdChzb3VyY2VPYmopIHtcblx0ICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiBzb3VyY2VPYmoudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgTm9kZUxpc3RdJztcblx0fVxuXHRmdW5jdGlvbiBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHNvdXJjZU9iai50b1N0cmluZygpID09PSAnW29iamVjdCBIVE1MQ29sbGVjdGlvbl0nO1xuXHR9XG5cdGZ1bmN0aW9uIGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSB7XG5cdCAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3VyY2VPYmoucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBGcm9tRXZlbnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRnJvbUV2ZW50T2JzZXJ2YWJsZShzb3VyY2VPYmosIGV2ZW50TmFtZSwgc2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNvdXJjZU9iaiA9IHNvdXJjZU9iajtcblx0ICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgY29taW5nIGZyb20gdGhlXG5cdCAgICAgKiBnaXZlbiBldmVudCB0YXJnZXQuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNyZWF0ZXMgYW4gT2JzZXJ2YWJsZSBmcm9tIERPTSBldmVudHMsIG9yIE5vZGVcblx0ICAgICAqIEV2ZW50RW1pdHRlciBldmVudHMgb3Igb3RoZXJzLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgYnkgYXR0YWNoaW5nIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGFuIFwiZXZlbnQgdGFyZ2V0XCIsXG5cdCAgICAgKiB3aGljaCBtYXkgYmUgYW4gb2JqZWN0IHdpdGggYGFkZEV2ZW50TGlzdGVuZXJgIGFuZCBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAsXG5cdCAgICAgKiBhIE5vZGUuanMgRXZlbnRFbWl0dGVyLCBhIGpRdWVyeSBzdHlsZSBFdmVudEVtaXR0ZXIsIGEgTm9kZUxpc3QgZnJvbSB0aGVcblx0ICAgICAqIERPTSwgb3IgYW4gSFRNTENvbGxlY3Rpb24gZnJvbSB0aGUgRE9NLiBUaGUgZXZlbnQgaGFuZGxlciBpcyBhdHRhY2hlZCB3aGVuXG5cdCAgICAgKiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIHJlbW92ZWQgd2hlbiB0aGUgU3Vic2NyaXB0aW9uIGlzXG5cdCAgICAgKiB1bnN1YnNjcmliZWQuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuXHQgICAgICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICAgICAqIGNsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudFBhdHRlcm59XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtFdmVudFRhcmdldExpa2V9IHRhcmdldCBUaGUgRE9NRWxlbWVudCwgZXZlbnQgdGFyZ2V0LCBOb2RlLmpzXG5cdCAgICAgKiBFdmVudEVtaXR0ZXIsIE5vZGVMaXN0IG9yIEhUTUxDb2xsZWN0aW9uIHRvIGF0dGFjaCB0aGUgZXZlbnQgaGFuZGxlciB0by5cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgb2YgaW50ZXJlc3QsIGJlaW5nIGVtaXR0ZWQgYnkgdGhlXG5cdCAgICAgKiBgdGFyZ2V0YC5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYXJnczogYW55KTogVH0gW3NlbGVjdG9yXSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0b1xuXHQgICAgICogcG9zdC1wcm9jZXNzIHJlc3VsdHMuIEl0IHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciBhbmRcblx0ICAgICAqIHNob3VsZCByZXR1cm4gYSBzaW5nbGUgdmFsdWUuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fVxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBmcm9tRXZlbnRcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHRhcmdldCwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnJvbUV2ZW50T2JzZXJ2YWJsZSh0YXJnZXQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpO1xuXHQgICAgfTtcblx0ICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc291cmNlT2JqLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgdW5zdWJzY3JpYmU7XG5cdCAgICAgICAgaWYgKGlzTm9kZUxpc3Qoc291cmNlT2JqKSB8fCBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZU9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmpbaV0sIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNFdmVudFRhcmdldChzb3VyY2VPYmopKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cdCAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZU9iai5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuXHQgICAgICAgICAgICB1bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvdXJjZU9iai5vZmYoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikpIHtcblx0ICAgICAgICAgICAgc291cmNlT2JqLmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cdCAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpKTtcblx0ICAgIH07XG5cdCAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgc291cmNlT2JqID0gdGhpcy5zb3VyY2VPYmo7XG5cdCAgICAgICAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuZXZlbnROYW1lO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBzZWxlY3RvciA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBzdWJzY3JpYmVyLm5leHQoZSk7IH07XG5cdCAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmosIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZyb21FdmVudE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Gcm9tRXZlbnRPYnNlcnZhYmxlID0gRnJvbUV2ZW50T2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbUV2ZW50T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZyb21FdmVudFBhdHRlcm5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybiA9IGZyb21FdmVudFBhdHRlcm5fMS5mcm9tRXZlbnRQYXR0ZXJuO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Nyk7XG5cdGV4cG9ydHMuZnJvbUV2ZW50UGF0dGVybiA9IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmFkZEhhbmRsZXIgPSBhZGRIYW5kbGVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XG5cdCAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBUEkgYmFzZWQgb24gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyXG5cdCAgICAgKiBmdW5jdGlvbnMuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFueSBhZGRIYW5kbGVyL3JlbW92ZUhhbmRsZXIgQVBJIHRvIGFuXG5cdCAgICAgKiBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudFBhdHRlcm4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAgICAgKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGJ5IHVzaW5nIHRoZSBgYWRkSGFuZGxlcmAgYW5kIGByZW1vdmVIYW5kbGVyYFxuXHQgICAgICogZnVuY3Rpb25zIHRvIGFkZCBhbmQgcmVtb3ZlIHRoZSBoYW5kbGVycywgd2l0aCBhbiBvcHRpb25hbCBzZWxlY3RvclxuXHQgICAgICogZnVuY3Rpb24gdG8gcHJvamVjdCB0aGUgZXZlbnQgYXJndW1lbnRzIHRvIGEgcmVzdWx0LiBUaGUgYGFkZEhhbmRsZXJgIGlzXG5cdCAgICAgKiBjYWxsZWQgd2hlbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIGByZW1vdmVIYW5kbGVyYCBpc1xuXHQgICAgICogY2FsbGVkIHdoZW4gdGhlIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuXHQgICAgICogZnVuY3Rpb24gYWRkQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcblx0ICAgICAqICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVyKTtcblx0ICAgICAqIH1cblx0ICAgICAqXG5cdCAgICAgKiBmdW5jdGlvbiByZW1vdmVDbGlja0hhbmRsZXIoaGFuZGxlcikge1xuXHQgICAgICogICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuXHQgICAgICogfVxuXHQgICAgICpcblx0ICAgICAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4oXG5cdCAgICAgKiAgIGFkZENsaWNrSGFuZGxlcixcblx0ICAgICAqICAgcmVtb3ZlQ2xpY2tIYW5kbGVyXG5cdCAgICAgKiApO1xuXHQgICAgICogY2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50fVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaGFuZGxlcjogRnVuY3Rpb24pOiBhbnl9IGFkZEhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG5cdCAgICAgKiBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgYXR0YWNoZXMgaXQgc29tZWhvdyB0byB0aGUgYWN0dWFsXG5cdCAgICAgKiBzb3VyY2Ugb2YgZXZlbnRzLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbihoYW5kbGVyOiBGdW5jdGlvbik6IHZvaWR9IHJlbW92ZUhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0XG5cdCAgICAgKiB0YWtlcyBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgcmVtb3ZlcyBpdCBpbiBjYXNlIGl0IHdhc1xuXHQgICAgICogcHJldmlvdXNseSBhdHRhY2hlZCB1c2luZyBgYWRkSGFuZGxlcmAuXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFyZ3M6IGFueSk6IFR9IFtzZWxlY3Rvcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG9cblx0ICAgICAqIHBvc3QtcHJvY2VzcyByZXN1bHRzLiBJdCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgYW5kXG5cdCAgICAgKiBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHZhbHVlLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn1cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgZnJvbUV2ZW50UGF0dGVyblxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcik7XG5cdCAgICB9O1xuXHQgICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBhZGRIYW5kbGVyID0gdGhpcy5hZGRIYW5kbGVyO1xuXHQgICAgICAgIHZhciByZW1vdmVIYW5kbGVyID0gdGhpcy5yZW1vdmVIYW5kbGVyO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBzZWxlY3RvciA/IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHJlc3VsdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHN1YnNjcmliZXIubmV4dChlKTsgfTtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChhZGRIYW5kbGVyKShoYW5kbGVyKTtcblx0ICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IocmVzdWx0LmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgLy9UT0RPOiBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyXG5cdCAgICAgICAgICAgIHJlbW92ZUhhbmRsZXIoaGFuZGxlcik7XG5cdCAgICAgICAgfSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZnJvbVByb21pc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmcm9tUHJvbWlzZV8xLmZyb21Qcm9taXNlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tUHJvbWlzZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdGV4cG9ydHMuZnJvbVByb21pc2UgPSBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBHZW5lcmF0ZU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzcxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZ2VuZXJhdGUgPSBHZW5lcmF0ZU9ic2VydmFibGVfMS5HZW5lcmF0ZU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1nZW5lcmF0ZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdHZhciBzZWxmU2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBHZW5lcmF0ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEdlbmVyYXRlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuaW5pdGlhbFN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXHQgICAgICAgIHRoaXMuY29uZGl0aW9uID0gY29uZGl0aW9uO1xuXHQgICAgICAgIHRoaXMuaXRlcmF0ZSA9IGl0ZXJhdGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgR2VuZXJhdGVPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlT3JPcHRpb25zLmluaXRpYWxTdGF0ZSwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLmNvbmRpdGlvbiwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLml0ZXJhdGUsIGluaXRpYWxTdGF0ZU9yT3B0aW9ucy5yZXN1bHRTZWxlY3RvciB8fCBzZWxmU2VsZWN0b3IsIGluaXRpYWxTdGF0ZU9yT3B0aW9ucy5zY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUgPT09IHVuZGVmaW5lZCB8fCBpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgc2VsZlNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZU9yT3B0aW9ucywgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBHZW5lcmF0ZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuXHQgICAgICAgIGlmICh0aGlzLnNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoR2VuZXJhdGVPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLFxuXHQgICAgICAgICAgICAgICAgaXRlcmF0ZTogdGhpcy5pdGVyYXRlLFxuXHQgICAgICAgICAgICAgICAgY29uZGl0aW9uOiB0aGlzLmNvbmRpdGlvbixcblx0ICAgICAgICAgICAgICAgIHJlc3VsdFNlbGVjdG9yOiB0aGlzLnJlc3VsdFNlbGVjdG9yLFxuXHQgICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCBjb25kaXRpb24gPSBfYS5jb25kaXRpb24sIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGl0ZXJhdGUgPSBfYS5pdGVyYXRlO1xuXHQgICAgICAgIGRvIHtcblx0ICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvblJlc3VsdCA9IHZvaWQgMDtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gY29uZGl0aW9uKHN0YXRlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb25SZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRTZWxlY3RvcihzdGF0ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgc3RhdGUgPSBpdGVyYXRlKHN0YXRlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IHdoaWxlICh0cnVlKTtcblx0ICAgIH07XG5cdCAgICBHZW5lcmF0ZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIGNvbmRpdGlvbiA9IHN0YXRlLmNvbmRpdGlvbjtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzdGF0ZS5uZWVkSXRlcmF0ZSkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgc3RhdGUuc3RhdGUgPSBzdGF0ZS5pdGVyYXRlKHN0YXRlLnN0YXRlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN0YXRlLm5lZWRJdGVyYXRlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuXHQgICAgICAgICAgICB2YXIgY29uZGl0aW9uUmVzdWx0ID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gY29uZGl0aW9uKHN0YXRlLnN0YXRlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKCFjb25kaXRpb25SZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB2YWx1ZTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IHN0YXRlLnJlc3VsdFNlbGVjdG9yKHN0YXRlLnN0YXRlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBHZW5lcmF0ZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5HZW5lcmF0ZU9ic2VydmFibGUgPSBHZW5lcmF0ZU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlbmVyYXRlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGludGVydmFsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmludGVydmFsID0gaW50ZXJ2YWxfMS5pbnRlcnZhbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJ2YWwuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgSW50ZXJ2YWxPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3NCk7XG5cdGV4cG9ydHMuaW50ZXJ2YWwgPSBJbnRlcnZhbE9ic2VydmFibGVfMS5JbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc051bWVyaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc1KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgSW50ZXJ2YWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhJbnRlcnZhbE9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJbnRlcnZhbE9ic2VydmFibGUocGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAocGVyaW9kID09PSB2b2lkIDApIHsgcGVyaW9kID0gMDsgfVxuXHQgICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wZXJpb2QgPSBwZXJpb2Q7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKCFpc051bWVyaWNfMS5pc051bWVyaWMocGVyaW9kKSB8fCBwZXJpb2QgPCAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMucGVyaW9kID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBzZXF1ZW50aWFsIG51bWJlcnMgZXZlcnkgc3BlY2lmaWVkXG5cdCAgICAgKiBpbnRlcnZhbCBvZiB0aW1lLCBvbiBhIHNwZWNpZmllZCBTY2hlZHVsZXIuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGluY3JlbWVudGFsIG51bWJlcnMgcGVyaW9kaWNhbGx5IGluIHRpbWUuXG5cdCAgICAgKiA8L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogPGltZyBzcmM9XCIuL2ltZy9pbnRlcnZhbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBgaW50ZXJ2YWxgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFuIGluZmluaXRlIHNlcXVlbmNlIG9mXG5cdCAgICAgKiBhc2NlbmRpbmcgaW50ZWdlcnMsIHdpdGggYSBjb25zdGFudCBpbnRlcnZhbCBvZiB0aW1lIG9mIHlvdXIgY2hvb3Npbmdcblx0ICAgICAqIGJldHdlZW4gdGhvc2UgZW1pc3Npb25zLiBUaGUgZmlyc3QgZW1pc3Npb24gaXMgbm90IHNlbnQgaW1tZWRpYXRlbHksIGJ1dFxuXHQgICAgICogb25seSBhZnRlciB0aGUgZmlyc3QgcGVyaW9kIGhhcyBwYXNzZWQuIEJ5IGRlZmF1bHQsIHRoaXMgb3BlcmF0b3IgdXNlcyB0aGVcblx0ICAgICAqIGBhc3luY2AgU2NoZWR1bGVyIHRvIHByb3ZpZGUgYSBub3Rpb24gb2YgdGltZSwgYnV0IHlvdSBtYXkgcGFzcyBhbnlcblx0ICAgICAqIFNjaGVkdWxlciB0byBpdC5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBhc2NlbmRpbmcgbnVtYmVycywgb25lIGV2ZXJ5IHNlY29uZCAoMTAwMG1zKTwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIHRpbWVyfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZGVsYXl9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ9IFtwZXJpb2Q9MF0gVGhlIGludGVydmFsIHNpemUgaW4gbWlsbGlzZWNvbmRzIChieSBkZWZhdWx0KVxuXHQgICAgICogb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGJ5IHRoZSBzY2hlZHVsZXIncyBjbG9jay5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuXHQgICAgICogdGhlIGVtaXNzaW9uIG9mIHZhbHVlcywgYW5kIHByb3ZpZGluZyBhIG5vdGlvbiBvZiBcInRpbWVcIi5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhIHNlcXVlbnRpYWwgbnVtYmVyIGVhY2ggdGltZVxuXHQgICAgICogaW50ZXJ2YWwuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGludGVydmFsXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBJbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHBlcmlvZCA9PT0gdm9pZCAwKSB7IHBlcmlvZCA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWxPYnNlcnZhYmxlKHBlcmlvZCwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBJbnRlcnZhbE9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZDtcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5kZXgpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUuaW5kZXggKz0gMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xuXHQgICAgfTtcblx0ICAgIEludGVydmFsT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgcGVyaW9kID0gdGhpcy5wZXJpb2Q7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShJbnRlcnZhbE9ic2VydmFibGUuZGlzcGF0Y2gsIHBlcmlvZCwge1xuXHQgICAgICAgICAgICBpbmRleDogaW5kZXgsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIHBlcmlvZDogcGVyaW9kXG5cdCAgICAgICAgfSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBJbnRlcnZhbE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5JbnRlcnZhbE9ic2VydmFibGUgPSBJbnRlcnZhbE9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVydmFsT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBpc0FycmF5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0ZnVuY3Rpb24gaXNOdW1lcmljKHZhbCkge1xuXHQgICAgLy8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuXHQgICAgLy8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHQgICAgLy8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdCAgICAvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcblx0ICAgIHJldHVybiAhaXNBcnJheV8xLmlzQXJyYXkodmFsKSAmJiAodmFsIC0gcGFyc2VGbG9hdCh2YWwpICsgMSkgPj0gMDtcblx0fVxuXHRleHBvcnRzLmlzTnVtZXJpYyA9IGlzTnVtZXJpYztcblx0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc051bWVyaWMuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXN5bmNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc3KTtcblx0ZXhwb3J0cy5hc3luYyA9IG5ldyBBc3luY1NjaGVkdWxlcl8xLkFzeW5jU2NoZWR1bGVyKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzgpO1xuXHR2YXIgUXVldWVTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc5KTtcblx0dmFyIEFzeW5jU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc3luY1NjaGVkdWxlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFzeW5jU2NoZWR1bGVyKCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgQXN5bmNTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlTm93ID0gZnVuY3Rpb24gKHdvcmssIHN0YXRlKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUsIDApO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBc3luY1NjaGVkdWxlcjtcblx0fShRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKSk7XG5cdGV4cG9ydHMuQXN5bmNTY2hlZHVsZXIgPSBBc3luY1NjaGVkdWxlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTY2hlZHVsZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGdXR1cmVBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZ1dHVyZUFjdGlvbiwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZ1dHVyZUFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLndvcmsgPSB3b3JrO1xuXHQgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBuZXcgRXJyb3IoJ2V4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb24nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLndvcmsodGhpcy5zdGF0ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgLy8gQWx3YXlzIHJlcGxhY2UgdGhlIGN1cnJlbnQgc3RhdGUgd2l0aCB0aGUgbmV3IHN0YXRlLlxuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgICAvLyBTZXQgdGhlIHBlbmRpbmcgZmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhpcyBhY3Rpb24gaGFzIGJlZW4gc2NoZWR1bGVkLCBvclxuXHQgICAgICAgIC8vIGhhcyByZWN1cnNpdmVseSByZXNjaGVkdWxlZCBpdHNlbGYuXG5cdCAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuXHQgICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElEIGFuZCB0aGUgc3BlY2lmaWVkIGRlbGF5IG1hdGNoZXMgdGhlXG5cdCAgICAgICAgLy8gZGVsYXkgd2UgdXNlZCB0byBjcmVhdGUgdGhlIGludGVydmFsSUQsIGRvbid0IGNhbGwgYHNldEludGVydmFsYCBhZ2Fpbi5cblx0ICAgICAgICBpZiAoaWQgIT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBkZWxheSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElELCBidXQgd2FzIHJlc2NoZWR1bGVkIHdpdGggYSBkaWZmZXJlbnRcblx0ICAgICAgICAvLyBgZGVsYXlgIHRpbWUsIGNhbmNlbCB0aGUgY3VycmVudCBpbnRlcnZhbElEIGFuZCBjYWxsIGBzZXRJbnRlcnZhbGAgd2l0aFxuXHQgICAgICAgIC8vIHRoZSBuZXcgYGRlbGF5YCB0aW1lLlxuXHQgICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRoaXMuaWQgPSBudWxsO1xuXHQgICAgICAgICAgICByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBJbXBvcnRhbnQgaW1wbGVtZW50YXRpb24gbm90ZTpcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEJ5IGRlZmF1bHQsIEZ1dHVyZUFjdGlvbiBvbmx5IGV4ZWN1dGVzIG9uY2UuIEhvd2V2ZXIsIEFjdGlvbnMgaGF2ZSB0aGVcblx0ICAgICAgICAvLyBhYmlsaXR5IHRvIGJlIHJlc2NoZWR1bGVkIGZyb20gd2l0aGluIHRoZSBzY2hlZHVsZWQgY2FsbGJhY2sgKG1pbWlja2luZ1xuXHQgICAgICAgIC8vIHJlY3Vyc2lvbiBmb3IgYXN5bmNocm9ub3VzIG1ldGhvZHMpLiBUaGlzIGFsbG93cyB1cyB0byBpbXBsZW1lbnQgc2luZ2xlXG5cdCAgICAgICAgLy8gYW5kIHJlcGVhdGVkIGFjdGlvbnMgd2l0aCB0aGUgc2FtZSBjb2RlIHBhdGggd2l0aG91dCBhZGRpbmcgQVBJIHN1cmZhY2Vcblx0ICAgICAgICAvLyBhcmVhLCBhbmQgaW1wbGVtZW50IHRhaWwtY2FsbCBvcHRpbWl6YXRpb24gb3ZlciBhc3luY2hyb25vdXMgYm91bmRhcmllcy5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEhvd2V2ZXIsIEpTIHJ1bnRpbWVzIG1ha2UgYSBkaXN0aW5jdGlvbiBiZXR3ZWVuIGludGVydmFscyBzY2hlZHVsZWQgYnlcblx0ICAgICAgICAvLyByZXBlYXRlZGx5IGNhbGxpbmcgYHNldFRpbWVvdXRgIHZzLiBhIHNpbmdsZSBgc2V0SW50ZXJ2YWxgIGNhbGwsIHdpdGhcblx0ICAgICAgICAvLyB0aGUgbGF0dGVyIHByb3ZpZGluZyBhIGJldHRlciBndWFyYW50ZWUgb2YgcHJlY2lzaW9uLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjb21tb2RhdGUgYm90aCBzaW5nbGUgYW5kIHJlcGVhdGVkbHkgcmVzY2hlZHVsZWQgYWN0aW9ucyxcblx0ICAgICAgICAvLyB1c2UgYHNldEludGVydmFsYCBoZXJlIGZvciBib3RoIGNhc2VzLiBCeSBkZWZhdWx0LCB0aGUgaW50ZXJ2YWwgd2lsbCBiZVxuXHQgICAgICAgIC8vIGNhbmNlbGVkIGFmdGVyIGl0cyBmaXJzdCBleGVjdXRpb24sIG9yIGlmIHRoZSBhY3Rpb24gc2NoZWR1bGVzIGl0c2VsZiB0b1xuXHQgICAgICAgIC8vIHJ1biBhZ2FpbiB3aXRoIGEgZGlmZmVyZW50IGBkZWxheWAgdGltZS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIElmIHRoZSBhY3Rpb24gcmVjdXJzaXZlbHkgc2NoZWR1bGVzIGl0c2VsZiB0byBydW4gYWdhaW4gd2l0aCB0aGUgc2FtZVxuXHQgICAgICAgIC8vIGBkZWxheWAgdGltZSwgdGhlIGludGVydmFsIGlzIG5vdCBjYW5jZWxlZCwgYnV0IGFsbG93ZWQgdG8gbG9vcCBhZ2Fpbi5cblx0ICAgICAgICAvLyBUaGUgY2hlY2sgb2Ygd2hldGhlciB0aGUgaW50ZXJ2YWwgc2hvdWxkIGJlIGNhbmNlbGVkIG9yIG5vdCBpcyBydW4gZXZlcnlcblx0ICAgICAgICAvLyB0aW1lIHRoZSBpbnRlcnZhbCBpcyBleGVjdXRlZC4gVGhlIGZpcnN0IHRpbWUgYW4gYWN0aW9uIGZhaWxzIHRvXG5cdCAgICAgICAgLy8gcmVzY2hlZHVsZSBpdHNlbGYsIHRoZSBpbnRlcnZhbCBpcyBjYW5jZWxlZC5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIHRoaXMuaWQgPSByb290XzEucm9vdC5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnBlbmRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyLmFjdGlvbnMucHVzaChfdGhpcyk7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgICAgICAvL1xuXHQgICAgICAgICAgICAvLyBUZXJtaW5hdGUgdGhpcyBpbnRlcnZhbCBpZiB0aGUgYWN0aW9uIGRpZG4ndCByZXNjaGVkdWxlIGl0c2VsZi5cblx0ICAgICAgICAgICAgLy8gRG9uJ3QgY2FsbCBgdGhpcy51bnN1YnNjcmliZSgpYCBoZXJlLCBiZWNhdXNlIHRoZSBhY3Rpb24gY291bGQgYmVcblx0ICAgICAgICAgICAgLy8gcmVzY2hlZHVsZWQgbGF0ZXIuIEZvciBleGFtcGxlOlxuXHQgICAgICAgICAgICAvL1xuXHQgICAgICAgICAgICAvLyBgYGBcblx0ICAgICAgICAgICAgLy8gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uIGRvV29yayhjb3VudGVyKSB7XG5cdCAgICAgICAgICAgIC8vICAgLyogLi4uIEknbSBhIGJ1c3kgd29ya2VyIGJlZSAuLi4gKi9cblx0ICAgICAgICAgICAgLy8gICB2YXIgb3JpZ2luYWxBY3Rpb24gPSB0aGlzO1xuXHQgICAgICAgICAgICAvLyAgIC8qIHdhaXQgMTAwbXMgYmVmb3JlIHJlc2NoZWR1bGluZyB0aGlzIGFjdGlvbiBhZ2FpbiAqL1xuXHQgICAgICAgICAgICAvLyAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyAgICAgb3JpZ2luYWxBY3Rpb24uc2NoZWR1bGUoY291bnRlciArIDEpO1xuXHQgICAgICAgICAgICAvLyAgIH0sIDEwMCk7XG5cdCAgICAgICAgICAgIC8vIH0sIDEwMDApO1xuXHQgICAgICAgICAgICAvLyBgYGBcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmcgPT09IGZhbHNlICYmIGlkICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIF90aGlzLmlkID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZGVsYXkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuXHQgICAgICAgIHZhciBpbmRleCA9IGFjdGlvbnMuaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICB0aGlzLmlkID0gbnVsbDtcblx0ICAgICAgICAgICAgcm9vdF8xLnJvb3QuY2xlYXJJbnRlcnZhbChpZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRnV0dXJlQWN0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHRleHBvcnRzLkZ1dHVyZUFjdGlvbiA9IEZ1dHVyZUFjdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnV0dXJlQWN0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFF1ZXVlQWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4MCk7XG5cdHZhciBGdXR1cmVBY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc4KTtcblx0dmFyIFF1ZXVlU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFF1ZXVlU2NoZWR1bGVyKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5hY3Rpb25zID0gW107IC8vIFhYWDogdXNlIGBhbnlgIHRvIHJlbW92ZSB0eXBlIHBhcmFtIGBUYCBmcm9tIGBWaXJ0dWFsVGltZVNjaGVkdWxlcmAuXG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZWRJZCA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgfHwgdGhpcy5zY2hlZHVsZWRJZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcblx0ICAgICAgICAvLyBYWFg6IHVzZSBgYW55YCB0byByZW1vdmUgdHlwZSBwYXJhbSBgVGAgZnJvbSBgVmlydHVhbFRpbWVTY2hlZHVsZXJgLlxuXHQgICAgICAgIGZvciAodmFyIGFjdGlvbiA9IG51bGw7IGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKTspIHtcblx0ICAgICAgICAgICAgYWN0aW9uLmV4ZWN1dGUoKTtcblx0ICAgICAgICAgICAgaWYgKGFjdGlvbi5lcnJvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIHRocm93IGFjdGlvbi5lcnJvcjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICByZXR1cm4gKGRlbGF5IDw9IDApID9cblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU5vdyh3b3JrLCBzdGF0ZSkgOlxuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlTGF0ZXIod29yaywgZGVsYXksIHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFF1ZXVlQWN0aW9uXzEuUXVldWVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUxhdGVyID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFF1ZXVlU2NoZWR1bGVyO1xuXHR9KCkpO1xuXHRleHBvcnRzLlF1ZXVlU2NoZWR1bGVyID0gUXVldWVTY2hlZHVsZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlU2NoZWR1bGVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzgpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBRdWV1ZUFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUXVldWVBY3Rpb24sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBRdWV1ZUFjdGlvbigpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIFF1ZXVlQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuXHQgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBRdWV1ZUFjdGlvbjtcblx0fShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcblx0ZXhwb3J0cy5RdWV1ZUFjdGlvbiA9IFF1ZXVlQWN0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1RdWV1ZUFjdGlvbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1lcmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4Mik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm1lcmdlID0gbWVyZ2VfMS5tZXJnZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgbWVyZ2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgzKTtcblx0ZXhwb3J0cy5tZXJnZSA9IG1lcmdlXzEubWVyZ2VTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgbWVyZ2VBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ2KTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIGNvbmN1cnJlbnRseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcblx0ICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IGJsZW5kaW5nXG5cdCAqIHRoZWlyIHZhbHVlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYG1lcmdlYCBzdWJzY3JpYmVzIHRvIGVhY2ggZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSAoZWl0aGVyIHRoZSBzb3VyY2Ugb3IgYW5cblx0ICogT2JzZXJ2YWJsZSBnaXZlbiBhcyBhcmd1bWVudCksIGFuZCBzaW1wbHkgZm9yd2FyZHMgKHdpdGhvdXQgZG9pbmcgYW55XG5cdCAqIHRyYW5zZm9ybWF0aW9uKSBhbGwgdGhlIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5wdXQgT2JzZXJ2YWJsZXMgdG8gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgb25seSBjb21wbGV0ZXMgb25jZSBhbGwgaW5wdXQgT2JzZXJ2YWJsZXNcblx0ICogaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnkgYW4gaW5wdXQgT2JzZXJ2YWJsZSB3aWxsIGJlIGltbWVkaWF0ZWx5XG5cdCAqIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciB0d28gT2JzZXJ2YWJsZXM6IDFzIGludGVydmFsIGFuZCBjbGlja3M8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBjbGlja3NPclRpbWVyID0gY2xpY2tzLm1lcmdlKHRpbWVyKTtcblx0ICogY2xpY2tzT3JUaW1lci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIDMgT2JzZXJ2YWJsZXMsIGJ1dCBvbmx5IDIgcnVuIGNvbmN1cnJlbnRseTwvY2FwdGlvbj5cblx0ICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG5cdCAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG5cdCAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG5cdCAqIHZhciBjb25jdXJyZW50ID0gMjsgLy8gdGhlIGFyZ3VtZW50XG5cdCAqIHZhciBtZXJnZWQgPSB0aW1lcjEubWVyZ2UodGltZXIyLCB0aW1lcjMsIGNvbmN1cnJlbnQpO1xuXHQgKiBtZXJnZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcblx0ICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZ1xuXHQgKiBjb25jdXJyZW5jeSBvZiBpbnB1dCBPYnNlcnZhYmxlcy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIHRoYXQgYXJlIHRoZSByZXN1bHQgb2Zcblx0ICogZXZlcnkgaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBtZXJnZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2UoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICBvYnNlcnZhYmxlcy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgcmV0dXJuIG1lcmdlU3RhdGljLmFwcGx5KHRoaXMsIG9ic2VydmFibGVzKTtcblx0fVxuXHRleHBvcnRzLm1lcmdlID0gbWVyZ2U7XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIGNvbmN1cnJlbnRseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcblx0ICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IGJsZW5kaW5nXG5cdCAqIHRoZWlyIHZhbHVlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYG1lcmdlYCBzdWJzY3JpYmVzIHRvIGVhY2ggZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSAoYXMgYXJndW1lbnRzKSwgYW5kIHNpbXBseVxuXHQgKiBmb3J3YXJkcyAod2l0aG91dCBkb2luZyBhbnkgdHJhbnNmb3JtYXRpb24pIGFsbCB0aGUgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IGNvbXBsZXRlc1xuXHQgKiBvbmNlIGFsbCBpbnB1dCBPYnNlcnZhYmxlcyBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieSBhbiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIHR3byBPYnNlcnZhYmxlczogMXMgaW50ZXJ2YWwgYW5kIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrc09yVGltZXIgPSBSeC5PYnNlcnZhYmxlLm1lcmdlKGNsaWNrcywgdGltZXIpO1xuXHQgKiBjbGlja3NPclRpbWVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgMyBPYnNlcnZhYmxlcywgYnV0IG9ubHkgMiBydW4gY29uY3VycmVudGx5PC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcblx0ICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcblx0ICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcblx0ICogdmFyIGNvbmN1cnJlbnQgPSAyOyAvLyB0aGUgYXJndW1lbnRcblx0ICogdmFyIG1lcmdlZCA9IFJ4Lk9ic2VydmFibGUubWVyZ2UodGltZXIxLCB0aW1lcjIsIHRpbWVyMywgY29uY3VycmVudCk7XG5cdCAqIG1lcmdlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MSBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggb3RoZXJzLlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggb3RoZXJzLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nXG5cdCAqIGNvbmN1cnJlbmN5IG9mIGlucHV0IE9ic2VydmFibGVzLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgdGhhdCBhcmUgdGhlIHJlc3VsdCBvZlxuXHQgKiBldmVyeSBpbnB1dCBPYnNlcnZhYmxlLlxuXHQgKiBAc3RhdGljIHRydWVcblx0ICogQG5hbWUgbWVyZ2Vcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlU3RhdGljKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5cdCAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIHZhciBsYXN0ID0gb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV07XG5cdCAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihsYXN0KSkge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPiAxICYmIHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICAgICAgY29uY3VycmVudCA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiBsYXN0ID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgIGNvbmN1cnJlbnQgPSBvYnNlcnZhYmxlcy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZXNbMF07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBtZXJnZUFsbF8xLk1lcmdlQWxsT3BlcmF0b3IoY29uY3VycmVudCkpO1xuXHR9XG5cdGV4cG9ydHMubWVyZ2VTdGF0aWMgPSBtZXJnZVN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciByYWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhY2UgPSByYWNlXzEucmFjZVN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc0FycmF5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgZmlyc3Qgc291cmNlIE9ic2VydmFibGUgdG8gZW1pdCBhbiBpdGVtXG5cdCAqIGZyb20gdGhlIGNvbWJpbmF0aW9uIG9mIHRoaXMgT2JzZXJ2YWJsZSBhbmQgc3VwcGxpZWQgT2JzZXJ2YWJsZXNcblx0ICogQHBhcmFtIHsuLi5PYnNlcnZhYmxlc30gLi4ub2JzZXJ2YWJsZXMgc291cmNlcyB1c2VkIHRvIHJhY2UgZm9yIHdoaWNoIE9ic2VydmFibGUgZW1pdHMgZmlyc3QuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBvdXRwdXQgb2YgdGhlIGZpcnN0IE9ic2VydmFibGUgdG8gZW1pdCBhbiBpdGVtLlxuXHQgKiBAbWV0aG9kIHJhY2Vcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHJhY2UoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG5cdCAgICAvLyBgcGFpcihbb2JzMSwgb2JzMiwgLi4uXSlgXG5cdCAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuXHQgICAgICAgIG9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXNbMF07XG5cdCAgICB9XG5cdCAgICBvYnNlcnZhYmxlcy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgcmV0dXJuIHJhY2VTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xuXHR9XG5cdGV4cG9ydHMucmFjZSA9IHJhY2U7XG5cdGZ1bmN0aW9uIHJhY2VTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG5cdCAgICAvLyBgcGFpcihbb2JzMSwgb2JzMiwgLi4uXSlgXG5cdCAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzKS5saWZ0KG5ldyBSYWNlT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5yYWNlU3RhdGljID0gcmFjZVN0YXRpYztcblx0dmFyIFJhY2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSYWNlT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBSYWNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSYWNlU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJhY2VPcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5SYWNlT3BlcmF0b3IgPSBSYWNlT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFJhY2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSYWNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJhY2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuaGFzRmlyc3QgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gW107XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG5cdCAgICB9XG5cdCAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAob2JzZXJ2YWJsZSkge1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcblx0ICAgIH07XG5cdCAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG5cdCAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKTtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFJhY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmhhc0ZpcnN0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzRmlyc3QgPSB0cnVlO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGkgIT09IG91dGVySW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb25zW2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSYWNlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5SYWNlU3Vic2NyaWJlciA9IFJhY2VTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbmV2ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUubmV2ZXIgPSBuZXZlcl8xLm5ldmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBOZXZlck9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg4KTtcblx0ZXhwb3J0cy5uZXZlciA9IE5ldmVyT2JzZXJ2YWJsZV8xLk5ldmVyT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbm9vcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBOZXZlck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE5ldmVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE5ldmVyT2JzZXJ2YWJsZSgpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5BbiBPYnNlcnZhYmxlIHRoYXQgbmV2ZXIgZW1pdHMgYW55dGhpbmcuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvbmV2ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAgICAgKlxuXHQgICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcblx0ICAgICAqIG5laXRoZXIgdmFsdWVzIG5vciBlcnJvcnMgbm9yIHRoZSBjb21wbGV0aW9uIG5vdGlmaWNhdGlvbi4gSXQgY2FuIGJlIHVzZWRcblx0ICAgICAqIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9yIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlciBPYnNlcnZhYmxlcy4gUGxlYXNlIG5vdFxuXHQgICAgICogdGhhdCBieSBuZXZlciBlbWl0dGluZyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbiwgdGhpcyBPYnNlcnZhYmxlIGtlZXBzIHRoZVxuXHQgICAgICogc3Vic2NyaXB0aW9uIGZyb20gYmVpbmcgZGlzcG9zZWQgYXV0b21hdGljYWxseS4gU3Vic2NyaXB0aW9ucyBuZWVkIHRvIGJlXG5cdCAgICAgKiBtYW51YWxseSBkaXNwb3NlZC5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBuZXZlciBlbWl0IGFueXRoaW5nIGVsc2UgKG5vdCBldmVuIGNvbXBsZXRlKS48L2NhcHRpb24+XG5cdCAgICAgKiBmdW5jdGlvbiBpbmZvKCkge1xuXHQgICAgICogICBjb25zb2xlLmxvZygnV2lsbCBub3QgYmUgY2FsbGVkJyk7XG5cdCAgICAgKiB9XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5uZXZlcigpLnN0YXJ0V2l0aCg3KTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgaW5mbywgaW5mbyk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG5cdCAgICAgKiBAc2VlIHtAbGluayBvZn1cblx0ICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEEgXCJuZXZlclwiIE9ic2VydmFibGU6IG5ldmVyIGVtaXRzIGFueXRoaW5nLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBuZXZlclxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgTmV2ZXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuXHQgICAgfTtcblx0ICAgIE5ldmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgbm9vcF8xLm5vb3AoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuTmV2ZXJPYnNlcnZhYmxlID0gTmV2ZXJPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1OZXZlck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuXHRmdW5jdGlvbiBub29wKCkgeyB9XG5cdGV4cG9ydHMubm9vcCA9IG5vb3A7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vb3AuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBvZl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZiA9IG9mXzEub2Y7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHRleHBvcnRzLm9mID0gQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlLm9mO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1vZi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHJhbmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhbmdlID0gcmFuZ2VfMS5yYW5nZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgUmFuZ2VPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5NCk7XG5cdGV4cG9ydHMucmFuZ2UgPSBSYW5nZU9ic2VydmFibGVfMS5SYW5nZU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yYW5nZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSYW5nZU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW5jZSBvZiBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZFxuXHQgICAgICogcmFuZ2UuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGEgc2VxdWVuY2Ugb2YgbnVtYmVycyBpbiBhIHJhbmdlLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3JhbmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGByYW5nZWAgb3BlcmF0b3IgZW1pdHMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVnZXJzLCBpbiBvcmRlciwgd2hlcmUgeW91XG5cdCAgICAgKiBzZWxlY3QgdGhlIGBzdGFydGAgb2YgdGhlIHJhbmdlIGFuZCBpdHMgYGxlbmd0aGAuIEJ5IGRlZmF1bHQsIHVzZXMgbm9cblx0ICAgICAqIFNjaGVkdWxlciBhbmQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9ucyBzeW5jaHJvbm91c2x5LCBidXQgbWF5IHVzZVxuXHQgICAgICogYW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHJlZ3VsYXRlIHRob3NlIGRlbGl2ZXJpZXMuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgdGhlIG51bWJlcnMgMSB0byAxMDwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG5cdCAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayB0aW1lcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnQ9MF0gVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb25zIG9mIHRoZSBub3RpZmljYXRpb25zLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBudW1iZXJzIHRoYXQgZW1pdHMgYSBmaW5pdGUgcmFuZ2Ugb2Zcblx0ICAgICAqIHNlcXVlbnRpYWwgaW50ZWdlcnMuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIHJhbmdlXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBSYW5nZU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgc3RhcnQgPSAwOyB9XG5cdCAgICAgICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAwOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzdGFydCA9IHN0YXRlLnN0YXJ0LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICBpZiAoaW5kZXggPj0gY291bnQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIubmV4dChzdGFydCk7XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICBzdGF0ZS5zdGFydCA9IHN0YXJ0ICsgMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBSYW5nZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0ICAgICAgICB2YXIgY291bnQgPSB0aGlzLl9jb3VudDtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN0YXJ0OiBzdGFydCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRvIHtcblx0ICAgICAgICAgICAgICAgIGlmIChpbmRleCsrID49IGNvdW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHN0YXJ0KyspO1xuXHQgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBSYW5nZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5SYW5nZU9ic2VydmFibGUgPSBSYW5nZU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhbmdlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRocm93XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Nik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRocm93ID0gdGhyb3dfMS5fdGhyb3c7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzk2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEVycm9yT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTcpO1xuXHRleHBvcnRzLl90aHJvdyA9IEVycm9yT2JzZXJ2YWJsZV8xLkVycm9yT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEVycm9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEVycm9yT2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIgYW5kIGltbWVkaWF0ZWx5XG5cdCAgICAgKiBlbWl0cyBhbiBlcnJvciBub3RpZmljYXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2Vycm9yJywgYW5kIG5vdGhpbmcgZWxzZS5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBlcnJvciBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuXHQgICAgICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGVtaXQgYW4gZXJyb3IuPC9jYXB0aW9uPlxuXHQgICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUudGhyb3cobmV3IEVycm9yKCdvb3BzIScpKS5zdGFydFdpdGgoNyk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVucyBudW1iZXJzIHRvIHRoZSBzZXF1ZW5jZSAnYScsICdiJywgJ2MnLCBidXQgdGhyb3cgYW4gZXJyb3IgZm9yIDEzPC9jYXB0aW9uPlxuXHQgICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICAgICAqIHZhciByZXN1bHQgPSBpbnRlcnZhbC5tZXJnZU1hcCh4ID0+XG5cdCAgICAgKiAgIHggPT09IDEzID9cblx0ICAgICAqICAgICBSeC5PYnNlcnZhYmxlLnRocm93KCdUaGlydGVlbnMgYXJlIGJhZCcpIDpcblx0ICAgICAqICAgICBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpXG5cdCAgICAgKiApO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuXHQgICAgICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG5cdCAgICAgKiBAc2VlIHtAbGluayBvZn1cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge2FueX0gZXJyb3IgVGhlIHBhcnRpY3VsYXIgRXJyb3IgdG8gcGFzcyB0byB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb24gb2YgdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIGVycm9yIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGVycm9yIG5vdGlmaWNhdGlvblxuXHQgICAgICogdXNpbmcgdGhlIGdpdmVuIGVycm9yIGFyZ3VtZW50LlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSB0aHJvd1xuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChlcnJvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFcnJvck9ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgRXJyb3JPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBlcnJvciA9IGFyZy5lcnJvciwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuXHQgICAgfTtcblx0ICAgIEVycm9yT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGVycm9yID0gdGhpcy5lcnJvcjtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBFcnJvck9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5FcnJvck9ic2VydmFibGUgPSBFcnJvck9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUVycm9yT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRpbWVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5OSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRpbWVyID0gdGltZXJfMS50aW1lcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgVGltZXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMCk7XG5cdGV4cG9ydHMudGltZXIgPSBUaW1lck9ic2VydmFibGVfMS5UaW1lck9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc051bWVyaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc1KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdHZhciBpc0RhdGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgVGltZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUaW1lck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaW1lck9ic2VydmFibGUoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAoZHVlVGltZSA9PT0gdm9pZCAwKSB7IGR1ZVRpbWUgPSAwOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wZXJpb2QgPSAtMTtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSAwO1xuXHQgICAgICAgIGlmIChpc051bWVyaWNfMS5pc051bWVyaWMocGVyaW9kKSkge1xuXHQgICAgICAgICAgICB0aGlzLnBlcmlvZCA9IE51bWJlcihwZXJpb2QpIDwgMSAmJiAxIHx8IE51bWJlcihwZXJpb2QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHBlcmlvZCkpIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gcGVyaW9kO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSkge1xuXHQgICAgICAgICAgICBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSBpc0RhdGVfMS5pc0RhdGUoZHVlVGltZSkgP1xuXHQgICAgICAgICAgICAoK2R1ZVRpbWUgLSB0aGlzLnNjaGVkdWxlci5ub3coKSkgOlxuXHQgICAgICAgICAgICBkdWVUaW1lO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBzdGFydHMgZW1pdHRpbmcgYWZ0ZXIgYW4gYGluaXRpYWxEZWxheWAgYW5kXG5cdCAgICAgKiBlbWl0cyBldmVyIGluY3JlYXNpbmcgbnVtYmVycyBhZnRlciBlYWNoIGBwZXJpb2RgIG9mIHRpbWUgdGhlcmVhZnRlci5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXRzIGxpa2Uge0BsaW5rIGludGVydmFsfSwgYnV0IHlvdSBjYW4gc3BlY2lmeSB3aGVuXG5cdCAgICAgKiBzaG91bGQgdGhlIGVtaXNzaW9ucyBzdGFydC48L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogPGltZyBzcmM9XCIuL2ltZy90aW1lci5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBgdGltZXJgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFuIGluZmluaXRlIHNlcXVlbmNlIG9mIGFzY2VuZGluZ1xuXHQgICAgICogaW50ZWdlcnMsIHdpdGggYSBjb25zdGFudCBpbnRlcnZhbCBvZiB0aW1lLCBgcGVyaW9kYCBvZiB5b3VyIGNob29zaW5nXG5cdCAgICAgKiBiZXR3ZWVuIHRob3NlIGVtaXNzaW9ucy4gVGhlIGZpcnN0IGVtaXNzaW9uIGhhcHBlbnMgYWZ0ZXIgdGhlIHNwZWNpZmllZFxuXHQgICAgICogYGluaXRpYWxEZWxheWAuIFRoZSBpbml0aWFsIGRlbGF5IG1heSBiZSBhIHtAbGluayBEYXRlfS4gQnkgZGVmYXVsdCwgdGhpc1xuXHQgICAgICogb3BlcmF0b3IgdXNlcyB0aGUgYGFzeW5jYCBTY2hlZHVsZXIgdG8gcHJvdmlkZSBhIG5vdGlvbiBvZiB0aW1lLCBidXQgeW91XG5cdCAgICAgKiBtYXkgcGFzcyBhbnkgU2NoZWR1bGVyIHRvIGl0LiBJZiBgcGVyaW9kYCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgb3V0cHV0XG5cdCAgICAgKiBPYnNlcnZhYmxlIGVtaXRzIG9ubHkgb25lIHZhbHVlLCBgMGAuIE90aGVyd2lzZSwgaXQgZW1pdHMgYW4gaW5maW5pdGVcblx0ICAgICAqIHNlcXVlbmNlLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIGFzY2VuZGluZyBudW1iZXJzLCBvbmUgZXZlcnkgc2Vjb25kICgxMDAwbXMpLCBzdGFydGluZyBhZnRlciAzIHNlY29uZHM8L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUudGltZXIoMzAwMCwgMTAwMCk7XG5cdCAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBvbmUgbnVtYmVyIGFmdGVyIGZpdmUgc2Vjb25kczwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcig1MDAwKTtcblx0ICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZGVsYXl9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ8RGF0ZX0gaW5pdGlhbERlbGF5IFRoZSBpbml0aWFsIGRlbGF5IHRpbWUgdG8gd2FpdCBiZWZvcmVcblx0ICAgICAqIGVtaXR0aW5nIHRoZSBmaXJzdCB2YWx1ZSBvZiBgMGAuXG5cdCAgICAgKiBAcGFyYW0ge251bWJlcn0gW3BlcmlvZF0gVGhlIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gZW1pc3Npb25zIG9mIHRoZVxuXHQgICAgICogc3Vic2VxdWVudCBudW1iZXJzLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb24gb2YgdmFsdWVzLCBhbmQgcHJvdmlkaW5nIGEgbm90aW9uIG9mIFwidGltZVwiLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgYDBgIGFmdGVyIHRoZVxuXHQgICAgICogYGluaXRpYWxEZWxheWAgYW5kIGV2ZXIgaW5jcmVhc2luZyBudW1iZXJzIGFmdGVyIGVhY2ggYHBlcmlvZGAgb2YgdGltZVxuXHQgICAgICogdGhlcmVhZnRlci5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgdGltZXJcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIFRpbWVyT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChpbml0aWFsRGVsYXkgPT09IHZvaWQgMCkgeyBpbml0aWFsRGVsYXkgPSAwOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBUaW1lck9ic2VydmFibGUoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgVGltZXJPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXM7XG5cdCAgICAgICAgc3Vic2NyaWJlci5uZXh0KGluZGV4KTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHBlcmlvZCA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG5cdCAgICAgICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xuXHQgICAgfTtcblx0ICAgIFRpbWVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCBwZXJpb2QgPSBfYS5wZXJpb2QsIGR1ZVRpbWUgPSBfYS5kdWVUaW1lLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG5cdCAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShUaW1lck9ic2VydmFibGUuZGlzcGF0Y2gsIGR1ZVRpbWUsIHtcblx0ICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBwZXJpb2Q6IHBlcmlvZCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lck9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5UaW1lck9ic2VydmFibGUgPSBUaW1lck9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oK3ZhbHVlKTtcblx0fVxuXHRleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNEYXRlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgemlwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnppcCA9IHppcF8xLnppcDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHppcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDQpO1xuXHRleHBvcnRzLnppcCA9IHppcF8xLnppcFN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MSk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gb2JzZXJ2YWJsZXNcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cblx0ICogQG1ldGhvZCB6aXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHppcFByb3RvKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcblx0ICAgIHJldHVybiB6aXBTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xuXHR9XG5cdGV4cG9ydHMuemlwUHJvdG8gPSB6aXBQcm90bztcblx0LyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0LyoqXG5cdCAqIEBwYXJhbSBvYnNlcnZhYmxlc1xuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fVxuXHQgKiBAc3RhdGljIHRydWVcblx0ICogQG5hbWUgemlwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB6aXBTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvamVjdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuXHQgICAgaWYgKHR5cGVvZiBwcm9qZWN0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgWmlwT3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuemlwU3RhdGljID0gemlwU3RhdGljO1xuXHR2YXIgWmlwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gWmlwT3BlcmF0b3IocHJvamVjdCkge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICB9XG5cdCAgICBaaXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFppcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLlppcE9wZXJhdG9yID0gWmlwT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFppcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFppcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBaaXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB2YWx1ZXMpIHtcblx0ICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9ycyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSAodHlwZW9mIHByb2plY3QgPT09ICdmdW5jdGlvbicpID8gcHJvamVjdCA6IG51bGw7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG5cdCAgICB9XG5cdCAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljQXJyYXlJdGVyYXRvcih2YWx1ZSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljSXRlcmF0b3IodmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSgpKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgWmlwQnVmZmVySXRlcmF0b3IodGhpcy5kZXN0aW5hdGlvbiwgdGhpcywgdmFsdWUsIGluZGV4KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7XG5cdCAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG5cdCAgICAgICAgICAgIGlmIChpdGVyYXRvci5zdGlsbFVuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQoaXRlcmF0b3Iuc3Vic2NyaWJlKGl0ZXJhdG9yLCBpKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZS0tOyAvLyBub3QgYW4gb2JzZXJ2YWJsZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlLS07XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzO1xuXHQgICAgICAgIHZhciBsZW4gPSBpdGVyYXRvcnMubGVuZ3RoO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgLy8gYWJvcnQgaWYgbm90IGFsbCBvZiB0aGVtIGhhdmUgdmFsdWVzXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IuaGFzVmFsdWUgPT09ICdmdW5jdGlvbicgJiYgIWl0ZXJhdG9yLmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc2hvdWxkQ29tcGxldGUgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JzW2ldO1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgaXQncyBjb21wbGV0ZWQgbm93IHRoYXQgeW91J3ZlIGdvdHRlblxuXHQgICAgICAgICAgICAvLyB0aGUgbmV4dCB2YWx1ZS5cblx0ICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmhhc0NvbXBsZXRlZCgpKSB7XG5cdCAgICAgICAgICAgICAgICBzaG91bGRDb21wbGV0ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGFyZ3MucHVzaChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QoYXJncyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc2hvdWxkQ29tcGxldGUpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gWmlwU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLlppcFN1YnNjcmliZXIgPSBaaXBTdWJzY3JpYmVyO1xuXHR2YXIgU3RhdGljSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RhdGljSXRlcmF0b3IoaXRlcmF0b3IpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRlcmF0b3I7XG5cdCAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgfVxuXHQgICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gdGhpcy5pdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUuaGFzQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBuZXh0UmVzdWx0ID0gdGhpcy5uZXh0UmVzdWx0O1xuXHQgICAgICAgIHJldHVybiBuZXh0UmVzdWx0ICYmIG5leHRSZXN1bHQuZG9uZTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3RhdGljSXRlcmF0b3I7XG5cdH0oKSk7XG5cdHZhciBTdGF0aWNBcnJheUl0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0YXRpY0FycmF5SXRlcmF0b3IoYXJyYXkpIHtcblx0ICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuXHQgICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTtcblx0ICAgICAgICByZXR1cm4gaSA8IHRoaXMubGVuZ3RoID8geyB2YWx1ZTogYXJyYXlbaV0sIGRvbmU6IGZhbHNlIH0gOiB7IGRvbmU6IHRydWUgfTtcblx0ICAgIH07XG5cdCAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPiB0aGlzLmluZGV4O1xuXHQgICAgfTtcblx0ICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPT09IHRoaXMuaW5kZXg7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN0YXRpY0FycmF5SXRlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFppcEJ1ZmZlckl0ZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhaaXBCdWZmZXJJdGVyYXRvciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFppcEJ1ZmZlckl0ZXJhdG9yKGRlc3RpbmF0aW9uLCBwYXJlbnQsIG9ic2VydmFibGUsIGluZGV4KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuXHQgICAgICAgIHRoaXMuc3RpbGxVbnN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICAvLyBOT1RFOiB0aGVyZSBpcyBhY3R1YWxseSBhIG5hbWUgY29sbGlzaW9uIGhlcmUgd2l0aCBTdWJzY3JpYmVyLm5leHQgYW5kIEl0ZXJhdG9yLm5leHRcblx0ICAgIC8vICAgIHRoaXMgaXMgbGVnaXQgYmVjYXVzZSBgbmV4dCgpYCB3aWxsIG5ldmVyIGJlIGNhbGxlZCBieSBhIHN1YnNjcmlwdGlvbiBpbiB0aGlzIGNhc2UuXG5cdCAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBidWZmZXIuc2hpZnQoKSwgZG9uZTogZmFsc2UgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlzQ29tcGxldGU7XG5cdCAgICB9O1xuXHQgICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXIucHVzaChpbm5lclZhbHVlKTtcblx0ICAgICAgICB0aGlzLnBhcmVudC5jaGVja0l0ZXJhdG9ycygpO1xuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgcmV0dXJuIHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgdGhpcy5vYnNlcnZhYmxlLCB0aGlzLCBpbmRleCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFppcEJ1ZmZlckl0ZXJhdG9yO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD16aXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBidWZmZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDA2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlciA9IGJ1ZmZlcl8xLmJ1ZmZlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyB1bnRpbCBgY2xvc2luZ05vdGlmaWVyYCBlbWl0cy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcblx0ICogdGhhdCBhcnJheSBvbmx5IHdoZW4gYW5vdGhlciBPYnNlcnZhYmxlIGVtaXRzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgdGhlIGluY29taW5nIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIHRoZSBnaXZlbiBgY2xvc2luZ05vdGlmaWVyYFxuXHQgKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGF0IHdoaWNoIHBvaW50IGl0IGVtaXRzIHRoZSBidWZmZXIgb24gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlIGFuZCBzdGFydHMgYSBuZXcgYnVmZmVyIGludGVybmFsbHksIGF3YWl0aW5nIHRoZSBuZXh0IHRpbWVcblx0ICogYGNsb3NpbmdOb3RpZmllcmAgZW1pdHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBlbWl0IGFycmF5IG9mIG1vc3QgcmVjZW50IGludGVydmFsIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gaW50ZXJ2YWwuYnVmZmVyKGNsaWNrcyk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93fVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGU8YW55Pn0gY2xvc2luZ05vdGlmaWVyIEFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIHRoZVxuXHQgKiBidWZmZXIgdG8gYmUgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gT2JzZXJ2YWJsZSBvZiBidWZmZXJzLCB3aGljaCBhcmUgYXJyYXlzIG9mXG5cdCAqIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGJ1ZmZlcihjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikpO1xuXHR9XG5cdGV4cG9ydHMuYnVmZmVyID0gYnVmZmVyO1xuXHR2YXIgQnVmZmVyT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyT3BlcmF0b3IoY2xvc2luZ05vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nTm90aWZpZXIgPSBjbG9zaW5nTm90aWZpZXI7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jbG9zaW5nTm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJ1ZmZlclN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllcikpO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGJ1ZmZlckNvdW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwOCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50XzEuYnVmZmVyQ291bnQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIHRoZSBzaXplIGhpdHMgdGhlIG1heGltdW1cblx0ICogYGJ1ZmZlclNpemVgIGdpdmVuLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuXHQgKiB0aGF0IGFycmF5IG9ubHkgd2hlbiBpdHMgc2l6ZSByZWFjaGVzIGBidWZmZXJTaXplYC48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyQ291bnQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgYSBudW1iZXIgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGBidWZmZXJTaXplYCB0aGVuXG5cdCAqIGVtaXRzIHRoZSBidWZmZXIgYW5kIGNsZWFycyBpdCwgYW5kIHN0YXJ0cyBhIG5ldyBidWZmZXIgZWFjaFxuXHQgKiBgc3RhcnRCdWZmZXJFdmVyeWAgdmFsdWVzLiBJZiBgc3RhcnRCdWZmZXJFdmVyeWAgaXMgbm90IHByb3ZpZGVkIG9yIGlzXG5cdCAqIGBudWxsYCwgdGhlbiBuZXcgYnVmZmVycyBhcmUgc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZVxuXHQgKiBhbmQgd2hlbiBlYWNoIGJ1ZmZlciBjbG9zZXMgYW5kIGlzIGVtaXR0ZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlckNvdW50KDIpO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBlbWl0IHRoZSBsYXN0IHR3byBjbGljayBldmVudHMgYXMgYW4gYXJyYXk8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJDb3VudCgyLCAxKTtcblx0ICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgcGFpcndpc2V9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyU2l6ZSBUaGUgbWF4aW11bSBzaXplIG9mIHRoZSBidWZmZXIgZW1pdHRlZC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydEJ1ZmZlckV2ZXJ5XSBJbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBhIG5ldyBidWZmZXIuXG5cdCAqIEZvciBleGFtcGxlIGlmIGBzdGFydEJ1ZmZlckV2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgYnVmZmVyIHdpbGwgYmUgc3RhcnRlZFxuXHQgKiBvbiBldmVyeSBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IGJ1ZmZlciBpcyBzdGFydGVkIGF0IHRoZVxuXHQgKiBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBieSBkZWZhdWx0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIE9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJDb3VudFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyQ291bnQoYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkge1xuXHQgICAgaWYgKHN0YXJ0QnVmZmVyRXZlcnkgPT09IHZvaWQgMCkgeyBzdGFydEJ1ZmZlckV2ZXJ5ID0gbnVsbDsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyQ291bnRPcGVyYXRvcihidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50O1xuXHR2YXIgQnVmZmVyQ291bnRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHtcblx0ICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuXHQgICAgICAgIHRoaXMuc3RhcnRCdWZmZXJFdmVyeSA9IHN0YXJ0QnVmZmVyRXZlcnk7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJDb3VudE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYnVmZmVyU2l6ZSwgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlckNvdW50T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlckNvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQnVmZmVyQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID0gc3RhcnRCdWZmZXJFdmVyeTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbW11dO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBjb3VudCA9ICh0aGlzLmNvdW50ICs9IDEpO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIGJ1ZmZlclNpemUgPSB0aGlzLmJ1ZmZlclNpemU7XG5cdCAgICAgICAgdmFyIHN0YXJ0QnVmZmVyRXZlcnkgPSAodGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID09IG51bGwpID8gYnVmZmVyU2l6ZSA6IHRoaXMuc3RhcnRCdWZmZXJFdmVyeTtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG5cdCAgICAgICAgdmFyIHJlbW92ZSA9IC0xO1xuXHQgICAgICAgIGlmIChjb3VudCAlIHN0YXJ0QnVmZmVyRXZlcnkgPT09IDApIHtcblx0ICAgICAgICAgICAgYnVmZmVycy5wdXNoKFtdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tpXTtcblx0ICAgICAgICAgICAgYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gYnVmZmVyU2l6ZSkge1xuXHQgICAgICAgICAgICAgICAgcmVtb3ZlID0gaTtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVtb3ZlICE9PSAtMSkge1xuXHQgICAgICAgICAgICBidWZmZXJzLnNwbGljZShyZW1vdmUsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuXHQgICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnMuc2hpZnQoKTtcblx0ICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyQ291bnRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYnVmZmVyVGltZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVGltZSA9IGJ1ZmZlclRpbWVfMS5idWZmZXJUaW1lO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBmb3IgYSBzcGVjaWZpYyB0aW1lIHBlcmlvZC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcblx0ICogdGhvc2UgYXJyYXlzIHBlcmlvZGljYWxseSBpbiB0aW1lLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBCdWZmZXJzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgZm9yIGEgc3BlY2lmaWMgdGltZSBkdXJhdGlvbiBgYnVmZmVyVGltZVNwYW5gLlxuXHQgKiBVbmxlc3MgdGhlIG9wdGlvbmFsIGFyZ3VtZW50IGBidWZmZXJDcmVhdGlvbkludGVydmFsYCBpcyBnaXZlbiwgaXQgZW1pdHMgYW5kXG5cdCAqIHJlc2V0cyB0aGUgYnVmZmVyIGV2ZXJ5IGBidWZmZXJUaW1lU3BhbmAgbWlsbGlzZWNvbmRzLiBJZlxuXHQgKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgaXMgZ2l2ZW4sIHRoaXMgb3BlcmF0b3Igb3BlbnMgdGhlIGJ1ZmZlciBldmVyeVxuXHQgKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgbWlsbGlzZWNvbmRzIGFuZCBjbG9zZXMgKGVtaXRzIGFuZCByZXNldHMpIHRoZVxuXHQgKiBidWZmZXIgZXZlcnkgYGJ1ZmZlclRpbWVTcGFuYCBtaWxsaXNlY29uZHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IHNlY29uZCwgZW1pdCBhbiBhcnJheSBvZiB0aGUgcmVjZW50IGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRpbWUoMTAwMCk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgNSBzZWNvbmRzLCBlbWl0IHRoZSBjbGljayBldmVudHMgZnJvbSB0aGUgbmV4dCAyIHNlY29uZHM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUaW1lKDIwMDAsIDUwMDApO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IGJ1ZmZlclRpbWVTcGFuIFRoZSBhbW91bnQgb2YgdGltZSB0byBmaWxsIGVhY2ggYnVmZmVyIGFycmF5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2J1ZmZlckNyZWF0aW9uSW50ZXJ2YWxdIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBuZXdcblx0ICogYnVmZmVycy5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG5cdCAqIGludGVydmFscyB0aGF0IGRldGVybWluZSBidWZmZXIgYm91bmRhcmllcy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBvYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgYnVmZmVyVGltZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyVGltZShidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyVGltZU9wZXJhdG9yKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmJ1ZmZlclRpbWUgPSBidWZmZXJUaW1lO1xuXHR2YXIgQnVmZmVyVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlclRpbWVPcGVyYXRvcihidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmJ1ZmZlclRpbWVTcGFuLCB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQnVmZmVyVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJ1ZmZlclRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5idWZmZXJzID0gW107XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMub3BlbkJ1ZmZlcigpO1xuXHQgICAgICAgIGlmIChidWZmZXJDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuXHQgICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgYnVmZmVyOiBidWZmZXIgfTtcblx0ICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IGJ1ZmZlclRpbWVTcGFuOiBidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDogYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyQ2xvc2UsIGJ1ZmZlclRpbWVTcGFuLCBjbG9zZVN0YXRlKSk7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNyZWF0aW9uLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBjcmVhdGlvblN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGltZVNwYW5Pbmx5U3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIGJ1ZmZlcjogYnVmZmVyLCBidWZmZXJUaW1lU3BhbjogYnVmZmVyVGltZVNwYW4gfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5LCBidWZmZXJUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBidWZmZXJzW2ldLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuYnVmZmVycy5sZW5ndGggPSAwO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGJ1ZmZlcnMgPSBfYS5idWZmZXJzLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXJzLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXJzID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcblx0ICAgICAgICByZXR1cm4gYnVmZmVyO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICBidWZmZXJzLnNwbGljZShidWZmZXJzLmluZGV4T2YoYnVmZmVyKSwgMSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5KHN0YXRlKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgcHJldkJ1ZmZlciA9IHN0YXRlLmJ1ZmZlcjtcblx0ICAgIGlmIChwcmV2QnVmZmVyKSB7XG5cdCAgICAgICAgc3Vic2NyaWJlci5jbG9zZUJ1ZmZlcihwcmV2QnVmZmVyKTtcblx0ICAgIH1cblx0ICAgIHN0YXRlLmJ1ZmZlciA9IHN1YnNjcmliZXIub3BlbkJ1ZmZlcigpO1xuXHQgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgc3RhdGUuYnVmZmVyVGltZVNwYW4pO1xuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ3JlYXRpb24oc3RhdGUpIHtcblx0ICAgIHZhciBidWZmZXJDcmVhdGlvbkludGVydmFsID0gc3RhdGUuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgYnVmZmVyVGltZVNwYW4gPSBzdGF0ZS5idWZmZXJUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjtcblx0ICAgIHZhciBidWZmZXIgPSBzdWJzY3JpYmVyLm9wZW5CdWZmZXIoKTtcblx0ICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuXHQgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgYWN0aW9uLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDbG9zZSwgYnVmZmVyVGltZVNwYW4sIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgYnVmZmVyOiBidWZmZXIgfSkpO1xuXHQgICAgICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCk7XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJDbG9zZShhcmcpIHtcblx0ICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIGJ1ZmZlciA9IGFyZy5idWZmZXI7XG5cdCAgICBzdWJzY3JpYmVyLmNsb3NlQnVmZmVyKGJ1ZmZlcik7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGJ1ZmZlclRvZ2dsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVG9nZ2xlID0gYnVmZmVyVG9nZ2xlXzEuYnVmZmVyVG9nZ2xlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUb2dnbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBzdGFydGluZyBmcm9tIGFuIGVtaXNzaW9uIGZyb21cblx0ICogYG9wZW5pbmdzYCBhbmQgZW5kaW5nIHdoZW4gdGhlIG91dHB1dCBvZiBgY2xvc2luZ1NlbGVjdG9yYCBlbWl0cy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LiBTdGFydHNcblx0ICogY29sbGVjdGluZyBvbmx5IHdoZW4gYG9wZW5pbmdgIGVtaXRzLCBhbmQgY2FsbHMgdGhlIGBjbG9zaW5nU2VsZWN0b3JgXG5cdCAqIGZ1bmN0aW9uIHRvIGdldCBhbiBPYnNlcnZhYmxlIHRoYXQgdGVsbHMgd2hlbiB0byBjbG9zZSB0aGUgYnVmZmVyLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUb2dnbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBieSBvcGVuaW5nIHRoZSBidWZmZXIgdmlhIHNpZ25hbHMgZnJvbSBhblxuXHQgKiBPYnNlcnZhYmxlIHByb3ZpZGVkIHRvIGBvcGVuaW5nc2AsIGFuZCBjbG9zaW5nIGFuZCBzZW5kaW5nIHRoZSBidWZmZXJzIHdoZW5cblx0ICogYSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUb2dnbGUob3BlbmluZ3MsIGkgPT5cblx0ICogICBpICUgMiA/IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKSA6IFJ4Lk9ic2VydmFibGUuZW1wdHkoKVxuXHQgKiApO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cblx0ICpcblx0ICogQHBhcmFtIHtTdWJzY3JpYmFibGVPclByb21pc2U8Tz59IG9wZW5pbmdzIEEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2Ugb2Ygbm90aWZpY2F0aW9ucyB0byBzdGFydCBuZXdcblx0ICogYnVmZmVycy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogTyk6IFN1YnNjcmliYWJsZU9yUHJvbWlzZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuXHQgKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2UsXG5cdCAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzLCBzaWduYWxzIHRoYXQgdGhlIGFzc29jaWF0ZWQgYnVmZmVyIHNob3VsZCBiZSBlbWl0dGVkXG5cdCAqIGFuZCBjbGVhcmVkLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIG9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJUb2dnbGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGJ1ZmZlclRvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXJUb2dnbGUgPSBidWZmZXJUb2dnbGU7XG5cdHZhciBCdWZmZXJUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyVG9nZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MpKTtcblx0ICAgIH1cblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgY29udGV4dHNbaV0uYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIGNvbnRleHQuYnVmZmVyID0gbnVsbDtcblx0ICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIGVycik7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgd2hpbGUgKGNvbnRleHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0cy5zaGlmdCgpO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoY29udGV4dC5idWZmZXIpO1xuXHQgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICBjb250ZXh0LmJ1ZmZlciA9IG51bGw7XG5cdCAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgb3V0ZXJWYWx1ZSA/IHRoaXMuY2xvc2VCdWZmZXIob3V0ZXJWYWx1ZSkgOiB0aGlzLm9wZW5CdWZmZXIoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmNsb3NlQnVmZmVyKGlubmVyU3ViLmNvbnRleHQpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2xvc2luZ1NlbGVjdG9yID0gdGhpcy5jbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSBjbG9zaW5nU2VsZWN0b3IuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJ5U3Vic2NyaWJlKGNsb3NpbmdOb3RpZmllcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICBpZiAoY29udGV4dHMgJiYgY29udGV4dCkge1xuXHQgICAgICAgICAgICB2YXIgYnVmZmVyID0gY29udGV4dC5idWZmZXIsIHN1YnNjcmlwdGlvbiA9IGNvbnRleHQuc3Vic2NyaXB0aW9uO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICAgICAgY29udGV4dHMuc3BsaWNlKGNvbnRleHRzLmluZGV4T2YoY29udGV4dCksIDEpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKGNsb3NpbmdOb3RpZmllcikge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG5cdCAgICAgICAgdmFyIGNvbnRleHQgPSB7IGJ1ZmZlcjogYnVmZmVyLCBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiB9O1xuXHQgICAgICAgIGNvbnRleHRzLnB1c2goY29udGV4dCk7XG5cdCAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIsIGNvbnRleHQpO1xuXHQgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZUJ1ZmZlcihjb250ZXh0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLmNvbnRleHQgPSBjb250ZXh0O1xuXHQgICAgICAgICAgICB0aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYnVmZmVyV2hlbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyV2hlbiA9IGJ1ZmZlcldoZW5fMS5idWZmZXJXaGVuO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMsIHVzaW5nIGEgZmFjdG9yeSBmdW5jdGlvbiBvZiBjbG9zaW5nXG5cdCAqIE9ic2VydmFibGVzIHRvIGRldGVybWluZSB3aGVuIHRvIGNsb3NlLCBlbWl0LCBhbmQgcmVzZXQgdGhlIGJ1ZmZlci5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LiBXaGVuIGl0XG5cdCAqIHN0YXJ0cyBjb2xsZWN0aW5nIHZhbHVlcywgaXQgY2FsbHMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0XG5cdCAqIHRlbGxzIHdoZW4gdG8gY2xvc2UgdGhlIGJ1ZmZlciBhbmQgcmVzdGFydCBjb2xsZWN0aW5nLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBPcGVucyBhIGJ1ZmZlciBpbW1lZGlhdGVseSwgdGhlbiBjbG9zZXMgdGhlIGJ1ZmZlciB3aGVuIHRoZSBvYnNlcnZhYmxlXG5cdCAqIHJldHVybmVkIGJ5IGNhbGxpbmcgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMgYSB2YWx1ZS4gV2hlbiBpdCBjbG9zZXNcblx0ICogdGhlIGJ1ZmZlciwgaXQgaW1tZWRpYXRlbHkgb3BlbnMgYSBuZXcgYnVmZmVyIGFuZCByZXBlYXRzIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGFuIGFycmF5IG9mIHRoZSBsYXN0IGNsaWNrcyBldmVyeSBbMS01XSByYW5kb20gc2Vjb25kczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlcldoZW4oKCkgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAgKyBNYXRoLnJhbmRvbSgpICogNDAwMClcblx0ICogKTtcblx0ICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuXHQgKiBhcmd1bWVudHMgYW5kIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNpZ25hbHMgYnVmZmVyIGNsb3N1cmUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gb2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIGJ1ZmZlcldoZW5cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGJ1ZmZlcldoZW4oY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJXaGVuT3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXJXaGVuID0gYnVmZmVyV2hlbjtcblx0dmFyIEJ1ZmZlcldoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJXaGVuT3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBCdWZmZXJXaGVuT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlcldoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCdWZmZXJXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlcldoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nU2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgaWYgKGJ1ZmZlcikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJpbmcpIHtcblx0ICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5vcGVuQnVmZmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuQnVmZmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjbG9zaW5nU3Vic2NyaXB0aW9uID0gdGhpcy5jbG9zaW5nU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChjbG9zaW5nU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKGNsb3NpbmdTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblx0ICAgICAgICBpZiAodGhpcy5idWZmZXIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7XG5cdCAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllciA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICB0aGlzLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgICAgICB0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb24gPSBjbG9zaW5nU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgICAgICB0aGlzLmFkZChjbG9zaW5nU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IHRydWU7XG5cdCAgICAgICAgICAgIGNsb3NpbmdTdWJzY3JpcHRpb24uYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG5cdCAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlcldoZW5TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY2FjaGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDE2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNhY2hlID0gY2FjaGVfMS5jYWNoZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcHVibGlzaFJlcGxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpO1xuXHQvKipcblx0ICogQHBhcmFtIGJ1ZmZlclNpemVcblx0ICogQHBhcmFtIHdpbmRvd1RpbWVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59XG5cdCAqIEBtZXRob2QgY2FjaGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNhY2hlKGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7IHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgIHJldHVybiBwdWJsaXNoUmVwbGF5XzEucHVibGlzaFJlcGxheS5jYWxsKHRoaXMsIGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikucmVmQ291bnQoKTtcblx0fVxuXHRleHBvcnRzLmNhY2hlID0gY2FjaGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFJlcGxheVN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDE4KTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjApO1xuXHQvKipcblx0ICogQHBhcmFtIGJ1ZmZlclNpemVcblx0ICogQHBhcmFtIHdpbmRvd1RpbWVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgcHVibGlzaFJlcGxheVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaFJlcGxheShidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IFJlcGxheVN1YmplY3RfMS5SZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hSZXBsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdHZhciBxdWV1ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTkpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgUmVwbGF5U3ViamVjdDxUPlxuXHQgKi9cblx0dmFyIFJlcGxheVN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlcGxheVN1YmplY3QsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIGlmICh3aW5kb3dUaW1lID09PSB2b2lkIDApIHsgd2luZG93VGltZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZXZlbnRzID0gW107XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZSA8IDEgPyAxIDogYnVmZmVyU2l6ZTtcblx0ICAgICAgICB0aGlzLl93aW5kb3dUaW1lID0gd2luZG93VGltZSA8IDEgPyAxIDogd2luZG93VGltZTtcblx0ICAgIH1cblx0ICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIG5vdyA9IHRoaXMuX2dldE5vdygpO1xuXHQgICAgICAgIHRoaXMuZXZlbnRzLnB1c2gobmV3IFJlcGxheUV2ZW50KG5vdywgdmFsdWUpKTtcblx0ICAgICAgICB0aGlzLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyhub3cpO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKHRoaXMuX2dldE5vdygpKTtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChzdWJzY3JpYmVyID0gbmV3IG9ic2VydmVPbl8xLk9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgc2NoZWR1bGVyKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBsZW4gPSBldmVudHMubGVuZ3RoO1xuXHQgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuICYmICFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChldmVudHNbaW5kZXhdLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuXHQgICAgfTtcblx0ICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9nZXROb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuICh0aGlzLnNjaGVkdWxlciB8fCBxdWV1ZV8xLnF1ZXVlKS5ub3coKTtcblx0ICAgIH07XG5cdCAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMgPSBmdW5jdGlvbiAobm93KSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlclNpemUgPSB0aGlzLmJ1ZmZlclNpemU7XG5cdCAgICAgICAgdmFyIF93aW5kb3dUaW1lID0gdGhpcy5fd2luZG93VGltZTtcblx0ICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHM7XG5cdCAgICAgICAgdmFyIGV2ZW50c0NvdW50ID0gZXZlbnRzLmxlbmd0aDtcblx0ICAgICAgICB2YXIgc3BsaWNlQ291bnQgPSAwO1xuXHQgICAgICAgIC8vIFRyaW0gZXZlbnRzIHRoYXQgZmFsbCBvdXQgb2YgdGhlIHRpbWUgd2luZG93LlxuXHQgICAgICAgIC8vIFN0YXJ0IGF0IHRoZSBmcm9udCBvZiB0aGUgbGlzdC4gQnJlYWsgZWFybHkgb25jZVxuXHQgICAgICAgIC8vIHdlIGVuY291bnRlciBhbiBldmVudCB0aGF0IGZhbGxzIHdpdGhpbiB0aGUgd2luZG93LlxuXHQgICAgICAgIHdoaWxlIChzcGxpY2VDb3VudCA8IGV2ZW50c0NvdW50KSB7XG5cdCAgICAgICAgICAgIGlmICgobm93IC0gZXZlbnRzW3NwbGljZUNvdW50XS50aW1lKSA8IF93aW5kb3dUaW1lKSB7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBzcGxpY2VDb3VudCArPSAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZXZlbnRzQ291bnQgPiBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgIHNwbGljZUNvdW50ID0gTWF0aC5tYXgoc3BsaWNlQ291bnQsIGV2ZW50c0NvdW50IC0gYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzcGxpY2VDb3VudCA+IDApIHtcblx0ICAgICAgICAgICAgZXZlbnRzLnNwbGljZSgwLCBzcGxpY2VDb3VudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBldmVudHM7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlcGxheVN1YmplY3Q7XG5cdH0oU3ViamVjdF8xLlN1YmplY3QpKTtcblx0ZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdDtcblx0dmFyIFJlcGxheUV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJlcGxheUV2ZW50KHRpbWUsIHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy50aW1lID0gdGltZTtcblx0ICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gUmVwbGF5RXZlbnQ7XG5cdH0oKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheVN1YmplY3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgUXVldWVTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc5KTtcblx0ZXhwb3J0cy5xdWV1ZSA9IG5ldyBRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjEpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdHMgb2YgaW52b2tpbmcgYSBzcGVjaWZpZWQgc2VsZWN0b3Igb24gaXRlbXNcblx0ICogZW1pdHRlZCBieSBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL211bHRpY2FzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgLSBhIGZ1bmN0aW9uIHRoYXQgY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHN0cmVhbVxuXHQgKiBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzdHJlYW0uXG5cdCAqIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGVcblx0ICogdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIGZvcndhcmQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Jcblx0ICogb24gdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgYSBgQ29ubmVjdGFibGVPYnNlcnZhYmxlYCB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG9cblx0ICogdGhlIHVuZGVybHlpbmcgc3RyZWFtLlxuXHQgKiBAbWV0aG9kIG11bHRpY2FzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbXVsdGljYXN0KHN1YmplY3RPclN1YmplY3RGYWN0b3J5KSB7XG5cdCAgICB2YXIgc3ViamVjdEZhY3Rvcnk7XG5cdCAgICBpZiAodHlwZW9mIHN1YmplY3RPclN1YmplY3RGYWN0b3J5ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHN1YmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gc3ViamVjdEZhY3RvcnkoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGUodGhpcywgc3ViamVjdEZhY3RvcnkpO1xuXHR9XG5cdGV4cG9ydHMubXVsdGljYXN0ID0gbXVsdGljYXN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tdWx0aWNhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgQ29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+XG5cdCAqL1xuXHR2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb25uZWN0YWJsZU9ic2VydmFibGUoc291cmNlLCBzdWJqZWN0RmFjdG9yeSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0RmFjdG9yeTtcblx0ICAgIH1cblx0ICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3ViamVjdCgpLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgIH07XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmdldFN1YmplY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG5cdCAgICAgICAgaWYgKHN1YmplY3QgJiYgIXN1YmplY3QuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAodGhpcy5zdWJqZWN0ID0gdGhpcy5zdWJqZWN0RmFjdG9yeSgpKTtcblx0ICAgIH07XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZSh0aGlzLmdldFN1YmplY3QoKSk7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24odGhpcykpO1xuXHQgICAgICAgIHJldHVybiAodGhpcy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb24pO1xuXHQgICAgfTtcblx0ICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudE9ic2VydmFibGUodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBvcGVuZWQgZm9yIGBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbmAuXG5cdCAgICAgKiBOb3QgdG8gY2FsbCBmcm9tIG90aGVycy5cblx0ICAgICAqL1xuXHQgICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fY2xvc2VTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ29ubmVjdGFibGVTdWJzY3JpcHRpb24oY29ubmVjdGFibGUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG5cdCAgICB9XG5cdCAgICBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG5cdCAgICAgICAgY29ubmVjdGFibGUuX2Nsb3NlU3Vic2NyaXB0aW9uKCk7XG5cdCAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZkNvdW50T2JzZXJ2YWJsZShjb25uZWN0YWJsZSwgcmVmQ291bnQpIHtcblx0ICAgICAgICBpZiAocmVmQ291bnQgPT09IHZvaWQgMCkgeyByZWZDb3VudCA9IDA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG5cdCAgICAgICAgdGhpcy5yZWZDb3VudCA9IHJlZkNvdW50O1xuXHQgICAgfVxuXHQgICAgUmVmQ291bnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlO1xuXHQgICAgICAgIHZhciByZWZDb3VudFN1YnNjcmliZXIgPSBuZXcgUmVmQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMpO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBjb25uZWN0YWJsZS5zdWJzY3JpYmUocmVmQ291bnRTdWJzY3JpYmVyKTtcblx0ICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCAmJiArK3RoaXMucmVmQ291bnQgPT09IDEpIHtcblx0ICAgICAgICAgICAgcmVmQ291bnRTdWJzY3JpYmVyLmNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5jb25uZWN0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlZkNvdW50T2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWZDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlZkNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZkNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcmVmQ291bnRPYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMucmVmQ291bnRPYnNlcnZhYmxlID0gcmVmQ291bnRPYnNlcnZhYmxlO1xuXHQgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHJlZkNvdW50T2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcblx0ICAgIH1cblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuX3Jlc2V0Q29ubmVjdGFibGUoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5fcmVzZXRDb25uZWN0YWJsZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9yZXNldENvbm5lY3RhYmxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG5cdCAgICAgICAgdmFyIG9ic0Nvbm5lY3Rpb24gPSBvYnNlcnZhYmxlLmNvbm5lY3Rpb247XG5cdCAgICAgICAgdmFyIHN1YkNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb247XG5cdCAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlLnJlZkNvdW50ID0gMDtcblx0ICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlLmNvbm5lY3Rpb24gPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG5cdCAgICAgICAgaWYgKG9ic2VydmFibGUucmVmQ291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoLS1vYnNlcnZhYmxlLnJlZkNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBvYnNDb25uZWN0aW9uID0gb2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuXHQgICAgICAgICAgICB2YXIgc3ViQ29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcblx0ICAgICAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuXHQgICAgICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5jb25uZWN0aW9uID0gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVmQ291bnRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jYXRjaCA9IGNhdGNoXzEuX2NhdGNoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jYXRjaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIENhdGNoZXMgZXJyb3JzIG9uIHRoZSBvYnNlcnZhYmxlIHRvIGJlIGhhbmRsZWQgYnkgcmV0dXJuaW5nIGEgbmV3IG9ic2VydmFibGUgb3IgdGhyb3dpbmcgYW4gZXJyb3IuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhcyBhcmd1bWVudHMgYGVycmAsIHdoaWNoIGlzIHRoZSBlcnJvciwgYW5kIGBjYXVnaHRgLCB3aGljaFxuXHQgKiAgaXMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlLCBpbiBjYXNlIHlvdSdkIGxpa2UgdG8gXCJyZXRyeVwiIHRoYXQgb2JzZXJ2YWJsZSBieSByZXR1cm5pbmcgaXQgYWdhaW4uIFdoYXRldmVyIG9ic2VydmFibGVcblx0ICogIGlzIHJldHVybmVkIGJ5IHRoZSBgc2VsZWN0b3JgIHdpbGwgYmUgdXNlZCB0byBjb250aW51ZSB0aGUgb2JzZXJ2YWJsZSBjaGFpbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gb2JzZXJ2YWJsZSB0aGF0IG9yaWdpbmF0ZXMgZnJvbSBlaXRoZXIgdGhlIHNvdXJjZSBvciB0aGUgb2JzZXJ2YWJsZSByZXR1cm5lZCBieSB0aGVcblx0ICogIGNhdGNoIGBzZWxlY3RvcmAgZnVuY3Rpb24uXG5cdCAqIEBtZXRob2QgY2F0Y2hcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIF9jYXRjaChzZWxlY3Rvcikge1xuXHQgICAgdmFyIG9wZXJhdG9yID0gbmV3IENhdGNoT3BlcmF0b3Ioc2VsZWN0b3IpO1xuXHQgICAgdmFyIGNhdWdodCA9IHRoaXMubGlmdChvcGVyYXRvcik7XG5cdCAgICByZXR1cm4gKG9wZXJhdG9yLmNhdWdodCA9IGNhdWdodCk7XG5cdH1cblx0ZXhwb3J0cy5fY2F0Y2ggPSBfY2F0Y2g7XG5cdHZhciBDYXRjaE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENhdGNoT3BlcmF0b3Ioc2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBDYXRjaE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQ2F0Y2hTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc2VsZWN0b3IsIHRoaXMuY2F1Z2h0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENhdGNoT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIENhdGNoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQ2F0Y2hTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ2F0Y2hTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzZWxlY3RvciwgY2F1Z2h0KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmNhdWdodCA9IGNhdWdodDtcblx0ICAgIH1cblx0ICAgIC8vIE5PVEU6IG92ZXJyaWRpbmcgYGVycm9yYCBpbnN0ZWFkIG9mIGBfZXJyb3JgIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudFxuXHQgICAgLy8gdG8gaGF2ZSB0aGlzIGZsYWcgdGhpcyBzdWJzY3JpYmVyIGFzIGBpc1N0b3BwZWRgLlxuXHQgICAgQ2F0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnNlbGVjdG9yKGVyciwgdGhpcy5jYXVnaHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDYXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5yZW1vdmUodGhpcyk7XG5cdCAgICAgICAgcmVzdWx0LnN1YnNjcmliZSh0aGlzLmRlc3RpbmF0aW9uKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ2F0Y2hTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY29tYmluZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29tYmluZUFsbCA9IGNvbWJpbmVBbGxfMS5jb21iaW5lQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lQWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIGNvbWJpbmVMYXRlc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMzKTtcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnkgd2FpdGluZ1xuXHQgKiBmb3IgdGhlIG91dGVyIE9ic2VydmFibGUgdG8gY29tcGxldGUsIHRoZW4gYXBwbHlpbmcge0BsaW5rIGNvbWJpbmVMYXRlc3R9LlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBhcHBseWluZ1xuXHQgKiB7QGxpbmsgY29tYmluZUxhdGVzdH0gd2hlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFRha2VzIGFuIE9ic2VydmFibGUgb2YgT2JzZXJ2YWJsZXMsIGFuZCBjb2xsZWN0cyBhbGwgT2JzZXJ2YWJsZXMgZnJvbSBpdC5cblx0ICogT25jZSB0aGUgb3V0ZXIgT2JzZXJ2YWJsZSBjb21wbGV0ZXMsIGl0IHN1YnNjcmliZXMgdG8gYWxsIGNvbGxlY3RlZFxuXHQgKiBPYnNlcnZhYmxlcyBhbmQgY29tYmluZXMgdGhlaXIgdmFsdWVzIHVzaW5nIHRoZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cblx0ICogc3RyYXRlZ3ksIHN1Y2ggdGhhdDpcblx0ICogLSBFdmVyeSB0aW1lIGFuIGlubmVyIE9ic2VydmFibGUgZW1pdHMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cy5cblx0ICogLSBXaGVuIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlIGVtaXRzLCBpdCBlbWl0cyBhbGwgb2YgdGhlIGxhdGVzdCB2YWx1ZXMgYnk6XG5cdCAqICAgLSBJZiBhIGBwcm9qZWN0YCBmdW5jdGlvbiBpcyBwcm92aWRlZCwgaXQgaXMgY2FsbGVkIHdpdGggZWFjaCByZWNlbnQgdmFsdWVcblx0ICogICAgIGZyb20gZWFjaCBpbm5lciBPYnNlcnZhYmxlIGluIHdoYXRldmVyIG9yZGVyIHRoZXkgYXJyaXZlZCwgYW5kIHRoZSByZXN1bHRcblx0ICogICAgIG9mIHRoZSBgcHJvamVjdGAgZnVuY3Rpb24gaXMgd2hhdCBpcyBlbWl0dGVkIGJ5IHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogICAtIElmIHRoZXJlIGlzIG5vIGBwcm9qZWN0YCBmdW5jdGlvbiwgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBtb3N0IHJlY2VudFxuXHQgKiAgICAgdmFsdWVzIGlzIGVtaXR0ZWQgYnkgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgdHdvIGNsaWNrIGV2ZW50cyB0byBhIGZpbml0ZSBpbnRlcnZhbCBPYnNlcnZhYmxlLCB0aGVuIGFwcGx5IGNvbWJpbmVBbGw8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKE1hdGgucmFuZG9tKCkqMjAwMCkudGFrZSgzKVxuXHQgKiApLnRha2UoMik7XG5cdCAqIHZhciByZXN1bHQgPSBoaWdoZXJPcmRlci5jb21iaW5lQWxsKCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVMYXRlc3R9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gbWFwIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZXMgZnJvbSBlYWNoIGlubmVyIE9ic2VydmFibGUgaW50byBhIG5ldyByZXN1bHQuIFRha2VzIGVhY2ggb2YgdGhlIG1vc3Rcblx0ICogcmVjZW50IHZhbHVlcyBmcm9tIGVhY2ggY29sbGVjdGVkIGlubmVyIE9ic2VydmFibGUgYXMgYXJndW1lbnRzLCBpbiBvcmRlci5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgcmVzdWx0cyBvciBhcnJheXMgb2YgcmVjZW50XG5cdCAqIHZhbHVlcy5cblx0ICogQG1ldGhvZCBjb21iaW5lQWxsXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb21iaW5lQWxsKHByb2plY3QpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IGNvbWJpbmVMYXRlc3RfMS5Db21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuY29tYmluZUFsbCA9IGNvbWJpbmVBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb21iaW5lTGF0ZXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lTGF0ZXN0ID0gY29tYmluZUxhdGVzdF8xLmNvbWJpbmVMYXRlc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVMYXRlc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb25jYXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ1KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdCA9IGNvbmNhdF8xLmNvbmNhdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY29uY2F0QWxsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyOSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRBbGwgPSBjb25jYXRBbGxfMS5jb25jYXRBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDYpO1xuXHQvKipcblx0ICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieVxuXHQgKiBjb25jYXRlbmF0aW5nIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpbiBvcmRlci5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgYnkgcHV0dGluZyBvbmVcblx0ICogaW5uZXIgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdEFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogSm9pbnMgZXZlcnkgT2JzZXJ2YWJsZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgKGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUpLCBpblxuXHQgKiBhIHNlcmlhbCBmYXNoaW9uLiBJdCBzdWJzY3JpYmVzIHRvIGVhY2ggaW5uZXIgT2JzZXJ2YWJsZSBvbmx5IGFmdGVyIHRoZVxuXHQgKiBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlIGhhcyBjb21wbGV0ZWQsIGFuZCBtZXJnZXMgYWxsIG9mIHRoZWlyIHZhbHVlcyBpbnRvXG5cdCAqIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBfX1dhcm5pbmc6X18gSWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIE9ic2VydmFibGVzIHF1aWNrbHkgYW5kXG5cdCAqIGVuZGxlc3NseSwgYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpdCBlbWl0cyBnZW5lcmFsbHkgY29tcGxldGUgc2xvd2VyIHRoYW5cblx0ICogdGhlIHNvdXJjZSBlbWl0cywgeW91IGNhbiBydW4gaW50byBtZW1vcnkgaXNzdWVzIGFzIHRoZSBpbmNvbWluZyBPYnNlcnZhYmxlc1xuXHQgKiBjb2xsZWN0IGluIGFuIHVuYm91bmRlZCBidWZmZXIuXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRBbGxgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlQWxsYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcblx0ICogdG8gYDFgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcblx0ICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5jb25jYXRBbGwoKTtcblx0ICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaH1cblx0ICogQHNlZSB7QGxpbmsgemlwQWxsfVxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIGVtaXR0aW5nIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5uZXJcblx0ICogT2JzZXJ2YWJsZXMgY29uY2F0ZW5hdGVkLlxuXHQgKiBAbWV0aG9kIGNvbmNhdEFsbFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0QWxsKCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdEFsbCA9IGNvbmNhdEFsbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0QWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY29uY2F0TWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzMSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRNYXAgPSBjb25jYXRNYXBfMS5jb25jYXRNYXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZU1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzIpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLCBpbiBhIHNlcmlhbGl6ZWQgZmFzaGlvbiB3YWl0aW5nIGZvciBlYWNoIG9uZSB0byBjb21wbGV0ZSBiZWZvcmVcblx0ICogbWVyZ2luZyB0aGUgbmV4dC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuXHQgKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgY29uY2F0QWxsfS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0TWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG5cdCAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cblx0ICogcmV0dXJucyBhbiAoc28tY2FsbGVkIFwiaW5uZXJcIikgT2JzZXJ2YWJsZS4gRWFjaCBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpc1xuXHQgKiBjb25jYXRlbmF0ZWQgd2l0aCB0aGUgcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogX19XYXJuaW5nOl9fIGlmIHNvdXJjZSB2YWx1ZXMgYXJyaXZlIGVuZGxlc3NseSBhbmQgZmFzdGVyIHRoYW4gdGhlaXJcblx0ICogY29ycmVzcG9uZGluZyBpbm5lciBPYnNlcnZhYmxlcyBjYW4gY29tcGxldGUsIGl0IHdpbGwgcmVzdWx0IGluIG1lbW9yeSBpc3N1ZXNcblx0ICogYXMgaW5uZXIgT2JzZXJ2YWJsZXMgYW1hc3MgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlciB3YWl0aW5nIGZvciB0aGVpciB0dXJuIHRvXG5cdCAqIGJlIHN1YnNjcmliZWQgdG8uXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRNYXBgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlTWFwYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcblx0ICogdG8gYDFgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MuY29uY2F0TWFwKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cblx0ICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cblx0ICogT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBvYnNlcnZhYmxlIG9mIHZhbHVlcyBtZXJnZWQgZnJvbSB0aGUgcHJvamVjdGVkXG5cdCAqIE9ic2VydmFibGVzIGFzIHRoZXkgd2VyZSBzdWJzY3JpYmVkIHRvLCBvbmUgYXQgYSB0aW1lLiBPcHRpb25hbGx5LCB0aGVzZVxuXHQgKiB2YWx1ZXMgbWF5IGhhdmUgYmVlbiBwcm9qZWN0ZWQgZnJvbSBhIHBhc3NlZCBgcHJvamVjdFJlc3VsdGAgYXJndW1lbnQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuXHQgKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG5cdCAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgdGFraW5nIHZhbHVlcyBmcm9tIGVhY2ggcHJvamVjdGVkIGlubmVyXG5cdCAqIE9ic2VydmFibGUgc2VxdWVudGlhbGx5LlxuXHQgKiBAbWV0aG9kIGNvbmNhdE1hcFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0TWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZU1hcF8xLk1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdE1hcCA9IGNvbmNhdE1hcDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0LyoqXG5cdCAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuXHQgKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgbWVyZ2VBbGx9Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuXHQgKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG5cdCAqIHJldHVybnMgYW4gT2JzZXJ2YWJsZSwgYW5kIHRoZW4gbWVyZ2luZyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgYW5kXG5cdCAqIGVtaXR0aW5nIHRoZSByZXN1bHRzIG9mIHRoaXMgbWVyZ2VyLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gZWFjaCBsZXR0ZXIgdG8gYW4gT2JzZXJ2YWJsZSB0aWNraW5nIGV2ZXJ5IDEgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgbGV0dGVycyA9IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJyk7XG5cdCAqIHZhciByZXN1bHQgPSBsZXR0ZXJzLm1lcmdlTWFwKHggPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLm1hcChpID0+IHgraSlcblx0ICogKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCA/aW5kZXg6IG51bWJlcik6IE9ic2VydmFibGV9IHByb2plY3QgQSBmdW5jdGlvblxuXHQgKiB0aGF0LCB3aGVuIGFwcGxpZWQgdG8gYW4gaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmV0dXJucyBhblxuXHQgKiBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcblx0ICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcblx0ICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG5cdCAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcblx0ICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuXHQgKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG1lcmdpbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE9ic2VydmFibGVzIG9idGFpbmVkXG5cdCAqIGZyb20gdGhpcyB0cmFuc2Zvcm1hdGlvbi5cblx0ICogQG1ldGhvZCBtZXJnZU1hcFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkpO1xuXHR9XG5cdGV4cG9ydHMubWVyZ2VNYXAgPSBtZXJnZU1hcDtcblx0dmFyIE1lcmdlTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuXHQgICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICB9XG5cdCAgICBNZXJnZU1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlTWFwU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmNvbmN1cnJlbnQpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBPcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5NZXJnZU1hcE9wZXJhdG9yID0gTWVyZ2VNYXBPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgTWVyZ2VNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBNZXJnZU1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5TmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5TmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuXHQgICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgaXNoLCB2YWx1ZSwgaW5kZXgpKTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9ub3RpZnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuXHQgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLk1lcmdlTWFwU3Vic2NyaWJlciA9IE1lcmdlTWFwU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb25jYXRNYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0TWFwVG8gPSBjb25jYXRNYXBUb18xLmNvbmNhdE1hcFRvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZU1hcFRvXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNSk7XG5cdC8qKlxuXHQgKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgc2FtZSBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBtdWx0aXBsZVxuXHQgKiB0aW1lcyBpbiBhIHNlcmlhbGl6ZWQgZmFzaGlvbiBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGNvbmNhdE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcblx0ICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIEVhY2ggbmV3IGBpbm5lck9ic2VydmFibGVgXG5cdCAqIGluc3RhbmNlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGlzIGNvbmNhdGVuYXRlZCB3aXRoIHRoZSBwcmV2aW91c1xuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCBpbnN0YW5jZS5cblx0ICpcblx0ICogX19XYXJuaW5nOl9fIGlmIHNvdXJjZSB2YWx1ZXMgYXJyaXZlIGVuZGxlc3NseSBhbmQgZmFzdGVyIHRoYW4gdGhlaXJcblx0ICogY29ycmVzcG9uZGluZyBpbm5lciBPYnNlcnZhYmxlcyBjYW4gY29tcGxldGUsIGl0IHdpbGwgcmVzdWx0IGluIG1lbW9yeSBpc3N1ZXNcblx0ICogYXMgaW5uZXIgT2JzZXJ2YWJsZXMgYW1hc3MgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlciB3YWl0aW5nIGZvciB0aGVpciB0dXJuIHRvXG5cdCAqIGJlIHN1YnNjcmliZWQgdG8uXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRNYXBUb2AgaXMgZXF1aXZhbGVudCB0byBgbWVyZ2VNYXBUb2Agd2l0aCBjb25jdXJyZW5jeSBwYXJhbWV0ZXJcblx0ICogc2V0IHRvIGAxYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHRpY2sgZXZlcnkgc2Vjb25kIGZyb20gMCB0byAzLCB3aXRoIG5vIGNvbmN1cnJlbmN5PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmNvbmNhdE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIG9mIHZhbHVlcyBtZXJnZWQgdG9nZXRoZXIgYnkgam9pbmluZyB0aGVcblx0ICogcGFzc2VkIG9ic2VydmFibGUgd2l0aCBpdHNlbGYsIG9uZSBhZnRlciB0aGUgb3RoZXIsIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWRcblx0ICogZnJvbSB0aGUgc291cmNlLlxuXHQgKiBAbWV0aG9kIGNvbmNhdE1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb25jYXRNYXBUbyhpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZU1hcFRvXzEuTWVyZ2VNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdE1hcFRvID0gY29uY2F0TWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcFRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBzYW1lIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIG11bHRpcGxlXG5cdCAqIHRpbWVzIGluIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgbWVyZ2VNYXB9LCBidXQgbWFwcyBlYWNoIHZhbHVlIGFsd2F5c1xuXHQgKiB0byB0aGUgc2FtZSBpbm5lciBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gbWVyZ2VzIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBpbnRvIG9uZVxuXHQgKiBzaW5nbGUgT2JzZXJ2YWJsZSwgd2hpY2ggaXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgc3RhcnQgYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSB0aWNraW5nIGV2ZXJ5IDEgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLm1lcmdlTWFwVG8oUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlIGdpdmVuXG5cdCAqIGBpbm5lck9ic2VydmFibGVgIChhbmQgb3B0aW9uYWxseSB0cmFuc2Zvcm1lZCB0aHJvdWdoIGByZXN1bHRTZWxlY3RvcmApIGV2ZXJ5XG5cdCAqIHRpbWUgYSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBtZXJnZU1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZU1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpKTtcblx0fVxuXHRleHBvcnRzLm1lcmdlTWFwVG8gPSBtZXJnZU1hcFRvO1xuXHQvLyBUT0RPOiBGaWd1cmUgb3V0IGNvcnJlY3Qgc2lnbmF0dXJlIGhlcmU6IGFuIE9wZXJhdG9yPE9ic2VydmFibGU8VD4sIFI+XG5cdC8vICAgICAgIG5lZWRzIHRvIGltcGxlbWVudCBjYWxsKG9ic2VydmVyOiBTdWJzY3JpYmVyPFI+KTogU3Vic2NyaWJlcjxPYnNlcnZhYmxlPFQ+PlxuXHR2YXIgTWVyZ2VNYXBUb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlTWFwVG9PcGVyYXRvcihpc2gsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICB9XG5cdCAgICBNZXJnZU1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWVyZ2VNYXBUb1N1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMuaXNoLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmNvbmN1cnJlbnQpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBUb09wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk1lcmdlTWFwVG9PcGVyYXRvciA9IE1lcmdlTWFwVG9PcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgTWVyZ2VNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1lcmdlTWFwVG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWVyZ2VNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlzaCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSB0aGlzLnJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgICAgIHZhciBpc2ggPSB0aGlzLmlzaDtcblx0ICAgICAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICAgICAgdGhpcy5faW5uZXJTdWIoaXNoLCBkZXN0aW5hdGlvbiwgcmVzdWx0U2VsZWN0b3IsIHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIGRlc3RpbmF0aW9uLCByZXN1bHRTZWxlY3RvciwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBpc2gsIHZhbHVlLCBpbmRleCkpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG5cdCAgICAgICAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5U2VsZWN0UmVzdWx0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLnRyeVNlbGVjdFJlc3VsdCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuXHQgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBUb1N1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuTWVyZ2VNYXBUb1N1YnNjcmliZXIgPSBNZXJnZU1hcFRvU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGNvdW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb3VudCA9IGNvdW50XzEuY291bnQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQ291bnRzIHRoZSBudW1iZXIgb2YgZW1pc3Npb25zIG9uIHRoZSBzb3VyY2UgYW5kIGVtaXRzIHRoYXQgbnVtYmVyIHdoZW4gdGhlXG5cdCAqIHNvdXJjZSBjb21wbGV0ZXMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UZWxscyBob3cgbWFueSB2YWx1ZXMgd2VyZSBlbWl0dGVkLCB3aGVuIHRoZSBzb3VyY2Vcblx0ICogY29tcGxldGVzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYGNvdW50YCB0cmFuc2Zvcm1zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB2YWx1ZXMgaW50byBhbiBPYnNlcnZhYmxlIHRoYXRcblx0ICogZW1pdHMgYSBzaW5nbGUgdmFsdWUgdGhhdCByZXByZXNlbnRzIHRoZSBudW1iZXIgb2YgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlXG5cdCAqIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgdGVybWluYXRlcyB3aXRoIGFuIGVycm9yLCBgY291bnRgXG5cdCAqIHdpbGwgcGFzcyB0aGlzIGVycm9yIG5vdGlmaWNhdGlvbiBhbG9uZyB3aXRob3V0IGVtaXR0aW5nIGFuIHZhbHVlIGZpcnN0LiBJZlxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUgZG9lcyBub3QgdGVybWluYXRlIGF0IGFsbCwgYGNvdW50YCB3aWxsIG5laXRoZXIgZW1pdFxuXHQgKiBhIHZhbHVlIG5vciB0ZXJtaW5hdGUuIFRoaXMgb3BlcmF0b3IgdGFrZXMgYW4gb3B0aW9uYWwgYHByZWRpY2F0ZWAgZnVuY3Rpb25cblx0ICogYXMgYXJndW1lbnQsIGluIHdoaWNoIGNhc2UgdGhlIG91dHB1dCBlbWlzc2lvbiB3aWxsIHJlcHJlc2VudCB0aGUgbnVtYmVyIG9mXG5cdCAqIHNvdXJjZSB2YWx1ZXMgdGhhdCBtYXRjaGVkIGB0cnVlYCB3aXRoIHRoZSBgcHJlZGljYXRlYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnRzIGhvdyBtYW55IHNlY29uZHMgaGF2ZSBwYXNzZWQgYmVmb3JlIHRoZSBmaXJzdCBjbGljayBoYXBwZW5lZDwvY2FwdGlvbj5cblx0ICogdmFyIHNlY29uZHMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgc2Vjb25kc0JlZm9yZUNsaWNrID0gc2Vjb25kcy50YWtlVW50aWwoY2xpY2tzKTtcblx0ICogdmFyIHJlc3VsdCA9IHNlY29uZHNCZWZvcmVDbGljay5jb3VudCgpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db3VudHMgaG93IG1hbnkgb2RkIG51bWJlcnMgYXJlIHRoZXJlIGJldHdlZW4gMSBhbmQgNzwvY2FwdGlvbj5cblx0ICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDcpO1xuXHQgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb3VudChpID0+IGkgJSAyID09PSAxKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgbWF4fVxuXHQgKiBAc2VlIHtAbGluayBtaW59XG5cdCAqIEBzZWUge0BsaW5rIHJlZHVjZX1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaTogbnVtYmVyLCBzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBib29sZWFufSBbcHJlZGljYXRlXSBBXG5cdCAqIGJvb2xlYW4gZnVuY3Rpb24gdG8gc2VsZWN0IHdoYXQgdmFsdWVzIGFyZSB0byBiZSBjb3VudGVkLiBJdCBpcyBwcm92aWRlZCB3aXRoXG5cdCAqIGFyZ3VtZW50cyBvZjpcblx0ICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIC0gYGluZGV4YDogdGhlICh6ZXJvLWJhc2VkKSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiAtIGBzb3VyY2VgOiB0aGUgc291cmNlIE9ic2VydmFibGUgaW5zdGFuY2UgaXRzZWxmLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIG9uZSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSBjb3VudCBhc1xuXHQgKiBkZXNjcmliZWQgYWJvdmUuXG5cdCAqIEBtZXRob2QgY291bnRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvdW50KHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQ291bnRPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLmNvdW50ID0gY291bnQ7XG5cdHZhciBDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENvdW50T3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIENvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvdW50T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIENvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuY291bnQrKztcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJlZGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrLCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5jb3VudCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb3VudFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBkZW1hdGVyaWFsaXplXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzOSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZV8xLmRlbWF0ZXJpYWxpemU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbWF0ZXJpYWxpemUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCB0cmFuc2Zvcm1zIE5vdGlmaWNhdGlvbiBvYmplY3RzIGludG8gdGhlIGl0ZW1zIG9yIG5vdGlmaWNhdGlvbnMgdGhleSByZXByZXNlbnQuXG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGFuZCBub3RpZmljYXRpb25zIGVtYmVkZGVkIGluIE5vdGlmaWNhdGlvbiBvYmplY3RzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGRlbWF0ZXJpYWxpemVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlbWF0ZXJpYWxpemUoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZTtcblx0dmFyIERlTWF0ZXJpYWxpemVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBEZU1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlTWF0ZXJpYWxpemVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICB9XG5cdCAgICBEZU1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YWx1ZS5vYnNlcnZlKHRoaXMuZGVzdGluYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGVib3VuY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlYm91bmNlID0gZGVib3VuY2VfMS5kZWJvdW5jZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogRW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbmx5IGFmdGVyIGEgcGFydGljdWxhciB0aW1lIHNwYW5cblx0ICogZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUgaGFzIHBhc3NlZCB3aXRob3V0IGFub3RoZXIgc291cmNlIGVtaXNzaW9uLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBkZWJvdW5jZVRpbWV9LCBidXQgdGhlIHRpbWUgc3BhbiBvZlxuXHQgKiBlbWlzc2lvbiBzaWxlbmNlIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZGVib3VuY2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBkZWJvdW5jZWAgZGVsYXlzIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IGRyb3BzIHByZXZpb3VzXG5cdCAqIHBlbmRpbmcgZGVsYXllZCBlbWlzc2lvbnMgaWYgYSBuZXcgdmFsdWUgYXJyaXZlcyBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIFRoaXMgb3BlcmF0b3Iga2VlcHMgdHJhY2sgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLCBhbmQgc3Bhd25zIGEgZHVyYXRpb24gT2JzZXJ2YWJsZSBieSBjYWxsaW5nIHRoZVxuXHQgKiBgZHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24uIFRoZSB2YWx1ZSBpcyBlbWl0dGVkIG9ubHkgd2hlbiB0aGUgZHVyYXRpb25cblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgYW5kIGlmIG5vIG90aGVyIHZhbHVlIHdhcyBlbWl0dGVkIG9uXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBzaW5jZSB0aGUgZHVyYXRpb24gT2JzZXJ2YWJsZSB3YXMgc3Bhd25lZC4gSWYgYSBuZXdcblx0ICogdmFsdWUgYXBwZWFycyBiZWZvcmUgdGhlIGR1cmF0aW9uIE9ic2VydmFibGUgZW1pdHMsIHRoZSBwcmV2aW91cyB2YWx1ZSB3aWxsXG5cdCAqIGJlIGRyb3BwZWQgYW5kIHdpbGwgbm90IGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBMaWtlIHtAbGluayBkZWJvdW5jZVRpbWV9LCB0aGlzIGlzIGEgcmF0ZS1saW1pdGluZyBvcGVyYXRvciwgYW5kIGFsc28gYVxuXHQgKiBkZWxheS1saWtlIG9wZXJhdG9yIHNpbmNlIG91dHB1dCBlbWlzc2lvbnMgZG8gbm90IG5lY2Vzc2FyaWx5IG9jY3VyIGF0IHRoZVxuXHQgKiBzYW1lIHRpbWUgYXMgdGhleSBkaWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhZnRlciBhIGJ1cnN0IG9mIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5kZWJvdW5jZSgoKSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYXVkaXR9XG5cdCAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZX1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IE9ic2VydmFibGV8UHJvbWlzZX0gZHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uXG5cdCAqIHRoYXQgcmVjZWl2ZXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgZm9yIGNvbXB1dGluZyB0aGUgdGltZW91dFxuXHQgKiBkdXJhdGlvbiBmb3IgZWFjaCBzb3VyY2UgdmFsdWUsIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gT2JzZXJ2YWJsZSByZXR1cm5lZCBieVxuXHQgKiBgZHVyYXRpb25TZWxlY3RvcmAsIGFuZCBtYXkgZHJvcCBzb21lIHZhbHVlcyBpZiB0aGV5IG9jY3VyIHRvbyBmcmVxdWVudGx5LlxuXHQgKiBAbWV0aG9kIGRlYm91bmNlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWJvdW5jZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmRlYm91bmNlID0gZGVib3VuY2U7XG5cdHZhciBEZWJvdW5jZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBEZWJvdW5jZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVib3VuY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWJvdW5jZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlYm91bmNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5kdXJhdGlvblNlbGVjdG9yLmNhbGwodGhpcywgdmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlLCByZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKTtcblx0ICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZVN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGVib3VuY2VUaW1lXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWJvdW5jZVRpbWUgPSBkZWJvdW5jZVRpbWVfMS5kZWJvdW5jZVRpbWU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdC8qKlxuXHQgKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9ubHkgYWZ0ZXIgYSBwYXJ0aWN1bGFyIHRpbWUgc3BhblxuXHQgKiBoYXMgcGFzc2VkIHdpdGhvdXQgYW5vdGhlciBzb3VyY2UgZW1pc3Npb24uXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlbGF5fSwgYnV0IHBhc3NlcyBvbmx5IHRoZSBtb3N0XG5cdCAqIHJlY2VudCB2YWx1ZSBmcm9tIGVhY2ggYnVyc3Qgb2YgZW1pc3Npb25zLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kZWJvdW5jZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBkZWJvdW5jZVRpbWVgIGRlbGF5cyB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCBkcm9wc1xuXHQgKiBwcmV2aW91cyBwZW5kaW5nIGRlbGF5ZWQgZW1pc3Npb25zIGlmIGEgbmV3IHZhbHVlIGFycml2ZXMgb24gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGlzIG9wZXJhdG9yIGtlZXBzIHRyYWNrIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSBmcm9tIHRoZVxuXHQgKiBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoYXQgb25seSB3aGVuIGBkdWVUaW1lYCBlbm91Z2ggdGltZSBoYXMgcGFzc2VkXG5cdCAqIHdpdGhvdXQgYW55IG90aGVyIHZhbHVlIGFwcGVhcmluZyBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGEgbmV3IHZhbHVlXG5cdCAqIGFwcGVhcnMgYmVmb3JlIGBkdWVUaW1lYCBzaWxlbmNlIG9jY3VycywgdGhlIHByZXZpb3VzIHZhbHVlIHdpbGwgYmUgZHJvcHBlZFxuXHQgKiBhbmQgd2lsbCBub3QgYmUgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIFRoaXMgaXMgYSByYXRlLWxpbWl0aW5nIG9wZXJhdG9yLCBiZWNhdXNlIGl0IGlzIGltcG9zc2libGUgZm9yIG1vcmUgdGhhbiBvbmVcblx0ICogdmFsdWUgdG8gYmUgZW1pdHRlZCBpbiBhbnkgdGltZSB3aW5kb3cgb2YgZHVyYXRpb24gYGR1ZVRpbWVgLCBidXQgaXQgaXMgYWxzb1xuXHQgKiBhIGRlbGF5LWxpa2Ugb3BlcmF0b3Igc2luY2Ugb3V0cHV0IGVtaXNzaW9ucyBkbyBub3Qgb2NjdXIgYXQgdGhlIHNhbWUgdGltZSBhc1xuXHQgKiB0aGV5IGRpZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuIE9wdGlvbmFsbHkgdGFrZXMgYSB7QGxpbmsgU2NoZWR1bGVyfSBmb3Jcblx0ICogbWFuYWdpbmcgdGltZXJzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhZnRlciBhIGJ1cnN0IG9mIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5kZWJvdW5jZVRpbWUoMTAwMCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGF1ZGl0VGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBkdWVUaW1lIFRoZSB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWVcblx0ICogdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBmb3IgdGhlIHdpbmRvdyBvZlxuXHQgKiB0aW1lIHJlcXVpcmVkIHRvIHdhaXQgZm9yIGVtaXNzaW9uIHNpbGVuY2UgYmVmb3JlIGVtaXR0aW5nIHRoZSBtb3N0IHJlY2VudFxuXHQgKiBzb3VyY2UgdmFsdWUuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuXHQgKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSB0aW1lb3V0IGZvciBlYWNoIHZhbHVlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgYGR1ZVRpbWVgLCBhbmQgbWF5IGRyb3Agc29tZSB2YWx1ZXMgaWYgdGhleSBvY2N1clxuXHQgKiB0b28gZnJlcXVlbnRseS5cblx0ICogQG1ldGhvZCBkZWJvdW5jZVRpbWVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlVGltZShkdWVUaW1lLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWJvdW5jZVRpbWVPcGVyYXRvcihkdWVUaW1lLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmRlYm91bmNlVGltZSA9IGRlYm91bmNlVGltZTtcblx0dmFyIERlYm91bmNlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZU9wZXJhdG9yKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBEZWJvdW5jZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlYm91bmNlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdWVUaW1lLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZVRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVib3VuY2VUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVib3VuY2VUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSBkdWVUaW1lO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTtcblx0ICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1ZVRpbWUsIHRoaXMpKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5kZWJvdW5jZWROZXh0KCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmRlYm91bmNlZE5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jbGVhckRlYm91bmNlKCk7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyRGVib3VuY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChkZWJvdW5jZWRTdWJzY3JpcHRpb24gIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoZGVib3VuY2VkU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgZGVib3VuY2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlYm91bmNlVGltZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHtcblx0ICAgIHN1YnNjcmliZXIuZGVib3VuY2VkTmV4dCgpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGRlZmF1bHRJZkVtcHR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5XzEuZGVmYXVsdElmRW1wdHk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogRW1pdHMgYSBnaXZlbiB2YWx1ZSBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgY29tcGxldGVzIHdpdGhvdXQgZW1pdHRpbmcgYW55XG5cdCAqIGBuZXh0YCB2YWx1ZSwgb3RoZXJ3aXNlIG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHR1cm5zIG91dCB0byBiZSBlbXB0eSwgdGhlblxuXHQgKiB0aGlzIG9wZXJhdG9yIHdpbGwgZW1pdCBhIGRlZmF1bHQgdmFsdWUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmF1bHRJZkVtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgZGVmYXVsdElmRW1wdHlgIGVtaXRzIHRoZSB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgb3IgYVxuXHQgKiBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgaXMgZW1wdHkgKGNvbXBsZXRlcyB3aXRob3V0XG5cdCAqIGhhdmluZyBlbWl0dGVkIGFueSBgbmV4dGAgdmFsdWUpLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZiBubyBjbGlja3MgaGFwcGVuIGluIDUgc2Vjb25kcywgdGhlbiBlbWl0IFwibm8gY2xpY2tzXCI8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBjbGlja3NCZWZvcmVGaXZlID0gY2xpY2tzLnRha2VVbnRpbChSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMDApKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrc0JlZm9yZUZpdmUuZGVmYXVsdElmRW1wdHkoJ25vIGNsaWNrcycpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBlbXB0eX1cblx0ICogQHNlZSB7QGxpbmsgbGFzdH1cblx0ICpcblx0ICogQHBhcmFtIHthbnl9IFtkZWZhdWx0VmFsdWU9bnVsbF0gVGhlIGRlZmF1bHQgdmFsdWUgdXNlZCBpZiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgaXMgZW1wdHkuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBlaXRoZXIgdGhlIHNwZWNpZmllZFxuXHQgKiBgZGVmYXVsdFZhbHVlYCBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgbm8gaXRlbXMsIG9yIHRoZSB2YWx1ZXMgZW1pdHRlZFxuXHQgKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgZGVmYXVsdElmRW1wdHlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlZmF1bHRJZkVtcHR5KGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IG51bGw7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlZmF1bHRJZkVtcHR5T3BlcmF0b3IoZGVmYXVsdFZhbHVlKSk7XG5cdH1cblx0ZXhwb3J0cy5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5O1xuXHR2YXIgRGVmYXVsdElmRW1wdHlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgfVxuXHQgICAgRGVmYXVsdElmRW1wdHlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlZmF1bHRWYWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGVsYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5ID0gZGVsYXlfMS5kZWxheTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIGlzRGF0ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBOb3RpZmljYXRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYxKTtcblx0LyoqXG5cdCAqIERlbGF5cyB0aGUgZW1pc3Npb24gb2YgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYSBnaXZlbiB0aW1lb3V0IG9yXG5cdCAqIHVudGlsIGEgZ2l2ZW4gRGF0ZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRpbWUgc2hpZnRzIGVhY2ggaXRlbSBieSBzb21lIHNwZWNpZmllZCBhbW91bnQgb2Zcblx0ICogbWlsbGlzZWNvbmRzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kZWxheS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogSWYgdGhlIGRlbGF5IGFyZ3VtZW50IGlzIGEgTnVtYmVyLCB0aGlzIG9wZXJhdG9yIHRpbWUgc2hpZnRzIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBieSB0aGF0IGFtb3VudCBvZiB0aW1lIGV4cHJlc3NlZCBpbiBtaWxsaXNlY29uZHMuIFRoZSByZWxhdGl2ZVxuXHQgKiB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cblx0ICpcblx0ICogSWYgdGhlIGRlbGF5IGFyZ3VtZW50IGlzIGEgRGF0ZSwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc3RhcnQgb2YgdGhlXG5cdCAqIE9ic2VydmFibGUgZXhlY3V0aW9uIHVudGlsIHRoZSBnaXZlbiBkYXRlIG9jY3Vycy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgZWFjaCBjbGljayBieSBvbmUgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheSgxMDAwKTsgLy8gZWFjaCBjbGljayBlbWl0dGVkIGFmdGVyIDEgc2Vjb25kXG5cdCAqIGRlbGF5ZWRDbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBhbGwgY2xpY2tzIHVudGlsIGEgZnV0dXJlIGRhdGUgaGFwcGVuczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGRhdGUgPSBuZXcgRGF0ZSgnTWFyY2ggMTUsIDIwNTAgMTI6MDA6MDAnKTsgLy8gaW4gdGhlIGZ1dHVyZVxuXHQgKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheShkYXRlKTsgLy8gY2xpY2sgZW1pdHRlZCBvbmx5IGFmdGVyIHRoYXQgZGF0ZVxuXHQgKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2VUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBkZWxheVdoZW59XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfERhdGV9IGRlbGF5IFRoZSBkZWxheSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgKGEgYG51bWJlcmApIG9yXG5cdCAqIGEgYERhdGVgIHVudGlsIHdoaWNoIHRoZSBlbWlzc2lvbiBvZiB0aGUgc291cmNlIGl0ZW1zIGlzIGRlbGF5ZWQuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Jcblx0ICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgdGltZS1zaGlmdCBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgdGltZW91dCBvciBEYXRlLlxuXHQgKiBAbWV0aG9kIGRlbGF5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWxheShkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlRGVsYXkgPSBpc0RhdGVfMS5pc0RhdGUoZGVsYXkpO1xuXHQgICAgdmFyIGRlbGF5Rm9yID0gYWJzb2x1dGVEZWxheSA/ICgrZGVsYXkgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZGVsYXkpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlPcGVyYXRvcihkZWxheUZvciwgc2NoZWR1bGVyKSk7XG5cdH1cblx0ZXhwb3J0cy5kZWxheSA9IGRlbGF5O1xuXHR2YXIgRGVsYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWxheU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBEZWxheU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVsYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXksIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIERlbGF5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmVycm9yZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2U7XG5cdCAgICAgICAgdmFyIHF1ZXVlID0gc291cmNlLnF1ZXVlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gc3RhdGUuZGVzdGluYXRpb247XG5cdCAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDAgJiYgKHF1ZXVlWzBdLnRpbWUgLSBzY2hlZHVsZXIubm93KCkpIDw9IDApIHtcblx0ICAgICAgICAgICAgcXVldWUuc2hpZnQoKS5ub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHZhciBkZWxheV8xID0gTWF0aC5tYXgoMCwgcXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSk7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGRlbGF5XzEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc291cmNlLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwge1xuXHQgICAgICAgICAgICBzb3VyY2U6IHRoaXMsIGRlc3RpbmF0aW9uOiB0aGlzLmRlc3RpbmF0aW9uLCBzY2hlZHVsZXI6IHNjaGVkdWxlclxuXHQgICAgICAgIH0pKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuXHQgICAgICAgIGlmICh0aGlzLmVycm9yZWQgPT09IHRydWUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgRGVsYXlNZXNzYWdlKHNjaGVkdWxlci5ub3coKSArIHRoaXMuZGVsYXksIG5vdGlmaWNhdGlvbik7XG5cdCAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKG1lc3NhZ2UpO1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoc2NoZWR1bGVyKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24oTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLmVycm9yZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMucXVldWUgPSBbXTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHR2YXIgRGVsYXlNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlbGF5TWVzc2FnZSh0aW1lLCBub3RpZmljYXRpb24pIHtcblx0ICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuXHQgICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIERlbGF5TWVzc2FnZTtcblx0fSgpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBkZWxheVdoZW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5V2hlbiA9IGRlbGF5V2hlbl8xLmRlbGF5V2hlbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBEZWxheXMgdGhlIGVtaXNzaW9uIG9mIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGEgZ2l2ZW4gdGltZSBzcGFuXG5cdCAqIGRldGVybWluZWQgYnkgdGhlIGVtaXNzaW9ucyBvZiBhbm90aGVyIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlbGF5fSwgYnV0IHRoZSB0aW1lIHNwYW4gb2YgdGhlXG5cdCAqIGRlbGF5IGR1cmF0aW9uIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZGVsYXlXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgZGVsYXlXaGVuYCB0aW1lIHNoaWZ0cyBlYWNoIGVtaXR0ZWQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYVxuXHQgKiB0aW1lIHNwYW4gZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUuIFdoZW4gdGhlIHNvdXJjZSBlbWl0cyBhIHZhbHVlLFxuXHQgKiB0aGUgYGRlbGF5RHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIHNvdXJjZSB2YWx1ZSBhc1xuXHQgKiBhcmd1bWVudCwgYW5kIHNob3VsZCByZXR1cm4gYW4gT2JzZXJ2YWJsZSwgY2FsbGVkIHRoZSBcImR1cmF0aW9uXCIgT2JzZXJ2YWJsZS5cblx0ICogVGhlIHNvdXJjZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IHdoZW4gdGhlIGR1cmF0aW9uXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSBvciBjb21wbGV0ZXMuXG5cdCAqXG5cdCAqIE9wdGlvbmFsbHksIGBkZWxheVdoZW5gIHRha2VzIGEgc2Vjb25kIGFyZ3VtZW50LCBgc3Vic2NyaXB0aW9uRGVsYXlgLCB3aGljaFxuXHQgKiBpcyBhbiBPYnNlcnZhYmxlLiBXaGVuIGBzdWJzY3JpcHRpb25EZWxheWAgZW1pdHMgaXRzIGZpcnN0IHZhbHVlIG9yXG5cdCAqIGNvbXBsZXRlcywgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQgdG8gYW5kIHN0YXJ0cyBiZWhhdmluZyBsaWtlXG5cdCAqIGRlc2NyaWJlZCBpbiB0aGUgcHJldmlvdXMgcGFyYWdyYXBoLiBJZiBgc3Vic2NyaXB0aW9uRGVsYXlgIGlzIG5vdCBwcm92aWRlZCxcblx0ICogYGRlbGF5V2hlbmAgd2lsbCBzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFzIHNvb24gYXMgdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkRlbGF5IGVhY2ggY2xpY2sgYnkgYSByYW5kb20gYW1vdW50IG9mIHRpbWUsIGJldHdlZW4gMCBhbmQgNSBzZWNvbmRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheVdoZW4oZXZlbnQgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKE1hdGgucmFuZG9tKCkgKiA1MDAwKVxuXHQgKiApO1xuXHQgKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZX0gZGVsYXlEdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdFxuXHQgKiByZXR1cm5zIGFuIE9ic2VydmFibGUgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoaWNoXG5cdCAqIGlzIHRoZW4gdXNlZCB0byBkZWxheSB0aGUgZW1pc3Npb24gb2YgdGhhdCBpdGVtIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuXHQgKiB1bnRpbCB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBmcm9tIHRoaXMgZnVuY3Rpb24gZW1pdHMgYSB2YWx1ZS5cblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzdWJzY3JpcHRpb25EZWxheSBBbiBPYnNlcnZhYmxlIHRoYXQgdHJpZ2dlcnMgdGhlXG5cdCAqIHN1YnNjcmlwdGlvbiB0byB0aGUgc291cmNlIE9ic2VydmFibGUgb25jZSBpdCBlbWl0cyBhbnkgdmFsdWUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgYnkgYW4gYW1vdW50IG9mIHRpbWUgc3BlY2lmaWVkIGJ5IHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG5cdCAqIGBkZWxheUR1cmF0aW9uU2VsZWN0b3JgLlxuXHQgKiBAbWV0aG9kIGRlbGF5V2hlblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZGVsYXlXaGVuKGRlbGF5RHVyYXRpb25TZWxlY3Rvciwgc3Vic2NyaXB0aW9uRGVsYXkpIHtcblx0ICAgIGlmIChzdWJzY3JpcHRpb25EZWxheSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlKHRoaXMsIHN1YnNjcmlwdGlvbkRlbGF5KVxuXHQgICAgICAgICAgICAubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWxheVdoZW5PcGVyYXRvcihkZWxheUR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmRlbGF5V2hlbiA9IGRlbGF5V2hlbjtcblx0dmFyIERlbGF5V2hlbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlbGF5V2hlbk9wZXJhdG9yKGRlbGF5RHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgRGVsYXlXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWxheVdoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5V2hlbk9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWxheVdoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhEZWxheVdoZW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVsYXlXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucyA9IFtdO1xuXHQgICAgICAgIHRoaXMudmFsdWVzID0gW107XG5cdCAgICB9XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KG91dGVyVmFsdWUpO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaW5uZXJTdWIpO1xuXHQgICAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgZGVsYXlOb3RpZmllciA9IHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKHZhbHVlKTtcblx0ICAgICAgICAgICAgaWYgKGRlbGF5Tm90aWZpZXIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJ5RGVsYXkoZGVsYXlOb3RpZmllciwgdmFsdWUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5yZW1vdmVTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbklkeCA9IHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgaWYgKHN1YnNjcmlwdGlvbklkeCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc1tzdWJzY3JpcHRpb25JZHhdO1xuXHQgICAgICAgICAgICB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JZHgsIDEpO1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlcy5zcGxpY2Uoc3Vic2NyaXB0aW9uSWR4LCAxKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLnRyeURlbGF5ID0gZnVuY3Rpb24gKGRlbGF5Tm90aWZpZXIsIHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIG5vdGlmaWVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkZWxheU5vdGlmaWVyLCB2YWx1ZSk7XG5cdCAgICAgICAgdGhpcy5hZGQobm90aWZpZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMucHVzaChub3RpZmllclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMucHVzaCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkICYmIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5V2hlblN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlKHNvdXJjZSwgc3Vic2NyaXB0aW9uRGVsYXkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkRlbGF5ID0gc3Vic2NyaXB0aW9uRGVsYXk7XG5cdCAgICB9XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uRGVsYXkuc3Vic2NyaWJlKG5ldyBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHBhcmVudCwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VTdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Tb3VyY2UoKTtcblx0ICAgIH07XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQuZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnN1YnNjcmliZVRvU291cmNlKCk7XG5cdCAgICB9O1xuXHQgICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zdWJzY3JpYmVUb1NvdXJjZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuc291cmNlU3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzLnBhcmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGlzdGluY3RVbnRpbENoYW5nZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWRfMS5kaXN0aW5jdFVudGlsQ2hhbmdlZDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBhcmUgZGlzdGluY3QgYnkgY29tcGFyaXNvbiBmcm9tIHRoZSBwcmV2aW91cyBpdGVtLlxuXHQgKiBJZiBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoZW4gaXQgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggaXRlbSB0byB0ZXN0IGZvciB3aGV0aGVyIG9yIG5vdCB0aGF0IHZhbHVlIHNob3VsZCBiZSBlbWl0dGVkLlxuXHQgKiBJZiBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gaXMgbm90IHByb3ZpZGVkLCBhbiBlcXVhbGl0eSBjaGVjayBpcyB1c2VkIGJ5IGRlZmF1bHQuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjb21wYXJlXSBvcHRpb25hbCBjb21wYXJpc29uIGZ1bmN0aW9uIGNhbGxlZCB0byB0ZXN0IGlmIGFuIGl0ZW0gaXMgZGlzdGluY3QgZnJvbSB0aGUgcHJldmlvdXMgaXRlbSBpbiB0aGUgc291cmNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgd2l0aCBkaXN0aW5jdCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgZGlzdGluY3RVbnRpbENoYW5nZWRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRpc3RpbmN0VW50aWxDaGFuZ2VkKGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5kaXN0aW5jdFVudGlsQ2hhbmdlZCA9IGRpc3RpbmN0VW50aWxDaGFuZ2VkO1xuXHR2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5jb21wYXJlID0gY29tcGFyZTtcblx0ICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY29tcGFyZSwgdGhpcy5rZXlTZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29tcGFyZSwga2V5U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaGFzS2V5ID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb21wYXJlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHgsIHkpIHtcblx0ICAgICAgICByZXR1cm4geCA9PT0geTtcblx0ICAgIH07XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGtleVNlbGVjdG9yID0gdGhpcy5rZXlTZWxlY3Rvcjtcblx0ICAgICAgICB2YXIga2V5ID0gdmFsdWU7XG5cdCAgICAgICAgaWYgKGtleVNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgIGtleSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5rZXlTZWxlY3RvcikodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNLZXkpIHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmNvbXBhcmUpKHRoaXMua2V5LCBrZXkpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmhhc0tleSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChCb29sZWFuKHJlc3VsdCkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RpbmN0VW50aWxDaGFuZ2VkLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZG9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRvID0gZG9fMS5fZG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogUGVyZm9ybSBhIHNpZGUgZWZmZWN0IGZvciBldmVyeSBlbWlzc2lvbiBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCByZXR1cm5cblx0ICogYW4gT2JzZXJ2YWJsZSB0aGF0IGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SW50ZXJjZXB0cyBlYWNoIGVtaXNzaW9uIG9uIHRoZSBzb3VyY2UgYW5kIHJ1bnMgYVxuXHQgKiBmdW5jdGlvbiwgYnV0IHJldHVybnMgYW4gb3V0cHV0IHdoaWNoIGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhIG1pcnJvcmVkIE9ic2VydmFibGUgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgbW9kaWZpZWQgc28gdGhhdFxuXHQgKiB0aGUgcHJvdmlkZWQgT2JzZXJ2ZXIgaXMgY2FsbGVkIHRvIHBlcmZvcm0gYSBzaWRlIGVmZmVjdCBmb3IgZXZlcnkgdmFsdWUsXG5cdCAqIGVycm9yLCBhbmQgY29tcGxldGlvbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UuIEFueSBlcnJvcnMgdGhhdCBhcmUgdGhyb3duIGluXG5cdCAqIHRoZSBhZm9yZW1lbnRpb25lZCBPYnNlcnZlciBvciBoYW5kbGVycyBhcmUgc2FmZWx5IHNlbnQgZG93biB0aGUgZXJyb3IgcGF0aFxuXHQgKiBvZiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIFRoaXMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgeW91ciBPYnNlcnZhYmxlcyBmb3IgdGhlIGNvcnJlY3QgdmFsdWVzXG5cdCAqIG9yIHBlcmZvcm1pbmcgb3RoZXIgc2lkZSBlZmZlY3RzLlxuXHQgKlxuXHQgKiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCB0byBhIGBzdWJzY3JpYmVgIG9uIHRoZSBPYnNlcnZhYmxlLiBJZiB0aGUgT2JzZXJ2YWJsZVxuXHQgKiByZXR1cm5lZCBieSBgZG9gIGlzIG5vdCBzdWJzY3JpYmVkLCB0aGUgc2lkZSBlZmZlY3RzIHNwZWNpZmllZCBieSB0aGVcblx0ICogT2JzZXJ2ZXIgd2lsbCBuZXZlciBoYXBwZW4uIGBkb2AgdGhlcmVmb3JlIHNpbXBseSBzcGllcyBvbiBleGlzdGluZ1xuXHQgKiBleGVjdXRpb24sIGl0IGRvZXMgbm90IHRyaWdnZXIgYW4gZXhlY3V0aW9uIHRvIGhhcHBlbiBsaWtlIGBzdWJzY3JpYmVgIGRvZXMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrLCB3aGlsZSBhbHNvIGxvZ2dpbmcgdGhlIGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcG9zaXRpb25zID0gY2xpY2tzXG5cdCAqICAgLmRvKGV2ID0+IGNvbnNvbGUubG9nKGV2KSlcblx0ICogICAubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuXHQgKiBwb3NpdGlvbnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqIEBzZWUge0BsaW5rIHN1YnNjcmliZX1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbn0gW25leHRPck9ic2VydmVyXSBBIG5vcm1hbCBPYnNlcnZlciBvYmplY3Qgb3IgYVxuXHQgKiBjYWxsYmFjayBmb3IgYG5leHRgLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbZXJyb3JdIENhbGxiYWNrIGZvciBlcnJvcnMgaW4gdGhlIHNvdXJjZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBsZXRlXSBDYWxsYmFjayBmb3IgdGhlIGNvbXBsZXRpb24gb2YgdGhlIHNvdXJjZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBpZGVudGljYWwgdG8gdGhlIHNvdXJjZSwgYnV0IHJ1bnMgdGhlXG5cdCAqIHNwZWNpZmllZCBPYnNlcnZlciBvciBjYWxsYmFjayhzKSBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAbWV0aG9kIGRvXG5cdCAqIEBuYW1lIGRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZG8obmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRG9PcGVyYXRvcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSk7XG5cdH1cblx0ZXhwb3J0cy5fZG8gPSBfZG87XG5cdHZhciBEb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgICAgIHRoaXMubmV4dE9yT2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcblx0ICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuXHQgICAgfVxuXHQgICAgRG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5leHRPck9ic2VydmVyLCB0aGlzLmVycm9yLCB0aGlzLmNvbXBsZXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERvT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIERvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHNhZmVTdWJzY3JpYmVyKTtcblx0ICAgICAgICB0aGlzLnNhZmVTdWJzY3JpYmVyID0gc2FmZVN1YnNjcmliZXI7XG5cdCAgICB9XG5cdCAgICBEb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5lcnJvcihlcnIpO1xuXHQgICAgICAgIGlmIChzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24pIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG5cdCAgICAgICAgc2FmZVN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRG9TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZXhwYW5kXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5leHBhbmQgPSBleHBhbmRfMS5leHBhbmQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgd2hlcmUgZm9yIGVhY2ggaXRlbSBpbiB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSBzdXBwbGllZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIGVhY2ggaXRlbSxcblx0ICogcmVzdWx0aW5nIGluIGEgbmV3IHZhbHVlIHRvIHRoZW4gYmUgYXBwbGllZCBhZ2FpbiB3aXRoIHRoZSBmdW5jdGlvbi5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcHJvamVjdCB0aGUgZnVuY3Rpb24gZm9yIHByb2plY3RpbmcgdGhlIG5leHQgZW1pdHRlZCBpdGVtIG9mIHRoZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnRdIHRoZSBtYXggbnVtYmVyIG9mIG9ic2VydmFibGVzIHRoYXQgY2FuIGJlIGNyZWF0ZWQgY29uY3VycmVudGx5LiBkZWZhdWx0cyB0byBpbmZpbml0eS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZyB0aGUgZXhwYW5zaW9ucy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSBjb250YWluaW5nIHRoZSBleHBhbnNpb25zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBleHBhbmRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGV4cGFuZChwcm9qZWN0LCBjb25jdXJyZW50LCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IHVuZGVmaW5lZDsgfVxuXHQgICAgY29uY3VycmVudCA9IChjb25jdXJyZW50IHx8IDApIDwgMSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IGNvbmN1cnJlbnQ7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBFeHBhbmRPcGVyYXRvcihwcm9qZWN0LCBjb25jdXJyZW50LCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmV4cGFuZCA9IGV4cGFuZDtcblx0dmFyIEV4cGFuZE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEV4cGFuZE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIEV4cGFuZE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRXhwYW5kU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMuY29uY3VycmVudCwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRXhwYW5kT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuRXhwYW5kT3BlcmF0b3IgPSBFeHBhbmRPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRXhwYW5kU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRXhwYW5kU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEV4cGFuZFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpIHtcblx0ICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHJlc3VsdCA9IGFyZy5yZXN1bHQsIHZhbHVlID0gYXJnLnZhbHVlLCBpbmRleCA9IGFyZy5pbmRleDtcblx0ICAgICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZVRvUHJvamVjdGlvbihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG5cdCAgICB9O1xuXHQgICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMucHJvamVjdCkodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICghdGhpcy5zY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgcmVzdWx0OiByZXN1bHQsIHZhbHVlOiB2YWx1ZSwgaW5kZXg6IGluZGV4IH07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoLCAwLCBzdGF0ZSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uID0gZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG5cdCAgICB9O1xuXHQgICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fbmV4dChpbm5lclZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblx0ICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUtLTtcblx0ICAgICAgICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRXhwYW5kU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5FeHBhbmRTdWJzY3JpYmVyID0gRXhwYW5kU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhwYW5kLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZmlsdGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1Nyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maWx0ZXIgPSBmaWx0ZXJfMS5maWx0ZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbHRlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIEZpbHRlciBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBvbmx5IGVtaXR0aW5nIHRob3NlIHRoYXRcblx0ICogc2F0aXNmeSBhIHNwZWNpZmllZCBwcmVkaWNhdGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlXG5cdCAqIFtBcnJheS5wcm90b3R5cGUuZmlsdGVyKCldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZpbHRlciksXG5cdCAqIGl0IG9ubHkgZW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgaWYgaXQgcGFzc2VzIGEgY3JpdGVyaW9uIGZ1bmN0aW9uLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9maWx0ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFNpbWlsYXIgdG8gdGhlIHdlbGwta25vd24gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZCwgdGhpcyBvcGVyYXRvclxuXHQgKiB0YWtlcyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHBhc3NlcyB0aGVtIHRocm91Z2ggYSBgcHJlZGljYXRlYFxuXHQgKiBmdW5jdGlvbiBhbmQgb25seSBlbWl0cyB0aG9zZSB2YWx1ZXMgdGhhdCB5aWVsZGVkIGB0cnVlYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IGNsaWNrIGV2ZW50cyB3aG9zZSB0YXJnZXQgd2FzIGEgRElWIGVsZW1lbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBjbGlja3NPbkRpdnMgPSBjbGlja3MuZmlsdGVyKGV2ID0+IGV2LnRhcmdldC50YWdOYW1lID09PSAnRElWJyk7XG5cdCAqIGNsaWNrc09uRGl2cy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGRpc3RpbmN0fVxuXHQgKiBAc2VlIHtAbGluayBkaXN0aW5jdEtleX1cblx0ICogQHNlZSB7QGxpbmsgZGlzdGluY3RVbnRpbENoYW5nZWR9XG5cdCAqIEBzZWUge0BsaW5rIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkfVxuXHQgKiBAc2VlIHtAbGluayBpZ25vcmVFbGVtZW50c31cblx0ICogQHNlZSB7QGxpbmsgcGFydGl0aW9ufVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogYm9vbGVhbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdGhhdFxuXHQgKiBldmFsdWF0ZXMgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAsXG5cdCAqIHRoZSB2YWx1ZSBpcyBlbWl0dGVkLCBpZiBgZmFsc2VgIHRoZSB2YWx1ZSBpcyBub3QgcGFzc2VkIHRvIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2Vcblx0ICogZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyXG5cdCAqIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuXHQgKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSB0aGF0IHdlcmVcblx0ICogYWxsb3dlZCBieSB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEBtZXRob2QgZmlsdGVyXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaWx0ZXJPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcpKTtcblx0fVxuXHRleHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcblx0dmFyIEZpbHRlck9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZpbHRlck9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG5cdCAgICB9XG5cdCAgICBGaWx0ZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEZpbHRlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMudGhpc0FyZykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGaWx0ZXJPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRmlsdGVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmlsdGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZpbHRlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgLy8gdGhlIHRyeSBjYXRjaCBibG9jayBiZWxvdyBpcyBsZWZ0IHNwZWNpZmljYWxseSBmb3Jcblx0ICAgIC8vIG9wdGltaXphdGlvbiBhbmQgcGVyZiByZWFzb25zLiBhIHRyeUNhdGNoZXIgaXMgbm90IG5lY2Vzc2FyeSBoZXJlLlxuXHQgICAgRmlsdGVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmlsdGVyU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBmaW5hbGx5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1OSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maW5hbGx5ID0gZmluYWxseV8xLl9maW5hbGx5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maW5hbGx5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgd2lsbCBjYWxsIGEgc3BlY2lmaWVkIGZ1bmN0aW9uIHdoZW5cblx0ICogdGhlIHNvdXJjZSB0ZXJtaW5hdGVzIG9uIGNvbXBsZXRlIG9yIGVycm9yLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmaW5hbGx5U2VsZWN0b3IgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gc291cmNlIHRlcm1pbmF0ZXMuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBzb3VyY2UsIGJ1dCB3aWxsIGNhbGwgdGhlIHNwZWNpZmllZCBmdW5jdGlvbiBvbiB0ZXJtaW5hdGlvbi5cblx0ICogQG1ldGhvZCBmaW5hbGx5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZmluYWxseShmaW5hbGx5U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEZpbmFsbHlPcGVyYXRvcihmaW5hbGx5U2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLl9maW5hbGx5ID0gX2ZpbmFsbHk7XG5cdHZhciBGaW5hbGx5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRmluYWxseU9wZXJhdG9yKGZpbmFsbHlTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZmluYWxseVNlbGVjdG9yID0gZmluYWxseVNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgRmluYWxseU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmluYWxseVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5maW5hbGx5U2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmluYWxseU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGaW5hbGx5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmluYWxseVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBGaW5hbGx5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZmluYWxseVNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oZmluYWxseVNlbGVjdG9yKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gRmluYWxseVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluYWxseS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZpcnN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maXJzdCA9IGZpcnN0XzEuZmlyc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgRW1wdHlFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjIpO1xuXHQvKipcblx0ICogRW1pdHMgb25seSB0aGUgZmlyc3QgdmFsdWUgKG9yIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IG1lZXRzIHNvbWUgY29uZGl0aW9uKVxuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIG9ubHkgdGhlIGZpcnN0IHZhbHVlLiBPciBlbWl0cyBvbmx5IHRoZSBmaXJzdFxuXHQgKiB2YWx1ZSB0aGF0IHBhc3NlcyBzb21lIHRlc3QuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2ZpcnN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGBmaXJzdGAgZW1pdHMgdGhlIGZpcnN0IHZhbHVlIG9mIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSwgdGhlbiBjb21wbGV0ZXMuIElmIGNhbGxlZCB3aXRoIGEgYHByZWRpY2F0ZWAgZnVuY3Rpb24sIGBmaXJzdGBcblx0ICogZW1pdHMgdGhlIGZpcnN0IHZhbHVlIG9mIHRoZSBzb3VyY2UgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgY29uZGl0aW9uLiBJdFxuXHQgKiBtYXkgYWxzbyB0YWtlIGEgYHJlc3VsdFNlbGVjdG9yYCBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSBvdXRwdXQgdmFsdWUgZnJvbVxuXHQgKiB0aGUgaW5wdXQgdmFsdWUsIGFuZCBhIGBkZWZhdWx0VmFsdWVgIHRvIGVtaXQgaW4gY2FzZSB0aGUgc291cmNlIGNvbXBsZXRlc1xuXHQgKiBiZWZvcmUgaXQgaXMgYWJsZSB0byBlbWl0IGEgdmFsaWQgdmFsdWUuIFRocm93cyBhbiBlcnJvciBpZiBgZGVmYXVsdFZhbHVlYFxuXHQgKiB3YXMgbm90IHByb3ZpZGVkIGFuZCBhIG1hdGNoaW5nIGVsZW1lbnQgaXMgbm90IGZvdW5kLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IG9ubHkgdGhlIGZpcnN0IGNsaWNrIHRoYXQgaGFwcGVucyBvbiB0aGUgRE9NPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmZpcnN0KCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIHRoZSBmaXJzdCBjbGljayB0aGF0IGhhcHBlbnMgb24gYSBESVY8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MuZmlyc3QoZXYgPT4gZXYudGFyZ2V0LnRhZ05hbWUgPT09ICdESVYnKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZmlsdGVyfVxuXHQgKiBAc2VlIHtAbGluayBmaW5kfVxuXHQgKiBAc2VlIHtAbGluayB0YWtlfVxuXHQgKlxuXHQgKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcblx0ICogY2FsbGJhY2sgaWYgdGhlIE9ic2VydmFibGUgY29tcGxldGVzIGJlZm9yZSBhbnkgYG5leHRgIG5vdGlmaWNhdGlvbiB3YXMgc2VudC5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogYm9vbGVhbn0gW3ByZWRpY2F0ZV1cblx0ICogQW4gb3B0aW9uYWwgZnVuY3Rpb24gY2FsbGVkIHdpdGggZWFjaCBpdGVtIHRvIHRlc3QgZm9yIGNvbmRpdGlvbiBtYXRjaGluZy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IFJ9IFtyZXN1bHRTZWxlY3Rvcl0gQSBmdW5jdGlvbiB0b1xuXHQgKiBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuXHQgKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzXG5cdCAqIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgdGhhdCB3YXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLlxuXHQgKiAtIGBpbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHNvdXJjZS5cblx0ICogQHBhcmFtIHtSfSBbZGVmYXVsdFZhbHVlXSBUaGUgZGVmYXVsdCB2YWx1ZSBlbWl0dGVkIGluIGNhc2Ugbm8gdmFsaWQgdmFsdWVcblx0ICogd2FzIGZvdW5kIG9uIHRoZSBzb3VyY2UuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VHxSPn0gYW4gT2JzZXJ2YWJsZSBvZiB0aGUgZmlyc3QgaXRlbSB0aGF0IG1hdGNoZXMgdGhlXG5cdCAqIGNvbmRpdGlvbi5cblx0ICogQG1ldGhvZCBmaXJzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZmlyc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaXJzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMuZmlyc3QgPSBmaXJzdDtcblx0dmFyIEZpcnN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRmlyc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIEZpcnN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmlyc3RTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5kZWZhdWx0VmFsdWUsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZpcnN0T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEZpcnN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmlyc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRmlyc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgaWYgKHRoaXMucHJlZGljYXRlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5fZW1pdCh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2VtaXQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9lbWl0RmluYWwodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9lbWl0RmluYWwocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9lbWl0RmluYWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgaWYgKCF0aGlzLmhhc0NvbXBsZXRlZCAmJiB0eXBlb2YgdGhpcy5kZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICghdGhpcy5oYXNDb21wbGV0ZWQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZpcnN0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maXJzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8qKlxuXHQgKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBPYnNlcnZhYmxlIG9yIGEgc2VxdWVuY2Ugd2FzIHF1ZXJpZWQgYnV0IGhhcyBub1xuXHQgKiBlbGVtZW50cy5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZmlyc3R9XG5cdCAqIEBzZWUge0BsaW5rIGxhc3R9XG5cdCAqIEBzZWUge0BsaW5rIHNpbmdsZX1cblx0ICpcblx0ICogQGNsYXNzIEVtcHR5RXJyb3Jcblx0ICovXG5cdHZhciBFbXB0eUVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhFbXB0eUVycm9yLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRW1wdHlFcnJvcigpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnbm8gZWxlbWVudHMgaW4gc2VxdWVuY2UnKTtcblx0ICAgICAgICB0aGlzLm5hbWUgPSAnRW1wdHlFcnJvcic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gRW1wdHlFcnJvcjtcblx0fShFcnJvcikpO1xuXHRleHBvcnRzLkVtcHR5RXJyb3IgPSBFbXB0eUVycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1FbXB0eUVycm9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZ3JvdXBCeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ3JvdXBCeSA9IGdyb3VwQnlfMS5ncm91cEJ5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cEJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdHZhciBNYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY1KTtcblx0dmFyIEZhc3RNYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY3KTtcblx0LyoqXG5cdCAqIEdyb3VwcyB0aGUgaXRlbXMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlIGFjY29yZGluZyB0byBhIHNwZWNpZmllZCBjcml0ZXJpb24sXG5cdCAqIGFuZCBlbWl0cyB0aGVzZSBncm91cGVkIGl0ZW1zIGFzIGBHcm91cGVkT2JzZXJ2YWJsZXNgLCBvbmVcblx0ICoge0BsaW5rIEdyb3VwZWRPYnNlcnZhYmxlfSBwZXIgZ3JvdXAuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZ3JvdXBCeS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IEt9IGtleVNlbGVjdG9yIGEgZnVuY3Rpb24gdGhhdCBleHRyYWN0cyB0aGUga2V5XG5cdCAqIGZvciBlYWNoIGl0ZW0uXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBSfSBbZWxlbWVudFNlbGVjdG9yXSBhIGZ1bmN0aW9uIHRoYXQgZXh0cmFjdHMgdGhlXG5cdCAqIHJldHVybiBlbGVtZW50IGZvciBlYWNoIGl0ZW0uXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oZ3JvdXBlZDogR3JvdXBlZE9ic2VydmFibGU8SyxSPik6IE9ic2VydmFibGU8YW55Pn0gW2R1cmF0aW9uU2VsZWN0b3JdXG5cdCAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIE9ic2VydmFibGUgdG8gZGV0ZXJtaW5lIGhvdyBsb25nIGVhY2ggZ3JvdXAgc2hvdWxkXG5cdCAqIGV4aXN0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPEdyb3VwZWRPYnNlcnZhYmxlPEssUj4+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcblx0ICogR3JvdXBlZE9ic2VydmFibGVzLCBlYWNoIG9mIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdW5pcXVlIGtleSB2YWx1ZSBhbmQgZWFjaFxuXHQgKiBvZiB3aGljaCBlbWl0cyB0aG9zZSBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNoYXJlIHRoYXQga2V5XG5cdCAqIHZhbHVlLlxuXHQgKiBAbWV0aG9kIGdyb3VwQnlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGdyb3VwQnkoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgR3JvdXBCeU9wZXJhdG9yKHRoaXMsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmdyb3VwQnkgPSBncm91cEJ5O1xuXHR2YXIgR3JvdXBCeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEdyb3VwQnlPcGVyYXRvcihzb3VyY2UsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIEdyb3VwQnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEdyb3VwQnlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMua2V5U2VsZWN0b3IsIHRoaXMuZWxlbWVudFNlbGVjdG9yLCB0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gR3JvdXBCeU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBHcm91cEJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoR3JvdXBCeVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBHcm91cEJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZ3JvdXBzID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5hZGQoZGVzdGluYXRpb24pO1xuXHQgICAgfVxuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGtleTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBrZXkgPSB0aGlzLmtleVNlbGVjdG9yKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fZ3JvdXAodmFsdWUsIGtleSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9ncm91cCA9IGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuXHQgICAgICAgIGlmICghZ3JvdXBzKSB7XG5cdCAgICAgICAgICAgIGdyb3VwcyA9IHRoaXMuZ3JvdXBzID0gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycgPyBuZXcgRmFzdE1hcF8xLkZhc3RNYXAoKSA6IG5ldyBNYXBfMS5NYXAoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLmdldChrZXkpO1xuXHQgICAgICAgIGlmICghZ3JvdXApIHtcblx0ICAgICAgICAgICAgZ3JvdXBzLnNldChrZXksIGdyb3VwID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCkpO1xuXHQgICAgICAgICAgICB2YXIgZ3JvdXBlZE9ic2VydmFibGUgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCwgdGhpcyk7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdER1cmF0aW9uKGtleSwgZ3JvdXApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChncm91cGVkT2JzZXJ2YWJsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLmVsZW1lbnRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50KHZhbHVlLCBncm91cCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnRyeUdyb3VwTmV4dCh2YWx1ZSwgZ3JvdXApO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX3NlbGVjdEVsZW1lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGdyb3VwKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmVsZW1lbnRTZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMudHJ5R3JvdXBOZXh0KHJlc3VsdCwgZ3JvdXApO1xuXHQgICAgfTtcblx0ICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2VsZWN0RHVyYXRpb24gPSBmdW5jdGlvbiAoa2V5LCBncm91cCkge1xuXHQgICAgICAgIHZhciBkdXJhdGlvbjtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3RvcihuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFkZChkdXJhdGlvbi5zdWJzY3JpYmUobmV3IEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHRoaXMpKSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnRyeUdyb3VwTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSwgZ3JvdXApIHtcblx0ICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3Vwcztcblx0ICAgICAgICBpZiAoZ3JvdXBzKSB7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICBncm91cC5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgZ3JvdXBzLmNsZWFyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3Vwcztcblx0ICAgICAgICBpZiAoZ3JvdXBzKSB7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICBncm91cC5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgZ3JvdXBzLmNsZWFyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdGhpcy5ncm91cHMuZGVsZXRlKGtleSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1Vuc3Vic2NyaWJlZCAmJiAhdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSA9IHRydWU7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEdyb3VwQnlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhHcm91cER1cmF0aW9uU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHBhcmVudCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXHQgICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgIH1cblx0ICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMudHJ5RXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDtcblx0ICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMua2V5KTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDtcblx0ICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMua2V5KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gR3JvdXBEdXJhdGlvblN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0LyoqXG5cdCAqIEFuIE9ic2VydmFibGUgcmVwcmVzZW50aW5nIHZhbHVlcyBiZWxvbmdpbmcgdG8gdGhlIHNhbWUgZ3JvdXAgcmVwcmVzZW50ZWQgYnlcblx0ICogYSBjb21tb24ga2V5LiBUaGUgdmFsdWVzIGVtaXR0ZWQgYnkgYSBHcm91cGVkT2JzZXJ2YWJsZSBjb21lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgY29tbW9uIGtleSBpcyBhdmFpbGFibGUgYXMgdGhlIGZpZWxkIGBrZXlgIG9uIGFcblx0ICogR3JvdXBlZE9ic2VydmFibGUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBjbGFzcyBHcm91cGVkT2JzZXJ2YWJsZTxLLCBUPlxuXHQgKi9cblx0dmFyIEdyb3VwZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhHcm91cGVkT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXBTdWJqZWN0LCByZWZDb3VudFN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXHQgICAgICAgIHRoaXMuZ3JvdXBTdWJqZWN0ID0gZ3JvdXBTdWJqZWN0O1xuXHQgICAgICAgIHRoaXMucmVmQ291bnRTdWJzY3JpcHRpb24gPSByZWZDb3VudFN1YnNjcmlwdGlvbjtcblx0ICAgIH1cblx0ICAgIEdyb3VwZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlZkNvdW50U3Vic2NyaXB0aW9uID0gX2EucmVmQ291bnRTdWJzY3JpcHRpb24sIGdyb3VwU3ViamVjdCA9IF9hLmdyb3VwU3ViamVjdDtcblx0ICAgICAgICBpZiAocmVmQ291bnRTdWJzY3JpcHRpb24gJiYgIXJlZkNvdW50U3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQobmV3IElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ocmVmQ291bnRTdWJzY3JpcHRpb24pKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChncm91cFN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcblx0ICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBHcm91cGVkT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkdyb3VwZWRPYnNlcnZhYmxlID0gR3JvdXBlZE9ic2VydmFibGU7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHBhcmVudCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICAgIHBhcmVudC5jb3VudCsrO1xuXHQgICAgfVxuXHQgICAgSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50O1xuXHQgICAgICAgIGlmICghcGFyZW50LmlzVW5zdWJzY3JpYmVkICYmICF0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcblx0ICAgICAgICAgICAgcGFyZW50LmNvdW50IC09IDE7XG5cdCAgICAgICAgICAgIGlmIChwYXJlbnQuY291bnQgPT09IDAgJiYgcGFyZW50LmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUpIHtcblx0ICAgICAgICAgICAgICAgIHBhcmVudC51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cEJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgTWFwUG9seWZpbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY2KTtcblx0ZXhwb3J0cy5NYXAgPSByb290XzEucm9vdC5NYXAgfHwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1hcFBvbHlmaWxsXzEuTWFwUG9seWZpbGw7IH0pKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBNYXBQb2x5ZmlsbCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXBQb2x5ZmlsbCgpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuXHQgICAgICAgIHRoaXMuX2tleXMgPSBbXTtcblx0ICAgIH1cblx0ICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgICByZXR1cm4gaSA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLl92YWx1ZXNbaV07XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgICBpZiAoaSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XG5cdCAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcblx0ICAgICAgICAgICAgdGhpcy5zaXplKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuXHQgICAgICAgIGlmIChpID09PSAtMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgdGhpcy5zaXplLS07XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcblx0ICAgICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgfTtcblx0ICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCB0aGlzQXJnKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkrKykge1xuXHQgICAgICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuX3ZhbHVlc1tpXSwgdGhpcy5fa2V5c1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBQb2x5ZmlsbDtcblx0fSgpKTtcblx0ZXhwb3J0cy5NYXBQb2x5ZmlsbCA9IE1hcFBvbHlmaWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQb2x5ZmlsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBGYXN0TWFwID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZhc3RNYXAoKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcblx0ICAgIH1cblx0ICAgIEZhc3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlc1trZXldID0gbnVsbDtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWVzW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleV07XG5cdCAgICB9O1xuXHQgICAgRmFzdE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuXHQgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiB2YWx1ZXNba2V5XSAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB2YWx1ZXNba2V5XSwga2V5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGYXN0TWFwO1xuXHR9KCkpO1xuXHRleHBvcnRzLkZhc3RNYXAgPSBGYXN0TWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1GYXN0TWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgaWdub3JlRWxlbWVudHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmlnbm9yZUVsZW1lbnRzID0gaWdub3JlRWxlbWVudHNfMS5pZ25vcmVFbGVtZW50cztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aWdub3JlRWxlbWVudHMuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBub29wXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4OSk7XG5cdC8qKlxuXHQgKiBJZ25vcmVzIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgb25seSBwYXNzZXMgY2FsbHMgb2YgYGNvbXBsZXRlYCBvciBgZXJyb3JgLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2lnbm9yZUVsZW1lbnRzLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBlbXB0eSBPYnNlcnZhYmxlIHRoYXQgb25seSBjYWxscyBgY29tcGxldGVgXG5cdCAqIG9yIGBlcnJvcmAsIGJhc2VkIG9uIHdoaWNoIG9uZSBpcyBjYWxsZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGlnbm9yZUVsZW1lbnRzXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBpZ25vcmVFbGVtZW50cygpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IElnbm9yZUVsZW1lbnRzT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5pZ25vcmVFbGVtZW50cyA9IGlnbm9yZUVsZW1lbnRzO1xuXHQ7XG5cdHZhciBJZ25vcmVFbGVtZW50c09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIElnbm9yZUVsZW1lbnRzT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBJZ25vcmVFbGVtZW50c09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSWdub3JlRWxlbWVudHNPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuXHQgICAgICAgIG5vb3BfMS5ub29wKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVFbGVtZW50cy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGF1ZGl0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5hdWRpdCA9IGF1ZGl0XzEuYXVkaXQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIElnbm9yZXMgc291cmNlIHZhbHVlcyBmb3IgYSBkdXJhdGlvbiBkZXRlcm1pbmVkIGJ5IGFub3RoZXIgT2JzZXJ2YWJsZSwgdGhlblxuXHQgKiBlbWl0cyB0aGUgbW9zdCByZWNlbnQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gcmVwZWF0cyB0aGlzXG5cdCAqIHByb2Nlc3MuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGF1ZGl0VGltZX0sIGJ1dCB0aGUgc2lsZW5jaW5nXG5cdCAqIGR1cmF0aW9uIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvYXVkaXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBhdWRpdGAgaXMgc2ltaWxhciB0byBgdGhyb3R0bGVgLCBidXQgZW1pdHMgdGhlIGxhc3QgdmFsdWUgZnJvbSB0aGUgc2lsZW5jZWRcblx0ICogdGltZSB3aW5kb3csIGluc3RlYWQgb2YgdGhlIGZpcnN0IHZhbHVlLiBgYXVkaXRgIGVtaXRzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZVxuXHQgKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYXMgc29vbiBhcyBpdHMgaW50ZXJuYWxcblx0ICogdGltZXIgYmVjb21lcyBkaXNhYmxlZCwgYW5kIGlnbm9yZXMgc291cmNlIHZhbHVlcyB3aGlsZSB0aGUgdGltZXIgaXMgZW5hYmxlZC5cblx0ICogSW5pdGlhbGx5LCB0aGUgdGltZXIgaXMgZGlzYWJsZWQuIEFzIHNvb24gYXMgdGhlIGZpcnN0IHNvdXJjZSB2YWx1ZSBhcnJpdmVzLFxuXHQgKiB0aGUgdGltZXIgaXMgZW5hYmxlZCBieSBjYWxsaW5nIHRoZSBgZHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24gd2l0aCB0aGVcblx0ICogc291cmNlIHZhbHVlLCB3aGljaCByZXR1cm5zIHRoZSBcImR1cmF0aW9uXCIgT2JzZXJ2YWJsZS4gV2hlbiB0aGUgZHVyYXRpb25cblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgdGhlIHRpbWVyIGlzIGRpc2FibGVkLCB0aGVuIHRoZSBtb3N0XG5cdCAqIHJlY2VudCBzb3VyY2UgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGlzIHByb2Nlc3Ncblx0ICogcmVwZWF0cyBmb3IgdGhlIG5leHQgc291cmNlIHZhbHVlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5hdWRpdChldiA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGV9XG5cdCAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBkdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb25cblx0ICogdGhhdCByZWNlaXZlcyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBmb3IgY29tcHV0aW5nIHRoZSBzaWxlbmNpbmdcblx0ICogZHVyYXRpb24sIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgcmF0ZS1saW1pdGluZyBvZlxuXHQgKiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgYXVkaXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGF1ZGl0KGR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMuYXVkaXQgPSBhdWRpdDtcblx0dmFyIEF1ZGl0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQXVkaXRPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIEF1ZGl0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBBdWRpdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEF1ZGl0T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEF1ZGl0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXVkaXRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQXVkaXRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5kdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHZhbHVlID0gX2EudmFsdWUsIGhhc1ZhbHVlID0gX2EuaGFzVmFsdWUsIHRocm90dGxlZCA9IF9hLnRocm90dGxlZDtcblx0ICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRocm90dGxlZCk7XG5cdCAgICAgICAgICAgIHRoaXMudGhyb3R0bGVkID0gbnVsbDtcblx0ICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChoYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHRoaXMuY2xlYXJUaHJvdHRsZSgpO1xuXHQgICAgfTtcblx0ICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEF1ZGl0U3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBhdWRpdFRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDczKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmF1ZGl0VGltZSA9IGF1ZGl0VGltZV8xLmF1ZGl0VGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXRUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIElnbm9yZXMgc291cmNlIHZhbHVlcyBmb3IgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMsIHRoZW4gZW1pdHMgdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIHJlcGVhdHMgdGhpcyBwcm9jZXNzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbiBpdCBzZWVzIGEgc291cmNlIHZhbHVlcywgaXQgaWdub3JlcyB0aGF0IHBsdXNcblx0ICogdGhlIG5leHQgb25lcyBmb3IgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGl0IGVtaXRzIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2F1ZGl0VGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYGF1ZGl0VGltZWAgaXMgc2ltaWxhciB0byBgdGhyb3R0bGVUaW1lYCwgYnV0IGVtaXRzIHRoZSBsYXN0IHZhbHVlIGZyb20gdGhlXG5cdCAqIHNpbGVuY2VkIHRpbWUgd2luZG93LCBpbnN0ZWFkIG9mIHRoZSBmaXJzdCB2YWx1ZS4gYGF1ZGl0VGltZWAgZW1pdHMgdGhlIG1vc3Rcblx0ICogcmVjZW50IHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBhcyBzb29uIGFzXG5cdCAqIGl0cyBpbnRlcm5hbCB0aW1lciBiZWNvbWVzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoaWxlIHRoZVxuXHQgKiB0aW1lciBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Rcblx0ICogc291cmNlIHZhbHVlIGFycml2ZXMsIHRoZSB0aW1lciBpcyBlbmFibGVkLiBBZnRlciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcyAob3Jcblx0ICogdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBoYXMgcGFzc2VkLFxuXHQgKiB0aGUgdGltZXIgaXMgZGlzYWJsZWQsIHRoZW4gdGhlIG1vc3QgcmVjZW50IHNvdXJjZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZVxuXHQgKiBvdXRwdXQgT2JzZXJ2YWJsZSwgYW5kIHRoaXMgcHJvY2VzcyByZXBlYXRzIGZvciB0aGUgbmV4dCBzb3VyY2UgdmFsdWUuXG5cdCAqIE9wdGlvbmFsbHkgdGFrZXMgYSB7QGxpbmsgU2NoZWR1bGVyfSBmb3IgbWFuYWdpbmcgdGltZXJzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5hdWRpdFRpbWUoMTAwMCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaW1lIHRvIHdhaXQgYmVmb3JlIGVtaXR0aW5nIHRoZSBtb3N0IHJlY2VudCBzb3VyY2Vcblx0ICogdmFsdWUsIG1lYXN1cmVkIGluIG1pbGxpc2Vjb25kcyBvciB0aGUgdGltZSB1bml0IGRldGVybWluZWQgaW50ZXJuYWxseVxuXHQgKiBieSB0aGUgb3B0aW9uYWwgYHNjaGVkdWxlcmAuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuXHQgKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSByYXRlLWxpbWl0aW5nIGJlaGF2aW9yLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgcmF0ZS1saW1pdGluZyBvZlxuXHQgKiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgYXVkaXRUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBhdWRpdFRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0VGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmF1ZGl0VGltZSA9IGF1ZGl0VGltZTtcblx0dmFyIEF1ZGl0VGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEF1ZGl0VGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBBdWRpdFRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEF1ZGl0VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXVkaXRUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEF1ZGl0VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEF1ZGl0VGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBdWRpdFRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBBdWRpdFRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1cmF0aW9uLCB0aGlzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEF1ZGl0VGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyVGhyb3R0bGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgdmFsdWUgPSBfYS52YWx1ZSwgaGFzVmFsdWUgPSBfYS5oYXNWYWx1ZSwgdGhyb3R0bGVkID0gX2EudGhyb3R0bGVkO1xuXHQgICAgICAgIGlmICh0aHJvdHRsZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGhhc1ZhbHVlKSB7XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBdWRpdFRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTmV4dChzdWJzY3JpYmVyKSB7XG5cdCAgICBzdWJzY3JpYmVyLmNsZWFyVGhyb3R0bGUoKTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdFRpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBsYXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5sYXN0ID0gbGFzdF8xLmxhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBsYXN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEl0IG9wdGlvbmFsbHkgdGFrZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gYXMgYSBwYXJhbWV0ZXIsIGluIHdoaWNoIGNhc2UsIHJhdGhlciB0aGFuIGVtaXR0aW5nXG5cdCAqIHRoZSBsYXN0IGl0ZW0gZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSB3aWxsIGVtaXQgdGhlIGxhc3QgaXRlbVxuXHQgKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2xhc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEB0aHJvd3Mge0VtcHR5RXJyb3J9IERlbGl2ZXJzIGFuIEVtcHR5RXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYFxuXHQgKiBjYWxsYmFjayBpZiB0aGUgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgYmVmb3JlIGFueSBgbmV4dGAgbm90aWZpY2F0aW9uIHdhcyBzZW50LlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVkaWNhdGUgLSB0aGUgY29uZGl0aW9uIGFueSBzb3VyY2UgZW1pdHRlZCBpdGVtIGhhcyB0byBzYXRpc2Z5LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgbGFzdCBpdGVtIHNhdGlzZnlpbmcgdGhlIGdpdmVuIGNvbmRpdGlvblxuXHQgKiBmcm9tIHRoZSBzb3VyY2UsIG9yIGFuIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gaWYgbm8gc3VjaCBpdGVtcyBhcmUgZW1pdHRlZC5cblx0ICogQHRocm93cyAtIFRocm93cyBpZiBubyBpdGVtcyB0aGF0IG1hdGNoIHRoZSBwcmVkaWNhdGUgYXJlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGxhc3Rcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGxhc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBMYXN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCB0aGlzKSk7XG5cdH1cblx0ZXhwb3J0cy5sYXN0ID0gbGFzdDtcblx0dmFyIExhc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBMYXN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICBMYXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTGFzdFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmRlZmF1bHRWYWx1ZSwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTGFzdE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBMYXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTGFzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSByZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIExhc3RTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBsZXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDc3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxldCA9IGxldF8xLmxldFByb3RvO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGV0QmluZCA9IGxldF8xLmxldFByb3RvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1sZXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKipcblx0ICogQHBhcmFtIGZ1bmNcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cblx0ICogQG1ldGhvZCBsZXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGxldFByb3RvKGZ1bmMpIHtcblx0ICAgIHJldHVybiBmdW5jKHRoaXMpO1xuXHR9XG5cdGV4cG9ydHMubGV0UHJvdG8gPSBsZXRQcm90bztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bGV0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZXZlcnlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDc5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmV2ZXJ5ID0gZXZlcnlfMS5ldmVyeTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlcnkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aGV0aGVyIG9yIG5vdCBldmVyeSBpdGVtIG9mIHRoZSBzb3VyY2Ugc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gc3BlY2lmaWVkLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVkaWNhdGUgYSBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgaWYgYW4gaXRlbSBtZWV0cyBhIHNwZWNpZmllZCBjb25kaXRpb24uXG5cdCAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gb3B0aW9uYWwgb2JqZWN0IHRvIHVzZSBmb3IgYHRoaXNgIGluIHRoZSBjYWxsYmFja1xuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIG9mIGJvb2xlYW5zIHRoYXQgZGV0ZXJtaW5lcyBpZiBhbGwgaXRlbXMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1lZXQgdGhlIGNvbmRpdGlvbiBzcGVjaWZpZWQuXG5cdCAqIEBtZXRob2QgZXZlcnlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRXZlcnlPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLmV2ZXJ5ID0gZXZlcnk7XG5cdHZhciBFdmVyeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEV2ZXJ5T3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgRXZlcnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFdmVyeVN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEV2ZXJ5T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEV2ZXJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRXZlcnlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRXZlcnlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcblx0ICAgIH1cblx0ICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoZXZlcnlWYWx1ZU1hdGNoKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGV2ZXJ5VmFsdWVNYXRjaCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmluZGV4KyssIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFyZXN1bHQpIHtcblx0ICAgICAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZShmYWxzZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMubm90aWZ5Q29tcGxldGUodHJ1ZSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEV2ZXJ5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ldmVyeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0ODEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwID0gbWFwXzEubWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBBcHBsaWVzIGEgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uIHRvIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUsIGFuZCBlbWl0cyB0aGUgcmVzdWx0aW5nIHZhbHVlcyBhcyBhbiBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSBbQXJyYXkucHJvdG90eXBlLm1hcCgpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9tYXApLFxuXHQgKiBpdCBwYXNzZXMgZWFjaCBzb3VyY2UgdmFsdWUgdGhyb3VnaCBhIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIHRvIGdldFxuXHQgKiBjb3JyZXNwb25kaW5nIG91dHB1dCB2YWx1ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogU2ltaWxhciB0byB0aGUgd2VsbCBrbm93biBgQXJyYXkucHJvdG90eXBlLm1hcGAgZnVuY3Rpb24sIHRoaXMgb3BlcmF0b3Jcblx0ICogYXBwbGllcyBhIHByb2plY3Rpb24gdG8gZWFjaCB2YWx1ZSBhbmQgZW1pdHMgdGhhdCBwcm9qZWN0aW9uIGluIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSBjbGllbnRYIHBvc2l0aW9uIG9mIHRoYXQgY2xpY2s8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3MubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuXHQgKiBwb3NpdGlvbnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXBUb31cblx0ICogQHNlZSB7QGxpbmsgcGx1Y2t9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBwcm9qZWN0IFRoZSBmdW5jdGlvbiB0byBhcHBseVxuXHQgKiB0byBlYWNoIGB2YWx1ZWAgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIFRoZSBgaW5kZXhgIHBhcmFtZXRlciBpc1xuXHQgKiB0aGUgbnVtYmVyIGBpYCBmb3IgdGhlIGktdGggZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlXG5cdCAqIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZWZpbmUgd2hhdCBgdGhpc2AgaXMgaW4gdGhlXG5cdCAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgdHJhbnNmb3JtZWQgYnkgdGhlIGdpdmVuIGBwcm9qZWN0YCBmdW5jdGlvbi5cblx0ICogQG1ldGhvZCBtYXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG5cdCAgICBpZiAodHlwZW9mIHByb2plY3QgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4gQXJlIHlvdSBsb29raW5nIGZvciBgbWFwVG8oKWA/Jyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG5cdH1cblx0ZXhwb3J0cy5tYXAgPSBtYXA7XG5cdHZhciBNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgfVxuXHQgICAgTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy50aGlzQXJnKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgdGhpc0FyZykge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIE5PVEU6IFRoaXMgbG9va3MgdW5vcHRpbWl6ZWQsIGJ1dCBpdCdzIGFjdHVhbGx5IHB1cnBvc2VmdWxseSBOT1Rcblx0ICAgIC8vIHVzaW5nIHRyeS9jYXRjaCBvcHRpbWl6YXRpb25zLlxuXHQgICAgTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuY291bnQrKyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1hcFRvXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXBUbyA9IG1hcFRvXzEubWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcFRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogRW1pdHMgdGhlIGdpdmVuIGNvbnN0YW50IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBldmVyeSB0aW1lIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSB7QGxpbmsgbWFwfSwgYnV0IGl0IG1hcHMgZXZlcnkgc291cmNlIHZhbHVlIHRvXG5cdCAqIHRoZSBzYW1lIG91dHB1dCB2YWx1ZSBldmVyeSB0aW1lLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogVGFrZXMgYSBjb25zdGFudCBgdmFsdWVgIGFzIGFyZ3VtZW50LCBhbmQgZW1pdHMgdGhhdCB3aGVuZXZlciB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS4gSW4gb3RoZXIgd29yZHMsIGlnbm9yZXMgdGhlIGFjdHVhbCBzb3VyY2UgdmFsdWUsXG5cdCAqIGFuZCBzaW1wbHkgdXNlcyB0aGUgZW1pc3Npb24gbW9tZW50IHRvIGtub3cgd2hlbiB0byBlbWl0IHRoZSBnaXZlbiBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIHN0cmluZyAnSGknPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZ3JlZXRpbmdzID0gY2xpY2tzLm1hcFRvKCdIaScpO1xuXHQgKiBncmVldGluZ3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFwIGVhY2ggc291cmNlIHZhbHVlIHRvLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGdpdmVuIGB2YWx1ZWAgZXZlcnkgdGltZVxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgc29tZXRoaW5nLlxuXHQgKiBAbWV0aG9kIG1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUbyh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWFwVG9PcGVyYXRvcih2YWx1ZSkpO1xuXHR9XG5cdGV4cG9ydHMubWFwVG8gPSBtYXBUbztcblx0dmFyIE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWFwVG9PcGVyYXRvcih2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIE1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBUb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy52YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBUb09wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdmFsdWUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgfVxuXHQgICAgTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBUb1N1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtYXRlcmlhbGl6ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0ODUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWF0ZXJpYWxpemUgPSBtYXRlcmlhbGl6ZV8xLm1hdGVyaWFsaXplO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbGl6ZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE5vdGlmaWNhdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjEpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgcmVwcmVzZW50cyBhbGwgb2YgdGhlIGVtaXNzaW9ucyBhbmQgbm90aWZpY2F0aW9uc1xuXHQgKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnRvIGVtaXNzaW9ucyBtYXJrZWQgd2l0aCB0aGVpciBvcmlnaW5hbCB0eXBlc1xuXHQgKiB3aXRoaW4gYSBgTm90aWZpY2F0aW9uYCBvYmplY3RzLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21hdGVyaWFsaXplLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBOb3RpZmljYXRpb259XG5cdCAqXG5cdCAqIEBzY2hlZHVsZXIgbWF0ZXJpYWxpemUgZG9lcyBub3Qgb3BlcmF0ZSBieSBkZWZhdWx0IG9uIGEgcGFydGljdWxhciBTY2hlZHVsZXIuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Tm90aWZpY2F0aW9uPFQ+Pn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIHRoYXQgYXJlIHRoZSByZXN1bHQgb2Zcblx0ICogbWF0ZXJpYWxpemluZyB0aGUgaXRlbXMgYW5kIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIG1hdGVyaWFsaXplXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRlcmlhbGl6ZSgpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1hdGVyaWFsaXplT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5tYXRlcmlhbGl6ZSA9IG1hdGVyaWFsaXplO1xuXHR2YXIgTWF0ZXJpYWxpemVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZU9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgTWF0ZXJpYWxpemVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hdGVyaWFsaXplT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIE1hdGVyaWFsaXplU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgfVxuXHQgICAgTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIE1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZXJyKSk7XG5cdCAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hdGVyaWFsaXplU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbGl6ZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1lcmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZSA9IG1lcmdlXzEubWVyZ2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbWVyZ2VBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlQWxsID0gbWVyZ2VBbGxfMS5tZXJnZUFsbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtZXJnZU1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VNYXAgPSBtZXJnZU1hcF8xLm1lcmdlTWFwO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcCA9IG1lcmdlTWFwXzEubWVyZ2VNYXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbWVyZ2VNYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm11bHRpY2FzdCA9IG11bHRpY2FzdF8xLm11bHRpY2FzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bXVsdGljYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5vYnNlcnZlT24gPSBvYnNlcnZlT25fMS5vYnNlcnZlT247XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVPbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHBhcnRpdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OTMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGFydGl0aW9uID0gcGFydGl0aW9uXzEucGFydGl0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0aXRpb24uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgbm90XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5NCk7XG5cdHZhciBmaWx0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDU3KTtcblx0LyoqXG5cdCAqIFNwbGl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgaW50byB0d28sIG9uZSB3aXRoIHZhbHVlcyB0aGF0IHNhdGlzZnkgYVxuXHQgKiBwcmVkaWNhdGUsIGFuZCBhbm90aGVyIHdpdGggdmFsdWVzIHRoYXQgZG9uJ3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBmaWx0ZXJ9LCBidXQgcmV0dXJucyB0d28gT2JzZXJ2YWJsZXM6XG5cdCAqIG9uZSBsaWtlIHRoZSBvdXRwdXQgb2Yge0BsaW5rIGZpbHRlcn0sIGFuZCB0aGUgb3RoZXIgd2l0aCB2YWx1ZXMgdGhhdCBkaWQgbm90XG5cdCAqIHBhc3MgdGhlIGNvbmRpdGlvbi48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvcGFydGl0aW9uLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgcGFydGl0aW9uYCBvdXRwdXRzIGFuIGFycmF5IHdpdGggdHdvIE9ic2VydmFibGVzIHRoYXQgcGFydGl0aW9uIHRoZSB2YWx1ZXNcblx0ICogZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhyb3VnaCB0aGUgZ2l2ZW4gYHByZWRpY2F0ZWAgZnVuY3Rpb24uIFRoZSBmaXJzdFxuXHQgKiBPYnNlcnZhYmxlIGluIHRoYXQgYXJyYXkgZW1pdHMgc291cmNlIHZhbHVlcyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSBhcmd1bWVudFxuXHQgKiByZXR1cm5zIHRydWUuIFRoZSBzZWNvbmQgT2JzZXJ2YWJsZSBlbWl0cyBzb3VyY2UgdmFsdWVzIGZvciB3aGljaCB0aGVcblx0ICogcHJlZGljYXRlIHJldHVybnMgZmFsc2UuIFRoZSBmaXJzdCBiZWhhdmVzIGxpa2Uge0BsaW5rIGZpbHRlcn0gYW5kIHRoZSBzZWNvbmRcblx0ICogYmVoYXZlcyBsaWtlIHtAbGluayBmaWx0ZXJ9IHdpdGggdGhlIHByZWRpY2F0ZSBuZWdhdGVkLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5QYXJ0aXRpb24gY2xpY2sgZXZlbnRzIGludG8gdGhvc2Ugb24gRElWIGVsZW1lbnRzIGFuZCB0aG9zZSBlbHNld2hlcmU8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBwYXJ0cyA9IGNsaWNrcy5wYXJ0aXRpb24oZXYgPT4gZXYudGFyZ2V0LnRhZ05hbWUgPT09ICdESVYnKTtcblx0ICogdmFyIGNsaWNrc09uRGl2cyA9IHBhcnRzWzBdO1xuXHQgKiB2YXIgY2xpY2tzRWxzZXdoZXJlID0gcGFydHNbMV07XG5cdCAqIGNsaWNrc09uRGl2cy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnRElWIGNsaWNrZWQ6ICcsIHgpKTtcblx0ICogY2xpY2tzRWxzZXdoZXJlLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKCdPdGhlciBjbGlja2VkOiAnLCB4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGZpbHRlcn1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW59IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRoYXRcblx0ICogZXZhbHVhdGVzIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGl0IHJldHVybnMgYHRydWVgLFxuXHQgKiB0aGUgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgZmlyc3QgT2JzZXJ2YWJsZSBpbiB0aGUgcmV0dXJuZWQgYXJyYXksIGlmXG5cdCAqIGBmYWxzZWAgdGhlIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIHNlY29uZCBPYnNlcnZhYmxlIGluIHRoZSBhcnJheS4gVGhlXG5cdCAqIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2UgZW1pc3Npb24gdGhhdCBoYXNcblx0ICogaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuXHQgKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEByZXR1cm4ge1tPYnNlcnZhYmxlPFQ+LCBPYnNlcnZhYmxlPFQ+XX0gQW4gYXJyYXkgd2l0aCB0d28gT2JzZXJ2YWJsZXM6IG9uZVxuXHQgKiB3aXRoIHZhbHVlcyB0aGF0IHBhc3NlZCB0aGUgcHJlZGljYXRlLCBhbmQgYW5vdGhlciB3aXRoIHZhbHVlcyB0aGF0IGRpZCBub3Rcblx0ICogcGFzcyB0aGUgcHJlZGljYXRlLlxuXHQgKiBAbWV0aG9kIHBhcnRpdGlvblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFydGl0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICBmaWx0ZXJfMS5maWx0ZXIuY2FsbCh0aGlzLCBwcmVkaWNhdGUpLFxuXHQgICAgICAgIGZpbHRlcl8xLmZpbHRlci5jYWxsKHRoaXMsIG5vdF8xLm5vdChwcmVkaWNhdGUsIHRoaXNBcmcpKVxuXHQgICAgXTtcblx0fVxuXHRleHBvcnRzLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydGl0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gbm90KHByZWQsIHRoaXNBcmcpIHtcblx0ICAgIGZ1bmN0aW9uIG5vdFByZWQoKSB7XG5cdCAgICAgICAgcmV0dXJuICEobm90UHJlZC5wcmVkLmFwcGx5KG5vdFByZWQudGhpc0FyZywgYXJndW1lbnRzKSk7XG5cdCAgICB9XG5cdCAgICBub3RQcmVkLnByZWQgPSBwcmVkO1xuXHQgICAgbm90UHJlZC50aGlzQXJnID0gdGhpc0FyZztcblx0ICAgIHJldHVybiBub3RQcmVkO1xuXHR9XG5cdGV4cG9ydHMubm90ID0gbm90O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ub3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBwbHVja18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OTYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGx1Y2sgPSBwbHVja18xLnBsdWNrO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wbHVjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgxKTtcblx0LyoqXG5cdCAqIE1hcHMgZWFjaCBzb3VyY2UgdmFsdWUgKGFuIG9iamVjdCkgdG8gaXRzIHNwZWNpZmllZCBuZXN0ZWQgcHJvcGVydHkuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlIHtAbGluayBtYXB9LCBidXQgbWVhbnQgb25seSBmb3IgcGlja2luZyBvbmUgb2Zcblx0ICogdGhlIG5lc3RlZCBwcm9wZXJ0aWVzIG9mIGV2ZXJ5IGVtaXR0ZWQgb2JqZWN0Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9wbHVjay5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogR2l2ZW4gYSBsaXN0IG9mIHN0cmluZ3MgZGVzY3JpYmluZyBhIHBhdGggdG8gYW4gb2JqZWN0IHByb3BlcnR5LCByZXRyaWV2ZXNcblx0ICogdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFsbCB2YWx1ZXMgaW4gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBJZiBhIHByb3BlcnR5IGNhbid0IGJlIHJlc29sdmVkLCBpdCB3aWxsIHJldHVybiBgdW5kZWZpbmVkYCBmb3Jcblx0ICogdGhhdCB2YWx1ZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSB0YWdOYW1lIG9mIHRoZSBjbGlja2VkIHRhcmdldCBlbGVtZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgdGFnTmFtZXMgPSBjbGlja3MucGx1Y2soJ3RhcmdldCcsICd0YWdOYW1lJyk7XG5cdCAqIHRhZ05hbWVzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgbWFwfVxuXHQgKlxuXHQgKiBAcGFyYW0gey4uLnN0cmluZ30gcHJvcGVydGllcyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2sgZnJvbSBlYWNoIHNvdXJjZVxuXHQgKiB2YWx1ZSAoYW4gb2JqZWN0KS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gUmV0dXJucyBhIG5ldyBPYnNlcnZhYmxlIG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIHRoZVxuXHQgKiBzb3VyY2UgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIHBsdWNrXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBwbHVjaygpIHtcblx0ICAgIHZhciBwcm9wZXJ0aWVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIHByb3BlcnRpZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7XG5cdCAgICBpZiAobGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LicpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1hcF8xLm1hcC5jYWxsKHRoaXMsIHBsdWNrZXIocHJvcGVydGllcywgbGVuZ3RoKSk7XG5cdH1cblx0ZXhwb3J0cy5wbHVjayA9IHBsdWNrO1xuXHRmdW5jdGlvbiBwbHVja2VyKHByb3BzLCBsZW5ndGgpIHtcblx0ICAgIHZhciBtYXBwZXIgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgIHZhciBjdXJyZW50UHJvcCA9IHg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgcCA9IGN1cnJlbnRQcm9wW3Byb3BzW2ldXTtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFByb3AgPSBwO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY3VycmVudFByb3A7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIG1hcHBlcjtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wbHVjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHB1Ymxpc2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDk4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2ggPSBwdWJsaXNoXzEucHVibGlzaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjApO1xuXHQvKipcblx0ICogUmV0dXJucyBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgd2hpY2ggaXMgYSB2YXJpZXR5IG9mIE9ic2VydmFibGUgdGhhdCB3YWl0cyB1bnRpbCBpdHMgY29ubmVjdCBtZXRob2QgaXMgY2FsbGVkXG5cdCAqIGJlZm9yZSBpdCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgdG8gdGhvc2UgT2JzZXJ2ZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3B1Ymxpc2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEByZXR1cm4gYSBDb25uZWN0YWJsZU9ic2VydmFibGUgdGhhdCB1cG9uIGNvbm5lY3Rpb24gY2F1c2VzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGl0ZW1zIHRvIGl0cyBPYnNlcnZlcnMuXG5cdCAqIEBtZXRob2QgcHVibGlzaFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaCgpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgU3ViamVjdF8xLlN1YmplY3QoKSk7XG5cdH1cblx0ZXhwb3J0cy5wdWJsaXNoID0gcHVibGlzaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHB1Ymxpc2hCZWhhdmlvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaEJlaGF2aW9yID0gcHVibGlzaEJlaGF2aW9yXzEucHVibGlzaEJlaGF2aW9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoQmVoYXZpb3IuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQmVoYXZpb3JTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwMSk7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0LyoqXG5cdCAqIEBwYXJhbSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgcHVibGlzaEJlaGF2aW9yXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBwdWJsaXNoQmVoYXZpb3IodmFsdWUpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgQmVoYXZpb3JTdWJqZWN0XzEuQmVoYXZpb3JTdWJqZWN0KHZhbHVlKSk7XG5cdH1cblx0ZXhwb3J0cy5wdWJsaXNoQmVoYXZpb3IgPSBwdWJsaXNoQmVoYXZpb3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hCZWhhdmlvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIHRocm93RXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXHR2YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpO1xuXHQvKipcblx0ICogQGNsYXNzIEJlaGF2aW9yU3ViamVjdDxUPlxuXHQgKi9cblx0dmFyIEJlaGF2aW9yU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQmVoYXZpb3JTdWJqZWN0LCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQmVoYXZpb3JTdWJqZWN0KF92YWx1ZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuXHQgICAgfVxuXHQgICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNFcnJvcmVkKSB7XG5cdCAgICAgICAgICAgIHRocm93RXJyb3JfMS50aHJvd0Vycm9yKHRoaXMuZXJyb3JWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdGhyb3dFcnJvcl8xLnRocm93RXJyb3IobmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy5fdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuXHQgICAgfTtcblx0ICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdGhpcy5fdmFsdWUgPSB2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5oYXNFcnJvcmVkID0gdHJ1ZTtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIHRoaXMuZXJyb3JWYWx1ZSA9IGVycik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcblx0fShTdWJqZWN0XzEuU3ViamVjdCkpO1xuXHRleHBvcnRzLkJlaGF2aW9yU3ViamVjdCA9IEJlaGF2aW9yU3ViamVjdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QmVoYXZpb3JTdWJqZWN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcHVibGlzaFJlcGxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXlfMS5wdWJsaXNoUmVwbGF5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoUmVwbGF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcHVibGlzaExhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTA0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hMYXN0ID0gcHVibGlzaExhc3RfMS5wdWJsaXNoTGFzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaExhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXN5bmNTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOCk7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0LyoqXG5cdCAqIEByZXR1cm4ge0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCBwdWJsaXNoTGFzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaExhc3QoKSB7XG5cdCAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpKTtcblx0fVxuXHRleHBvcnRzLnB1Ymxpc2hMYXN0ID0gcHVibGlzaExhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hMYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcmFjZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmFjZSA9IHJhY2VfMS5yYWNlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcmVkdWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwNyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZWR1Y2UgPSByZWR1Y2VfMS5yZWR1Y2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGFwcGxpZXMgYSBzcGVjaWZpZWQgYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSBhIHNvdXJjZSBPYnNlcnZhYmxlLFxuXHQgKiB0aGVuIGZlZWRzIHRoZSByZXN1bHQgb2YgdGhhdCBmdW5jdGlvbiBhbG9uZyB3aXRoIHRoZSBzZWNvbmQgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnRvIHRoZSBzYW1lXG5cdCAqIGZ1bmN0aW9uLCBhbmQgc28gb24gdW50aWwgYWxsIGl0ZW1zIGhhdmUgYmVlbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoZSBmaW5hbCByZXN1bHQgZnJvbVxuXHQgKiB0aGUgZmluYWwgY2FsbCB0byB5b3VyIGZ1bmN0aW9uIGFzIGl0cyBzb2xlIGl0ZW0uXG5cdCAqIFRoaXMgdGVjaG5pcXVlLCB3aGljaCBpcyBjYWxsZWQgXCJyZWR1Y2VcIiBoZXJlLCBpcyBzb21ldGltZXMgY2FsbGVkIFwiYWdncmVnYXRlLFwiIFwiZm9sZCxcIiBcImFjY3VtdWxhdGUsXCIgXCJjb21wcmVzcyxcIiBvclxuXHQgKiBcImluamVjdFwiIGluIG90aGVyIHByb2dyYW1taW5nIGNvbnRleHRzLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JlZHVjZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtpbml0aWFsVmFsdWV9IHRoZSBpbml0aWFsIChzZWVkKSBhY2N1bXVsYXRvciB2YWx1ZVxuXHQgKiBAcGFyYW0ge2FjY3VtdWxhdG9yfSBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlXG5cdCAqIHJlc3VsdCBvZiB3aGljaCB3aWxsIGJlIHVzZWQgaW4gdGhlIG5leHQgYWNjdW11bGF0b3IgY2FsbC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgc2luZ2xlIGl0ZW0gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFjY3VtdWxhdGluZyB0aGUgb3V0cHV0IGZyb20gdGhlXG5cdCAqIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIHJlZHVjZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVkdWNlKHByb2plY3QsIHNlZWQpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlZHVjZU9wZXJhdG9yKHByb2plY3QsIHNlZWQpKTtcblx0fVxuXHRleHBvcnRzLnJlZHVjZSA9IHJlZHVjZTtcblx0dmFyIFJlZHVjZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJlZHVjZU9wZXJhdG9yKHByb2plY3QsIHNlZWQpIHtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG5cdCAgICB9XG5cdCAgICBSZWR1Y2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJlZHVjZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnNlZWQpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVkdWNlT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuUmVkdWNlT3BlcmF0b3IgPSBSZWR1Y2VPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmVkdWNlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVkdWNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZHVjZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHNlZWQpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYWNjID0gc2VlZDtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuaGFzU2VlZCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcblx0ICAgIH1cblx0ICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUgfHwgKHRoaXMuaGFzVmFsdWUgPSB0aGlzLmhhc1NlZWQpKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVJlZHVjZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmFjYyA9IHZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVJlZHVjZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHRoaXMuYWNjLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWNjID0gcmVzdWx0O1xuXHQgICAgfTtcblx0ICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSB8fCB0aGlzLmhhc1NlZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZWR1Y2VTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuUmVkdWNlU3Vic2NyaWJlciA9IFJlZHVjZVN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHJlcGVhdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVwZWF0ID0gcmVwZWF0XzEucmVwZWF0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0IGNvdW50IHRpbWVzLFxuXHQgKiBvbiBhIHBhcnRpY3VsYXIgU2NoZWR1bGVyLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JlcGVhdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gZW1pdCB0aGUgaXRlbXMgb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnRdIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGl0ZW1zIGFyZSByZXBlYXRlZCwgYSBjb3VudCBvZiAwIHdpbGwgeWllbGRcblx0ICogYW4gZW1wdHkgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0XG5cdCAqIGNvdW50IHRpbWVzLlxuXHQgKiBAbWV0aG9kIHJlcGVhdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVwZWF0KGNvdW50KSB7XG5cdCAgICBpZiAoY291bnQgPT09IHZvaWQgMCkgeyBjb3VudCA9IC0xOyB9XG5cdCAgICBpZiAoY291bnQgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAoY291bnQgPCAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVwZWF0T3BlcmF0b3IoLTEsIHRoaXMpKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlcGVhdE9wZXJhdG9yKGNvdW50IC0gMSwgdGhpcykpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucmVwZWF0ID0gcmVwZWF0O1xuXHR2YXIgUmVwZWF0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmVwZWF0T3BlcmF0b3IoY291bnQsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJlcGVhdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmVwZWF0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXBlYXRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmVwZWF0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVwZWF0U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlcGVhdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmVwZWF0U3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgX2EgPSB0aGlzLCBzb3VyY2UgPSBfYS5zb3VyY2UsIGNvdW50ID0gX2EuY291bnQ7XG5cdCAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVwZWF0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciByZXRyeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MTEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmV0cnkgPSByZXRyeV8xLnJldHJ5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXN1YnNjcmliaW5nIHRvIGl0IGlmIGl0IGNhbGxzIGBlcnJvcmAgYW5kIHRoZVxuXHQgKiBwcmVkaWNhdGUgcmV0dXJucyB0cnVlIGZvciB0aGF0IHNwZWNpZmljIGV4Y2VwdGlvbiBhbmQgcmV0cnkgY291bnQuXG5cdCAqIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBjYWxscyBgZXJyb3JgLCB0aGlzIG1ldGhvZCB3aWxsIHJlc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBmb3IgYSBtYXhpbXVtIG9mXG5cdCAqIGNvdW50IHJlc3Vic2NyaXB0aW9ucyAoZ2l2ZW4gYXMgYSBudW1iZXIgcGFyYW1ldGVyKSByYXRoZXIgdGhhbiBwcm9wYWdhdGluZyB0aGUgYGVycm9yYCBjYWxsLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JldHJ5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBBbnkgYW5kIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aWxsIGJlIGVtaXR0ZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLCBldmVuIHRob3NlIGVtaXR0ZWRcblx0ICogZHVyaW5nIGZhaWxlZCBzdWJzY3JpcHRpb25zLiBGb3IgZXhhbXBsZSwgaWYgYW4gT2JzZXJ2YWJsZSBmYWlscyBhdCBmaXJzdCBidXQgZW1pdHMgWzEsIDJdIHRoZW4gc3VjY2VlZHMgdGhlIHNlY29uZFxuXHQgKiB0aW1lIGFuZCBlbWl0czogWzEsIDIsIDMsIDQsIDVdIHRoZW4gdGhlIGNvbXBsZXRlIHN0cmVhbSBvZiBlbWlzc2lvbnMgYW5kIG5vdGlmaWNhdGlvbnNcblx0ICogd291bGQgYmU6IFsxLCAyLCAxLCAyLCAzLCA0LCA1LCBgY29tcGxldGVgXS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciBvZiByZXRyeSBhdHRlbXB0cyBiZWZvcmUgZmFpbGluZy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1vZGlmaWVkIHdpdGggdGhlIHJldHJ5IGxvZ2ljLlxuXHQgKiBAbWV0aG9kIHJldHJ5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiByZXRyeShjb3VudCkge1xuXHQgICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAtMTsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmV0cnlPcGVyYXRvcihjb3VudCwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMucmV0cnkgPSByZXRyeTtcblx0dmFyIFJldHJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmV0cnlPcGVyYXRvcihjb3VudCwgc291cmNlKSB7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmV0cnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJldHJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXRyeU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZXRyeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJldHJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJldHJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY291bnQsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICBSZXRyeVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgdmFyIF9hID0gdGhpcywgc291cmNlID0gX2Euc291cmNlLCBjb3VudCA9IF9hLmNvdW50O1xuXHQgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcmV0cnlXaGVuXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXRyeVdoZW4gPSByZXRyeVdoZW5fMS5yZXRyeVdoZW47XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5V2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGUgc291cmNlIG9ic2VydmFibGUgd2l0aCB0aGUgZXhjZXB0aW9uIG9mIGFuIGBlcnJvcmAuXG5cdCAqIEFuIGBlcnJvcmAgd2lsbCBjYXVzZSB0aGUgZW1pc3Npb24gb2YgdGhlIFRocm93YWJsZSB0aGF0IGNhdXNlIHRoZSBlcnJvciB0byB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBmcm9tXG5cdCAqIG5vdGlmaWNhdGlvbkhhbmRsZXIuIElmIHRoYXQgT2JzZXJ2YWJsZSBjYWxscyBvbkNvbXBsZXRlIG9yIGBlcnJvcmAgdGhlbiByZXRyeSB3aWxsIGNhbGwgYGNvbXBsZXRlYCBvciBgZXJyb3JgXG5cdCAqIG9uIHRoZSBjaGlsZCBzdWJzY3JpcHRpb24uIE90aGVyd2lzZSwgdGhpcyBPYnNlcnZhYmxlIHdpbGwgcmVzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBvYnNlcnZhYmxlLCBvbiBhIHBhcnRpY3VsYXJcblx0ICogU2NoZWR1bGVyLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JldHJ5V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtub3RpZmljYXRpb25IYW5kbGVyfSByZWNlaXZlcyBhbiBPYnNlcnZhYmxlIG9mIG5vdGlmaWNhdGlvbnMgd2l0aCB3aGljaCBhIHVzZXIgY2FuIGBjb21wbGV0ZWAgb3IgYGVycm9yYCxcblx0ICogYWJvcnRpbmcgdGhlIHJldHJ5LlxuXHQgKiBAcGFyYW0ge3NjaGVkdWxlcn0gdGhlIFNjaGVkdWxlciBvbiB3aGljaCB0byBzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSB0aGUgc291cmNlIE9ic2VydmFibGUgbW9kaWZpZWQgd2l0aCByZXRyeSBsb2dpYy5cblx0ICogQG1ldGhvZCByZXRyeVdoZW5cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHJldHJ5V2hlbihub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmV0cnlXaGVuT3BlcmF0b3Iobm90aWZpZXIsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLnJldHJ5V2hlbiA9IHJldHJ5V2hlbjtcblx0dmFyIFJldHJ5V2hlbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJldHJ5V2hlbk9wZXJhdG9yKG5vdGlmaWVyLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICBSZXRyeVdoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJldHJ5V2hlblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllciwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlXaGVuT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFJldHJ5V2hlblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJldHJ5V2hlblN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSZXRyeVdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllciwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgdmFyIGVycm9ycyA9IHRoaXMuZXJyb3JzO1xuXHQgICAgICAgICAgICB2YXIgcmV0cmllcyA9IHRoaXMucmV0cmllcztcblx0ICAgICAgICAgICAgdmFyIHJldHJpZXNTdWJzY3JpcHRpb24gPSB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIGlmICghcmV0cmllcykge1xuXHQgICAgICAgICAgICAgICAgZXJyb3JzID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICByZXRyaWVzID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLm5vdGlmaWVyKShlcnJvcnMpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJldHJpZXMgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXRyaWVzU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXRyaWVzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuXHQgICAgICAgICAgICB0aGlzLnJldHJpZXMgPSByZXRyaWVzO1xuXHQgICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSByZXRyaWVzU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgICAgICBlcnJvcnMubmV4dChlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JzID0gX2EuZXJyb3JzLCByZXRyaWVzU3Vic2NyaXB0aW9uID0gX2EucmV0cmllc1N1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoZXJyb3JzKSB7XG5cdCAgICAgICAgICAgIGVycm9ycy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChyZXRyaWVzU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JzID0gX2EuZXJyb3JzLCByZXRyaWVzID0gX2EucmV0cmllcywgcmV0cmllc1N1YnNjcmlwdGlvbiA9IF9hLnJldHJpZXNTdWJzY3JpcHRpb247XG5cdCAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsO1xuXHQgICAgICAgIHRoaXMucmV0cmllcyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzID0gcmV0cmllcztcblx0ICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSByZXRyaWVzU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlXaGVuU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgc2FtcGxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxNSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zYW1wbGUgPSBzYW1wbGVfMS5zYW1wbGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBFbWl0cyB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdoZW5ldmVyXG5cdCAqIGFub3RoZXIgT2JzZXJ2YWJsZSwgdGhlIGBub3RpZmllcmAsIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBzYW1wbGVUaW1lfSwgYnV0IHNhbXBsZXMgd2hlbmV2ZXJcblx0ICogdGhlIGBub3RpZmllcmAgT2JzZXJ2YWJsZSBlbWl0cyBzb21ldGhpbmcuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NhbXBsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogV2hlbmV2ZXIgdGhlIGBub3RpZmllcmAgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgYHNhbXBsZWBcblx0ICogbG9va3MgYXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBlbWl0cyB3aGljaGV2ZXIgdmFsdWUgaXQgaGFzIG1vc3QgcmVjZW50bHlcblx0ICogZW1pdHRlZCBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcsIHVubGVzcyB0aGUgc291cmNlIGhhcyBub3QgZW1pdHRlZFxuXHQgKiBhbnl0aGluZyBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcuIFRoZSBgbm90aWZpZXJgIGlzIHN1YnNjcmliZWQgdG8gYXMgc29vblxuXHQgKiBhcyB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2ssIHNhbXBsZSB0aGUgbW9zdCByZWNlbnQgXCJzZWNvbmRzXCIgdGltZXI8L2NhcHRpb24+XG5cdCAqIHZhciBzZWNvbmRzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IHNlY29uZHMuc2FtcGxlKGNsaWNrcyk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cblx0ICogQHNlZSB7QGxpbmsgc2FtcGxlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgdGhyb3R0bGV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSBub3RpZmllciBUaGUgT2JzZXJ2YWJsZSB0byB1c2UgZm9yIHNhbXBsaW5nIHRoZVxuXHQgKiBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIHNhbXBsaW5nIHRoZVxuXHQgKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2hlbmV2ZXIgdGhlIG5vdGlmaWVyIE9ic2VydmFibGVcblx0ICogZW1pdHMgdmFsdWUgb3IgY29tcGxldGVzLlxuXHQgKiBAbWV0aG9kIHNhbXBsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2FtcGxlKG5vdGlmaWVyKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVPcGVyYXRvcihub3RpZmllcikpO1xuXHR9XG5cdGV4cG9ydHMuc2FtcGxlID0gc2FtcGxlO1xuXHR2YXIgU2FtcGxlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU2FtcGxlT3BlcmF0b3Iobm90aWZpZXIpIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICB9XG5cdCAgICBTYW1wbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNhbXBsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2FtcGxlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2FtcGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNhbXBsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG5vdGlmaWVyKSk7XG5cdCAgICB9XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuXHQgICAgfTtcblx0ICAgIFNhbXBsZVN1YnNjcmliZXIucHJvdG90eXBlLmVtaXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNhbXBsZVN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNhbXBsZVRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTE3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNhbXBsZVRpbWUgPSBzYW1wbGVUaW1lXzEuc2FtcGxlVGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdC8qKlxuXHQgKiBFbWl0cyB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGhpblxuXHQgKiBwZXJpb2RpYyB0aW1lIGludGVydmFscy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlNhbXBsZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IHBlcmlvZGljIHRpbWVcblx0ICogaW50ZXJ2YWxzLCBlbWl0dGluZyB3aGF0IGl0IHNhbXBsZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NhbXBsZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBzYW1wbGVUaW1lYCBwZXJpb2RpY2FsbHkgbG9va3MgYXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBlbWl0cyB3aGljaGV2ZXJcblx0ICogdmFsdWUgaXQgaGFzIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcsIHVubGVzcyB0aGVcblx0ICogc291cmNlIGhhcyBub3QgZW1pdHRlZCBhbnl0aGluZyBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcuIFRoZSBzYW1wbGluZ1xuXHQgKiBoYXBwZW5zIHBlcmlvZGljYWxseSBpbiB0aW1lIGV2ZXJ5IGBwZXJpb2RgIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWUgdW5pdFxuXHQgKiBkZWZpbmVkIGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYCBhcmd1bWVudCkuIFRoZSBzYW1wbGluZyBzdGFydHMgYXMgc29vbiBhc1xuXHQgKiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgc2Vjb25kLCBlbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhdCBtb3N0IG9uY2U8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Muc2FtcGxlVGltZSgxMDAwKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGV9XG5cdCAqIEBzZWUge0BsaW5rIHRocm90dGxlVGltZX1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IHBlcmlvZCBUaGUgc2FtcGxpbmcgcGVyaW9kIGV4cHJlc3NlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlXG5cdCAqIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3Jcblx0ICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgc2FtcGxpbmcuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBzYW1wbGluZyB0aGVcblx0ICogdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IHRoZSBzcGVjaWZpZWQgdGltZSBpbnRlcnZhbC5cblx0ICogQG1ldGhvZCBzYW1wbGVUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBzYW1wbGVUaW1lKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2FtcGxlVGltZU9wZXJhdG9yKHBlcmlvZCwgc2NoZWR1bGVyKSk7XG5cdH1cblx0ZXhwb3J0cy5zYW1wbGVUaW1lID0gc2FtcGxlVGltZTtcblx0dmFyIFNhbXBsZVRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTYW1wbGVUaW1lT3BlcmF0b3IocGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIFNhbXBsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNhbXBsZVRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucGVyaW9kLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNhbXBsZVRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTYW1wbGVUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTm90aWZpY2F0aW9uLCBwZXJpb2QsIHsgc3Vic2NyaWJlcjogdGhpcywgcGVyaW9kOiBwZXJpb2QgfSkpO1xuXHQgICAgfVxuXHQgICAgU2FtcGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmxhc3RWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVUaW1lU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRmdW5jdGlvbiBkaXNwYXRjaE5vdGlmaWNhdGlvbihzdGF0ZSkge1xuXHQgICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwZXJpb2QgPSBzdGF0ZS5wZXJpb2Q7XG5cdCAgICBzdWJzY3JpYmVyLm5vdGlmeU5leHQoKTtcblx0ICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHBlcmlvZCk7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNjYW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTE5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNjYW4gPSBzY2FuXzEuc2Nhbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nhbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIEFwcGxpZXMgYW4gYWNjdW11bGF0aW9uIGZ1bmN0aW9uIG92ZXIgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgcmV0dXJucyBlYWNoXG5cdCAqIGludGVybWVkaWF0ZSByZXN1bHQsIHdpdGggYW4gb3B0aW9uYWwgc2VlZCB2YWx1ZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgcmVkdWNlfSwgYnV0IGVtaXRzIHRoZSBjdXJyZW50XG5cdCAqIGFjY3VtdWxhdGlvbiB3aGVuZXZlciB0aGUgc291cmNlIGVtaXRzIGEgdmFsdWUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NjYW4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIENvbWJpbmVzIHRvZ2V0aGVyIGFsbCB2YWx1ZXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLCB1c2luZyBhbiBhY2N1bXVsYXRvclxuXHQgKiBmdW5jdGlvbiB0aGF0IGtub3dzIGhvdyB0byBqb2luIGEgbmV3IHNvdXJjZSB2YWx1ZSBpbnRvIHRoZSBhY2N1bXVsYXRpb24gZnJvbVxuXHQgKiB0aGUgcGFzdC4gSXMgc2ltaWxhciB0byB7QGxpbmsgcmVkdWNlfSwgYnV0IGVtaXRzIHRoZSBpbnRlcm1lZGlhdGVcblx0ICogYWNjdW11bGF0aW9ucy5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgYXBwbGllcyBhIHNwZWNpZmllZCBgYWNjdW11bGF0b3JgIGZ1bmN0aW9uIHRvIGVhY2hcblx0ICogaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgYSBgc2VlZGAgdmFsdWUgaXMgc3BlY2lmaWVkLCB0aGVuXG5cdCAqIHRoYXQgdmFsdWUgd2lsbCBiZSB1c2VkIGFzIHRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGUgYWNjdW11bGF0b3IuIElmIG5vIHNlZWRcblx0ICogdmFsdWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlyc3QgaXRlbSBvZiB0aGUgc291cmNlIGlzIHVzZWQgYXMgdGhlIHNlZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50IHRoZSBudW1iZXIgb2YgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgb25lcyA9IGNsaWNrcy5tYXBUbygxKTtcblx0ICogdmFyIHNlZWQgPSAwO1xuXHQgKiB2YXIgY291bnQgPSBvbmVzLnNjYW4oKGFjYywgb25lKSA9PiBhY2MgKyBvbmUsIHNlZWQpO1xuXHQgKiBjb3VudC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGV4cGFuZH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKiBAc2VlIHtAbGluayByZWR1Y2V9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oYWNjOiBSLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IFJ9IGFjY3VtdWxhdG9yXG5cdCAqIFRoZSBhY2N1bXVsYXRvciBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBzb3VyY2UgdmFsdWUuXG5cdCAqIEBwYXJhbSB7VHxSfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0aW9uIHZhbHVlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fSBBbiBvYnNlcnZhYmxlIG9mIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZXMuXG5cdCAqIEBtZXRob2Qgc2NhblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2NhbihhY2N1bXVsYXRvciwgc2VlZCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2Nhbk9wZXJhdG9yKGFjY3VtdWxhdG9yLCBzZWVkKSk7XG5cdH1cblx0ZXhwb3J0cy5zY2FuID0gc2Nhbjtcblx0dmFyIFNjYW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTY2FuT3BlcmF0b3IoYWNjdW11bGF0b3IsIHNlZWQpIHtcblx0ICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG5cdCAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcblx0ICAgIH1cblx0ICAgIFNjYW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNjYW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWNjdW11bGF0b3IsIHRoaXMuc2VlZCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTY2FuT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNjYW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTY2FuU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNjYW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhY2N1bXVsYXRvciwgc2VlZCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG5cdCAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcblx0ICAgIH1cblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2FuU3Vic2NyaWJlci5wcm90b3R5cGUsIFwic2VlZFwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWVkO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMuX3NlZWQgPSB2YWx1ZTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICghdGhpcy5hY2N1bXVsYXRvclNldCkge1xuXHQgICAgICAgICAgICB0aGlzLnNlZWQgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl90cnlOZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRvcih0aGlzLnNlZWQsIHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNlZWQgPSByZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNjYW5TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjYW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBzaGFyZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2hhcmUgPSBzaGFyZV8xLnNoYXJlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRmdW5jdGlvbiBzaGFyZVN1YmplY3RGYWN0b3J5KCkge1xuXHQgICAgcmV0dXJuIG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuXHR9XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgdGhhdCBtdWx0aWNhc3RzIChzaGFyZXMpIHRoZSBvcmlnaW5hbCBPYnNlcnZhYmxlLiBBcyBsb25nIGFzIHRoZXJlIGlzIGF0IGxlYXN0IG9uZVxuXHQgKiBTdWJzY3JpYmVyIHRoaXMgT2JzZXJ2YWJsZSB3aWxsIGJlIHN1YnNjcmliZWQgYW5kIGVtaXR0aW5nIGRhdGEuIFdoZW4gYWxsIHN1YnNjcmliZXJzIGhhdmUgdW5zdWJzY3JpYmVkIGl0IHdpbGxcblx0ICogdW5zdWJzY3JpYmUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuIEJlY2F1c2UgdGhlIE9ic2VydmFibGUgaXMgbXVsdGljYXN0aW5nIGl0IG1ha2VzIHRoZSBzdHJlYW0gYGhvdGAuXG5cdCAqIFRoaXMgaXMgYW4gYWxpYXMgZm9yIC5wdWJsaXNoKCkucmVmQ291bnQoKS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zaGFyZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IHVwb24gY29ubmVjdGlvbiBjYXVzZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRvIGVtaXQgaXRlbXMgdG8gaXRzIE9ic2VydmVyc1xuXHQgKiBAbWV0aG9kIHNoYXJlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBzaGFyZSgpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBzaGFyZVN1YmplY3RGYWN0b3J5KS5yZWZDb3VudCgpO1xuXHR9XG5cdGV4cG9ydHMuc2hhcmUgPSBzaGFyZTtcblx0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNpbmdsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2luZ2xlID0gc2luZ2xlXzEuc2luZ2xlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2luZ2xlIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBtYXRjaGVzIGEgc3BlY2lmaWVkXG5cdCAqIHByZWRpY2F0ZSwgaWYgdGhhdCBPYnNlcnZhYmxlIGVtaXRzIG9uZSBzdWNoIGl0ZW0uIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBtb3JlIHRoYW4gb25lIHN1Y2ggaXRlbSBvciBub1xuXHQgKiBzdWNoIGl0ZW1zLCBub3RpZnkgb2YgYW4gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIG9yIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gcmVzcGVjdGl2ZWx5LlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NpbmdsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHRocm93cyB7RW1wdHlFcnJvcn0gRGVsaXZlcnMgYW4gRW1wdHlFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgXG5cdCAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRvIGV2YWx1YXRlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHNpbmdsZSBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgbWF0Y2hlc1xuXHQgKiB0aGUgcHJlZGljYXRlLlxuXHQgLlxuXHQgKiBAbWV0aG9kIHNpbmdsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2luZ2xlKHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzKSk7XG5cdH1cblx0ZXhwb3J0cy5zaW5nbGUgPSBzaW5nbGU7XG5cdHZhciBTaW5nbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTaW5nbGVPcGVyYXRvcihwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgU2luZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTaW5nbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTaW5nbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2luZ2xlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2luZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNpbmdsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc2VlblZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5hcHBseVNpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc2VlblZhbHVlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgZWxlbWVudCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5zZWVuVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnNpbmdsZVZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHRoaXMucHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAocHJlZGljYXRlKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5TmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmFwcGx5U2luZ2xlVmFsdWUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaW5nbGVWYWx1ZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLmluZGV4ID4gMCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMuc2VlblZhbHVlID8gdGhpcy5zaW5nbGVWYWx1ZSA6IHVuZGVmaW5lZCk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2luZ2xlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBza2lwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwID0gc2tpcF8xLnNraXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBgbmAgaXRlbXMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NraXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0aGUgYG5gIG9mIHRpbWVzLCBpdGVtcyBlbWl0dGVkIGJ5IHNvdXJjZSBPYnNlcnZhYmxlIHNob3VsZCBiZSBza2lwcGVkLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHNraXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHNraXAodG90YWwpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNraXBPcGVyYXRvcih0b3RhbCkpO1xuXHR9XG5cdGV4cG9ydHMuc2tpcCA9IHNraXA7XG5cdHZhciBTa2lwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU2tpcE9wZXJhdG9yKHRvdGFsKSB7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgfVxuXHQgICAgU2tpcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2tpcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTa2lwT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNraXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTa2lwU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNraXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB0b3RhbCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IDA7XG5cdCAgICB9XG5cdCAgICBTa2lwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgIGlmICgrK3RoaXMuY291bnQgPiB0aGlzLnRvdGFsKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh4KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBza2lwVW50aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTI3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBVbnRpbCA9IHNraXBVbnRpbF8xLnNraXBVbnRpbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcFVudGlsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHVudGlsIGEgc2Vjb25kIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9za2lwVW50aWwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gdGhlIHNlY29uZCBPYnNlcnZhYmxlIHRoYXQgaGFzIHRvIGVtaXQgYW4gaXRlbSBiZWZvcmUgdGhlIHNvdXJjZSBPYnNlcnZhYmxlJ3MgZWxlbWVudHMgYmVnaW4gdG9cblx0ICogYmUgbWlycm9yZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgdGhlIHNlY29uZCBPYnNlcnZhYmxlIGVtaXRzXG5cdCAqIGFuIGl0ZW0sIHRoZW4gZW1pdHMgdGhlIHJlbWFpbmluZyBpdGVtcy5cblx0ICogQG1ldGhvZCBza2lwVW50aWxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHNraXBVbnRpbChub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcblx0fVxuXHRleHBvcnRzLnNraXBVbnRpbCA9IHNraXBVbnRpbDtcblx0dmFyIFNraXBVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNraXBVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgfVxuXHQgICAgU2tpcFVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2tpcFVudGlsT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNraXBVbnRpbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNraXBVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTa2lwVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pc0lubmVyU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgbm90aWZpZXIpKTtcblx0ICAgIH1cblx0ICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmlzSW5uZXJTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmlzSW5uZXJTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBVbnRpbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBVbnRpbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNraXBXaGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcFdoaWxlID0gc2tpcFdoaWxlXzEuc2tpcFdoaWxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1za2lwV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaG9sZHNcblx0ICogdHJ1ZSwgYnV0IGVtaXRzIGFsbCBmdXJ0aGVyIHNvdXJjZSBpdGVtcyBhcyBzb29uIGFzIHRoZSBjb25kaXRpb24gYmVjb21lcyBmYWxzZS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9za2lwV2hpbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSAtIGEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGl0ZW0gZW1pdHRlZCBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGJlZ2lucyBlbWl0dGluZyBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aGVuIHRoZVxuXHQgKiBzcGVjaWZpZWQgcHJlZGljYXRlIGJlY29tZXMgZmFsc2UuXG5cdCAqIEBtZXRob2Qgc2tpcFdoaWxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBza2lwV2hpbGUocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcblx0fVxuXHRleHBvcnRzLnNraXBXaGlsZSA9IHNraXBXaGlsZTtcblx0dmFyIFNraXBXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNraXBXaGlsZU9wZXJhdG9yKHByZWRpY2F0ZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgU2tpcFdoaWxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBXaGlsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTa2lwV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTa2lwV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU2tpcFdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc2tpcHBpbmcgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgU2tpcFdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLnNraXBwaW5nKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5Q2FsbFByZWRpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghdGhpcy5za2lwcGluZykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2tpcFdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q2FsbFByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTtcblx0ICAgICAgICAgICAgdGhpcy5za2lwcGluZyA9IEJvb2xlYW4ocmVzdWx0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTa2lwV2hpbGVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHN0YXJ0V2l0aF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3RhcnRXaXRoID0gc3RhcnRXaXRoXzEuc3RhcnRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdGFydFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNCk7XG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0dmFyIGNvbmNhdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDUpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiBhIHNwZWNpZmllZCBJdGVyYWJsZSBiZWZvcmUgaXQgYmVnaW5zIHRvIGVtaXQgaXRlbXMgZW1pdHRlZCBieSB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvc3RhcnRXaXRoLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge1ZhbHVlc30gYW4gSXRlcmFibGUgdGhhdCBjb250YWlucyB0aGUgaXRlbXMgeW91IHdhbnQgdGhlIG1vZGlmaWVkIE9ic2VydmFibGUgdG8gZW1pdCBmaXJzdC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiB0aGUgc3BlY2lmaWVkIEl0ZXJhYmxlIGFuZCB0aGVuIGVtaXRzIHRoZSBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBzdGFydFdpdGhcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN0YXJ0V2l0aCgpIHtcblx0ICAgIHZhciBhcnJheSA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcblx0ICAgICAgICBhcnJheS5wb3AoKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuXHQgICAgaWYgKGxlbiA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiBjb25jYXRfMS5jb25jYXRTdGF0aWMobmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKGxlbiA+IDEpIHtcblx0ICAgICAgICByZXR1cm4gY29uY2F0XzEuY29uY2F0U3RhdGljKG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlciksIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGNvbmNhdF8xLmNvbmNhdFN0YXRpYyhuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlciksIHRoaXMpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMuc3RhcnRXaXRoID0gc3RhcnRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdGFydFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBzdWJzY3JpYmVPbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlT24gPSBzdWJzY3JpYmVPbl8xLnN1YnNjcmliZU9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVPbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBTdWJzY3JpYmVPbk9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM0KTtcblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91c2x5IHN1YnNjcmliZXMgT2JzZXJ2ZXJzIHRvIHRoaXMgT2JzZXJ2YWJsZSBvbiB0aGUgc3BlY2lmaWVkIFNjaGVkdWxlci5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zdWJzY3JpYmVPbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IHRoZSBTY2hlZHVsZXIgdG8gcGVyZm9ybSBzdWJzY3JpcHRpb24gYWN0aW9ucyBvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1vZGlmaWVkIHNvIHRoYXQgaXRzIHN1YnNjcmlwdGlvbnMgaGFwcGVuIG9uIHRoZSBzcGVjaWZpZWQgU2NoZWR1bGVyXG5cdCAuXG5cdCAqIEBtZXRob2Qgc3Vic2NyaWJlT25cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN1YnNjcmliZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuXHQgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGVfMS5TdWJzY3JpYmVPbk9ic2VydmFibGUodGhpcywgZGVsYXksIHNjaGVkdWxlcik7XG5cdH1cblx0ZXhwb3J0cy5zdWJzY3JpYmVPbiA9IHN1YnNjcmliZU9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVPbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGFzYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM1KTtcblx0dmFyIGlzTnVtZXJpY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzUpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBTdWJzY3JpYmVPbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFN1YnNjcmliZU9uT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIGRlbGF5VGltZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKGRlbGF5VGltZSA9PT0gdm9pZCAwKSB7IGRlbGF5VGltZSA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmRlbGF5VGltZSA9IGRlbGF5VGltZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoIWlzTnVtZXJpY18xLmlzTnVtZXJpYyhkZWxheVRpbWUpIHx8IGRlbGF5VGltZSA8IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZWxheVRpbWUgPSAwO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIXNjaGVkdWxlciB8fCB0eXBlb2Ygc2NoZWR1bGVyLnNjaGVkdWxlICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgU3Vic2NyaWJlT25PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzb3VyY2UsIGRlbGF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7IH1cblx0ICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIGRlbGF5LCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gYXJnLnNvdXJjZSwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5kZWxheVRpbWU7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCwgZGVsYXksIHtcblx0ICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVPbk9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXNhcFNjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzYpO1xuXHRleHBvcnRzLmFzYXAgPSBuZXcgQXNhcFNjaGVkdWxlcl8xLkFzYXBTY2hlZHVsZXIoKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXNhcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBBc2FwQWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzNyk7XG5cdHZhciBRdWV1ZVNjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzkpO1xuXHR2YXIgQXNhcFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXNhcFNjaGVkdWxlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFzYXBTY2hlZHVsZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBBc2FwU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQXNhcEFjdGlvbl8xLkFzYXBBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBc2FwU2NoZWR1bGVyO1xuXHR9KFF1ZXVlU2NoZWR1bGVyXzEuUXVldWVTY2hlZHVsZXIpKTtcblx0ZXhwb3J0cy5Bc2FwU2NoZWR1bGVyID0gQXNhcFNjaGVkdWxlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcFNjaGVkdWxlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBJbW1lZGlhdGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM4KTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzgpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBBc2FwQWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc2FwQWN0aW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQXNhcEFjdGlvbigpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIEFzYXBBY3Rpb24ucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICBpZiAoZGVsYXkgPiAwKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9zY2hlZHVsZS5jYWxsKHRoaXMsIHN0YXRlLCBkZWxheSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2godGhpcyk7XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIuc2NoZWR1bGVkSWQpIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZElkID0gSW1tZWRpYXRlXzEuSW1tZWRpYXRlLnNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgc2NoZWR1bGVyLmZsdXNoKCk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZWRJZCA9IHNjaGVkdWxlci5zY2hlZHVsZWRJZCwgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgaWYgKGFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlci5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlZElkICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZWRJZCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBJbW1lZGlhdGVfMS5JbW1lZGlhdGUuY2xlYXJJbW1lZGlhdGUoc2NoZWR1bGVkSWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBc2FwQWN0aW9uO1xuXHR9KEZ1dHVyZUFjdGlvbl8xLkZ1dHVyZUFjdGlvbikpO1xuXHRleHBvcnRzLkFzYXBBY3Rpb24gPSBBc2FwQWN0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bc2FwQWN0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oY2xlYXJJbW1lZGlhdGUsIHNldEltbWVkaWF0ZSkgey8qKlxuXHRTb21lIGNyZWRpdCBmb3IgdGhpcyBoZWxwZXIgZ29lcyB0byBodHRwOi8vZ2l0aHViLmNvbS9ZdXp1SlMvc2V0SW1tZWRpYXRlXG5cdCovXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBJbW1lZGlhdGVEZWZpbml0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEltbWVkaWF0ZURlZmluaXRpb24ocm9vdCkge1xuXHQgICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG5cdCAgICAgICAgaWYgKHJvb3Quc2V0SW1tZWRpYXRlICYmIHR5cGVvZiByb290LnNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHJvb3Quc2V0SW1tZWRpYXRlLmJpbmQocm9vdCk7XG5cdCAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUgPSByb290LmNsZWFySW1tZWRpYXRlLmJpbmQocm9vdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLm5leHRIYW5kbGUgPSAxO1xuXHQgICAgICAgICAgICB0aGlzLnRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgICAgICAgICBpZiAodGhpcy5jYW5Vc2VQcm9jZXNzTmV4dFRpY2soKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVBvc3RNZXNzYWdlU2V0SW1tZWRpYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VNZXNzYWdlQ2hhbm5lbCgpKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlKCkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVNldFRpbWVvdXRTZXRJbW1lZGlhdGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgY2kgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgICAgIGRlbGV0ZSBjbGVhckltbWVkaWF0ZS5pbnN0YW5jZS50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGNpLmluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZSA9IGNpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yb290Lk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VQcm9jZXNzTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZnkodGhpcy5yb290LnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlTWVzc2FnZUNoYW5uZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKTtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMucm9vdC5kb2N1bWVudDtcblx0ICAgICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudCAmJiAnb25yZWFkeXN0YXRlY2hhbmdlJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSk7XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHJvb3QgPSB0aGlzLnJvb3Q7XG5cdCAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuXHQgICAgICAgIC8vIHdoZXJlIGByb290LnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAocm9vdC5wb3N0TWVzc2FnZSAmJiAhcm9vdC5pbXBvcnRTY3JpcHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzXzEgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gcm9vdC5vbm1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHJvb3QucG9zdE1lc3NhZ2UoJycsICcqJyk7XG5cdCAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgLy8gVGhpcyBmdW5jdGlvbiBhY2NlcHRzIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBzZXRJbW1lZGlhdGUsIGJ1dFxuXHQgICAgLy8gcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmVxdWlyZXMgbm8gYXJndW1lbnRzLlxuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucGFydGlhbGx5QXBwbGllZCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiByZXN1bHQoKSB7XG5cdCAgICAgICAgICAgIHZhciBfYSA9IHJlc3VsdCwgaGFuZGxlciA9IF9hLmhhbmRsZXIsIGFyZ3MgPSBfYS5hcmdzO1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIChuZXcgRnVuY3Rpb24oJycgKyBoYW5kbGVyKSkoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaGFuZGxlciA9IGhhbmRsZXI7XG5cdCAgICAgICAgZm4uYXJncyA9IGFyZ3M7XG5cdCAgICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHRoaXMudGFza3NCeUhhbmRsZVt0aGlzLm5leHRIYW5kbGVdID0gdGhpcy5wYXJ0aWFsbHlBcHBsaWVkLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubmV4dEhhbmRsZSsrO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG5cdCAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wcm9jZXNzLm5leHRUaWNrKGluc3RhbmNlLnBhcnRpYWxseUFwcGxpZWQoaW5zdGFuY2UucnVuSWZQcmVzZW50LCBoYW5kbGUpKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gZm47XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHQgICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gJ3NldEltbWVkaWF0ZSQnICsgcm9vdC5NYXRoLnJhbmRvbSgpICsgJyQnO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBnbG9iYWxNZXNzYWdlSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBnbG9iYWxNZXNzYWdlSGFuZGxlci5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gcm9vdCAmJlxuXHQgICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmXG5cdCAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIGluc3RhbmNlLnJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBvbkdsb2JhbE1lc3NhZ2UuaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIF9hID0gc2V0SW1tZWRpYXRlLCBtZXNzYWdlUHJlZml4ID0gX2EubWVzc2FnZVByZWZpeCwgaW5zdGFuY2UgPSBfYS5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCAnKicpO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIGZuLm1lc3NhZ2VQcmVmaXggPSBtZXNzYWdlUHJlZml4O1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5ydW5JZlByZXNlbnQgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogJ1dhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLidcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmICh0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyAndG9vIG11Y2ggcmVjdXJzaW9uJyBlcnJvci5cblx0ICAgICAgICAgICAgdGhpcy5yb290LnNldFRpbWVvdXQodGhpcy5wYXJ0aWFsbHlBcHBsaWVkKHRoaXMucnVuSWZQcmVzZW50LCBoYW5kbGUpLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGhpcy50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRhc2soKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgdGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIF90aGlzLnJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgX2EgPSBzZXRJbW1lZGlhdGUsIGNoYW5uZWwgPSBfYS5jaGFubmVsLCBpbnN0YW5jZSA9IF9hLmluc3RhbmNlO1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBmbi5jaGFubmVsID0gY2hhbm5lbDtcblx0ICAgICAgICBmbi5pbnN0YW5jZSA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG5cdCAgICAgICAgICAgIHZhciByb290ID0gaW5zdGFuY2Uucm9vdDtcblx0ICAgICAgICAgICAgdmFyIGRvYyA9IHJvb3QuZG9jdW1lbnQ7XG5cdCAgICAgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVTZXRUaW1lb3V0U2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gc2V0SW1tZWRpYXRlLmluc3RhbmNlO1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5yb290LnNldFRpbWVvdXQoaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSksIDApO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW1tZWRpYXRlRGVmaW5pdGlvbjtcblx0fSgpKTtcblx0ZXhwb3J0cy5JbW1lZGlhdGVEZWZpbml0aW9uID0gSW1tZWRpYXRlRGVmaW5pdGlvbjtcblx0ZXhwb3J0cy5JbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlRGVmaW5pdGlvbihyb290XzEucm9vdCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUltbWVkaWF0ZS5qcy5tYXBcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNTM5KS5jbGVhckltbWVkaWF0ZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0sXG4vKiA1MzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUsIGNsZWFySW1tZWRpYXRlKSB7dmFyIG5leHRUaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDApLm5leHRUaWNrO1xuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblx0dmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xuXHR2YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuXHRleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuXHQgICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHNldEltbWVkaWF0ZSA6IGZ1bmN0aW9uKGZuKSB7XG5cdCAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG5cdCAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcblx0ICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblx0XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gb25OZXh0VGljaygpIHtcblx0ICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG5cdCAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2Vcblx0ICAgICAgLy8gQHNlZSBodHRwOi8vanNwZXJmLmNvbS9jYWxsLWFwcGx5LXNlZ3Vcblx0ICAgICAgaWYgKGFyZ3MpIHtcblx0ICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmbi5jYWxsKG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIFByZXZlbnQgaWRzIGZyb20gbGVha2luZ1xuXHQgICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGlkO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xuXHQgIGRlbGV0ZSBpbW1lZGlhdGVJZHNbaWRdO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpLnNldEltbWVkaWF0ZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpLmNsZWFySW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDU0MCAqLyxcbi8qIDU0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHN3aXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoID0gc3dpdGNoXzEuX3N3aXRjaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnlcblx0ICogc3Vic2NyaWJpbmcgdG8gb25seSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIG9mIHRob3NlIGlubmVyIE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBkcm9wcGluZyB0aGVcblx0ICogcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZSBvbmNlIGEgbmV3IG9uZSBhcHBlYXJzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zd2l0Y2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBzd2l0Y2hgIHN1YnNjcmliZXMgdG8gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzLCBhbHNvIGtub3duIGFzIGFcblx0ICogaGlnaGVyLW9yZGVyIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2UgZW1pdHRlZCBpbm5lclxuXHQgKiBPYnNlcnZhYmxlcywgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHN1YnNjcmliZXMgdG8gdGhlIGlubmVyIE9ic2VydmFibGUgYW5kXG5cdCAqIGJlZ2lucyBlbWl0dGluZyB0aGUgaXRlbXMgZW1pdHRlZCBieSB0aGF0LiBTbyBmYXIsIGl0IGJlaGF2ZXNcblx0ICogbGlrZSB7QGxpbmsgbWVyZ2VBbGx9LiBIb3dldmVyLCB3aGVuIGEgbmV3IGlubmVyIE9ic2VydmFibGUgaXMgZW1pdHRlZCxcblx0ICogYHN3aXRjaGAgdW5zdWJzY3JpYmVzIGZyb20gdGhlIGVhcmxpZXItZW1pdHRlZCBpbm5lciBPYnNlcnZhYmxlIGFuZFxuXHQgKiBzdWJzY3JpYmVzIHRvIHRoZSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBhbmQgYmVnaW5zIGVtaXR0aW5nIGl0ZW1zIGZyb20gaXQuIEl0XG5cdCAqIGNvbnRpbnVlcyB0byBiZWhhdmUgbGlrZSB0aGlzIGZvciBzdWJzZXF1ZW50IGlubmVyIE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiAvLyBFYWNoIGNsaWNrIGV2ZW50IGlzIG1hcHBlZCB0byBhbiBPYnNlcnZhYmxlIHRoYXQgdGlja3MgZXZlcnkgc2Vjb25kXG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogdmFyIHN3aXRjaGVkID0gaGlnaGVyT3JkZXIuc3dpdGNoKCk7XG5cdCAqIC8vIFRoZSBvdXRjb21lIGlzIHRoYXQgYHN3aXRjaGVkYCBpcyBlc3NlbnRpYWxseSBhIHRpbWVyIHRoYXQgcmVzdGFydHNcblx0ICogLy8gb24gZXZlcnkgY2xpY2suIFRoZSBpbnRlcnZhbCBPYnNlcnZhYmxlcyBmcm9tIG9sZGVyIGNsaWNrcyBkbyBub3QgbWVyZ2Vcblx0ICogLy8gd2l0aCB0aGUgY3VycmVudCBpbnRlcnZhbCBPYnNlcnZhYmxlLlxuXHQgKiBzd2l0Y2hlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIHppcEFsbH1cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZVxuXHQgKiBPYnNlcnZhYmxlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2Qgc3dpdGNoXG5cdCAqIEBuYW1lIHN3aXRjaFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3N3aXRjaCgpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE9wZXJhdG9yKCkpO1xuXHR9XG5cdGV4cG9ydHMuX3N3aXRjaCA9IF9zd2l0Y2g7XG5cdHZhciBTd2l0Y2hPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hPcGVyYXRvcigpIHtcblx0ICAgIH1cblx0ICAgIFN3aXRjaE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3dpdGNoU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN3aXRjaE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTd2l0Y2hTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZUlubmVyKCk7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICB0aGlzLmFkZCh0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmVJbm5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlID4gMCA/IHRoaXMuYWN0aXZlIC0gMSA6IDA7XG5cdCAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSW5uZXIoKTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgc3dpdGNoTWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0NCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXBfMS5zd2l0Y2hNYXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBpbiB0aGUgb3V0cHV0XG5cdCAqIE9ic2VydmFibGUsIGVtaXR0aW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5NYXBzIGVhY2ggdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSwgdGhlbiBmbGF0dGVucyBhbGwgb2Zcblx0ICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIHN3aXRjaH0uPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuXHQgKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG5cdCAqIHJldHVybnMgYW4gKHNvLWNhbGxlZCBcImlubmVyXCIpIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2Vcblx0ICogaW5uZXIgT2JzZXJ2YWJsZXMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiZWdpbnMgZW1pdHRpbmcgdGhlIGl0ZW1zIGVtaXR0ZWQgYnlcblx0ICogdGhhdCBpbm5lciBPYnNlcnZhYmxlLiBXaGVuIGEgbmV3IGlubmVyIE9ic2VydmFibGUgaXMgZW1pdHRlZCwgYHN3aXRjaE1hcGBcblx0ICogc3RvcHMgZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kIGJlZ2luc1xuXHQgKiBlbWl0dGluZyBpdGVtcyBmcm9tIHRoZSBuZXcgb25lLiBJdCBjb250aW51ZXMgdG8gYmVoYXZlIGxpa2UgdGhpcyBmb3Jcblx0ICogc3Vic2VxdWVudCBpbm5lciBPYnNlcnZhYmxlcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+UmVydW4gYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSBvbiBldmVyeSBjbGljayBldmVudDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zd2l0Y2hNYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cblx0ICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cblx0ICogT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcblx0ICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuXHQgKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIHRha2luZyBvbmx5IHRoZSB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRseVxuXHQgKiBwcm9qZWN0ZWQgaW5uZXIgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBzd2l0Y2hNYXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN3aXRjaE1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLnN3aXRjaE1hcCA9IHN3aXRjaE1hcDtcblx0dmFyIFN3aXRjaE1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN3aXRjaE1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBTd2l0Y2hNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnJlc3VsdFNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN3aXRjaE1hcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTd2l0Y2hNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKCFpbm5lclN1YnNjcmlwdGlvbiB8fCBpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICB0aGlzLl90cnlOb3RpZnlOZXh0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5Tm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgc3dpdGNoTWFwVG9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN3aXRjaE1hcFRvID0gc3dpdGNoTWFwVG9fMS5zd2l0Y2hNYXBUbztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBmbGF0dGVuZWQgbXVsdGlwbGVcblx0ICogdGltZXMgd2l0aCB7QGxpbmsgc3dpdGNofSBpbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHN3aXRjaE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcblx0ICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZXNcblx0ICogZW1pdHMgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIGluc3RhbmNlIG9mXG5cdCAqIGBpbm5lck9ic2VydmFibGVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnN3aXRjaE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5uZXJPYnNlcnZhYmxlIEFuIE9ic2VydmFibGUgdG8gcmVwbGFjZSBlYWNoIHZhbHVlIGZyb21cblx0ICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcblx0ICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcblx0ICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCBldmVyeSB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCAoYW5kIG9wdGlvbmFsbHkgdHJhbnNmb3JtZWQgdGhyb3VnaCBgcmVzdWx0U2VsZWN0b3JgKSBldmVyeVxuXHQgKiB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCB0YWtpbmcgb25seSB0aGUgdmFsdWVzXG5cdCAqIGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2Qgc3dpdGNoTWFwVG9cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN3aXRjaE1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE1hcFRvT3BlcmF0b3IoaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMuc3dpdGNoTWFwVG8gPSBzd2l0Y2hNYXBUbztcblx0dmFyIFN3aXRjaE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoTWFwVG9PcGVyYXRvcihvYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFRvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGUsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwVG9PcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU3dpdGNoTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlubmVyLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHRoaXMuaW5uZXIsIHZhbHVlLCB0aGlzLmluZGV4KyspKTtcblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy50cnlSZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwVG9TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRha2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2UgPSB0YWtlXzEudGFrZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0OSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0LyoqXG5cdCAqIEVtaXRzIG9ubHkgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGFrZXMgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSwgdGhlblxuXHQgKiBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGB0YWtlYCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBmaXJzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkXG5cdCAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGAgdmFsdWVzIHRoZW5cblx0ICogYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIEFmdGVyIHRoYXQsIGl0IGNvbXBsZXRlcywgcmVnYXJkbGVzcyBpZiB0aGVcblx0ICogc291cmNlIGNvbXBsZXRlcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+VGFrZSB0aGUgZmlyc3QgNSBzZWNvbmRzIG9mIGFuIGluZmluaXRlIDEtc2Vjb25kIGludGVydmFsIE9ic2VydmFibGU8L2NhcHRpb24+XG5cdCAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBmaXZlID0gaW50ZXJ2YWwudGFrZSg1KTtcblx0ICogZml2ZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuXHQgKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VXaGlsZX1cblx0ICogQHNlZSB7QGxpbmsgc2tpcH1cblx0ICpcblx0ICogQHRocm93cyB7QXJndW1lbnRPdXRPZlJhbmdlRXJyb3J9IFdoZW4gdXNpbmcgYHRha2UoaSlgLCBpdCBkZWxpdmVycyBhblxuXHQgKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYG5leHRgIHZhbHVlcyB0byBlbWl0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgYGNvdW50YFxuXHQgKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIG9yIGFsbCBvZiB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBpZiB0aGUgc291cmNlIGVtaXRzIGZld2VyIHRoYW4gYGNvdW50YCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgdGFrZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGFrZShjb3VudCkge1xuXHQgICAgaWYgKGNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRha2VPcGVyYXRvcihjb3VudCkpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMudGFrZSA9IHRha2U7XG5cdHZhciBUYWtlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGFrZU9wZXJhdG9yKHRvdGFsKSB7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBUYWtlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVGFrZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRha2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGFrZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgIH1cblx0ICAgIFRha2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG5cdCAgICAgICAgaWYgKCsrdGhpcy5jb3VudCA8PSB0b3RhbCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gdG90YWwpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8qKlxuXHQgKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBlbGVtZW50IHdhcyBxdWVyaWVkIGF0IGEgY2VydGFpbiBpbmRleCBvZiBhblxuXHQgKiBPYnNlcnZhYmxlLCBidXQgbm8gc3VjaCBpbmRleCBvciBwb3NpdGlvbiBleGlzdHMgaW4gdGhhdCBzZXF1ZW5jZS5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZWxlbWVudEF0fVxuXHQgKiBAc2VlIHtAbGluayB0YWtlfVxuXHQgKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cblx0ICpcblx0ICogQGNsYXNzIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXG5cdCAqL1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgJ2FyZ3VtZW50IG91dCBvZiByYW5nZScpO1xuXHQgICAgICAgIHRoaXMubmFtZSA9ICdBcmd1bWVudE91dE9mUmFuZ2VFcnJvcic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG5cdH0oRXJyb3IpKTtcblx0ZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRha2VMYXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlTGFzdCA9IHRha2VMYXN0XzEudGFrZUxhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VMYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ5KTtcblx0dmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzYpO1xuXHQvKipcblx0ICogRW1pdHMgb25seSB0aGUgbGFzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlJlbWVtYmVycyB0aGUgbGF0ZXN0IGBjb3VudGAgdmFsdWVzLCB0aGVuIGVtaXRzIHRob3NlXG5cdCAqIG9ubHkgd2hlbiB0aGUgc291cmNlIGNvbXBsZXRlcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvdGFrZUxhc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGB0YWtlTGFzdGAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYXQgbW9zdCB0aGUgbGFzdCBgY291bnRgIHZhbHVlc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGBcblx0ICogdmFsdWVzIHRoZW4gYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIFRoaXMgb3BlcmF0b3IgbXVzdCB3YWl0IHVudGlsIHRoZVxuXHQgKiBgY29tcGxldGVgIG5vdGlmaWNhdGlvbiBlbWlzc2lvbiBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gZW1pdCB0aGUgYG5leHRgXG5cdCAqIHZhbHVlcyBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGJlY2F1c2Ugb3RoZXJ3aXNlIGl0IGlzIGltcG9zc2libGUgdG8ga25vd1xuXHQgKiB3aGV0aGVyIG9yIG5vdCBtb3JlIHZhbHVlcyB3aWxsIGJlIGVtaXR0ZWQgb24gdGhlIHNvdXJjZS4gRm9yIHRoaXMgcmVhc29uLFxuXHQgKiBhbGwgdmFsdWVzIGFyZSBlbWl0dGVkIHN5bmNocm9ub3VzbHksIGZvbGxvd2VkIGJ5IHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPlRha2UgdGhlIGxhc3QgMyB2YWx1ZXMgb2YgYW4gT2JzZXJ2YWJsZSB3aXRoIG1hbnkgdmFsdWVzPC9jYXB0aW9uPlxuXHQgKiB2YXIgbWFueSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTAwKTtcblx0ICogdmFyIGxhc3RUaHJlZSA9IG1hbnkudGFrZUxhc3QoMyk7XG5cdCAqIGxhc3RUaHJlZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHRha2V9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VVbnRpbH1cblx0ICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAdGhyb3dzIHtBcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0gV2hlbiB1c2luZyBgdGFrZUxhc3QoaSlgLCBpdCBkZWxpdmVycyBhblxuXHQgKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgdmFsdWVzIHRvIGVtaXQgZnJvbSB0aGUgZW5kIG9mXG5cdCAqIHRoZSBzZXF1ZW5jZSBvZiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhdCBtb3N0IHRoZSBsYXN0IGNvdW50XG5cdCAqIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB0YWtlTGFzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGFrZUxhc3QoY291bnQpIHtcblx0ICAgIGlmIChjb3VudCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlTGFzdE9wZXJhdG9yKGNvdW50KSk7XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy50YWtlTGFzdCA9IHRha2VMYXN0O1xuXHR2YXIgVGFrZUxhc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUYWtlTGFzdE9wZXJhdG9yKHRvdGFsKSB7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBUYWtlTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZUxhc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZUxhc3RPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVGFrZUxhc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUYWtlTGFzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUYWtlTGFzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcblx0ICAgICAgICB0aGlzLnJpbmcgPSBuZXcgQXJyYXkoKTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgIH1cblx0ICAgIFRha2VMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZztcblx0ICAgICAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsO1xuXHQgICAgICAgIHZhciBjb3VudCA9IHRoaXMuY291bnQrKztcblx0ICAgICAgICBpZiAocmluZy5sZW5ndGggPCB0b3RhbCkge1xuXHQgICAgICAgICAgICByaW5nLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gY291bnQgJSB0b3RhbDtcblx0ICAgICAgICAgICAgcmluZ1tpbmRleF0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGFrZUxhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgY291bnQgPSB0aGlzLmNvdW50O1xuXHQgICAgICAgIGlmIChjb3VudCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5jb3VudCA+PSB0aGlzLnRvdGFsID8gdGhpcy50b3RhbCA6IHRoaXMuY291bnQ7XG5cdCAgICAgICAgICAgIHZhciByaW5nID0gdGhpcy5yaW5nO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBpZHggPSAoY291bnQrKykgJSB0b3RhbDtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmluZ1tpZHhdKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUYWtlTGFzdFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZUxhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB0YWtlVW50aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2VVbnRpbCA9IHRha2VVbnRpbF8xLnRha2VVbnRpbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZVVudGlsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEVtaXRzIHRoZSB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgYSBgbm90aWZpZXJgXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxldHMgdmFsdWVzIHBhc3MgdW50aWwgYSBzZWNvbmQgT2JzZXJ2YWJsZSxcblx0ICogYG5vdGlmaWVyYCwgZW1pdHMgc29tZXRoaW5nLiBUaGVuLCBpdCBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2VVbnRpbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYHRha2VVbnRpbGAgc3Vic2NyaWJlcyBhbmQgYmVnaW5zIG1pcnJvcmluZyB0aGUgc291cmNlIE9ic2VydmFibGUuIEl0IGFsc29cblx0ICogbW9uaXRvcnMgYSBzZWNvbmQgT2JzZXJ2YWJsZSwgYG5vdGlmaWVyYCB0aGF0IHlvdSBwcm92aWRlLiBJZiB0aGUgYG5vdGlmaWVyYFxuXHQgKiBlbWl0cyBhIHZhbHVlIG9yIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgc3RvcHNcblx0ICogbWlycm9yaW5nIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgY29tcGxldGVzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5UaWNrIGV2ZXJ5IHNlY29uZCB1bnRpbCB0aGUgZmlyc3QgY2xpY2sgaGFwcGVuczwvY2FwdGlvbj5cblx0ICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGludGVydmFsLnRha2VVbnRpbChjbGlja3MpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB0YWtlfVxuXHQgKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cblx0ICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG5vdGlmaWVyIFRoZSBPYnNlcnZhYmxlIHdob3NlIGZpcnN0IGVtaXR0ZWQgdmFsdWUgd2lsbFxuXHQgKiBjYXVzZSB0aGUgb3V0cHV0IE9ic2VydmFibGUgb2YgYHRha2VVbnRpbGAgdG8gc3RvcCBlbWl0dGluZyB2YWx1ZXMgZnJvbSB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIHVudGlsIHN1Y2ggdGltZSBhcyBgbm90aWZpZXJgIGVtaXRzIGl0cyBmaXJzdCB2YWx1ZS5cblx0ICogQG1ldGhvZCB0YWtlVW50aWxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRha2VVbnRpbChub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZVVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcblx0fVxuXHRleHBvcnRzLnRha2VVbnRpbCA9IHRha2VVbnRpbDtcblx0dmFyIFRha2VVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgfVxuXHQgICAgVGFrZVVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlVW50aWxTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVVudGlsT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFRha2VVbnRpbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRha2VVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUYWtlVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuXHQgICAgfVxuXHQgICAgVGFrZVVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBUYWtlVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvLyBub29wXG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VVbnRpbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VVbnRpbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRha2VXaGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NTUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZVdoaWxlID0gdGFrZVdoaWxlXzEudGFrZVdoaWxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBFbWl0cyB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgc28gbG9uZyBhcyBlYWNoIHZhbHVlIHNhdGlzZmllc1xuXHQgKiB0aGUgZ2l2ZW4gYHByZWRpY2F0ZWAsIGFuZCB0aGVuIGNvbXBsZXRlcyBhcyBzb29uIGFzIHRoaXMgYHByZWRpY2F0ZWAgaXMgbm90XG5cdCAqIHNhdGlzZmllZC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRha2VzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugb25seSB3aGlsZSB0aGV5IHBhc3MgdGhlXG5cdCAqIGNvbmRpdGlvbiBnaXZlbi4gV2hlbiB0aGUgZmlyc3QgdmFsdWUgZG9lcyBub3Qgc2F0aXNmeSwgaXQgY29tcGxldGVzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy90YWtlV2hpbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGB0YWtlV2hpbGVgIHN1YnNjcmliZXMgYW5kIGJlZ2lucyBtaXJyb3JpbmcgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBFYWNoIHZhbHVlXG5cdCAqIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSBpcyBnaXZlbiB0byB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhXG5cdCAqIGJvb2xlYW4sIHJlcHJlc2VudGluZyBhIGNvbmRpdGlvbiB0byBiZSBzYXRpc2ZpZWQgYnkgdGhlIHNvdXJjZSB2YWx1ZXMuIFRoZVxuXHQgKiBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyB0aGUgc291cmNlIHZhbHVlcyB1bnRpbCBzdWNoIHRpbWUgYXMgdGhlIGBwcmVkaWNhdGVgXG5cdCAqIHJldHVybnMgZmFsc2UsIGF0IHdoaWNoIHBvaW50IGB0YWtlV2hpbGVgIHN0b3BzIG1pcnJvcmluZyB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgYW5kIGNvbXBsZXRlcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgY2xpY2sgZXZlbnRzIG9ubHkgd2hpbGUgdGhlIGNsaWVudFggcHJvcGVydHkgaXMgZ3JlYXRlciB0aGFuIDIwMDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy50YWtlV2hpbGUoZXYgPT4gZXYuY2xpZW50WCA+IDIwMCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHRha2V9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuXHQgKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG5cdCAqIEBzZWUge0BsaW5rIHNraXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBib29sZWFufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0aGF0XG5cdCAqIGV2YWx1YXRlcyBhIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCByZXR1cm5zIGEgYm9vbGVhbi5cblx0ICogQWxzbyB0YWtlcyB0aGUgKHplcm8tYmFzZWQpIGluZGV4IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIHNvIGxvbmcgYXMgZWFjaCB2YWx1ZSBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBkZWZpbmVkIGJ5IHRoZVxuXHQgKiBgcHJlZGljYXRlYCwgdGhlbiBjb21wbGV0ZXMuXG5cdCAqIEBtZXRob2QgdGFrZVdoaWxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0YWtlV2hpbGUocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcblx0fVxuXHRleHBvcnRzLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcblx0dmFyIFRha2VXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRha2VXaGlsZU9wZXJhdG9yKHByZWRpY2F0ZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgVGFrZVdoaWxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VXaGlsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUYWtlV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUYWtlV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGFrZVdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgVGFrZVdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIHRoaXMuaW5kZXgrKyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm5leHRPckNvbXBsZXRlKHZhbHVlLCByZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIFRha2VXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHRPckNvbXBsZXRlID0gZnVuY3Rpb24gKHZhbHVlLCBwcmVkaWNhdGVSZXN1bHQpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmIChCb29sZWFuKHByZWRpY2F0ZVJlc3VsdCkpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVdoaWxlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB0aHJvdHRsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NTcpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGhyb3R0bGUgPSB0aHJvdHRsZV8xLnRocm90dGxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIGlnbm9yZXMgc3Vic2VxdWVudCBzb3VyY2Vcblx0ICogdmFsdWVzIGZvciBhIGR1cmF0aW9uIGRldGVybWluZWQgYnkgYW5vdGhlciBPYnNlcnZhYmxlLCB0aGVuIHJlcGVhdHMgdGhpc1xuXHQgKiBwcm9jZXNzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayB0aHJvdHRsZVRpbWV9LCBidXQgdGhlIHNpbGVuY2luZ1xuXHQgKiBkdXJhdGlvbiBpcyBkZXRlcm1pbmVkIGJ5IGEgc2Vjb25kIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm90dGxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgdGhyb3R0bGVgIGVtaXRzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlXG5cdCAqIHdoZW4gaXRzIGludGVybmFsIHRpbWVyIGlzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoZW4gdGhlIHRpbWVyXG5cdCAqIGlzIGVuYWJsZWQuIEluaXRpYWxseSwgdGhlIHRpbWVyIGlzIGRpc2FibGVkLiBBcyBzb29uIGFzIHRoZSBmaXJzdCBzb3VyY2Vcblx0ICogdmFsdWUgYXJyaXZlcywgaXQgaXMgZm9yd2FyZGVkIHRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSwgYW5kIHRoZW4gdGhlIHRpbWVyXG5cdCAqIGlzIGVuYWJsZWQgYnkgY2FsbGluZyB0aGUgYGR1cmF0aW9uU2VsZWN0b3JgIGZ1bmN0aW9uIHdpdGggdGhlIHNvdXJjZSB2YWx1ZSxcblx0ICogd2hpY2ggcmV0dXJucyB0aGUgXCJkdXJhdGlvblwiIE9ic2VydmFibGUuIFdoZW4gdGhlIGR1cmF0aW9uIE9ic2VydmFibGUgZW1pdHMgYVxuXHQgKiB2YWx1ZSBvciBjb21wbGV0ZXMsIHRoZSB0aW1lciBpcyBkaXNhYmxlZCwgYW5kIHRoaXMgcHJvY2VzcyByZXBlYXRzIGZvciB0aGVcblx0ICogbmV4dCBzb3VyY2UgdmFsdWUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgY2xpY2tzIGF0IGEgcmF0ZSBvZiBhdCBtb3N0IG9uZSBjbGljayBwZXIgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnRocm90dGxlKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBhdWRpdH1cblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cblx0ICogQHNlZSB7QGxpbmsgc2FtcGxlfVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBPYnNlcnZhYmxlfFByb21pc2V9IGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvblxuXHQgKiB0aGF0IHJlY2VpdmVzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIGZvciBjb21wdXRpbmcgdGhlIHNpbGVuY2luZ1xuXHQgKiBkdXJhdGlvbiBmb3IgZWFjaCBzb3VyY2UgdmFsdWUsIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbiB0b1xuXHQgKiBsaW1pdCB0aGUgcmF0ZSBvZiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlLlxuXHQgKiBAbWV0aG9kIHRocm90dGxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZShkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLnRocm90dGxlID0gdGhyb3R0bGU7XG5cdHZhciBUaHJvdHRsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBUaHJvdHRsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGhyb3R0bGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaHJvdHRsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUaHJvdHRsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRocm90dGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5RHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RHVyYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBkdXJhdGlvbiA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmVtaXRBbmRUaHJvdHRsZSh2YWx1ZSwgZHVyYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuZW1pdEFuZFRocm90dGxlID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbikpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHRocm90dGxlZCA9IHRoaXMudGhyb3R0bGVkO1xuXHQgICAgICAgIGlmICh0aHJvdHRsZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRocm90dGxlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB0aHJvdHRsZVRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTU5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRocm90dGxlVGltZSA9IHRocm90dGxlVGltZV8xLnRocm90dGxlVGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0LyoqXG5cdCAqIEVtaXRzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gaWdub3JlcyBzdWJzZXF1ZW50IHNvdXJjZVxuXHQgKiB2YWx1ZXMgZm9yIGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzLCB0aGVuIHJlcGVhdHMgdGhpcyBwcm9jZXNzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGV0cyBhIHZhbHVlIHBhc3MsIHRoZW4gaWdub3JlcyBzb3VyY2UgdmFsdWVzIGZvciB0aGVcblx0ICogbmV4dCBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvdGhyb3R0bGVUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgdGhyb3R0bGVUaW1lYCBlbWl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuXHQgKiB3aGVuIGl0cyBpbnRlcm5hbCB0aW1lciBpcyBkaXNhYmxlZCwgYW5kIGlnbm9yZXMgc291cmNlIHZhbHVlcyB3aGVuIHRoZSB0aW1lclxuXHQgKiBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Qgc291cmNlXG5cdCAqIHZhbHVlIGFycml2ZXMsIGl0IGlzIGZvcndhcmRlZCB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGVuIHRoZSB0aW1lclxuXHQgKiBpcyBlbmFibGVkLiBBZnRlciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkXG5cdCAqIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBoYXMgcGFzc2VkLCB0aGUgdGltZXIgaXMgZGlzYWJsZWQsXG5cdCAqIGFuZCB0aGlzIHByb2Nlc3MgcmVwZWF0cyBmb3IgdGhlIG5leHQgc291cmNlIHZhbHVlLiBPcHRpb25hbGx5IHRha2VzIGFcblx0ICoge0BsaW5rIFNjaGVkdWxlcn0gZm9yIG1hbmFnaW5nIHRpbWVycy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGlja3MgYXQgYSByYXRlIG9mIGF0IG1vc3Qgb25lIGNsaWNrIHBlciBzZWNvbmQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MudGhyb3R0bGVUaW1lKDEwMDApO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBhdWRpdFRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXl9XG5cdCAqIEBzZWUge0BsaW5rIHNhbXBsZVRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gVGltZSB0byB3YWl0IGJlZm9yZSBlbWl0dGluZyBhbm90aGVyIHZhbHVlIGFmdGVyXG5cdCAqIGVtaXR0aW5nIHRoZSBsYXN0IHZhbHVlLCBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkXG5cdCAqIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3Jcblx0ICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgc2FtcGxpbmcuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBwZXJmb3JtcyB0aGUgdGhyb3R0bGUgb3BlcmF0aW9uIHRvXG5cdCAqIGxpbWl0IHRoZSByYXRlIG9mIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UuXG5cdCAqIEBtZXRob2QgdGhyb3R0bGVUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZVRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLnRocm90dGxlVGltZSA9IHRocm90dGxlVGltZTtcblx0dmFyIFRocm90dGxlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBUaHJvdHRsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRocm90dGxlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGhyb3R0bGVUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFRocm90dGxlVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRocm90dGxlVGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIFRocm90dGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgdGhpcy5kdXJhdGlvbiwgeyBzdWJzY3JpYmVyOiB0aGlzIH0pKTtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdGhyb3R0bGVkID0gdGhpcy50aHJvdHRsZWQ7XG5cdCAgICAgICAgaWYgKHRocm90dGxlZCkge1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGhyb3R0bGVUaW1lU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRmdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgc3Vic2NyaWJlci5jbGVhclRocm90dGxlKCk7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdGltZW91dF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZW91dCA9IHRpbWVvdXRfMS50aW1lb3V0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdHZhciBpc0RhdGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQHBhcmFtIGR1ZVxuXHQgKiBAcGFyYW0gZXJyb3JUb1NlbmRcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB0aW1lb3V0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aW1lb3V0KGR1ZSwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGVycm9yVG9TZW5kID09PSB2b2lkIDApIHsgZXJyb3JUb1NlbmQgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuXHQgICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMudGltZW91dCA9IHRpbWVvdXQ7XG5cdHZhciBUaW1lb3V0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG5cdCAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG5cdCAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgVGltZW91dE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hYnNvbHV0ZVRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcy5lcnJvclRvU2VuZCwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGltZW91dE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUaW1lb3V0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGltZW91dFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaW1lb3V0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWJzb2x1dGVUaW1lb3V0LCB3YWl0Rm9yLCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuXHQgICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG5cdCAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICB9XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLCBcInByZXZpb3VzSW5kZXhcIiwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNJbmRleDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleDtcblx0ICAgICAgICBpZiAoIXNvdXJjZS5oYXNDb21wbGV0ZWQgJiYgc291cmNlLnByZXZpb3VzSW5kZXggPT09IGN1cnJlbnRJbmRleCkge1xuXHQgICAgICAgICAgICBzb3VyY2Uubm90aWZ5VGltZW91dCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmluZGV4O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCwgdGhpcy53YWl0Rm9yLCB7IHN1YnNjcmliZXI6IHRoaXMsIGluZGV4OiBjdXJyZW50SW5kZXggfSk7XG5cdCAgICAgICAgdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXg7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVycm9yKHRoaXMuZXJyb3JUb1NlbmQgfHwgbmV3IEVycm9yKCd0aW1lb3V0JykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lb3V0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdGltZW91dFdpdGhfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXRXaXRoID0gdGltZW91dFdpdGhfMS50aW1lb3V0V2l0aDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIGlzRGF0ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogQHBhcmFtIGR1ZVxuXHQgKiBAcGFyYW0gd2l0aE9ic2VydmFibGVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB0aW1lb3V0V2l0aFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGltZW91dFdpdGgoZHVlLCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuXHQgICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dFdpdGhPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLnRpbWVvdXRXaXRoID0gdGltZW91dFdpdGg7XG5cdHZhciBUaW1lb3V0V2l0aE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRpbWVvdXRXaXRoT3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcblx0ICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcblx0ICAgICAgICB0aGlzLndpdGhPYnNlcnZhYmxlID0gd2l0aE9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBUaW1lb3V0V2l0aE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFdpdGhTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWJzb2x1dGVUaW1lb3V0LCB0aGlzLndhaXRGb3IsIHRoaXMud2l0aE9ic2VydmFibGUsIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRpbWVvdXRXaXRoT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFRpbWVvdXRXaXRoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGltZW91dFdpdGhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGltZW91dFdpdGhTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhYnNvbHV0ZVRpbWVvdXQsIHdhaXRGb3IsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG5cdCAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcblx0ICAgICAgICB0aGlzLndpdGhPYnNlcnZhYmxlID0gd2l0aE9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy50aW1lb3V0U3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpO1xuXHQgICAgfVxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUsIFwicHJldmlvdXNJbmRleFwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0luZGV4O1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gc3RhdGUuaW5kZXg7XG5cdCAgICAgICAgaWYgKCFzb3VyY2UuaGFzQ29tcGxldGVkICYmIHNvdXJjZS5wcmV2aW91c0luZGV4ID09PSBjdXJyZW50SW5kZXgpIHtcblx0ICAgICAgICAgICAgc291cmNlLmhhbmRsZVRpbWVvdXQoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZVRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHRoaXMuaW5kZXg7XG5cdCAgICAgICAgdmFyIHRpbWVvdXRTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgaW5kZXg6IGN1cnJlbnRJbmRleCB9O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGltZW91dFN0YXRlKTtcblx0ICAgICAgICB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IGN1cnJlbnRJbmRleDtcblx0ICAgIH07XG5cdCAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuaGFuZGxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdmFyIHdpdGhPYnNlcnZhYmxlID0gdGhpcy53aXRoT2JzZXJ2YWJsZTtcblx0ICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmFkZCh0aGlzLnRpbWVvdXRTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHdpdGhPYnNlcnZhYmxlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lb3V0V2l0aFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXRXaXRoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdG9BcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9BcnJheSA9IHRvQXJyYXlfMS50b0FycmF5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnlbXT58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIHRvQXJyYXlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUb0FycmF5T3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy50b0FycmF5ID0gdG9BcnJheTtcblx0dmFyIFRvQXJyYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUb0FycmF5T3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBUb0FycmF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUb0FycmF5U3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRvQXJyYXlPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVG9BcnJheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRvQXJyYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVG9BcnJheVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5hcnJheSA9IFtdO1xuXHQgICAgfVxuXHQgICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICB0aGlzLmFycmF5LnB1c2goeCk7XG5cdCAgICB9O1xuXHQgICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hcnJheSk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUb0FycmF5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdG9Qcm9taXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IHRvUHJvbWlzZV8xLnRvUHJvbWlzZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dG9Qcm9taXNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgd2luZG93XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3cgPSB3aW5kb3dfMS53aW5kb3c7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvdy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHdoZW5ldmVyXG5cdCAqIGB3aW5kb3dCb3VuZGFyaWVzYCBlbWl0cy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyfSwgYnV0IGVtaXRzIGEgbmVzdGVkIE9ic2VydmFibGVcblx0ICogaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmdcblx0ICogd2luZG93cy4gSXQgZW1pdHMgdGhlIGN1cnJlbnQgd2luZG93IGFuZCBvcGVucyBhIG5ldyBvbmUgd2hlbmV2ZXIgdGhlXG5cdCAqIE9ic2VydmFibGUgYHdpbmRvd0JvdW5kYXJpZXNgIGVtaXRzIGFuIGl0ZW0uIEJlY2F1c2UgZWFjaCB3aW5kb3cgaXMgYW5cblx0ICogT2JzZXJ2YWJsZSwgdGhlIG91dHB1dCBpcyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JbiBldmVyeSB3aW5kb3cgb2YgMSBzZWNvbmQgZWFjaCwgZW1pdCBhdCBtb3N0IDIgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvdyhpbnRlcnZhbClcblx0ICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSB3aW5kb3dCb3VuZGFyaWVzIEFuIE9ic2VydmFibGUgdGhhdCBjb21wbGV0ZXMgdGhlXG5cdCAqIHByZXZpb3VzIHdpbmRvdyBhbmQgc3RhcnRzIGEgbmV3IHdpbmRvdy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gT2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBhcmVcblx0ICogT2JzZXJ2YWJsZXMgZW1pdHRpbmcgdmFsdWVzIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB3aW5kb3dcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvdyh3aW5kb3dCb3VuZGFyaWVzKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3cgPSB3aW5kb3c7XG5cdHZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3dCb3VuZGFyaWVzID0gd2luZG93Qm91bmRhcmllcztcblx0ICAgIH1cblx0ICAgIFdpbmRvd09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLndpbmRvd0JvdW5kYXJpZXMpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpbmRvd1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFdpbmRvd1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB3aW5kb3dCb3VuZGFyaWVzKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgd2luZG93Qm91bmRhcmllcykpO1xuXHQgICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuXHQgICAgfVxuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMud2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHByZXZXaW5kb3cgPSB0aGlzLndpbmRvdztcblx0ICAgICAgICBpZiAocHJldldpbmRvdykge1xuXHQgICAgICAgICAgICBwcmV2V2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIG5ld1dpbmRvdyA9IHRoaXMud2luZG93ID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgZGVzdGluYXRpb24uYWRkKG5ld1dpbmRvdyk7XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChuZXdXaW5kb3cpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3cuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB3aW5kb3dDb3VudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93Q291bnQgPSB3aW5kb3dDb3VudF8xLndpbmRvd0NvdW50O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHQvKipcblx0ICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2l0aCBlYWNoXG5cdCAqIG5lc3RlZCBPYnNlcnZhYmxlIGVtaXR0aW5nIGF0IG1vc3QgYHdpbmRvd1NpemVgIHZhbHVlcy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyQ291bnR9LCBidXQgZW1pdHMgYSBuZXN0ZWRcblx0ICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dDb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgZXZlcnkgYHN0YXJ0V2luZG93RXZlcnlgXG5cdCAqIGl0ZW1zLCBlYWNoIGNvbnRhaW5pbmcgbm8gbW9yZSB0aGFuIGB3aW5kb3dTaXplYCBpdGVtcy4gV2hlbiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgY29tcGxldGVzIG9yIGVuY291bnRlcnMgYW4gZXJyb3IsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0c1xuXHQgKiB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gSWYgYHN0YXJ0V2luZG93RXZlcnlgIGlzIG5vdCBwcm92aWRlZCwgdGhlbiBuZXcgd2luZG93cyBhcmVcblx0ICogc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBhbmQgd2hlbiBlYWNoIHdpbmRvdyBjb21wbGV0ZXNcblx0ICogd2l0aCBzaXplIGB3aW5kb3dTaXplYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+SWdub3JlIGV2ZXJ5IDNyZCBjbGljayBldmVudCwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3Qgb25lPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd0NvdW50KDMpXG5cdCAqICAgLm1hcCh3aW4gPT4gd2luLnNraXAoMSkpIC8vIHNraXAgZmlyc3Qgb2YgZXZlcnkgMyBjbGlja3Ncblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSB0aGlyZCBvbmU8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93Q291bnQoMiwgMylcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3aW5kb3dTaXplIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2YWx1ZXMgZW1pdHRlZCBieSBlYWNoXG5cdCAqIHdpbmRvdy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydFdpbmRvd0V2ZXJ5XSBJbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBhIG5ldyB3aW5kb3cuXG5cdCAqIEZvciBleGFtcGxlIGlmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgd2luZG93IHdpbGwgYmUgc3RhcnRlZFxuXHQgKiBvbiBldmVyeSBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIGF0IHRoZVxuXHQgKiBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBieSBkZWZhdWx0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBPYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cblx0ICogYXJlIE9ic2VydmFibGUgb2YgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIHdpbmRvd0NvdW50XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB3aW5kb3dDb3VudCh3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7XG5cdCAgICBpZiAoc3RhcnRXaW5kb3dFdmVyeSA9PT0gdm9pZCAwKSB7IHN0YXJ0V2luZG93RXZlcnkgPSAwOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dDb3VudE9wZXJhdG9yKHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpKTtcblx0fVxuXHRleHBvcnRzLndpbmRvd0NvdW50ID0gd2luZG93Q291bnQ7XG5cdHZhciBXaW5kb3dDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd0NvdW50T3BlcmF0b3Iod2luZG93U2l6ZSwgc3RhcnRXaW5kb3dFdmVyeSkge1xuXHQgICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID0gc3RhcnRXaW5kb3dFdmVyeTtcblx0ICAgIH1cblx0ICAgIFdpbmRvd0NvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dTaXplLCB0aGlzLnN0YXJ0V2luZG93RXZlcnkpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93Q291bnRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgV2luZG93Q291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID0gc3RhcnRXaW5kb3dFdmVyeTtcblx0ICAgICAgICB0aGlzLndpbmRvd3MgPSBbbmV3IFN1YmplY3RfMS5TdWJqZWN0KCldO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHZhciBmaXJzdFdpbmRvdyA9IHRoaXMud2luZG93c1swXTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5hZGQoZmlyc3RXaW5kb3cpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoZmlyc3RXaW5kb3cpO1xuXHQgICAgfVxuXHQgICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBzdGFydFdpbmRvd0V2ZXJ5ID0gKHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA+IDApID8gdGhpcy5zdGFydFdpbmRvd0V2ZXJ5IDogdGhpcy53aW5kb3dTaXplO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIHdpbmRvd1NpemUgPSB0aGlzLndpbmRvd1NpemU7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgdmFyIGxlbiA9IHdpbmRvd3MubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgd2luZG93c1tpXS5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGMgPSB0aGlzLmNvdW50IC0gd2luZG93U2l6ZSArIDE7XG5cdCAgICAgICAgaWYgKGMgPj0gMCAmJiBjICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCkge1xuXHQgICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCsrdGhpcy5jb3VudCAlIHN0YXJ0V2luZG93RXZlcnkgPT09IDApIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgIHdpbmRvd3MucHVzaCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93XzEpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dDb3VudFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93Q291bnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB3aW5kb3dUaW1lXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3Mik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dUaW1lID0gd2luZG93VGltZV8xLndpbmRvd1RpbWU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdC8qKlxuXHQgKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSBwZXJpb2RpY2FsbHlcblx0ICogaW4gdGltZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyVGltZX0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuXHQgKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd1RpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBzdGFydHMgYSBuZXcgd2luZG93IHBlcmlvZGljYWxseSwgYXNcblx0ICogZGV0ZXJtaW5lZCBieSB0aGUgYHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWxgIGFyZ3VtZW50LiBJdCBlbWl0cyBlYWNoIHdpbmRvd1xuXHQgKiBhZnRlciBhIGZpeGVkIHRpbWVzcGFuLCBzcGVjaWZpZWQgYnkgdGhlIGB3aW5kb3dUaW1lU3BhbmAgYXJndW1lbnQuIFdoZW4gdGhlXG5cdCAqIHNvdXJjZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBvciBlbmNvdW50ZXJzIGFuIGVycm9yLCB0aGUgb3V0cHV0IE9ic2VydmFibGVcblx0ICogZW1pdHMgdGhlIGN1cnJlbnQgd2luZG93IGFuZCBwcm9wYWdhdGVzIHRoZSBub3RpZmljYXRpb24gZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIElmIGB3aW5kb3dDcmVhdGlvbkludGVydmFsYCBpcyBub3QgcHJvdmlkZWQsIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZSBzdGFydHMgYSBuZXcgd2luZG93IHdoZW4gdGhlIHByZXZpb3VzIHdpbmRvdyBvZiBkdXJhdGlvblxuXHQgKiBgd2luZG93VGltZVNwYW5gIGNvbXBsZXRlcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+SW4gZXZlcnkgd2luZG93IG9mIDEgc2Vjb25kIGVhY2gsIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDApXG5cdCAqICAgLm1hcCh3aW4gPT4gd2luLnRha2UoMikpIC8vIGVhY2ggd2luZG93IGhhcyBhdCBtb3N0IDIgZW1pc3Npb25zXG5cdCAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgNSBzZWNvbmRzIHN0YXJ0IGEgd2luZG93IDEgc2Vjb25kIGxvbmcsIGFuZCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHMgcGVyIHdpbmRvdzwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDAsIDUwMDApXG5cdCAqICAgLm1hcCh3aW4gPT4gd2luLnRha2UoMikpIC8vIGVhY2ggd2luZG93IGhhcyBhdCBtb3N0IDIgZW1pc3Npb25zXG5cdCAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgd2luZG93fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gd2luZG93VGltZVNwYW4gVGhlIGFtb3VudCBvZiB0aW1lIHRvIGZpbGwgZWFjaCB3aW5kb3cuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2luZG93Q3JlYXRpb25JbnRlcnZhbF0gVGhlIGludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IG5ld1xuXHQgKiB3aW5kb3dzLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcblx0ICogaW50ZXJ2YWxzIHRoYXQgZGV0ZXJtaW5lIHdpbmRvdyBib3VuZGFyaWVzLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBvYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cblx0ICogYXJlIE9ic2VydmFibGVzLlxuXHQgKiBAbWV0aG9kIHdpbmRvd1RpbWVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvd1RpbWUod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPT09IHZvaWQgMCkgeyB3aW5kb3dDcmVhdGlvbkludGVydmFsID0gbnVsbDsgfVxuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dUaW1lID0gd2luZG93VGltZTtcblx0dmFyIFdpbmRvd1RpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dUaW1lT3BlcmF0b3Iod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMud2luZG93VGltZVNwYW4gPSB3aW5kb3dUaW1lU3Bhbjtcblx0ICAgICAgICB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSB3aW5kb3dDcmVhdGlvbkludGVydmFsO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgV2luZG93VGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dUaW1lU3BhbiwgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpbmRvd1RpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLndpbmRvd1RpbWVTcGFuID0gd2luZG93VGltZVNwYW47XG5cdCAgICAgICAgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsID0gd2luZG93Q3JlYXRpb25JbnRlcnZhbDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLndpbmRvd3MgPSBbXTtcblx0ICAgICAgICBpZiAod2luZG93Q3JlYXRpb25JbnRlcnZhbCAhPT0gbnVsbCAmJiB3aW5kb3dDcmVhdGlvbkludGVydmFsID49IDApIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICAgICAgICAgIHZhciBjbG9zZVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCB3aW5kb3c6IHdpbmRvd18xLCBjb250ZXh0OiBudWxsIH07XG5cdCAgICAgICAgICAgIHZhciBjcmVhdGlvblN0YXRlID0geyB3aW5kb3dUaW1lU3Bhbjogd2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw6IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHN1YnNjcmliZXI6IHRoaXMsIHNjaGVkdWxlcjogc2NoZWR1bGVyIH07XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0Nsb3NlLCB3aW5kb3dUaW1lU3BhbiwgY2xvc2VTdGF0ZSkpO1xuXHQgICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgY3JlYXRpb25TdGF0ZSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18yID0gdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICAgICAgICAgIHZhciB0aW1lU3Bhbk9ubHlTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgd2luZG93OiB3aW5kb3dfMiwgd2luZG93VGltZVNwYW46IHdpbmRvd1RpbWVTcGFuIH07XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuT25seVN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgdmFyIGxlbiA9IHdpbmRvd3MubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18zID0gd2luZG93c1tpXTtcblx0ICAgICAgICAgICAgaWYgKCF3aW5kb3dfMy5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgd2luZG93XzMubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHZhciB3aW5kb3dfNCA9IHdpbmRvd3Muc2hpZnQoKTtcblx0ICAgICAgICAgICAgaWYgKCF3aW5kb3dfNC5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgd2luZG93XzQuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHdpbmRvdyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuXHQgICAgICAgIHRoaXMud2luZG93cy5wdXNoKHdpbmRvdyk7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5hZGQod2luZG93KTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHdpbmRvdyk7XG5cdCAgICAgICAgcmV0dXJuIHdpbmRvdztcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAod2luZG93KSB7XG5cdCAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgd2luZG93cy5zcGxpY2Uod2luZG93cy5pbmRleE9mKHdpbmRvdyksIDEpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dUaW1lU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seShzdGF0ZSkge1xuXHQgICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCB3aW5kb3dUaW1lU3BhbiA9IHN0YXRlLndpbmRvd1RpbWVTcGFuLCB3aW5kb3cgPSBzdGF0ZS53aW5kb3c7XG5cdCAgICBpZiAod2luZG93KSB7XG5cdCAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICB9XG5cdCAgICBzdGF0ZS53aW5kb3cgPSBzdWJzY3JpYmVyLm9wZW5XaW5kb3coKTtcblx0ICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHdpbmRvd1RpbWVTcGFuKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd0NyZWF0aW9uKHN0YXRlKSB7XG5cdCAgICB2YXIgd2luZG93VGltZVNwYW4gPSBzdGF0ZS53aW5kb3dUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlciwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHN0YXRlLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICB2YXIgd2luZG93ID0gc3Vic2NyaWJlci5vcGVuV2luZG93KCk7XG5cdCAgICB2YXIgYWN0aW9uID0gdGhpcztcblx0ICAgIHZhciBjb250ZXh0ID0geyBhY3Rpb246IGFjdGlvbiwgc3Vic2NyaXB0aW9uOiBudWxsIH07XG5cdCAgICB2YXIgdGltZVNwYW5TdGF0ZSA9IHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgd2luZG93OiB3aW5kb3csIGNvbnRleHQ6IGNvbnRleHQgfTtcblx0ICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uID0gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q2xvc2UsIHdpbmRvd1RpbWVTcGFuLCB0aW1lU3BhblN0YXRlKTtcblx0ICAgIGFjdGlvbi5hZGQoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuXHQgICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCB3aW5kb3dDcmVhdGlvbkludGVydmFsKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd0Nsb3NlKGFyZykge1xuXHQgICAgdmFyIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlciwgd2luZG93ID0gYXJnLndpbmRvdywgY29udGV4dCA9IGFyZy5jb250ZXh0O1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5hY3Rpb24gJiYgY29udGV4dC5zdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICBjb250ZXh0LmFjdGlvbi5yZW1vdmUoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuXHQgICAgfVxuXHQgICAgc3Vic2NyaWJlci5jbG9zZVdpbmRvdyh3aW5kb3cpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB3aW5kb3dUb2dnbGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTc0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpbmRvd1RvZ2dsZSA9IHdpbmRvd1RvZ2dsZV8xLndpbmRvd1RvZ2dsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHN0YXJ0aW5nIGZyb21cblx0ICogYW4gZW1pc3Npb24gZnJvbSBgb3BlbmluZ3NgIGFuZCBlbmRpbmcgd2hlbiB0aGUgb3V0cHV0IG9mIGBjbG9zaW5nU2VsZWN0b3JgXG5cdCAqIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJUb2dnbGV9LCBidXQgZW1pdHMgYSBuZXN0ZWRcblx0ICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dUb2dnbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyB3aW5kb3dzIHRoYXQgY29udGFpbiB0aG9zZSBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBiZXR3ZWVuIHRoZSB0aW1lIHdoZW4gdGhlIGBvcGVuaW5nc2Bcblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhbiBpdGVtIGFuZCB3aGVuIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG5cdCAqIGBjbG9zaW5nU2VsZWN0b3JgIGVtaXRzIGFuIGl0ZW0uXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93VG9nZ2xlKG9wZW5pbmdzLCBpID0+XG5cdCAqICAgaSAlIDIgPyBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcblx0ICogKS5tZXJnZUFsbCgpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxPPn0gb3BlbmluZ3MgQW4gb2JzZXJ2YWJsZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuXHQgKiB3aW5kb3dzLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBPKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuXHQgKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUsXG5cdCAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzIChlaXRoZXIgYG5leHRgIG9yIGBjb21wbGV0ZWApLCBzaWduYWxzIHRoYXQgdGhlXG5cdCAqIGFzc29jaWF0ZWQgd2luZG93IHNob3VsZCBjb21wbGV0ZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG5cdCAqIGFyZSBPYnNlcnZhYmxlcy5cblx0ICogQG1ldGhvZCB3aW5kb3dUb2dnbGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvd1RvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dUb2dnbGUgPSB3aW5kb3dUb2dnbGU7XG5cdHZhciBXaW5kb3dUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgV2luZG93VG9nZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd1RvZ2dsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2luZG93VG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMub3BlblN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MsIG9wZW5pbmdzKSk7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgaWYgKGNvbnRleHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHRzW2ldLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBpZiAoY29udGV4dHMpIHtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBpZiAoY29udGV4dHMpIHtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG5cdCAgICAgICAgaWYgKGNvbnRleHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKG91dGVyVmFsdWUgPT09IHRoaXMub3BlbmluZ3MpIHtcblx0ICAgICAgICAgICAgdmFyIGNsb3NpbmdTZWxlY3RvciA9IHRoaXMuY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjbG9zaW5nU2VsZWN0b3IpKGlubmVyVmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7IHdpbmRvdzogd2luZG93XzEsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2goY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllciwgY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dDtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuY2xvc2VXaW5kb3codGhpcy5jb250ZXh0cy5pbmRleE9mKG91dGVyVmFsdWUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyKSB7XG5cdCAgICAgICAgaWYgKGlubmVyICE9PSB0aGlzLm9wZW5TdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2YoaW5uZXIuY29udGV4dCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuXHQgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuXHQgICAgICAgIHZhciB3aW5kb3cgPSBjb250ZXh0LndpbmRvdywgc3Vic2NyaXB0aW9uID0gY29udGV4dC5zdWJzY3JpcHRpb247XG5cdCAgICAgICAgY29udGV4dHMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93VG9nZ2xlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgd2luZG93V2hlbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93V2hlbiA9IHdpbmRvd1doZW5fMS53aW5kb3dXaGVuO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgdXNpbmcgYVxuXHQgKiBmYWN0b3J5IGZ1bmN0aW9uIG9mIGNsb3NpbmcgT2JzZXJ2YWJsZXMgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gc3RhcnQgYSBuZXdcblx0ICogd2luZG93LlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJXaGVufSwgYnV0IGVtaXRzIGEgbmVzdGVkXG5cdCAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIGNvbm5lY3RlZCwgbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MuXG5cdCAqIEl0IGVtaXRzIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgb3BlbnMgYSBuZXcgb25lIHdoZW5ldmVyIHRoZSBPYnNlcnZhYmxlXG5cdCAqIHByb2R1Y2VkIGJ5IHRoZSBzcGVjaWZpZWQgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMgYW4gaXRlbS4gVGhlIGZpcnN0XG5cdCAqIHdpbmRvdyBpcyBvcGVuZWQgaW1tZWRpYXRlbHkgd2hlbiBzdWJzY3JpYmluZyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgb25seSB0aGUgZmlyc3QgdHdvIGNsaWNrcyBldmVudHMgaW4gZXZlcnkgd2luZG93IG9mIFsxLTVdIHJhbmRvbSBzZWNvbmRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzXG5cdCAqICAgLndpbmRvd1doZW4oKCkgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwICsgTWF0aC5yYW5kb20oKSAqIDQwMDApKVxuXHQgKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuXHQgKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd31cblx0ICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbigpOiBPYnNlcnZhYmxlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vXG5cdCAqIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2lnbmFscyAob24gZWl0aGVyIGBuZXh0YCBvclxuXHQgKiBgY29tcGxldGVgKSB3aGVuIHRvIGNsb3NlIHRoZSBwcmV2aW91cyB3aW5kb3cgYW5kIHN0YXJ0IGEgbmV3IG9uZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG5cdCAqIGFyZSBPYnNlcnZhYmxlcy5cblx0ICogQG1ldGhvZCB3aW5kb3dXaGVuXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB3aW5kb3dXaGVuKGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2luZG93T3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dXaGVuID0gd2luZG93V2hlbjtcblx0dmFyIFdpbmRvd09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd09wZXJhdG9yKGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgV2luZG93T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd09wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBXaW5kb3dTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2luZG93U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLm9wZW5XaW5kb3coKTtcblx0ICAgIH1cblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLm9wZW5XaW5kb3coaW5uZXJTdWIpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMub3BlbldpbmRvdyhpbm5lclN1Yik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIGlmIChpbm5lclN1YiA9PT0gdm9pZCAwKSB7IGlubmVyU3ViID0gbnVsbDsgfVxuXHQgICAgICAgIGlmIChpbm5lclN1Yikge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgICAgIGlubmVyU3ViLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBwcmV2V2luZG93ID0gdGhpcy53aW5kb3c7XG5cdCAgICAgICAgaWYgKHByZXZXaW5kb3cpIHtcblx0ICAgICAgICAgICAgcHJldldpbmRvdy5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgd2luZG93ID0gdGhpcy53aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQod2luZG93KTtcblx0ICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmNsb3NpbmdTZWxlY3RvcikoKTtcblx0ICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgIHZhciBlcnIgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHdpbmRvdyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgd2l0aExhdGVzdEZyb21fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTc4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb21fMS53aXRoTGF0ZXN0RnJvbTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2l0aExhdGVzdEZyb20uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogQ29tYmluZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGVcblx0ICogd2hvc2UgdmFsdWVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCwgb25seSB3aGVuIHRoZVxuXHQgKiBzb3VyY2UgZW1pdHMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcblx0ICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoYXQgdmFsdWUgcGx1cyB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIG90aGVyIGlucHV0XG5cdCAqIE9ic2VydmFibGVzLCB0aGVuIGVtaXRzIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aXRoTGF0ZXN0RnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYHdpdGhMYXRlc3RGcm9tYCBjb21iaW5lcyBlYWNoIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlICh0aGVcblx0ICogaW5zdGFuY2UpIHdpdGggdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSB0aGUgb3RoZXIgaW5wdXQgT2JzZXJ2YWJsZXMgb25seSB3aGVuXG5cdCAqIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZSwgb3B0aW9uYWxseSB1c2luZyBhIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBkZXRlcm1pbmVcblx0ICogdGhlIHZhbHVlIHRvIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBBbGwgaW5wdXQgT2JzZXJ2YWJsZXMgbXVzdFxuXHQgKiBlbWl0IGF0IGxlYXN0IG9uZSB2YWx1ZSBiZWZvcmUgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHdpbGwgZW1pdCBhIHZhbHVlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljayBldmVudCwgZW1pdCBhbiBhcnJheSB3aXRoIHRoZSBsYXRlc3QgdGltZXIgZXZlbnQgcGx1cyB0aGUgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2l0aExhdGVzdEZyb20odGltZXIpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9qZWN0XSBQcm9qZWN0aW9uIGZ1bmN0aW9uIGZvciBjb21iaW5pbmcgdmFsdWVzXG5cdCAqIHRvZ2V0aGVyLiBSZWNlaXZlcyBhbGwgdmFsdWVzIGluIG9yZGVyIG9mIHRoZSBPYnNlcnZhYmxlcyBwYXNzZWQsIHdoZXJlIHRoZVxuXHQgKiBmaXJzdCBwYXJhbWV0ZXIgaXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gKGUuZy5cblx0ICogYGEud2l0aExhdGVzdEZyb20oYiwgYywgKGExLCBiMSwgYzEpID0+IGExICsgYjEgKyBjMSlgKS4gSWYgdGhpcyBpcyBub3Rcblx0ICogcGFzc2VkLCBhcnJheXMgd2lsbCBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB3aXRoTGF0ZXN0RnJvbVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gd2l0aExhdGVzdEZyb20oKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb2plY3Q7XG5cdCAgICBpZiAodHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb2plY3QgPSBhcmdzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgdmFyIG9ic2VydmFibGVzID0gYXJncztcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb207XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdHZhciBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpIHtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgIH1cblx0ICAgIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlcywgdGhpcy5wcm9qZWN0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvYnNlcnZhYmxlcywgcHJvamVjdCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuXHQgICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRoaXMudG9SZXNwb25kLnB1c2goaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuXHQgICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcblx0ICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7XG5cdCAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgICAgIHRvUmVzcG9uZC5zcGxpY2UoZm91bmQsIDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gbm9vcFxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy50b1Jlc3BvbmQubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBhcmdzID0gW3ZhbHVlXS5jb25jYXQodGhpcy52YWx1ZXMpO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl90cnlQcm9qZWN0KGFyZ3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aXRoTGF0ZXN0RnJvbS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHppcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwID0gemlwXzEuemlwUHJvdG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHppcEFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwQWxsID0gemlwQWxsXzEuemlwQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD16aXBBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgemlwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwNCk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gcHJvamVjdFxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB6aXBBbGxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHppcEFsbChwcm9qZWN0KSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyB6aXBfMS5aaXBPcGVyYXRvcihwcm9qZWN0KSk7XG5cdH1cblx0ZXhwb3J0cy56aXBBbGwgPSB6aXBBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcEFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk9wZXJhdG9yID0gT3BlcmF0b3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBhcHBfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODQpO1xyXG5cdHZhciByZWZlcmVuY2Vfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODUpO1xyXG5cdHZhciBzdGFmZl9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4Nik7XHJcblx0dmFyIG5hdl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODcpO1xyXG5cdHZhciBwcm9qZWN0c18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODkpO1xyXG5cdHZhciBwcm9qZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5NCk7XHJcblx0dmFyIHRhc2tzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5Nyk7XHJcblx0dmFyIHRhc2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNjAyKTtcclxuXHR2YXIgdXNlcl9wcm9maWxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNCk7XHJcblx0dmFyIGxvZ2luXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNik7XHJcblx0dmFyIHVzZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcclxuXHR2YXIgQXBwID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQXBwKF9yb3V0ZXIsIF9hcHBTZXJ2aWNlLCBfcmVmZXJlbmNlU2VydmljZSwgX3N0YWZmU2VydmljZSkge1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcclxuXHQgICAgICAgIHRoaXMuX2FwcFNlcnZpY2UgPSBfYXBwU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuX3JlZmVyZW5jZVNlcnZpY2UgPSBfcmVmZXJlbmNlU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuX3N0YWZmU2VydmljZSA9IF9zdGFmZlNlcnZpY2U7XHJcblx0ICAgICAgICB0aGlzLkhFQURFUl9USVRMRSA9IFwiUHJvamVjdHNcIjtcclxuXHQgICAgfVxyXG5cdCAgICBBcHAucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aW5kb3cpIHsgdGhpcy5vblJlc2l6ZSh3aW5kb3cpOyB9O1xyXG5cdCAgICA7XHJcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcHAucHJvdG90eXBlLCBcImRldmljZVwiLCB7XHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNNb2JpbGVEZXZpY2U7IH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICA7XHJcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcHAucHJvdG90eXBlLCBcInRvZ2dsZU5hdlZpc2libGVcIiwge1xyXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmlzTmF2Q29sbGFwc2VkOyB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgO1xyXG5cdCAgICBBcHAucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMuaXNOYXZDb2xsYXBzZWQgPSBmYWxzZTtcclxuXHQgICAgICAgIHRoaXMubG9nZ2VkVXNlciA9IG5ldyB1c2VyXzEuVXNlcigpO1xyXG5cdCAgICAgICAgdGhpcy5pc01vYmlsZURldmljZSA9IHRoaXMuaXNNb2JpbGUoKTtcclxuXHQgICAgICAgIHRoaXMuX2FwcFNlcnZpY2UuZ2V0VHJhbnNsYXRpb25zKClcclxuXHQgICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChjYXB0aW9ucykgeyByZXR1cm4gY29uc29sZS5sb2coY2FwdGlvbnMpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBfdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnTG9naW4nXSk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLnRvZ2dsZU5hdiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuaXNOYXZDb2xsYXBzZWQgPSAhdGhpcy5pc05hdkNvbGxhcHNlZDtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwLnByb3RvdHlwZS5oaWRlTmF2ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5pc05hdkNvbGxhcHNlZCA9IGZhbHNlO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHQgICAgICAgIHRoaXMubG9nZ2VkVXNlciA9IG51bGw7XHJcblx0ICAgIH07XHJcblx0ICAgIEFwcC5wcm90b3R5cGUuZ29CYWNrID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLmlzTW9iaWxlID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICh3aW5kb3cpIHtcclxuXHQgICAgICAgIHRoaXMuaXNNb2JpbGVEZXZpY2UgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0IHx8IHRoaXMuaXNNb2JpbGUoKTtcclxuXHQgICAgfTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQudGFyZ2V0J10pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgRnVuY3Rpb24pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW09iamVjdF0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpyZXR1cm50eXBlJywgdm9pZCAwKVxyXG5cdCAgICBdLCBBcHAucHJvdG90eXBlLCBcInJlc2l6ZVwiLCBudWxsKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSG9zdEJpbmRpbmcoJ2NsYXNzLnBob25lJyksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIEFwcC5wcm90b3R5cGUsIFwiZGV2aWNlXCIsIG51bGwpO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Ib3N0QmluZGluZygnY2xhc3Muc2lkZS1uYXYtdG9nZ2xlJyksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnR5cGUnLCBPYmplY3QpXHJcblx0ICAgIF0sIEFwcC5wcm90b3R5cGUsIFwidG9nZ2xlTmF2VmlzaWJsZVwiLCBudWxsKTtcclxuXHQgICAgQXBwID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuXHQgICAgICAgICAgICBzZWxlY3RvcjogJ3Byb2plY3QtYXBwJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXyg2MDgpLFxyXG5cdCAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtcclxuXHQgICAgICAgICAgICAgICAgcm91dGVyXzEuUk9VVEVSX0RJUkVDVElWRVMsXHJcblx0ICAgICAgICAgICAgICAgIG5hdl8xLk5hdkNvbXBvbmVudFxyXG5cdCAgICAgICAgICAgIF1cclxuXHQgICAgICAgIH0pLFxyXG5cdCAgICAgICAgcm91dGVyXzEuUm91dGVzKFtcclxuXHQgICAgICAgICAgICB7IHBhdGg6ICcvcHJvamVjdHMnLCBjb21wb25lbnQ6IHByb2plY3RzXzEuUHJvamVjdHNDb21wb25lbnQgfSxcclxuXHQgICAgICAgICAgICB7IHBhdGg6ICcvcHJvamVjdC86aWQnLCBjb21wb25lbnQ6IHByb2plY3RfMS5Qcm9qZWN0Q29tcG9uZW50IH0sXHJcblx0ICAgICAgICAgICAgeyBwYXRoOiAnL3Rhc2tzJywgY29tcG9uZW50OiB0YXNrc18xLlRhc2tzQ29tcG9uZW50IH0sXHJcblx0ICAgICAgICAgICAgeyBwYXRoOiAnL3Rhc2tzLzppZCcsIGNvbXBvbmVudDogdGFza3NfMS5UYXNrc0NvbXBvbmVudCB9LFxyXG5cdCAgICAgICAgICAgIHsgcGF0aDogJy90YXNrLzppZCcsIGNvbXBvbmVudDogdGFza18xLlRhc2tDb21wb25lbnQgfSxcclxuXHQgICAgICAgICAgICB7IHBhdGg6ICcvdXNlci1wcm9maWxlJywgY29tcG9uZW50OiB1c2VyX3Byb2ZpbGVfMS5Vc2VyUHJvZmlsZUNvbXBvbmVudCB9LFxyXG5cdCAgICAgICAgICAgIHsgcGF0aDogJy9sb2dpbicsIGNvbXBvbmVudDogbG9naW5fMS5Mb2dpbkNvbXBvbmVudCB9XHJcblx0ICAgICAgICBdKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIGFwcF9zZXJ2aWNlXzEuQXBwU2VydmljZSwgcmVmZXJlbmNlX3NlcnZpY2VfMS5SZWZlcmVuY2VTZXJ2aWNlLCBzdGFmZl9zZXJ2aWNlXzEuU3RhZmZTZXJ2aWNlXSlcclxuXHQgICAgXSwgQXBwKTtcclxuXHQgICAgcmV0dXJuIEFwcDtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuQXBwID0gQXBwO1xyXG5cblxuLyoqKi8gfSxcbi8qIDU4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBodHRwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4MSk7XHJcblx0dmFyIEhFQURFUiA9IHsgaGVhZGVyczogbmV3IGh0dHBfMS5IZWFkZXJzKHsgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSB9O1xyXG5cdHZhciBBcHBTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQXBwU2VydmljZShodHRwKSB7XHJcblx0ICAgICAgICB0aGlzLmh0dHAgPSBodHRwO1xyXG5cdCAgICAgICAgLy8gaHR0cC5nZXQoJy9zZXNzaW9uJywgSEVBREVSKS5zdWJzY3JpYmUocmVzcG9uc2UgPT4gY29uc29sZS5sb2cocmVzcG9uc2UpKTtcclxuXHQgICAgfVxyXG5cdCAgICBBcHBTZXJ2aWNlLnByb3RvdHlwZS5nZXRUcmFuc2xhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgdXJsID0gJ3A/aWQ9Y29tbW9uLWNhcHRpb25zJztcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5qc29uKCkuY2FwdGlvbnM7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHBTZXJ2aWNlLnByb3RvdHlwZS5nZXROYXYgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgdXJsID0gJ3A/aWQ9b3V0bGluZSc7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIEhFQURFUik7XHJcblx0ICAgIH07XHJcblx0ICAgIEFwcFNlcnZpY2UucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKCcnKTtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwU2VydmljZSA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkluamVjdGFibGUoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtodHRwXzEuSHR0cF0pXHJcblx0ICAgIF0sIEFwcFNlcnZpY2UpO1xyXG5cdCAgICByZXR1cm4gQXBwU2VydmljZTtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuQXBwU2VydmljZSA9IEFwcFNlcnZpY2U7XHJcblxuXG4vKioqLyB9LFxuLyogNTg1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIGh0dHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgxKTtcclxuXHR2YXIgSEVBREVSID0geyBoZWFkZXJzOiBuZXcgaHR0cF8xLkhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblx0dmFyIFJlZmVyZW5jZVNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBSZWZlcmVuY2VTZXJ2aWNlKGh0dHApIHtcclxuXHQgICAgICAgIHRoaXMuaHR0cCA9IGh0dHA7XHJcblx0ICAgICAgICB0aGlzLmdldFRhZ3MoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlc3ApIHsgcmV0dXJuIGNvbnNvbGUubG9nKHJlc3ApOyB9KTtcclxuXHQgICAgICAgIHRoaXMuZ2V0VGFza1R5cGVzKCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXNwKSB7IHJldHVybiBjb25zb2xlLmxvZyhyZXNwKTsgfSk7XHJcblx0ICAgIH1cclxuXHQgICAgUmVmZXJlbmNlU2VydmljZS5wcm90b3R5cGUuZ2V0VGFncyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciB1cmwgPSAnL1JlZmVyZW5jZS9wP2lkPXRhZ3MnO1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsLCBIRUFERVIpXHJcblx0ICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3Q7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBSZWZlcmVuY2VTZXJ2aWNlLnByb3RvdHlwZS5nZXRUYXNrVHlwZXMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgdXJsID0gJy9SZWZlcmVuY2UvcD9pZD10YXNrdHlwZXMnO1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsLCBIRUFERVIpXHJcblx0ICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3Q7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBSZWZlcmVuY2VTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2h0dHBfMS5IdHRwXSlcclxuXHQgICAgXSwgUmVmZXJlbmNlU2VydmljZSk7XHJcblx0ICAgIHJldHVybiBSZWZlcmVuY2VTZXJ2aWNlO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5SZWZlcmVuY2VTZXJ2aWNlID0gUmVmZXJlbmNlU2VydmljZTtcclxuXG5cbi8qKiovIH0sXG4vKiA1ODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgaHR0cF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyODEpO1xyXG5cdHZhciBIRUFERVIgPSB7IGhlYWRlcnM6IG5ldyBodHRwXzEuSGVhZGVycyh7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSkgfTtcclxuXHR2YXIgU3RhZmZTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gU3RhZmZTZXJ2aWNlKGh0dHApIHtcclxuXHQgICAgICAgIHRoaXMuaHR0cCA9IGh0dHA7XHJcblx0ICAgICAgICB0aGlzLmdldE9yZ2FuaXphdGlvbnMoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlc3ApIHsgcmV0dXJuIGNvbnNvbGUubG9nKHJlc3ApOyB9KTtcclxuXHQgICAgICAgIHRoaXMuZ2V0RW1wbG95ZWVzKCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXNwKSB7IHJldHVybiBjb25zb2xlLmxvZyhyZXNwKTsgfSk7XHJcblx0ICAgIH1cclxuXHQgICAgU3RhZmZTZXJ2aWNlLnByb3RvdHlwZS5nZXRPcmdhbml6YXRpb25zID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIHVybCA9ICcvU3RhZmYvcD9pZD1nZXQtb3JnYW5pemF0aW9ucyc7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIEhFQURFUilcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2UuanNvbigpLm9iamVjdHNbMF0ubGlzdDsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFN0YWZmU2VydmljZS5wcm90b3R5cGUuZ2V0RW1wbG95ZWVzID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIHVybCA9ICdwP2lkPXVzZXJzJztcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0OyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgU3RhZmZTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2h0dHBfMS5IdHRwXSlcclxuXHQgICAgXSwgU3RhZmZTZXJ2aWNlKTtcclxuXHQgICAgcmV0dXJuIFN0YWZmU2VydmljZTtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuU3RhZmZTZXJ2aWNlID0gU3RhZmZTZXJ2aWNlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDU4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciByb3V0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzAyKTtcclxuXHR2YXIgYXBwX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg0KTtcclxuXHR2YXIgTmF2Q29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gTmF2Q29tcG9uZW50KF9hcHBTZXJ2aWNlLCBfcm91dGVyKSB7XHJcblx0ICAgICAgICB0aGlzLl9hcHBTZXJ2aWNlID0gX2FwcFNlcnZpY2U7XHJcblx0ICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xyXG5cdCAgICB9XHJcblx0ICAgIE5hdkNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmF2XScsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oNTg4KSxcclxuXHQgICAgICAgICAgICBkaXJlY3RpdmVzOiBbcm91dGVyXzEuUk9VVEVSX0RJUkVDVElWRVNdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFthcHBfc2VydmljZV8xLkFwcFNlcnZpY2UsIHJvdXRlcl8xLlJvdXRlcl0pXHJcblx0ICAgIF0sIE5hdkNvbXBvbmVudCk7XHJcblx0ICAgIHJldHVybiBOYXZDb21wb25lbnQ7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLk5hdkNvbXBvbmVudCA9IE5hdkNvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA1ODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8dWw+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnaW5ib3gnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtaW5ib3hcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydpbmJveCd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpPlxcclxcbiAgICAgICAgPGEgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrcycsICd0b2RheSddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jYWxlbmRhci1vXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3sndG9kYXknfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnd2VlayddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jYWxlbmRhclxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J3dlZWsnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtZGF0YWJhc2VcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydhbGwnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnY29tcGxldGVkJ11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZWNrLXNxdWFyZS1vXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3snY29tcGxldGVkJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ215J11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXRpY2tldFxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J215X3Rhc2tzJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGkgY2xhc3M9XFxcImRpdmlkZXJcXFwiPjwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvcHJvamVjdHMnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtcHV6emxlLXBpZWNlXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3sncHJvamVjdHMnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuPC91bD5cXHJcXG5cIlxuXG4vKioqLyB9LFxuLyogNTg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBwcm9qZWN0X3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkwKTtcclxuXHR2YXIgcHJvamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTQpO1xyXG5cdHZhciBQcm9qZWN0c0NvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFByb2plY3RzQ29tcG9uZW50KF9yb3V0ZXIsIHByb2plY3RTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcclxuXHQgICAgICAgIHRoaXMucHJvamVjdFNlcnZpY2UgPSBwcm9qZWN0U2VydmljZTtcclxuXHQgICAgICAgIHByb2plY3RTZXJ2aWNlLmdldFByb2plY3RzKClcclxuXHQgICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChwcm9qZWN0cykgeyByZXR1cm4gX3RoaXMucHJvamVjdHMgPSBwcm9qZWN0czsgfSk7XHJcblx0ICAgIH1cclxuXHQgICAgUHJvamVjdHNDb21wb25lbnQucHJvdG90eXBlLmNvbXBvc2VSZWNvcmQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvcHJvamVjdCcsICduZXcnXSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RzQ29tcG9uZW50LnByb3RvdHlwZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24gKHByb2plY3QpIHtcclxuXHQgICAgICAgIHRoaXMucHJvamVjdFNlcnZpY2UuZGVsZXRlUHJvamVjdChwcm9qZWN0KVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZTsgfSlcclxuXHQgICAgICAgICAgICAuc3Vic2NyaWJlKCk7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RzQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuXHQgICAgICAgICAgICBzZWxlY3RvcjogJ1twcm9qZWN0c10nLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5NilcclxuXHQgICAgICAgIH0pLFxyXG5cdCAgICAgICAgcm91dGVyXzEuUm91dGVzKFtcclxuXHQgICAgICAgICAgICB7IHBhdGg6ICcvOmlkJywgY29tcG9uZW50OiBwcm9qZWN0XzEuUHJvamVjdENvbXBvbmVudCB9XHJcblx0ICAgICAgICBdKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIHByb2plY3Rfc2VydmljZV8xLlByb2plY3RTZXJ2aWNlXSlcclxuXHQgICAgXSwgUHJvamVjdHNDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gUHJvamVjdHNDb21wb25lbnQ7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlByb2plY3RzQ29tcG9uZW50ID0gUHJvamVjdHNDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogNTkwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIGh0dHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgxKTtcclxuXHR2YXIgcHJvamVjdF9mYWN0b3J5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5MSk7XHJcblx0dmFyIFZJRVdfVVJMID0gJ3A/aWQ9cHJvamVjdC12aWV3JztcclxuXHR2YXIgRk9STV9VUkwgPSAncD9pZD1wcm9qZWN0LWZvcm0nO1xyXG5cdHZhciBIRUFERVIgPSB7IGhlYWRlcnM6IG5ldyBodHRwXzEuSGVhZGVycyh7XHJcblx0ICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCcsXHJcblx0ICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcblx0ICAgIH0pIH07XHJcblx0dmFyIFByb2plY3RTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gUHJvamVjdFNlcnZpY2UoaHR0cCkge1xyXG5cdCAgICAgICAgdGhpcy5odHRwID0gaHR0cDtcclxuXHQgICAgfVxyXG5cdCAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdHMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChWSUVXX1VSTCwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3ApIHsgcmV0dXJuIHByb2plY3RfZmFjdG9yeV8xLlByb2plY3RGYWN0b3J5LmNyZWF0ZVByb2plY3RMaXN0KHJlc3AuanNvbigpLm9iamVjdHNbMF0ubGlzdCk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdEJ5SWQgPSBmdW5jdGlvbiAocHJvamVjdElkKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChGT1JNX1VSTCArICcmZG9jaWQ9JyArIHByb2plY3RJZCwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3ApIHsgcmV0dXJuIHByb2plY3RfZmFjdG9yeV8xLlByb2plY3RGYWN0b3J5LmNyZWF0ZVByb2plY3QocmVzcC5qc29uKCkub2JqZWN0c1sxXSk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuc2F2ZVByb2plY3QgPSBmdW5jdGlvbiAocHJvamVjdCkge1xyXG5cdCAgICAgICAgdmFyIHVybCA9IEZPUk1fVVJMICsgKHByb2plY3QuaWQgPyAnJmRvY2lkPScgKyBwcm9qZWN0LmlkIDogJycpO1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgcHJvamVjdC5zZXJpYWxpemUoKSwgSEVBREVSKTtcclxuXHQgICAgfTtcclxuXHQgICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLmRlbGV0ZVByb2plY3QgPSBmdW5jdGlvbiAocHJvamVjdCkge1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUoVklFV19VUkwpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQcm9qZWN0U2VydmljZSA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkluamVjdGFibGUoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtodHRwXzEuSHR0cF0pXHJcblx0ICAgIF0sIFByb2plY3RTZXJ2aWNlKTtcclxuXHQgICAgcmV0dXJuIFByb2plY3RTZXJ2aWNlO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Qcm9qZWN0U2VydmljZSA9IFByb2plY3RTZXJ2aWNlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDU5MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIHByb2plY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkyKTtcclxuXHRmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KGpzb24pIHtcclxuXHQgICAgdmFyIHJlc3VsdCA9IG5ldyBwcm9qZWN0XzEuUHJvamVjdCgpO1xyXG5cdCAgICAvLyBjb25zb2xlLmxvZygnZmFjdG9yeTpjcmVhdGVQcm9qZWN0JywganNvbik7XHJcblx0ICAgIHJlc3VsdC5pZCA9IGpzb24uaWQ7XHJcblx0ICAgIHJlc3VsdC5hdXRob3IgPSBqc29uLmF1dGhvcjtcclxuXHQgICAgcmVzdWx0LnJlZ0RhdGUgPSBqc29uLnJlZ0RhdGU7XHJcblx0ICAgIHJlc3VsdC5uYW1lID0ganNvbi5uYW1lO1xyXG5cdCAgICByZXN1bHQuc3RhdHVzID0ganNvbi5zdGF0dXM7XHJcblx0ICAgIHJlc3VsdC5jdXN0b21lciA9IG51bGw7IC8vanNvbi5jdXN0b21lcjtcclxuXHQgICAgcmVzdWx0Lm1hbmFnZXIgPSBudWxsOyAvL2pzb24ubWFuYWdlcjtcclxuXHQgICAgcmVzdWx0LnByb2dyYW1tZXIgPSBudWxsOyAvL2pzb24ucHJvZ3JhbW1lcjtcclxuXHQgICAgcmVzdWx0LnRlc3RlciA9IG51bGw7IC8vanNvbi50ZXN0ZXI7XHJcblx0ICAgIHJlc3VsdC5vYnNlcnZlcnMgPSBudWxsOyAvL2pzb24ub2JzZXJ2ZXJzO1xyXG5cdCAgICByZXN1bHQuY29tbWVudCA9IGpzb24uY29tbWVudDtcclxuXHQgICAgcmVzdWx0LmZpbmlzaERhdGUgPSBqc29uLmZpbmlzaERhdGU7XHJcblx0ICAgIHJlc3VsdC5hdHRhY2htZW50cyA9IG51bGw7IC8vanNvbi5hdHRhY2htZW50cztcclxuXHQgICAgcmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblx0ZnVuY3Rpb24gY3JlYXRlUHJvamVjdExpc3QoanNvbikge1xyXG5cdCAgICB2YXIgcmVzdWx0ID0gW107XHJcblx0ICAgIGpzb24uZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdCkgeyByZXR1cm4gcmVzdWx0LnB1c2goY3JlYXRlUHJvamVjdChwcm9qZWN0KSk7IH0pO1xyXG5cdCAgICByZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHRleHBvcnRzLlByb2plY3RGYWN0b3J5ID0ge1xyXG5cdCAgICBjcmVhdGVQcm9qZWN0OiBjcmVhdGVQcm9qZWN0LFxyXG5cdCAgICBjcmVhdGVQcm9qZWN0TGlzdDogY3JlYXRlUHJvamVjdExpc3RcclxuXHR9O1xyXG5cblxuLyoqKi8gfSxcbi8qIDU5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIG9ial91dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTMpO1xyXG5cdGV4cG9ydHMuUHJvamVjdFN0YXR1c1R5cGUgPSB7XHJcblx0ICAgIFVOS05PV046IDAsXHJcblx0ICAgIERSQUZUOiA4OTksXHJcblx0ICAgIFBST0NFU1NFRDogOTAwLFxyXG5cdCAgICBGSU5JU0hFRDogOTAxXHJcblx0fTtcclxuXHR2YXIgUHJvamVjdCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFByb2plY3QoKSB7XHJcblx0ICAgICAgICB0aGlzLmZpbmlzaERhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cdCAgICB9XHJcblx0ICAgIFByb2plY3QucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiBvYmpfdXRpbHNfMS5zZXJpYWxpemVPYmooe1xyXG5cdCAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuXHQgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG5cdCAgICAgICAgICAgIGN1c3RvbWVyOiAodGhpcy5jdXN0b21lciA/IHRoaXMuY3VzdG9tZXIuaWQgOiAnJykgfHwgJycsXHJcblx0ICAgICAgICAgICAgbWFuYWdlcjogdGhpcy5tYW5hZ2VyIHx8IDAsXHJcblx0ICAgICAgICAgICAgcHJvZ3JhbW1lcjogdGhpcy5wcm9ncmFtbWVyIHx8IDAsXHJcblx0ICAgICAgICAgICAgdGVzdGVyOiB0aGlzLnRlc3RlciB8fCAwLFxyXG5cdCAgICAgICAgICAgIG9ic2VydmVyczogdGhpcy5vYnNlcnZlcnMgPyB0aGlzLm9ic2VydmVycyA6ICcnLFxyXG5cdCAgICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuXHQgICAgICAgICAgICBmaW5pc2hEYXRlOiB0aGlzLmZpbmlzaERhdGUgPyB0aGlzLmZpbmlzaERhdGUudG9TdHJpbmcoKSA6ICcnLFxyXG5cdCAgICAgICAgICAgIGF0dGFjaG1lbnRzOiAnJyAvL3RoaXMuYXR0YWNobWVudHMuam9pbignJylcclxuXHQgICAgICAgIH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gUHJvamVjdDtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuUHJvamVjdCA9IFByb2plY3Q7XHJcblxuXG4vKioqLyB9LFxuLyogNTkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRmdW5jdGlvbiBzZXJpYWxpemVPYmoob2JqKSB7XHJcblx0ICAgIHZhciByZXN1bHQgPSBbXTtcclxuXHQgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqKSB7XHJcblx0ICAgICAgICByZXN1bHQucHVzaChlbmNvZGVVUklDb21wb25lbnQocHJvcGVydHkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwcm9wZXJ0eV0pKTtcclxuXHQgICAgfVxyXG5cdCAgICByZXR1cm4gcmVzdWx0LmpvaW4oJyYnKTtcclxuXHR9XHJcblx0ZXhwb3J0cy5zZXJpYWxpemVPYmogPSBzZXJpYWxpemVPYmo7XHJcblxuXG4vKioqLyB9LFxuLyogNTk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBjb21tb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTtcclxuXHR2YXIgcHJvamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTIpO1xyXG5cdHZhciBwcm9qZWN0X3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkwKTtcclxuXHR2YXIgc3RhZmZfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODYpO1xyXG5cdHZhciBQcm9qZWN0Q29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gUHJvamVjdENvbXBvbmVudChfcHJvamVjdFNlcnZpY2UsIF9zdGFmZlNlcnZpY2UsIF9yb3V0ZXIsIF9wYXJhbXMsIF9mb3JtQnVpbGRlcikge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMuX3Byb2plY3RTZXJ2aWNlID0gX3Byb2plY3RTZXJ2aWNlO1xyXG5cdCAgICAgICAgdGhpcy5fc3RhZmZTZXJ2aWNlID0gX3N0YWZmU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XHJcblx0ICAgICAgICB0aGlzLl9wYXJhbXMgPSBfcGFyYW1zO1xyXG5cdCAgICAgICAgdGhpcy5fZm9ybUJ1aWxkZXIgPSBfZm9ybUJ1aWxkZXI7XHJcblx0ICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gbmV3IHByb2plY3RfMS5Qcm9qZWN0KCk7XHJcblx0ICAgICAgICB0aGlzLm5hbWUgPSBuZXcgY29tbW9uXzEuQ29udHJvbCgnJyk7XHJcblx0ICAgICAgICB0aGlzLnN0YXR1cyA9IG5ldyBjb21tb25fMS5Db250cm9sKCcnKTtcclxuXHQgICAgICAgIHRoaXMuY3VzdG9tZXIgPSBuZXcgY29tbW9uXzEuQ29udHJvbCgnJyk7XHJcblx0ICAgICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgY29tbW9uXzEuQ29udHJvbCgnJyk7XHJcblx0ICAgICAgICB0aGlzLnByb2dyYW1tZXIgPSBuZXcgY29tbW9uXzEuQ29udHJvbCgnJyk7XHJcblx0ICAgICAgICB0aGlzLnRlc3RlciA9IG5ldyBjb21tb25fMS5Db250cm9sKCcnKTtcclxuXHQgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IGNvbW1vbl8xLkNvbnRyb2woJycpO1xyXG5cdCAgICAgICAgdGhpcy5jb21tZW50ID0gbmV3IGNvbW1vbl8xLkNvbnRyb2woJycpO1xyXG5cdCAgICAgICAgdGhpcy5maW5pc2hEYXRlID0gbmV3IGNvbW1vbl8xLkNvbnRyb2woJycpO1xyXG5cdCAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IG5ldyBjb21tb25fMS5Db250cm9sKCcnKTtcclxuXHQgICAgICAgIHRoaXMucHJvamVjdEZvcm0gPSBfZm9ybUJ1aWxkZXIuZ3JvdXAoe1xyXG5cdCAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuXHQgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG5cdCAgICAgICAgICAgIGN1c3RvbWVyOiB0aGlzLmN1c3RvbWVyLFxyXG5cdCAgICAgICAgICAgIG1hbmFnZXI6IHRoaXMubWFuYWdlcixcclxuXHQgICAgICAgICAgICBwcm9ncmFtbWVyOiB0aGlzLnByb2dyYW1tZXIsXHJcblx0ICAgICAgICAgICAgdGVzdGVyOiB0aGlzLnRlc3RlcixcclxuXHQgICAgICAgICAgICBvYnNlcnZlcnM6IHRoaXMub2JzZXJ2ZXJzLFxyXG5cdCAgICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuXHQgICAgICAgICAgICBmaW5pc2hEYXRlOiB0aGlzLmZpbmlzaERhdGUsXHJcblx0ICAgICAgICAgICAgYXR0YWNobWVudHM6IHRoaXMuYXR0YWNobWVudHNcclxuXHQgICAgICAgIH0pO1xyXG5cdCAgICAgICAgaWYgKHRoaXMuX3BhcmFtcy5nZXRQYXJhbSgnaWQnKSAhPT0gJ25ldycpIHtcclxuXHQgICAgICAgICAgICB0aGlzLl9wcm9qZWN0U2VydmljZS5nZXRQcm9qZWN0QnlJZCh0aGlzLl9wYXJhbXMuZ2V0UGFyYW0oJ2lkJykpLnN1YnNjcmliZShmdW5jdGlvbiAocHJvamVjdCkge1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuXHQgICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xyXG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuXHQgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgICAgICB0aGlzLnByb2plY3QuaWQgPSB0aGlzLl9wYXJhbXMuZ2V0UGFyYW0oJ2lkJyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIF9zdGFmZlNlcnZpY2UuZ2V0RW1wbG95ZWVzKCkuc3Vic2NyaWJlKGZ1bmN0aW9uICh1c2VycykgeyByZXR1cm4gX3RoaXMudXNlcnMgPSB1c2VyczsgfSk7XHJcblx0ICAgIH1cclxuXHQgICAgUHJvamVjdENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RDb21wb25lbnQucHJvdG90eXBlLnNhdmVQcm9qZWN0ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMuX3Byb2plY3RTZXJ2aWNlLnNhdmVQcm9qZWN0KHRoaXMucHJvamVjdCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gX3RoaXMuY2xvc2UoKTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RDb21wb25lbnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL3Byb2plY3RzJ10pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQcm9qZWN0Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuXHQgICAgICAgICAgICBzZWxlY3RvcjogJ1twcm9qZWN0XScsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oNTk1KVxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbcHJvamVjdF9zZXJ2aWNlXzEuUHJvamVjdFNlcnZpY2UsIHN0YWZmX3NlcnZpY2VfMS5TdGFmZlNlcnZpY2UsIHJvdXRlcl8xLlJvdXRlciwgcm91dGVyXzEuUm91dGVTZWdtZW50LCBjb21tb25fMS5Gb3JtQnVpbGRlcl0pXHJcblx0ICAgIF0sIFByb2plY3RDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gUHJvamVjdENvbXBvbmVudDtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuUHJvamVjdENvbXBvbmVudCA9IFByb2plY3RDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogNTk1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiAqbmdJZj1cXFwibG9hZGluZ1xcXCI+XFxyXFxuICAgIHt7J2xvYWRpbmcnfX1cXHJcXG48L2Rpdj5cXHJcXG48Zm9ybSBbbmdGb3JtTW9kZWxdPVxcXCJwcm9qZWN0Rm9ybVxcXCIgW2hpZGRlbl09XFxcImxvYWRpbmdcXFwiPlxcclxcbiAgICA8aGVhZGVyIGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4tYmFja1xcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2hldnJvbi1sZWZ0XFxcIj48L2k+XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgICAgICB7eydwcm9qZWN0J319XFxyXFxuICAgICAgICA8L2gxPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1hY3Rpb25zXFxcIj5cXHJcXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLXByaW1hcnlcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgW2Rpc2FibGVkXT1cXFwiIXByb2plY3RGb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJzYXZlUHJvamVjdCgpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyduYW1lJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5uYW1lXFxcIiBuZ0NvbnRyb2w9XFxcIm5hbWVcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2N1c3RvbWVyJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuNlxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QuY3VzdG9tZXJcXFwiIG5nQ29udHJvbD1cXFwiY3VzdG9tZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgYyBvZiBjdXN0b21lcnNcXFwiIFt2YWx1ZV09XFxcImNcXFwiPnt7Y319PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snbWFuYWdlcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjZcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0Lm1hbmFnZXJcXFwiIG5nQ29udHJvbD1cXFwibWFuYWdlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBtIG9mIHVzZXJzXFxcIiBbdmFsdWVdPVxcXCJtLmlkXFxcIj57e20ubG9naW59fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3Byb2dyYW1tZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5wcm9ncmFtbWVyXFxcIiBuZ0NvbnRyb2w9XFxcInByb2dyYW1tZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgcCBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwicC5pZFxcXCI+e3twLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0ZXN0ZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC50ZXN0ZXJcXFwiIG5nQ29udHJvbD1cXFwidGVzdGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IHQgb2YgdXNlcnNcXFwiIFt2YWx1ZV09XFxcInQuaWRcXFwiPnt7dC5sb2dpbn19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snb2JzZXJ2ZXJzJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuNlxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3Qub2JzZXJ2ZXJzXFxcIiBuZ0NvbnRyb2w9XFxcIm9ic2VydmVyc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBvYnMgb2YgdXNlcnNcXFwiIFt2YWx1ZV09XFxcIm9icy5pZFxcXCI+e3tvYnMubG9naW59fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3N0YXR1cyd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjZcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LnN0YXR1c1xcXCIgbmdDb250cm9sPVxcXCJzdGF0dXNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgc3Qgb2Ygc3RhdHVzZXNcXFwiIFt2YWx1ZV09XFxcInN0XFxcIj57e3N0fX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydmaW5pc2hEYXRlJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgY2xhc3M9XFxcInNwYW4yXFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5maW5pc2hEYXRlXFxcIiBuZ0NvbnRyb2w9XFxcImZpbmlzaERhdGVcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2NvbW1lbnQnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cXFwic3BhbjZcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LmNvbW1lbnRcXFwiIG5nQ29udHJvbD1cXFwiY29tbWVudFxcXCI+PC90ZXh0YXJlYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzXFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9mb3JtPlxcclxcblwiXG5cbi8qKiovIH0sXG4vKiA1OTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgIHt7J3Byb2plY3RzJ319XFxyXFxuICAgIDwvaDE+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY29tcG9zZVJlY29yZCgpXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyduZXdfcHJvamVjdCd9fVxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInZpZXdcXFwiPlxcclxcbiAgICAgICAgPGhlYWRlciBjbGFzcz1cXFwiZW50cmllcy1oZWFkXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkLXdyYXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImVudHJ5LXNlbGVjdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGRhdGEtdG9nZ2xlPVxcXCJkb2NpZFxcXCIgY2xhc3M9XFxcImFsbFxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktY2FwdGlvbnNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3snbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvaGVhZGVyPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cmllc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiAqbmdJZj1cXFwiIXByb2plY3RzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snbG9hZGluZyd9fVxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LXdyYXBcXFwiICpuZ0Zvcj1cXFwibGV0IHByb2plY3Qgb2YgcHJvamVjdHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGRhdGEtaWQ9XFxcInt7cHJvamVjdC5pZH19XFxcIiBjbGFzcz1cXFwiZW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiZG9jaWRcXFwiIHZhbHVlPVxcXCJ7e3Byb2plY3QuaWR9fVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiZW50cnktbGlua1xcXCIgW3JvdXRlckxpbmtdPVxcXCJbJy9wcm9qZWN0JywgcHJvamVjdC5pZF1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3twcm9qZWN0Lm5hbWV9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiXG5cbi8qKiovIH0sXG4vKiA1OTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgcm91dGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMik7XHJcblx0dmFyIHRhc2tfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTgpO1xyXG5cdHZhciBUYXNrc0NvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFRhc2tzQ29tcG9uZW50KF9yb3V0ZXIsIF9wYXJhbXMsIHRhc2tTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcclxuXHQgICAgICAgIHRoaXMuX3BhcmFtcyA9IF9wYXJhbXM7XHJcblx0ICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlID0gdGFza1NlcnZpY2U7XHJcblx0ICAgICAgICB0YXNrU2VydmljZS5nZXRUYXNrcyhfcGFyYW1zLmdldFBhcmFtKCdhdCcpKVxyXG5cdCAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHRhc2tzKSB7IHJldHVybiBfdGhpcy50YXNrcyA9IHRhc2tzOyB9KTtcclxuXHQgICAgfVxyXG5cdCAgICBUYXNrc0NvbXBvbmVudC5wcm90b3R5cGUuY29tcG9zZVJlY29yZCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy90YXNrJywgJ25ldyddKTtcclxuXHQgICAgfTtcclxuXHQgICAgVGFza3NDb21wb25lbnQucHJvdG90eXBlLmRlbGV0ZVRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xyXG5cdCAgICAgICAgdGhpcy50YXNrU2VydmljZS5kZWxldGVUYXNrKHRhc2spXHJcblx0ICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlOyB9KVxyXG5cdCAgICAgICAgICAgIC5zdWJzY3JpYmUoKTtcclxuXHQgICAgfTtcclxuXHQgICAgVGFza3NDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW3Rhc2tzXScsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oNjAxKVxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbcm91dGVyXzEuUm91dGVyLCByb3V0ZXJfMS5Sb3V0ZVNlZ21lbnQsIHRhc2tfc2VydmljZV8xLlRhc2tTZXJ2aWNlXSlcclxuXHQgICAgXSwgVGFza3NDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gVGFza3NDb21wb25lbnQ7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlRhc2tzQ29tcG9uZW50ID0gVGFza3NDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogNTk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIGh0dHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgxKTtcclxuXHR2YXIgdGFza19mYWN0b3J5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5OSk7XHJcblx0dmFyIFZJRVdfVVJMID0gJ3A/aWQ9dGFzay12aWV3JztcclxuXHR2YXIgRk9STV9VUkwgPSAncD9pZD10YXNrLWZvcm0nO1xyXG5cdHZhciBIRUFERVIgPSB7XHJcblx0ICAgIGhlYWRlcnM6IG5ldyBodHRwXzEuSGVhZGVycyh7XHJcblx0ICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCcsXHJcblx0ICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcblx0ICAgIH0pXHJcblx0fTtcclxuXHR2YXIgVGFza1NlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBUYXNrU2VydmljZShodHRwKSB7XHJcblx0ICAgICAgICB0aGlzLmh0dHAgPSBodHRwO1xyXG5cdCAgICB9XHJcblx0ICAgIFRhc2tTZXJ2aWNlLnByb3RvdHlwZS5nZXRUYXNrcyA9IGZ1bmN0aW9uIChhdCkge1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoVklFV19VUkwgKyAoYXQgPyAnJmF0PScgKyBhdCA6ICcnKSwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3ApIHsgcmV0dXJuIHRhc2tfZmFjdG9yeV8xLlRhc2tGYWN0b3J5LmNyZWF0ZVRhc2tMaXN0KHJlc3AuanNvbigpLm9iamVjdHNbMF0ubGlzdCk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBUYXNrU2VydmljZS5wcm90b3R5cGUuZ2V0VGFza0J5SWQgPSBmdW5jdGlvbiAodGFza0lkKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChGT1JNX1VSTCArICcmZG9jaWQ9JyArIHRhc2tJZCwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiB0YXNrX2ZhY3RvcnlfMS5UYXNrRmFjdG9yeS5jcmVhdGVUYXNrKHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzFdKTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tTZXJ2aWNlLnByb3RvdHlwZS5zYXZlVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XHJcblx0ICAgICAgICB2YXIgdXJsID0gRk9STV9VUkwgKyAodGFzay5pZCA/ICcmZG9jaWQ9JyArIHRhc2suaWQgOiAnJyk7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCB0YXNrLnNlcmlhbGl6ZSgpLCBIRUFERVIpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBUYXNrU2VydmljZS5wcm90b3R5cGUuZGVsZXRlVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZShWSUVXX1VSTCk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2h0dHBfMS5IdHRwXSlcclxuXHQgICAgXSwgVGFza1NlcnZpY2UpO1xyXG5cdCAgICByZXR1cm4gVGFza1NlcnZpY2U7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlRhc2tTZXJ2aWNlID0gVGFza1NlcnZpY2U7XHJcblxuXG4vKioqLyB9LFxuLyogNTk5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgdGFza18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDApO1xyXG5cdGZ1bmN0aW9uIGNyZWF0ZVRhc2soanNvbikge1xyXG5cdCAgICB2YXIgcmVzdWx0ID0gbmV3IHRhc2tfMS5UYXNrKCk7XHJcblx0ICAgIC8vIGNvbnNvbGUubG9nKCdmYWN0b3J5OmNyZWF0ZVRhc2snLCBqc29uKTtcclxuXHQgICAgcmVzdWx0LmlkID0ganNvbi5pZDtcclxuXHQgICAgcmVzdWx0LmF1dGhvciA9IGpzb24uYXV0aG9yO1xyXG5cdCAgICByZXN1bHQucmVnRGF0ZSA9IGpzb24ucmVnRGF0ZTtcclxuXHQgICAgcmVzdWx0LnR5cGUgPSBqc29uLnR5cGU7XHJcblx0ICAgIHJlc3VsdC5zdGF0dXMgPSBqc29uLnN0YXR1cztcclxuXHQgICAgcmVzdWx0LnByaW9yaXR5ID0ganNvbi5wcmlvcml0eTtcclxuXHQgICAgcmVzdWx0LmJvZHkgPSBqc29uLmJvZHk7XHJcblx0ICAgIHJlc3VsdC5hc3NpZ25lZSA9IGpzb24uYXNzaWduZWU7XHJcblx0ICAgIHJlc3VsdC5zdGFydERhdGUgPSBqc29uLnN0YXJ0RGF0ZTtcclxuXHQgICAgcmVzdWx0LmR1ZURhdGUgPSBqc29uLmR1ZURhdGU7XHJcblx0ICAgIHJlc3VsdC50YWdzID0ganNvbi50YWdzO1xyXG5cdCAgICByZXN1bHQuYXR0YWNobWVudHMgPSBudWxsOyAvLyBqc29uLmF0dGFjaG1lbnRzO1xyXG5cdCAgICByZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHRmdW5jdGlvbiBjcmVhdGVUYXNrTGlzdChqc29uKSB7XHJcblx0ICAgIHZhciByZXN1bHQgPSBbXTtcclxuXHQgICAganNvbi5mb3JFYWNoKGZ1bmN0aW9uICh0YXNrKSB7IHJldHVybiByZXN1bHQucHVzaChjcmVhdGVUYXNrKHRhc2spKTsgfSk7XHJcblx0ICAgIHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cdGV4cG9ydHMuVGFza0ZhY3RvcnkgPSB7XHJcblx0ICAgIGNyZWF0ZVRhc2s6IGNyZWF0ZVRhc2ssXHJcblx0ICAgIGNyZWF0ZVRhc2tMaXN0OiBjcmVhdGVUYXNrTGlzdFxyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogNjAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgb2JqX3V0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5Myk7XHJcblx0ZXhwb3J0cy5UYXNrUHJpb3JpdHlUeXBlID0ge1xyXG5cdCAgICBVTktOT1dOOiAwLFxyXG5cdCAgICBIRUlHSEVTVDogMSxcclxuXHQgICAgSEVJR0hUOiAyLFxyXG5cdCAgICBNRURJVU06IDMsXHJcblx0ICAgIE5PUk1BTDogNFxyXG5cdH07XHJcblx0ZXhwb3J0cy5UYXNrU3RhdHVzVHlwZSA9IHtcclxuXHQgICAgVU5LTk9XTjogMCxcclxuXHQgICAgRFJBRlQ6IDQ1MyxcclxuXHQgICAgV0FJVElORzogNDU0LFxyXG5cdCAgICBQUk9DRVNTRUQ6IDQ1NSxcclxuXHQgICAgRklOSVNIRUQ6IDQ1NlxyXG5cdH07XHJcblx0dmFyIFRhc2sgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBUYXNrKCkge1xyXG5cdCAgICB9XHJcblx0ICAgIFRhc2sucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiBvYmpfdXRpbHNfMS5zZXJpYWxpemVPYmooe1xyXG5cdCAgICAgICAgICAgIGJvZHk6IHRoaXMuYm9keVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBUYXNrO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5UYXNrID0gVGFzaztcclxuXG5cbi8qKiovIH0sXG4vKiA2MDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgIHt7J3Rhc2tzJ319XFxyXFxuICAgIDwvaDE+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY29tcG9zZVJlY29yZCgpXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyduZXdfdGFzayd9fVxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInZpZXdcXFwiPlxcclxcbiAgICAgICAgPGhlYWRlciBjbGFzcz1cXFwiZW50cmllcy1oZWFkXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkLXdyYXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImVudHJ5LXNlbGVjdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGRhdGEtdG9nZ2xlPVxcXCJkb2NpZFxcXCIgY2xhc3M9XFxcImFsbFxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktY2FwdGlvbnNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3snYm9keSd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvaGVhZGVyPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cmllc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiAqbmdJZj1cXFwiIXRhc2tzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snbG9hZGluZyd9fVxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LXdyYXBcXFwiICpuZ0Zvcj1cXFwibGV0IHRhc2sgb2YgdGFza3NcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGRhdGEtaWQ9XFxcInt7dGFzay5pZH19XFxcIiBjbGFzcz1cXFwiZW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiZG9jaWRcXFwiIHZhbHVlPVxcXCJ7e3Rhc2suaWR9fVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiZW50cnktbGlua1xcXCIgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrJywgdGFzay5pZF1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3t0YXNrLmJvZHl9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiXG5cbi8qKiovIH0sXG4vKiA2MDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgcm91dGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMik7XHJcblx0dmFyIGNvbW1vbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpO1xyXG5cdHZhciB0YXNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwMCk7XHJcblx0dmFyIHRhc2tfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTgpO1xyXG5cdHZhciBUYXNrQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gVGFza0NvbXBvbmVudChfdGFza1NlcnZpY2UsIF9yb3V0ZXIsIF9wYXJhbXMsIF9mb3JtQnVpbGRlcikge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMuX3Rhc2tTZXJ2aWNlID0gX3Rhc2tTZXJ2aWNlO1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcclxuXHQgICAgICAgIHRoaXMuX3BhcmFtcyA9IF9wYXJhbXM7XHJcblx0ICAgICAgICB0aGlzLl9mb3JtQnVpbGRlciA9IF9mb3JtQnVpbGRlcjtcclxuXHQgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XHJcblx0ICAgICAgICB0aGlzLnRhc2sgPSBuZXcgdGFza18xLlRhc2soKTtcclxuXHQgICAgICAgIHRoaXMuYm9keSA9IG5ldyBjb21tb25fMS5Db250cm9sKCcnKTtcclxuXHQgICAgICAgIHRoaXMudGFza0Zvcm0gPSBfZm9ybUJ1aWxkZXIuZ3JvdXAoe1xyXG5cdCAgICAgICAgICAgIGJvZHk6IHRoaXMuYm9keVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgICAgICBpZiAodGhpcy5fcGFyYW1zLmdldFBhcmFtKCdpZCcpICE9PSAnbmV3Jykge1xyXG5cdCAgICAgICAgICAgIHRoaXMuX3Rhc2tTZXJ2aWNlLmdldFRhc2tCeUlkKHRoaXMuX3BhcmFtcy5nZXRQYXJhbSgnaWQnKSkuc3Vic2NyaWJlKGZ1bmN0aW9uICh0YXNrKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLnRhc2sgPSB0YXNrO1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG5cdCAgICAgICAgICAgIH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH1cclxuXHQgICAgVGFza0NvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tDb21wb25lbnQucHJvdG90eXBlLnNhdmVUYXNrID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMuX3Rhc2tTZXJ2aWNlLnNhdmVUYXNrKHRoaXMudGFzaykuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXNwKSB7IHJldHVybiBfdGhpcy5jbG9zZSgpOyB9KTtcclxuXHQgICAgICAgIDtcclxuXHQgICAgfTtcclxuXHQgICAgVGFza0NvbXBvbmVudC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvdGFza3MnXSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW3Rhc2tdJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXyg2MDMpXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFt0YXNrX3NlcnZpY2VfMS5UYXNrU2VydmljZSwgcm91dGVyXzEuUm91dGVyLCByb3V0ZXJfMS5Sb3V0ZVNlZ21lbnQsIGNvbW1vbl8xLkZvcm1CdWlsZGVyXSlcclxuXHQgICAgXSwgVGFza0NvbXBvbmVudCk7XHJcblx0ICAgIHJldHVybiBUYXNrQ29tcG9uZW50O1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5UYXNrQ29tcG9uZW50ID0gVGFza0NvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA2MDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2ICpuZ0lmPVxcXCJsb2FkaW5nXFxcIj5cXHJcXG4gICAge3snbG9hZGluZyd9fVxcclxcbjwvZGl2Plxcclxcbjxmb3JtIFtuZ0Zvcm1Nb2RlbF09XFxcInRhc2tGb3JtXFxcIiBbaGlkZGVuXT1cXFwibG9hZGluZ1xcXCI+XFxyXFxuICAgIDxoZWFkZXIgY2xhc3M9XFxcImNvbnRlbnQtaGVhZGVyXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0bi1iYWNrXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcImNsb3NlKCRldmVudClcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jaGV2cm9uLWxlZnRcXFwiPjwvaT5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgPGgxIGNsYXNzPVxcXCJoZWFkZXItdGl0bGVcXFwiPlxcclxcbiAgICAgICAgICAgIHt7J3Rhc2snfX1cXHJcXG4gICAgICAgIDwvaDE+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWFjdGlvbnNcXFwiPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0biBidG4tcHJpbWFyeVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBbZGlzYWJsZWRdPVxcXCIhdGFza0Zvcm0udmFsaWRcXFwiIChjbGljayk9XFxcInNhdmVUYXNrKClcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydzYXZlX2Nsb3NlJ319XFxyXFxuICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcImNsb3NlKCRldmVudClcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydjbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvaGVhZGVyPlxcclxcbiAgICA8c2VjdGlvbiBjbGFzcz1cXFwiY29udGVudC1ib2R5XFxcIj5cXHJcXG4gICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3Rhc2tfdHlwZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJ0YXNrVHlwZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGF0dXMnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwic3RhdHVzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJcXFwiPjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3ByaW9yaXR5J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XFxcInByaW9yaXR5XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJcXFwiPjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2JvZHknfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cXFwic3BhbjdcXFwiIFsobmdNb2RlbCldPVxcXCJ0YXNrLmJvZHlcXFwiIG5nQ29udHJvbD1cXFwiYm9keVxcXCI+PC90ZXh0YXJlYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snYXNzaWduZWVfdXNlcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJhc3NpZ25lZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGFydF9kYXRlJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgbmFtZT1cXFwic3RhcnREYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydkdWVfZGF0ZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImRhdGVcXFwiIG5hbWU9XFxcImR1ZURhdGVcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3RhZ3MnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwidGFnc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgYXR0YWNobWVudHNcXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZmllbGRzZXQ+XFxyXFxuICAgIDwvc2VjdGlvbj5cXHJcXG48L2Zvcm0+XFxyXFxuXCJcblxuLyoqKi8gfSxcbi8qIDYwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBVc2VyUHJvZmlsZUNvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFVzZXJQcm9maWxlQ29tcG9uZW50KCkge1xyXG5cdCAgICB9XHJcblx0ICAgIFVzZXJQcm9maWxlQ29tcG9uZW50LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuXHQgICAgfTtcclxuXHQgICAgVXNlclByb2ZpbGVDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW3VzZXItcHJvZmlsZV0nLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNSlcclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXHJcblx0ICAgIF0sIFVzZXJQcm9maWxlQ29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIFVzZXJQcm9maWxlQ29tcG9uZW50O1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Vc2VyUHJvZmlsZUNvbXBvbmVudCA9IFVzZXJQcm9maWxlQ29tcG9uZW50O1xyXG5cblxuLyoqKi8gfSxcbi8qIDYwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxmb3JtIG5hbWU9XFxcIntAZW50aXR5fVxcXCIgY2xhc3M9XFxcImZvcm0gZm9ybS11c2VycHJvZmlsZVxcXCIgYWN0aW9uPVxcXCJcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGgxIGNsYXNzPVxcXCJoZWFkZXItdGl0bGVcXFwiPlxcclxcbiAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCJjb25jYXQoLy9jYXB0aW9ucy9lbXBsb3llZS9AY2FwdGlvbiwgJyAtICcsIGZpZWxkcy9uYW1lKVxcXCIvPlxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPHhzbDphcHBseS10ZW1wbGF0ZXMgc2VsZWN0PVxcXCIvL2FjdGlvbmJhclxcXCIgLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8dWwgY2xhc3M9XFxcIm5hdiBuYXYtdGFic1xcXCIgcm9sZT1cXFwidGFibGlzdFxcXCI+XFxyXFxuICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJhY3RpdmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjdGFicy0xXFxcIiByb2xlPVxcXCJ0YWJcXFwiIGRhdGEtdG9nZ2xlPVxcXCJ0YWJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvcHJvcGVydGllcy9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgIDwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpPlxcclxcbiAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjdGFicy0zXFxcIiByb2xlPVxcXCJ0YWJcXFwiIGRhdGEtdG9nZ2xlPVxcXCJ0YWJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvaW50ZXJmYWNlL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgIDwvdWw+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0YWItY29udGVudFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiByb2xlPVxcXCJ0YWJwYW5lbFxcXCIgY2xhc3M9XFxcInRhYi1wYW5lIGFjdGl2ZVxcXCIgaWQ9XFxcInRhYnMtMVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwhLS08ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0IGZpZWxkc2V0LXVzZXItYXZhdGFyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwidXNlci1hdmF0YXJcXFwiIHNyYz1cXFwiaW1nL2F2YXRhci5wbmdcXFwiLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD4tLT5cXHJcXG4gICAgICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldCBmaWVsZHNldC11c2VyLWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvdXNlcl9uYW1lL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCJmaWVsZHMvbmFtZVxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9sb2dpbl9uYW1lL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIG5hbWU9XFxcImxvZ2luXFxcIiB2YWx1ZT1cXFwie2ZpZWxkcy9sb2dpbn1cXFwiIGNsYXNzPVxcXCJzcGFuM1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL3Bhc3N3b3JkL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInBhc3N3b3JkXFxcIiBuYW1lPVxcXCJwd2RcXFwiIGNsYXNzPVxcXCJzcGFuM1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL3Bhc3N3b3JkX2NvbmZpcm0vQGNhcHRpb25cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicGFzc3dvcmRcXFwiIG5hbWU9XFxcInB3ZF9jb25maXJtXFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9lbWFpbC9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBuYW1lPVxcXCJlbWFpbFxcXCIgdmFsdWU9XFxcIntmaWVsZHMvZW1haWx9XFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9vcmdfbmFtZS9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiZmllbGRzL29yZ2FuaXphdGlvblxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9kZXBhcnRtZW50L0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCJmaWVsZHMvZGVwYXJ0bWVudFxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9wb3NpdGlvbi9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiZmllbGRzL3Bvc2l0aW9uXFxcIi8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL3JvbGVzL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlciBsaXN0LXN0eWxlLW5vbmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDpmb3ItZWFjaCBzZWxlY3Q9XFxcImZpZWxkcy9yb2xlcy9lbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLlxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6Zm9yLWVhY2g+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IHJvbGU9XFxcInRhYnBhbmVsXFxcIiBjbGFzcz1cXFwidGFiLXBhbmVcXFwiIGlkPVxcXCJ0YWJzLTNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9saW1pdF92aWV3L0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJwYWdlc2l6ZVxcXCIgY2xhc3M9XFxcIm5hdGl2ZSBzcGFuMlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIxMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDppZiB0ZXN0PVxcXCIvL3BhZ2VzaXplID0gJzEwJ1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6YXR0cmlidXRlIG5hbWU9XFxcInNlbGVjdGVkXFxcIiBzZWxlY3Q9XFxcIidzZWxlY3RlZCdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMjBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICcyMCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjMwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmlmIHRlc3Q9XFxcIi8vcGFnZXNpemUgPSAnMzAnXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3hzbDppZj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCI1MFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDppZiB0ZXN0PVxcXCIvL3BhZ2VzaXplID0gJzUwJ1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6YXR0cmlidXRlIG5hbWU9XFxcInNlbGVjdGVkXFxcIiBzZWxlY3Q9XFxcIidzZWxlY3RlZCdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL2ludGVyZmFjZV9sYW5nL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YXJpYWJsZSBuYW1lPVxcXCJjdXJyZW50bGFuZ1xcXCIgc2VsZWN0PVxcXCIvcmVxdWVzdC9AbGFuZ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJsYW5nXFxcIiBjbGFzcz1cXFwibmF0aXZlIHNwYW4yXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6Zm9yLWVhY2ggc2VsZWN0PVxcXCIvL3F1ZXJ5W0BlbnRpdHkgPSAnbGFuZ3VhZ2UnXS9lbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwie3ZpZXdjb250ZW50L2xhbmcvQGlkfVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwidmlld2NvbnRlbnQvbGFuZy9AaWQgPSAkY3VycmVudGxhbmdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCJ2aWV3Y29udGVudC9sYW5nXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6Zm9yLWVhY2g+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCIgZGF0YS10b2dnbGUtdGhlbWU9XFxcInRoZW1lMVxcXCIgY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL2NoYW5nZV9za2luL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9mb3JtPlxcclxcblwiXG5cbi8qKiovIH0sXG4vKiA2MDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgTG9naW5Db21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBMb2dpbkNvbXBvbmVudCgpIHtcclxuXHQgICAgfVxyXG5cdCAgICBMb2dpbkNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdbbG9naW5dJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogJ2xvZ2luJ1xyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbXSlcclxuXHQgICAgXSwgTG9naW5Db21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gTG9naW5Db21wb25lbnQ7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkxvZ2luQ29tcG9uZW50ID0gTG9naW5Db21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogNjA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgVXNlciA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFVzZXIoKSB7XHJcblx0ICAgICAgICB0aGlzLnVzZXJOYW1lID0gJ0Bhbm9ueW1vdXMnO1xyXG5cdCAgICB9XHJcblx0ICAgIHJldHVybiBVc2VyO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Vc2VyID0gVXNlcjtcclxuXG5cbi8qKiovIH0sXG4vKiA2MDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJsYXlvdXRcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LW92ZXJsYXlcXFwiIChtb3VzZWRvd24pPVxcXCJoaWRlTmF2KClcXFwiICh0b3VjaHN0YXJ0KT1cXFwiaGlkZU5hdigpXFxcIj48L2Rpdj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiaGVhZGVyIG5hdmJhciBuYXZiYXItZml4ZWQtdG9wXFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRhaW5lclxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibmF2YmFyLWhlYWRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0bi1zaWRlLW5hdi10b2dnbGVcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwidG9nZ2xlTmF2KClcXFwiPjwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJicmFuZC1sb2dvXFxcIiBhbHQ9XFxcImxvZ29cXFwiIHNyYz1cXFwiaW1nL2xvZ28ucG5nXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiYnJhbmQtdGl0bGVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3tIRUFERVJfVElUTEV9fVxcclxcbiAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPG5hdiBjbGFzcz1cXFwibmF2YmFyLW5hdiBuYXZiYXItcmlnaHRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XFxcIm5hdiBuYXZiYXItcmlnaHRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJkcm9wZG93blxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgY2xhc3M9XFxcImRyb3Bkb3duLXRvZ2dsZVxcXCIgZGF0YS10b2dnbGU9XFxcImRyb3Bkb3duXFxcIiAoY2xpY2spPVxcXCJwcmV2ZW50RGVmYXVsdCgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXVzZXJcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJkcm9wZG93bi1tZW51IHJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcInVzZXItcHJvZmlsZVxcXCIgW3JvdXRlckxpbmtdPVxcXCJbJ3VzZXItcHJvZmlsZSddXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e2xvZ2dlZFVzZXIudXNlck5hbWV9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XFxcImRpdmlkZXJcXFwiPjwvbGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJsb2dvdXRcXFwiIGhyZWY9XFxcIiNsb2dvdXRcXFwiIChjbGljayk9XFxcImxvZ291dCgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dvdXRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgPC91bD5cXHJcXG4gICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XFxcIm5hdmJhci1mb3JtIG5hdmJhci1zZWFyY2hcXFwiIG5hbWU9XFxcImZ0LXNlYXJjaFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiaGlkZGVuXFxcIiBuYW1lPVxcXCJpZFxcXCIgdmFsdWU9XFxcInNlYXJjaFxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJzZWFyY2hcXFwiIGNsYXNzPVxcXCJxXFxcIiBuYW1lPVxcXCJrZXl3b3JkXFxcIiB2YWx1ZT1cXFwie3tzZWFyY2hfa2V5d29yZH19XFxcIiBwbGFjZWhvbGRlcj17e3NlYXJjaF9wbGFjZWhvbGRlcn19IHJlcXVpcmVkPVxcXCJyZXF1aXJlZFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcInJlc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtdGltZXNcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInN1Ym1pdFxcXCIgdmFsdWU9XFxcInNlYXJjaFxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9mb3JtPlxcclxcbiAgICAgICAgICAgIDwvbmF2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvaGVhZGVyPlxcclxcbiAgICA8c2VjdGlvbiBjbGFzcz1cXFwiY29udGFpbmVyXFxcIj5cXHJcXG4gICAgICAgIDxhc2lkZSBuYXYgY2xhc3M9XFxcImFzaWRlIHNpZGUtbmF2XFxcIj48L2FzaWRlPlxcclxcbiAgICAgICAgPG1haW4gY2xhc3M9XFxcImNvbnRlbnRcXFwiPlxcclxcbiAgICAgICAgICAgIDxyb3V0ZXItb3V0bGV0Pjwvcm91dGVyLW91dGxldD5cXHJcXG4gICAgICAgIDwvbWFpbj5cXHJcXG4gICAgPC9zZWN0aW9uPlxcclxcbjwvZGl2PlxcclxcblwiXG5cbi8qKiovIH1cbl0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGJ1bmRsZS5qc1xuICoqLyIsImltcG9ydCB7Ym9vdHN0cmFwfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xyXG5pbXBvcnQge2JpbmQsIHByb3ZpZGUsIGVuYWJsZVByb2RNb2RlLCBQTEFURk9STV9ESVJFQ1RJVkVTfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIVFRQX1BST1ZJREVSUywgUmVxdWVzdE9wdGlvbnMsIEJhc2VSZXF1ZXN0T3B0aW9ucywgSGVhZGVyc30gZnJvbSAnQGFuZ3VsYXIvaHR0cCc7XHJcbmltcG9ydCB7Uk9VVEVSX0RJUkVDVElWRVMsIFJPVVRFUl9QUk9WSURFUlN9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7Rk9STV9QUk9WSURFUlMsIExvY2F0aW9uU3RyYXRlZ3ksIEhhc2hMb2NhdGlvblN0cmF0ZWd5fSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgJ3J4anMvUngnO1xyXG5cclxuaW1wb3J0IHtBcHB9IGZyb20gJy4vY29tcG9uZW50cy9hcHAnO1xyXG5pbXBvcnQge0FwcFNlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvYXBwLXNlcnZpY2UnO1xyXG5pbXBvcnQge1Rhc2tTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2VzL3Rhc2stc2VydmljZSc7XHJcbmltcG9ydCB7UHJvamVjdFNlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlJztcclxuaW1wb3J0IHtSZWZlcmVuY2VTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2VzL3JlZmVyZW5jZS1zZXJ2aWNlJztcclxuaW1wb3J0IHtTdGFmZlNlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvc3RhZmYtc2VydmljZSc7XHJcblxyXG5kZWNsYXJlIGxldCBfX1BST0RVQ1RJT05fXzogYW55O1xyXG5pZiAoX19QUk9EVUNUSU9OX18pIHtcclxuICAgIGVuYWJsZVByb2RNb2RlKCk7XHJcbn1cclxuXHJcbi8qY2xhc3MgTXlCYXNlUmVxdWVzdE9wdGlvbnMgZXh0ZW5kcyBCYXNlUmVxdWVzdE9wdGlvbnMge1xyXG4gICAgaGVhZGVyczogSGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCdcclxuICAgIH0pO1xyXG4gICAgd2l0aENyZWRlbnRpYWxzOiBib29sZWFuID0gdHJ1ZTtcclxufSovXHJcblxyXG5ib290c3RyYXAoQXBwLCBbXHJcbiAgICBIVFRQX1BST1ZJREVSUyxcclxuICAgIFJPVVRFUl9ESVJFQ1RJVkVTLFxyXG4gICAgUk9VVEVSX1BST1ZJREVSUyxcclxuICAgIHByb3ZpZGUoUExBVEZPUk1fRElSRUNUSVZFUywgeyB1c2VWYWx1ZTogUk9VVEVSX0RJUkVDVElWRVMsIG11bHRpOiB0cnVlIH0pLFxyXG4gICAgcHJvdmlkZShMb2NhdGlvblN0cmF0ZWd5LCB7IHVzZUNsYXNzOiBIYXNoTG9jYXRpb25TdHJhdGVneSB9KSxcclxuICAgIC8vIHByb3ZpZGUoUmVxdWVzdE9wdGlvbnMsIHsgdXNlQ2xhc3M6IE15QmFzZVJlcXVlc3RPcHRpb25zIH0pLFxyXG4gICAgRk9STV9QUk9WSURFUlMsXHJcbiAgICBBcHBTZXJ2aWNlLFxyXG4gICAgVGFza1NlcnZpY2UsXHJcbiAgICBQcm9qZWN0U2VydmljZSxcclxuICAgIFJlZmVyZW5jZVNlcnZpY2UsXHJcbiAgICBTdGFmZlNlcnZpY2VcclxuXSkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL21haW4udHNcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuLy8gU3ViamVjdCBpbXBvcnRlZCBiZWZvcmUgT2JzZXJ2YWJsZSB0byBieXBhc3MgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZSBzaW5jZVxuLy8gU3ViamVjdCBleHRlbmRzIE9ic2VydmFibGUgYW5kIE9ic2VydmFibGUgcmVmZXJlbmNlcyBTdWJqZWN0IGluIGl0J3Ncbi8vIGRlZmluaXRpb25cbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuL1N1YmplY3QnKTtcbmV4cG9ydHMuU3ViamVjdCA9IFN1YmplY3RfMS5TdWJqZWN0O1xuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL09ic2VydmFibGUnKTtcbmV4cG9ydHMuT2JzZXJ2YWJsZSA9IE9ic2VydmFibGVfMS5PYnNlcnZhYmxlO1xuLy8gc3RhdGljc1xuLyogdHNsaW50OmRpc2FibGU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjaycpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2NvbWJpbmVMYXRlc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvY29uY2F0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2RlZmVyJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2VtcHR5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2ZvcmtKb2luJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2Zyb20nKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvZnJvbUV2ZW50Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4nKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvZnJvbVByb21pc2UnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvZ2VuZXJhdGUnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvaW50ZXJ2YWwnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvbWVyZ2UnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvcmFjZScpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9uZXZlcicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9vZicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9yYW5nZScpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS90aHJvdycpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS90aW1lcicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS96aXAnKTtcbi8vb3BlcmF0b3JzXG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXInKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2J1ZmZlckNvdW50Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXJUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2J1ZmZlcldoZW4nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NhY2hlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jYXRjaCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29tYmluZUFsbCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29tYmluZUxhdGVzdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29uY2F0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jb25jYXRBbGwnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvbmNhdE1hcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29uY2F0TWFwVG8nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvdW50Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZW1hdGVyaWFsaXplJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZWJvdW5jZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVsYXknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2RlbGF5V2hlbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2RvJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9leHBhbmQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2ZpbHRlcicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZmluYWxseScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZmlyc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2dyb3VwQnknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9hdWRpdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvYXVkaXRUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9sYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9sZXQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2V2ZXJ5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tYXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL21hcFRvJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tYXRlcmlhbGl6ZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWVyZ2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL21lcmdlQWxsJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tZXJnZU1hcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWVyZ2VNYXBUbycpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbXVsdGljYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9vYnNlcnZlT24nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3BhcnRpdGlvbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcGx1Y2snKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3B1Ymxpc2gnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvcicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcHVibGlzaFJlcGxheScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcHVibGlzaExhc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3JhY2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3JlZHVjZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcmVwZWF0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9yZXRyeScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcmV0cnlXaGVuJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zYW1wbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NhbXBsZVRpbWUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NjYW4nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NoYXJlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zaW5nbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NraXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NraXBVbnRpbCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc2tpcFdoaWxlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zdGFydFdpdGgnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3N1YnNjcmliZU9uJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zd2l0Y2gnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3N3aXRjaE1hcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwVG8nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rha2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rha2VMYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90YWtlVW50aWwnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rha2VXaGlsZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGhyb3R0bGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rocm90dGxlVGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGltZW91dCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGltZW91dFdpdGgnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3RvQXJyYXknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3RvUHJvbWlzZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93VGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvemlwJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci96aXBBbGwnKTtcbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xudmFyIE9wZXJhdG9yXzEgPSByZXF1aXJlKCcuL09wZXJhdG9yJyk7XG5leHBvcnRzLk9wZXJhdG9yID0gT3BlcmF0b3JfMS5PcGVyYXRvcjtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4vU3Vic2NyaXB0aW9uJyk7XG5leHBvcnRzLlN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbjtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbmV4cG9ydHMuU3Vic2NyaWJlciA9IFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyO1xudmFyIEFzeW5jU3ViamVjdF8xID0gcmVxdWlyZSgnLi9Bc3luY1N1YmplY3QnKTtcbmV4cG9ydHMuQXN5bmNTdWJqZWN0ID0gQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0O1xudmFyIFJlcGxheVN1YmplY3RfMSA9IHJlcXVpcmUoJy4vUmVwbGF5U3ViamVjdCcpO1xuZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdF8xLlJlcGxheVN1YmplY3Q7XG52YXIgQmVoYXZpb3JTdWJqZWN0XzEgPSByZXF1aXJlKCcuL0JlaGF2aW9yU3ViamVjdCcpO1xuZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3Q7XG52YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlJyk7XG5leHBvcnRzLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcbnZhciBOb3RpZmljYXRpb25fMSA9IHJlcXVpcmUoJy4vTm90aWZpY2F0aW9uJyk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbjtcbnZhciBFbXB0eUVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvRW1wdHlFcnJvcicpO1xuZXhwb3J0cy5FbXB0eUVycm9yID0gRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3I7XG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcicpO1xuZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG52YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcicpO1xuZXhwb3J0cy5PYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7XG52YXIgVW5zdWJzY3JpcHRpb25FcnJvcl8xID0gcmVxdWlyZSgnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InKTtcbmV4cG9ydHMuVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yO1xudmFyIGFzYXBfMSA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyL2FzYXAnKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi9zY2hlZHVsZXIvYXN5bmMnKTtcbnZhciBxdWV1ZV8xID0gcmVxdWlyZSgnLi9zY2hlZHVsZXIvcXVldWUnKTtcbnZhciByeFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4vc3ltYm9sL3J4U3Vic2NyaWJlcicpO1xudmFyIGl0ZXJhdG9yXzEgPSByZXF1aXJlKCcuL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIG9ic2VydmFibGUgPSByZXF1aXJlKCdzeW1ib2wtb2JzZXJ2YWJsZScpO1xuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUnguU2NoZWR1bGVyXG4gKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gcXVldWUgU2NoZWR1bGVzIG9uIGEgcXVldWUgaW4gdGhlIGN1cnJlbnQgZXZlbnQgZnJhbWVcbiAqICh0cmFtcG9saW5lIHNjaGVkdWxlcikuIFVzZSB0aGlzIGZvciBpdGVyYXRpb24gb3BlcmF0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7U2NoZWR1bGVyfSBhc2FwIFNjaGVkdWxlcyBvbiB0aGUgbWljcm8gdGFzayBxdWV1ZSwgd2hpY2ggdXNlcyB0aGVcbiAqIGZhc3Rlc3QgdHJhbnNwb3J0IG1lY2hhbmlzbSBhdmFpbGFibGUsIGVpdGhlciBOb2RlLmpzJyBgcHJvY2Vzcy5uZXh0VGljaygpYFxuICogb3IgV2ViIFdvcmtlciBNZXNzYWdlQ2hhbm5lbCBvciBzZXRUaW1lb3V0IG9yIG90aGVycy4gVXNlIHRoaXMgZm9yXG4gKiBhc3luY2hyb25vdXMgY29udmVyc2lvbnMuXG4gKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXN5bmMgU2NoZWR1bGVzIHdvcmsgd2l0aCBgc2V0SW50ZXJ2YWxgLiBVc2UgdGhpcyBmb3JcbiAqIHRpbWUtYmFzZWQgb3BlcmF0aW9ucy5cbiAqL1xudmFyIFNjaGVkdWxlciA9IHtcbiAgICBhc2FwOiBhc2FwXzEuYXNhcCxcbiAgICBhc3luYzogYXN5bmNfMS5hc3luYyxcbiAgICBxdWV1ZTogcXVldWVfMS5xdWV1ZVxufTtcbmV4cG9ydHMuU2NoZWR1bGVyID0gU2NoZWR1bGVyO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSeC5TeW1ib2xcbiAqIEBwcm9wZXJ0eSB7U3ltYm9sfHN0cmluZ30gcnhTdWJzY3JpYmVyIEEgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWUgdG9cbiAqIHJldHJpZXZlIGFuIFwiUnggc2FmZVwiIE9ic2VydmVyIGZyb20gYW4gb2JqZWN0LiBcIlJ4IHNhZmV0eVwiIGNhbiBiZSBkZWZpbmVkIGFzXG4gKiBhbiBvYmplY3QgdGhhdCBoYXMgYWxsIG9mIHRoZSB0cmFpdHMgb2YgYW4gUnggU3Vic2NyaWJlciwgaW5jbHVkaW5nIHRoZVxuICogYWJpbGl0eSB0byBhZGQgYW5kIHJlbW92ZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzdWJzY3JpcHRpb24gY2hhaW4gYW5kXG4gKiBndWFyYW50ZWVzIGludm9sdmluZyBldmVudCB0cmlnZ2VyaW5nIChjYW4ndCBcIm5leHRcIiBhZnRlciB1bnN1YnNjcmlwdGlvbixcbiAqIGV0YykuXG4gKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IG9ic2VydmFibGUgQSBzeW1ib2wgdG8gdXNlIGFzIGEgcHJvcGVydHkgbmFtZSB0b1xuICogcmV0cmlldmUgYW4gT2JzZXJ2YWJsZSBhcyBkZWZpbmVkIGJ5IHRoZSBbRUNNQVNjcmlwdCBcIk9ic2VydmFibGVcIiBzcGVjXShodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlKS5cbiAqIEBwcm9wZXJ0eSB7U3ltYm9sfHN0cmluZ30gaXRlcmF0b3IgVGhlIEVTNiBzeW1ib2wgdG8gdXNlIGFzIGEgcHJvcGVydHkgbmFtZVxuICogdG8gcmV0cmlldmUgYW4gaXRlcmF0b3IgZnJvbSBhbiBvYmplY3QuXG4gKi9cbnZhciBTeW1ib2wgPSB7XG4gICAgcnhTdWJzY3JpYmVyOiByeFN1YnNjcmliZXJfMS4kJHJ4U3Vic2NyaWJlcixcbiAgICBvYnNlcnZhYmxlOiBvYnNlcnZhYmxlLFxuICAgIGl0ZXJhdG9yOiBpdGVyYXRvcl8xLiQkaXRlcmF0b3Jcbn07XG5leHBvcnRzLlN5bWJvbCA9IFN5bWJvbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJ4LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvUnguanNcbiAqKiBtb2R1bGUgaWQgPSAzMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBiaW5kQ2FsbGJhY2tfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvYmluZENhbGxiYWNrJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5iaW5kQ2FsbGJhY2sgPSBiaW5kQ2FsbGJhY2tfMS5iaW5kQ2FsbGJhY2s7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kQ2FsbGJhY2suanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9iaW5kQ2FsbGJhY2suanNcbiAqKiBtb2R1bGUgaWQgPSAzMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0JvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmJpbmRDYWxsYmFjayA9IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlXzEuQm91bmRDYWxsYmFja09ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZENhbGxiYWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9iaW5kQ2FsbGJhY2suanNcbiAqKiBtb2R1bGUgaWQgPSAzMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBBc3luY1N1YmplY3RfMSA9IHJlcXVpcmUoJy4uL0FzeW5jU3ViamVjdCcpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGNhbGxiYWNrRnVuYywgc2VsZWN0b3IsIGFyZ3MsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmM7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBjYWxsYmFjayBBUEkgdG8gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZS5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5HaXZlIGl0IGEgZnVuY3Rpb24gYGZgIG9mIHR5cGUgYGYoeCwgY2FsbGJhY2spYCBhbmRcbiAgICAgKiBpdCB3aWxsIHJldHVybiBhIGZ1bmN0aW9uIGBnYCB0aGF0IHdoZW4gY2FsbGVkIGFzIGBnKHgpYCB3aWxsIG91dHB1dCBhblxuICAgICAqIE9ic2VydmFibGUuPC9zcGFuPlxuICAgICAqXG4gICAgICogYGJpbmRDYWxsYmFja2AgaXMgbm90IGFuIG9wZXJhdG9yIGJlY2F1c2UgaXRzIGlucHV0IGFuZCBvdXRwdXQgYXJlIG5vdFxuICAgICAqIE9ic2VydmFibGVzLiBUaGUgaW5wdXQgaXMgYSBmdW5jdGlvbiBgZnVuY2Agd2l0aCBzb21lIHBhcmFtZXRlcnMsIGJ1dCB0aGVcbiAgICAgKiBsYXN0IHBhcmFtZXRlciBtdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBgZnVuY2AgY2FsbHMgd2hlbiBpdCBpc1xuICAgICAqIGRvbmUuIFRoZSBvdXRwdXQgb2YgYGJpbmRDYWxsYmFja2AgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBzYW1lXG4gICAgICogcGFyYW1ldGVycyBhcyBgZnVuY2AsIGV4Y2VwdCB0aGUgbGFzdCBvbmUgKHRoZSBjYWxsYmFjaykuIFdoZW4gdGhlIG91dHB1dFxuICAgICAqIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50cywgaXQgd2lsbCByZXR1cm4gYW4gT2JzZXJ2YWJsZSB3aGVyZSB0aGVcbiAgICAgKiByZXN1bHRzIHdpbGwgYmUgZGVsaXZlcmVkIHRvLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q29udmVydCBqUXVlcnkncyBnZXRKU09OIHRvIGFuIE9ic2VydmFibGUgQVBJPC9jYXB0aW9uPlxuICAgICAqIC8vIFN1cHBvc2Ugd2UgaGF2ZSBqUXVlcnkuZ2V0SlNPTignL215L3VybCcsIGNhbGxiYWNrKVxuICAgICAqIHZhciBnZXRKU09OQXNPYnNlcnZhYmxlID0gUnguT2JzZXJ2YWJsZS5iaW5kQ2FsbGJhY2soalF1ZXJ5LmdldEpTT04pO1xuICAgICAqIHZhciByZXN1bHQgPSBnZXRKU09OQXNPYnNlcnZhYmxlKCcvbXkvdXJsJyk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgYmluZE5vZGVDYWxsYmFja31cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21Qcm9taXNlfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuYyBGdW5jdGlvbiB3aXRoIGEgY2FsbGJhY2sgYXMgdGhlIGxhc3QgcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIEEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZVxuICAgICAqIGNhbGxiYWNrIGFuZCBtYXBzIHRob3NlIGEgdmFsdWUgdG8gZW1pdCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG4gICAgICogY2FsbGJhY2tzLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLnBhcmFtczogKik6IE9ic2VydmFibGV9IEEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGVcbiAgICAgKiBPYnNlcnZhYmxlIHRoYXQgZGVsaXZlcnMgdGhlIHNhbWUgdmFsdWVzIHRoZSBjYWxsYmFjayB3b3VsZCBkZWxpdmVyLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGJpbmRDYWxsYmFja1xuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgQm91bmRDYWxsYmFja09ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGZ1bmMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGZ1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgQm91bmRDYWxsYmFja09ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgY2FsbGJhY2tGdW5jID0gdGhpcy5jYWxsYmFja0Z1bmM7XG4gICAgICAgIHZhciBhcmdzID0gdGhpcy5hcmdzO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuICAgICAgICBpZiAoIXNjaGVkdWxlcikge1xuICAgICAgICAgICAgaWYgKCFzdWJqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3ViamVjdCA9IHRoaXMuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8xID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuICAgICAgICAgICAgICAgIGhhbmRsZXIuc291cmNlID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCB7IHNvdXJjZTogdGhpcywgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSA9IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlO1xuZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgdmFyIGNhbGxiYWNrRnVuYyA9IHNvdXJjZS5jYWxsYmFja0Z1bmMsIGFyZ3MgPSBzb3VyY2UuYXJncywgc2NoZWR1bGVyID0gc291cmNlLnNjaGVkdWxlcjtcbiAgICB2YXIgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICBzdWJqZWN0ID0gc291cmNlLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlckZuKCkge1xuICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBpbm5lckFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHNvdXJjZS5zZWxlY3Rvciwgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8yID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkodGhpcywgaW5uZXJBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogcmVzdWx0XzIsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3M7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdmFsdWUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gdG8gcGFzcyB2YWx1ZXMgaW4gd2l0aG91dCBjbG9zdXJlXG4gICAgICAgIGhhbmRsZXIuc291cmNlID0gc291cmNlO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGYuYWRkKHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcbiAgICB2YXIgdmFsdWUgPSBhcmcudmFsdWUsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcbiAgICBzdWJqZWN0Lm5leHQodmFsdWUpO1xuICAgIHN1YmplY3QuY29tcGxldGUoKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoYXJnKSB7XG4gICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcbiAgICBzdWJqZWN0LmVycm9yKGVycik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvQm91bmRDYWxsYmFja09ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi9TdWJqZWN0Jyk7XG4vKipcbiAqIEBjbGFzcyBBc3luY1N1YmplY3Q8VD5cbiAqL1xudmFyIEFzeW5jU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzeW5jU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNOZXh0ID0gZmFsc2U7XG4gICAgfVxuICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmhhc05leHQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNOZXh0ID0gdHJ1ZTtcbiAgICB9O1xuICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgLy8gb3B0aW1pemF0aW9uIHRvIGJsb2NrIG91ciBTdWJqZWN0U3Vic2NyaXB0aW9ucyBmcm9tXG4gICAgICAgIC8vIHNwbGljaW5nIHRoZW1zZWx2ZXMgb3V0IG9mIHRoZSBvYnNlcnZlcnMgbGlzdCBvbmUgYnkgb25lLlxuICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzTmV4dCkge1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IG9ic2VydmVyc1tpbmRleF07XG4gICAgICAgICAgICAgICAgby5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgIG8uY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXJzW2luZGV4XS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jU3ViamVjdDtcbn0oU3ViamVjdF8xLlN1YmplY3QpKTtcbmV4cG9ydHMuQXN5bmNTdWJqZWN0ID0gQXN5bmNTdWJqZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTdWJqZWN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvQXN5bmNTdWJqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMzI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYmluZE5vZGVDYWxsYmFja18xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5iaW5kTm9kZUNhbGxiYWNrID0gYmluZE5vZGVDYWxsYmFja18xLmJpbmROb2RlQ2FsbGJhY2s7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kTm9kZUNhbGxiYWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFjay5qc1xuICoqIG1vZHVsZSBpZCA9IDMyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0JvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5iaW5kTm9kZUNhbGxiYWNrID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXzEuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmROb2RlQ2FsbGJhY2suanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2suanNcbiAqKiBtb2R1bGUgaWQgPSAzMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBBc3luY1N1YmplY3RfMSA9IHJlcXVpcmUoJy4uL0FzeW5jU3ViamVjdCcpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlKGNhbGxiYWNrRnVuYywgc2VsZWN0b3IsIGFyZ3MsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmM7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBOb2RlLmpzLXN0eWxlIGNhbGxiYWNrIEFQSSB0byBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhblxuICAgICAqIE9ic2VydmFibGUuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBqdXN0IGxpa2Uge0BsaW5rIGJpbmRDYWxsYmFja30sIGJ1dCB0aGVcbiAgICAgKiBjYWxsYmFjayBpcyBleHBlY3RlZCB0byBiZSBvZiB0eXBlIGBjYWxsYmFjayhlcnJvciwgcmVzdWx0KWAuPC9zcGFuPlxuICAgICAqXG4gICAgICogYGJpbmROb2RlQ2FsbGJhY2tgIGlzIG5vdCBhbiBvcGVyYXRvciBiZWNhdXNlIGl0cyBpbnB1dCBhbmQgb3V0cHV0IGFyZSBub3RcbiAgICAgKiBPYnNlcnZhYmxlcy4gVGhlIGlucHV0IGlzIGEgZnVuY3Rpb24gYGZ1bmNgIHdpdGggc29tZSBwYXJhbWV0ZXJzLCBidXQgdGhlXG4gICAgICogbGFzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYGZ1bmNgIGNhbGxzIHdoZW4gaXQgaXNcbiAgICAgKiBkb25lLiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgZXhwZWN0ZWQgdG8gZm9sbG93IE5vZGUuanMgY29udmVudGlvbnMsXG4gICAgICogd2hlcmUgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBjYWxsYmFjayBpcyBhbiBlcnJvciwgd2hpbGUgcmVtYWluaW5nXG4gICAgICogYXJndW1lbnRzIGFyZSB0aGUgY2FsbGJhY2sgcmVzdWx0LiBUaGUgb3V0cHV0IG9mIGBiaW5kTm9kZUNhbGxiYWNrYCBpcyBhXG4gICAgICogZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgc2FtZSBwYXJhbWV0ZXJzIGFzIGBmdW5jYCwgZXhjZXB0IHRoZSBsYXN0IG9uZSAodGhlXG4gICAgICogY2FsbGJhY2spLiBXaGVuIHRoZSBvdXRwdXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYXJndW1lbnRzLCBpdCB3aWxsXG4gICAgICogcmV0dXJuIGFuIE9ic2VydmFibGUgd2hlcmUgdGhlIHJlc3VsdHMgd2lsbCBiZSBkZWxpdmVyZWQgdG8uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZWFkIGEgZmlsZSBmcm9tIHRoZSBmaWxlc3lzdGVtIGFuZCBnZXQgdGhlIGRhdGEgYXMgYW4gT2JzZXJ2YWJsZTwvY2FwdGlvbj5cbiAgICAgKiBpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG4gICAgICogdmFyIHJlYWRGaWxlQXNPYnNlcnZhYmxlID0gUnguT2JzZXJ2YWJsZS5iaW5kTm9kZUNhbGxiYWNrKGZzLnJlYWRGaWxlKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gcmVhZEZpbGVBc09ic2VydmFibGUoJy4vcm9hZE5hbWVzLnR4dCcsICd1dGY4Jyk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgYmluZENhbGxiYWNrfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb219XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbVByb21pc2V9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jIEZ1bmN0aW9uIHdpdGggYSBjYWxsYmFjayBhcyB0aGUgbGFzdCBwYXJhbWV0ZXIuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc2VsZWN0b3IgQSBmdW5jdGlvbiB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlXG4gICAgICogY2FsbGJhY2sgYW5kIG1hcHMgdGhvc2UgYSB2YWx1ZSB0byBlbWl0IG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAgICAgKiBjYWxsYmFja3MuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oLi4ucGFyYW1zOiAqKTogT2JzZXJ2YWJsZX0gQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZVxuICAgICAqIE9ic2VydmFibGUgdGhhdCBkZWxpdmVycyB0aGUgc2FtZSB2YWx1ZXMgdGhlIE5vZGUuanMgY2FsbGJhY2sgd291bGRcbiAgICAgKiBkZWxpdmVyLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGJpbmROb2RlQ2FsbGJhY2tcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoZnVuYywgc2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoc2VsZWN0b3IgPT09IHZvaWQgMCkgeyBzZWxlY3RvciA9IHVuZGVmaW5lZDsgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlKGZ1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHRoaXMuY2FsbGJhY2tGdW5jO1xuICAgICAgICB2YXIgYXJncyA9IHRoaXMuYXJncztcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcbiAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICAgICAgICAgIHN1YmplY3QgPSB0aGlzLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBpbm5lckFyZ3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8xID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuICAgICAgICAgICAgICAgIGhhbmRsZXIuc291cmNlID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCB7IHNvdXJjZTogdGhpcywgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlO1xuZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgdmFyIGNhbGxiYWNrRnVuYyA9IHNvdXJjZS5jYWxsYmFja0Z1bmMsIGFyZ3MgPSBzb3VyY2UuYXJncywgc2NoZWR1bGVyID0gc291cmNlLnNjaGVkdWxlcjtcbiAgICB2YXIgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICBzdWJqZWN0ID0gc291cmNlLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlckZuKCkge1xuICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBpbm5lckFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHNvdXJjZS5zZWxlY3Rvciwgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgICAgICAgICAgdmFyIGVyciA9IGlubmVyQXJncy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8yID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkodGhpcywgaW5uZXJBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogcmVzdWx0XzIsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3M7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdmFsdWUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gdG8gcGFzcyB2YWx1ZXMgaW4gd2l0aG91dCBjbG9zdXJlXG4gICAgICAgIGhhbmRsZXIuc291cmNlID0gc291cmNlO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGYuYWRkKHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcbiAgICB2YXIgdmFsdWUgPSBhcmcudmFsdWUsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcbiAgICBzdWJqZWN0Lm5leHQodmFsdWUpO1xuICAgIHN1YmplY3QuY29tcGxldGUoKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoYXJnKSB7XG4gICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcbiAgICBzdWJqZWN0LmVycm9yKGVycik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0JvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbWJpbmVMYXRlc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdFN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVMYXRlc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0LmpzXG4gKiogbW9kdWxlIGlkID0gMzMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQ29tYmluZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGUgd2hvc2UgdmFsdWVzIGFyZVxuICogY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2ggb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciBhbnkgaW5wdXQgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLCBpdFxuICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dHMsIHRoZW4gZW1pdHNcbiAqIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVMYXRlc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYGNvbWJpbmVMYXRlc3RgIGNvbWJpbmVzIHRoZSB2YWx1ZXMgZnJvbSB0aGlzIE9ic2VydmFibGUgd2l0aCB2YWx1ZXMgZnJvbVxuICogT2JzZXJ2YWJsZXMgcGFzc2VkIGFzIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nIHRvIGVhY2hcbiAqIE9ic2VydmFibGUsIGluIG9yZGVyLCBhbmQgY29sbGVjdGluZyBhbiBhcnJheSBvZiBlYWNoIG9mIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGFueSB0aW1lIGFueSBvZiB0aGUgaW5wdXQgT2JzZXJ2YWJsZXMgZW1pdHMsIHRoZW4gZWl0aGVyIHRha2luZyB0aGF0XG4gKiBhcnJheSBhbmQgcGFzc2luZyBpdCBhcyBhcmd1bWVudHMgdG8gYW4gb3B0aW9uYWwgYHByb2plY3RgIGZ1bmN0aW9uIGFuZFxuICogZW1pdHRpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGF0LCBvciBqdXN0IGVtaXR0aW5nIHRoZSBhcnJheSBvZiByZWNlbnRcbiAqIHZhbHVlcyBkaXJlY3RseSBpZiB0aGVyZSBpcyBubyBgcHJvamVjdGAgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RHluYW1pY2FsbHkgY2FsY3VsYXRlIHRoZSBCb2R5LU1hc3MgSW5kZXggZnJvbSBhbiBPYnNlcnZhYmxlIG9mIHdlaWdodCBhbmQgb25lIGZvciBoZWlnaHQ8L2NhcHRpb24+XG4gKiB2YXIgd2VpZ2h0ID0gUnguT2JzZXJ2YWJsZS5vZig3MCwgNzIsIDc2LCA3OSwgNzUpO1xuICogdmFyIGhlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoMS43NiwgMS43NywgMS43OCk7XG4gKiB2YXIgYm1pID0gd2VpZ2h0LmNvbWJpbmVMYXRlc3QoaGVpZ2h0LCAodywgaCkgPT4gdyAvIChoICogaCkpO1xuICogYm1pLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKCdCTUkgaXMgJyArIHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuICogQHNlZSB7QGxpbmsgbWVyZ2V9XG4gKiBAc2VlIHtAbGluayB3aXRoTGF0ZXN0RnJvbX1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW3Byb2plY3RdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHByb2plY3QgdGhlIHZhbHVlcyBmcm9tXG4gKiB0aGUgY29tYmluZWQgbGF0ZXN0IHZhbHVlcyBpbnRvIGEgbmV3IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbnB1dCBPYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb21cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgY29tYmluZUxhdGVzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29tYmluZUxhdGVzdCgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHByb2plY3QgPSBudWxsO1xuICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvamVjdCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcbiAgICAvLyBhc3N1bWUgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGBjb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgcHJvamVjdClgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcbiAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcbiAgICB9XG4gICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuY29tYmluZUxhdGVzdCA9IGNvbWJpbmVMYXRlc3Q7XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBDb21iaW5lcyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0byBjcmVhdGUgYW4gT2JzZXJ2YWJsZSB3aG9zZSB2YWx1ZXMgYXJlXG4gKiBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCBvZiBpdHMgaW5wdXQgT2JzZXJ2YWJsZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPldoZW5ldmVyIGFueSBpbnB1dCBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGl0XG4gKiBjb21wdXRlcyBhIGZvcm11bGEgdXNpbmcgdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlucHV0cywgdGhlbiBlbWl0c1xuICogdGhlIG91dHB1dCBvZiB0aGF0IGZvcm11bGEuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29tYmluZUxhdGVzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgY29tYmluZUxhdGVzdGAgY29tYmluZXMgdGhlIHZhbHVlcyBmcm9tIGFsbCB0aGUgT2JzZXJ2YWJsZXMgcGFzc2VkIGFzXG4gKiBhcmd1bWVudHMuIFRoaXMgaXMgZG9uZSBieSBzdWJzY3JpYmluZyB0byBlYWNoIE9ic2VydmFibGUsIGluIG9yZGVyLCBhbmRcbiAqIGNvbGxlY3RpbmcgYW4gYXJyYXkgb2YgZWFjaCBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGFueSB0aW1lIGFueSBvZiB0aGVcbiAqIGlucHV0IE9ic2VydmFibGVzIGVtaXRzLCB0aGVuIGVpdGhlciB0YWtpbmcgdGhhdCBhcnJheSBhbmQgcGFzc2luZyBpdCBhc1xuICogYXJndW1lbnRzIHRvIGFuIG9wdGlvbmFsIGBwcm9qZWN0YCBmdW5jdGlvbiBhbmQgZW1pdHRpbmcgdGhlIHJldHVybiB2YWx1ZSBvZlxuICogdGhhdCwgb3IganVzdCBlbWl0dGluZyB0aGUgYXJyYXkgb2YgcmVjZW50IHZhbHVlcyBkaXJlY3RseSBpZiB0aGVyZSBpcyBub1xuICogYHByb2plY3RgIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkR5bmFtaWNhbGx5IGNhbGN1bGF0ZSB0aGUgQm9keS1NYXNzIEluZGV4IGZyb20gYW4gT2JzZXJ2YWJsZSBvZiB3ZWlnaHQgYW5kIG9uZSBmb3IgaGVpZ2h0PC9jYXB0aW9uPlxuICogdmFyIHdlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoNzAsIDcyLCA3NiwgNzksIDc1KTtcbiAqIHZhciBoZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDEuNzYsIDEuNzcsIDEuNzgpO1xuICogdmFyIGJtaSA9IFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdCh3ZWlnaHQsIGhlaWdodCwgKHcsIGgpID0+IHcgLyAoaCAqIGgpKTtcbiAqIGJtaS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnQk1JIGlzICcgKyB4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgd2l0aExhdGVzdEZyb219XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvYnNlcnZhYmxlMSBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbWJpbmUgd2l0aCB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvYnNlcnZhYmxlMiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbWJpbmUgd2l0aCB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlLiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSB2YWx1ZXMgZnJvbVxuICogdGhlIGNvbWJpbmVkIGxhdGVzdCB2YWx1ZXMgaW50byBhIG5ldyB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Igc3Vic2NyaWJpbmcgdG9cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbnB1dCBPYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb21cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgY29tYmluZUxhdGVzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29tYmluZUxhdGVzdFN0YXRpYygpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHByb2plY3QgPSBudWxsO1xuICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdKSkge1xuICAgICAgICBzY2hlZHVsZXIgPSBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9qZWN0ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBmaXJzdCBhbmQgb25seSBvdGhlciBhcmd1bWVudCBiZXNpZGVzIHRoZSByZXN1bHRTZWxlY3RvciBpcyBhbiBhcnJheVxuICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBwcm9qZWN0KWBcbiAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBDb21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkpO1xufVxuZXhwb3J0cy5jb21iaW5lTGF0ZXN0U3RhdGljID0gY29tYmluZUxhdGVzdFN0YXRpYztcbnZhciBDb21iaW5lTGF0ZXN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbWJpbmVMYXRlc3RPcGVyYXRvcihwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgfVxuICAgIENvbWJpbmVMYXRlc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QpKTtcbiAgICB9O1xuICAgIHJldHVybiBDb21iaW5lTGF0ZXN0T3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5Db21iaW5lTGF0ZXN0T3BlcmF0b3IgPSBDb21iaW5lTGF0ZXN0T3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tYmluZUxhdGVzdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMudmFsdWVzID0gW107XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBbXTtcbiAgICAgICAgdGhpcy50b1Jlc3BvbmQgPSBbXTtcbiAgICB9XG4gICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcbiAgICAgICAgdmFyIHRvUmVzcG9uZCA9IHRoaXMudG9SZXNwb25kO1xuICAgICAgICB0b1Jlc3BvbmQucHVzaCh0b1Jlc3BvbmQubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUpO1xuICAgIH07XG4gICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGVzID0gdGhpcy5vYnNlcnZhYmxlcztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKHVudXNlZCkge1xuICAgICAgICBpZiAoKHRoaXMuYWN0aXZlIC09IDEpID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgdmFsdWVzW291dGVySW5kZXhdID0gaW5uZXJWYWx1ZTtcbiAgICAgICAgdmFyIHRvUmVzcG9uZCA9IHRoaXMudG9SZXNwb25kO1xuICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IHRvUmVzcG9uZC5pbmRleE9mKG91dGVySW5kZXgpO1xuICAgICAgICAgICAgaWYgKGZvdW5kICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRvUmVzcG9uZC5zcGxpY2UoZm91bmQsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0b1Jlc3BvbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UHJvamVjdCh2YWx1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJvamVjdCA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5hcHBseSh0aGlzLCB2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLkNvbWJpbmVMYXRlc3RTdWJzY3JpYmVyID0gQ29tYmluZUxhdGVzdFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lTGF0ZXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY29tYmluZUxhdGVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDMzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgU2NhbGFyT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9TY2FsYXJPYnNlcnZhYmxlJyk7XG52YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0VtcHR5T2JzZXJ2YWJsZScpO1xudmFyIGlzU2NoZWR1bGVyXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzU2NoZWR1bGVyJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEFycmF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFycmF5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgaWYgKCFzY2hlZHVsZXIgJiYgYXJyYXkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gYXJyYXlbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgQXJyYXlPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcnJheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgc29tZSB2YWx1ZXMgeW91IHNwZWNpZnkgYXMgYXJndW1lbnRzLFxuICAgICAqIGltbWVkaWF0ZWx5IG9uZSBhZnRlciB0aGUgb3RoZXIsIGFuZCB0aGVuIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIHRoZSBhcmd1bWVudHMgeW91IHByb3ZpZGUsIHRoZW4gY29tcGxldGVzLlxuICAgICAqIDwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvb2YucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBUaGlzIHN0YXRpYyBvcGVyYXRvciBpcyB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBvbmx5XG4gICAgICogZW1pdHMgdGhlIGFyZ3VtZW50cyBnaXZlbiwgYW5kIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24gdGhlcmVhZnRlci4gSXQgY2FuXG4gICAgICogYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgd2l0aCB7QGxpbmsgY29uY2F0fS5cbiAgICAgKiBCeSBkZWZhdWx0LCBpdCB1c2VzIGEgYG51bGxgIFNjaGVkdWxlciwgd2hpY2ggbWVhbnMgdGhlIGBuZXh0YFxuICAgICAqIG5vdGlmaWNhdGlvbnMgYXJlIHNlbnQgc3luY2hyb25vdXNseSwgYWx0aG91Z2ggd2l0aCBhIGRpZmZlcmVudCBTY2hlZHVsZXJcbiAgICAgKiBpdCBpcyBwb3NzaWJsZSB0byBkZXRlcm1pbmUgd2hlbiB0aG9zZSBub3RpZmljYXRpb25zIHdpbGwgYmUgZGVsaXZlcmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCAxMCwgMjAsIDMwLCB0aGVuICdhJywgJ2InLCAnYycsIHRoZW4gc3RhcnQgdGlja2luZyBldmVyeSBzZWNvbmQuPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5vZigxMCwgMjAsIDMwKTtcbiAgICAgKiB2YXIgbGV0dGVycyA9IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJyk7XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb25jYXQobGV0dGVycykuY29uY2F0KGludGVydmFsKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5UfSB2YWx1ZXMgQXJndW1lbnRzIHRoYXQgcmVwcmVzZW50IGBuZXh0YCB2YWx1ZXMgdG8gYmUgZW1pdHRlZC5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAgICAgKiB0aGUgZW1pc3Npb25zIG9mIHRoZSBgbmV4dGAgbm90aWZpY2F0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgZWFjaCBnaXZlbiBpbnB1dCB2YWx1ZS5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBvZlxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgQXJyYXlPYnNlcnZhYmxlLm9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFycmF5W19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSkge1xuICAgICAgICAgICAgYXJyYXkucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZW4gPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlbMF0sIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBcnJheU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gc3RhdGUuYXJyYXksIGluZGV4ID0gc3RhdGUuaW5kZXgsIGNvdW50ID0gc3RhdGUuY291bnQsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoaW5kZXggPj0gY291bnQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaW5kZXhdKTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBBcnJheU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuICAgICAgICB2YXIgY291bnQgPSBhcnJheS5sZW5ndGg7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShBcnJheU9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcbiAgICAgICAgICAgICAgICBhcnJheTogYXJyYXksIGluZGV4OiBpbmRleCwgY291bnQ6IGNvdW50LCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQgJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBcnJheU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkFycmF5T2JzZXJ2YWJsZSA9IEFycmF5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5T2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgU2NhbGFyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNjYWxhck9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2NhbGFyT2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgfVxuICAgIFNjYWxhck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTY2FsYXJPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgZG9uZSA9IHN0YXRlLmRvbmUsIHZhbHVlID0gc3RhdGUudmFsdWUsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuZG9uZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuICAgIH07XG4gICAgU2NhbGFyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShTY2FsYXJPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsIHZhbHVlOiB2YWx1ZSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2NhbGFyT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuU2NhbGFyT2JzZXJ2YWJsZSA9IFNjYWxhck9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TY2FsYXJPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRW1wdHlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1wdHlPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIgYW5kIGltbWVkaWF0ZWx5XG4gICAgICogZW1pdHMgYSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SnVzdCBlbWl0cyAnY29tcGxldGUnLCBhbmQgbm90aGluZyBlbHNlLlxuICAgICAqIDwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZW1wdHkucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBUaGlzIHN0YXRpYyBvcGVyYXRvciBpcyB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBvbmx5XG4gICAgICogZW1pdHMgdGhlIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi4gSXQgY2FuIGJlIHVzZWQgZm9yIGNvbXBvc2luZyB3aXRoIG90aGVyXG4gICAgICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCB0aGUgbnVtYmVyIDcsIHRoZW4gY29tcGxldGUuPC9jYXB0aW9uPlxuICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmVtcHR5KCkuc3RhcnRXaXRoKDcpO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gb25seSBvZGQgbnVtYmVycyB0byB0aGUgc2VxdWVuY2UgJ2EnLCAnYicsICdjJzwvY2FwdGlvbj5cbiAgICAgKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICAgICAqIHZhciByZXN1bHQgPSBpbnRlcnZhbC5tZXJnZU1hcCh4ID0+XG4gICAgICogICB4ICUgMiA9PT0gMSA/IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJykgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcbiAgICAgKiApO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG4gICAgICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgb2Z9XG4gICAgICogQHNlZSB7QGxpbmsgdGhyb3d9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAgICAgKiB0aGUgZW1pc3Npb24gb2YgdGhlIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBcImVtcHR5XCIgT2JzZXJ2YWJsZTogZW1pdHMgb25seSB0aGUgY29tcGxldGVcbiAgICAgKiBub3RpZmljYXRpb24uXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZW1wdHlcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEVtcHR5T2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBFbXB0eU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG4gICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIEVtcHR5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShFbXB0eU9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRW1wdHlPYnNlcnZhYmxlID0gRW1wdHlPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW1wdHlPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNTY2hlZHVsZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnNjaGVkdWxlID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc1NjaGVkdWxlciA9IGlzU2NoZWR1bGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNTY2hlZHVsZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2lzU2NoZWR1bGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBPdXRlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPdXRlclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT3V0ZXJTdWJzY3JpYmVyKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gT3V0ZXJTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5PdXRlclN1YnNjcmliZXIgPSBPdXRlclN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PdXRlclN1YnNjcmliZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9PdXRlclN1YnNjcmliZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4vcm9vdCcpO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4vaXNBcnJheScpO1xudmFyIGlzUHJvbWlzZV8xID0gcmVxdWlyZSgnLi9pc1Byb21pc2UnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIElubmVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vSW5uZXJTdWJzY3JpYmVyJyk7XG52YXIgJCRvYnNlcnZhYmxlID0gcmVxdWlyZSgnc3ltYm9sLW9ic2VydmFibGUnKTtcbmZ1bmN0aW9uIHN1YnNjcmliZVRvUmVzdWx0KG91dGVyU3Vic2NyaWJlciwgcmVzdWx0LCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSB7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IElubmVyU3Vic2NyaWJlcl8xLklubmVyU3Vic2NyaWJlcihvdXRlclN1YnNjcmliZXIsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpO1xuICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkge1xuICAgICAgICBpZiAocmVzdWx0Ll9pc1NjYWxhcikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuc3Vic2NyaWJlKGRlc3RpbmF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBcnJheV8xLmlzQXJyYXkocmVzdWx0KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGxlbiAmJiAhZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHRbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNQcm9taXNlXzEuaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgcmVzdWx0LnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gZGVzdGluYXRpb24uZXJyb3IoZXJyKTsgfSlcbiAgICAgICAgICAgIC50aGVuKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIC8vIEVzY2FwaW5nIHRoZSBQcm9taXNlIHRyYXA6IGdsb2JhbGx5IHRocm93IHVuaGFuZGxlZCBlcnJvcnNcbiAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcmVzdWx0W2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJlc3VsdDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChpdGVtKTtcbiAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFskJG9ic2VydmFibGVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBvYnMgPSByZXN1bHRbJCRvYnNlcnZhYmxlXSgpO1xuICAgICAgICBpZiAodHlwZW9mIG9icy5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKCdpbnZhbGlkIG9ic2VydmFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYnMuc3Vic2NyaWJlKG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBUeXBlRXJyb3IoJ3Vua25vd24gdHlwZSByZXR1cm5lZCcpKTtcbiAgICB9XG59XG5leHBvcnRzLnN1YnNjcmliZVRvUmVzdWx0ID0gc3Vic2NyaWJlVG9SZXN1bHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVUb1Jlc3VsdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUHJvbWlzZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvaXNQcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbnZhciBTeW1ib2wgPSByb290XzEucm9vdC5TeW1ib2w7XG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChTeW1ib2wuaXRlcmF0b3IpIHtcbiAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gU3ltYm9sLml0ZXJhdG9yO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgU3ltYm9sLmZvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSBTeW1ib2wuZm9yKCdpdGVyYXRvcicpO1xuICAgIH1cbn1cbmVsc2Uge1xuICAgIGlmIChyb290XzEucm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290XzEucm9vdC5TZXQoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEJ1ZyBmb3IgbW96aWxsYSB2ZXJzaW9uXG4gICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9ICdAQGl0ZXJhdG9yJztcbiAgICB9XG4gICAgZWxzZSBpZiAocm9vdF8xLnJvb3QuTWFwKSB7XG4gICAgICAgIC8vIGVzNi1zaGltIHNwZWNpZmljIGxvZ2ljXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAnZW50cmllcycgJiYga2V5ICE9PSAnc2l6ZScgJiYgcm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZVtrZXldID09PSByb290XzEucm9vdC5NYXAucHJvdG90eXBlWydlbnRyaWVzJ10pIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSBrZXk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9ICdAQGl0ZXJhdG9yJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3N5bWJvbC9pdGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDM0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgSW5uZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5uZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuICAgICAgICB0aGlzLm91dGVySW5kZXggPSBvdXRlckluZGV4O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlOZXh0KHRoaXMub3V0ZXJWYWx1ZSwgdmFsdWUsIHRoaXMub3V0ZXJJbmRleCwgdGhpcy5pbmRleCsrLCB0aGlzKTtcbiAgICB9O1xuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUVycm9yKGVycm9yLCB0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5Jbm5lclN1YnNjcmliZXIgPSBJbm5lclN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9Jbm5lclN1YnNjcmliZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb25jYXRfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvY29uY2F0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5jb25jYXQgPSBjb25jYXRfMS5jb25jYXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb25jYXQuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGNvbmNhdF8xID0gcmVxdWlyZSgnLi4vb3BlcmF0b3IvY29uY2F0Jyk7XG5leHBvcnRzLmNvbmNhdCA9IGNvbmNhdF8xLmNvbmNhdFN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvY29uY2F0LmpzXG4gKiogbW9kdWxlIGlkID0gMzQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBtZXJnZUFsbF8xID0gcmVxdWlyZSgnLi9tZXJnZUFsbCcpO1xuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIHNlcXVlbnRpYWxseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcbiAqIGdpdmVuIGlucHV0IE9ic2VydmFibGUgYWZ0ZXIgdGhlIGN1cnJlbnQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29uY2F0ZW5hdGVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5XG4gKiBzZXF1ZW50aWFsbHkgZW1pdHRpbmcgdGhlaXIgdmFsdWVzLCBvbmUgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEpvaW5zIHRoaXMgT2JzZXJ2YWJsZSB3aXRoIG11bHRpcGxlIG90aGVyIE9ic2VydmFibGVzIGJ5IHN1YnNjcmliaW5nIHRvIHRoZW1cbiAqIG9uZSBhdCBhIHRpbWUsIHN0YXJ0aW5nIHdpdGggdGhlIHNvdXJjZSwgYW5kIG1lcmdpbmcgdGhlaXIgcmVzdWx0cyBpbnRvIHRoZVxuICogb3V0cHV0IE9ic2VydmFibGUuIFdpbGwgd2FpdCBmb3IgZWFjaCBPYnNlcnZhYmxlIHRvIGNvbXBsZXRlIGJlZm9yZSBtb3ZpbmdcbiAqIG9uIHRvIHRoZSBuZXh0LlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbmNhdGVuYXRlIGEgdGltZXIgY291bnRpbmcgZnJvbSAwIHRvIDMgd2l0aCBhIHN5bmNocm9ub3VzIHNlcXVlbmNlIGZyb20gMSB0byAxMDwvY2FwdGlvbj5cbiAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KTtcbiAqIHZhciBzZXF1ZW5jZSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTApO1xuICogdmFyIHJlc3VsdCA9IHRpbWVyLmNvbmNhdChzZXF1ZW5jZSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbmNhdGVuYXRlIDMgT2JzZXJ2YWJsZXM8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcbiAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG4gKiB2YXIgdGltZXIzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApLnRha2UoMTApO1xuICogdmFyIHJlc3VsdCA9IHRpbWVyMS5jb25jYXQodGltZXIyLCB0aW1lcjMpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgYWZ0ZXIgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBBbiBvcHRpb25hbCBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgZWFjaFxuICogT2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbGwgdmFsdWVzIG9mIGVhY2ggcGFzc2VkIE9ic2VydmFibGUgbWVyZ2VkIGludG8gYVxuICogc2luZ2xlIE9ic2VydmFibGUsIGluIG9yZGVyLCBpbiBzZXJpYWwgZmFzaGlvbi5cbiAqIEBtZXRob2QgY29uY2F0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb25jYXQoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBjb25jYXRTdGF0aWMuYXBwbHkodm9pZCAwLCBbdGhpc10uY29uY2F0KG9ic2VydmFibGVzKSk7XG59XG5leHBvcnRzLmNvbmNhdCA9IGNvbmNhdDtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggc2VxdWVudGlhbGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSBhZnRlciB0aGUgY3VycmVudCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db25jYXRlbmF0ZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnlcbiAqIHNlcXVlbnRpYWxseSBlbWl0dGluZyB0aGVpciB2YWx1ZXMsIG9uZSBPYnNlcnZhYmxlIGFmdGVyIHRoZSBvdGhlci48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogSm9pbnMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnkgc3Vic2NyaWJpbmcgdG8gdGhlbSBvbmUgYXQgYSB0aW1lIGFuZFxuICogbWVyZ2luZyB0aGVpciByZXN1bHRzIGludG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBXaWxsIHdhaXQgZm9yIGVhY2hcbiAqIE9ic2VydmFibGUgdG8gY29tcGxldGUgYmVmb3JlIG1vdmluZyBvbiB0byB0aGUgbmV4dC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSBhIHRpbWVyIGNvdW50aW5nIGZyb20gMCB0byAzIHdpdGggYSBzeW5jaHJvbm91cyBzZXF1ZW5jZSBmcm9tIDEgdG8gMTA8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCk7XG4gKiB2YXIgc2VxdWVuY2UgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDEwKTtcbiAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lciwgc2VxdWVuY2UpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSAzIE9ic2VydmFibGVzPC9jYXB0aW9uPlxuICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG4gKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcbiAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lcjEsIHRpbWVyMiwgdGltZXIzKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbnB1dDEgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb25jYXRlbmF0ZSB3aXRoIG90aGVycy5cbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgd2l0aCBvdGhlcnMuXG4gKiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIEFuIG9wdGlvbmFsIFNjaGVkdWxlciB0byBzY2hlZHVsZSBlYWNoXG4gKiBPYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFsbCB2YWx1ZXMgb2YgZWFjaCBwYXNzZWQgT2JzZXJ2YWJsZSBtZXJnZWQgaW50byBhXG4gKiBzaW5nbGUgT2JzZXJ2YWJsZSwgaW4gb3JkZXIsIGluIHNlcmlhbCBmYXNoaW9uLlxuICogQHN0YXRpYyB0cnVlXG4gKiBAbmFtZSBjb25jYXRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdFN0YXRpYygpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHNjaGVkdWxlciA9IG51bGw7XG4gICAgdmFyIGFyZ3MgPSBvYnNlcnZhYmxlcztcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihhcmdzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdKSkge1xuICAgICAgICBzY2hlZHVsZXIgPSBhcmdzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBtZXJnZUFsbF8xLk1lcmdlQWxsT3BlcmF0b3IoMSkpO1xufVxuZXhwb3J0cy5jb25jYXRTdGF0aWMgPSBjb25jYXRTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb25jYXQuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIHdoaWNoXG4gKiBjb25jdXJyZW50bHkgZGVsaXZlcnMgYWxsIHZhbHVlcyB0aGF0IGFyZSBlbWl0dGVkIG9uIHRoZSBpbm5lciBPYnNlcnZhYmxlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZUFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgbWVyZ2VBbGxgIHN1YnNjcmliZXMgdG8gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzLCBhbHNvIGtub3duIGFzXG4gKiBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLiBFYWNoIHRpbWUgaXQgb2JzZXJ2ZXMgb25lIG9mIHRoZXNlIGVtaXR0ZWQgaW5uZXJcbiAqIE9ic2VydmFibGVzLCBpdCBzdWJzY3JpYmVzIHRvIHRoYXQgYW5kIGRlbGl2ZXJzIGFsbCB0aGUgdmFsdWVzIGZyb20gdGhlXG4gKiBpbm5lciBPYnNlcnZhYmxlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIG9ubHlcbiAqIGNvbXBsZXRlcyBvbmNlIGFsbCBpbm5lciBPYnNlcnZhYmxlcyBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieVxuICogYSBpbm5lciBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+U3Bhd24gYSBuZXcgaW50ZXJ2YWwgT2JzZXJ2YWJsZSBmb3IgZWFjaCBjbGljayBldmVudCwgYW5kIGJsZW5kIHRoZWlyIG91dHB1dHMgYXMgb25lIE9ic2VydmFibGU8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5tZXJnZUFsbCgpO1xuICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnQgZnJvbSAwIHRvIDkgZXZlcnkgc2Vjb25kIGZvciBlYWNoIGNsaWNrLCBidXQgb25seSBhbGxvdyAyIGNvbmN1cnJlbnQgdGltZXJzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApKTtcbiAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIubWVyZ2VBbGwoMik7XG4gKiBmaXJzdE9yZGVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgemlwQWxsfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlubmVyXG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB2YWx1ZXMgY29taW5nIGZyb20gYWxsIHRoZVxuICogaW5uZXIgT2JzZXJ2YWJsZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIG1lcmdlQWxsXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtZXJnZUFsbChjb25jdXJyZW50KSB7XG4gICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSk7XG59XG5leHBvcnRzLm1lcmdlQWxsID0gbWVyZ2VBbGw7XG52YXIgTWVyZ2VBbGxPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSB7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgfVxuICAgIE1lcmdlQWxsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlQWxsU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VBbGxPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1lcmdlQWxsT3BlcmF0b3IgPSBNZXJnZUFsbE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNZXJnZUFsbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXJnZUFsbFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb25jdXJyZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgIH1cbiAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKG9ic2VydmFibGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlQWxsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG4gICAgICAgIHRoaXMuYWN0aXZlLS07XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlQWxsU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLk1lcmdlQWxsU3Vic2NyaWJlciA9IE1lcmdlQWxsU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlQWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkZWZlcl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9kZWZlcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZGVmZXIgPSBkZWZlcl8xLmRlZmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9kZWZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRGVmZXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0RlZmVyT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5kZWZlciA9IERlZmVyT2JzZXJ2YWJsZV8xLkRlZmVyT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZGVmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRGVmZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVmZXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlZmVyT2JzZXJ2YWJsZShvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlRmFjdG9yeSA9IG9ic2VydmFibGVGYWN0b3J5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCwgb24gc3Vic2NyaWJlLCBjYWxscyBhbiBPYnNlcnZhYmxlIGZhY3RvcnkgdG9cbiAgICAgKiBtYWtlIGFuIE9ic2VydmFibGUgZm9yIGVhY2ggbmV3IE9ic2VydmVyLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNyZWF0ZXMgdGhlIE9ic2VydmFibGUgbGF6aWx5LCB0aGF0IGlzLCBvbmx5IHdoZW4gaXRcbiAgICAgKiBpcyBzdWJzY3JpYmVkLlxuICAgICAqIDwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZGVmZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBgZGVmZXJgIGFsbG93cyB5b3UgdG8gY3JlYXRlIHRoZSBPYnNlcnZhYmxlIG9ubHkgd2hlbiB0aGUgT2JzZXJ2ZXJcbiAgICAgKiBzdWJzY3JpYmVzLCBhbmQgY3JlYXRlIGEgZnJlc2ggT2JzZXJ2YWJsZSBmb3IgZWFjaCBPYnNlcnZlci4gSXQgd2FpdHMgdW50aWxcbiAgICAgKiBhbiBPYnNlcnZlciBzdWJzY3JpYmVzIHRvIGl0LCBhbmQgdGhlbiBpdCBnZW5lcmF0ZXMgYW4gT2JzZXJ2YWJsZSxcbiAgICAgKiB0eXBpY2FsbHkgd2l0aCBhbiBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uIEl0IGRvZXMgdGhpcyBhZnJlc2ggZm9yIGVhY2hcbiAgICAgKiBzdWJzY3JpYmVyLCBzbyBhbHRob3VnaCBlYWNoIHN1YnNjcmliZXIgbWF5IHRoaW5rIGl0IGlzIHN1YnNjcmliaW5nIHRvIHRoZVxuICAgICAqIHNhbWUgT2JzZXJ2YWJsZSwgaW4gZmFjdCBlYWNoIHN1YnNjcmliZXIgZ2V0cyBpdHMgb3duIGluZGl2aWR1YWxcbiAgICAgKiBPYnNlcnZhYmxlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHRvIGVpdGhlciBhbiBPYnNlcnZhYmxlIG9mIGNsaWNrcyBvciBhbiBPYnNlcnZhYmxlIG9mIGludGVydmFsLCBhdCByYW5kb208L2NhcHRpb24+XG4gICAgICogdmFyIGNsaWNrc09ySW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICogICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gICAgICogICB9IGVsc2Uge1xuICAgICAqICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBjbGlja3NPckludGVydmFsLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBvYnNlcnZhYmxlRmFjdG9yeSBUaGUgT2JzZXJ2YWJsZVxuICAgICAqIGZhY3RvcnkgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIE9ic2VydmVyIHRoYXQgc3Vic2NyaWJlcyB0byB0aGUgb3V0cHV0XG4gICAgICogT2JzZXJ2YWJsZS4gTWF5IGFsc28gcmV0dXJuIGEgUHJvbWlzZSwgd2hpY2ggd2lsbCBiZSBjb252ZXJ0ZWQgb24gdGhlIGZseVxuICAgICAqIHRvIGFuIE9ic2VydmFibGUuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB3aG9zZSBPYnNlcnZlcnMnIHN1YnNjcmlwdGlvbnMgdHJpZ2dlclxuICAgICAqIGFuIGludm9jYXRpb24gb2YgdGhlIGdpdmVuIE9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBkZWZlclxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRGVmZXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgICAgICByZXR1cm4gbmV3IERlZmVyT2JzZXJ2YWJsZShvYnNlcnZhYmxlRmFjdG9yeSk7XG4gICAgfTtcbiAgICBEZWZlck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IERlZmVyU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGVGYWN0b3J5KTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZlck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkRlZmVyT2JzZXJ2YWJsZSA9IERlZmVyT2JzZXJ2YWJsZTtcbnZhciBEZWZlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWZlclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmYWN0b3J5KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgdGhpcy50cnlEZWZlcigpO1xuICAgIH1cbiAgICBEZWZlclN1YnNjcmliZXIucHJvdG90eXBlLnRyeURlZmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fY2FsbEZhY3RvcnkoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWZlclN1YnNjcmliZXIucHJvdG90eXBlLl9jYWxsRmFjdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZmFjdG9yeSgpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRGVmZXJTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRGVmZXJPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzQ5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZW1wdHlfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZW1wdHknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmVtcHR5ID0gZW1wdHlfMS5lbXB0eTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtcHR5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZW1wdHkuanNcbiAqKiBtb2R1bGUgaWQgPSAzNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbmV4cG9ydHMuZW1wdHkgPSBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1wdHkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2VtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gMzUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZm9ya0pvaW5fMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZm9ya0pvaW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZvcmtKb2luID0gZm9ya0pvaW5fMS5mb3JrSm9pbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvcmtKb2luLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZm9ya0pvaW4uanNcbiAqKiBtb2R1bGUgaWQgPSAzNTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZvcmtKb2luT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gb3JrSm9pbk9ic2VydmFibGUnKTtcbmV4cG9ydHMuZm9ya0pvaW4gPSBGb3JrSm9pbk9ic2VydmFibGVfMS5Gb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ya0pvaW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzXG4gKiogbW9kdWxlIGlkID0gMzUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5Jyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBGb3JrSm9pbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGb3JrSm9pbk9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZhYmxlKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzb3VyY2VzXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGZvcmtKb2luXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBGb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgc291cmNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlcyA9PT0gbnVsbCB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHRTZWxlY3RvciA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlc1tzb3VyY2VzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXN1bHRTZWxlY3RvciA9IHNvdXJjZXMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGFuZCBvbmx5IG90aGVyIGFyZ3VtZW50IGJlc2lkZXMgdGhlIHJlc3VsdFNlbGVjdG9yIGlzIGFuIGFycmF5XG4gICAgICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGZvcmtKb2luKFtvYnMxLCBvYnMyLCBvYnMzXSwgcmVzdWx0U2VsZWN0b3IpYFxuICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkoc291cmNlc1swXSkpIHtcbiAgICAgICAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEZvcmtKb2luT2JzZXJ2YWJsZShzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcik7XG4gICAgfTtcbiAgICBGb3JrSm9pbk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IEZvcmtKb2luU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNvdXJjZXMsIHRoaXMucmVzdWx0U2VsZWN0b3IpO1xuICAgIH07XG4gICAgcmV0dXJuIEZvcmtKb2luT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRm9ya0pvaW5PYnNlcnZhYmxlID0gRm9ya0pvaW5PYnNlcnZhYmxlO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGb3JrSm9pblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGb3JrSm9pblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRm9ya0pvaW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuICAgICAgICB0aGlzLmhhdmVWYWx1ZXMgPSAwO1xuICAgICAgICB2YXIgbGVuID0gc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMudG90YWwgPSBsZW47XG4gICAgICAgIHRoaXMudmFsdWVzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuICAgICAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBzb3VyY2UsIG51bGwsIGkpO1xuICAgICAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24ub3V0ZXJJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG4gICAgICAgIGlmICghaW5uZXJTdWIuX2hhc1ZhbHVlKSB7XG4gICAgICAgICAgICBpbm5lclN1Yi5faGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5oYXZlVmFsdWVzKys7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgaGF2ZVZhbHVlcyA9IF9hLmhhdmVWYWx1ZXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIHZhbHVlcyA9IF9hLnZhbHVlcztcbiAgICAgICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICAgIGlmICghaW5uZXJTdWIuX2hhc1ZhbHVlKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tcGxldGVkKys7XG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAhPT0gbGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhdmVWYWx1ZXMgPT09IGxlbikge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0U2VsZWN0b3IgPyByZXN1bHRTZWxlY3Rvci5hcHBseSh0aGlzLCB2YWx1ZXMpIDogdmFsdWVzO1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBGb3JrSm9pblN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Rm9ya0pvaW5PYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Gb3JrSm9pbk9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmcm9tXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb20nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb20gPSBmcm9tXzEuZnJvbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb20uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gMzU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGcm9tT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gcm9tT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5mcm9tID0gRnJvbU9ic2VydmFibGVfMS5Gcm9tT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gMzU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xudmFyIGlzRnVuY3Rpb25fMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNGdW5jdGlvbicpO1xudmFyIGlzUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1Byb21pc2UnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIFByb21pc2VPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1Byb21pc2VPYnNlcnZhYmxlJyk7XG52YXIgSXRlcmF0b3JPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0l0ZXJhdG9yT2JzZXJ2YWJsZScpO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9BcnJheU9ic2VydmFibGUnKTtcbnZhciBBcnJheUxpa2VPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0FycmF5TGlrZU9ic2VydmFibGUnKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL2l0ZXJhdG9yJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIG9ic2VydmVPbl8xID0gcmVxdWlyZSgnLi4vb3BlcmF0b3Ivb2JzZXJ2ZU9uJyk7XG52YXIgJCRvYnNlcnZhYmxlID0gcmVxdWlyZSgnc3ltYm9sLW9ic2VydmFibGUnKTtcbnZhciBpc0FycmF5TGlrZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGcm9tT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBudWxsKTtcbiAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBcnJheSwgYW4gYXJyYXktbGlrZSBvYmplY3QsIGEgUHJvbWlzZSwgYW5cbiAgICAgKiBpdGVyYWJsZSBvYmplY3QsIG9yIGFuIE9ic2VydmFibGUtbGlrZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29udmVydHMgYWxtb3N0IGFueXRoaW5nIHRvIGFuIE9ic2VydmFibGUuPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy9mcm9tLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogQ29udmVydCB2YXJpb3VzIG90aGVyIG9iamVjdHMgYW5kIGRhdGEgdHlwZXMgaW50byBPYnNlcnZhYmxlcy4gYGZyb21gXG4gICAgICogY29udmVydHMgYSBQcm9taXNlIG9yIGFuIGFycmF5LWxpa2Ugb3IgYW5cbiAgICAgKiBbaXRlcmFibGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMjaXRlcmFibGUpXG4gICAgICogb2JqZWN0IGludG8gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiB0aGF0IHByb21pc2Ugb3IgYXJyYXkgb3JcbiAgICAgKiBpdGVyYWJsZS4gQSBTdHJpbmcsIGluIHRoaXMgY29udGV4dCwgaXMgdHJlYXRlZCBhcyBhbiBhcnJheSBvZiBjaGFyYWN0ZXJzLlxuICAgICAqIE9ic2VydmFibGUtbGlrZSBvYmplY3RzIChjb250YWlucyBhIGZ1bmN0aW9uIG5hbWVkIHdpdGggdGhlIEVTMjAxNSBTeW1ib2xcbiAgICAgKiBmb3IgT2JzZXJ2YWJsZSkgY2FuIGFsc28gYmUgY29udmVydGVkIHRocm91Z2ggdGhpcyBvcGVyYXRvci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbnZlcnRzIGFuIGFycmF5IHRvIGFuIE9ic2VydmFibGU8L2NhcHRpb24+XG4gICAgICogdmFyIGFycmF5ID0gWzEwLCAyMCwgMzBdO1xuICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmZyb20oYXJyYXkpO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db252ZXJ0IGFuIGluZmluaXRlIGl0ZXJhYmxlIChmcm9tIGEgZ2VuZXJhdG9yKSB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIGZ1bmN0aW9uKiBnZW5lcmF0ZURvdWJsZXMoc2VlZCkge1xuICAgICAqICAgdmFyIGkgPSBzZWVkO1xuICAgICAqICAgd2hpbGUgKHRydWUpIHtcbiAgICAgKiAgICAgeWllbGQgaTtcbiAgICAgKiAgICAgaSA9IDIgKiBpOyAvLyBkb3VibGUgaXRcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgaXRlcmF0b3IgPSBnZW5lcmF0ZURvdWJsZXMoMyk7XG4gICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUuZnJvbShpdGVyYXRvcikudGFrZSgxMCk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tRXZlbnR9XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50UGF0dGVybn1cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tUHJvbWlzZX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2YWJsZUlucHV0PFQ+fSBpc2ggQSBzdWJzY3JpYmFibGUgb2JqZWN0LCBhIFByb21pc2UsIGFuXG4gICAgICogT2JzZXJ2YWJsZS1saWtlLCBhbiBBcnJheSwgYW4gaXRlcmFibGUgb3IgYW4gYXJyYXktbGlrZSBvYmplY3QgdG8gYmVcbiAgICAgKiBjb252ZXJ0ZWQuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih4OiBhbnksIGk6IG51bWJlcik6IFR9IFttYXBGbl0gQSBcIm1hcFwiIGZ1bmN0aW9uIHRvIGNhbGxcbiAgICAgKiB3aGVuIGNvbnZlcnRpbmcgYXJyYXktbGlrZSBvYmplY3RzLCB3aGVyZSBgeGAgaXMgYSB2YWx1ZSBmcm9tIHRoZVxuICAgICAqIGFycmF5LWxpa2UgYW5kIGBpYCBpcyB0aGUgaW5kZXggb2YgdGhhdCB2YWx1ZSBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBUaGUgY29udGV4dCBvYmplY3QgdG8gdXNlIHdoZW4gY2FsbGluZyB0aGUgYG1hcEZuYCxcbiAgICAgKiBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAgICAgKiBlbWlzc2lvbnMgb2YgdmFsdWVzLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IFRoZSBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmUgb3JpZ2luYWxseSBmcm9tIHRoZVxuICAgICAqIGlucHV0IG9iamVjdCB0aGF0IHdhcyBjb252ZXJ0ZWQuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRnJvbU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGlzaCwgbWFwRm5PclNjaGVkdWxlciwgdGhpc0FyZywgbGFzdFNjaGVkdWxlcikge1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgdmFyIG1hcEZuID0gbnVsbDtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKG1hcEZuT3JTY2hlZHVsZXIpKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIgPSBsYXN0U2NoZWR1bGVyIHx8IG51bGw7XG4gICAgICAgICAgICBtYXBGbiA9IG1hcEZuT3JTY2hlZHVsZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIgPSBtYXBGbk9yU2NoZWR1bGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc2hbJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGlmIChpc2ggaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSAmJiAhc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNBcnJheV8xLmlzQXJyYXkoaXNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUHJvbWlzZV8xLmlzUHJvbWlzZShpc2gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpc2hbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgaXNoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlXzEuSXRlcmF0b3JPYnNlcnZhYmxlKGlzaCwgbnVsbCwgbnVsbCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlKGlzaCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlrZU9ic2VydmFibGVfMS5BcnJheUxpa2VPYnNlcnZhYmxlKGlzaCwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigoaXNoICE9PSBudWxsICYmIHR5cGVvZiBpc2ggfHwgaXNoKSArICcgaXMgbm90IG9ic2VydmFibGUnKTtcbiAgICB9O1xuICAgIEZyb21PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGlzaCA9IHRoaXMuaXNoO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzaFskJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlzaFskJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKG5ldyBvYnNlcnZlT25fMS5PYnNlcnZlT25TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgMCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRnJvbU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkZyb21PYnNlcnZhYmxlID0gRnJvbU9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Gcm9tT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRnJvbU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9yb290Jyk7XG52YXIgaXNPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNPYmplY3QnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBpc0Z1bmN0aW9uXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzRnVuY3Rpb24nKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL2l0ZXJhdG9yJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgSXRlcmF0b3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSXRlcmF0b3JPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEl0ZXJhdG9yT2JzZXJ2YWJsZShpdGVyYXRvciwgcHJvamVjdCwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoaXRlcmF0b3IgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpdGVyYXRvciBjYW5ub3QgYmUgbnVsbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNPYmplY3RfMS5pc09iamVjdChwcm9qZWN0KSkge1xuICAgICAgICAgICAgdGhpcy50aGlzQXJnID0gcHJvamVjdDtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gdGhpc0FyZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihwcm9qZWN0KSkge1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm9qZWN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2hlbiBwcm92aWRlZCwgYHByb2plY3RgIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZXJhdG9yID0gZ2V0SXRlcmF0b3IoaXRlcmF0b3IpO1xuICAgIH1cbiAgICBJdGVyYXRvck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBwcm9qZWN0LCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvck9ic2VydmFibGUoaXRlcmF0b3IsIHByb2plY3QsIHRoaXNBcmcsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBJdGVyYXRvck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIGhhc0Vycm9yID0gc3RhdGUuaGFzRXJyb3IsIHRoaXNBcmcgPSBzdGF0ZS50aGlzQXJnLCBwcm9qZWN0ID0gc3RhdGUucHJvamVjdCwgaXRlcmF0b3IgPSBzdGF0ZS5pdGVyYXRvciwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihzdGF0ZS5lcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2gocHJvamVjdCkuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGl0ZXJhdG9yID0gX2EuaXRlcmF0b3IsIHByb2plY3QgPSBfYS5wcm9qZWN0LCB0aGlzQXJnID0gX2EudGhpc0FyZywgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwgdGhpc0FyZzogdGhpc0FyZywgcHJvamVjdDogcHJvamVjdCwgaXRlcmF0b3I6IGl0ZXJhdG9yLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2gocHJvamVjdCkuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIGluZGV4KyspO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEl0ZXJhdG9yT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuSXRlcmF0b3JPYnNlcnZhYmxlID0gSXRlcmF0b3JPYnNlcnZhYmxlO1xudmFyIFN0cmluZ0l0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdHJpbmdJdGVyYXRvcihzdHIsIGlkeCwgbGVuKSB7XG4gICAgICAgIGlmIChpZHggPT09IHZvaWQgMCkgeyBpZHggPSAwOyB9XG4gICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSBzdHIubGVuZ3RoOyB9XG4gICAgICAgIHRoaXMuc3RyID0gc3RyO1xuICAgICAgICB0aGlzLmlkeCA9IGlkeDtcbiAgICAgICAgdGhpcy5sZW4gPSBsZW47XG4gICAgfVxuICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHRoaXMpOyB9O1xuICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZHggPCB0aGlzLmxlbiA/IHtcbiAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RyLmNoYXJBdCh0aGlzLmlkeCsrKVxuICAgICAgICB9IDoge1xuICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBTdHJpbmdJdGVyYXRvcjtcbn0oKSk7XG52YXIgQXJyYXlJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXJyYXlJdGVyYXRvcihhcnIsIGlkeCwgbGVuKSB7XG4gICAgICAgIGlmIChpZHggPT09IHZvaWQgMCkgeyBpZHggPSAwOyB9XG4gICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSB0b0xlbmd0aChhcnIpOyB9XG4gICAgICAgIHRoaXMuYXJyID0gYXJyO1xuICAgICAgICB0aGlzLmlkeCA9IGlkeDtcbiAgICAgICAgdGhpcy5sZW4gPSBsZW47XG4gICAgfVxuICAgIEFycmF5SXRlcmF0b3IucHJvdG90eXBlW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIEFycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkeCA8IHRoaXMubGVuID8ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5hcnJbdGhpcy5pZHgrK11cbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlJdGVyYXRvcjtcbn0oKSk7XG5mdW5jdGlvbiBnZXRJdGVyYXRvcihvYmopIHtcbiAgICB2YXIgaSA9IG9ialtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdO1xuICAgIGlmICghaSAmJiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbmV3IFN0cmluZ0l0ZXJhdG9yKG9iaik7XG4gICAgfVxuICAgIGlmICghaSAmJiBvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheUl0ZXJhdG9yKG9iaik7XG4gICAgfVxuICAgIGlmICghaSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QgaXMgbm90IGl0ZXJhYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBvYmpbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSgpO1xufVxudmFyIG1heFNhZmVJbnRlZ2VyID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcbmZ1bmN0aW9uIHRvTGVuZ3RoKG8pIHtcbiAgICB2YXIgbGVuID0gK28ubGVuZ3RoO1xuICAgIGlmIChpc05hTihsZW4pKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAobGVuID09PSAwIHx8ICFudW1iZXJJc0Zpbml0ZShsZW4pKSB7XG4gICAgICAgIHJldHVybiBsZW47XG4gICAgfVxuICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG4gICAgaWYgKGxlbiA8PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAobGVuID4gbWF4U2FmZUludGVnZXIpIHtcbiAgICAgICAgcmV0dXJuIG1heFNhZmVJbnRlZ2VyO1xuICAgIH1cbiAgICByZXR1cm4gbGVuO1xufVxuZnVuY3Rpb24gbnVtYmVySXNGaW5pdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiByb290XzEucm9vdC5pc0Zpbml0ZSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBzaWduKHZhbHVlKSB7XG4gICAgdmFyIHZhbHVlQXNOdW1iZXIgPSArdmFsdWU7XG4gICAgaWYgKHZhbHVlQXNOdW1iZXIgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG4gICAgfVxuICAgIGlmIChpc05hTih2YWx1ZUFzTnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gdmFsdWVBc051bWJlcjtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlQXNOdW1iZXIgPCAwID8gLTEgOiAxO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SXRlcmF0b3JPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9JdGVyYXRvck9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFycmF5TGlrZU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJyYXlMaWtlT2JzZXJ2YWJsZShhcnJheUxpa2UsIG1hcEZuLCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXlMaWtlID0gYXJyYXlMaWtlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgaWYgKCFtYXBGbiAmJiAhc2NoZWR1bGVyICYmIGFycmF5TGlrZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzU2NhbGFyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhcnJheUxpa2VbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcEZuKSB7XG4gICAgICAgICAgICB0aGlzLm1hcEZuID0gbWFwRm4uYmluZCh0aGlzQXJnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBcnJheUxpa2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcnJheUxpa2UsIG1hcEZuLCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoID09PSAxICYmICFtYXBGbikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTY2FsYXJPYnNlcnZhYmxlXzEuU2NhbGFyT2JzZXJ2YWJsZShhcnJheUxpa2VbMF0sIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgYXJyYXlMaWtlID0gc3RhdGUuYXJyYXlMaWtlLCBpbmRleCA9IHN0YXRlLmluZGV4LCBsZW5ndGggPSBzdGF0ZS5sZW5ndGgsIG1hcEZuID0gc3RhdGUubWFwRm4sIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCA+PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gbWFwRm4gPyBtYXBGbihhcnJheUxpa2VbaW5kZXhdLCBpbmRleCkgOiBhcnJheUxpa2VbaW5kZXhdO1xuICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcbiAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuICAgIH07XG4gICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGFycmF5TGlrZSA9IF9hLmFycmF5TGlrZSwgbWFwRm4gPSBfYS5tYXBGbiwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShBcnJheUxpa2VPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgYXJyYXlMaWtlOiBhcnJheUxpa2UsIGluZGV4OiBpbmRleCwgbGVuZ3RoOiBsZW5ndGgsIG1hcEZuOiBtYXBGbiwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aCAmJiAhc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2ldLCBpKSA6IGFycmF5TGlrZVtpXTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFycmF5TGlrZU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkFycmF5TGlrZU9ic2VydmFibGUgPSBBcnJheUxpa2VPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlMaWtlT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvQXJyYXlMaWtlT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgTm90aWZpY2F0aW9uXzEgPSByZXF1aXJlKCcuLi9Ob3RpZmljYXRpb24nKTtcbi8qKlxuICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuICpcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEBwYXJhbSBkZWxheVxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIG9ic2VydmVPblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gb2JzZXJ2ZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBPYnNlcnZlT25PcGVyYXRvcihzY2hlZHVsZXIsIGRlbGF5KSk7XG59XG5leHBvcnRzLm9ic2VydmVPbiA9IG9ic2VydmVPbjtcbnZhciBPYnNlcnZlT25PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICB9XG4gICAgT2JzZXJ2ZU9uT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNjaGVkdWxlciwgdGhpcy5kZWxheSkpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmVPbk9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uT3BlcmF0b3IgPSBPYnNlcnZlT25PcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9ic2VydmVPblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZU9uU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc2NoZWR1bGVyLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgIH1cbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gYXJnLm5vdGlmaWNhdGlvbiwgZGVzdGluYXRpb24gPSBhcmcuZGVzdGluYXRpb247XG4gICAgICAgIG5vdGlmaWNhdGlvbi5vYnNlcnZlKGRlc3RpbmF0aW9uKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTWVzc2FnZSA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwgbmV3IE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCB0aGlzLmRlc3RpbmF0aW9uKSkpO1xuICAgIH07XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGVycikpO1xuICAgIH07XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2ZU9uU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IE9ic2VydmVPblN1YnNjcmliZXI7XG52YXIgT2JzZXJ2ZU9uTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgfVxuICAgIHJldHVybiBPYnNlcnZlT25NZXNzYWdlO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uTWVzc2FnZSA9IE9ic2VydmVPbk1lc3NhZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9vYnNlcnZlT24uanNcbiAqKiBtb2R1bGUgaWQgPSAzNjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vT2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHVzaC1iYXNlZCBldmVudCBvciB2YWx1ZSB0aGF0IGFuIHtAbGluayBPYnNlcnZhYmxlfSBjYW4gZW1pdC5cbiAqIFRoaXMgY2xhc3MgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igb3BlcmF0b3JzIHRoYXQgbWFuYWdlIG5vdGlmaWNhdGlvbnMsXG4gKiBsaWtlIHtAbGluayBtYXRlcmlhbGl6ZX0sIHtAbGluayBkZW1hdGVyaWFsaXplfSwge0BsaW5rIG9ic2VydmVPbn0sIGFuZFxuICogb3RoZXJzLiBCZXNpZGVzIHdyYXBwaW5nIHRoZSBhY3R1YWwgZGVsaXZlcmVkIHZhbHVlLCBpdCBhbHNvIGFubm90YXRlcyBpdFxuICogd2l0aCBtZXRhZGF0YSBvZiwgZm9yIGluc3RhbmNlLCB3aGF0IHR5cGUgb2YgcHVzaCBtZXNzYWdlIGl0IGlzIChgbmV4dGAsXG4gKiBgZXJyb3JgLCBvciBgY29tcGxldGVgKS5cbiAqXG4gKiBAc2VlIHtAbGluayBtYXRlcmlhbGl6ZX1cbiAqIEBzZWUge0BsaW5rIGRlbWF0ZXJpYWxpemV9XG4gKiBAc2VlIHtAbGluayBvYnNlcnZlT259XG4gKlxuICogQGNsYXNzIE5vdGlmaWNhdGlvbjxUPlxuICovXG52YXIgTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oa2luZCwgdmFsdWUsIGV4Y2VwdGlvbikge1xuICAgICAgICB0aGlzLmtpbmQgPSBraW5kO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZXhjZXB0aW9uID0gZXhjZXB0aW9uO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0ga2luZCA9PT0gJ04nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxpdmVycyB0byB0aGUgZ2l2ZW4gYG9ic2VydmVyYCB0aGUgdmFsdWUgd3JhcHBlZCBieSB0aGlzIE5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlclxuICAgICAqIEByZXR1cm5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5uZXh0ICYmIG9ic2VydmVyLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IgJiYgb2JzZXJ2ZXIuZXJyb3IodGhpcy5leGNlcHRpb24pO1xuICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmNvbXBsZXRlICYmIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdpdmVuIHNvbWUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFja3MsIGRlbGl2ZXIgdGhlIHZhbHVlIHJlcHJlc2VudGVkIGJ5IHRoZVxuICAgICAqIGN1cnJlbnQgTm90aWZpY2F0aW9uIHRvIHRoZSBjb3JyZWN0bHkgY29ycmVzcG9uZGluZyBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dCBBbiBPYnNlcnZlciBgbmV4dGAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihlcnI6IGFueSk6IHZvaWR9IFtlcnJvcl0gQW4gT2JzZXJ2ZXIgYGVycm9yYCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gQW4gT2JzZXJ2ZXIgYGNvbXBsZXRlYCBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5kbyA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7XG4gICAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICAgICAgY2FzZSAnTic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQgJiYgbmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvciAmJiBlcnJvcih0aGlzLmV4Y2VwdGlvbik7XG4gICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGUgJiYgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVGFrZXMgYW4gT2JzZXJ2ZXIgb3IgaXRzIGluZGl2aWR1YWwgY2FsbGJhY2sgZnVuY3Rpb25zLCBhbmQgY2FsbHMgYG9ic2VydmVgXG4gICAgICogb3IgYGRvYCBtZXRob2RzIGFjY29yZGluZ2x5LlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ8ZnVuY3Rpb24odmFsdWU6IFQpOiB2b2lkfSBuZXh0T3JPYnNlcnZlciBBbiBPYnNlcnZlciBvclxuICAgICAqIHRoZSBgbmV4dGAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihlcnI6IGFueSk6IHZvaWR9IFtlcnJvcl0gQW4gT2JzZXJ2ZXIgYGVycm9yYCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gQW4gT2JzZXJ2ZXIgYGNvbXBsZXRlYCBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbiAobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgJiYgdHlwZW9mIG5leHRPck9ic2VydmVyLm5leHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmUobmV4dE9yT2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG8obmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IGp1c3QgZGVsaXZlcnMgdGhlIG5vdGlmaWNhdGlvbiByZXByZXNlbnRlZFxuICAgICAqIGJ5IHRoaXMgTm90aWZpY2F0aW9uIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge2FueX1cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7XG4gICAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICAgICAgY2FzZSAnTic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm9mKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRocm93KHRoaXMuZXhjZXB0aW9uKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgbmV4dGAgZnJvbSBhXG4gICAgICogZ2l2ZW4gdmFsdWUuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBUaGUgYG5leHRgIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxUPn0gVGhlIFwibmV4dFwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG4gICAgICogYXJndW1lbnQuXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdOJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGVycm9yYCBmcm9tIGFcbiAgICAgKiBnaXZlbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXhjZXB0aW9uLlxuICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxUPn0gVGhlIFwiZXJyb3JcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb24oJ0UnLCB1bmRlZmluZWQsIGVycik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgY29tcGxldGVgLlxuICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxhbnk+fSBUaGUgdmFsdWVsZXNzIFwiY29tcGxldGVcIiBOb3RpZmljYXRpb24uXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZU5vdGlmaWNhdGlvbjtcbiAgICB9O1xuICAgIE5vdGlmaWNhdGlvbi5jb21wbGV0ZU5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oJ0MnKTtcbiAgICBOb3RpZmljYXRpb24udW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdOJywgdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gTm90aWZpY2F0aW9uO1xufSgpKTtcbmV4cG9ydHMuTm90aWZpY2F0aW9uID0gTm90aWZpY2F0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm90aWZpY2F0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvTm90aWZpY2F0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMzYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZnJvbUV2ZW50XzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb21FdmVudCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnJvbUV2ZW50XzEuZnJvbUV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50LmpzXG4gKiogbW9kdWxlIGlkID0gMzYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGcm9tRXZlbnRPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0Zyb21FdmVudE9ic2VydmFibGUnKTtcbmV4cG9ydHMuZnJvbUV2ZW50ID0gRnJvbUV2ZW50T2JzZXJ2YWJsZV8xLkZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnQuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xuZnVuY3Rpb24gaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikge1xuICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLmFkZExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3VyY2VPYmoucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikge1xuICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLm9uID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3VyY2VPYmoub2ZmID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gaXNOb2RlTGlzdChzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgc291cmNlT2JqLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE5vZGVMaXN0XSc7XG59XG5mdW5jdGlvbiBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikge1xuICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiBzb3VyY2VPYmoudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJztcbn1cbmZ1bmN0aW9uIGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSB7XG4gICAgcmV0dXJuICEhc291cmNlT2JqICYmIHR5cGVvZiBzb3VyY2VPYmouYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbic7XG59XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEZyb21FdmVudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZyb21FdmVudE9ic2VydmFibGUoc291cmNlT2JqLCBldmVudE5hbWUsIHNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZU9iaiA9IHNvdXJjZU9iajtcbiAgICAgICAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgZXZlbnRzIG9mIGEgc3BlY2lmaWMgdHlwZSBjb21pbmcgZnJvbSB0aGVcbiAgICAgKiBnaXZlbiBldmVudCB0YXJnZXQuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q3JlYXRlcyBhbiBPYnNlcnZhYmxlIGZyb20gRE9NIGV2ZW50cywgb3IgTm9kZVxuICAgICAqIEV2ZW50RW1pdHRlciBldmVudHMgb3Igb3RoZXJzLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZnJvbUV2ZW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGJ5IGF0dGFjaGluZyBhbiBldmVudCBsaXN0ZW5lciB0byBhbiBcImV2ZW50IHRhcmdldFwiLFxuICAgICAqIHdoaWNoIG1heSBiZSBhbiBvYmplY3Qgd2l0aCBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kIGByZW1vdmVFdmVudExpc3RlbmVyYCxcbiAgICAgKiBhIE5vZGUuanMgRXZlbnRFbWl0dGVyLCBhIGpRdWVyeSBzdHlsZSBFdmVudEVtaXR0ZXIsIGEgTm9kZUxpc3QgZnJvbSB0aGVcbiAgICAgKiBET00sIG9yIGFuIEhUTUxDb2xsZWN0aW9uIGZyb20gdGhlIERPTS4gVGhlIGV2ZW50IGhhbmRsZXIgaXMgYXR0YWNoZWQgd2hlblxuICAgICAqIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBzdWJzY3JpYmVkLCBhbmQgcmVtb3ZlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gaXNcbiAgICAgKiB1bnN1YnNjcmliZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBjbGlja3MgaGFwcGVuaW5nIG9uIHRoZSBET00gZG9jdW1lbnQ8L2NhcHRpb24+XG4gICAgICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAgICAgKiBjbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgZnJvbX1cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tRXZlbnRQYXR0ZXJufVxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldExpa2V9IHRhcmdldCBUaGUgRE9NRWxlbWVudCwgZXZlbnQgdGFyZ2V0LCBOb2RlLmpzXG4gICAgICogRXZlbnRFbWl0dGVyLCBOb2RlTGlzdCBvciBIVE1MQ29sbGVjdGlvbiB0byBhdHRhY2ggdGhlIGV2ZW50IGhhbmRsZXIgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSBvZiBpbnRlcmVzdCwgYmVpbmcgZW1pdHRlZCBieSB0aGVcbiAgICAgKiBgdGFyZ2V0YC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFyZ3M6IGFueSk6IFR9IFtzZWxlY3Rvcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG9cbiAgICAgKiBwb3N0LXByb2Nlc3MgcmVzdWx0cy4gSXQgdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBldmVudCBoYW5kbGVyIGFuZFxuICAgICAqIHNob3VsZCByZXR1cm4gYSBzaW5nbGUgdmFsdWUuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn1cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBmcm9tRXZlbnRcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHRhcmdldCwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gbmV3IEZyb21FdmVudE9ic2VydmFibGUodGFyZ2V0LCBldmVudE5hbWUsIHNlbGVjdG9yKTtcbiAgICB9O1xuICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc291cmNlT2JqLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlO1xuICAgICAgICBpZiAoaXNOb2RlTGlzdChzb3VyY2VPYmopIHx8IGlzSFRNTENvbGxlY3Rpb24oc291cmNlT2JqKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZU9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24oc291cmNlT2JqW2ldLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSkge1xuICAgICAgICAgICAgc291cmNlT2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikpIHtcbiAgICAgICAgICAgIHNvdXJjZU9iai5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzb3VyY2VPYmoub2ZmKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikpIHtcbiAgICAgICAgICAgIHNvdXJjZU9iai5hZGRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzb3VyY2VPYmoucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSk7XG4gICAgfTtcbiAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZU9iaiA9IHRoaXMuc291cmNlT2JqO1xuICAgICAgICB2YXIgZXZlbnROYW1lID0gdGhpcy5ldmVudE5hbWU7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG4gICAgICAgIHZhciBoYW5kbGVyID0gc2VsZWN0b3IgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gc3Vic2NyaWJlci5uZXh0KGUpOyB9O1xuICAgICAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnNldHVwU3Vic2NyaXB0aW9uKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBoYW5kbGVyLCBzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBGcm9tRXZlbnRPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Gcm9tRXZlbnRPYnNlcnZhYmxlID0gRnJvbUV2ZW50T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21FdmVudE9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21FdmVudE9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmcm9tRXZlbnRQYXR0ZXJuXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4gPSBmcm9tRXZlbnRQYXR0ZXJuXzEuZnJvbUV2ZW50UGF0dGVybjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudFBhdHRlcm4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzXG4gKiogbW9kdWxlIGlkID0gMzY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5mcm9tRXZlbnRQYXR0ZXJuID0gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVfMS5Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzXG4gKiogbW9kdWxlIGlkID0gMzY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5hZGRIYW5kbGVyID0gYWRkSGFuZGxlcjtcbiAgICAgICAgdGhpcy5yZW1vdmVIYW5kbGVyID0gcmVtb3ZlSGFuZGxlcjtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBUEkgYmFzZWQgb24gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyXG4gICAgICogZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFueSBhZGRIYW5kbGVyL3JlbW92ZUhhbmRsZXIgQVBJIHRvIGFuXG4gICAgICogT2JzZXJ2YWJsZS48L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudFBhdHRlcm4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgYnkgdXNpbmcgdGhlIGBhZGRIYW5kbGVyYCBhbmQgYHJlbW92ZUhhbmRsZXJgXG4gICAgICogZnVuY3Rpb25zIHRvIGFkZCBhbmQgcmVtb3ZlIHRoZSBoYW5kbGVycywgd2l0aCBhbiBvcHRpb25hbCBzZWxlY3RvclxuICAgICAqIGZ1bmN0aW9uIHRvIHByb2plY3QgdGhlIGV2ZW50IGFyZ3VtZW50cyB0byBhIHJlc3VsdC4gVGhlIGBhZGRIYW5kbGVyYCBpc1xuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBzdWJzY3JpYmVkLCBhbmQgYHJlbW92ZUhhbmRsZXJgIGlzXG4gICAgICogY2FsbGVkIHdoZW4gdGhlIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBjbGlja3MgaGFwcGVuaW5nIG9uIHRoZSBET00gZG9jdW1lbnQ8L2NhcHRpb24+XG4gICAgICogZnVuY3Rpb24gYWRkQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgKiAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlcik7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gcmVtb3ZlQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgKiAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlcik7XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybihcbiAgICAgKiAgIGFkZENsaWNrSGFuZGxlcixcbiAgICAgKiAgIHJlbW92ZUNsaWNrSGFuZGxlclxuICAgICAqICk7XG4gICAgICogY2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGZyb219XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihoYW5kbGVyOiBGdW5jdGlvbik6IGFueX0gYWRkSGFuZGxlciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXNcbiAgICAgKiBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgYXR0YWNoZXMgaXQgc29tZWhvdyB0byB0aGUgYWN0dWFsXG4gICAgICogc291cmNlIG9mIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGhhbmRsZXI6IEZ1bmN0aW9uKTogdm9pZH0gcmVtb3ZlSGFuZGxlciBBIGZ1bmN0aW9uIHRoYXRcbiAgICAgKiB0YWtlcyBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgcmVtb3ZlcyBpdCBpbiBjYXNlIGl0IHdhc1xuICAgICAqIHByZXZpb3VzbHkgYXR0YWNoZWQgdXNpbmcgYGFkZEhhbmRsZXJgLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYXJnczogYW55KTogVH0gW3NlbGVjdG9yXSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0b1xuICAgICAqIHBvc3QtcHJvY2VzcyByZXN1bHRzLiBJdCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgYW5kXG4gICAgICogc2hvdWxkIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fVxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGZyb21FdmVudFBhdHRlcm5cbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gbmV3IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKTtcbiAgICB9O1xuICAgIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGFkZEhhbmRsZXIgPSB0aGlzLmFkZEhhbmRsZXI7XG4gICAgICAgIHZhciByZW1vdmVIYW5kbGVyID0gdGhpcy5yZW1vdmVIYW5kbGVyO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yO1xuICAgICAgICB2YXIgaGFuZGxlciA9IHNlbGVjdG9yID8gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IocmVzdWx0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gOiBmdW5jdGlvbiAoZSkgeyBzdWJzY3JpYmVyLm5leHQoZSk7IH07XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGFkZEhhbmRsZXIpKGhhbmRsZXIpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHJlc3VsdC5lKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vVE9ETzogZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHRvIGZvcndhcmQgdG8gZXJyb3IgaGFuZGxlclxuICAgICAgICAgICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgcmV0dXJuIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSA9IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZnJvbVByb21pc2VfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZnJvbVByb21pc2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb21Qcm9taXNlID0gZnJvbVByb21pc2VfMS5mcm9tUHJvbWlzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21Qcm9taXNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbVByb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFByb21pc2VPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1Byb21pc2VPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZyb21Qcm9taXNlID0gUHJvbWlzZU9ic2VydmFibGVfMS5Qcm9taXNlT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tUHJvbWlzZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZnJvbVByb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBHZW5lcmF0ZU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvR2VuZXJhdGVPYnNlcnZhYmxlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5nZW5lcmF0ZSA9IEdlbmVyYXRlT2JzZXJ2YWJsZV8xLkdlbmVyYXRlT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZW5lcmF0ZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2dlbmVyYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMzcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIHNlbGZTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEdlbmVyYXRlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdlbmVyYXRlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHZW5lcmF0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbFN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICAgICAgdGhpcy5pdGVyYXRlID0gaXRlcmF0ZTtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgR2VuZXJhdGVPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGVPck9wdGlvbnMuaW5pdGlhbFN0YXRlLCBpbml0aWFsU3RhdGVPck9wdGlvbnMuY29uZGl0aW9uLCBpbml0aWFsU3RhdGVPck9wdGlvbnMuaXRlcmF0ZSwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLnJlc3VsdFNlbGVjdG9yIHx8IHNlbGZTZWxlY3RvciwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLnNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlID09PSB1bmRlZmluZWQgfHwgaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihyZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZU9yT3B0aW9ucywgY29uZGl0aW9uLCBpdGVyYXRlLCBzZWxmU2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBHZW5lcmF0ZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmluaXRpYWxTdGF0ZTtcbiAgICAgICAgaWYgKHRoaXMuc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoR2VuZXJhdGVPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcjogc3Vic2NyaWJlcixcbiAgICAgICAgICAgICAgICBpdGVyYXRlOiB0aGlzLml0ZXJhdGUsXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiB0aGlzLmNvbmRpdGlvbixcbiAgICAgICAgICAgICAgICByZXN1bHRTZWxlY3RvcjogdGhpcy5yZXN1bHRTZWxlY3RvcixcbiAgICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgY29uZGl0aW9uID0gX2EuY29uZGl0aW9uLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCBpdGVyYXRlID0gX2EuaXRlcmF0ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb25SZXN1bHQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gY29uZGl0aW9uKHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0U2VsZWN0b3Ioc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBpdGVyYXRlKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICB9O1xuICAgIEdlbmVyYXRlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIGNvbmRpdGlvbiA9IHN0YXRlLmNvbmRpdGlvbjtcbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUubmVlZEl0ZXJhdGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuc3RhdGUgPSBzdGF0ZS5pdGVyYXRlKHN0YXRlLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUubmVlZEl0ZXJhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25SZXN1bHQgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvblJlc3VsdCA9IGNvbmRpdGlvbihzdGF0ZS5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29uZGl0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhbHVlID0gc3RhdGUucmVzdWx0U2VsZWN0b3Ioc3RhdGUuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuICAgIH07XG4gICAgcmV0dXJuIEdlbmVyYXRlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuR2VuZXJhdGVPYnNlcnZhYmxlID0gR2VuZXJhdGVPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VuZXJhdGVPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9HZW5lcmF0ZU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBpbnRlcnZhbF8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9pbnRlcnZhbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuaW50ZXJ2YWwgPSBpbnRlcnZhbF8xLmludGVydmFsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJ2YWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9pbnRlcnZhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDM3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgSW50ZXJ2YWxPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0ludGVydmFsT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5pbnRlcnZhbCA9IEludGVydmFsT2JzZXJ2YWJsZV8xLkludGVydmFsT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvaW50ZXJ2YWwuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgaXNOdW1lcmljXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzTnVtZXJpYycpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEludGVydmFsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEludGVydmFsT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJbnRlcnZhbE9ic2VydmFibGUocGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHBlcmlvZCA9PT0gdm9pZCAwKSB7IHBlcmlvZCA9IDA7IH1cbiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucGVyaW9kID0gcGVyaW9kO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgaWYgKCFpc051bWVyaWNfMS5pc051bWVyaWMocGVyaW9kKSB8fCBwZXJpb2QgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnBlcmlvZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNlcXVlbnRpYWwgbnVtYmVycyBldmVyeSBzcGVjaWZpZWRcbiAgICAgKiBpbnRlcnZhbCBvZiB0aW1lLCBvbiBhIHNwZWNpZmllZCBTY2hlZHVsZXIuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RW1pdHMgaW5jcmVtZW50YWwgbnVtYmVycyBwZXJpb2RpY2FsbHkgaW4gdGltZS5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2ludGVydmFsLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogYGludGVydmFsYCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbiBpbmZpbml0ZSBzZXF1ZW5jZSBvZlxuICAgICAqIGFzY2VuZGluZyBpbnRlZ2Vycywgd2l0aCBhIGNvbnN0YW50IGludGVydmFsIG9mIHRpbWUgb2YgeW91ciBjaG9vc2luZ1xuICAgICAqIGJldHdlZW4gdGhvc2UgZW1pc3Npb25zLiBUaGUgZmlyc3QgZW1pc3Npb24gaXMgbm90IHNlbnQgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAqIG9ubHkgYWZ0ZXIgdGhlIGZpcnN0IHBlcmlvZCBoYXMgcGFzc2VkLiBCeSBkZWZhdWx0LCB0aGlzIG9wZXJhdG9yIHVzZXMgdGhlXG4gICAgICogYGFzeW5jYCBTY2hlZHVsZXIgdG8gcHJvdmlkZSBhIG5vdGlvbiBvZiB0aW1lLCBidXQgeW91IG1heSBwYXNzIGFueVxuICAgICAqIFNjaGVkdWxlciB0byBpdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIGFzY2VuZGluZyBudW1iZXJzLCBvbmUgZXZlcnkgc2Vjb25kICgxMDAwbXMpPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHRpbWVyfVxuICAgICAqIEBzZWUge0BsaW5rIGRlbGF5fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwZXJpb2Q9MF0gVGhlIGludGVydmFsIHNpemUgaW4gbWlsbGlzZWNvbmRzIChieSBkZWZhdWx0KVxuICAgICAqIG9yIHRoZSB0aW1lIHVuaXQgZGV0ZXJtaW5lZCBieSB0aGUgc2NoZWR1bGVyJ3MgY2xvY2suXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9uIG9mIHZhbHVlcywgYW5kIHByb3ZpZGluZyBhIG5vdGlvbiBvZiBcInRpbWVcIi5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW50aWFsIG51bWJlciBlYWNoIHRpbWVcbiAgICAgKiBpbnRlcnZhbC5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBpbnRlcnZhbFxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgSW50ZXJ2YWxPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAocGVyaW9kID09PSB2b2lkIDApIHsgcGVyaW9kID0gMDsgfVxuICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgICAgICByZXR1cm4gbmV3IEludGVydmFsT2JzZXJ2YWJsZShwZXJpb2QsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBJbnRlcnZhbE9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwZXJpb2QgPSBzdGF0ZS5wZXJpb2Q7XG4gICAgICAgIHN1YnNjcmliZXIubmV4dChpbmRleCk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuaW5kZXggKz0gMTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgcGVyaW9kKTtcbiAgICB9O1xuICAgIEludGVydmFsT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBwZXJpb2QgPSB0aGlzLnBlcmlvZDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBzdWJzY3JpYmVyLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoSW50ZXJ2YWxPYnNlcnZhYmxlLmRpc3BhdGNoLCBwZXJpb2QsIHtcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgcGVyaW9kOiBwZXJpb2RcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVydmFsT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuSW50ZXJ2YWxPYnNlcnZhYmxlID0gSW50ZXJ2YWxPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZXJ2YWxPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9JbnRlcnZhbE9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xuZnVuY3Rpb24gaXNOdW1lcmljKHZhbCkge1xuICAgIC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChudWxsfHRydWV8ZmFsc2V8XCJcIilcbiAgICAvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG4gICAgLy8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG4gICAgLy8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApXG4gICAgcmV0dXJuICFpc0FycmF5XzEuaXNBcnJheSh2YWwpICYmICh2YWwgLSBwYXJzZUZsb2F0KHZhbCkgKyAxKSA+PSAwO1xufVxuZXhwb3J0cy5pc051bWVyaWMgPSBpc051bWVyaWM7XG47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc051bWVyaWMuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2lzTnVtZXJpYy5qc1xuICoqIG1vZHVsZSBpZCA9IDM3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXN5bmNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4vQXN5bmNTY2hlZHVsZXInKTtcbmV4cG9ydHMuYXN5bmMgPSBuZXcgQXN5bmNTY2hlZHVsZXJfMS5Bc3luY1NjaGVkdWxlcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXN5bmMuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvYXN5bmMuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgRnV0dXJlQWN0aW9uXzEgPSByZXF1aXJlKCcuL0Z1dHVyZUFjdGlvbicpO1xudmFyIFF1ZXVlU2NoZWR1bGVyXzEgPSByZXF1aXJlKCcuL1F1ZXVlU2NoZWR1bGVyJyk7XG52YXIgQXN5bmNTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc3luY1NjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc3luY1NjaGVkdWxlcigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIEFzeW5jU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1dHVyZUFjdGlvbl8xLkZ1dHVyZUFjdGlvbih0aGlzLCB3b3JrKS5zY2hlZHVsZShzdGF0ZSwgMCk7XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNTY2hlZHVsZXI7XG59KFF1ZXVlU2NoZWR1bGVyXzEuUXVldWVTY2hlZHVsZXIpKTtcbmV4cG9ydHMuQXN5bmNTY2hlZHVsZXIgPSBBc3luY1NjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jU2NoZWR1bGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEZ1dHVyZUFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZ1dHVyZUFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGdXR1cmVBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy53b3JrID0gd29yaztcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBuZXcgRXJyb3IoJ2V4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrKHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG4gICAgfTtcbiAgICBGdXR1cmVBY3Rpb24ucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIC8vIEFsd2F5cyByZXBsYWNlIHRoZSBjdXJyZW50IHN0YXRlIHdpdGggdGhlIG5ldyBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAvLyBTZXQgdGhlIHBlbmRpbmcgZmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhpcyBhY3Rpb24gaGFzIGJlZW4gc2NoZWR1bGVkLCBvclxuICAgICAgICAvLyBoYXMgcmVjdXJzaXZlbHkgcmVzY2hlZHVsZWQgaXRzZWxmLlxuICAgICAgICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xuICAgICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuICAgICAgICAvLyBJZiB0aGlzIGFjdGlvbiBoYXMgYW4gaW50ZXJ2YWxJRCBhbmQgdGhlIHNwZWNpZmllZCBkZWxheSBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBkZWxheSB3ZSB1c2VkIHRvIGNyZWF0ZSB0aGUgaW50ZXJ2YWxJRCwgZG9uJ3QgY2FsbCBgc2V0SW50ZXJ2YWxgIGFnYWluLlxuICAgICAgICBpZiAoaWQgIT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBkZWxheSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICAvLyBJZiB0aGlzIGFjdGlvbiBoYXMgYW4gaW50ZXJ2YWxJRCwgYnV0IHdhcyByZXNjaGVkdWxlZCB3aXRoIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIGBkZWxheWAgdGltZSwgY2FuY2VsIHRoZSBjdXJyZW50IGludGVydmFsSUQgYW5kIGNhbGwgYHNldEludGVydmFsYCB3aXRoXG4gICAgICAgIC8vIHRoZSBuZXcgYGRlbGF5YCB0aW1lLlxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IG51bGw7XG4gICAgICAgICAgICByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKTtcbiAgICAgICAgfVxuICAgICAgICAvL1xuICAgICAgICAvLyBJbXBvcnRhbnQgaW1wbGVtZW50YXRpb24gbm90ZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQnkgZGVmYXVsdCwgRnV0dXJlQWN0aW9uIG9ubHkgZXhlY3V0ZXMgb25jZS4gSG93ZXZlciwgQWN0aW9ucyBoYXZlIHRoZVxuICAgICAgICAvLyBhYmlsaXR5IHRvIGJlIHJlc2NoZWR1bGVkIGZyb20gd2l0aGluIHRoZSBzY2hlZHVsZWQgY2FsbGJhY2sgKG1pbWlja2luZ1xuICAgICAgICAvLyByZWN1cnNpb24gZm9yIGFzeW5jaHJvbm91cyBtZXRob2RzKS4gVGhpcyBhbGxvd3MgdXMgdG8gaW1wbGVtZW50IHNpbmdsZVxuICAgICAgICAvLyBhbmQgcmVwZWF0ZWQgYWN0aW9ucyB3aXRoIHRoZSBzYW1lIGNvZGUgcGF0aCB3aXRob3V0IGFkZGluZyBBUEkgc3VyZmFjZVxuICAgICAgICAvLyBhcmVhLCBhbmQgaW1wbGVtZW50IHRhaWwtY2FsbCBvcHRpbWl6YXRpb24gb3ZlciBhc3luY2hyb25vdXMgYm91bmRhcmllcy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSG93ZXZlciwgSlMgcnVudGltZXMgbWFrZSBhIGRpc3RpbmN0aW9uIGJldHdlZW4gaW50ZXJ2YWxzIHNjaGVkdWxlZCBieVxuICAgICAgICAvLyByZXBlYXRlZGx5IGNhbGxpbmcgYHNldFRpbWVvdXRgIHZzLiBhIHNpbmdsZSBgc2V0SW50ZXJ2YWxgIGNhbGwsIHdpdGhcbiAgICAgICAgLy8gdGhlIGxhdHRlciBwcm92aWRpbmcgYSBiZXR0ZXIgZ3VhcmFudGVlIG9mIHByZWNpc2lvbi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjb21tb2RhdGUgYm90aCBzaW5nbGUgYW5kIHJlcGVhdGVkbHkgcmVzY2hlZHVsZWQgYWN0aW9ucyxcbiAgICAgICAgLy8gdXNlIGBzZXRJbnRlcnZhbGAgaGVyZSBmb3IgYm90aCBjYXNlcy4gQnkgZGVmYXVsdCwgdGhlIGludGVydmFsIHdpbGwgYmVcbiAgICAgICAgLy8gY2FuY2VsZWQgYWZ0ZXIgaXRzIGZpcnN0IGV4ZWN1dGlvbiwgb3IgaWYgdGhlIGFjdGlvbiBzY2hlZHVsZXMgaXRzZWxmIHRvXG4gICAgICAgIC8vIHJ1biBhZ2FpbiB3aXRoIGEgZGlmZmVyZW50IGBkZWxheWAgdGltZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhlIGFjdGlvbiByZWN1cnNpdmVseSBzY2hlZHVsZXMgaXRzZWxmIHRvIHJ1biBhZ2FpbiB3aXRoIHRoZSBzYW1lXG4gICAgICAgIC8vIGBkZWxheWAgdGltZSwgdGhlIGludGVydmFsIGlzIG5vdCBjYW5jZWxlZCwgYnV0IGFsbG93ZWQgdG8gbG9vcCBhZ2Fpbi5cbiAgICAgICAgLy8gVGhlIGNoZWNrIG9mIHdoZXRoZXIgdGhlIGludGVydmFsIHNob3VsZCBiZSBjYW5jZWxlZCBvciBub3QgaXMgcnVuIGV2ZXJ5XG4gICAgICAgIC8vIHRpbWUgdGhlIGludGVydmFsIGlzIGV4ZWN1dGVkLiBUaGUgZmlyc3QgdGltZSBhbiBhY3Rpb24gZmFpbHMgdG9cbiAgICAgICAgLy8gcmVzY2hlZHVsZSBpdHNlbGYsIHRoZSBpbnRlcnZhbCBpcyBjYW5jZWxlZC5cbiAgICAgICAgLy9cbiAgICAgICAgdGhpcy5pZCA9IHJvb3RfMS5yb290LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLCBpZCA9IF9hLmlkLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG4gICAgICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKF90aGlzKTtcbiAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFRlcm1pbmF0ZSB0aGlzIGludGVydmFsIGlmIHRoZSBhY3Rpb24gZGlkbid0IHJlc2NoZWR1bGUgaXRzZWxmLlxuICAgICAgICAgICAgLy8gRG9uJ3QgY2FsbCBgdGhpcy51bnN1YnNjcmliZSgpYCBoZXJlLCBiZWNhdXNlIHRoZSBhY3Rpb24gY291bGQgYmVcbiAgICAgICAgICAgIC8vIHJlc2NoZWR1bGVkIGxhdGVyLiBGb3IgZXhhbXBsZTpcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIC8vIHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiBkb1dvcmsoY291bnRlcikge1xuICAgICAgICAgICAgLy8gICAvKiAuLi4gSSdtIGEgYnVzeSB3b3JrZXIgYmVlIC4uLiAqL1xuICAgICAgICAgICAgLy8gICB2YXIgb3JpZ2luYWxBY3Rpb24gPSB0aGlzO1xuICAgICAgICAgICAgLy8gICAvKiB3YWl0IDEwMG1zIGJlZm9yZSByZXNjaGVkdWxpbmcgdGhpcyBhY3Rpb24gYWdhaW4gKi9cbiAgICAgICAgICAgIC8vICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgb3JpZ2luYWxBY3Rpb24uc2NoZWR1bGUoY291bnRlciArIDEpO1xuICAgICAgICAgICAgLy8gICB9LCAxMDApO1xuICAgICAgICAgICAgLy8gfSwgMTAwMCk7XG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIGlmIChfdGhpcy5wZW5kaW5nID09PSBmYWxzZSAmJiBpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBpZCA9IF9hLmlkLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBhY3Rpb25zID0gc2NoZWR1bGVyLmFjdGlvbnM7XG4gICAgICAgIHZhciBpbmRleCA9IGFjdGlvbnMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBudWxsO1xuICAgICAgICAgICAgcm9vdF8xLnJvb3QuY2xlYXJJbnRlcnZhbChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29yayA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gRnV0dXJlQWN0aW9uO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbmV4cG9ydHMuRnV0dXJlQWN0aW9uID0gRnV0dXJlQWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RnV0dXJlQWN0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL0Z1dHVyZUFjdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUXVldWVBY3Rpb25fMSA9IHJlcXVpcmUoJy4vUXVldWVBY3Rpb24nKTtcbnZhciBGdXR1cmVBY3Rpb25fMSA9IHJlcXVpcmUoJy4vRnV0dXJlQWN0aW9uJyk7XG52YXIgUXVldWVTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFF1ZXVlU2NoZWR1bGVyKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSBbXTsgLy8gWFhYOiB1c2UgYGFueWAgdG8gcmVtb3ZlIHR5cGUgcGFyYW0gYFRgIGZyb20gYFZpcnR1YWxUaW1lU2NoZWR1bGVyYC5cbiAgICAgICAgdGhpcy5zY2hlZHVsZWRJZCA9IG51bGw7XG4gICAgfVxuICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5ub3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuICAgIH07XG4gICAgUXVldWVTY2hlZHVsZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgfHwgdGhpcy5zY2hlZHVsZWRJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7XG4gICAgICAgIC8vIFhYWDogdXNlIGBhbnlgIHRvIHJlbW92ZSB0eXBlIHBhcmFtIGBUYCBmcm9tIGBWaXJ0dWFsVGltZVNjaGVkdWxlcmAuXG4gICAgICAgIGZvciAodmFyIGFjdGlvbiA9IG51bGw7IGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKTspIHtcbiAgICAgICAgICAgIGFjdGlvbi5leGVjdXRlKCk7XG4gICAgICAgICAgICBpZiAoYWN0aW9uLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB9O1xuICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIHJldHVybiAoZGVsYXkgPD0gMCkgP1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU5vdyh3b3JrLCBzdGF0ZSkgOlxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUxhdGVyKHdvcmssIGRlbGF5LCBzdGF0ZSk7XG4gICAgfTtcbiAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWV1ZUFjdGlvbl8xLlF1ZXVlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUxhdGVyID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1dHVyZUFjdGlvbl8xLkZ1dHVyZUFjdGlvbih0aGlzLCB3b3JrKS5zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZXVlU2NoZWR1bGVyO1xufSgpKTtcbmV4cG9ydHMuUXVldWVTY2hlZHVsZXIgPSBRdWV1ZVNjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlU2NoZWR1bGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL1F1ZXVlU2NoZWR1bGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEZ1dHVyZUFjdGlvbl8xID0gcmVxdWlyZSgnLi9GdXR1cmVBY3Rpb24nKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUXVldWVBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhRdWV1ZUFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBRdWV1ZUFjdGlvbigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIFF1ZXVlQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2godGhpcyk7XG4gICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBRdWV1ZUFjdGlvbjtcbn0oRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKSk7XG5leHBvcnRzLlF1ZXVlQWN0aW9uID0gUXVldWVBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1RdWV1ZUFjdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9RdWV1ZUFjdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM4MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL21lcmdlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5tZXJnZSA9IG1lcmdlXzEubWVyZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL21lcmdlLmpzXG4gKiogbW9kdWxlIGlkID0gMzgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBtZXJnZV8xID0gcmVxdWlyZSgnLi4vb3BlcmF0b3IvbWVyZ2UnKTtcbmV4cG9ydHMubWVyZ2UgPSBtZXJnZV8xLm1lcmdlU3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL21lcmdlLmpzXG4gKiogbW9kdWxlIGlkID0gMzgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgbWVyZ2VBbGxfMSA9IHJlcXVpcmUoJy4vbWVyZ2VBbGwnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIGNvbmN1cnJlbnRseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcbiAqIGdpdmVuIGlucHV0IE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IGJsZW5kaW5nXG4gKiB0aGVpciB2YWx1ZXMgaW50byBvbmUgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgbWVyZ2VgIHN1YnNjcmliZXMgdG8gZWFjaCBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIChlaXRoZXIgdGhlIHNvdXJjZSBvciBhblxuICogT2JzZXJ2YWJsZSBnaXZlbiBhcyBhcmd1bWVudCksIGFuZCBzaW1wbHkgZm9yd2FyZHMgKHdpdGhvdXQgZG9pbmcgYW55XG4gKiB0cmFuc2Zvcm1hdGlvbikgYWxsIHRoZSB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlucHV0IE9ic2VydmFibGVzIHRvIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IGNvbXBsZXRlcyBvbmNlIGFsbCBpbnB1dCBPYnNlcnZhYmxlc1xuICogaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnkgYW4gaW5wdXQgT2JzZXJ2YWJsZSB3aWxsIGJlIGltbWVkaWF0ZWx5XG4gKiBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciB0d28gT2JzZXJ2YWJsZXM6IDFzIGludGVydmFsIGFuZCBjbGlja3M8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBjbGlja3NPclRpbWVyID0gY2xpY2tzLm1lcmdlKHRpbWVyKTtcbiAqIGNsaWNrc09yVGltZXIuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIDMgT2JzZXJ2YWJsZXMsIGJ1dCBvbmx5IDIgcnVuIGNvbmN1cnJlbnRseTwvY2FwdGlvbj5cbiAqIHZhciB0aW1lcjEgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApO1xuICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcbiAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG4gKiB2YXIgY29uY3VycmVudCA9IDI7IC8vIHRoZSBhcmd1bWVudFxuICogdmFyIG1lcmdlZCA9IHRpbWVyMS5tZXJnZSh0aW1lcjIsIHRpbWVyMywgY29uY3VycmVudCk7XG4gKiBtZXJnZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb3RoZXIgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBtZXJnZSB3aXRoIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcbiAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nXG4gKiBjb25jdXJyZW5jeSBvZiBpbnB1dCBPYnNlcnZhYmxlcy5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyB0aGF0IGFyZSB0aGUgcmVzdWx0IG9mXG4gKiBldmVyeSBpbnB1dCBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBtZXJnZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIG1lcmdlU3RhdGljLmFwcGx5KHRoaXMsIG9ic2VydmFibGVzKTtcbn1cbmV4cG9ydHMubWVyZ2UgPSBtZXJnZTtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggY29uY3VycmVudGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnkgYmxlbmRpbmdcbiAqIHRoZWlyIHZhbHVlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBtZXJnZWAgc3Vic2NyaWJlcyB0byBlYWNoIGdpdmVuIGlucHV0IE9ic2VydmFibGUgKGFzIGFyZ3VtZW50cyksIGFuZCBzaW1wbHlcbiAqIGZvcndhcmRzICh3aXRob3V0IGRvaW5nIGFueSB0cmFuc2Zvcm1hdGlvbikgYWxsIHRoZSB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlucHV0XG4gKiBPYnNlcnZhYmxlcyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IGNvbXBsZXRlc1xuICogb25jZSBhbGwgaW5wdXQgT2JzZXJ2YWJsZXMgaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnkgYW4gaW5wdXRcbiAqIE9ic2VydmFibGUgd2lsbCBiZSBpbW1lZGlhdGVseSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciB0d28gT2JzZXJ2YWJsZXM6IDFzIGludGVydmFsIGFuZCBjbGlja3M8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBjbGlja3NPclRpbWVyID0gUnguT2JzZXJ2YWJsZS5tZXJnZShjbGlja3MsIHRpbWVyKTtcbiAqIGNsaWNrc09yVGltZXIuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIDMgT2JzZXJ2YWJsZXMsIGJ1dCBvbmx5IDIgcnVuIGNvbmN1cnJlbnRseTwvY2FwdGlvbj5cbiAqIHZhciB0aW1lcjEgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApO1xuICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcbiAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG4gKiB2YXIgY29uY3VycmVudCA9IDI7IC8vIHRoZSBhcmd1bWVudFxuICogdmFyIG1lcmdlZCA9IFJ4Lk9ic2VydmFibGUubWVyZ2UodGltZXIxLCB0aW1lcjIsIHRpbWVyMywgY29uY3VycmVudCk7XG4gKiBtZXJnZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQxIEFuIGlucHV0IE9ic2VydmFibGUgdG8gbWVyZ2Ugd2l0aCBvdGhlcnMuXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggb3RoZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcbiAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nXG4gKiBjb25jdXJyZW5jeSBvZiBpbnB1dCBPYnNlcnZhYmxlcy5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyB0aGF0IGFyZSB0aGUgcmVzdWx0IG9mXG4gKiBldmVyeSBpbnB1dCBPYnNlcnZhYmxlLlxuICogQHN0YXRpYyB0cnVlXG4gKiBAbmFtZSBtZXJnZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2VTdGF0aWMoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuICAgIHZhciBsYXN0ID0gb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIobGFzdCkpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPiAxICYmIHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNvbmN1cnJlbnQgPSBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbGFzdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uY3VycmVudCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKGNvbmN1cnJlbnQpKTtcbn1cbmV4cG9ydHMubWVyZ2VTdGF0aWMgPSBtZXJnZVN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByYWNlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9yYWNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5yYWNlID0gcmFjZV8xLnJhY2VTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvcmFjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBmaXJzdCBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGFuIGl0ZW1cbiAqIGZyb20gdGhlIGNvbWJpbmF0aW9uIG9mIHRoaXMgT2JzZXJ2YWJsZSBhbmQgc3VwcGxpZWQgT2JzZXJ2YWJsZXNcbiAqIEBwYXJhbSB7Li4uT2JzZXJ2YWJsZXN9IC4uLm9ic2VydmFibGVzIHNvdXJjZXMgdXNlZCB0byByYWNlIGZvciB3aGljaCBPYnNlcnZhYmxlIGVtaXRzIGZpcnN0LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIG91dHB1dCBvZiB0aGUgZmlyc3QgT2JzZXJ2YWJsZSB0byBlbWl0IGFuIGl0ZW0uXG4gKiBAbWV0aG9kIHJhY2VcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHJhY2UoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIC8vIGlmIHRoZSBvbmx5IGFyZ3VtZW50IGlzIGFuIGFycmF5LCBpdCB3YXMgbW9zdCBsaWtlbHkgY2FsbGVkIHdpdGhcbiAgICAvLyBgcGFpcihbb2JzMSwgb2JzMiwgLi4uXSlgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcbiAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcbiAgICB9XG4gICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gcmFjZVN0YXRpYy5hcHBseSh0aGlzLCBvYnNlcnZhYmxlcyk7XG59XG5leHBvcnRzLnJhY2UgPSByYWNlO1xuZnVuY3Rpb24gcmFjZVN0YXRpYygpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIG9ubHkgYXJndW1lbnQgaXMgYW4gYXJyYXksIGl0IHdhcyBtb3N0IGxpa2VseSBjYWxsZWQgd2l0aFxuICAgIC8vIGBwYWlyKFtvYnMxLCBvYnMyLCAuLi5dKWBcbiAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcbiAgICAgICAgICAgIG9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZXNbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMpLmxpZnQobmV3IFJhY2VPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMucmFjZVN0YXRpYyA9IHJhY2VTdGF0aWM7XG52YXIgUmFjZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSYWNlT3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIFJhY2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSYWNlU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmFjZU9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuUmFjZU9wZXJhdG9yID0gUmFjZU9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSYWNlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJhY2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJhY2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5oYXNGaXJzdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gW107XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIH1cbiAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAob2JzZXJ2YWJsZSkge1xuICAgICAgICB0aGlzLm9ic2VydmFibGVzLnB1c2gob2JzZXJ2YWJsZSk7XG4gICAgfTtcbiAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZXMgPSB0aGlzLm9ic2VydmFibGVzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2YWJsZXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJhY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNGaXJzdCkge1xuICAgICAgICAgICAgdGhpcy5oYXNGaXJzdCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpICE9PSBvdXRlckluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgcmV0dXJuIFJhY2VTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydHMuUmFjZVN1YnNjcmliZXIgPSBSYWNlU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhY2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9yYWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbmV2ZXJfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvbmV2ZXInKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm5ldmVyID0gbmV2ZXJfMS5uZXZlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvbmV2ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE5ldmVyT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9OZXZlck9ic2VydmFibGUnKTtcbmV4cG9ydHMubmV2ZXIgPSBOZXZlck9ic2VydmFibGVfMS5OZXZlck9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV2ZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL25ldmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBub29wXzEgPSByZXF1aXJlKCcuLi91dGlsL25vb3AnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgTmV2ZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmV2ZXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5ldmVyT2JzZXJ2YWJsZSgpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG5vIGl0ZW1zIHRvIHRoZSBPYnNlcnZlci5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5BbiBPYnNlcnZhYmxlIHRoYXQgbmV2ZXIgZW1pdHMgYW55dGhpbmcuPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy9uZXZlci5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IGVtaXRzXG4gICAgICogbmVpdGhlciB2YWx1ZXMgbm9yIGVycm9ycyBub3IgdGhlIGNvbXBsZXRpb24gbm90aWZpY2F0aW9uLiBJdCBjYW4gYmUgdXNlZFxuICAgICAqIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9yIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlciBPYnNlcnZhYmxlcy4gUGxlYXNlIG5vdFxuICAgICAqIHRoYXQgYnkgbmV2ZXIgZW1pdHRpbmcgYSBjb21wbGV0ZSBub3RpZmljYXRpb24sIHRoaXMgT2JzZXJ2YWJsZSBrZWVwcyB0aGVcbiAgICAgKiBzdWJzY3JpcHRpb24gZnJvbSBiZWluZyBkaXNwb3NlZCBhdXRvbWF0aWNhbGx5LiBTdWJzY3JpcHRpb25zIG5lZWQgdG8gYmVcbiAgICAgKiBtYW51YWxseSBkaXNwb3NlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIG5ldmVyIGVtaXQgYW55dGhpbmcgZWxzZSAobm90IGV2ZW4gY29tcGxldGUpLjwvY2FwdGlvbj5cbiAgICAgKiBmdW5jdGlvbiBpbmZvKCkge1xuICAgICAqICAgY29uc29sZS5sb2coJ1dpbGwgbm90IGJlIGNhbGxlZCcpO1xuICAgICAqIH1cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5uZXZlcigpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGluZm8sIGluZm8pO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICAgICAqIEBzZWUge0BsaW5rIG9mfVxuICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQSBcIm5ldmVyXCIgT2JzZXJ2YWJsZTogbmV2ZXIgZW1pdHMgYW55dGhpbmcuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgbmV2ZXJcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIE5ldmVyT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmV2ZXJPYnNlcnZhYmxlKCk7XG4gICAgfTtcbiAgICBOZXZlck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBub29wXzEubm9vcCgpO1xuICAgIH07XG4gICAgcmV0dXJuIE5ldmVyT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuTmV2ZXJPYnNlcnZhYmxlID0gTmV2ZXJPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TmV2ZXJPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9OZXZlck9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbmZ1bmN0aW9uIG5vb3AoKSB7IH1cbmV4cG9ydHMubm9vcCA9IG5vb3A7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub29wLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9ub29wLmpzXG4gKiogbW9kdWxlIGlkID0gMzg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgb2ZfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvb2YnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm9mID0gb2ZfMS5vZjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9BcnJheU9ic2VydmFibGUnKTtcbmV4cG9ydHMub2YgPSBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUub2Y7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vZi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByYW5nZV8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9yYW5nZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucmFuZ2UgPSByYW5nZV8xLnJhbmdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9yYW5nZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUmFuZ2VPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1JhbmdlT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5yYW5nZSA9IFJhbmdlT2JzZXJ2YWJsZV8xLlJhbmdlT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYW5nZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvcmFuZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBSYW5nZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYW5nZU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmFuZ2VPYnNlcnZhYmxlKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuX2NvdW50ID0gY291bnQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhIHNlcXVlbmNlIG9mIG51bWJlcnMgd2l0aGluIGEgc3BlY2lmaWVkXG4gICAgICogcmFuZ2UuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RW1pdHMgYSBzZXF1ZW5jZSBvZiBudW1iZXJzIGluIGEgcmFuZ2UuPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy9yYW5nZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIGByYW5nZWAgb3BlcmF0b3IgZW1pdHMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVnZXJzLCBpbiBvcmRlciwgd2hlcmUgeW91XG4gICAgICogc2VsZWN0IHRoZSBgc3RhcnRgIG9mIHRoZSByYW5nZSBhbmQgaXRzIGBsZW5ndGhgLiBCeSBkZWZhdWx0LCB1c2VzIG5vXG4gICAgICogU2NoZWR1bGVyIGFuZCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb25zIHN5bmNocm9ub3VzbHksIGJ1dCBtYXkgdXNlXG4gICAgICogYW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHJlZ3VsYXRlIHRob3NlIGRlbGl2ZXJpZXMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyB0aGUgbnVtYmVycyAxIHRvIDEwPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG4gICAgICogbnVtYmVycy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayB0aW1lcn1cbiAgICAgKiBAc2VlIHtAbGluayBpbnRlcnZhbH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvdW50PTBdIFRoZSBudW1iZXIgb2Ygc2VxdWVudGlhbCBpbnRlZ2VycyB0byBnZW5lcmF0ZS5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAgICAgKiB0aGUgZW1pc3Npb25zIG9mIHRoZSBub3RpZmljYXRpb25zLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgbnVtYmVycyB0aGF0IGVtaXRzIGEgZmluaXRlIHJhbmdlIG9mXG4gICAgICogc2VxdWVudGlhbCBpbnRlZ2Vycy5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSByYW5nZVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgUmFuZ2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoc3RhcnQgPT09IHZvaWQgMCkgeyBzdGFydCA9IDA7IH1cbiAgICAgICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAwOyB9XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2VPYnNlcnZhYmxlKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSBzdGF0ZS5zdGFydCwgaW5kZXggPSBzdGF0ZS5pbmRleCwgY291bnQgPSBzdGF0ZS5jb3VudCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIGlmIChpbmRleCA+PSBjb3VudCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIubmV4dChzdGFydCk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIHN0YXRlLnN0YXJ0ID0gc3RhcnQgKyAxO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIFJhbmdlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgICAgIHZhciBjb3VudCA9IHRoaXMuX2NvdW50O1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoUmFuZ2VPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN0YXJ0OiBzdGFydCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4KysgPj0gY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHN0YXJ0KyspO1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUmFuZ2VPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5SYW5nZU9ic2VydmFibGUgPSBSYW5nZU9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SYW5nZU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL1JhbmdlT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRocm93XzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL3Rocm93Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aHJvdyA9IHRocm93XzEuX3Rocm93O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3cuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS90aHJvdy5qc1xuICoqIG1vZHVsZSBpZCA9IDM5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRXJyb3JPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0Vycm9yT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5fdGhyb3cgPSBFcnJvck9ic2VydmFibGVfMS5FcnJvck9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3cuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL3Rocm93LmpzXG4gKiogbW9kdWxlIGlkID0gMzk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRXJyb3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXJyb3JPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVycm9yT2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIgYW5kIGltbWVkaWF0ZWx5XG4gICAgICogZW1pdHMgYW4gZXJyb3Igbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2Vycm9yJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBlcnJvciBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGVtaXQgYW4gZXJyb3IuPC9jYXB0aW9uPlxuICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLnRocm93KG5ldyBFcnJvcignb29wcyEnKSkuc3RhcnRXaXRoKDcpO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBhbmQgZmxhdHRlbnMgbnVtYmVycyB0byB0aGUgc2VxdWVuY2UgJ2EnLCAnYicsICdjJywgYnV0IHRocm93IGFuIGVycm9yIGZvciAxMzwvY2FwdGlvbj5cbiAgICAgKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICAgICAqIHZhciByZXN1bHQgPSBpbnRlcnZhbC5tZXJnZU1hcCh4ID0+XG4gICAgICogICB4ID09PSAxMyA/XG4gICAgICogICAgIFJ4Lk9ic2VydmFibGUudGhyb3coJ1RoaXJ0ZWVucyBhcmUgYmFkJykgOlxuICAgICAqICAgICBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpXG4gICAgICogKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG4gICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG4gICAgICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgb2Z9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2FueX0gZXJyb3IgVGhlIHBhcnRpY3VsYXIgRXJyb3IgdG8gcGFzcyB0byB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBBIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICAgICAqIHRoZSBlbWlzc2lvbiBvZiB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIGVycm9yIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGVycm9yIG5vdGlmaWNhdGlvblxuICAgICAqIHVzaW5nIHRoZSBnaXZlbiBlcnJvciBhcmd1bWVudC5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSB0aHJvd1xuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChlcnJvciwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3JPYnNlcnZhYmxlKGVycm9yLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgRXJyb3JPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgZXJyb3IgPSBhcmcuZXJyb3IsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcbiAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvcik7XG4gICAgfTtcbiAgICBFcnJvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLmVycm9yO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoRXJyb3JPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRXJyb3JPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5FcnJvck9ic2VydmFibGUgPSBFcnJvck9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FcnJvck9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0Vycm9yT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRpbWVyXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL3RpbWVyJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aW1lciA9IHRpbWVyXzEudGltZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3RpbWVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBUaW1lck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vVGltZXJPYnNlcnZhYmxlJyk7XG5leHBvcnRzLnRpbWVyID0gVGltZXJPYnNlcnZhYmxlXzEuVGltZXJPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS90aW1lci5qc1xuICoqIG1vZHVsZSBpZCA9IDM5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc051bWVyaWNfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNOdW1lcmljJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIGlzRGF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0RhdGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgVGltZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGltZXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbWVyT2JzZXJ2YWJsZShkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoZHVlVGltZSA9PT0gdm9pZCAwKSB7IGR1ZVRpbWUgPSAwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBlcmlvZCA9IC0xO1xuICAgICAgICB0aGlzLmR1ZVRpbWUgPSAwO1xuICAgICAgICBpZiAoaXNOdW1lcmljXzEuaXNOdW1lcmljKHBlcmlvZCkpIHtcbiAgICAgICAgICAgIHRoaXMucGVyaW9kID0gTnVtYmVyKHBlcmlvZCkgPCAxICYmIDEgfHwgTnVtYmVyKHBlcmlvZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihwZXJpb2QpKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIgPSBwZXJpb2Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZHVlVGltZSA9IGlzRGF0ZV8xLmlzRGF0ZShkdWVUaW1lKSA/XG4gICAgICAgICAgICAoK2R1ZVRpbWUgLSB0aGlzLnNjaGVkdWxlci5ub3coKSkgOlxuICAgICAgICAgICAgZHVlVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgc3RhcnRzIGVtaXR0aW5nIGFmdGVyIGFuIGBpbml0aWFsRGVsYXlgIGFuZFxuICAgICAqIGVtaXRzIGV2ZXIgaW5jcmVhc2luZyBudW1iZXJzIGFmdGVyIGVhY2ggYHBlcmlvZGAgb2YgdGltZSB0aGVyZWFmdGVyLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0cyBsaWtlIHtAbGluayBpbnRlcnZhbH0sIGJ1dCB5b3UgY2FuIHNwZWNpZnkgd2hlblxuICAgICAqIHNob3VsZCB0aGUgZW1pc3Npb25zIHN0YXJ0Ljwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvdGltZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBgdGltZXJgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFuIGluZmluaXRlIHNlcXVlbmNlIG9mIGFzY2VuZGluZ1xuICAgICAqIGludGVnZXJzLCB3aXRoIGEgY29uc3RhbnQgaW50ZXJ2YWwgb2YgdGltZSwgYHBlcmlvZGAgb2YgeW91ciBjaG9vc2luZ1xuICAgICAqIGJldHdlZW4gdGhvc2UgZW1pc3Npb25zLiBUaGUgZmlyc3QgZW1pc3Npb24gaGFwcGVucyBhZnRlciB0aGUgc3BlY2lmaWVkXG4gICAgICogYGluaXRpYWxEZWxheWAuIFRoZSBpbml0aWFsIGRlbGF5IG1heSBiZSBhIHtAbGluayBEYXRlfS4gQnkgZGVmYXVsdCwgdGhpc1xuICAgICAqIG9wZXJhdG9yIHVzZXMgdGhlIGBhc3luY2AgU2NoZWR1bGVyIHRvIHByb3ZpZGUgYSBub3Rpb24gb2YgdGltZSwgYnV0IHlvdVxuICAgICAqIG1heSBwYXNzIGFueSBTY2hlZHVsZXIgdG8gaXQuIElmIGBwZXJpb2RgIGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBvdXRwdXRcbiAgICAgKiBPYnNlcnZhYmxlIGVtaXRzIG9ubHkgb25lIHZhbHVlLCBgMGAuIE90aGVyd2lzZSwgaXQgZW1pdHMgYW4gaW5maW5pdGVcbiAgICAgKiBzZXF1ZW5jZS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIGFzY2VuZGluZyBudW1iZXJzLCBvbmUgZXZlcnkgc2Vjb25kICgxMDAwbXMpLCBzdGFydGluZyBhZnRlciAzIHNlY29uZHM8L2NhcHRpb24+XG4gICAgICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLnRpbWVyKDMwMDAsIDEwMDApO1xuICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgb25lIG51bWJlciBhZnRlciBmaXZlIHNlY29uZHM8L2NhcHRpb24+XG4gICAgICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLnRpbWVyKDUwMDApO1xuICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgaW50ZXJ2YWx9XG4gICAgICogQHNlZSB7QGxpbmsgZGVsYXl9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnxEYXRlfSBpbml0aWFsRGVsYXkgVGhlIGluaXRpYWwgZGVsYXkgdGltZSB0byB3YWl0IGJlZm9yZVxuICAgICAqIGVtaXR0aW5nIHRoZSBmaXJzdCB2YWx1ZSBvZiBgMGAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwZXJpb2RdIFRoZSBwZXJpb2Qgb2YgdGltZSBiZXR3ZWVuIGVtaXNzaW9ucyBvZiB0aGVcbiAgICAgKiBzdWJzZXF1ZW50IG51bWJlcnMuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9uIG9mIHZhbHVlcywgYW5kIHByb3ZpZGluZyBhIG5vdGlvbiBvZiBcInRpbWVcIi5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBgMGAgYWZ0ZXIgdGhlXG4gICAgICogYGluaXRpYWxEZWxheWAgYW5kIGV2ZXIgaW5jcmVhc2luZyBudW1iZXJzIGFmdGVyIGVhY2ggYHBlcmlvZGAgb2YgdGltZVxuICAgICAqIHRoZXJlYWZ0ZXIuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgdGltZXJcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIFRpbWVyT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoaW5pdGlhbERlbGF5ID09PSB2b2lkIDApIHsgaW5pdGlhbERlbGF5ID0gMDsgfVxuICAgICAgICByZXR1cm4gbmV3IFRpbWVyT2JzZXJ2YWJsZShpbml0aWFsRGVsYXksIHBlcmlvZCwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIFRpbWVyT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgcGVyaW9kID0gc3RhdGUucGVyaW9kLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXM7XG4gICAgICAgIHN1YnNjcmliZXIubmV4dChpbmRleCk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGVyaW9kID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xuICAgIH07XG4gICAgVGltZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcGVyaW9kID0gX2EucGVyaW9kLCBkdWVUaW1lID0gX2EuZHVlVGltZSwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgZHVlVGltZSwge1xuICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBwZXJpb2Q6IHBlcmlvZCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBUaW1lck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLlRpbWVyT2JzZXJ2YWJsZSA9IFRpbWVyT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvVGltZXJPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gNDAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKCt2YWx1ZSk7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRGF0ZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvaXNEYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gNDAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgemlwXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL3ppcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuemlwID0gemlwXzEuemlwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvemlwLmpzXG4gKiogbW9kdWxlIGlkID0gNDAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciB6aXBfMSA9IHJlcXVpcmUoJy4uL29wZXJhdG9yL3ppcCcpO1xuZXhwb3J0cy56aXAgPSB6aXBfMS56aXBTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD16aXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL3ppcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5Jyk7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL2l0ZXJhdG9yJyk7XG4vKipcbiAqIEBwYXJhbSBvYnNlcnZhYmxlc1xuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cbiAqIEBtZXRob2QgemlwXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB6aXBQcm90bygpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gemlwU3RhdGljLmFwcGx5KHRoaXMsIG9ic2VydmFibGVzKTtcbn1cbmV4cG9ydHMuemlwUHJvdG8gPSB6aXBQcm90bztcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIEBwYXJhbSBvYnNlcnZhYmxlc1xuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgemlwXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB6aXBTdGF0aWMoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBwcm9qZWN0ID0gb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKHR5cGVvZiBwcm9qZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgWmlwT3BlcmF0b3IocHJvamVjdCkpO1xufVxuZXhwb3J0cy56aXBTdGF0aWMgPSB6aXBTdGF0aWM7XG52YXIgWmlwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFppcE9wZXJhdG9yKHByb2plY3QpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICB9XG4gICAgWmlwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgWmlwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QpKTtcbiAgICB9O1xuICAgIHJldHVybiBaaXBPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLlppcE9wZXJhdG9yID0gWmlwT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFppcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhaaXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFppcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLml0ZXJhdG9ycyA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMucHJvamVjdCA9ICh0eXBlb2YgcHJvamVjdCA9PT0gJ2Z1bmN0aW9uJykgPyBwcm9qZWN0IDogbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgfVxuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICBpZiAoaXNBcnJheV8xLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljQXJyYXlJdGVyYXRvcih2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljSXRlcmF0b3IodmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgWmlwQnVmZmVySXRlcmF0b3IodGhpcy5kZXN0aW5hdGlvbiwgdGhpcywgdmFsdWUsIGluZGV4KSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzO1xuICAgICAgICB2YXIgbGVuID0gaXRlcmF0b3JzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yc1tpXTtcbiAgICAgICAgICAgIGlmIChpdGVyYXRvci5zdGlsbFVuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGl0ZXJhdG9yLnN1YnNjcmliZShpdGVyYXRvciwgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUtLTsgLy8gbm90IGFuIG9ic2VydmFibGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5SW5hY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlLS07XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5jaGVja0l0ZXJhdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzO1xuICAgICAgICB2YXIgbGVuID0gaXRlcmF0b3JzLmxlbmd0aDtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgLy8gYWJvcnQgaWYgbm90IGFsbCBvZiB0aGVtIGhhdmUgdmFsdWVzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yc1tpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IuaGFzVmFsdWUgPT09ICdmdW5jdGlvbicgJiYgIWl0ZXJhdG9yLmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNob3VsZENvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yc1tpXTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgaXQncyBjb21wbGV0ZWQgbm93IHRoYXQgeW91J3ZlIGdvdHRlblxuICAgICAgICAgICAgLy8gdGhlIG5leHQgdmFsdWUuXG4gICAgICAgICAgICBpZiAoaXRlcmF0b3IuaGFzQ29tcGxldGVkKCkpIHtcbiAgICAgICAgICAgICAgICBzaG91bGRDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3MucHVzaChyZXN1bHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb2plY3QpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QoYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRDb21wbGV0ZSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBaaXBTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5aaXBTdWJzY3JpYmVyID0gWmlwU3Vic2NyaWJlcjtcbnZhciBTdGF0aWNJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGljSXRlcmF0b3IoaXRlcmF0b3IpIHtcbiAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0ZXJhdG9yO1xuICAgICAgICB0aGlzLm5leHRSZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgfVxuICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMubmV4dFJlc3VsdDtcbiAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gdGhpcy5pdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUuaGFzQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV4dFJlc3VsdCA9IHRoaXMubmV4dFJlc3VsdDtcbiAgICAgICAgcmV0dXJuIG5leHRSZXN1bHQgJiYgbmV4dFJlc3VsdC5kb25lO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRpY0l0ZXJhdG9yO1xufSgpKTtcbnZhciBTdGF0aWNBcnJheUl0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0aWNBcnJheUl0ZXJhdG9yKGFycmF5KSB7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgfVxuICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTtcbiAgICAgICAgcmV0dXJuIGkgPCB0aGlzLmxlbmd0aCA/IHsgdmFsdWU6IGFycmF5W2ldLCBkb25lOiBmYWxzZSB9IDogeyBkb25lOiB0cnVlIH07XG4gICAgfTtcbiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoID4gdGhpcy5pbmRleDtcbiAgICB9O1xuICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoID09PSB0aGlzLmluZGV4O1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRpY0FycmF5SXRlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBaaXBCdWZmZXJJdGVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFppcEJ1ZmZlckl0ZXJhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFppcEJ1ZmZlckl0ZXJhdG9yKGRlc3RpbmF0aW9uLCBwYXJlbnQsIG9ic2VydmFibGUsIGluZGV4KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5zdGlsbFVuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyBOT1RFOiB0aGVyZSBpcyBhY3R1YWxseSBhIG5hbWUgY29sbGlzaW9uIGhlcmUgd2l0aCBTdWJzY3JpYmVyLm5leHQgYW5kIEl0ZXJhdG9yLm5leHRcbiAgICAvLyAgICB0aGlzIGlzIGxlZ2l0IGJlY2F1c2UgYG5leHQoKWAgd2lsbCBuZXZlciBiZSBjYWxsZWQgYnkgYSBzdWJzY3JpcHRpb24gaW4gdGhpcyBjYXNlLlxuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwICYmIHRoaXMuaXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGJ1ZmZlci5zaGlmdCgpLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlzQ29tcGxldGU7XG4gICAgfTtcbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5SW5hY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5idWZmZXIucHVzaChpbm5lclZhbHVlKTtcbiAgICAgICAgdGhpcy5wYXJlbnQuY2hlY2tJdGVyYXRvcnMoKTtcbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHRoaXMub2JzZXJ2YWJsZSwgdGhpcywgaW5kZXgpO1xuICAgIH07XG4gICAgcmV0dXJuIFppcEJ1ZmZlckl0ZXJhdG9yO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3ppcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQwNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGJ1ZmZlcl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYnVmZmVyJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyID0gYnVmZmVyXzEuYnVmZmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQwNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyB1bnRpbCBgY2xvc2luZ05vdGlmaWVyYCBlbWl0cy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuICogdGhhdCBhcnJheSBvbmx5IHdoZW4gYW5vdGhlciBPYnNlcnZhYmxlIGVtaXRzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlci5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBCdWZmZXJzIHRoZSBpbmNvbWluZyBPYnNlcnZhYmxlIHZhbHVlcyB1bnRpbCB0aGUgZ2l2ZW4gYGNsb3NpbmdOb3RpZmllcmBcbiAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgYXQgd2hpY2ggcG9pbnQgaXQgZW1pdHMgdGhlIGJ1ZmZlciBvbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlIGFuZCBzdGFydHMgYSBuZXcgYnVmZmVyIGludGVybmFsbHksIGF3YWl0aW5nIHRoZSBuZXh0IHRpbWVcbiAqIGBjbG9zaW5nTm90aWZpZXJgIGVtaXRzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBlbWl0IGFycmF5IG9mIG1vc3QgcmVjZW50IGludGVydmFsIGV2ZW50czwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGJ1ZmZlcmVkID0gaW50ZXJ2YWwuYnVmZmVyKGNsaWNrcyk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG4gKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd31cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGU8YW55Pn0gY2xvc2luZ05vdGlmaWVyIEFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIHRoZVxuICogYnVmZmVyIHRvIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBPYnNlcnZhYmxlIG9mIGJ1ZmZlcnMsIHdoaWNoIGFyZSBhcnJheXMgb2ZcbiAqIHZhbHVlcy5cbiAqIEBtZXRob2QgYnVmZmVyXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBidWZmZXIoY2xvc2luZ05vdGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyT3BlcmF0b3IoY2xvc2luZ05vdGlmaWVyKSk7XG59XG5leHBvcnRzLmJ1ZmZlciA9IGJ1ZmZlcjtcbnZhciBCdWZmZXJPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnVmZmVyT3BlcmF0b3IoY2xvc2luZ05vdGlmaWVyKSB7XG4gICAgICAgIHRoaXMuY2xvc2luZ05vdGlmaWVyID0gY2xvc2luZ05vdGlmaWVyO1xuICAgIH1cbiAgICBCdWZmZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2xvc2luZ05vdGlmaWVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBCdWZmZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVmZmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCdWZmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nTm90aWZpZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllcikpO1xuICAgIH1cbiAgICBCdWZmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICB9O1xuICAgIEJ1ZmZlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGJ1ZmZlckNvdW50XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9idWZmZXJDb3VudCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlckNvdW50ID0gYnVmZmVyQ291bnRfMS5idWZmZXJDb3VudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlckNvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gNDA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIHRoZSBzaXplIGhpdHMgdGhlIG1heGltdW1cbiAqIGBidWZmZXJTaXplYCBnaXZlbi5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuICogdGhhdCBhcnJheSBvbmx5IHdoZW4gaXRzIHNpemUgcmVhY2hlcyBgYnVmZmVyU2l6ZWAuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyQ291bnQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQnVmZmVycyBhIG51bWJlciBvZiB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYGJ1ZmZlclNpemVgIHRoZW5cbiAqIGVtaXRzIHRoZSBidWZmZXIgYW5kIGNsZWFycyBpdCwgYW5kIHN0YXJ0cyBhIG5ldyBidWZmZXIgZWFjaFxuICogYHN0YXJ0QnVmZmVyRXZlcnlgIHZhbHVlcy4gSWYgYHN0YXJ0QnVmZmVyRXZlcnlgIGlzIG5vdCBwcm92aWRlZCBvciBpc1xuICogYG51bGxgLCB0aGVuIG5ldyBidWZmZXJzIGFyZSBzdGFydGVkIGltbWVkaWF0ZWx5IGF0IHRoZSBzdGFydCBvZiB0aGUgc291cmNlXG4gKiBhbmQgd2hlbiBlYWNoIGJ1ZmZlciBjbG9zZXMgYW5kIGlzIGVtaXR0ZWQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCB0aGUgbGFzdCB0d28gY2xpY2sgZXZlbnRzIGFzIGFuIGFycmF5PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJDb3VudCgyKTtcbiAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljaywgZW1pdCB0aGUgbGFzdCB0d28gY2xpY2sgZXZlbnRzIGFzIGFuIGFycmF5PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJDb3VudCgyLCAxKTtcbiAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBidWZmZXJ9XG4gKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cbiAqIEBzZWUge0BsaW5rIHBhaXJ3aXNlfVxuICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGJ1ZmZlclNpemUgVGhlIG1heGltdW0gc2l6ZSBvZiB0aGUgYnVmZmVyIGVtaXR0ZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0QnVmZmVyRXZlcnldIEludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IGEgbmV3IGJ1ZmZlci5cbiAqIEZvciBleGFtcGxlIGlmIGBzdGFydEJ1ZmZlckV2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgYnVmZmVyIHdpbGwgYmUgc3RhcnRlZFxuICogb24gZXZlcnkgb3RoZXIgdmFsdWUgZnJvbSB0aGUgc291cmNlLiBBIG5ldyBidWZmZXIgaXMgc3RhcnRlZCBhdCB0aGVcbiAqIGJlZ2lubmluZyBvZiB0aGUgc291cmNlIGJ5IGRlZmF1bHQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIE9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cbiAqIEBtZXRob2QgYnVmZmVyQ291bnRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlckNvdW50KGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHtcbiAgICBpZiAoc3RhcnRCdWZmZXJFdmVyeSA9PT0gdm9pZCAwKSB7IHN0YXJ0QnVmZmVyRXZlcnkgPSBudWxsOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyQ291bnRPcGVyYXRvcihidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSk7XG59XG5leHBvcnRzLmJ1ZmZlckNvdW50ID0gYnVmZmVyQ291bnQ7XG52YXIgQnVmZmVyQ291bnRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnVmZmVyQ291bnRPcGVyYXRvcihidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7XG4gICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG4gICAgICAgIHRoaXMuc3RhcnRCdWZmZXJFdmVyeSA9IHN0YXJ0QnVmZmVyRXZlcnk7XG4gICAgfVxuICAgIEJ1ZmZlckNvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYnVmZmVyU2l6ZSwgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5KSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyQ291bnRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEJ1ZmZlckNvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1ZmZlckNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCdWZmZXJDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuICAgICAgICB0aGlzLnN0YXJ0QnVmZmVyRXZlcnkgPSBzdGFydEJ1ZmZlckV2ZXJ5O1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbW11dO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgQnVmZmVyQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY291bnQgPSAodGhpcy5jb3VudCArPSAxKTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIGJ1ZmZlclNpemUgPSB0aGlzLmJ1ZmZlclNpemU7XG4gICAgICAgIHZhciBzdGFydEJ1ZmZlckV2ZXJ5ID0gKHRoaXMuc3RhcnRCdWZmZXJFdmVyeSA9PSBudWxsKSA/IGJ1ZmZlclNpemUgOiB0aGlzLnN0YXJ0QnVmZmVyRXZlcnk7XG4gICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG4gICAgICAgIHZhciByZW1vdmUgPSAtMTtcbiAgICAgICAgaWYgKGNvdW50ICUgc3RhcnRCdWZmZXJFdmVyeSA9PT0gMCkge1xuICAgICAgICAgICAgYnVmZmVycy5wdXNoKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tpXTtcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlID0gaTtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92ZSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGJ1ZmZlcnMuc3BsaWNlKHJlbW92ZSwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJ1ZmZlckNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcbiAgICAgICAgd2hpbGUgKGJ1ZmZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlckNvdW50U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyQ291bnQuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJUaW1lXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9idWZmZXJUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVGltZSA9IGJ1ZmZlclRpbWVfMS5idWZmZXJUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNDA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG4vKipcbiAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBmb3IgYSBzcGVjaWZpYyB0aW1lIHBlcmlvZC5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuICogdGhvc2UgYXJyYXlzIHBlcmlvZGljYWxseSBpbiB0aW1lLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlclRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQnVmZmVycyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIGZvciBhIHNwZWNpZmljIHRpbWUgZHVyYXRpb24gYGJ1ZmZlclRpbWVTcGFuYC5cbiAqIFVubGVzcyB0aGUgb3B0aW9uYWwgYXJndW1lbnQgYGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWxgIGlzIGdpdmVuLCBpdCBlbWl0cyBhbmRcbiAqIHJlc2V0cyB0aGUgYnVmZmVyIGV2ZXJ5IGBidWZmZXJUaW1lU3BhbmAgbWlsbGlzZWNvbmRzLiBJZlxuICogYGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWxgIGlzIGdpdmVuLCB0aGlzIG9wZXJhdG9yIG9wZW5zIHRoZSBidWZmZXIgZXZlcnlcbiAqIGBidWZmZXJDcmVhdGlvbkludGVydmFsYCBtaWxsaXNlY29uZHMgYW5kIGNsb3NlcyAoZW1pdHMgYW5kIHJlc2V0cykgdGhlXG4gKiBidWZmZXIgZXZlcnkgYGJ1ZmZlclRpbWVTcGFuYCBtaWxsaXNlY29uZHMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgc2Vjb25kLCBlbWl0IGFuIGFycmF5IG9mIHRoZSByZWNlbnQgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUaW1lKDEwMDApO1xuICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IDUgc2Vjb25kcywgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgMiBzZWNvbmRzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUaW1lKDIwMDAsIDUwMDApO1xuICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGJ1ZmZlclRpbWVTcGFuIFRoZSBhbW91bnQgb2YgdGltZSB0byBmaWxsIGVhY2ggYnVmZmVyIGFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IFtidWZmZXJDcmVhdGlvbkludGVydmFsXSBUaGUgaW50ZXJ2YWwgYXQgd2hpY2ggdG8gc3RhcnQgbmV3XG4gKiBidWZmZXJzLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG4gKiBpbnRlcnZhbHMgdGhhdCBkZXRlcm1pbmUgYnVmZmVyIGJvdW5kYXJpZXMuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIG9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cbiAqIEBtZXRob2QgYnVmZmVyVGltZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyVGltZShidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPT09IHZvaWQgMCkgeyBidWZmZXJDcmVhdGlvbkludGVydmFsID0gbnVsbDsgfVxuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyVGltZU9wZXJhdG9yKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMuYnVmZmVyVGltZSA9IGJ1ZmZlclRpbWU7XG52YXIgQnVmZmVyVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdWZmZXJUaW1lT3BlcmF0b3IoYnVmZmVyVGltZVNwYW4sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmJ1ZmZlclRpbWVTcGFuID0gYnVmZmVyVGltZVNwYW47XG4gICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBCdWZmZXJUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5idWZmZXJUaW1lU3BhbiwgdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsLCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlclRpbWVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEJ1ZmZlclRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVmZmVyVGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQnVmZmVyVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmJ1ZmZlclRpbWVTcGFuID0gYnVmZmVyVGltZVNwYW47XG4gICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMub3BlbkJ1ZmZlcigpO1xuICAgICAgICBpZiAoYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCAhPT0gbnVsbCAmJiBidWZmZXJDcmVhdGlvbkludGVydmFsID49IDApIHtcbiAgICAgICAgICAgIHZhciBjbG9zZVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCBidWZmZXI6IGJ1ZmZlciB9O1xuICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IGJ1ZmZlclRpbWVTcGFuOiBidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDogYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNsb3NlLCBidWZmZXJUaW1lU3BhbiwgY2xvc2VTdGF0ZSkpO1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyQ3JlYXRpb24sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIGNyZWF0aW9uU3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0aW1lU3Bhbk9ubHlTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgYnVmZmVyOiBidWZmZXIsIGJ1ZmZlclRpbWVTcGFuOiBidWZmZXJUaW1lU3BhbiB9O1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5LCBidWZmZXJUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSB0aGlzLmJ1ZmZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBidWZmZXJzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgYnVmZmVyc1tpXS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5idWZmZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcbiAgICB9O1xuICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGJ1ZmZlcnMgPSBfYS5idWZmZXJzLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuICAgICAgICB3aGlsZSAoYnVmZmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcnMuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IG51bGw7XG4gICAgfTtcbiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmJ1ZmZlcnMucHVzaChidWZmZXIpO1xuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH07XG4gICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsb3NlQnVmZmVyID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSB0aGlzLmJ1ZmZlcnM7XG4gICAgICAgIGJ1ZmZlcnMuc3BsaWNlKGJ1ZmZlcnMuaW5kZXhPZihidWZmZXIpLCAxKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJUaW1lU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5KHN0YXRlKSB7XG4gICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgIHZhciBwcmV2QnVmZmVyID0gc3RhdGUuYnVmZmVyO1xuICAgIGlmIChwcmV2QnVmZmVyKSB7XG4gICAgICAgIHN1YnNjcmliZXIuY2xvc2VCdWZmZXIocHJldkJ1ZmZlcik7XG4gICAgfVxuICAgIHN0YXRlLmJ1ZmZlciA9IHN1YnNjcmliZXIub3BlbkJ1ZmZlcigpO1xuICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBzdGF0ZS5idWZmZXJUaW1lU3Bhbik7XG4gICAgfVxufVxuZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJDcmVhdGlvbihzdGF0ZSkge1xuICAgIHZhciBidWZmZXJDcmVhdGlvbkludGVydmFsID0gc3RhdGUuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgYnVmZmVyVGltZVNwYW4gPSBzdGF0ZS5idWZmZXJUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjtcbiAgICB2YXIgYnVmZmVyID0gc3Vic2NyaWJlci5vcGVuQnVmZmVyKCk7XG4gICAgdmFyIGFjdGlvbiA9IHRoaXM7XG4gICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgIGFjdGlvbi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyQ2xvc2UsIGJ1ZmZlclRpbWVTcGFuLCB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIGJ1ZmZlcjogYnVmZmVyIH0pKTtcbiAgICAgICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCBidWZmZXJDcmVhdGlvbkludGVydmFsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkaXNwYXRjaEJ1ZmZlckNsb3NlKGFyZykge1xuICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIGJ1ZmZlciA9IGFyZy5idWZmZXI7XG4gICAgc3Vic2NyaWJlci5jbG9zZUJ1ZmZlcihidWZmZXIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlclRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJUb2dnbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2J1ZmZlclRvZ2dsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlclRvZ2dsZSA9IGJ1ZmZlclRvZ2dsZV8xLmJ1ZmZlclRvZ2dsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlclRvZ2dsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG4vKipcbiAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBzdGFydGluZyBmcm9tIGFuIGVtaXNzaW9uIGZyb21cbiAqIGBvcGVuaW5nc2AgYW5kIGVuZGluZyB3aGVuIHRoZSBvdXRwdXQgb2YgYGNsb3NpbmdTZWxlY3RvcmAgZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LiBTdGFydHNcbiAqIGNvbGxlY3Rpbmcgb25seSB3aGVuIGBvcGVuaW5nYCBlbWl0cywgYW5kIGNhbGxzIHRoZSBgY2xvc2luZ1NlbGVjdG9yYFxuICogZnVuY3Rpb24gdG8gZ2V0IGFuIE9ic2VydmFibGUgdGhhdCB0ZWxscyB3aGVuIHRvIGNsb3NlIHRoZSBidWZmZXIuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyVG9nZ2xlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEJ1ZmZlcnMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBieSBvcGVuaW5nIHRoZSBidWZmZXIgdmlhIHNpZ25hbHMgZnJvbSBhblxuICogT2JzZXJ2YWJsZSBwcm92aWRlZCB0byBgb3BlbmluZ3NgLCBhbmQgY2xvc2luZyBhbmQgc2VuZGluZyB0aGUgYnVmZmVycyB3aGVuXG4gKiBhIFN1YnNjcmliYWJsZSBvciBQcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgY2xvc2luZ1NlbGVjdG9yYCBmdW5jdGlvbiBlbWl0cy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSBvdGhlciBzZWNvbmQsIGVtaXQgdGhlIGNsaWNrIGV2ZW50cyBmcm9tIHRoZSBuZXh0IDUwMG1zPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyVG9nZ2xlKG9wZW5pbmdzLCBpID0+XG4gKiAgIGkgJSAyID8gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG4gKiApO1xuICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKlxuICogQHBhcmFtIHtTdWJzY3JpYmFibGVPclByb21pc2U8Tz59IG9wZW5pbmdzIEEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2Ugb2Ygbm90aWZpY2F0aW9ucyB0byBzdGFydCBuZXdcbiAqIGJ1ZmZlcnMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBPKTogU3Vic2NyaWJhYmxlT3JQcm9taXNlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG4gKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2UsXG4gKiB3aGljaCwgd2hlbiBpdCBlbWl0cywgc2lnbmFscyB0aGF0IHRoZSBhc3NvY2lhdGVkIGJ1ZmZlciBzaG91bGQgYmUgZW1pdHRlZFxuICogYW5kIGNsZWFyZWQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIG9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cbiAqIEBtZXRob2QgYnVmZmVyVG9nZ2xlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBidWZmZXJUb2dnbGUob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlclRvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuYnVmZmVyVG9nZ2xlID0gYnVmZmVyVG9nZ2xlO1xudmFyIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdWZmZXJUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMub3BlbmluZ3MgPSBvcGVuaW5ncztcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgfVxuICAgIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vcGVuaW5ncywgdGhpcy5jbG9zaW5nU2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJUb2dnbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICB0aGlzLmNvbnRleHRzID0gW107XG4gICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MpKTtcbiAgICB9XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29udGV4dHNbaV0uYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHdoaWxlIChjb250ZXh0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzLnNoaWZ0KCk7XG4gICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgY29udGV4dC5idWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIGVycik7XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHdoaWxlIChjb250ZXh0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoY29udGV4dC5idWZmZXIpO1xuICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGNvbnRleHQuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgb3V0ZXJWYWx1ZSA/IHRoaXMuY2xvc2VCdWZmZXIob3V0ZXJWYWx1ZSkgOiB0aGlzLm9wZW5CdWZmZXIoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmNsb3NlQnVmZmVyKGlubmVyU3ViLmNvbnRleHQpO1xuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGNsb3NpbmdTZWxlY3RvciA9IHRoaXMuY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IGNsb3NpbmdTZWxlY3Rvci5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeVN1YnNjcmliZShjbG9zaW5nTm90aWZpZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLmNsb3NlQnVmZmVyID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgaWYgKGNvbnRleHRzICYmIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBjb250ZXh0LmJ1ZmZlciwgc3Vic2NyaXB0aW9uID0gY29udGV4dC5zdWJzY3JpcHRpb247XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICAgICAgICAgIGNvbnRleHRzLnNwbGljZShjb250ZXh0cy5pbmRleE9mKGNvbnRleHQpLCAxKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKGNsb3NpbmdOb3RpZmllcikge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICB2YXIgYnVmZmVyID0gW107XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHZhciBjb250ZXh0ID0geyBidWZmZXI6IGJ1ZmZlciwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfTtcbiAgICAgICAgY29udGV4dHMucHVzaChjb250ZXh0KTtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIsIGNvbnRleHQpO1xuICAgICAgICBpZiAoIWlubmVyU3Vic2NyaXB0aW9uIHx8IGlubmVyU3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQnVmZmVyKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24uY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB0aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVG9nZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyVG9nZ2xlLmpzXG4gKiogbW9kdWxlIGlkID0gNDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYnVmZmVyV2hlbl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYnVmZmVyV2hlbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlcldoZW4gPSBidWZmZXJXaGVuXzEuYnVmZmVyV2hlbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlcldoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyV2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcywgdXNpbmcgYSBmYWN0b3J5IGZ1bmN0aW9uIG9mIGNsb3NpbmdcbiAqIE9ic2VydmFibGVzIHRvIGRldGVybWluZSB3aGVuIHRvIGNsb3NlLCBlbWl0LCBhbmQgcmVzZXQgdGhlIGJ1ZmZlci5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXkuIFdoZW4gaXRcbiAqIHN0YXJ0cyBjb2xsZWN0aW5nIHZhbHVlcywgaXQgY2FsbHMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0XG4gKiB0ZWxscyB3aGVuIHRvIGNsb3NlIHRoZSBidWZmZXIgYW5kIHJlc3RhcnQgY29sbGVjdGluZy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIE9wZW5zIGEgYnVmZmVyIGltbWVkaWF0ZWx5LCB0aGVuIGNsb3NlcyB0aGUgYnVmZmVyIHdoZW4gdGhlIG9ic2VydmFibGVcbiAqIHJldHVybmVkIGJ5IGNhbGxpbmcgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMgYSB2YWx1ZS4gV2hlbiBpdCBjbG9zZXNcbiAqIHRoZSBidWZmZXIsIGl0IGltbWVkaWF0ZWx5IG9wZW5zIGEgbmV3IGJ1ZmZlciBhbmQgcmVwZWF0cyB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGFuIGFycmF5IG9mIHRoZSBsYXN0IGNsaWNrcyBldmVyeSBbMS01XSByYW5kb20gc2Vjb25kczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyV2hlbigoKSA9PlxuICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAgKyBNYXRoLnJhbmRvbSgpICogNDAwMClcbiAqICk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG4gKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IE9ic2VydmFibGV9IGNsb3NpbmdTZWxlY3RvciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgbm9cbiAqIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2lnbmFscyBidWZmZXIgY2xvc3VyZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gb2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuICogQG1ldGhvZCBidWZmZXJXaGVuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBidWZmZXJXaGVuKGNsb3NpbmdTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlcldoZW5PcGVyYXRvcihjbG9zaW5nU2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuYnVmZmVyV2hlbiA9IGJ1ZmZlcldoZW47XG52YXIgQnVmZmVyV2hlbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdWZmZXJXaGVuT3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgIH1cbiAgICBCdWZmZXJXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyV2hlblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jbG9zaW5nU2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJXaGVuT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBCdWZmZXJXaGVuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1ZmZlcldoZW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJ1ZmZlcldoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTtcbiAgICB9XG4gICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgIH07XG4gICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7XG4gICAgfTtcbiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTtcbiAgICB9O1xuICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNsb3NpbmdTdWJzY3JpcHRpb24gPSB0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb247XG4gICAgICAgIGlmIChjbG9zaW5nU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShjbG9zaW5nU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGNsb3NpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7XG4gICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsb3NpbmdTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb24gPSBjbG9zaW5nU3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgdGhpcy5hZGQoY2xvc2luZ1N1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGNsb3NpbmdTdWJzY3JpcHRpb24uYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJXaGVuU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyV2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNhY2hlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jYWNoZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNhY2hlID0gY2FjaGVfMS5jYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NhY2hlLmpzXG4gKiogbW9kdWxlIGlkID0gNDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBwdWJsaXNoUmVwbGF5XzEgPSByZXF1aXJlKCcuL3B1Ymxpc2hSZXBsYXknKTtcbi8qKlxuICogQHBhcmFtIGJ1ZmZlclNpemVcbiAqIEBwYXJhbSB3aW5kb3dUaW1lXG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59XG4gKiBAbWV0aG9kIGNhY2hlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjYWNoZShidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoYnVmZmVyU2l6ZSA9PT0gdm9pZCAwKSB7IGJ1ZmZlclNpemUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7IHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICByZXR1cm4gcHVibGlzaFJlcGxheV8xLnB1Ymxpc2hSZXBsYXkuY2FsbCh0aGlzLCBidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpLnJlZkNvdW50KCk7XG59XG5leHBvcnRzLmNhY2hlID0gY2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NhY2hlLmpzXG4gKiogbW9kdWxlIGlkID0gNDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBSZXBsYXlTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9SZXBsYXlTdWJqZWN0Jyk7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuL211bHRpY2FzdCcpO1xuLyoqXG4gKiBAcGFyYW0gYnVmZmVyU2l6ZVxuICogQHBhcmFtIHdpbmRvd1RpbWVcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEByZXR1cm4ge0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgcHVibGlzaFJlcGxheVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcHVibGlzaFJlcGxheShidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoYnVmZmVyU2l6ZSA9PT0gdm9pZCAwKSB7IGJ1ZmZlclNpemUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7IHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IFJlcGxheVN1YmplY3RfMS5SZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5wdWJsaXNoUmVwbGF5ID0gcHVibGlzaFJlcGxheTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hSZXBsYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoUmVwbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gNDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4vU3ViamVjdCcpO1xudmFyIHF1ZXVlXzEgPSByZXF1aXJlKCcuL3NjaGVkdWxlci9xdWV1ZScpO1xudmFyIG9ic2VydmVPbl8xID0gcmVxdWlyZSgnLi9vcGVyYXRvci9vYnNlcnZlT24nKTtcbi8qKlxuICogQGNsYXNzIFJlcGxheVN1YmplY3Q8VD5cbiAqL1xudmFyIFJlcGxheVN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXBsYXlTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgICAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7IHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gW107XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplIDwgMSA/IDEgOiBidWZmZXJTaXplO1xuICAgICAgICB0aGlzLl93aW5kb3dUaW1lID0gd2luZG93VGltZSA8IDEgPyAxIDogd2luZG93VGltZTtcbiAgICB9XG4gICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIG5vdyA9IHRoaXMuX2dldE5vdygpO1xuICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKG5ldyBSZXBsYXlFdmVudChub3csIHZhbHVlKSk7XG4gICAgICAgIHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKG5vdyk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKHRoaXMuX2dldE5vdygpKTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChzdWJzY3JpYmVyID0gbmV3IG9ic2VydmVPbl8xLk9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgc2NoZWR1bGVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBsZW4gPSBldmVudHMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbiAmJiAhc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGV2ZW50c1tpbmRleF0udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9nZXROb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zY2hlZHVsZXIgfHwgcXVldWVfMS5xdWV1ZSkubm93KCk7XG4gICAgfTtcbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMgPSBmdW5jdGlvbiAobm93KSB7XG4gICAgICAgIHZhciBidWZmZXJTaXplID0gdGhpcy5idWZmZXJTaXplO1xuICAgICAgICB2YXIgX3dpbmRvd1RpbWUgPSB0aGlzLl93aW5kb3dUaW1lO1xuICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgIHZhciBldmVudHNDb3VudCA9IGV2ZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBzcGxpY2VDb3VudCA9IDA7XG4gICAgICAgIC8vIFRyaW0gZXZlbnRzIHRoYXQgZmFsbCBvdXQgb2YgdGhlIHRpbWUgd2luZG93LlxuICAgICAgICAvLyBTdGFydCBhdCB0aGUgZnJvbnQgb2YgdGhlIGxpc3QuIEJyZWFrIGVhcmx5IG9uY2VcbiAgICAgICAgLy8gd2UgZW5jb3VudGVyIGFuIGV2ZW50IHRoYXQgZmFsbHMgd2l0aGluIHRoZSB3aW5kb3cuXG4gICAgICAgIHdoaWxlIChzcGxpY2VDb3VudCA8IGV2ZW50c0NvdW50KSB7XG4gICAgICAgICAgICBpZiAoKG5vdyAtIGV2ZW50c1tzcGxpY2VDb3VudF0udGltZSkgPCBfd2luZG93VGltZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3BsaWNlQ291bnQgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnRzQ291bnQgPiBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICBzcGxpY2VDb3VudCA9IE1hdGgubWF4KHNwbGljZUNvdW50LCBldmVudHNDb3VudCAtIGJ1ZmZlclNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGxpY2VDb3VudCA+IDApIHtcbiAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UoMCwgc3BsaWNlQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudHM7XG4gICAgfTtcbiAgICByZXR1cm4gUmVwbGF5U3ViamVjdDtcbn0oU3ViamVjdF8xLlN1YmplY3QpKTtcbmV4cG9ydHMuUmVwbGF5U3ViamVjdCA9IFJlcGxheVN1YmplY3Q7XG52YXIgUmVwbGF5RXZlbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlcGxheUV2ZW50KHRpbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIFJlcGxheUV2ZW50O1xufSgpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheVN1YmplY3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9SZXBsYXlTdWJqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBRdWV1ZVNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9RdWV1ZVNjaGVkdWxlcicpO1xuZXhwb3J0cy5xdWV1ZSA9IG5ldyBRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWV1ZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9xdWV1ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBpbnZva2luZyBhIHNwZWNpZmllZCBzZWxlY3RvciBvbiBpdGVtc1xuICogZW1pdHRlZCBieSBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbXVsdGljYXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIC0gYSBmdW5jdGlvbiB0aGF0IGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzdHJlYW1cbiAqIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHN0cmVhbS5cbiAqIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGVcbiAqIHRpbWUgb2YgdGhlIHN1YnNjcmlwdGlvbiBmb3J3YXJkLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIGludm9raW5nIHRoZSBzZWxlY3RvclxuICogb24gdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgYSBgQ29ubmVjdGFibGVPYnNlcnZhYmxlYCB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG9cbiAqIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS5cbiAqIEBtZXRob2QgbXVsdGljYXN0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtdWx0aWNhc3Qoc3ViamVjdE9yU3ViamVjdEZhY3RvcnkpIHtcbiAgICB2YXIgc3ViamVjdEZhY3Rvcnk7XG4gICAgaWYgKHR5cGVvZiBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzdWJqZWN0RmFjdG9yeSA9IHN1YmplY3RPclN1YmplY3RGYWN0b3J5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3ViamVjdEZhY3RvcnkgPSBmdW5jdGlvbiBzdWJqZWN0RmFjdG9yeSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGUodGhpcywgc3ViamVjdEZhY3RvcnkpO1xufVxuZXhwb3J0cy5tdWx0aWNhc3QgPSBtdWx0aWNhc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tdWx0aWNhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tdWx0aWNhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xuLyoqXG4gKiBAY2xhc3MgQ29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+XG4gKi9cbnZhciBDb25uZWN0YWJsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVPYnNlcnZhYmxlKHNvdXJjZSwgc3ViamVjdEZhY3RvcnkpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLnN1YmplY3RGYWN0b3J5ID0gc3ViamVjdEZhY3Rvcnk7XG4gICAgfVxuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFN1YmplY3QoKS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmdldFN1YmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuICAgICAgICBpZiAoc3ViamVjdCAmJiAhc3ViamVjdC5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICh0aGlzLnN1YmplY3QgPSB0aGlzLnN1YmplY3RGYWN0b3J5KCkpO1xuICAgIH07XG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAmJiAhc3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUodGhpcy5nZXRTdWJqZWN0KCkpO1xuICAgICAgICBzdWJzY3JpcHRpb24uYWRkKG5ldyBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbih0aGlzKSk7XG4gICAgICAgIHJldHVybiAodGhpcy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb24pO1xuICAgIH07XG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5yZWZDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudE9ic2VydmFibGUodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBvcGVuZWQgZm9yIGBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbmAuXG4gICAgICogTm90IHRvIGNhbGwgZnJvbSBvdGhlcnMuXG4gICAgICovXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fY2xvc2VTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBDb25uZWN0YWJsZU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25uZWN0YWJsZVN1YnNjcmlwdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbihjb25uZWN0YWJsZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IGNvbm5lY3RhYmxlO1xuICAgIH1cbiAgICBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlO1xuICAgICAgICBjb25uZWN0YWJsZS5fY2xvc2VTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQ29ubmVjdGFibGVTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZWZDb3VudE9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVmQ291bnRPYnNlcnZhYmxlKGNvbm5lY3RhYmxlLCByZWZDb3VudCkge1xuICAgICAgICBpZiAocmVmQ291bnQgPT09IHZvaWQgMCkgeyByZWZDb3VudCA9IDA7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBjb25uZWN0YWJsZTtcbiAgICAgICAgdGhpcy5yZWZDb3VudCA9IHJlZkNvdW50O1xuICAgIH1cbiAgICBSZWZDb3VudE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlO1xuICAgICAgICB2YXIgcmVmQ291bnRTdWJzY3JpYmVyID0gbmV3IFJlZkNvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzKTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IGNvbm5lY3RhYmxlLnN1YnNjcmliZShyZWZDb3VudFN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCAmJiArK3RoaXMucmVmQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIHJlZkNvdW50U3Vic2NyaWJlci5jb25uZWN0aW9uID0gdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGFibGUuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICByZXR1cm4gUmVmQ291bnRPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSZWZDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZWZDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVmQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCByZWZDb3VudE9ic2VydmFibGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy5yZWZDb3VudE9ic2VydmFibGUgPSByZWZDb3VudE9ic2VydmFibGU7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHJlZkNvdW50T2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQodGhpcyk7XG4gICAgfVxuICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLl9yZXNldENvbm5lY3RhYmxlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9yZXNldENvbm5lY3RhYmxlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3Jlc2V0Q29ubmVjdGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG4gICAgICAgIHZhciBvYnNDb25uZWN0aW9uID0gb2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuICAgICAgICB2YXIgc3ViQ29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcbiAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZS5yZWZDb3VudCA9IDA7XG4gICAgICAgICAgICBvYnNDb25uZWN0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBvYnNlcnZhYmxlLmNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSB0aGlzLnJlZkNvdW50T2JzZXJ2YWJsZTtcbiAgICAgICAgaWYgKG9ic2VydmFibGUucmVmQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoLS1vYnNlcnZhYmxlLnJlZkNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgb2JzQ29ubmVjdGlvbiA9IG9ic2VydmFibGUuY29ubmVjdGlvbjtcbiAgICAgICAgICAgIHZhciBzdWJDb25uZWN0aW9uID0gdGhpcy5jb25uZWN0aW9uO1xuICAgICAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIG9ic0Nvbm5lY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLmNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUmVmQ291bnRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGFibGVPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjYXRjaF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY2F0Y2gnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jYXRjaCA9IGNhdGNoXzEuX2NhdGNoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2guanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY2F0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA0MjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBDYXRjaGVzIGVycm9ycyBvbiB0aGUgb2JzZXJ2YWJsZSB0byBiZSBoYW5kbGVkIGJ5IHJldHVybmluZyBhIG5ldyBvYnNlcnZhYmxlIG9yIHRocm93aW5nIGFuIGVycm9yLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc2VsZWN0b3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFzIGFyZ3VtZW50cyBgZXJyYCwgd2hpY2ggaXMgdGhlIGVycm9yLCBhbmQgYGNhdWdodGAsIHdoaWNoXG4gKiAgaXMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlLCBpbiBjYXNlIHlvdSdkIGxpa2UgdG8gXCJyZXRyeVwiIHRoYXQgb2JzZXJ2YWJsZSBieSByZXR1cm5pbmcgaXQgYWdhaW4uIFdoYXRldmVyIG9ic2VydmFibGVcbiAqICBpcyByZXR1cm5lZCBieSB0aGUgYHNlbGVjdG9yYCB3aWxsIGJlIHVzZWQgdG8gY29udGludWUgdGhlIG9ic2VydmFibGUgY2hhaW4uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBvYnNlcnZhYmxlIHRoYXQgb3JpZ2luYXRlcyBmcm9tIGVpdGhlciB0aGUgc291cmNlIG9yIHRoZSBvYnNlcnZhYmxlIHJldHVybmVkIGJ5IHRoZVxuICogIGNhdGNoIGBzZWxlY3RvcmAgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIGNhdGNoXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBfY2F0Y2goc2VsZWN0b3IpIHtcbiAgICB2YXIgb3BlcmF0b3IgPSBuZXcgQ2F0Y2hPcGVyYXRvcihzZWxlY3Rvcik7XG4gICAgdmFyIGNhdWdodCA9IHRoaXMubGlmdChvcGVyYXRvcik7XG4gICAgcmV0dXJuIChvcGVyYXRvci5jYXVnaHQgPSBjYXVnaHQpO1xufVxuZXhwb3J0cy5fY2F0Y2ggPSBfY2F0Y2g7XG52YXIgQ2F0Y2hPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2F0Y2hPcGVyYXRvcihzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgfVxuICAgIENhdGNoT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQ2F0Y2hTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc2VsZWN0b3IsIHRoaXMuY2F1Z2h0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2F0Y2hPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIENhdGNoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhdGNoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDYXRjaFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNlbGVjdG9yLCBjYXVnaHQpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY2F1Z2h0ID0gY2F1Z2h0O1xuICAgIH1cbiAgICAvLyBOT1RFOiBvdmVycmlkaW5nIGBlcnJvcmAgaW5zdGVhZCBvZiBgX2Vycm9yYCBiZWNhdXNlIHdlIGRvbid0IHdhbnRcbiAgICAvLyB0byBoYXZlIHRoaXMgZmxhZyB0aGlzIHN1YnNjcmliZXIgYXMgYGlzU3RvcHBlZGAuXG4gICAgQ2F0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZWxlY3RvcihlcnIsIHRoaXMuY2F1Z2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2F0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5yZW1vdmUodGhpcyk7XG4gICAgICAgIHJlc3VsdC5zdWJzY3JpYmUodGhpcy5kZXN0aW5hdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gQ2F0Y2hTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2guanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jYXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDQyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbWJpbmVBbGxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbWJpbmVBbGwnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lQWxsID0gY29tYmluZUFsbF8xLmNvbWJpbmVBbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lQWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbWJpbmVBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGNvbWJpbmVMYXRlc3RfMSA9IHJlcXVpcmUoJy4vY29tYmluZUxhdGVzdCcpO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciB0aGUgb3V0ZXIgT2JzZXJ2YWJsZSB0byBjb21wbGV0ZSwgdGhlbiBhcHBseWluZyB7QGxpbmsgY29tYmluZUxhdGVzdH0uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgYnkgYXBwbHlpbmdcbiAqIHtAbGluayBjb21iaW5lTGF0ZXN0fSB3aGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzIGNvbXBsZXRlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb21iaW5lQWxsLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFRha2VzIGFuIE9ic2VydmFibGUgb2YgT2JzZXJ2YWJsZXMsIGFuZCBjb2xsZWN0cyBhbGwgT2JzZXJ2YWJsZXMgZnJvbSBpdC5cbiAqIE9uY2UgdGhlIG91dGVyIE9ic2VydmFibGUgY29tcGxldGVzLCBpdCBzdWJzY3JpYmVzIHRvIGFsbCBjb2xsZWN0ZWRcbiAqIE9ic2VydmFibGVzIGFuZCBjb21iaW5lcyB0aGVpciB2YWx1ZXMgdXNpbmcgdGhlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuICogc3RyYXRlZ3ksIHN1Y2ggdGhhdDpcbiAqIC0gRXZlcnkgdGltZSBhbiBpbm5lciBPYnNlcnZhYmxlIGVtaXRzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMuXG4gKiAtIFdoZW4gdGhlIHJldHVybmVkIG9ic2VydmFibGUgZW1pdHMsIGl0IGVtaXRzIGFsbCBvZiB0aGUgbGF0ZXN0IHZhbHVlcyBieTpcbiAqICAgLSBJZiBhIGBwcm9qZWN0YCBmdW5jdGlvbiBpcyBwcm92aWRlZCwgaXQgaXMgY2FsbGVkIHdpdGggZWFjaCByZWNlbnQgdmFsdWVcbiAqICAgICBmcm9tIGVhY2ggaW5uZXIgT2JzZXJ2YWJsZSBpbiB3aGF0ZXZlciBvcmRlciB0aGV5IGFycml2ZWQsIGFuZCB0aGUgcmVzdWx0XG4gKiAgICAgb2YgdGhlIGBwcm9qZWN0YCBmdW5jdGlvbiBpcyB3aGF0IGlzIGVtaXR0ZWQgYnkgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICogICAtIElmIHRoZXJlIGlzIG5vIGBwcm9qZWN0YCBmdW5jdGlvbiwgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBtb3N0IHJlY2VudFxuICogICAgIHZhbHVlcyBpcyBlbWl0dGVkIGJ5IHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgdHdvIGNsaWNrIGV2ZW50cyB0byBhIGZpbml0ZSBpbnRlcnZhbCBPYnNlcnZhYmxlLCB0aGVuIGFwcGx5IGNvbWJpbmVBbGw8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcChldiA9PlxuICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKE1hdGgucmFuZG9tKCkqMjAwMCkudGFrZSgzKVxuICogKS50YWtlKDIpO1xuICogdmFyIHJlc3VsdCA9IGhpZ2hlck9yZGVyLmNvbWJpbmVBbGwoKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBtYXAgdGhlIG1vc3QgcmVjZW50XG4gKiB2YWx1ZXMgZnJvbSBlYWNoIGlubmVyIE9ic2VydmFibGUgaW50byBhIG5ldyByZXN1bHQuIFRha2VzIGVhY2ggb2YgdGhlIG1vc3RcbiAqIHJlY2VudCB2YWx1ZXMgZnJvbSBlYWNoIGNvbGxlY3RlZCBpbm5lciBPYnNlcnZhYmxlIGFzIGFyZ3VtZW50cywgaW4gb3JkZXIuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIHByb2plY3RlZCByZXN1bHRzIG9yIGFycmF5cyBvZiByZWNlbnRcbiAqIHZhbHVlcy5cbiAqIEBtZXRob2QgY29tYmluZUFsbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29tYmluZUFsbChwcm9qZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgY29tYmluZUxhdGVzdF8xLkNvbWJpbmVMYXRlc3RPcGVyYXRvcihwcm9qZWN0KSk7XG59XG5leHBvcnRzLmNvbWJpbmVBbGwgPSBjb21iaW5lQWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvbWJpbmVBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb21iaW5lTGF0ZXN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb21iaW5lTGF0ZXN0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29tYmluZUxhdGVzdCA9IGNvbWJpbmVMYXRlc3RfMS5jb21iaW5lTGF0ZXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb21iaW5lTGF0ZXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29uY2F0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb25jYXQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXQgPSBjb25jYXRfMS5jb25jYXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0LmpzXG4gKiogbW9kdWxlIGlkID0gNDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29uY2F0QWxsXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb25jYXRBbGwnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRBbGwgPSBjb25jYXRBbGxfMS5jb25jYXRBbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0QWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBtZXJnZUFsbF8xID0gcmVxdWlyZSgnLi9tZXJnZUFsbCcpO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIGJ5XG4gKiBjb25jYXRlbmF0aW5nIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpbiBvcmRlci5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBwdXR0aW5nIG9uZVxuICogaW5uZXIgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0QWxsLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEpvaW5zIGV2ZXJ5IE9ic2VydmFibGUgZW1pdHRlZCBieSB0aGUgc291cmNlIChhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlKSwgaW5cbiAqIGEgc2VyaWFsIGZhc2hpb24uIEl0IHN1YnNjcmliZXMgdG8gZWFjaCBpbm5lciBPYnNlcnZhYmxlIG9ubHkgYWZ0ZXIgdGhlXG4gKiBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlIGhhcyBjb21wbGV0ZWQsIGFuZCBtZXJnZXMgYWxsIG9mIHRoZWlyIHZhbHVlcyBpbnRvXG4gKiB0aGUgcmV0dXJuZWQgb2JzZXJ2YWJsZS5cbiAqXG4gKiBfX1dhcm5pbmc6X18gSWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIE9ic2VydmFibGVzIHF1aWNrbHkgYW5kXG4gKiBlbmRsZXNzbHksIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZXMgaXQgZW1pdHMgZ2VuZXJhbGx5IGNvbXBsZXRlIHNsb3dlciB0aGFuXG4gKiB0aGUgc291cmNlIGVtaXRzLCB5b3UgY2FuIHJ1biBpbnRvIG1lbW9yeSBpc3N1ZXMgYXMgdGhlIGluY29taW5nIE9ic2VydmFibGVzXG4gKiBjb2xsZWN0IGluIGFuIHVuYm91bmRlZCBidWZmZXIuXG4gKlxuICogTm90ZTogYGNvbmNhdEFsbGAgaXMgZXF1aXZhbGVudCB0byBgbWVyZ2VBbGxgIHdpdGggY29uY3VycmVuY3kgcGFyYW1ldGVyIHNldFxuICogdG8gYDFgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkZvciBlYWNoIGNsaWNrIGV2ZW50LCB0aWNrIGV2ZXJ5IHNlY29uZCBmcm9tIDAgdG8gMywgd2l0aCBubyBjb25jdXJyZW5jeTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG4gKiB2YXIgZmlyc3RPcmRlciA9IGhpZ2hlck9yZGVyLmNvbmNhdEFsbCgpO1xuICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgemlwQWxsfVxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgZW1pdHRpbmcgdmFsdWVzIGZyb20gYWxsIHRoZSBpbm5lclxuICogT2JzZXJ2YWJsZXMgY29uY2F0ZW5hdGVkLlxuICogQG1ldGhvZCBjb25jYXRBbGxcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdEFsbCgpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZUFsbF8xLk1lcmdlQWxsT3BlcmF0b3IoMSkpO1xufVxuZXhwb3J0cy5jb25jYXRBbGwgPSBjb25jYXRBbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb25jYXRBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb25jYXRNYXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbmNhdE1hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdE1hcCA9IGNvbmNhdE1hcF8xLmNvbmNhdE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG1lcmdlTWFwXzEgPSByZXF1aXJlKCcuL21lcmdlTWFwJyk7XG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUsIGluIGEgc2VyaWFsaXplZCBmYXNoaW9uIHdhaXRpbmcgZm9yIGVhY2ggb25lIHRvIGNvbXBsZXRlIGJlZm9yZVxuICogbWVyZ2luZyB0aGUgbmV4dC5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TWFwcyBlYWNoIHZhbHVlIHRvIGFuIE9ic2VydmFibGUsIHRoZW4gZmxhdHRlbnMgYWxsIG9mXG4gKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgY29uY2F0QWxsfS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXRNYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuICogc3VwcGx5IHRvIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgd2hlcmUgdGhhdCBmdW5jdGlvblxuICogcmV0dXJucyBhbiAoc28tY2FsbGVkIFwiaW5uZXJcIikgT2JzZXJ2YWJsZS4gRWFjaCBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpc1xuICogY29uY2F0ZW5hdGVkIHdpdGggdGhlIHByZXZpb3VzIGlubmVyIE9ic2VydmFibGUuXG4gKlxuICogX19XYXJuaW5nOl9fIGlmIHNvdXJjZSB2YWx1ZXMgYXJyaXZlIGVuZGxlc3NseSBhbmQgZmFzdGVyIHRoYW4gdGhlaXJcbiAqIGNvcnJlc3BvbmRpbmcgaW5uZXIgT2JzZXJ2YWJsZXMgY2FuIGNvbXBsZXRlLCBpdCB3aWxsIHJlc3VsdCBpbiBtZW1vcnkgaXNzdWVzXG4gKiBhcyBpbm5lciBPYnNlcnZhYmxlcyBhbWFzcyBpbiBhbiB1bmJvdW5kZWQgYnVmZmVyIHdhaXRpbmcgZm9yIHRoZWlyIHR1cm4gdG9cbiAqIGJlIHN1YnNjcmliZWQgdG8uXG4gKlxuICogTm90ZTogYGNvbmNhdE1hcGAgaXMgZXF1aXZhbGVudCB0byBgbWVyZ2VNYXBgIHdpdGggY29uY3VycmVuY3kgcGFyYW1ldGVyIHNldFxuICogdG8gYDFgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkZvciBlYWNoIGNsaWNrIGV2ZW50LCB0aWNrIGV2ZXJ5IHNlY29uZCBmcm9tIDAgdG8gMywgd2l0aCBubyBjb25jdXJyZW5jeTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmNvbmNhdE1hcChldiA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXR9XG4gKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cbiAqIEBzZWUge0BsaW5rIGV4aGF1c3RNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCA/aW5kZXg6IG51bWJlcik6IE9ic2VydmFibGV9IHByb2plY3QgQSBmdW5jdGlvblxuICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cbiAqIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gb2JzZXJ2YWJsZSBvZiB2YWx1ZXMgbWVyZ2VkIGZyb20gdGhlIHByb2plY3RlZFxuICogT2JzZXJ2YWJsZXMgYXMgdGhleSB3ZXJlIHN1YnNjcmliZWQgdG8sIG9uZSBhdCBhIHRpbWUuIE9wdGlvbmFsbHksIHRoZXNlXG4gKiB2YWx1ZXMgbWF5IGhhdmUgYmVlbiBwcm9qZWN0ZWQgZnJvbSBhIHBhc3NlZCBgcHJvamVjdFJlc3VsdGAgYXJndW1lbnQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcbiAqIHByb2plY3Rpb24gZnVuY3Rpb24gKGFuZCB0aGUgb3B0aW9uYWwgYHJlc3VsdFNlbGVjdG9yYCkgdG8gZWFjaCBpdGVtIGVtaXR0ZWRcbiAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgdGFraW5nIHZhbHVlcyBmcm9tIGVhY2ggcHJvamVjdGVkIGlubmVyXG4gKiBPYnNlcnZhYmxlIHNlcXVlbnRpYWxseS5cbiAqIEBtZXRob2QgY29uY2F0TWFwXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb25jYXRNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZU1hcF8xLk1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIDEpKTtcbn1cbmV4cG9ydHMuY29uY2F0TWFwID0gY29uY2F0TWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0TWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qKlxuICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TWFwcyBlYWNoIHZhbHVlIHRvIGFuIE9ic2VydmFibGUsIHRoZW4gZmxhdHRlbnMgYWxsIG9mXG4gKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgbWVyZ2VBbGx9Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlTWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3VcbiAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cbiAqIHJldHVybnMgYW4gT2JzZXJ2YWJsZSwgYW5kIHRoZW4gbWVyZ2luZyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgYW5kXG4gKiBlbWl0dGluZyB0aGUgcmVzdWx0cyBvZiB0aGlzIG1lcmdlci5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gZWFjaCBsZXR0ZXIgdG8gYW4gT2JzZXJ2YWJsZSB0aWNraW5nIGV2ZXJ5IDEgc2Vjb25kPC9jYXB0aW9uPlxuICogdmFyIGxldHRlcnMgPSBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpO1xuICogdmFyIHJlc3VsdCA9IGxldHRlcnMubWVyZ2VNYXAoeCA9PlxuICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLm1hcChpID0+IHgraSlcbiAqICk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cbiAqIEBzZWUge0BsaW5rIGV4aGF1c3RNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZX1cbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cbiAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCA/aW5kZXg6IG51bWJlcik6IE9ic2VydmFibGV9IHByb2plY3QgQSBmdW5jdGlvblxuICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cbiAqIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcbiAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG4gKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG1lcmdpbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE9ic2VydmFibGVzIG9idGFpbmVkXG4gKiBmcm9tIHRoaXMgdHJhbnNmb3JtYXRpb24uXG4gKiBAbWV0aG9kIG1lcmdlTWFwXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtZXJnZU1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSk7XG59XG5leHBvcnRzLm1lcmdlTWFwID0gbWVyZ2VNYXA7XG52YXIgTWVyZ2VNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgIH1cbiAgICBNZXJnZU1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNZXJnZU1hcFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJvamVjdCwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1lcmdlTWFwT3BlcmF0b3IgPSBNZXJnZU1hcE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNZXJnZU1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25vdGlmeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydHMuTWVyZ2VNYXBTdWJzY3JpYmVyID0gTWVyZ2VNYXBTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tZXJnZU1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbmNhdE1hcFRvXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb25jYXRNYXBUbycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdE1hcFRvID0gY29uY2F0TWFwVG9fMS5jb25jYXRNYXBUbztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbmNhdE1hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNDMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBtZXJnZU1hcFRvXzEgPSByZXF1aXJlKCcuL21lcmdlTWFwVG8nKTtcbi8qKlxuICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgbXVsdGlwbGVcbiAqIHRpbWVzIGluIGEgc2VyaWFsaXplZCBmYXNoaW9uIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBjb25jYXRNYXB9LCBidXQgbWFwcyBlYWNoIHZhbHVlXG4gKiBhbHdheXMgdG8gdGhlIHNhbWUgaW5uZXIgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXRNYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3NcbiAqIG9mIHRoZSBzb3VyY2UgdmFsdWUsIGFuZCB0aGVuIGZsYXR0ZW5zIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBpbnRvIG9uZVxuICogc2luZ2xlIE9ic2VydmFibGUsIHdoaWNoIGlzIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gRWFjaCBuZXcgYGlubmVyT2JzZXJ2YWJsZWBcbiAqIGluc3RhbmNlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGlzIGNvbmNhdGVuYXRlZCB3aXRoIHRoZSBwcmV2aW91c1xuICogYGlubmVyT2JzZXJ2YWJsZWAgaW5zdGFuY2UuXG4gKlxuICogX19XYXJuaW5nOl9fIGlmIHNvdXJjZSB2YWx1ZXMgYXJyaXZlIGVuZGxlc3NseSBhbmQgZmFzdGVyIHRoYW4gdGhlaXJcbiAqIGNvcnJlc3BvbmRpbmcgaW5uZXIgT2JzZXJ2YWJsZXMgY2FuIGNvbXBsZXRlLCBpdCB3aWxsIHJlc3VsdCBpbiBtZW1vcnkgaXNzdWVzXG4gKiBhcyBpbm5lciBPYnNlcnZhYmxlcyBhbWFzcyBpbiBhbiB1bmJvdW5kZWQgYnVmZmVyIHdhaXRpbmcgZm9yIHRoZWlyIHR1cm4gdG9cbiAqIGJlIHN1YnNjcmliZWQgdG8uXG4gKlxuICogTm90ZTogYGNvbmNhdE1hcFRvYCBpcyBlcXVpdmFsZW50IHRvIGBtZXJnZU1hcFRvYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlclxuICogc2V0IHRvIGAxYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5jb25jYXRNYXBUbyhSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXR9XG4gKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbm5lck9ic2VydmFibGUgQW4gT2JzZXJ2YWJsZSB0byByZXBsYWNlIGVhY2ggdmFsdWUgZnJvbVxuICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgb2YgdmFsdWVzIG1lcmdlZCB0b2dldGhlciBieSBqb2luaW5nIHRoZVxuICogcGFzc2VkIG9ic2VydmFibGUgd2l0aCBpdHNlbGYsIG9uZSBhZnRlciB0aGUgb3RoZXIsIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWRcbiAqIGZyb20gdGhlIHNvdXJjZS5cbiAqIEBtZXRob2QgY29uY2F0TWFwVG9cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdE1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZU1hcFRvXzEuTWVyZ2VNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIDEpKTtcbn1cbmV4cG9ydHMuY29uY2F0TWFwVG8gPSBjb25jYXRNYXBUbztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0TWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0MzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgc2FtZSBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBtdWx0aXBsZVxuICogdGltZXMgaW4gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIG1lcmdlTWFwfSwgYnV0IG1hcHMgZWFjaCB2YWx1ZSBhbHdheXNcbiAqIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2VNYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3NcbiAqIG9mIHRoZSBzb3VyY2UgdmFsdWUsIGFuZCB0aGVuIG1lcmdlcyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgaW50byBvbmVcbiAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHN0YXJ0IGFuIGludGVydmFsIE9ic2VydmFibGUgdGlja2luZyBldmVyeSAxIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLm1lcmdlTWFwVG8oUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2V9XG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbm5lck9ic2VydmFibGUgQW4gT2JzZXJ2YWJsZSB0byByZXBsYWNlIGVhY2ggdmFsdWUgZnJvbVxuICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuICogYGlubmVyT2JzZXJ2YWJsZWAgKGFuZCBvcHRpb25hbGx5IHRyYW5zZm9ybWVkIHRocm91Z2ggYHJlc3VsdFNlbGVjdG9yYCkgZXZlcnlcbiAqIHRpbWUgYSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgbWVyZ2VNYXBUb1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2VNYXBUbyhpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uY3VycmVudCA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICByZXN1bHRTZWxlY3RvciA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1lcmdlTWFwVG9PcGVyYXRvcihpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSk7XG59XG5leHBvcnRzLm1lcmdlTWFwVG8gPSBtZXJnZU1hcFRvO1xuLy8gVE9ETzogRmlndXJlIG91dCBjb3JyZWN0IHNpZ25hdHVyZSBoZXJlOiBhbiBPcGVyYXRvcjxPYnNlcnZhYmxlPFQ+LCBSPlxuLy8gICAgICAgbmVlZHMgdG8gaW1wbGVtZW50IGNhbGwob2JzZXJ2ZXI6IFN1YnNjcmliZXI8Uj4pOiBTdWJzY3JpYmVyPE9ic2VydmFibGU8VD4+XG52YXIgTWVyZ2VNYXBUb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNZXJnZU1hcFRvT3BlcmF0b3IoaXNoLCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICB9XG4gICAgTWVyZ2VNYXBUb09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNZXJnZU1hcFRvU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5pc2gsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMuY29uY3VycmVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlTWFwVG9PcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1lcmdlTWFwVG9PcGVyYXRvciA9IE1lcmdlTWFwVG9PcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWVyZ2VNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZXJnZU1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgaXNoLCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmlzaCA9IGlzaDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSB0aGlzLnJlc3VsdFNlbGVjdG9yO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICAgICAgdmFyIGlzaCA9IHRoaXMuaXNoO1xuICAgICAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlKys7XG4gICAgICAgICAgICB0aGlzLl9pbm5lclN1Yihpc2gsIGRlc3RpbmF0aW9uLCByZXN1bHRTZWxlY3RvciwgdmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKGlzaCwgZGVzdGluYXRpb24sIHJlc3VsdFNlbGVjdG9yLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBpc2gsIHZhbHVlLCBpbmRleCkpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChyZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy50cnlTZWxlY3RSZXN1bHQob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5U2VsZWN0UmVzdWx0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG4gICAgICAgIHRoaXMuYWN0aXZlLS07XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlTWFwVG9TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydHMuTWVyZ2VNYXBUb1N1YnNjcmliZXIgPSBNZXJnZU1hcFRvU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tZXJnZU1hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNDM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY291bnRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvdW50Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY291bnQgPSBjb3VudF8xLmNvdW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY291bnQuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBDb3VudHMgdGhlIG51bWJlciBvZiBlbWlzc2lvbnMgb24gdGhlIHNvdXJjZSBhbmQgZW1pdHMgdGhhdCBudW1iZXIgd2hlbiB0aGVcbiAqIHNvdXJjZSBjb21wbGV0ZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRlbGxzIGhvdyBtYW55IHZhbHVlcyB3ZXJlIGVtaXR0ZWQsIHdoZW4gdGhlIHNvdXJjZVxuICogY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvdW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBjb3VudGAgdHJhbnNmb3JtcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdmFsdWVzIGludG8gYW4gT2JzZXJ2YWJsZSB0aGF0XG4gKiBlbWl0cyBhIHNpbmdsZSB2YWx1ZSB0aGF0IHJlcHJlc2VudHMgdGhlIG51bWJlciBvZiB2YWx1ZXMgZW1pdHRlZCBieSB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgdGVybWluYXRlcyB3aXRoIGFuIGVycm9yLCBgY291bnRgXG4gKiB3aWxsIHBhc3MgdGhpcyBlcnJvciBub3RpZmljYXRpb24gYWxvbmcgd2l0aG91dCBlbWl0dGluZyBhbiB2YWx1ZSBmaXJzdC4gSWZcbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBkb2VzIG5vdCB0ZXJtaW5hdGUgYXQgYWxsLCBgY291bnRgIHdpbGwgbmVpdGhlciBlbWl0XG4gKiBhIHZhbHVlIG5vciB0ZXJtaW5hdGUuIFRoaXMgb3BlcmF0b3IgdGFrZXMgYW4gb3B0aW9uYWwgYHByZWRpY2F0ZWAgZnVuY3Rpb25cbiAqIGFzIGFyZ3VtZW50LCBpbiB3aGljaCBjYXNlIHRoZSBvdXRwdXQgZW1pc3Npb24gd2lsbCByZXByZXNlbnQgdGhlIG51bWJlciBvZlxuICogc291cmNlIHZhbHVlcyB0aGF0IG1hdGNoZWQgYHRydWVgIHdpdGggdGhlIGBwcmVkaWNhdGVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50cyBob3cgbWFueSBzZWNvbmRzIGhhdmUgcGFzc2VkIGJlZm9yZSB0aGUgZmlyc3QgY2xpY2sgaGFwcGVuZWQ8L2NhcHRpb24+XG4gKiB2YXIgc2Vjb25kcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHNlY29uZHNCZWZvcmVDbGljayA9IHNlY29uZHMudGFrZVVudGlsKGNsaWNrcyk7XG4gKiB2YXIgcmVzdWx0ID0gc2Vjb25kc0JlZm9yZUNsaWNrLmNvdW50KCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50cyBob3cgbWFueSBvZGQgbnVtYmVycyBhcmUgdGhlcmUgYmV0d2VlbiAxIGFuZCA3PC9jYXB0aW9uPlxuICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDcpO1xuICogdmFyIHJlc3VsdCA9IG51bWJlcnMuY291bnQoaSA9PiBpICUgMiA9PT0gMSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIG1heH1cbiAqIEBzZWUge0BsaW5rIG1pbn1cbiAqIEBzZWUge0BsaW5rIHJlZHVjZX1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpOiBudW1iZXIsIHNvdXJjZTogT2JzZXJ2YWJsZTxUPik6IGJvb2xlYW59IFtwcmVkaWNhdGVdIEFcbiAqIGJvb2xlYW4gZnVuY3Rpb24gdG8gc2VsZWN0IHdoYXQgdmFsdWVzIGFyZSB0byBiZSBjb3VudGVkLiBJdCBpcyBwcm92aWRlZCB3aXRoXG4gKiBhcmd1bWVudHMgb2Y6XG4gKiAtIGB2YWx1ZWA6IHRoZSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIC0gYGluZGV4YDogdGhlICh6ZXJvLWJhc2VkKSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogLSBgc291cmNlYDogdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGluc3RhbmNlIGl0c2VsZi5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2Ygb25lIG51bWJlciB0aGF0IHJlcHJlc2VudHMgdGhlIGNvdW50IGFzXG4gKiBkZXNjcmliZWQgYWJvdmUuXG4gKiBAbWV0aG9kIGNvdW50XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb3VudChwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBDb3VudE9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpcykpO1xufVxuZXhwb3J0cy5jb3VudCA9IGNvdW50O1xudmFyIENvdW50T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvdW50T3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBDb3VudE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IENvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuICAgIHJldHVybiBDb3VudE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQ291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVByZWRpY2F0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIHRoaXMuaW5kZXgrKywgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5jb3VudCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBDb3VudFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gNDM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVtYXRlcmlhbGl6ZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGVtYXRlcmlhbGl6ZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbWF0ZXJpYWxpemUgPSBkZW1hdGVyaWFsaXplXzEuZGVtYXRlcmlhbGl6ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbWF0ZXJpYWxpemUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVtYXRlcmlhbGl6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHRyYW5zZm9ybXMgTm90aWZpY2F0aW9uIG9iamVjdHMgaW50byB0aGUgaXRlbXMgb3Igbm90aWZpY2F0aW9ucyB0aGV5IHJlcHJlc2VudC5cbiAqXG4gKiBAc2VlIHtAbGluayBOb3RpZmljYXRpb259XG4gKlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGFuZCBub3RpZmljYXRpb25zIGVtYmVkZGVkIGluIE5vdGlmaWNhdGlvbiBvYmplY3RzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBkZW1hdGVyaWFsaXplXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkZW1hdGVyaWFsaXplKCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlTWF0ZXJpYWxpemVPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMuZGVtYXRlcmlhbGl6ZSA9IGRlbWF0ZXJpYWxpemU7XG52YXIgRGVNYXRlcmlhbGl6ZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIERlTWF0ZXJpYWxpemVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVNYXRlcmlhbGl6ZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZU1hdGVyaWFsaXplU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgfVxuICAgIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YWx1ZS5vYnNlcnZlKHRoaXMuZGVzdGluYXRpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVtYXRlcmlhbGl6ZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlbWF0ZXJpYWxpemUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkZWJvdW5jZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGVib3VuY2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWJvdW5jZSA9IGRlYm91bmNlXzEuZGVib3VuY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWJvdW5jZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEVtaXRzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgb25seSBhZnRlciBhIHBhcnRpY3VsYXIgdGltZSBzcGFuXG4gKiBkZXRlcm1pbmVkIGJ5IGFub3RoZXIgT2JzZXJ2YWJsZSBoYXMgcGFzc2VkIHdpdGhvdXQgYW5vdGhlciBzb3VyY2UgZW1pc3Npb24uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgZGVib3VuY2VUaW1lfSwgYnV0IHRoZSB0aW1lIHNwYW4gb2ZcbiAqIGVtaXNzaW9uIHNpbGVuY2UgaXMgZGV0ZXJtaW5lZCBieSBhIHNlY29uZCBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlYm91bmNlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBkZWJvdW5jZWAgZGVsYXlzIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IGRyb3BzIHByZXZpb3VzXG4gKiBwZW5kaW5nIGRlbGF5ZWQgZW1pc3Npb25zIGlmIGEgbmV3IHZhbHVlIGFycml2ZXMgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogVGhpcyBvcGVyYXRvciBrZWVwcyB0cmFjayBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWUgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLCBhbmQgc3Bhd25zIGEgZHVyYXRpb24gT2JzZXJ2YWJsZSBieSBjYWxsaW5nIHRoZVxuICogYGR1cmF0aW9uU2VsZWN0b3JgIGZ1bmN0aW9uLiBUaGUgdmFsdWUgaXMgZW1pdHRlZCBvbmx5IHdoZW4gdGhlIGR1cmF0aW9uXG4gKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUgb3IgY29tcGxldGVzLCBhbmQgaWYgbm8gb3RoZXIgdmFsdWUgd2FzIGVtaXR0ZWQgb25cbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBzaW5jZSB0aGUgZHVyYXRpb24gT2JzZXJ2YWJsZSB3YXMgc3Bhd25lZC4gSWYgYSBuZXdcbiAqIHZhbHVlIGFwcGVhcnMgYmVmb3JlIHRoZSBkdXJhdGlvbiBPYnNlcnZhYmxlIGVtaXRzLCB0aGUgcHJldmlvdXMgdmFsdWUgd2lsbFxuICogYmUgZHJvcHBlZCBhbmQgd2lsbCBub3QgYmUgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogTGlrZSB7QGxpbmsgZGVib3VuY2VUaW1lfSwgdGhpcyBpcyBhIHJhdGUtbGltaXRpbmcgb3BlcmF0b3IsIGFuZCBhbHNvIGFcbiAqIGRlbGF5LWxpa2Ugb3BlcmF0b3Igc2luY2Ugb3V0cHV0IGVtaXNzaW9ucyBkbyBub3QgbmVjZXNzYXJpbHkgb2NjdXIgYXQgdGhlXG4gKiBzYW1lIHRpbWUgYXMgdGhleSBkaWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG1vc3QgcmVjZW50IGNsaWNrIGFmdGVyIGEgYnVyc3Qgb2YgY2xpY2tzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MuZGVib3VuY2UoKCkgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2VUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuICogQHNlZSB7QGxpbmsgdGhyb3R0bGV9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IE9ic2VydmFibGV8UHJvbWlzZX0gZHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uXG4gKiB0aGF0IHJlY2VpdmVzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIGZvciBjb21wdXRpbmcgdGhlIHRpbWVvdXRcbiAqIGR1cmF0aW9uIGZvciBlYWNoIHNvdXJjZSB2YWx1ZSwgcmV0dXJuZWQgYXMgYW4gT2JzZXJ2YWJsZSBvciBhIFByb21pc2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIE9ic2VydmFibGUgcmV0dXJuZWQgYnlcbiAqIGBkdXJhdGlvblNlbGVjdG9yYCwgYW5kIG1heSBkcm9wIHNvbWUgdmFsdWVzIGlmIHRoZXkgb2NjdXIgdG9vIGZyZXF1ZW50bHkuXG4gKiBAbWV0aG9kIGRlYm91bmNlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkZWJvdW5jZShkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVib3VuY2VPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmRlYm91bmNlID0gZGVib3VuY2U7XG52YXIgRGVib3VuY2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIERlYm91bmNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVib3VuY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERlYm91bmNlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWJvdW5jZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWJvdW5jZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZHVyYXRpb25TZWxlY3Rvci5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbik7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgfTtcbiAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb247XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERlYm91bmNlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlLmpzXG4gKiogbW9kdWxlIGlkID0gNDQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVib3VuY2VUaW1lXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWJvdW5jZVRpbWUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWJvdW5jZVRpbWUgPSBkZWJvdW5jZVRpbWVfMS5kZWJvdW5jZVRpbWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZVRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNDQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG4vKipcbiAqIEVtaXRzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgb25seSBhZnRlciBhIHBhcnRpY3VsYXIgdGltZSBzcGFuXG4gKiBoYXMgcGFzc2VkIHdpdGhvdXQgYW5vdGhlciBzb3VyY2UgZW1pc3Npb24uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgZGVsYXl9LCBidXQgcGFzc2VzIG9ubHkgdGhlIG1vc3RcbiAqIHJlY2VudCB2YWx1ZSBmcm9tIGVhY2ggYnVyc3Qgb2YgZW1pc3Npb25zLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlYm91bmNlVGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgZGVib3VuY2VUaW1lYCBkZWxheXMgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgZHJvcHNcbiAqIHByZXZpb3VzIHBlbmRpbmcgZGVsYXllZCBlbWlzc2lvbnMgaWYgYSBuZXcgdmFsdWUgYXJyaXZlcyBvbiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGlzIG9wZXJhdG9yIGtlZXBzIHRyYWNrIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSBmcm9tIHRoZVxuICogc291cmNlIE9ic2VydmFibGUsIGFuZCBlbWl0cyB0aGF0IG9ubHkgd2hlbiBgZHVlVGltZWAgZW5vdWdoIHRpbWUgaGFzIHBhc3NlZFxuICogd2l0aG91dCBhbnkgb3RoZXIgdmFsdWUgYXBwZWFyaW5nIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgYSBuZXcgdmFsdWVcbiAqIGFwcGVhcnMgYmVmb3JlIGBkdWVUaW1lYCBzaWxlbmNlIG9jY3VycywgdGhlIHByZXZpb3VzIHZhbHVlIHdpbGwgYmUgZHJvcHBlZFxuICogYW5kIHdpbGwgbm90IGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIFRoaXMgaXMgYSByYXRlLWxpbWl0aW5nIG9wZXJhdG9yLCBiZWNhdXNlIGl0IGlzIGltcG9zc2libGUgZm9yIG1vcmUgdGhhbiBvbmVcbiAqIHZhbHVlIHRvIGJlIGVtaXR0ZWQgaW4gYW55IHRpbWUgd2luZG93IG9mIGR1cmF0aW9uIGBkdWVUaW1lYCwgYnV0IGl0IGlzIGFsc29cbiAqIGEgZGVsYXktbGlrZSBvcGVyYXRvciBzaW5jZSBvdXRwdXQgZW1pc3Npb25zIGRvIG5vdCBvY2N1ciBhdCB0aGUgc2FtZSB0aW1lIGFzXG4gKiB0aGV5IGRpZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuIE9wdGlvbmFsbHkgdGFrZXMgYSB7QGxpbmsgU2NoZWR1bGVyfSBmb3JcbiAqIG1hbmFnaW5nIHRpbWVycy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhZnRlciBhIGJ1cnN0IG9mIGNsaWNrczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmRlYm91bmNlVGltZSgxMDAwKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqIEBzZWUge0BsaW5rIHNhbXBsZVRpbWV9XG4gKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGR1ZVRpbWUgVGhlIHRpbWVvdXQgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIChvciB0aGUgdGltZVxuICogdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBmb3IgdGhlIHdpbmRvdyBvZlxuICogdGltZSByZXF1aXJlZCB0byB3YWl0IGZvciBlbWlzc2lvbiBzaWxlbmNlIGJlZm9yZSBlbWl0dGluZyB0aGUgbW9zdCByZWNlbnRcbiAqIHNvdXJjZSB2YWx1ZS5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgdGltZW91dCBmb3IgZWFjaCB2YWx1ZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgYGR1ZVRpbWVgLCBhbmQgbWF5IGRyb3Agc29tZSB2YWx1ZXMgaWYgdGhleSBvY2N1clxuICogdG9vIGZyZXF1ZW50bHkuXG4gKiBAbWV0aG9kIGRlYm91bmNlVGltZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2VUaW1lKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVib3VuY2VUaW1lT3BlcmF0b3IoZHVlVGltZSwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmRlYm91bmNlVGltZSA9IGRlYm91bmNlVGltZTtcbnZhciBEZWJvdW5jZVRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VUaW1lT3BlcmF0b3IoZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBEZWJvdW5jZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVlVGltZSwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWJvdW5jZVRpbWVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERlYm91bmNlVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTtcbiAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1ZVRpbWUsIHRoaXMpKTtcbiAgICB9O1xuICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZWJvdW5jZWROZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmRlYm91bmNlZE5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJEZWJvdW5jZSgpO1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJEZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoZGVib3VuY2VkU3Vic2NyaXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShkZWJvdW5jZWRTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgZGVib3VuY2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHtcbiAgICBzdWJzY3JpYmVyLmRlYm91bmNlZE5leHQoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlZmF1bHRJZkVtcHR5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlZmF1bHRJZkVtcHR5ID0gZGVmYXVsdElmRW1wdHlfMS5kZWZhdWx0SWZFbXB0eTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gNDQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogRW1pdHMgYSBnaXZlbiB2YWx1ZSBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgY29tcGxldGVzIHdpdGhvdXQgZW1pdHRpbmcgYW55XG4gKiBgbmV4dGAgdmFsdWUsIG90aGVyd2lzZSBtaXJyb3JzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHR1cm5zIG91dCB0byBiZSBlbXB0eSwgdGhlblxuICogdGhpcyBvcGVyYXRvciB3aWxsIGVtaXQgYSBkZWZhdWx0IHZhbHVlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmF1bHRJZkVtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBkZWZhdWx0SWZFbXB0eWAgZW1pdHMgdGhlIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvciBhXG4gKiBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgaXMgZW1wdHkgKGNvbXBsZXRlcyB3aXRob3V0XG4gKiBoYXZpbmcgZW1pdHRlZCBhbnkgYG5leHRgIHZhbHVlKS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZiBubyBjbGlja3MgaGFwcGVuIGluIDUgc2Vjb25kcywgdGhlbiBlbWl0IFwibm8gY2xpY2tzXCI8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGNsaWNrc0JlZm9yZUZpdmUgPSBjbGlja3MudGFrZVVudGlsKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwMCkpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrc0JlZm9yZUZpdmUuZGVmYXVsdElmRW1wdHkoJ25vIGNsaWNrcycpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBlbXB0eX1cbiAqIEBzZWUge0BsaW5rIGxhc3R9XG4gKlxuICogQHBhcmFtIHthbnl9IFtkZWZhdWx0VmFsdWU9bnVsbF0gVGhlIGRlZmF1bHQgdmFsdWUgdXNlZCBpZiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGlzIGVtcHR5LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVpdGhlciB0aGUgc3BlY2lmaWVkXG4gKiBgZGVmYXVsdFZhbHVlYCBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgbm8gaXRlbXMsIG9yIHRoZSB2YWx1ZXMgZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBkZWZhdWx0SWZFbXB0eVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdElmRW1wdHkoZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IG51bGw7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkpO1xufVxuZXhwb3J0cy5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5O1xudmFyIERlZmF1bHRJZkVtcHR5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5T3BlcmF0b3IoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlZmF1bHRWYWx1ZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIERlZmF1bHRJZkVtcHR5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZTtcbiAgICB9XG4gICAgRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmlzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0SWZFbXB0eS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gNDQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVsYXlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2RlbGF5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVsYXkgPSBkZWxheV8xLmRlbGF5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xudmFyIGlzRGF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0RhdGUnKTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgTm90aWZpY2F0aW9uXzEgPSByZXF1aXJlKCcuLi9Ob3RpZmljYXRpb24nKTtcbi8qKlxuICogRGVsYXlzIHRoZSBlbWlzc2lvbiBvZiBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBhIGdpdmVuIHRpbWVvdXQgb3JcbiAqIHVudGlsIGEgZ2l2ZW4gRGF0ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGltZSBzaGlmdHMgZWFjaCBpdGVtIGJ5IHNvbWUgc3BlY2lmaWVkIGFtb3VudCBvZlxuICogbWlsbGlzZWNvbmRzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlbGF5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIElmIHRoZSBkZWxheSBhcmd1bWVudCBpcyBhIE51bWJlciwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoYXQgYW1vdW50IG9mIHRpbWUgZXhwcmVzc2VkIGluIG1pbGxpc2Vjb25kcy4gVGhlIHJlbGF0aXZlXG4gKiB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cbiAqXG4gKiBJZiB0aGUgZGVsYXkgYXJndW1lbnQgaXMgYSBEYXRlLCB0aGlzIG9wZXJhdG9yIHRpbWUgc2hpZnRzIHRoZSBzdGFydCBvZiB0aGVcbiAqIE9ic2VydmFibGUgZXhlY3V0aW9uIHVudGlsIHRoZSBnaXZlbiBkYXRlIG9jY3Vycy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBlYWNoIGNsaWNrIGJ5IG9uZSBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoMTAwMCk7IC8vIGVhY2ggY2xpY2sgZW1pdHRlZCBhZnRlciAxIHNlY29uZFxuICogZGVsYXllZENsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgYWxsIGNsaWNrcyB1bnRpbCBhIGZ1dHVyZSBkYXRlIGhhcHBlbnM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRhdGUgPSBuZXcgRGF0ZSgnTWFyY2ggMTUsIDIwNTAgMTI6MDA6MDAnKTsgLy8gaW4gdGhlIGZ1dHVyZVxuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoZGF0ZSk7IC8vIGNsaWNrIGVtaXR0ZWQgb25seSBhZnRlciB0aGF0IGRhdGVcbiAqIGRlbGF5ZWRDbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cbiAqXG4gKiBAcGFyYW0ge251bWJlcnxEYXRlfSBkZWxheSBUaGUgZGVsYXkgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIChhIGBudW1iZXJgKSBvclxuICogYSBgRGF0ZWAgdW50aWwgd2hpY2ggdGhlIGVtaXNzaW9uIG9mIHRoZSBzb3VyY2UgaXRlbXMgaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3JcbiAqIG1hbmFnaW5nIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGhlIHRpbWUtc2hpZnQgZm9yIGVhY2ggaXRlbS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgdGltZW91dCBvciBEYXRlLlxuICogQG1ldGhvZCBkZWxheVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVsYXkoZGVsYXksIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgdmFyIGFic29sdXRlRGVsYXkgPSBpc0RhdGVfMS5pc0RhdGUoZGVsYXkpO1xuICAgIHZhciBkZWxheUZvciA9IGFic29sdXRlRGVsYXkgPyAoK2RlbGF5IC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGRlbGF5KTtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWxheU9wZXJhdG9yKGRlbGF5Rm9yLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMuZGVsYXkgPSBkZWxheTtcbnZhciBEZWxheU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWxheU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgRGVsYXlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWxheVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kZWxheSwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWxheU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVsYXlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlbGF5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXksIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gZmFsc2U7XG4gICAgfVxuICAgIERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc291cmNlO1xuICAgICAgICB2YXIgcXVldWUgPSBzb3VyY2UucXVldWU7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHN0YXRlLmRlc3RpbmF0aW9uO1xuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiAocXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSkgPD0gMCkge1xuICAgICAgICAgICAgcXVldWUuc2hpZnQoKS5ub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBkZWxheV8xID0gTWF0aC5tYXgoMCwgcXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBkZWxheV8xKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwge1xuICAgICAgICAgICAgc291cmNlOiB0aGlzLCBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbiwgc2NoZWR1bGVyOiBzY2hlZHVsZXJcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuZXJyb3JlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgRGVsYXlNZXNzYWdlKHNjaGVkdWxlci5ub3coKSArIHRoaXMuZGVsYXksIG5vdGlmaWNhdGlvbik7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xudmFyIERlbGF5TWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlNZXNzYWdlKHRpbWUsIG5vdGlmaWNhdGlvbikge1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIERlbGF5TWVzc2FnZTtcbn0oKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gNDQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVsYXlXaGVuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWxheVdoZW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWxheVdoZW4gPSBkZWxheVdoZW5fMS5kZWxheVdoZW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheVdoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVsYXlXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBEZWxheXMgdGhlIGVtaXNzaW9uIG9mIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGEgZ2l2ZW4gdGltZSBzcGFuXG4gKiBkZXRlcm1pbmVkIGJ5IHRoZSBlbWlzc2lvbnMgb2YgYW5vdGhlciBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlbGF5fSwgYnV0IHRoZSB0aW1lIHNwYW4gb2YgdGhlXG4gKiBkZWxheSBkdXJhdGlvbiBpcyBkZXRlcm1pbmVkIGJ5IGEgc2Vjb25kIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZGVsYXlXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBkZWxheVdoZW5gIHRpbWUgc2hpZnRzIGVhY2ggZW1pdHRlZCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBhXG4gKiB0aW1lIHNwYW4gZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUuIFdoZW4gdGhlIHNvdXJjZSBlbWl0cyBhIHZhbHVlLFxuICogdGhlIGBkZWxheUR1cmF0aW9uU2VsZWN0b3JgIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHRoZSBzb3VyY2UgdmFsdWUgYXNcbiAqIGFyZ3VtZW50LCBhbmQgc2hvdWxkIHJldHVybiBhbiBPYnNlcnZhYmxlLCBjYWxsZWQgdGhlIFwiZHVyYXRpb25cIiBPYnNlcnZhYmxlLlxuICogVGhlIHNvdXJjZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IHdoZW4gdGhlIGR1cmF0aW9uXG4gKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUgb3IgY29tcGxldGVzLlxuICpcbiAqIE9wdGlvbmFsbHksIGBkZWxheVdoZW5gIHRha2VzIGEgc2Vjb25kIGFyZ3VtZW50LCBgc3Vic2NyaXB0aW9uRGVsYXlgLCB3aGljaFxuICogaXMgYW4gT2JzZXJ2YWJsZS4gV2hlbiBgc3Vic2NyaXB0aW9uRGVsYXlgIGVtaXRzIGl0cyBmaXJzdCB2YWx1ZSBvclxuICogY29tcGxldGVzLCB0aGUgc291cmNlIE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCB0byBhbmQgc3RhcnRzIGJlaGF2aW5nIGxpa2VcbiAqIGRlc2NyaWJlZCBpbiB0aGUgcHJldmlvdXMgcGFyYWdyYXBoLiBJZiBgc3Vic2NyaXB0aW9uRGVsYXlgIGlzIG5vdCBwcm92aWRlZCxcbiAqIGBkZWxheVdoZW5gIHdpbGwgc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhcyBzb29uIGFzIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBlYWNoIGNsaWNrIGJ5IGEgcmFuZG9tIGFtb3VudCBvZiB0aW1lLCBiZXR3ZWVuIDAgYW5kIDUgc2Vjb25kczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheVdoZW4oZXZlbnQgPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbChNYXRoLnJhbmRvbSgpICogNTAwMClcbiAqICk7XG4gKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5fVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBPYnNlcnZhYmxlfSBkZWxheUR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0XG4gKiByZXR1cm5zIGFuIE9ic2VydmFibGUgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoaWNoXG4gKiBpcyB0aGVuIHVzZWQgdG8gZGVsYXkgdGhlIGVtaXNzaW9uIG9mIHRoYXQgaXRlbSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGVcbiAqIHVudGlsIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGZyb20gdGhpcyBmdW5jdGlvbiBlbWl0cyBhIHZhbHVlLlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzdWJzY3JpcHRpb25EZWxheSBBbiBPYnNlcnZhYmxlIHRoYXQgdHJpZ2dlcnMgdGhlXG4gKiBzdWJzY3JpcHRpb24gdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9uY2UgaXQgZW1pdHMgYW55IHZhbHVlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGRlbGF5cyB0aGUgZW1pc3Npb25zIG9mIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgYnkgYW4gYW1vdW50IG9mIHRpbWUgc3BlY2lmaWVkIGJ5IHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG4gKiBgZGVsYXlEdXJhdGlvblNlbGVjdG9yYC5cbiAqIEBtZXRob2QgZGVsYXlXaGVuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkZWxheVdoZW4oZGVsYXlEdXJhdGlvblNlbGVjdG9yLCBzdWJzY3JpcHRpb25EZWxheSkge1xuICAgIGlmIChzdWJzY3JpcHRpb25EZWxheSkge1xuICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSh0aGlzLCBzdWJzY3JpcHRpb25EZWxheSlcbiAgICAgICAgICAgIC5saWZ0KG5ldyBEZWxheVdoZW5PcGVyYXRvcihkZWxheUR1cmF0aW9uU2VsZWN0b3IpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmRlbGF5V2hlbiA9IGRlbGF5V2hlbjtcbnZhciBEZWxheVdoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICBEZWxheVdoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWxheVdoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlXaGVuT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWxheVdoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVsYXlXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZWxheVdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheUR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH1cbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChvdXRlclZhbHVlKTtcbiAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaW5uZXJTdWIpO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBkZWxheU5vdGlmaWVyID0gdGhpcy5kZWxheUR1cmF0aW9uU2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGRlbGF5Tm90aWZpZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeURlbGF5KGRlbGF5Tm90aWZpZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5yZW1vdmVTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSWR4ID0gdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25JZHggIT09IC0xKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWVzW3N1YnNjcmlwdGlvbklkeF07XG4gICAgICAgICAgICB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JZHgsIDEpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMuc3BsaWNlKHN1YnNjcmlwdGlvbklkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RGVsYXkgPSBmdW5jdGlvbiAoZGVsYXlOb3RpZmllciwgdmFsdWUpIHtcbiAgICAgICAgdmFyIG5vdGlmaWVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkZWxheU5vdGlmaWVyLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuYWRkKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5wdXNoKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy52YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkICYmIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEZWxheVdoZW5TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZShzb3VyY2UsIHN1YnNjcmlwdGlvbkRlbGF5KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25EZWxheSA9IHN1YnNjcmlwdGlvbkRlbGF5O1xuICAgIH1cbiAgICBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkRlbGF5LnN1YnNjcmliZShuZXcgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHBhcmVudCwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc291cmNlU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvU291cmNlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLnBhcmVudC5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Tb3VyY2UoKTtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9Tb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zb3VyY2VTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMucGFyZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5V2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlbGF5V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRpc3RpbmN0VW50aWxDaGFuZ2VkXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWRfMS5kaXN0aW5jdFVudGlsQ2hhbmdlZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RpbmN0VW50aWxDaGFuZ2VkLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkLmpzXG4gKiogbW9kdWxlIGlkID0gNDUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IGFyZSBkaXN0aW5jdCBieSBjb21wYXJpc29uIGZyb20gdGhlIHByZXZpb3VzIGl0ZW0uXG4gKiBJZiBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoZW4gaXQgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggaXRlbSB0byB0ZXN0IGZvciB3aGV0aGVyIG9yIG5vdCB0aGF0IHZhbHVlIHNob3VsZCBiZSBlbWl0dGVkLlxuICogSWYgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIGlzIG5vdCBwcm92aWRlZCwgYW4gZXF1YWxpdHkgY2hlY2sgaXMgdXNlZCBieSBkZWZhdWx0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBhcmVdIG9wdGlvbmFsIGNvbXBhcmlzb24gZnVuY3Rpb24gY2FsbGVkIHRvIHRlc3QgaWYgYW4gaXRlbSBpcyBkaXN0aW5jdCBmcm9tIHRoZSBwcmV2aW91cyBpdGVtIGluIHRoZSBzb3VyY2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgd2l0aCBkaXN0aW5jdCB2YWx1ZXMuXG4gKiBAbWV0aG9kIGRpc3RpbmN0VW50aWxDaGFuZ2VkXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkaXN0aW5jdFVudGlsQ2hhbmdlZChjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IoY29tcGFyZSwga2V5U2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuZGlzdGluY3RVbnRpbENoYW5nZWQgPSBkaXN0aW5jdFVudGlsQ2hhbmdlZDtcbnZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG4gICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICB9XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb21wYXJlLCB0aGlzLmtleVNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuICAgICAgICB0aGlzLmhhc0tleSA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIGNvbXBhcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggPT09IHk7XG4gICAgfTtcbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBrZXlTZWxlY3RvciA9IHRoaXMua2V5U2VsZWN0b3I7XG4gICAgICAgIHZhciBrZXkgPSB2YWx1ZTtcbiAgICAgICAgaWYgKGtleVNlbGVjdG9yKSB7XG4gICAgICAgICAgICBrZXkgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMua2V5U2VsZWN0b3IpKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzS2V5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY29tcGFyZSkodGhpcy5rZXksIGtleSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFzS2V5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQm9vbGVhbihyZXN1bHQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRvXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kbycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRvID0gZG9fMS5fZG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9kby5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFBlcmZvcm0gYSBzaWRlIGVmZmVjdCBmb3IgZXZlcnkgZW1pc3Npb24gb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgcmV0dXJuXG4gKiBhbiBPYnNlcnZhYmxlIHRoYXQgaXMgaWRlbnRpY2FsIHRvIHRoZSBzb3VyY2UuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkludGVyY2VwdHMgZWFjaCBlbWlzc2lvbiBvbiB0aGUgc291cmNlIGFuZCBydW5zIGFcbiAqIGZ1bmN0aW9uLCBidXQgcmV0dXJucyBhbiBvdXRwdXQgd2hpY2ggaXMgaWRlbnRpY2FsIHRvIHRoZSBzb3VyY2UuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZG8ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhIG1pcnJvcmVkIE9ic2VydmFibGUgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgbW9kaWZpZWQgc28gdGhhdFxuICogdGhlIHByb3ZpZGVkIE9ic2VydmVyIGlzIGNhbGxlZCB0byBwZXJmb3JtIGEgc2lkZSBlZmZlY3QgZm9yIGV2ZXJ5IHZhbHVlLFxuICogZXJyb3IsIGFuZCBjb21wbGV0aW9uIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZS4gQW55IGVycm9ycyB0aGF0IGFyZSB0aHJvd24gaW5cbiAqIHRoZSBhZm9yZW1lbnRpb25lZCBPYnNlcnZlciBvciBoYW5kbGVycyBhcmUgc2FmZWx5IHNlbnQgZG93biB0aGUgZXJyb3IgcGF0aFxuICogb2YgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIFRoaXMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgeW91ciBPYnNlcnZhYmxlcyBmb3IgdGhlIGNvcnJlY3QgdmFsdWVzXG4gKiBvciBwZXJmb3JtaW5nIG90aGVyIHNpZGUgZWZmZWN0cy5cbiAqXG4gKiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCB0byBhIGBzdWJzY3JpYmVgIG9uIHRoZSBPYnNlcnZhYmxlLiBJZiB0aGUgT2JzZXJ2YWJsZVxuICogcmV0dXJuZWQgYnkgYGRvYCBpcyBub3Qgc3Vic2NyaWJlZCwgdGhlIHNpZGUgZWZmZWN0cyBzcGVjaWZpZWQgYnkgdGhlXG4gKiBPYnNlcnZlciB3aWxsIG5ldmVyIGhhcHBlbi4gYGRvYCB0aGVyZWZvcmUgc2ltcGx5IHNwaWVzIG9uIGV4aXN0aW5nXG4gKiBleGVjdXRpb24sIGl0IGRvZXMgbm90IHRyaWdnZXIgYW4gZXhlY3V0aW9uIHRvIGhhcHBlbiBsaWtlIGBzdWJzY3JpYmVgIGRvZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSBjbGllbnRYIHBvc2l0aW9uIG9mIHRoYXQgY2xpY2ssIHdoaWxlIGFsc28gbG9nZ2luZyB0aGUgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHBvc2l0aW9ucyA9IGNsaWNrc1xuICogICAuZG8oZXYgPT4gY29uc29sZS5sb2coZXYpKVxuICogICAubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuICogcG9zaXRpb25zLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXB9XG4gKiBAc2VlIHtAbGluayBzdWJzY3JpYmV9XG4gKlxuICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbn0gW25leHRPck9ic2VydmVyXSBBIG5vcm1hbCBPYnNlcnZlciBvYmplY3Qgb3IgYVxuICogY2FsbGJhY2sgZm9yIGBuZXh0YC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtlcnJvcl0gQ2FsbGJhY2sgZm9yIGVycm9ycyBpbiB0aGUgc291cmNlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBsZXRlXSBDYWxsYmFjayBmb3IgdGhlIGNvbXBsZXRpb24gb2YgdGhlIHNvdXJjZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgaWRlbnRpY2FsIHRvIHRoZSBzb3VyY2UsIGJ1dCBydW5zIHRoZVxuICogc3BlY2lmaWVkIE9ic2VydmVyIG9yIGNhbGxiYWNrKHMpIGZvciBlYWNoIGl0ZW0uXG4gKiBAbWV0aG9kIGRvXG4gKiBAbmFtZSBkb1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gX2RvKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEb09wZXJhdG9yKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpKTtcbn1cbmV4cG9ydHMuX2RvID0gX2RvO1xudmFyIERvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB0aGlzLm5leHRPck9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgIH1cbiAgICBEb09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5leHRPck9ic2VydmVyLCB0aGlzLmVycm9yLCB0aGlzLmNvbXBsZXRlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRG9PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERvU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB2YXIgc2FmZVN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWRkKHNhZmVTdWJzY3JpYmVyKTtcbiAgICAgICAgdGhpcy5zYWZlU3Vic2NyaWJlciA9IHNhZmVTdWJzY3JpYmVyO1xuICAgIH1cbiAgICBEb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG4gICAgICAgIHNhZmVTdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERvU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgc2FmZVN1YnNjcmliZXIgPSB0aGlzLnNhZmVTdWJzY3JpYmVyO1xuICAgICAgICBzYWZlU3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG4gICAgICAgIHNhZmVTdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIGlmIChzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRG9TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kby5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGV4cGFuZF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZXhwYW5kJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZXhwYW5kID0gZXhwYW5kXzEuZXhwYW5kO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhwYW5kLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2V4cGFuZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgd2hlcmUgZm9yIGVhY2ggaXRlbSBpbiB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSBzdXBwbGllZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIGVhY2ggaXRlbSxcbiAqIHJlc3VsdGluZyBpbiBhIG5ldyB2YWx1ZSB0byB0aGVuIGJlIGFwcGxpZWQgYWdhaW4gd2l0aCB0aGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9qZWN0IHRoZSBmdW5jdGlvbiBmb3IgcHJvamVjdGluZyB0aGUgbmV4dCBlbWl0dGVkIGl0ZW0gb2YgdGhlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnRdIHRoZSBtYXggbnVtYmVyIG9mIG9ic2VydmFibGVzIHRoYXQgY2FuIGJlIGNyZWF0ZWQgY29uY3VycmVudGx5LiBkZWZhdWx0cyB0byBpbmZpbml0eS5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3IgbWFuYWdpbmcgdGhlIGV4cGFuc2lvbnMuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIGNvbnRhaW5pbmcgdGhlIGV4cGFuc2lvbnMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBleHBhbmRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGV4cGFuZChwcm9qZWN0LCBjb25jdXJyZW50LCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gdW5kZWZpbmVkOyB9XG4gICAgY29uY3VycmVudCA9IChjb25jdXJyZW50IHx8IDApIDwgMSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IGNvbmN1cnJlbnQ7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmV4cGFuZCA9IGV4cGFuZDtcbnZhciBFeHBhbmRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBFeHBhbmRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFeHBhbmRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy5jb25jdXJyZW50LCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEV4cGFuZE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuRXhwYW5kT3BlcmF0b3IgPSBFeHBhbmRPcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRXhwYW5kU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV4cGFuZFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXhwYW5kU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChjb25jdXJyZW50IDwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIEV4cGFuZFN1YnNjcmliZXIuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHJlc3VsdCA9IGFyZy5yZXN1bHQsIHZhbHVlID0gYXJnLnZhbHVlLCBpbmRleCA9IGFyZy5pbmRleDtcbiAgICAgICAgc3Vic2NyaWJlci5zdWJzY3JpYmVUb1Byb2plY3Rpb24ocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuICAgIH07XG4gICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMucHJvamVjdCkodmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1Byb2plY3Rpb24ocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCByZXN1bHQ6IHJlc3VsdCwgdmFsdWU6IHZhbHVlLCBpbmRleDogaW5kZXggfTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoLCAwLCBzdGF0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLnN1YnNjcmliZVRvUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcGxldGVkICYmIHRoaXMuYWN0aXZlID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fbmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEV4cGFuZFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5FeHBhbmRTdWJzY3JpYmVyID0gRXhwYW5kU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2V4cGFuZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZpbHRlcl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZmlsdGVyJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZmlsdGVyXzEuZmlsdGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2ZpbHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEZpbHRlciBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBvbmx5IGVtaXR0aW5nIHRob3NlIHRoYXRcbiAqIHNhdGlzZnkgYSBzcGVjaWZpZWQgcHJlZGljYXRlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlXG4gKiBbQXJyYXkucHJvdG90eXBlLmZpbHRlcigpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9maWx0ZXIpLFxuICogaXQgb25seSBlbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBpZiBpdCBwYXNzZXMgYSBjcml0ZXJpb24gZnVuY3Rpb24uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZmlsdGVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFNpbWlsYXIgdG8gdGhlIHdlbGwta25vd24gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZCwgdGhpcyBvcGVyYXRvclxuICogdGFrZXMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBwYXNzZXMgdGhlbSB0aHJvdWdoIGEgYHByZWRpY2F0ZWBcbiAqIGZ1bmN0aW9uIGFuZCBvbmx5IGVtaXRzIHRob3NlIHZhbHVlcyB0aGF0IHlpZWxkZWQgYHRydWVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgb25seSBjbGljayBldmVudHMgd2hvc2UgdGFyZ2V0IHdhcyBhIERJViBlbGVtZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBjbGlja3NPbkRpdnMgPSBjbGlja3MuZmlsdGVyKGV2ID0+IGV2LnRhcmdldC50YWdOYW1lID09PSAnRElWJyk7XG4gKiBjbGlja3NPbkRpdnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGRpc3RpbmN0fVxuICogQHNlZSB7QGxpbmsgZGlzdGluY3RLZXl9XG4gKiBAc2VlIHtAbGluayBkaXN0aW5jdFVudGlsQ2hhbmdlZH1cbiAqIEBzZWUge0BsaW5rIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkfVxuICogQHNlZSB7QGxpbmsgaWdub3JlRWxlbWVudHN9XG4gKiBAc2VlIHtAbGluayBwYXJ0aXRpb259XG4gKiBAc2VlIHtAbGluayBza2lwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBib29sZWFufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0aGF0XG4gKiBldmFsdWF0ZXMgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAsXG4gKiB0aGUgdmFsdWUgaXMgZW1pdHRlZCwgaWYgYGZhbHNlYCB0aGUgdmFsdWUgaXMgbm90IHBhc3NlZCB0byB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLiBUaGUgYGluZGV4YCBwYXJhbWV0ZXIgaXMgdGhlIG51bWJlciBgaWAgZm9yIHRoZSBpLXRoIHNvdXJjZVxuICogZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyXG4gKiBgMGAuXG4gKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGRldGVybWluZSB0aGUgdmFsdWUgb2YgYHRoaXNgXG4gKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgdGhhdCB3ZXJlXG4gKiBhbGxvd2VkIGJ5IHRoZSBgcHJlZGljYXRlYCBmdW5jdGlvbi5cbiAqIEBtZXRob2QgZmlsdGVyXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRmlsdGVyT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnKSk7XG59XG5leHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcbnZhciBGaWx0ZXJPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRmlsdGVyT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgIH1cbiAgICBGaWx0ZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBGaWx0ZXJTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcpKTtcbiAgICB9O1xuICAgIHJldHVybiBGaWx0ZXJPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEZpbHRlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGaWx0ZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZpbHRlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgfVxuICAgIC8vIHRoZSB0cnkgY2F0Y2ggYmxvY2sgYmVsb3cgaXMgbGVmdCBzcGVjaWZpY2FsbHkgZm9yXG4gICAgLy8gb3B0aW1pemF0aW9uIGFuZCBwZXJmIHJlYXNvbnMuIGEgdHJ5Q2F0Y2hlciBpcyBub3QgbmVjZXNzYXJ5IGhlcmUuXG4gICAgRmlsdGVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZpbHRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9maWx0ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmaW5hbGx5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9maW5hbGx5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmluYWxseSA9IGZpbmFsbHlfMS5fZmluYWxseTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmFsbHkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZmluYWxseS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCB3aWxsIGNhbGwgYSBzcGVjaWZpZWQgZnVuY3Rpb24gd2hlblxuICogdGhlIHNvdXJjZSB0ZXJtaW5hdGVzIG9uIGNvbXBsZXRlIG9yIGVycm9yLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZmluYWxseVNlbGVjdG9yIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHNvdXJjZSB0ZXJtaW5hdGVzLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSwgYnV0IHdpbGwgY2FsbCB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uIG9uIHRlcm1pbmF0aW9uLlxuICogQG1ldGhvZCBmaW5hbGx5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBfZmluYWxseShmaW5hbGx5U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaW5hbGx5T3BlcmF0b3IoZmluYWxseVNlbGVjdG9yKSk7XG59XG5leHBvcnRzLl9maW5hbGx5ID0gX2ZpbmFsbHk7XG52YXIgRmluYWxseU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGaW5hbGx5T3BlcmF0b3IoZmluYWxseVNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZmluYWxseVNlbGVjdG9yID0gZmluYWxseVNlbGVjdG9yO1xuICAgIH1cbiAgICBGaW5hbGx5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmluYWxseVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5maW5hbGx5U2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBGaW5hbGx5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGaW5hbGx5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZpbmFsbHlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZpbmFsbHlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmaW5hbGx5U2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZpbmFsbHlTZWxlY3RvcikpO1xuICAgIH1cbiAgICByZXR1cm4gRmluYWxseVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5hbGx5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZmluYWxseS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZpcnN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9maXJzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZpcnN0ID0gZmlyc3RfMS5maXJzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2ZpcnN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBFbXB0eUVycm9yXzEgPSByZXF1aXJlKCcuLi91dGlsL0VtcHR5RXJyb3InKTtcbi8qKlxuICogRW1pdHMgb25seSB0aGUgZmlyc3QgdmFsdWUgKG9yIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IG1lZXRzIHNvbWUgY29uZGl0aW9uKVxuICogZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIG9ubHkgdGhlIGZpcnN0IHZhbHVlLiBPciBlbWl0cyBvbmx5IHRoZSBmaXJzdFxuICogdmFsdWUgdGhhdCBwYXNzZXMgc29tZSB0ZXN0Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2ZpcnN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIElmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYGZpcnN0YCBlbWl0cyB0aGUgZmlyc3QgdmFsdWUgb2YgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSwgdGhlbiBjb21wbGV0ZXMuIElmIGNhbGxlZCB3aXRoIGEgYHByZWRpY2F0ZWAgZnVuY3Rpb24sIGBmaXJzdGBcbiAqIGVtaXRzIHRoZSBmaXJzdCB2YWx1ZSBvZiB0aGUgc291cmNlIHRoYXQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGNvbmRpdGlvbi4gSXRcbiAqIG1heSBhbHNvIHRha2UgYSBgcmVzdWx0U2VsZWN0b3JgIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIG91dHB1dCB2YWx1ZSBmcm9tXG4gKiB0aGUgaW5wdXQgdmFsdWUsIGFuZCBhIGBkZWZhdWx0VmFsdWVgIHRvIGVtaXQgaW4gY2FzZSB0aGUgc291cmNlIGNvbXBsZXRlc1xuICogYmVmb3JlIGl0IGlzIGFibGUgdG8gZW1pdCBhIHZhbGlkIHZhbHVlLiBUaHJvd3MgYW4gZXJyb3IgaWYgYGRlZmF1bHRWYWx1ZWBcbiAqIHdhcyBub3QgcHJvdmlkZWQgYW5kIGEgbWF0Y2hpbmcgZWxlbWVudCBpcyBub3QgZm91bmQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IHRoZSBmaXJzdCBjbGljayB0aGF0IGhhcHBlbnMgb24gdGhlIERPTTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmZpcnN0KCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIHRoZSBmaXJzdCBjbGljayB0aGF0IGhhcHBlbnMgb24gYSBESVY8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5maXJzdChldiA9PiBldi50YXJnZXQudGFnTmFtZSA9PT0gJ0RJVicpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBmaWx0ZXJ9XG4gKiBAc2VlIHtAbGluayBmaW5kfVxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqXG4gKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcbiAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogYm9vbGVhbn0gW3ByZWRpY2F0ZV1cbiAqIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIGNhbGxlZCB3aXRoIGVhY2ggaXRlbSB0byB0ZXN0IGZvciBjb25kaXRpb24gbWF0Y2hpbmcuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogUn0gW3Jlc3VsdFNlbGVjdG9yXSBBIGZ1bmN0aW9uIHRvXG4gKiBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpc1xuICogZnVuY3Rpb24gYXJlOlxuICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgdGhhdCB3YXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLlxuICogLSBgaW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuXG4gKiBAcGFyYW0ge1J9IFtkZWZhdWx0VmFsdWVdIFRoZSBkZWZhdWx0IHZhbHVlIGVtaXR0ZWQgaW4gY2FzZSBubyB2YWxpZCB2YWx1ZVxuICogd2FzIGZvdW5kIG9uIHRoZSBzb3VyY2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFR8Uj59IGFuIE9ic2VydmFibGUgb2YgdGhlIGZpcnN0IGl0ZW0gdGhhdCBtYXRjaGVzIHRoZVxuICogY29uZGl0aW9uLlxuICogQG1ldGhvZCBmaXJzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZmlyc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRmlyc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHRoaXMpKTtcbn1cbmV4cG9ydHMuZmlyc3QgPSBmaXJzdDtcbnZhciBGaXJzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGaXJzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgRmlyc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmlyc3RTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5kZWZhdWx0VmFsdWUsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRmlyc3RPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEZpcnN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZpcnN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGaXJzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCBpbmRleCwgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2VtaXQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlSZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2VtaXRGaW5hbCh2YWx1ZSk7XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW1pdEZpbmFsKHJlc3VsdCk7XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9lbWl0RmluYWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoIXRoaXMuaGFzQ29tcGxldGVkICYmIHR5cGVvZiB0aGlzLmRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBFbXB0eUVycm9yXzEuRW1wdHlFcnJvcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGaXJzdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maXJzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2ZpcnN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBPYnNlcnZhYmxlIG9yIGEgc2VxdWVuY2Ugd2FzIHF1ZXJpZWQgYnV0IGhhcyBub1xuICogZWxlbWVudHMuXG4gKlxuICogQHNlZSB7QGxpbmsgZmlyc3R9XG4gKiBAc2VlIHtAbGluayBsYXN0fVxuICogQHNlZSB7QGxpbmsgc2luZ2xlfVxuICpcbiAqIEBjbGFzcyBFbXB0eUVycm9yXG4gKi9cbnZhciBFbXB0eUVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1wdHlFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbXB0eUVycm9yKCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnbm8gZWxlbWVudHMgaW4gc2VxdWVuY2UnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VtcHR5RXJyb3InO1xuICAgIH1cbiAgICByZXR1cm4gRW1wdHlFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbXB0eUVycm9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9FbXB0eUVycm9yLmpzXG4gKiogbW9kdWxlIGlkID0gNDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZ3JvdXBCeV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZ3JvdXBCeScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmdyb3VwQnkgPSBncm91cEJ5XzEuZ3JvdXBCeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwQnkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZ3JvdXBCeS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIE1hcF8xID0gcmVxdWlyZSgnLi4vdXRpbC9NYXAnKTtcbnZhciBGYXN0TWFwXzEgPSByZXF1aXJlKCcuLi91dGlsL0Zhc3RNYXAnKTtcbi8qKlxuICogR3JvdXBzIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IGFuIE9ic2VydmFibGUgYWNjb3JkaW5nIHRvIGEgc3BlY2lmaWVkIGNyaXRlcmlvbixcbiAqIGFuZCBlbWl0cyB0aGVzZSBncm91cGVkIGl0ZW1zIGFzIGBHcm91cGVkT2JzZXJ2YWJsZXNgLCBvbmVcbiAqIHtAbGluayBHcm91cGVkT2JzZXJ2YWJsZX0gcGVyIGdyb3VwLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZ3JvdXBCeS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogS30ga2V5U2VsZWN0b3IgYSBmdW5jdGlvbiB0aGF0IGV4dHJhY3RzIHRoZSBrZXlcbiAqIGZvciBlYWNoIGl0ZW0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogUn0gW2VsZW1lbnRTZWxlY3Rvcl0gYSBmdW5jdGlvbiB0aGF0IGV4dHJhY3RzIHRoZVxuICogcmV0dXJuIGVsZW1lbnQgZm9yIGVhY2ggaXRlbS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZ3JvdXBlZDogR3JvdXBlZE9ic2VydmFibGU8SyxSPik6IE9ic2VydmFibGU8YW55Pn0gW2R1cmF0aW9uU2VsZWN0b3JdXG4gKiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRvIGRldGVybWluZSBob3cgbG9uZyBlYWNoIGdyb3VwIHNob3VsZFxuICogZXhpc3QuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPEdyb3VwZWRPYnNlcnZhYmxlPEssUj4+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcbiAqIEdyb3VwZWRPYnNlcnZhYmxlcywgZWFjaCBvZiB3aGljaCBjb3JyZXNwb25kcyB0byBhIHVuaXF1ZSBrZXkgdmFsdWUgYW5kIGVhY2hcbiAqIG9mIHdoaWNoIGVtaXRzIHRob3NlIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgc2hhcmUgdGhhdCBrZXlcbiAqIHZhbHVlLlxuICogQG1ldGhvZCBncm91cEJ5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBncm91cEJ5KGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBHcm91cEJ5T3BlcmF0b3IodGhpcywga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3RvcikpO1xufVxuZXhwb3J0cy5ncm91cEJ5ID0gZ3JvdXBCeTtcbnZhciBHcm91cEJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdyb3VwQnlPcGVyYXRvcihzb3VyY2UsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIEdyb3VwQnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBHcm91cEJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmtleVNlbGVjdG9yLCB0aGlzLmVsZW1lbnRTZWxlY3RvciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBCeU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgR3JvdXBCeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cEJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cEJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuICAgICAgICB0aGlzLmVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5ncm91cHMgPSBudWxsO1xuICAgICAgICB0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy5hZGQoZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGtleSA9IHRoaXMua2V5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ncm91cCh2YWx1ZSwga2V5KTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZ3JvdXAgPSBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG4gICAgICAgIGlmICghZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHMgPSB0aGlzLmdyb3VwcyA9IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnID8gbmV3IEZhc3RNYXBfMS5GYXN0TWFwKCkgOiBuZXcgTWFwXzEuTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLmdldChrZXkpO1xuICAgICAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgICAgICBncm91cHMuc2V0KGtleSwgZ3JvdXAgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKSk7XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZE9ic2VydmFibGUgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCwgdGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5kdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0RHVyYXRpb24oa2V5LCBncm91cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoZ3JvdXBlZE9ic2VydmFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0RWxlbWVudCh2YWx1ZSwgZ3JvdXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50cnlHcm91cE5leHQodmFsdWUsIGdyb3VwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9zZWxlY3RFbGVtZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBncm91cCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5lbGVtZW50U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyeUdyb3VwTmV4dChyZXN1bHQsIGdyb3VwKTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2VsZWN0RHVyYXRpb24gPSBmdW5jdGlvbiAoa2V5LCBncm91cCkge1xuICAgICAgICB2YXIgZHVyYXRpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3RvcihuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZChkdXJhdGlvbi5zdWJzY3JpYmUobmV3IEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHRoaXMpKSk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUudHJ5R3JvdXBOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBncm91cCkge1xuICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBncm91cC5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuICAgICAgICBpZiAoZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkge1xuICAgICAgICAgICAgICAgIGdyb3VwLmVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3VwcztcbiAgICAgICAgaWYgKGdyb3Vwcykge1xuICAgICAgICAgICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBncm91cC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncm91cHMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRoaXMuZ3JvdXBzLmRlbGV0ZShrZXkpO1xuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQgJiYgIXRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBCeVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JvdXBEdXJhdGlvblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JvdXBEdXJhdGlvblN1YnNjcmliZXIoa2V5LCBncm91cCwgcGFyZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICB9XG4gICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcbiAgICB9O1xuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMudHJ5RXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcbiAgICB9O1xuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDtcbiAgICAgICAgaWYgKCFncm91cC5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgZ3JvdXAuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVHcm91cCh0aGlzLmtleSk7XG4gICAgfTtcbiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG4gICAgICAgIGlmICghZ3JvdXAuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlR3JvdXAodGhpcy5rZXkpO1xuICAgIH07XG4gICAgcmV0dXJuIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLyoqXG4gKiBBbiBPYnNlcnZhYmxlIHJlcHJlc2VudGluZyB2YWx1ZXMgYmVsb25naW5nIHRvIHRoZSBzYW1lIGdyb3VwIHJlcHJlc2VudGVkIGJ5XG4gKiBhIGNvbW1vbiBrZXkuIFRoZSB2YWx1ZXMgZW1pdHRlZCBieSBhIEdyb3VwZWRPYnNlcnZhYmxlIGNvbWUgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgY29tbW9uIGtleSBpcyBhdmFpbGFibGUgYXMgdGhlIGZpZWxkIGBrZXlgIG9uIGFcbiAqIEdyb3VwZWRPYnNlcnZhYmxlIGluc3RhbmNlLlxuICpcbiAqIEBjbGFzcyBHcm91cGVkT2JzZXJ2YWJsZTxLLCBUPlxuICovXG52YXIgR3JvdXBlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cGVkT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cGVkT2JzZXJ2YWJsZShrZXksIGdyb3VwU3ViamVjdCwgcmVmQ291bnRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLmdyb3VwU3ViamVjdCA9IGdyb3VwU3ViamVjdDtcbiAgICAgICAgdGhpcy5yZWZDb3VudFN1YnNjcmlwdGlvbiA9IHJlZkNvdW50U3Vic2NyaXB0aW9uO1xuICAgIH1cbiAgICBHcm91cGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHJlZkNvdW50U3Vic2NyaXB0aW9uID0gX2EucmVmQ291bnRTdWJzY3JpcHRpb24sIGdyb3VwU3ViamVjdCA9IF9hLmdyb3VwU3ViamVjdDtcbiAgICAgICAgaWYgKHJlZkNvdW50U3Vic2NyaXB0aW9uICYmICFyZWZDb3VudFN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbihyZWZDb3VudFN1YnNjcmlwdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoZ3JvdXBTdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBlZE9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkdyb3VwZWRPYnNlcnZhYmxlID0gR3JvdXBlZE9ic2VydmFibGU7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ocGFyZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgcGFyZW50LmNvdW50Kys7XG4gICAgfVxuICAgIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIGlmICghcGFyZW50LmlzVW5zdWJzY3JpYmVkICYmICF0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICBwYXJlbnQuY291bnQgLT0gMTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQuY291bnQgPT09IDAgJiYgcGFyZW50LmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JvdXBCeS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2dyb3VwQnkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4vcm9vdCcpO1xudmFyIE1hcFBvbHlmaWxsXzEgPSByZXF1aXJlKCcuL01hcFBvbHlmaWxsJyk7XG5leHBvcnRzLk1hcCA9IHJvb3RfMS5yb290Lk1hcCB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gTWFwUG9seWZpbGxfMS5NYXBQb2x5ZmlsbDsgfSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBNYXBQb2x5ZmlsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwUG9seWZpbGwoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLl9rZXlzID0gW107XG4gICAgfVxuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICAgIHJldHVybiBpID09PSAtMSA/IHVuZGVmaW5lZCA6IHRoaXMuX3ZhbHVlc1tpXTtcbiAgICB9O1xuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2tleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zaXplKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHRoaXMuX2tleXMuc3BsaWNlKGksIDEpO1xuICAgICAgICB0aGlzLnNpemUtLTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuX3ZhbHVlc1tpXSwgdGhpcy5fa2V5c1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNYXBQb2x5ZmlsbDtcbn0oKSk7XG5leHBvcnRzLk1hcFBvbHlmaWxsID0gTWFwUG9seWZpbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQb2x5ZmlsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvTWFwUG9seWZpbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0NjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZhc3RNYXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZhc3RNYXAoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgfVxuICAgIEZhc3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNba2V5XSA9IG51bGw7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgRmFzdE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEZhc3RNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleV07XG4gICAgfTtcbiAgICBGYXN0TWFwLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHZhbHVlc1trZXldICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB2YWx1ZXNba2V5XSwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRmFzdE1hcC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgfTtcbiAgICByZXR1cm4gRmFzdE1hcDtcbn0oKSk7XG5leHBvcnRzLkZhc3RNYXAgPSBGYXN0TWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmFzdE1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvRmFzdE1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGlnbm9yZUVsZW1lbnRzXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9pZ25vcmVFbGVtZW50cycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmlnbm9yZUVsZW1lbnRzID0gaWdub3JlRWxlbWVudHNfMS5pZ25vcmVFbGVtZW50cztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlnbm9yZUVsZW1lbnRzLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gNDY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBub29wXzEgPSByZXF1aXJlKCcuLi91dGlsL25vb3AnKTtcbi8qKlxuICogSWdub3JlcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG9ubHkgcGFzc2VzIGNhbGxzIG9mIGBjb21wbGV0ZWAgb3IgYGVycm9yYC5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2lnbm9yZUVsZW1lbnRzLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIGVtcHR5IE9ic2VydmFibGUgdGhhdCBvbmx5IGNhbGxzIGBjb21wbGV0ZWBcbiAqIG9yIGBlcnJvcmAsIGJhc2VkIG9uIHdoaWNoIG9uZSBpcyBjYWxsZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBpZ25vcmVFbGVtZW50c1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gaWdub3JlRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgSWdub3JlRWxlbWVudHNPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMuaWdub3JlRWxlbWVudHMgPSBpZ25vcmVFbGVtZW50cztcbjtcbnZhciBJZ25vcmVFbGVtZW50c09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c09wZXJhdG9yKCkge1xuICAgIH1cbiAgICBJZ25vcmVFbGVtZW50c09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gSWdub3JlRWxlbWVudHNPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuICAgICAgICBub29wXzEubm9vcCgpO1xuICAgIH07XG4gICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlnbm9yZUVsZW1lbnRzLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvaWdub3JlRWxlbWVudHMuanNcbiAqKiBtb2R1bGUgaWQgPSA0NjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBhdWRpdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYXVkaXQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5hdWRpdCA9IGF1ZGl0XzEuYXVkaXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9hdWRpdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBJZ25vcmVzIHNvdXJjZSB2YWx1ZXMgZm9yIGEgZHVyYXRpb24gZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUsIHRoZW5cbiAqIGVtaXRzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlbiByZXBlYXRzIHRoaXNcbiAqIHByb2Nlc3MuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYXVkaXRUaW1lfSwgYnV0IHRoZSBzaWxlbmNpbmdcbiAqIGR1cmF0aW9uIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9hdWRpdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgYXVkaXRgIGlzIHNpbWlsYXIgdG8gYHRocm90dGxlYCwgYnV0IGVtaXRzIHRoZSBsYXN0IHZhbHVlIGZyb20gdGhlIHNpbGVuY2VkXG4gKiB0aW1lIHdpbmRvdywgaW5zdGVhZCBvZiB0aGUgZmlyc3QgdmFsdWUuIGBhdWRpdGAgZW1pdHMgdGhlIG1vc3QgcmVjZW50IHZhbHVlXG4gKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYXMgc29vbiBhcyBpdHMgaW50ZXJuYWxcbiAqIHRpbWVyIGJlY29tZXMgZGlzYWJsZWQsIGFuZCBpZ25vcmVzIHNvdXJjZSB2YWx1ZXMgd2hpbGUgdGhlIHRpbWVyIGlzIGVuYWJsZWQuXG4gKiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Qgc291cmNlIHZhbHVlIGFycml2ZXMsXG4gKiB0aGUgdGltZXIgaXMgZW5hYmxlZCBieSBjYWxsaW5nIHRoZSBgZHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24gd2l0aCB0aGVcbiAqIHNvdXJjZSB2YWx1ZSwgd2hpY2ggcmV0dXJucyB0aGUgXCJkdXJhdGlvblwiIE9ic2VydmFibGUuIFdoZW4gdGhlIGR1cmF0aW9uXG4gKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUgb3IgY29tcGxldGVzLCB0aGUgdGltZXIgaXMgZGlzYWJsZWQsIHRoZW4gdGhlIG1vc3RcbiAqIHJlY2VudCBzb3VyY2UgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGlzIHByb2Nlc3NcbiAqIHJlcGVhdHMgZm9yIHRoZSBuZXh0IHNvdXJjZSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmF1ZGl0KGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBhdWRpdFRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cbiAqIEBzZWUge0BsaW5rIHNhbXBsZX1cbiAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBPYnNlcnZhYmxlfFByb21pc2V9IGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvblxuICogdGhhdCByZWNlaXZlcyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBmb3IgY29tcHV0aW5nIHRoZSBzaWxlbmNpbmdcbiAqIGR1cmF0aW9uLCByZXR1cm5lZCBhcyBhbiBPYnNlcnZhYmxlIG9yIGEgUHJvbWlzZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBwZXJmb3JtcyByYXRlLWxpbWl0aW5nIG9mXG4gKiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIGF1ZGl0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBhdWRpdChkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQXVkaXRPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmF1ZGl0ID0gYXVkaXQ7XG52YXIgQXVkaXRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXVkaXRPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIEF1ZGl0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQXVkaXRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEF1ZGl0T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBBdWRpdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdWRpdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXVkaXRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy50aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5kdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgZHVyYXRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCB2YWx1ZSA9IF9hLnZhbHVlLCBoYXNWYWx1ZSA9IF9hLmhhc1ZhbHVlLCB0aHJvdHRsZWQgPSBfYS50aHJvdHRsZWQ7XG4gICAgICAgIGlmICh0aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRocm90dGxlZCk7XG4gICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7XG4gICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7XG4gICAgfTtcbiAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyVGhyb3R0bGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBBdWRpdFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9hdWRpdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGF1ZGl0VGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYXVkaXRUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYXVkaXRUaW1lID0gYXVkaXRUaW1lXzEuYXVkaXRUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXRUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2F1ZGl0VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBJZ25vcmVzIHNvdXJjZSB2YWx1ZXMgZm9yIGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzLCB0aGVuIGVtaXRzIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gcmVwZWF0cyB0aGlzIHByb2Nlc3MuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPldoZW4gaXQgc2VlcyBhIHNvdXJjZSB2YWx1ZXMsIGl0IGlnbm9yZXMgdGhhdCBwbHVzXG4gKiB0aGUgbmV4dCBvbmVzIGZvciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gaXQgZW1pdHMgdGhlIG1vc3QgcmVjZW50XG4gKiB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvYXVkaXRUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBhdWRpdFRpbWVgIGlzIHNpbWlsYXIgdG8gYHRocm90dGxlVGltZWAsIGJ1dCBlbWl0cyB0aGUgbGFzdCB2YWx1ZSBmcm9tIHRoZVxuICogc2lsZW5jZWQgdGltZSB3aW5kb3csIGluc3RlYWQgb2YgdGhlIGZpcnN0IHZhbHVlLiBgYXVkaXRUaW1lYCBlbWl0cyB0aGUgbW9zdFxuICogcmVjZW50IHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBhcyBzb29uIGFzXG4gKiBpdHMgaW50ZXJuYWwgdGltZXIgYmVjb21lcyBkaXNhYmxlZCwgYW5kIGlnbm9yZXMgc291cmNlIHZhbHVlcyB3aGlsZSB0aGVcbiAqIHRpbWVyIGlzIGVuYWJsZWQuIEluaXRpYWxseSwgdGhlIHRpbWVyIGlzIGRpc2FibGVkLiBBcyBzb29uIGFzIHRoZSBmaXJzdFxuICogc291cmNlIHZhbHVlIGFycml2ZXMsIHRoZSB0aW1lciBpcyBlbmFibGVkLiBBZnRlciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcyAob3JcbiAqIHRoZSB0aW1lIHVuaXQgZGV0ZXJtaW5lZCBpbnRlcm5hbGx5IGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYCkgaGFzIHBhc3NlZCxcbiAqIHRoZSB0aW1lciBpcyBkaXNhYmxlZCwgdGhlbiB0aGUgbW9zdCByZWNlbnQgc291cmNlIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlXG4gKiBvdXRwdXQgT2JzZXJ2YWJsZSwgYW5kIHRoaXMgcHJvY2VzcyByZXBlYXRzIGZvciB0aGUgbmV4dCBzb3VyY2UgdmFsdWUuXG4gKiBPcHRpb25hbGx5IHRha2VzIGEge0BsaW5rIFNjaGVkdWxlcn0gZm9yIG1hbmFnaW5nIHRpbWVycy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmF1ZGl0VGltZSgxMDAwKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYXVkaXR9XG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqIEBzZWUge0BsaW5rIHNhbXBsZVRpbWV9XG4gKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIFRpbWUgdG8gd2FpdCBiZWZvcmUgZW1pdHRpbmcgdGhlIG1vc3QgcmVjZW50IHNvdXJjZVxuICogdmFsdWUsIG1lYXN1cmVkIGluIG1pbGxpc2Vjb25kcyBvciB0aGUgdGltZSB1bml0IGRldGVybWluZWQgaW50ZXJuYWxseVxuICogYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yXG4gKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSByYXRlLWxpbWl0aW5nIGJlaGF2aW9yLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IHBlcmZvcm1zIHJhdGUtbGltaXRpbmcgb2ZcbiAqIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgYXVkaXRUaW1lXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBhdWRpdFRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQXVkaXRUaW1lT3BlcmF0b3IoZHVyYXRpb24sIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5hdWRpdFRpbWUgPSBhdWRpdFRpbWU7XG52YXIgQXVkaXRUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEF1ZGl0VGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgQXVkaXRUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQXVkaXRUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmR1cmF0aW9uLCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEF1ZGl0VGltZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQXVkaXRUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF1ZGl0VGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXVkaXRUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgQXVkaXRUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIHRoaXMuZHVyYXRpb24sIHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXVkaXRUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgdmFsdWUgPSBfYS52YWx1ZSwgaGFzVmFsdWUgPSBfYS5oYXNWYWx1ZSwgdGhyb3R0bGVkID0gX2EudGhyb3R0bGVkO1xuICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBdWRpdFRpbWVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHtcbiAgICBzdWJzY3JpYmVyLmNsZWFyVGhyb3R0bGUoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0VGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2F1ZGl0VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGxhc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2xhc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5sYXN0ID0gbGFzdF8xLmxhc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2xhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIEVtcHR5RXJyb3JfMSA9IHJlcXVpcmUoJy4uL3V0aWwvRW1wdHlFcnJvcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBsYXN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBJdCBvcHRpb25hbGx5IHRha2VzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIGFzIGEgcGFyYW1ldGVyLCBpbiB3aGljaCBjYXNlLCByYXRoZXIgdGhhbiBlbWl0dGluZ1xuICogdGhlIGxhc3QgaXRlbSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlIHdpbGwgZW1pdCB0aGUgbGFzdCBpdGVtXG4gKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbGFzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcbiAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVkaWNhdGUgLSB0aGUgY29uZGl0aW9uIGFueSBzb3VyY2UgZW1pdHRlZCBpdGVtIGhhcyB0byBzYXRpc2Z5LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGxhc3QgaXRlbSBzYXRpc2Z5aW5nIHRoZSBnaXZlbiBjb25kaXRpb25cbiAqIGZyb20gdGhlIHNvdXJjZSwgb3IgYW4gTm9TdWNoRWxlbWVudEV4Y2VwdGlvbiBpZiBubyBzdWNoIGl0ZW1zIGFyZSBlbWl0dGVkLlxuICogQHRocm93cyAtIFRocm93cyBpZiBubyBpdGVtcyB0aGF0IG1hdGNoIHRoZSBwcmVkaWNhdGUgYXJlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBsYXN0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBsYXN0KHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IExhc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHRoaXMpKTtcbn1cbmV4cG9ydHMubGFzdCA9IGxhc3Q7XG52YXIgTGFzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMYXN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBMYXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IExhc3RTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5kZWZhdWx0VmFsdWUsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gTGFzdE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTGFzdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlSZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlSZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSByZXN1bHQ7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgIH07XG4gICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBFbXB0eUVycm9yXzEuRW1wdHlFcnJvcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBMYXN0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9sYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbGV0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9sZXQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5sZXQgPSBsZXRfMS5sZXRQcm90bztcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5sZXRCaW5kID0gbGV0XzEubGV0UHJvdG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sZXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbGV0LmpzXG4gKiogbW9kdWxlIGlkID0gNDc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHBhcmFtIGZ1bmNcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59XG4gKiBAbWV0aG9kIGxldFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbGV0UHJvdG8oZnVuYykge1xuICAgIHJldHVybiBmdW5jKHRoaXMpO1xufVxuZXhwb3J0cy5sZXRQcm90byA9IGxldFByb3RvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGV0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbGV0LmpzXG4gKiogbW9kdWxlIGlkID0gNDc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZXZlcnlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2V2ZXJ5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZXZlcnkgPSBldmVyeV8xLmV2ZXJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlcnkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZXZlcnkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aGV0aGVyIG9yIG5vdCBldmVyeSBpdGVtIG9mIHRoZSBzb3VyY2Ugc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gc3BlY2lmaWVkLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gcHJlZGljYXRlIGEgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIGlmIGFuIGl0ZW0gbWVldHMgYSBzcGVjaWZpZWQgY29uZGl0aW9uLlxuICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBvcHRpb25hbCBvYmplY3QgdG8gdXNlIGZvciBgdGhpc2AgaW4gdGhlIGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIG9mIGJvb2xlYW5zIHRoYXQgZGV0ZXJtaW5lcyBpZiBhbGwgaXRlbXMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1lZXQgdGhlIGNvbmRpdGlvbiBzcGVjaWZpZWQuXG4gKiBAbWV0aG9kIGV2ZXJ5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBldmVyeShwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBFdmVyeU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZywgdGhpcykpO1xufVxuZXhwb3J0cy5ldmVyeSA9IGV2ZXJ5O1xudmFyIEV2ZXJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV2ZXJ5T3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBFdmVyeU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFdmVyeVN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRXZlcnlPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEV2ZXJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV2ZXJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFdmVyeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZyB8fCB0aGlzO1xuICAgIH1cbiAgICBFdmVyeVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZXJ5VmFsdWVNYXRjaCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoZXZlcnlWYWx1ZU1hdGNoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRXZlcnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZS5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuaW5kZXgrKywgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm5vdGlmeUNvbXBsZXRlKHRydWUpO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZXJ5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZXJ5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZXZlcnkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtYXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1hcCA9IG1hcF8xLm1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBBcHBsaWVzIGEgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uIHRvIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhlIHJlc3VsdGluZyB2YWx1ZXMgYXMgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSBbQXJyYXkucHJvdG90eXBlLm1hcCgpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9tYXApLFxuICogaXQgcGFzc2VzIGVhY2ggc291cmNlIHZhbHVlIHRocm91Z2ggYSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0byBnZXRcbiAqIGNvcnJlc3BvbmRpbmcgb3V0cHV0IHZhbHVlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogU2ltaWxhciB0byB0aGUgd2VsbCBrbm93biBgQXJyYXkucHJvdG90eXBlLm1hcGAgZnVuY3Rpb24sIHRoaXMgb3BlcmF0b3JcbiAqIGFwcGxpZXMgYSBwcm9qZWN0aW9uIHRvIGVhY2ggdmFsdWUgYW5kIGVtaXRzIHRoYXQgcHJvamVjdGlvbiBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3MubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuICogcG9zaXRpb25zLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXBUb31cbiAqIEBzZWUge0BsaW5rIHBsdWNrfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBwcm9qZWN0IFRoZSBmdW5jdGlvbiB0byBhcHBseVxuICogdG8gZWFjaCBgdmFsdWVgIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBUaGUgYGluZGV4YCBwYXJhbWV0ZXIgaXNcbiAqIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBlbWlzc2lvbiB0aGF0IGhhcyBoYXBwZW5lZCBzaW5jZSB0aGVcbiAqIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cbiAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgYXJndW1lbnQgdG8gZGVmaW5lIHdoYXQgYHRoaXNgIGlzIGluIHRoZVxuICogYHByb2plY3RgIGZ1bmN0aW9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBgcHJvamVjdGAgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIG1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWFwKHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICBpZiAodHlwZW9mIHByb2plY3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uIEFyZSB5b3UgbG9va2luZyBmb3IgYG1hcFRvKClgPycpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG59XG5leHBvcnRzLm1hcCA9IG1hcDtcbnZhciBNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwT3BlcmF0b3IocHJvamVjdCwgdGhpc0FyZykge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgIH1cbiAgICBNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy50aGlzQXJnKSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcbiAgICB9XG4gICAgLy8gTk9URTogVGhpcyBsb29rcyB1bm9wdGltaXplZCwgYnV0IGl0J3MgYWN0dWFsbHkgcHVycG9zZWZ1bGx5IE5PVFxuICAgIC8vIHVzaW5nIHRyeS9jYXRjaCBvcHRpbWl6YXRpb25zLlxuICAgIE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmNvdW50KyspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWFwVG9fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hcFRvJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwVG8gPSBtYXBUb18xLm1hcFRvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0ODJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBFbWl0cyB0aGUgZ2l2ZW4gY29uc3RhbnQgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGV2ZXJ5IHRpbWUgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlIHtAbGluayBtYXB9LCBidXQgaXQgbWFwcyBldmVyeSBzb3VyY2UgdmFsdWUgdG9cbiAqIHRoZSBzYW1lIG91dHB1dCB2YWx1ZSBldmVyeSB0aW1lLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFRha2VzIGEgY29uc3RhbnQgYHZhbHVlYCBhcyBhcmd1bWVudCwgYW5kIGVtaXRzIHRoYXQgd2hlbmV2ZXIgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLiBJbiBvdGhlciB3b3JkcywgaWdub3JlcyB0aGUgYWN0dWFsIHNvdXJjZSB2YWx1ZSxcbiAqIGFuZCBzaW1wbHkgdXNlcyB0aGUgZW1pc3Npb24gbW9tZW50IHRvIGtub3cgd2hlbiB0byBlbWl0IHRoZSBnaXZlbiBgdmFsdWVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgc3RyaW5nICdIaSc8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGdyZWV0aW5ncyA9IGNsaWNrcy5tYXBUbygnSGknKTtcbiAqIGdyZWV0aW5ncy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWFwfVxuICpcbiAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFwIGVhY2ggc291cmNlIHZhbHVlIHRvLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBnaXZlbiBgdmFsdWVgIGV2ZXJ5IHRpbWVcbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBzb21ldGhpbmcuXG4gKiBAbWV0aG9kIG1hcFRvXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtYXBUbyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1hcFRvT3BlcmF0b3IodmFsdWUpKTtcbn1cbmV4cG9ydHMubWFwVG8gPSBtYXBUbztcbnZhciBNYXBUb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXBUb09wZXJhdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBUb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy52YWx1ZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcFRvT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWFwVG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB2YWx1ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBUb1N1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNDgzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWF0ZXJpYWxpemVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hdGVyaWFsaXplJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWF0ZXJpYWxpemUgPSBtYXRlcmlhbGl6ZV8xLm1hdGVyaWFsaXplO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0ZXJpYWxpemUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWF0ZXJpYWxpemUuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIE5vdGlmaWNhdGlvbl8xID0gcmVxdWlyZSgnLi4vTm90aWZpY2F0aW9uJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcHJlc2VudHMgYWxsIG9mIHRoZSBlbWlzc2lvbnMgYW5kIG5vdGlmaWNhdGlvbnNcbiAqIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGludG8gZW1pc3Npb25zIG1hcmtlZCB3aXRoIHRoZWlyIG9yaWdpbmFsIHR5cGVzXG4gKiB3aXRoaW4gYSBgTm90aWZpY2F0aW9uYCBvYmplY3RzLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWF0ZXJpYWxpemUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuICpcbiAqIEBzY2hlZHVsZXIgbWF0ZXJpYWxpemUgZG9lcyBub3Qgb3BlcmF0ZSBieSBkZWZhdWx0IG9uIGEgcGFydGljdWxhciBTY2hlZHVsZXIuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE5vdGlmaWNhdGlvbjxUPj59IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyB0aGF0IGFyZSB0aGUgcmVzdWx0IG9mXG4gKiBtYXRlcmlhbGl6aW5nIHRoZSBpdGVtcyBhbmQgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIG1hdGVyaWFsaXplXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtYXRlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXRlcmlhbGl6ZU9wZXJhdG9yKCkpO1xufVxuZXhwb3J0cy5tYXRlcmlhbGl6ZSA9IG1hdGVyaWFsaXplO1xudmFyIE1hdGVyaWFsaXplT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplT3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIE1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWF0ZXJpYWxpemVTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXRlcmlhbGl6ZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWF0ZXJpYWxpemVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgfVxuICAgIE1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZXJyKSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gTWF0ZXJpYWxpemVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0ZXJpYWxpemUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tYXRlcmlhbGl6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tZXJnZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlID0gbWVyZ2VfMS5tZXJnZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlLmpzXG4gKiogbW9kdWxlIGlkID0gNDg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWVyZ2VBbGxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21lcmdlQWxsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VBbGwgPSBtZXJnZUFsbF8xLm1lcmdlQWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtZXJnZU1hcF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvbWVyZ2VNYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcCA9IG1lcmdlTWFwXzEubWVyZ2VNYXA7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcCA9IG1lcmdlTWFwXzEubWVyZ2VNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlTWFwVG9fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21lcmdlTWFwVG8nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwVG8gPSBtZXJnZU1hcFRvXzEubWVyZ2VNYXBUbztcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0ODlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtdWx0aWNhc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL211bHRpY2FzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm11bHRpY2FzdCA9IG11bHRpY2FzdF8xLm11bHRpY2FzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW11bHRpY2FzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tdWx0aWNhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0OTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBvYnNlcnZlT25fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL29ic2VydmVPbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm9ic2VydmVPbiA9IG9ic2VydmVPbl8xLm9ic2VydmVPbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVPbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9vYnNlcnZlT24uanNcbiAqKiBtb2R1bGUgaWQgPSA0OTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwYXJ0aXRpb25fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3BhcnRpdGlvbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnBhcnRpdGlvbiA9IHBhcnRpdGlvbl8xLnBhcnRpdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnRpdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wYXJ0aXRpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA0OTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG5vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9ub3QnKTtcbnZhciBmaWx0ZXJfMSA9IHJlcXVpcmUoJy4vZmlsdGVyJyk7XG4vKipcbiAqIFNwbGl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgaW50byB0d28sIG9uZSB3aXRoIHZhbHVlcyB0aGF0IHNhdGlzZnkgYVxuICogcHJlZGljYXRlLCBhbmQgYW5vdGhlciB3aXRoIHZhbHVlcyB0aGF0IGRvbid0IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBmaWx0ZXJ9LCBidXQgcmV0dXJucyB0d28gT2JzZXJ2YWJsZXM6XG4gKiBvbmUgbGlrZSB0aGUgb3V0cHV0IG9mIHtAbGluayBmaWx0ZXJ9LCBhbmQgdGhlIG90aGVyIHdpdGggdmFsdWVzIHRoYXQgZGlkIG5vdFxuICogcGFzcyB0aGUgY29uZGl0aW9uLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3BhcnRpdGlvbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgcGFydGl0aW9uYCBvdXRwdXRzIGFuIGFycmF5IHdpdGggdHdvIE9ic2VydmFibGVzIHRoYXQgcGFydGl0aW9uIHRoZSB2YWx1ZXNcbiAqIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRocm91Z2ggdGhlIGdpdmVuIGBwcmVkaWNhdGVgIGZ1bmN0aW9uLiBUaGUgZmlyc3RcbiAqIE9ic2VydmFibGUgaW4gdGhhdCBhcnJheSBlbWl0cyBzb3VyY2UgdmFsdWVzIGZvciB3aGljaCB0aGUgcHJlZGljYXRlIGFyZ3VtZW50XG4gKiByZXR1cm5zIHRydWUuIFRoZSBzZWNvbmQgT2JzZXJ2YWJsZSBlbWl0cyBzb3VyY2UgdmFsdWVzIGZvciB3aGljaCB0aGVcbiAqIHByZWRpY2F0ZSByZXR1cm5zIGZhbHNlLiBUaGUgZmlyc3QgYmVoYXZlcyBsaWtlIHtAbGluayBmaWx0ZXJ9IGFuZCB0aGUgc2Vjb25kXG4gKiBiZWhhdmVzIGxpa2Uge0BsaW5rIGZpbHRlcn0gd2l0aCB0aGUgcHJlZGljYXRlIG5lZ2F0ZWQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+UGFydGl0aW9uIGNsaWNrIGV2ZW50cyBpbnRvIHRob3NlIG9uIERJViBlbGVtZW50cyBhbmQgdGhvc2UgZWxzZXdoZXJlPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBwYXJ0cyA9IGNsaWNrcy5wYXJ0aXRpb24oZXYgPT4gZXYudGFyZ2V0LnRhZ05hbWUgPT09ICdESVYnKTtcbiAqIHZhciBjbGlja3NPbkRpdnMgPSBwYXJ0c1swXTtcbiAqIHZhciBjbGlja3NFbHNld2hlcmUgPSBwYXJ0c1sxXTtcbiAqIGNsaWNrc09uRGl2cy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnRElWIGNsaWNrZWQ6ICcsIHgpKTtcbiAqIGNsaWNrc0Vsc2V3aGVyZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnT3RoZXIgY2xpY2tlZDogJywgeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGZpbHRlcn1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogYm9vbGVhbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdGhhdFxuICogZXZhbHVhdGVzIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGl0IHJldHVybnMgYHRydWVgLFxuICogdGhlIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIGZpcnN0IE9ic2VydmFibGUgaW4gdGhlIHJldHVybmVkIGFycmF5LCBpZlxuICogYGZhbHNlYCB0aGUgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc2Vjb25kIE9ic2VydmFibGUgaW4gdGhlIGFycmF5LiBUaGVcbiAqIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2UgZW1pc3Npb24gdGhhdCBoYXNcbiAqIGhhcHBlbmVkIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIHN0YXJ0aW5nIGZyb20gdGhlIG51bWJlciBgMGAuXG4gKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGRldGVybWluZSB0aGUgdmFsdWUgb2YgYHRoaXNgXG4gKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtbT2JzZXJ2YWJsZTxUPiwgT2JzZXJ2YWJsZTxUPl19IEFuIGFycmF5IHdpdGggdHdvIE9ic2VydmFibGVzOiBvbmVcbiAqIHdpdGggdmFsdWVzIHRoYXQgcGFzc2VkIHRoZSBwcmVkaWNhdGUsIGFuZCBhbm90aGVyIHdpdGggdmFsdWVzIHRoYXQgZGlkIG5vdFxuICogcGFzcyB0aGUgcHJlZGljYXRlLlxuICogQG1ldGhvZCBwYXJ0aXRpb25cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHBhcnRpdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBmaWx0ZXJfMS5maWx0ZXIuY2FsbCh0aGlzLCBwcmVkaWNhdGUpLFxuICAgICAgICBmaWx0ZXJfMS5maWx0ZXIuY2FsbCh0aGlzLCBub3RfMS5ub3QocHJlZGljYXRlLCB0aGlzQXJnKSlcbiAgICBdO1xufVxuZXhwb3J0cy5wYXJ0aXRpb24gPSBwYXJ0aXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0aXRpb24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9wYXJ0aXRpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA0OTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gbm90KHByZWQsIHRoaXNBcmcpIHtcbiAgICBmdW5jdGlvbiBub3RQcmVkKCkge1xuICAgICAgICByZXR1cm4gIShub3RQcmVkLnByZWQuYXBwbHkobm90UHJlZC50aGlzQXJnLCBhcmd1bWVudHMpKTtcbiAgICB9XG4gICAgbm90UHJlZC5wcmVkID0gcHJlZDtcbiAgICBub3RQcmVkLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgIHJldHVybiBub3RQcmVkO1xufVxuZXhwb3J0cy5ub3QgPSBub3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL25vdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHBsdWNrXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9wbHVjaycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnBsdWNrID0gcGx1Y2tfMS5wbHVjaztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3BsdWNrLmpzXG4gKiogbW9kdWxlIGlkID0gNDk1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBtYXBfMSA9IHJlcXVpcmUoJy4vbWFwJyk7XG4vKipcbiAqIE1hcHMgZWFjaCBzb3VyY2UgdmFsdWUgKGFuIG9iamVjdCkgdG8gaXRzIHNwZWNpZmllZCBuZXN0ZWQgcHJvcGVydHkuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxpa2Uge0BsaW5rIG1hcH0sIGJ1dCBtZWFudCBvbmx5IGZvciBwaWNraW5nIG9uZSBvZlxuICogdGhlIG5lc3RlZCBwcm9wZXJ0aWVzIG9mIGV2ZXJ5IGVtaXR0ZWQgb2JqZWN0Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3BsdWNrLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEdpdmVuIGEgbGlzdCBvZiBzdHJpbmdzIGRlc2NyaWJpbmcgYSBwYXRoIHRvIGFuIG9iamVjdCBwcm9wZXJ0eSwgcmV0cmlldmVzXG4gKiB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpZWQgbmVzdGVkIHByb3BlcnR5IGZyb20gYWxsIHZhbHVlcyBpbiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBJZiBhIHByb3BlcnR5IGNhbid0IGJlIHJlc29sdmVkLCBpdCB3aWxsIHJldHVybiBgdW5kZWZpbmVkYCBmb3JcbiAqIHRoYXQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSB0YWdOYW1lIG9mIHRoZSBjbGlja2VkIHRhcmdldCBlbGVtZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciB0YWdOYW1lcyA9IGNsaWNrcy5wbHVjaygndGFyZ2V0JywgJ3RhZ05hbWUnKTtcbiAqIHRhZ05hbWVzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXB9XG4gKlxuICogQHBhcmFtIHsuLi5zdHJpbmd9IHByb3BlcnRpZXMgVGhlIG5lc3RlZCBwcm9wZXJ0aWVzIHRvIHBsdWNrIGZyb20gZWFjaCBzb3VyY2VcbiAqIHZhbHVlIChhbiBvYmplY3QpLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gUmV0dXJucyBhIG5ldyBPYnNlcnZhYmxlIG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIHRoZVxuICogc291cmNlIHZhbHVlcy5cbiAqIEBtZXRob2QgcGx1Y2tcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHBsdWNrKCkge1xuICAgIHZhciBwcm9wZXJ0aWVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgcHJvcGVydGllc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIGxlbmd0aCA9IHByb3BlcnRpZXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LicpO1xuICAgIH1cbiAgICByZXR1cm4gbWFwXzEubWFwLmNhbGwodGhpcywgcGx1Y2tlcihwcm9wZXJ0aWVzLCBsZW5ndGgpKTtcbn1cbmV4cG9ydHMucGx1Y2sgPSBwbHVjaztcbmZ1bmN0aW9uIHBsdWNrZXIocHJvcHMsIGxlbmd0aCkge1xuICAgIHZhciBtYXBwZXIgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICB2YXIgY3VycmVudFByb3AgPSB4O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcCA9IGN1cnJlbnRQcm9wW3Byb3BzW2ldXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJvcCA9IHA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJyZW50UHJvcDtcbiAgICB9O1xuICAgIHJldHVybiBtYXBwZXI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbHVjay5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3BsdWNrLmpzXG4gKiogbW9kdWxlIGlkID0gNDk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcHVibGlzaF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcHVibGlzaCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2ggPSBwdWJsaXNoXzEucHVibGlzaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2guanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIG11bHRpY2FzdF8xID0gcmVxdWlyZSgnLi9tdWx0aWNhc3QnKTtcbi8qKlxuICogUmV0dXJucyBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgd2hpY2ggaXMgYSB2YXJpZXR5IG9mIE9ic2VydmFibGUgdGhhdCB3YWl0cyB1bnRpbCBpdHMgY29ubmVjdCBtZXRob2QgaXMgY2FsbGVkXG4gKiBiZWZvcmUgaXQgYmVnaW5zIGVtaXR0aW5nIGl0ZW1zIHRvIHRob3NlIE9ic2VydmVycyB0aGF0IGhhdmUgc3Vic2NyaWJlZCB0byBpdC5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3B1Ymxpc2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHJldHVybiBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSB0aGF0IHVwb24gY29ubmVjdGlvbiBjYXVzZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRvIGVtaXQgaXRlbXMgdG8gaXRzIE9ic2VydmVycy5cbiAqIEBtZXRob2QgcHVibGlzaFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcHVibGlzaCgpIHtcbiAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IFN1YmplY3RfMS5TdWJqZWN0KCkpO1xufVxuZXhwb3J0cy5wdWJsaXNoID0gcHVibGlzaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2guanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoLmpzXG4gKiogbW9kdWxlIGlkID0gNDk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcHVibGlzaEJlaGF2aW9yXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3InKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoQmVoYXZpb3IgPSBwdWJsaXNoQmVoYXZpb3JfMS5wdWJsaXNoQmVoYXZpb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoQmVoYXZpb3IuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yLmpzXG4gKiogbW9kdWxlIGlkID0gNDk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBCZWhhdmlvclN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL0JlaGF2aW9yU3ViamVjdCcpO1xudmFyIG11bHRpY2FzdF8xID0gcmVxdWlyZSgnLi9tdWx0aWNhc3QnKTtcbi8qKlxuICogQHBhcmFtIHZhbHVlXG4gKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHB1Ymxpc2hCZWhhdmlvclxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcHVibGlzaEJlaGF2aW9yKHZhbHVlKSB7XG4gICAgcmV0dXJuIG11bHRpY2FzdF8xLm11bHRpY2FzdC5jYWxsKHRoaXMsIG5ldyBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3QodmFsdWUpKTtcbn1cbmV4cG9ydHMucHVibGlzaEJlaGF2aW9yID0gcHVibGlzaEJlaGF2aW9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaEJlaGF2aW9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yLmpzXG4gKiogbW9kdWxlIGlkID0gNTAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4vU3ViamVjdCcpO1xudmFyIHRocm93RXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC90aHJvd0Vycm9yJyk7XG52YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcicpO1xuLyoqXG4gKiBAY2xhc3MgQmVoYXZpb3JTdWJqZWN0PFQ+XG4gKi9cbnZhciBCZWhhdmlvclN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCZWhhdmlvclN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmVoYXZpb3JTdWJqZWN0KF92YWx1ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgfVxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yZWQpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3JfMS50aHJvd0Vycm9yKHRoaXMuZXJyb3JWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcl8xLnRocm93RXJyb3IobmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdGhpcy5fdmFsdWUgPSB2YWx1ZSk7XG4gICAgfTtcbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5oYXNFcnJvcmVkID0gdHJ1ZTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCB0aGlzLmVycm9yVmFsdWUgPSBlcnIpO1xuICAgIH07XG4gICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcbn0oU3ViamVjdF8xLlN1YmplY3QpKTtcbmV4cG9ydHMuQmVoYXZpb3JTdWJqZWN0ID0gQmVoYXZpb3JTdWJqZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmVoYXZpb3JTdWJqZWN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvQmVoYXZpb3JTdWJqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcHVibGlzaFJlcGxheV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcHVibGlzaFJlcGxheScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hSZXBsYXkgPSBwdWJsaXNoUmVwbGF5XzEucHVibGlzaFJlcGxheTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hSZXBsYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaFJlcGxheS5qc1xuICoqIG1vZHVsZSBpZCA9IDUwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHB1Ymxpc2hMYXN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9wdWJsaXNoTGFzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hMYXN0ID0gcHVibGlzaExhc3RfMS5wdWJsaXNoTGFzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hMYXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hMYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBBc3luY1N1YmplY3RfMSA9IHJlcXVpcmUoJy4uL0FzeW5jU3ViamVjdCcpO1xudmFyIG11bHRpY2FzdF8xID0gcmVxdWlyZSgnLi9tdWx0aWNhc3QnKTtcbi8qKlxuICogQHJldHVybiB7Q29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCBwdWJsaXNoTGFzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcHVibGlzaExhc3QoKSB7XG4gICAgcmV0dXJuIG11bHRpY2FzdF8xLm11bHRpY2FzdC5jYWxsKHRoaXMsIG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKSk7XG59XG5leHBvcnRzLnB1Ymxpc2hMYXN0ID0gcHVibGlzaExhc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoTGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2hMYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmFjZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcmFjZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJhY2UgPSByYWNlXzEucmFjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhY2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcmFjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUwNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHJlZHVjZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcmVkdWNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVkdWNlID0gcmVkdWNlXzEucmVkdWNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVkdWNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3JlZHVjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGFwcGxpZXMgYSBzcGVjaWZpZWQgYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSBhIHNvdXJjZSBPYnNlcnZhYmxlLFxuICogdGhlbiBmZWVkcyB0aGUgcmVzdWx0IG9mIHRoYXQgZnVuY3Rpb24gYWxvbmcgd2l0aCB0aGUgc2Vjb25kIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgaW50byB0aGUgc2FtZVxuICogZnVuY3Rpb24sIGFuZCBzbyBvbiB1bnRpbCBhbGwgaXRlbXMgaGF2ZSBiZWVuIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhlIGZpbmFsIHJlc3VsdCBmcm9tXG4gKiB0aGUgZmluYWwgY2FsbCB0byB5b3VyIGZ1bmN0aW9uIGFzIGl0cyBzb2xlIGl0ZW0uXG4gKiBUaGlzIHRlY2huaXF1ZSwgd2hpY2ggaXMgY2FsbGVkIFwicmVkdWNlXCIgaGVyZSwgaXMgc29tZXRpbWVzIGNhbGxlZCBcImFnZ3JlZ2F0ZSxcIiBcImZvbGQsXCIgXCJhY2N1bXVsYXRlLFwiIFwiY29tcHJlc3MsXCIgb3JcbiAqIFwiaW5qZWN0XCIgaW4gb3RoZXIgcHJvZ3JhbW1pbmcgY29udGV4dHMuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9yZWR1Y2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtpbml0aWFsVmFsdWV9IHRoZSBpbml0aWFsIChzZWVkKSBhY2N1bXVsYXRvciB2YWx1ZVxuICogQHBhcmFtIHthY2N1bXVsYXRvcn0gYW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBvbiBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZVxuICogcmVzdWx0IG9mIHdoaWNoIHdpbGwgYmUgdXNlZCBpbiB0aGUgbmV4dCBhY2N1bXVsYXRvciBjYWxsLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgc2luZ2xlIGl0ZW0gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFjY3VtdWxhdGluZyB0aGUgb3V0cHV0IGZyb20gdGhlXG4gKiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgcmVkdWNlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiByZWR1Y2UocHJvamVjdCwgc2VlZCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlZHVjZU9wZXJhdG9yKHByb2plY3QsIHNlZWQpKTtcbn1cbmV4cG9ydHMucmVkdWNlID0gcmVkdWNlO1xudmFyIFJlZHVjZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWR1Y2VPcGVyYXRvcihwcm9qZWN0LCBzZWVkKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG4gICAgfVxuICAgIFJlZHVjZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJlZHVjZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnNlZWQpKTtcbiAgICB9O1xuICAgIHJldHVybiBSZWR1Y2VPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLlJlZHVjZU9wZXJhdG9yID0gUmVkdWNlT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJlZHVjZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZWR1Y2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlZHVjZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHNlZWQpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWNjID0gc2VlZDtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5oYXNTZWVkID0gdHlwZW9mIHNlZWQgIT09ICd1bmRlZmluZWQnO1xuICAgIH1cbiAgICBSZWR1Y2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSB8fCAodGhpcy5oYXNWYWx1ZSA9IHRoaXMuaGFzU2VlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVJlZHVjZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZWR1Y2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh0aGlzLmFjYywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjYyA9IHJlc3VsdDtcbiAgICB9O1xuICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUgfHwgdGhpcy5oYXNTZWVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hY2MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBSZWR1Y2VTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5SZWR1Y2VTdWJzY3JpYmVyID0gUmVkdWNlU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3JlZHVjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHJlcGVhdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcmVwZWF0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVwZWF0ID0gcmVwZWF0XzEucmVwZWF0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwZWF0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3JlcGVhdC5qc1xuICoqIG1vZHVsZSBpZCA9IDUwOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCByZXBlYXRzIHRoZSBzdHJlYW0gb2YgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXQgbW9zdCBjb3VudCB0aW1lcyxcbiAqIG9uIGEgcGFydGljdWxhciBTY2hlZHVsZXIuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9yZXBlYXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gZW1pdCB0aGUgaXRlbXMgb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvdW50XSB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpdGVtcyBhcmUgcmVwZWF0ZWQsIGEgY291bnQgb2YgMCB3aWxsIHlpZWxkXG4gKiBhbiBlbXB0eSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0XG4gKiBjb3VudCB0aW1lcy5cbiAqIEBtZXRob2QgcmVwZWF0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiByZXBlYXQoY291bnQpIHtcbiAgICBpZiAoY291bnQgPT09IHZvaWQgMCkgeyBjb3VudCA9IC0xOyB9XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvdW50IDwgMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBSZXBlYXRPcGVyYXRvcigtMSwgdGhpcykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVwZWF0T3BlcmF0b3IoY291bnQgLSAxLCB0aGlzKSk7XG4gICAgfVxufVxuZXhwb3J0cy5yZXBlYXQgPSByZXBlYXQ7XG52YXIgUmVwZWF0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlcGVhdE9wZXJhdG9yKGNvdW50LCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgUmVwZWF0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmVwZWF0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcGVhdE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmVwZWF0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcGVhdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVwZWF0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY291bnQsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIFJlcGVhdFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLCBzb3VyY2UgPSBfYS5zb3VyY2UsIGNvdW50ID0gX2EuY291bnQ7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBjb3VudCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJlcGVhdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9yZXBlYXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByZXRyeV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcmV0cnknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXRyeSA9IHJldHJ5XzEucmV0cnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZXRyeS5qc1xuICoqIG1vZHVsZSBpZCA9IDUxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXN1YnNjcmliaW5nIHRvIGl0IGlmIGl0IGNhbGxzIGBlcnJvcmAgYW5kIHRoZVxuICogcHJlZGljYXRlIHJldHVybnMgdHJ1ZSBmb3IgdGhhdCBzcGVjaWZpYyBleGNlcHRpb24gYW5kIHJldHJ5IGNvdW50LlxuICogSWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGNhbGxzIGBlcnJvcmAsIHRoaXMgbWV0aG9kIHdpbGwgcmVzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGZvciBhIG1heGltdW0gb2ZcbiAqIGNvdW50IHJlc3Vic2NyaXB0aW9ucyAoZ2l2ZW4gYXMgYSBudW1iZXIgcGFyYW1ldGVyKSByYXRoZXIgdGhhbiBwcm9wYWdhdGluZyB0aGUgYGVycm9yYCBjYWxsLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvcmV0cnkucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQW55IGFuZCBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2lsbCBiZSBlbWl0dGVkIGJ5IHRoZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSwgZXZlbiB0aG9zZSBlbWl0dGVkXG4gKiBkdXJpbmcgZmFpbGVkIHN1YnNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCBpZiBhbiBPYnNlcnZhYmxlIGZhaWxzIGF0IGZpcnN0IGJ1dCBlbWl0cyBbMSwgMl0gdGhlbiBzdWNjZWVkcyB0aGUgc2Vjb25kXG4gKiB0aW1lIGFuZCBlbWl0czogWzEsIDIsIDMsIDQsIDVdIHRoZW4gdGhlIGNvbXBsZXRlIHN0cmVhbSBvZiBlbWlzc2lvbnMgYW5kIG5vdGlmaWNhdGlvbnNcbiAqIHdvdWxkIGJlOiBbMSwgMiwgMSwgMiwgMywgNCwgNSwgYGNvbXBsZXRlYF0uXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIG9mIHJldHJ5IGF0dGVtcHRzIGJlZm9yZSBmYWlsaW5nLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1vZGlmaWVkIHdpdGggdGhlIHJldHJ5IGxvZ2ljLlxuICogQG1ldGhvZCByZXRyeVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcmV0cnkoY291bnQpIHtcbiAgICBpZiAoY291bnQgPT09IHZvaWQgMCkgeyBjb3VudCA9IC0xOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmV0cnlPcGVyYXRvcihjb3VudCwgdGhpcykpO1xufVxuZXhwb3J0cy5yZXRyeSA9IHJldHJ5O1xudmFyIFJldHJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJldHJ5T3BlcmF0b3IoY291bnQsIHNvdXJjZSkge1xuICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBSZXRyeU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJldHJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJldHJ5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSZXRyeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXRyeVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmV0cnlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb3VudCwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgUmV0cnlTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcywgc291cmNlID0gX2Euc291cmNlLCBjb3VudCA9IF9hLmNvdW50O1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBjb3VudCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJldHJ5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcmV0cnkuanNcbiAqKiBtb2R1bGUgaWQgPSA1MTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByZXRyeVdoZW5fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3JldHJ5V2hlbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJldHJ5V2hlbiA9IHJldHJ5V2hlbl8xLnJldHJ5V2hlbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5V2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZXRyeVdoZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1MTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGUgc291cmNlIG9ic2VydmFibGUgd2l0aCB0aGUgZXhjZXB0aW9uIG9mIGFuIGBlcnJvcmAuXG4gKiBBbiBgZXJyb3JgIHdpbGwgY2F1c2UgdGhlIGVtaXNzaW9uIG9mIHRoZSBUaHJvd2FibGUgdGhhdCBjYXVzZSB0aGUgZXJyb3IgdG8gdGhlIE9ic2VydmFibGUgcmV0dXJuZWQgZnJvbVxuICogbm90aWZpY2F0aW9uSGFuZGxlci4gSWYgdGhhdCBPYnNlcnZhYmxlIGNhbGxzIG9uQ29tcGxldGUgb3IgYGVycm9yYCB0aGVuIHJldHJ5IHdpbGwgY2FsbCBgY29tcGxldGVgIG9yIGBlcnJvcmBcbiAqIG9uIHRoZSBjaGlsZCBzdWJzY3JpcHRpb24uIE90aGVyd2lzZSwgdGhpcyBPYnNlcnZhYmxlIHdpbGwgcmVzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBvYnNlcnZhYmxlLCBvbiBhIHBhcnRpY3VsYXJcbiAqIFNjaGVkdWxlci5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3JldHJ5V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge25vdGlmaWNhdGlvbkhhbmRsZXJ9IHJlY2VpdmVzIGFuIE9ic2VydmFibGUgb2Ygbm90aWZpY2F0aW9ucyB3aXRoIHdoaWNoIGEgdXNlciBjYW4gYGNvbXBsZXRlYCBvciBgZXJyb3JgLFxuICogYWJvcnRpbmcgdGhlIHJldHJ5LlxuICogQHBhcmFtIHtzY2hlZHVsZXJ9IHRoZSBTY2hlZHVsZXIgb24gd2hpY2ggdG8gc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtb2RpZmllZCB3aXRoIHJldHJ5IGxvZ2ljLlxuICogQG1ldGhvZCByZXRyeVdoZW5cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHJldHJ5V2hlbihub3RpZmllcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJldHJ5V2hlbk9wZXJhdG9yKG5vdGlmaWVyLCB0aGlzKSk7XG59XG5leHBvcnRzLnJldHJ5V2hlbiA9IHJldHJ5V2hlbjtcbnZhciBSZXRyeVdoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmV0cnlXaGVuT3BlcmF0b3Iobm90aWZpZXIsIHNvdXJjZSkge1xuICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBSZXRyeVdoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSZXRyeVdoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmV0cnlXaGVuT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSZXRyeVdoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmV0cnlXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZXRyeVdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllciwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSB0aGlzLmVycm9ycztcbiAgICAgICAgICAgIHZhciByZXRyaWVzID0gdGhpcy5yZXRyaWVzO1xuICAgICAgICAgICAgdmFyIHJldHJpZXNTdWJzY3JpcHRpb24gPSB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb247XG4gICAgICAgICAgICBpZiAoIXJldHJpZXMpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgICAgICAgICByZXRyaWVzID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLm5vdGlmaWVyKShlcnJvcnMpO1xuICAgICAgICAgICAgICAgIGlmIChyZXRyaWVzID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0cmllc1N1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgcmV0cmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgICAgICAgICAgdGhpcy5yZXRyaWVzID0gcmV0cmllcztcbiAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IHJldHJpZXNTdWJzY3JpcHRpb247XG4gICAgICAgICAgICBlcnJvcnMubmV4dChlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGVycm9ycyA9IF9hLmVycm9ycywgcmV0cmllc1N1YnNjcmlwdGlvbiA9IF9hLnJldHJpZXNTdWJzY3JpcHRpb247XG4gICAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgICAgIGVycm9ycy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXRyaWVzU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXRyaWVzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmV0cmllcyA9IG51bGw7XG4gICAgfTtcbiAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGVycm9ycyA9IF9hLmVycm9ycywgcmV0cmllcyA9IF9hLnJldHJpZXMsIHJldHJpZXNTdWJzY3JpcHRpb24gPSBfYS5yZXRyaWVzU3Vic2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7XG4gICAgICAgIHRoaXMucmV0cmllcyA9IG51bGw7XG4gICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgdGhpcy5yZXRyaWVzID0gcmV0cmllcztcbiAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gcmV0cmllc1N1YnNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFJldHJ5V2hlblN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnlXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcmV0cnlXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNTEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc2FtcGxlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zYW1wbGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zYW1wbGUgPSBzYW1wbGVfMS5zYW1wbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2FtcGxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogRW1pdHMgdGhlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aGVuZXZlclxuICogYW5vdGhlciBPYnNlcnZhYmxlLCB0aGUgYG5vdGlmaWVyYCwgZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgc2FtcGxlVGltZX0sIGJ1dCBzYW1wbGVzIHdoZW5ldmVyXG4gKiB0aGUgYG5vdGlmaWVyYCBPYnNlcnZhYmxlIGVtaXRzIHNvbWV0aGluZy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zYW1wbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogV2hlbmV2ZXIgdGhlIGBub3RpZmllcmAgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgYHNhbXBsZWBcbiAqIGxvb2tzIGF0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgZW1pdHMgd2hpY2hldmVyIHZhbHVlIGl0IGhhcyBtb3N0IHJlY2VudGx5XG4gKiBlbWl0dGVkIHNpbmNlIHRoZSBwcmV2aW91cyBzYW1wbGluZywgdW5sZXNzIHRoZSBzb3VyY2UgaGFzIG5vdCBlbWl0dGVkXG4gKiBhbnl0aGluZyBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcuIFRoZSBgbm90aWZpZXJgIGlzIHN1YnNjcmliZWQgdG8gYXMgc29vblxuICogYXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2ssIHNhbXBsZSB0aGUgbW9zdCByZWNlbnQgXCJzZWNvbmRzXCIgdGltZXI8L2NhcHRpb24+XG4gKiB2YXIgc2Vjb25kcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IHNlY29uZHMuc2FtcGxlKGNsaWNrcyk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG4gKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuICogQHNlZSB7QGxpbmsgdGhyb3R0bGV9XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlPGFueT59IG5vdGlmaWVyIFRoZSBPYnNlcnZhYmxlIHRvIHVzZSBmb3Igc2FtcGxpbmcgdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBzYW1wbGluZyB0aGVcbiAqIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aGVuZXZlciB0aGUgbm90aWZpZXIgT2JzZXJ2YWJsZVxuICogZW1pdHMgdmFsdWUgb3IgY29tcGxldGVzLlxuICogQG1ldGhvZCBzYW1wbGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNhbXBsZShub3RpZmllcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNhbXBsZU9wZXJhdG9yKG5vdGlmaWVyKSk7XG59XG5leHBvcnRzLnNhbXBsZSA9IHNhbXBsZTtcbnZhciBTYW1wbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2FtcGxlT3BlcmF0b3Iobm90aWZpZXIpIHtcbiAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuICAgIH1cbiAgICBTYW1wbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTYW1wbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBTYW1wbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNhbXBsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTYW1wbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNhbXBsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG5vdGlmaWVyKSk7XG4gICAgfVxuICAgIFNhbXBsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgfTtcbiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgfTtcbiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcbiAgICB9O1xuICAgIFNhbXBsZVN1YnNjcmliZXIucHJvdG90eXBlLmVtaXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNhbXBsZVN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2FtcGxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc2FtcGxlVGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2FtcGxlVGltZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNhbXBsZVRpbWUgPSBzYW1wbGVUaW1lXzEuc2FtcGxlVGltZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZVRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2FtcGxlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBFbWl0cyB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGhpblxuICogcGVyaW9kaWMgdGltZSBpbnRlcnZhbHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlNhbXBsZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IHBlcmlvZGljIHRpbWVcbiAqIGludGVydmFscywgZW1pdHRpbmcgd2hhdCBpdCBzYW1wbGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NhbXBsZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHNhbXBsZVRpbWVgIHBlcmlvZGljYWxseSBsb29rcyBhdCB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIGVtaXRzIHdoaWNoZXZlclxuICogdmFsdWUgaXQgaGFzIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcsIHVubGVzcyB0aGVcbiAqIHNvdXJjZSBoYXMgbm90IGVtaXR0ZWQgYW55dGhpbmcgc2luY2UgdGhlIHByZXZpb3VzIHNhbXBsaW5nLiBUaGUgc2FtcGxpbmdcbiAqIGhhcHBlbnMgcGVyaW9kaWNhbGx5IGluIHRpbWUgZXZlcnkgYHBlcmlvZGAgbWlsbGlzZWNvbmRzIChvciB0aGUgdGltZSB1bml0XG4gKiBkZWZpbmVkIGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYCBhcmd1bWVudCkuIFRoZSBzYW1wbGluZyBzdGFydHMgYXMgc29vbiBhc1xuICogdGhlIG91dHB1dCBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgc2Vjb25kLCBlbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhdCBtb3N0IG9uY2U8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zYW1wbGVUaW1lKDEwMDApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBhdWRpdFRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqIEBzZWUge0BsaW5rIHNhbXBsZX1cbiAqIEBzZWUge0BsaW5rIHRocm90dGxlVGltZX1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gcGVyaW9kIFRoZSBzYW1wbGluZyBwZXJpb2QgZXhwcmVzc2VkIGluIG1pbGxpc2Vjb25kcyBvciB0aGVcbiAqIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yXG4gKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSBzYW1wbGluZy5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBzYW1wbGluZyB0aGVcbiAqIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCB0aGUgc3BlY2lmaWVkIHRpbWUgaW50ZXJ2YWwuXG4gKiBAbWV0aG9kIHNhbXBsZVRpbWVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNhbXBsZVRpbWUocGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNhbXBsZVRpbWVPcGVyYXRvcihwZXJpb2QsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5zYW1wbGVUaW1lID0gc2FtcGxlVGltZTtcbnZhciBTYW1wbGVUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVPcGVyYXRvcihwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFNhbXBsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTYW1wbGVUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnBlcmlvZCwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBTYW1wbGVUaW1lT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTYW1wbGVUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNhbXBsZVRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucGVyaW9kID0gcGVyaW9kO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOb3RpZmljYXRpb24sIHBlcmlvZCwgeyBzdWJzY3JpYmVyOiB0aGlzLCBwZXJpb2Q6IHBlcmlvZCB9KSk7XG4gICAgfVxuICAgIFNhbXBsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICB9O1xuICAgIFNhbXBsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNhbXBsZVRpbWVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZnVuY3Rpb24gZGlzcGF0Y2hOb3RpZmljYXRpb24oc3RhdGUpIHtcbiAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZDtcbiAgICBzdWJzY3JpYmVyLm5vdGlmeU5leHQoKTtcbiAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NhbXBsZVRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzY2FuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zY2FuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2NhbiA9IHNjYW5fMS5zY2FuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nhbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zY2FuLmpzXG4gKiogbW9kdWxlIGlkID0gNTE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQXBwbGllcyBhbiBhY2N1bXVsYXRpb24gZnVuY3Rpb24gb3ZlciB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCByZXR1cm5zIGVhY2hcbiAqIGludGVybWVkaWF0ZSByZXN1bHQsIHdpdGggYW4gb3B0aW9uYWwgc2VlZCB2YWx1ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayByZWR1Y2V9LCBidXQgZW1pdHMgdGhlIGN1cnJlbnRcbiAqIGFjY3VtdWxhdGlvbiB3aGVuZXZlciB0aGUgc291cmNlIGVtaXRzIGEgdmFsdWUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc2Nhbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBDb21iaW5lcyB0b2dldGhlciBhbGwgdmFsdWVzIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSwgdXNpbmcgYW4gYWNjdW11bGF0b3JcbiAqIGZ1bmN0aW9uIHRoYXQga25vd3MgaG93IHRvIGpvaW4gYSBuZXcgc291cmNlIHZhbHVlIGludG8gdGhlIGFjY3VtdWxhdGlvbiBmcm9tXG4gKiB0aGUgcGFzdC4gSXMgc2ltaWxhciB0byB7QGxpbmsgcmVkdWNlfSwgYnV0IGVtaXRzIHRoZSBpbnRlcm1lZGlhdGVcbiAqIGFjY3VtdWxhdGlvbnMuXG4gKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgYXBwbGllcyBhIHNwZWNpZmllZCBgYWNjdW11bGF0b3JgIGZ1bmN0aW9uIHRvIGVhY2hcbiAqIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGEgYHNlZWRgIHZhbHVlIGlzIHNwZWNpZmllZCwgdGhlblxuICogdGhhdCB2YWx1ZSB3aWxsIGJlIHVzZWQgYXMgdGhlIGluaXRpYWwgdmFsdWUgZm9yIHRoZSBhY2N1bXVsYXRvci4gSWYgbm8gc2VlZFxuICogdmFsdWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlyc3QgaXRlbSBvZiB0aGUgc291cmNlIGlzIHVzZWQgYXMgdGhlIHNlZWQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnQgdGhlIG51bWJlciBvZiBjbGljayBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIG9uZXMgPSBjbGlja3MubWFwVG8oMSk7XG4gKiB2YXIgc2VlZCA9IDA7XG4gKiB2YXIgY291bnQgPSBvbmVzLnNjYW4oKGFjYywgb25lKSA9PiBhY2MgKyBvbmUsIHNlZWQpO1xuICogY291bnQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGV4cGFuZH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cbiAqIEBzZWUge0BsaW5rIHJlZHVjZX1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGFjYzogUiwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBhY2N1bXVsYXRvclxuICogVGhlIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHNvdXJjZSB2YWx1ZS5cbiAqIEBwYXJhbSB7VHxSfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0aW9uIHZhbHVlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gb2JzZXJ2YWJsZSBvZiB0aGUgYWNjdW11bGF0ZWQgdmFsdWVzLlxuICogQG1ldGhvZCBzY2FuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzY2FuKGFjY3VtdWxhdG9yLCBzZWVkKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2Nhbk9wZXJhdG9yKGFjY3VtdWxhdG9yLCBzZWVkKSk7XG59XG5leHBvcnRzLnNjYW4gPSBzY2FuO1xudmFyIFNjYW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2Nhbk9wZXJhdG9yKGFjY3VtdWxhdG9yLCBzZWVkKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICB9XG4gICAgU2Nhbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNjYW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWNjdW11bGF0b3IsIHRoaXMuc2VlZCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFNjYW5PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNjYW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2NhblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2NhblN1YnNjcmliZXIoZGVzdGluYXRpb24sIGFjY3VtdWxhdG9yLCBzZWVkKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yU2V0ID0gdHlwZW9mIHNlZWQgIT09ICd1bmRlZmluZWQnO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2NhblN1YnNjcmliZXIucHJvdG90eXBlLCBcInNlZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9zZWVkID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuYWNjdW11bGF0b3JTZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VlZCA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuYWNjdW11bGF0b3IodGhpcy5zZWVkLCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlZWQgPSByZXN1bHQ7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFNjYW5TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nhbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NjYW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1MTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzaGFyZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2hhcmUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zaGFyZSA9IHNoYXJlXzEuc2hhcmU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zaGFyZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuL211bHRpY2FzdCcpO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbmZ1bmN0aW9uIHNoYXJlU3ViamVjdEZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgdGhhdCBtdWx0aWNhc3RzIChzaGFyZXMpIHRoZSBvcmlnaW5hbCBPYnNlcnZhYmxlLiBBcyBsb25nIGFzIHRoZXJlIGlzIGF0IGxlYXN0IG9uZVxuICogU3Vic2NyaWJlciB0aGlzIE9ic2VydmFibGUgd2lsbCBiZSBzdWJzY3JpYmVkIGFuZCBlbWl0dGluZyBkYXRhLiBXaGVuIGFsbCBzdWJzY3JpYmVycyBoYXZlIHVuc3Vic2NyaWJlZCBpdCB3aWxsXG4gKiB1bnN1YnNjcmliZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gQmVjYXVzZSB0aGUgT2JzZXJ2YWJsZSBpcyBtdWx0aWNhc3RpbmcgaXQgbWFrZXMgdGhlIHN0cmVhbSBgaG90YC5cbiAqIFRoaXMgaXMgYW4gYWxpYXMgZm9yIC5wdWJsaXNoKCkucmVmQ291bnQoKS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NoYXJlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IGFuIE9ic2VydmFibGUgdGhhdCB1cG9uIGNvbm5lY3Rpb24gY2F1c2VzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGl0ZW1zIHRvIGl0cyBPYnNlcnZlcnNcbiAqIEBtZXRob2Qgc2hhcmVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNoYXJlKCkge1xuICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBzaGFyZVN1YmplY3RGYWN0b3J5KS5yZWZDb3VudCgpO1xufVxuZXhwb3J0cy5zaGFyZSA9IHNoYXJlO1xuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcmUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zaGFyZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNpbmdsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2luZ2xlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2luZ2xlID0gc2luZ2xlXzEuc2luZ2xlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2luZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NpbmdsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgRW1wdHlFcnJvcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9FbXB0eUVycm9yJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzaW5nbGUgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IG1hdGNoZXMgYSBzcGVjaWZpZWRcbiAqIHByZWRpY2F0ZSwgaWYgdGhhdCBPYnNlcnZhYmxlIGVtaXRzIG9uZSBzdWNoIGl0ZW0uIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBtb3JlIHRoYW4gb25lIHN1Y2ggaXRlbSBvciBub1xuICogc3VjaCBpdGVtcywgbm90aWZ5IG9mIGFuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBvciBOb1N1Y2hFbGVtZW50RXhjZXB0aW9uIHJlc3BlY3RpdmVseS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NpbmdsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcbiAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBldmFsdWF0ZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2luZ2xlIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBtYXRjaGVzXG4gKiB0aGUgcHJlZGljYXRlLlxuIC5cbiAqIEBtZXRob2Qgc2luZ2xlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzaW5nbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzKSk7XG59XG5leHBvcnRzLnNpbmdsZSA9IHNpbmdsZTtcbnZhciBTaW5nbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBTaW5nbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTaW5nbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFNpbmdsZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2luZ2xlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNpbmdsZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2luZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc2VlblZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5hcHBseVNpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlZW5WYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcignU2VxdWVuY2UgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBlbGVtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlZW5WYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZVZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBwcmVkaWNhdGUgPSB0aGlzLnByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICBpZiAocHJlZGljYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnRyeU5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcHBseVNpbmdsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2luZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5TmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLnNvdXJjZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVNpbmdsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMuc2VlblZhbHVlID8gdGhpcy5zaW5nbGVWYWx1ZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNpbmdsZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zaW5nbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBza2lwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9za2lwJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcCA9IHNraXBfMS5za2lwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwLmpzXG4gKiogbW9kdWxlIGlkID0gNTI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgYG5gIGl0ZW1zIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NraXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHRoZSBgbmAgb2YgdGltZXMsIGl0ZW1zIGVtaXR0ZWQgYnkgc291cmNlIE9ic2VydmFibGUgc2hvdWxkIGJlIHNraXBwZWQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIEBtZXRob2Qgc2tpcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2tpcCh0b3RhbCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNraXBPcGVyYXRvcih0b3RhbCkpO1xufVxuZXhwb3J0cy5za2lwID0gc2tpcDtcbnZhciBTa2lwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNraXBPcGVyYXRvcih0b3RhbCkge1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgfVxuICAgIFNraXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2tpcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTa2lwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTa2lwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBTa2lwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAoKyt0aGlzLmNvdW50ID4gdGhpcy50b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2lwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2tpcC5qc1xuICoqIG1vZHVsZSBpZCA9IDUyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNraXBVbnRpbF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2tpcFVudGlsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcFVudGlsID0gc2tpcFVudGlsXzEuc2tpcFVudGlsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcFVudGlsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NraXBVbnRpbC5qc1xuICoqIG1vZHVsZSBpZCA9IDUyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHVudGlsIGEgc2Vjb25kIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NraXBVbnRpbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IHRoZSBzZWNvbmQgT2JzZXJ2YWJsZSB0aGF0IGhhcyB0byBlbWl0IGFuIGl0ZW0gYmVmb3JlIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSdzIGVsZW1lbnRzIGJlZ2luIHRvXG4gKiBiZSBtaXJyb3JlZCBieSB0aGUgcmVzdWx0aW5nIE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgdGhlIHNlY29uZCBPYnNlcnZhYmxlIGVtaXRzXG4gKiBhbiBpdGVtLCB0aGVuIGVtaXRzIHRoZSByZW1haW5pbmcgaXRlbXMuXG4gKiBAbWV0aG9kIHNraXBVbnRpbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2tpcFVudGlsKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcbn1cbmV4cG9ydHMuc2tpcFVudGlsID0gc2tpcFVudGlsO1xudmFyIFNraXBVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTa2lwVW50aWxPcGVyYXRvcihub3RpZmllcikge1xuICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgfVxuICAgIFNraXBVbnRpbE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNraXBVbnRpbFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFNraXBVbnRpbE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2tpcFVudGlsU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNraXBVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgbm90aWZpZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNJbm5lclN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuICAgIH1cbiAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0lubmVyU3RvcHBlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICB9O1xuICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzSW5uZXJTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFVudGlsU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2lwVW50aWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9za2lwVW50aWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBza2lwV2hpbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NraXBXaGlsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBXaGlsZSA9IHNraXBXaGlsZV8xLnNraXBXaGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaG9sZHNcbiAqIHRydWUsIGJ1dCBlbWl0cyBhbGwgZnVydGhlciBzb3VyY2UgaXRlbXMgYXMgc29vbiBhcyB0aGUgY29uZGl0aW9uIGJlY29tZXMgZmFsc2UuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9za2lwV2hpbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIC0gYSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggaXRlbSBlbWl0dGVkIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGJlZ2lucyBlbWl0dGluZyBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aGVuIHRoZVxuICogc3BlY2lmaWVkIHByZWRpY2F0ZSBiZWNvbWVzIGZhbHNlLlxuICogQG1ldGhvZCBza2lwV2hpbGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNraXBXaGlsZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcbn1cbmV4cG9ydHMuc2tpcFdoaWxlID0gc2tpcFdoaWxlO1xudmFyIFNraXBXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgfVxuICAgIFNraXBXaGlsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNraXBXaGlsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBTa2lwV2hpbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNraXBXaGlsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTa2lwV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNraXBXaGlsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnNraXBwaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIFNraXBXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmICh0aGlzLnNraXBwaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnRyeUNhbGxQcmVkaWNhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5za2lwcGluZykge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNraXBXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLnRyeUNhbGxQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTtcbiAgICAgICAgICAgIHRoaXMuc2tpcHBpbmcgPSBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFdoaWxlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NraXBXaGlsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN0YXJ0V2l0aF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc3RhcnRXaXRoJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3RhcnRXaXRoID0gc3RhcnRXaXRoXzEuc3RhcnRXaXRoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhcnRXaXRoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3N0YXJ0V2l0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUnKTtcbnZhciBjb25jYXRfMSA9IHJlcXVpcmUoJy4vY29uY2F0Jyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGluIGEgc3BlY2lmaWVkIEl0ZXJhYmxlIGJlZm9yZSBpdCBiZWdpbnMgdG8gZW1pdCBpdGVtcyBlbWl0dGVkIGJ5IHRoZVxuICogc291cmNlIE9ic2VydmFibGUuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zdGFydFdpdGgucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtWYWx1ZXN9IGFuIEl0ZXJhYmxlIHRoYXQgY29udGFpbnMgdGhlIGl0ZW1zIHlvdSB3YW50IHRoZSBtb2RpZmllZCBPYnNlcnZhYmxlIHRvIGVtaXQgZmlyc3QuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGluIHRoZSBzcGVjaWZpZWQgSXRlcmFibGUgYW5kIHRoZW4gZW1pdHMgdGhlIGl0ZW1zXG4gKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgc3RhcnRXaXRoXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzdGFydFdpdGgoKSB7XG4gICAgdmFyIGFycmF5ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJyYXlbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG4gICAgICAgIGFycmF5LnBvcCgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcbiAgICBpZiAobGVuID09PSAxKSB7XG4gICAgICAgIHJldHVybiBjb25jYXRfMS5jb25jYXRTdGF0aWMobmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpLCB0aGlzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVuID4gMSkge1xuICAgICAgICByZXR1cm4gY29uY2F0XzEuY29uY2F0U3RhdGljKG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlciksIHRoaXMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbmNhdF8xLmNvbmNhdFN0YXRpYyhuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlciksIHRoaXMpO1xuICAgIH1cbn1cbmV4cG9ydHMuc3RhcnRXaXRoID0gc3RhcnRXaXRoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhcnRXaXRoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3RhcnRXaXRoLmpzXG4gKiogbW9kdWxlIGlkID0gNTMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3Vic2NyaWJlT25fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3N1YnNjcmliZU9uJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlT24gPSBzdWJzY3JpYmVPbl8xLnN1YnNjcmliZU9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlT24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3Vic2NyaWJlT24uanNcbiAqKiBtb2R1bGUgaWQgPSA1MzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGUnKTtcbi8qKlxuICogQXN5bmNocm9ub3VzbHkgc3Vic2NyaWJlcyBPYnNlcnZlcnMgdG8gdGhpcyBPYnNlcnZhYmxlIG9uIHRoZSBzcGVjaWZpZWQgU2NoZWR1bGVyLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3Vic2NyaWJlT24ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IHRoZSBTY2hlZHVsZXIgdG8gcGVyZm9ybSBzdWJzY3JpcHRpb24gYWN0aW9ucyBvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtb2RpZmllZCBzbyB0aGF0IGl0cyBzdWJzY3JpcHRpb25zIGhhcHBlbiBvbiB0aGUgc3BlY2lmaWVkIFNjaGVkdWxlclxuIC5cbiAqIEBtZXRob2Qgc3Vic2NyaWJlT25cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHN1YnNjcmliZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xLlN1YnNjcmliZU9uT2JzZXJ2YWJsZSh0aGlzLCBkZWxheSwgc2NoZWR1bGVyKTtcbn1cbmV4cG9ydHMuc3Vic2NyaWJlT24gPSBzdWJzY3JpYmVPbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZU9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3Vic2NyaWJlT24uanNcbiAqKiBtb2R1bGUgaWQgPSA1MzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIGFzYXBfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc2FwJyk7XG52YXIgaXNOdW1lcmljXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzTnVtZXJpYycpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBTdWJzY3JpYmVPbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJzY3JpYmVPbk9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlT25PYnNlcnZhYmxlKHNvdXJjZSwgZGVsYXlUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGRlbGF5VGltZSA9PT0gdm9pZCAwKSB7IGRlbGF5VGltZSA9IDA7IH1cbiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzYXBfMS5hc2FwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5kZWxheVRpbWUgPSBkZWxheVRpbWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICBpZiAoIWlzTnVtZXJpY18xLmlzTnVtZXJpYyhkZWxheVRpbWUpIHx8IGRlbGF5VGltZSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXlUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNjaGVkdWxlciB8fCB0eXBlb2Ygc2NoZWR1bGVyLnNjaGVkdWxlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IGFzYXBfMS5hc2FwO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc291cmNlLCBkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGUoc291cmNlLCBkZWxheSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZy5zb3VyY2UsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgZGVsYXkgPSB0aGlzLmRlbGF5VGltZTtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU3Vic2NyaWJlT25PYnNlcnZhYmxlLmRpc3BhdGNoLCBkZWxheSwge1xuICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5TdWJzY3JpYmVPbk9ic2VydmFibGUgPSBTdWJzY3JpYmVPbk9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVPbk9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL1N1YnNjcmliZU9uT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXNhcFNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9Bc2FwU2NoZWR1bGVyJyk7XG5leHBvcnRzLmFzYXAgPSBuZXcgQXNhcFNjaGVkdWxlcl8xLkFzYXBTY2hlZHVsZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvYXNhcC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBBc2FwQWN0aW9uXzEgPSByZXF1aXJlKCcuL0FzYXBBY3Rpb24nKTtcbnZhciBRdWV1ZVNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9RdWV1ZVNjaGVkdWxlcicpO1xudmFyIEFzYXBTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc2FwU2NoZWR1bGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzYXBTY2hlZHVsZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBBc2FwU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFzYXBBY3Rpb25fMS5Bc2FwQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBBc2FwU2NoZWR1bGVyO1xufShRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKSk7XG5leHBvcnRzLkFzYXBTY2hlZHVsZXIgPSBBc2FwU2NoZWR1bGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcFNjaGVkdWxlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9Bc2FwU2NoZWR1bGVyLmpzXG4gKiogbW9kdWxlIGlkID0gNTM2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEltbWVkaWF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9JbW1lZGlhdGUnKTtcbnZhciBGdXR1cmVBY3Rpb25fMSA9IHJlcXVpcmUoJy4vRnV0dXJlQWN0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEFzYXBBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc2FwQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzYXBBY3Rpb24oKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2godGhpcyk7XG4gICAgICAgIGlmICghc2NoZWR1bGVyLnNjaGVkdWxlZElkKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBJbW1lZGlhdGVfMS5JbW1lZGlhdGUuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIHNjaGVkdWxlZElkID0gc2NoZWR1bGVyLnNjaGVkdWxlZElkLCBhY3Rpb25zID0gc2NoZWR1bGVyLmFjdGlvbnM7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgIGlmIChhY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2NoZWR1bGVyLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNjaGVkdWxlZElkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIEltbWVkaWF0ZV8xLkltbWVkaWF0ZS5jbGVhckltbWVkaWF0ZShzY2hlZHVsZWRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc2FwQWN0aW9uO1xufShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcbmV4cG9ydHMuQXNhcEFjdGlvbiA9IEFzYXBBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc2FwQWN0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL0FzYXBBY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA1MzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuU29tZSBjcmVkaXQgZm9yIHRoaXMgaGVscGVyIGdvZXMgdG8gaHR0cDovL2dpdGh1Yi5jb20vWXV6dUpTL3NldEltbWVkaWF0ZVxuKi9cblwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4vcm9vdCcpO1xudmFyIEltbWVkaWF0ZURlZmluaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEltbWVkaWF0ZURlZmluaXRpb24ocm9vdCkge1xuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xuICAgICAgICBpZiAocm9vdC5zZXRJbW1lZGlhdGUgJiYgdHlwZW9mIHJvb3Quc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHJvb3Quc2V0SW1tZWRpYXRlLmJpbmQocm9vdCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFySW1tZWRpYXRlID0gcm9vdC5jbGVhckltbWVkaWF0ZS5iaW5kKHJvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXh0SGFuZGxlID0gMTtcbiAgICAgICAgICAgIHRoaXMudGFza3NCeUhhbmRsZSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICAgICAgICAgIGlmICh0aGlzLmNhblVzZVByb2Nlc3NOZXh0VGljaygpKSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1tZWRpYXRlID0gdGhpcy5jcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHRoaXMuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlTWVzc2FnZUNoYW5uZWwoKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhblVzZVJlYWR5U3RhdGVDaGFuZ2UoKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1tZWRpYXRlID0gdGhpcy5jcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHRoaXMuY3JlYXRlU2V0VGltZW91dFNldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNpID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGNsZWFySW1tZWRpYXRlLmluc3RhbmNlLnRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjaS5pbnN0YW5jZSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNsZWFySW1tZWRpYXRlID0gY2k7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNhblVzZVByb2Nlc3NOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZnkodGhpcy5yb290LnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VNZXNzYWdlQ2hhbm5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKTtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNhblVzZVJlYWR5U3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMucm9vdC5kb2N1bWVudDtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oZG9jdW1lbnQgJiYgJ29ucmVhZHlzdGF0ZWNoYW5nZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGByb290LnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKHJvb3QucG9zdE1lc3NhZ2UgJiYgIXJvb3QuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXNfMSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gcm9vdC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICByb290Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzXzEgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByb290LnBvc3RNZXNzYWdlKCcnLCAnKicpO1xuICAgICAgICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyB0aGUgc2FtZSBhcmd1bWVudHMgYXMgc2V0SW1tZWRpYXRlLCBidXRcbiAgICAvLyByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXF1aXJlcyBubyBhcmd1bWVudHMuXG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucGFydGlhbGx5QXBwbGllZCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHJlc3VsdCgpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHJlc3VsdCwgaGFuZGxlciA9IF9hLmhhbmRsZXIsIGFyZ3MgPSBfYS5hcmdzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKG5ldyBGdW5jdGlvbignJyArIGhhbmRsZXIpKSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmbi5oYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgZm4uYXJncyA9IGFyZ3M7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICB0aGlzLnRhc2tzQnlIYW5kbGVbdGhpcy5uZXh0SGFuZGxlXSA9IHRoaXMucGFydGlhbGx5QXBwbGllZC5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0SGFuZGxlKys7XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpbnN0YW5jZS5yb290LnByb2Nlc3MubmV4dFRpY2soaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVQb3N0TWVzc2FnZVNldEltbWVkaWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG4gICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9ICdzZXRJbW1lZGlhdGUkJyArIHJvb3QuTWF0aC5yYW5kb20oKSArICckJztcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uIGdsb2JhbE1lc3NhZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBnbG9iYWxNZXNzYWdlSGFuZGxlci5pbnN0YW5jZTtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IHJvb3QgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgb25HbG9iYWxNZXNzYWdlLmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHNldEltbWVkaWF0ZSwgbWVzc2FnZVByZWZpeCA9IF9hLm1lc3NhZ2VQcmVmaXgsIGluc3RhbmNlID0gX2EuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCAnKicpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICBmbi5tZXNzYWdlUHJlZml4ID0gbWVzc2FnZVByZWZpeDtcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucnVuSWZQcmVzZW50ID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiAnV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuJ1xuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyAndG9vIG11Y2ggcmVjdXJzaW9uJyBlcnJvci5cbiAgICAgICAgICAgIHRoaXMucm9vdC5zZXRUaW1lb3V0KHRoaXMucGFydGlhbGx5QXBwbGllZCh0aGlzLnJ1bklmUHJlc2VudCwgaGFuZGxlKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMudGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGFzaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNoYW5uZWxTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IHRoaXMucm9vdC5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBfdGhpcy5ydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuICAgICAgICAgICAgdmFyIF9hID0gc2V0SW1tZWRpYXRlLCBjaGFubmVsID0gX2EuY2hhbm5lbCwgaW5zdGFuY2UgPSBfYS5pbnN0YW5jZTtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgICAgICB9O1xuICAgICAgICBmbi5jaGFubmVsID0gY2hhbm5lbDtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IGluc3RhbmNlLnJvb3Q7XG4gICAgICAgICAgICB2YXIgZG9jID0gcm9vdC5kb2N1bWVudDtcbiAgICAgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgICAgICB9O1xuICAgICAgICBmbi5pbnN0YW5jZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVNldFRpbWVvdXRTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpbnN0YW5jZS5yb290LnNldFRpbWVvdXQoaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSksIDApO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICByZXR1cm4gSW1tZWRpYXRlRGVmaW5pdGlvbjtcbn0oKSk7XG5leHBvcnRzLkltbWVkaWF0ZURlZmluaXRpb24gPSBJbW1lZGlhdGVEZWZpbml0aW9uO1xuZXhwb3J0cy5JbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlRGVmaW5pdGlvbihyb290XzEucm9vdCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbW1lZGlhdGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL0ltbWVkaWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy9icm93c2VyLmpzJykubmV4dFRpY2s7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG52YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgaW1tZWRpYXRlSWRzID0ge307XG52YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsgdGltZW91dC5jbG9zZSgpOyB9O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgPyBzZXRJbW1lZGlhdGUgOiBmdW5jdGlvbihmbikge1xuICB2YXIgaWQgPSBuZXh0SW1tZWRpYXRlSWQrKztcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gIGltbWVkaWF0ZUlkc1tpZF0gPSB0cnVlO1xuXG4gIG5leHRUaWNrKGZ1bmN0aW9uIG9uTmV4dFRpY2soKSB7XG4gICAgaWYgKGltbWVkaWF0ZUlkc1tpZF0pIHtcbiAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2VcbiAgICAgIC8vIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vY2FsbC1hcHBseS1zZWd1XG4gICAgICBpZiAoYXJncykge1xuICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCk7XG4gICAgICB9XG4gICAgICAvLyBQcmV2ZW50IGlkcyBmcm9tIGxlYWtpbmdcbiAgICAgIGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUoaWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGlkO1xufTtcblxuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xuICBkZWxldGUgaW1tZWRpYXRlSWRzW2lkXTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1MzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzd2l0Y2hfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3N3aXRjaCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN3aXRjaCA9IHN3aXRjaF8xLl9zd2l0Y2g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2guanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gNTQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieVxuICogc3Vic2NyaWJpbmcgdG8gb25seSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIG9mIHRob3NlIGlubmVyIE9ic2VydmFibGVzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBhbiBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzIGJ5IGRyb3BwaW5nIHRoZVxuICogcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZSBvbmNlIGEgbmV3IG9uZSBhcHBlYXJzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgc3dpdGNoYCBzdWJzY3JpYmVzIHRvIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBPYnNlcnZhYmxlcywgYWxzbyBrbm93biBhcyBhXG4gKiBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZS4gRWFjaCB0aW1lIGl0IG9ic2VydmVzIG9uZSBvZiB0aGVzZSBlbWl0dGVkIGlubmVyXG4gKiBPYnNlcnZhYmxlcywgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHN1YnNjcmliZXMgdG8gdGhlIGlubmVyIE9ic2VydmFibGUgYW5kXG4gKiBiZWdpbnMgZW1pdHRpbmcgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhhdC4gU28gZmFyLCBpdCBiZWhhdmVzXG4gKiBsaWtlIHtAbGluayBtZXJnZUFsbH0uIEhvd2V2ZXIsIHdoZW4gYSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpcyBlbWl0dGVkLFxuICogYHN3aXRjaGAgdW5zdWJzY3JpYmVzIGZyb20gdGhlIGVhcmxpZXItZW1pdHRlZCBpbm5lciBPYnNlcnZhYmxlIGFuZFxuICogc3Vic2NyaWJlcyB0byB0aGUgbmV3IGlubmVyIE9ic2VydmFibGUgYW5kIGJlZ2lucyBlbWl0dGluZyBpdGVtcyBmcm9tIGl0LiBJdFxuICogY29udGludWVzIHRvIGJlaGF2ZSBsaWtlIHRoaXMgZm9yIHN1YnNlcXVlbnQgaW5uZXIgT2JzZXJ2YWJsZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+UmVydW4gYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSBvbiBldmVyeSBjbGljayBldmVudDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiAvLyBFYWNoIGNsaWNrIGV2ZW50IGlzIG1hcHBlZCB0byBhbiBPYnNlcnZhYmxlIHRoYXQgdGlja3MgZXZlcnkgc2Vjb25kXG4gKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG4gKiB2YXIgc3dpdGNoZWQgPSBoaWdoZXJPcmRlci5zd2l0Y2goKTtcbiAqIC8vIFRoZSBvdXRjb21lIGlzIHRoYXQgYHN3aXRjaGVkYCBpcyBlc3NlbnRpYWxseSBhIHRpbWVyIHRoYXQgcmVzdGFydHNcbiAqIC8vIG9uIGV2ZXJ5IGNsaWNrLiBUaGUgaW50ZXJ2YWwgT2JzZXJ2YWJsZXMgZnJvbSBvbGRlciBjbGlja3MgZG8gbm90IG1lcmdlXG4gKiAvLyB3aXRoIHRoZSBjdXJyZW50IGludGVydmFsIE9ic2VydmFibGUuXG4gKiBzd2l0Y2hlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cbiAqIEBzZWUge0BsaW5rIGV4aGF1c3R9XG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuICogQHNlZSB7QGxpbmsgemlwQWxsfVxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgaXRlbXMgZW1pdHRlZCBieSB0aGVcbiAqIE9ic2VydmFibGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgc3dpdGNoXG4gKiBAbmFtZSBzd2l0Y2hcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIF9zd2l0Y2goKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoT3BlcmF0b3IoKSk7XG59XG5leHBvcnRzLl9zd2l0Y2ggPSBfc3dpdGNoO1xudmFyIFN3aXRjaE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTd2l0Y2hPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgU3dpdGNoT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3dpdGNoU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3dpdGNoT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTd2l0Y2hTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3dpdGNoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSW5uZXIoKTtcbiAgICAgICAgdGhpcy5hY3RpdmUrKztcbiAgICAgICAgdGhpcy5hZGQodGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgdmFsdWUpKTtcbiAgICB9O1xuICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmVJbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0aGlzLmFjdGl2ZSA+IDAgPyB0aGlzLmFjdGl2ZSAtIDEgOiAwO1xuICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSW5uZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcGxldGVkICYmIHRoaXMuYWN0aXZlID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDU0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN3aXRjaE1hcF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc3dpdGNoTWFwJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoTWFwID0gc3dpdGNoTWFwXzEuc3dpdGNoTWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDU0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUsIGVtaXR0aW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIHN3aXRjaH0uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3dpdGNoTWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3VcbiAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cbiAqIHJldHVybnMgYW4gKHNvLWNhbGxlZCBcImlubmVyXCIpIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2VcbiAqIGlubmVyIE9ic2VydmFibGVzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmVnaW5zIGVtaXR0aW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5XG4gKiB0aGF0IGlubmVyIE9ic2VydmFibGUuIFdoZW4gYSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpcyBlbWl0dGVkLCBgc3dpdGNoTWFwYFxuICogc3RvcHMgZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kIGJlZ2luc1xuICogZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgbmV3IG9uZS4gSXQgY29udGludWVzIHRvIGJlaGF2ZSBsaWtlIHRoaXMgZm9yXG4gKiBzdWJzZXF1ZW50IGlubmVyIE9ic2VydmFibGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zd2l0Y2hNYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cbiAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG4gKiBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCB0YWtpbmcgb25seSB0aGUgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50bHlcbiAqIHByb2plY3RlZCBpbm5lciBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBzd2l0Y2hNYXBcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHN3aXRjaE1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSk7XG59XG5leHBvcnRzLnN3aXRjaE1hcCA9IHN3aXRjaE1hcDtcbnZhciBTd2l0Y2hNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH1cbiAgICBTd2l0Y2hNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTd2l0Y2hNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy5yZXN1bHRTZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFN3aXRjaE1hcE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3dpdGNoTWFwU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN3aXRjaE1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3dpdGNoTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcbiAgICB9O1xuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGQodGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgcmVzdWx0LCB2YWx1ZSwgaW5kZXgpKTtcbiAgICB9O1xuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKCFpbm5lclN1YnNjcmlwdGlvbiB8fCBpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9O1xuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5Tm90aWZ5TmV4dChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3dpdGNoTWFwU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zd2l0Y2hNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1NDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzd2l0Y2hNYXBUb18xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc3dpdGNoTWFwVG8nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXBUbyA9IHN3aXRjaE1hcFRvXzEuc3dpdGNoTWFwVG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2hNYXBUby5qc1xuICoqIG1vZHVsZSBpZCA9IDU0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBzYW1lIE9ic2VydmFibGUgd2hpY2ggaXMgZmxhdHRlbmVkIG11bHRpcGxlXG4gKiB0aW1lcyB3aXRoIHtAbGluayBzd2l0Y2h9IGluIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBzd2l0Y2hNYXB9LCBidXQgbWFwcyBlYWNoIHZhbHVlXG4gKiBhbHdheXMgdG8gdGhlIHNhbWUgaW5uZXIgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zd2l0Y2hNYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3NcbiAqIG9mIHRoZSBzb3VyY2UgdmFsdWUsIGFuZCB0aGVuIGZsYXR0ZW5zIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBpbnRvIG9uZVxuICogc2luZ2xlIE9ic2VydmFibGUsIHdoaWNoIGlzIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlc1xuICogZW1pdHMgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIGluc3RhbmNlIG9mXG4gKiBgaW5uZXJPYnNlcnZhYmxlYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Muc3dpdGNoTWFwVG8oUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG4gKiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlIGdpdmVuXG4gKiBgaW5uZXJPYnNlcnZhYmxlYCBldmVyeSB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgZ2l2ZW5cbiAqIGBpbm5lck9ic2VydmFibGVgIChhbmQgb3B0aW9uYWxseSB0cmFuc2Zvcm1lZCB0aHJvdWdoIGByZXN1bHRTZWxlY3RvcmApIGV2ZXJ5XG4gKiB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCB0YWtpbmcgb25seSB0aGUgdmFsdWVzXG4gKiBmcm9tIHRoZSBtb3N0IHJlY2VudGx5IHByb2plY3RlZCBpbm5lciBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBzd2l0Y2hNYXBUb1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc3dpdGNoTWFwVG8oaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE1hcFRvT3BlcmF0b3IoaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvcikpO1xufVxuZXhwb3J0cy5zd2l0Y2hNYXBUbyA9IHN3aXRjaE1hcFRvO1xudmFyIFN3aXRjaE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN3aXRjaE1hcFRvT3BlcmF0b3Iob2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZTtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH1cbiAgICBTd2l0Y2hNYXBUb09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFRvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGUsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBUb09wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3dpdGNoTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3dpdGNoTWFwVG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaE1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgaW5uZXIsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZCh0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB0aGlzLmlubmVyLCB2YWx1ZSwgdGhpcy5pbmRleCsrKSk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKCFpbm5lclN1YnNjcmlwdGlvbiB8fCBpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH07XG4gICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG4gICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5UmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLnRyeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFN3aXRjaE1hcFRvU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaE1hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNTQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGFrZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGFrZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2UgPSB0YWtlXzEudGFrZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IHJlcXVpcmUoJy4uL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIEVtaXRzIG9ubHkgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UYWtlcyB0aGUgZmlyc3QgYGNvdW50YCB2YWx1ZXMgZnJvbSB0aGUgc291cmNlLCB0aGVuXG4gKiBjb21wbGV0ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvdGFrZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgdGFrZWAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgYGNvdW50YCB2YWx1ZXMgZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiB0aGUgc291cmNlIGVtaXRzIGZld2VyIHRoYW4gYGNvdW50YCB2YWx1ZXMgdGhlblxuICogYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIEFmdGVyIHRoYXQsIGl0IGNvbXBsZXRlcywgcmVnYXJkbGVzcyBpZiB0aGVcbiAqIHNvdXJjZSBjb21wbGV0ZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VGFrZSB0aGUgZmlyc3QgNSBzZWNvbmRzIG9mIGFuIGluZmluaXRlIDEtc2Vjb25kIGludGVydmFsIE9ic2VydmFibGU8L2NhcHRpb24+XG4gKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGZpdmUgPSBpbnRlcnZhbC50YWtlKDUpO1xuICogZml2ZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgdGFrZUxhc3R9XG4gKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG4gKiBAc2VlIHtAbGluayB0YWtlV2hpbGV9XG4gKiBAc2VlIHtAbGluayBza2lwfVxuICpcbiAqIEB0aHJvd3Mge0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfSBXaGVuIHVzaW5nIGB0YWtlKGkpYCwgaXQgZGVsaXZlcnMgYW5cbiAqIEFyZ3VtZW50T3V0T3JSYW5nZUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmAgY2FsbGJhY2sgaWYgYGkgPCAwYC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGBuZXh0YCB2YWx1ZXMgdG8gZW1pdC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBmaXJzdCBgY291bnRgXG4gKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIG9yIGFsbCBvZiB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuICogaWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGAgdmFsdWVzLlxuICogQG1ldGhvZCB0YWtlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlKGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlT3BlcmF0b3IoY291bnQpKTtcbiAgICB9XG59XG5leHBvcnRzLnRha2UgPSB0YWtlO1xudmFyIFRha2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGFrZU9wZXJhdG9yKHRvdGFsKSB7XG4gICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcbiAgICAgICAgaWYgKHRoaXMudG90YWwgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBUYWtlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRha2VPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRha2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGFrZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgVGFrZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG4gICAgICAgIGlmICgrK3RoaXMuY291bnQgPD0gdG90YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gdG90YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdGFrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gYW4gZWxlbWVudCB3YXMgcXVlcmllZCBhdCBhIGNlcnRhaW4gaW5kZXggb2YgYW5cbiAqIE9ic2VydmFibGUsIGJ1dCBubyBzdWNoIGluZGV4IG9yIHBvc2l0aW9uIGV4aXN0cyBpbiB0aGF0IHNlcXVlbmNlLlxuICpcbiAqIEBzZWUge0BsaW5rIGVsZW1lbnRBdH1cbiAqIEBzZWUge0BsaW5rIHRha2V9XG4gKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cbiAqXG4gKiBAY2xhc3MgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcbiAqL1xudmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsICdhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcbiAgICB9XG4gICAgcmV0dXJuIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJndW1lbnRPdXRPZlJhbmdlRXJyb3IuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzXG4gKiogbW9kdWxlIGlkID0gNTQ5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGFrZUxhc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3Rha2VMYXN0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZUxhc3QgPSB0YWtlTGFzdF8xLnRha2VMYXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZUxhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZUxhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEgPSByZXF1aXJlKCcuLi91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJyk7XG52YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBFbWl0cyBvbmx5IHRoZSBsYXN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5SZW1lbWJlcnMgdGhlIGxhdGVzdCBgY291bnRgIHZhbHVlcywgdGhlbiBlbWl0cyB0aG9zZVxuICogb25seSB3aGVuIHRoZSBzb3VyY2UgY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2VMYXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGB0YWtlTGFzdGAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYXQgbW9zdCB0aGUgbGFzdCBgY291bnRgIHZhbHVlc1xuICogZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIHRoZSBzb3VyY2UgZW1pdHMgZmV3ZXIgdGhhbiBgY291bnRgXG4gKiB2YWx1ZXMgdGhlbiBhbGwgb2YgaXRzIHZhbHVlcyBhcmUgZW1pdHRlZC4gVGhpcyBvcGVyYXRvciBtdXN0IHdhaXQgdW50aWwgdGhlXG4gKiBgY29tcGxldGVgIG5vdGlmaWNhdGlvbiBlbWlzc2lvbiBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gZW1pdCB0aGUgYG5leHRgXG4gKiB2YWx1ZXMgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLCBiZWNhdXNlIG90aGVyd2lzZSBpdCBpcyBpbXBvc3NpYmxlIHRvIGtub3dcbiAqIHdoZXRoZXIgb3Igbm90IG1vcmUgdmFsdWVzIHdpbGwgYmUgZW1pdHRlZCBvbiB0aGUgc291cmNlLiBGb3IgdGhpcyByZWFzb24sXG4gKiBhbGwgdmFsdWVzIGFyZSBlbWl0dGVkIHN5bmNocm9ub3VzbHksIGZvbGxvd2VkIGJ5IHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VGFrZSB0aGUgbGFzdCAzIHZhbHVlcyBvZiBhbiBPYnNlcnZhYmxlIHdpdGggbWFueSB2YWx1ZXM8L2NhcHRpb24+XG4gKiB2YXIgbWFueSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTAwKTtcbiAqIHZhciBsYXN0VGhyZWUgPSBtYW55LnRha2VMYXN0KDMpO1xuICogbGFzdFRocmVlLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB0YWtlfVxuICogQHNlZSB7QGxpbmsgdGFrZVVudGlsfVxuICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuICogQHNlZSB7QGxpbmsgc2tpcH1cbiAqXG4gKiBAdGhyb3dzIHtBcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0gV2hlbiB1c2luZyBgdGFrZUxhc3QoaSlgLCBpdCBkZWxpdmVycyBhblxuICogQXJndW1lbnRPdXRPclJhbmdlRXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYCBjYWxsYmFjayBpZiBgaSA8IDBgLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgdmFsdWVzIHRvIGVtaXQgZnJvbSB0aGUgZW5kIG9mXG4gKiB0aGUgc2VxdWVuY2Ugb2YgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGF0IG1vc3QgdGhlIGxhc3QgY291bnRcbiAqIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgdGFrZUxhc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRha2VMYXN0KGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlTGFzdE9wZXJhdG9yKGNvdW50KSk7XG4gICAgfVxufVxuZXhwb3J0cy50YWtlTGFzdCA9IHRha2VMYXN0O1xudmFyIFRha2VMYXN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0T3BlcmF0b3IodG90YWwpIHtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICBpZiAodGhpcy50b3RhbCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIFRha2VMYXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZUxhc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcbiAgICB9O1xuICAgIHJldHVybiBUYWtlTGFzdE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGFrZUxhc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZUxhc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMucmluZyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgVGFrZUxhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZztcbiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy50b3RhbDtcbiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5jb3VudCsrO1xuICAgICAgICBpZiAocmluZy5sZW5ndGggPCB0b3RhbCkge1xuICAgICAgICAgICAgcmluZy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGNvdW50ICUgdG90YWw7XG4gICAgICAgICAgICByaW5nW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUYWtlTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5jb3VudDtcbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5jb3VudCA+PSB0aGlzLnRvdGFsID8gdGhpcy50b3RhbCA6IHRoaXMuY291bnQ7XG4gICAgICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpZHggPSAoY291bnQrKykgJSB0b3RhbDtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJpbmdbaWR4XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBUYWtlTGFzdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlTGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3Rha2VMYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGFrZVVudGlsXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90YWtlVW50aWwnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlVW50aWwgPSB0YWtlVW50aWxfMS50YWtlVW50aWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlVW50aWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZVVudGlsLmpzXG4gKiogbW9kdWxlIGlkID0gNTUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogRW1pdHMgdGhlIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB1bnRpbCBhIGBub3RpZmllcmBcbiAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGV0cyB2YWx1ZXMgcGFzcyB1bnRpbCBhIHNlY29uZCBPYnNlcnZhYmxlLFxuICogYG5vdGlmaWVyYCwgZW1pdHMgc29tZXRoaW5nLiBUaGVuLCBpdCBjb21wbGV0ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvdGFrZVVudGlsLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGB0YWtlVW50aWxgIHN1YnNjcmliZXMgYW5kIGJlZ2lucyBtaXJyb3JpbmcgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJdCBhbHNvXG4gKiBtb25pdG9ycyBhIHNlY29uZCBPYnNlcnZhYmxlLCBgbm90aWZpZXJgIHRoYXQgeW91IHByb3ZpZGUuIElmIHRoZSBgbm90aWZpZXJgXG4gKiBlbWl0cyBhIHZhbHVlIG9yIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgc3RvcHNcbiAqIG1pcnJvcmluZyB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIGNvbXBsZXRlcy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5UaWNrIGV2ZXJ5IHNlY29uZCB1bnRpbCB0aGUgZmlyc3QgY2xpY2sgaGFwcGVuczwvY2FwdGlvbj5cbiAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGludGVydmFsLnRha2VVbnRpbChjbGlja3MpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB0YWtlfVxuICogQHNlZSB7QGxpbmsgdGFrZUxhc3R9XG4gKiBAc2VlIHtAbGluayB0YWtlV2hpbGV9XG4gKiBAc2VlIHtAbGluayBza2lwfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gbm90aWZpZXIgVGhlIE9ic2VydmFibGUgd2hvc2UgZmlyc3QgZW1pdHRlZCB2YWx1ZSB3aWxsXG4gKiBjYXVzZSB0aGUgb3V0cHV0IE9ic2VydmFibGUgb2YgYHRha2VVbnRpbGAgdG8gc3RvcCBlbWl0dGluZyB2YWx1ZXMgZnJvbSB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIHVudGlsIHN1Y2ggdGltZSBhcyBgbm90aWZpZXJgIGVtaXRzIGl0cyBmaXJzdCB2YWx1ZS5cbiAqIEBtZXRob2QgdGFrZVVudGlsXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlVW50aWwobm90aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlVW50aWxPcGVyYXRvcihub3RpZmllcikpO1xufVxuZXhwb3J0cy50YWtlVW50aWwgPSB0YWtlVW50aWw7XG52YXIgVGFrZVVudGlsT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICB9XG4gICAgVGFrZVVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZVVudGlsU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVVudGlsT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUYWtlVW50aWxTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZVVudGlsU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuICAgIH1cbiAgICBUYWtlVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIFRha2VVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBub29wXG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVVudGlsU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlVW50aWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90YWtlVW50aWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0YWtlV2hpbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3Rha2VXaGlsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2VXaGlsZSA9IHRha2VXaGlsZV8xLnRha2VXaGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90YWtlV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBFbWl0cyB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgc28gbG9uZyBhcyBlYWNoIHZhbHVlIHNhdGlzZmllc1xuICogdGhlIGdpdmVuIGBwcmVkaWNhdGVgLCBhbmQgdGhlbiBjb21wbGV0ZXMgYXMgc29vbiBhcyB0aGlzIGBwcmVkaWNhdGVgIGlzIG5vdFxuICogc2F0aXNmaWVkLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UYWtlcyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIG9ubHkgd2hpbGUgdGhleSBwYXNzIHRoZVxuICogY29uZGl0aW9uIGdpdmVuLiBXaGVuIHRoZSBmaXJzdCB2YWx1ZSBkb2VzIG5vdCBzYXRpc2Z5LCBpdCBjb21wbGV0ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvdGFrZVdoaWxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGB0YWtlV2hpbGVgIHN1YnNjcmliZXMgYW5kIGJlZ2lucyBtaXJyb3JpbmcgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBFYWNoIHZhbHVlXG4gKiBlbWl0dGVkIG9uIHRoZSBzb3VyY2UgaXMgZ2l2ZW4gdG8gdGhlIGBwcmVkaWNhdGVgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYVxuICogYm9vbGVhbiwgcmVwcmVzZW50aW5nIGEgY29uZGl0aW9uIHRvIGJlIHNhdGlzZmllZCBieSB0aGUgc291cmNlIHZhbHVlcy4gVGhlXG4gKiBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyB0aGUgc291cmNlIHZhbHVlcyB1bnRpbCBzdWNoIHRpbWUgYXMgdGhlIGBwcmVkaWNhdGVgXG4gKiByZXR1cm5zIGZhbHNlLCBhdCB3aGljaCBwb2ludCBgdGFrZVdoaWxlYCBzdG9wcyBtaXJyb3JpbmcgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBhbmQgY29tcGxldGVzIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrIGV2ZW50cyBvbmx5IHdoaWxlIHRoZSBjbGllbnRYIHByb3BlcnR5IGlzIGdyZWF0ZXIgdGhhbiAyMDA8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy50YWtlV2hpbGUoZXYgPT4gZXYuY2xpZW50WCA+IDIwMCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIHRha2V9XG4gKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cbiAqIEBzZWUge0BsaW5rIHRha2VVbnRpbH1cbiAqIEBzZWUge0BsaW5rIHNraXB9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW59IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRoYXRcbiAqIGV2YWx1YXRlcyBhIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCByZXR1cm5zIGEgYm9vbGVhbi5cbiAqIEFsc28gdGFrZXMgdGhlICh6ZXJvLWJhc2VkKSBpbmRleCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIHNvIGxvbmcgYXMgZWFjaCB2YWx1ZSBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBkZWZpbmVkIGJ5IHRoZVxuICogYHByZWRpY2F0ZWAsIHRoZW4gY29tcGxldGVzLlxuICogQG1ldGhvZCB0YWtlV2hpbGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRha2VXaGlsZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcbn1cbmV4cG9ydHMudGFrZVdoaWxlID0gdGFrZVdoaWxlO1xudmFyIFRha2VXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgfVxuICAgIFRha2VXaGlsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRha2VXaGlsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBUYWtlV2hpbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRha2VXaGlsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUYWtlV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRha2VXaGlsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgVGFrZVdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4KyspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXh0T3JDb21wbGV0ZSh2YWx1ZSwgcmVzdWx0KTtcbiAgICB9O1xuICAgIFRha2VXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHRPckNvbXBsZXRlID0gZnVuY3Rpb24gKHZhbHVlLCBwcmVkaWNhdGVSZXN1bHQpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKEJvb2xlYW4ocHJlZGljYXRlUmVzdWx0KSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVdoaWxlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3Rha2VXaGlsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRocm90dGxlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90aHJvdHRsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRocm90dGxlID0gdGhyb3R0bGVfMS50aHJvdHRsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm90dGxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rocm90dGxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogRW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlbiBpZ25vcmVzIHN1YnNlcXVlbnQgc291cmNlXG4gKiB2YWx1ZXMgZm9yIGEgZHVyYXRpb24gZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUsIHRoZW4gcmVwZWF0cyB0aGlzXG4gKiBwcm9jZXNzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHRocm90dGxlVGltZX0sIGJ1dCB0aGUgc2lsZW5jaW5nXG4gKiBkdXJhdGlvbiBpcyBkZXRlcm1pbmVkIGJ5IGEgc2Vjb25kIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvdGhyb3R0bGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHRocm90dGxlYCBlbWl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuICogd2hlbiBpdHMgaW50ZXJuYWwgdGltZXIgaXMgZGlzYWJsZWQsIGFuZCBpZ25vcmVzIHNvdXJjZSB2YWx1ZXMgd2hlbiB0aGUgdGltZXJcbiAqIGlzIGVuYWJsZWQuIEluaXRpYWxseSwgdGhlIHRpbWVyIGlzIGRpc2FibGVkLiBBcyBzb29uIGFzIHRoZSBmaXJzdCBzb3VyY2VcbiAqIHZhbHVlIGFycml2ZXMsIGl0IGlzIGZvcndhcmRlZCB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGVuIHRoZSB0aW1lclxuICogaXMgZW5hYmxlZCBieSBjYWxsaW5nIHRoZSBgZHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24gd2l0aCB0aGUgc291cmNlIHZhbHVlLFxuICogd2hpY2ggcmV0dXJucyB0aGUgXCJkdXJhdGlvblwiIE9ic2VydmFibGUuIFdoZW4gdGhlIGR1cmF0aW9uIE9ic2VydmFibGUgZW1pdHMgYVxuICogdmFsdWUgb3IgY29tcGxldGVzLCB0aGUgdGltZXIgaXMgZGlzYWJsZWQsIGFuZCB0aGlzIHByb2Nlc3MgcmVwZWF0cyBmb3IgdGhlXG4gKiBuZXh0IHNvdXJjZSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnRocm90dGxlKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBhdWRpdH1cbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlfVxuICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuICogQHNlZSB7QGxpbmsgc2FtcGxlfVxuICogQHNlZSB7QGxpbmsgdGhyb3R0bGVUaW1lfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBPYnNlcnZhYmxlfFByb21pc2V9IGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvblxuICogdGhhdCByZWNlaXZlcyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBmb3IgY29tcHV0aW5nIHRoZSBzaWxlbmNpbmdcbiAqIGR1cmF0aW9uIGZvciBlYWNoIHNvdXJjZSB2YWx1ZSwgcmV0dXJuZWQgYXMgYW4gT2JzZXJ2YWJsZSBvciBhIFByb21pc2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbiB0b1xuICogbGltaXQgdGhlIHJhdGUgb2YgZW1pc3Npb25zIGZyb20gdGhlIHNvdXJjZS5cbiAqIEBtZXRob2QgdGhyb3R0bGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlKGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMudGhyb3R0bGUgPSB0aHJvdHRsZTtcbnZhciBUaHJvdHRsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICB9XG4gICAgVGhyb3R0bGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUaHJvdHRsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGhyb3R0bGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRocm90dGxlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRocm90dGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaHJvdHRsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhpcy50cnlEdXJhdGlvblNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEdXJhdGlvblNlbGVjdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdEFuZFRocm90dGxlKHZhbHVlLCBkdXJhdGlvbik7XG4gICAgfTtcbiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLmVtaXRBbmRUaHJvdHRsZSA9IGZ1bmN0aW9uICh2YWx1ZSwgZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKSk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRocm90dGxlZCA9IHRoaXMudGhyb3R0bGVkO1xuICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLl91bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBUaHJvdHRsZVN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90aHJvdHRsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRocm90dGxlVGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGhyb3R0bGVUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGhyb3R0bGVUaW1lID0gdGhyb3R0bGVUaW1lXzEudGhyb3R0bGVUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rocm90dGxlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIGlnbm9yZXMgc3Vic2VxdWVudCBzb3VyY2VcbiAqIHZhbHVlcyBmb3IgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMsIHRoZW4gcmVwZWF0cyB0aGlzIHByb2Nlc3MuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxldHMgYSB2YWx1ZSBwYXNzLCB0aGVuIGlnbm9yZXMgc291cmNlIHZhbHVlcyBmb3IgdGhlXG4gKiBuZXh0IGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm90dGxlVGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgdGhyb3R0bGVUaW1lYCBlbWl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuICogd2hlbiBpdHMgaW50ZXJuYWwgdGltZXIgaXMgZGlzYWJsZWQsIGFuZCBpZ25vcmVzIHNvdXJjZSB2YWx1ZXMgd2hlbiB0aGUgdGltZXJcbiAqIGlzIGVuYWJsZWQuIEluaXRpYWxseSwgdGhlIHRpbWVyIGlzIGRpc2FibGVkLiBBcyBzb29uIGFzIHRoZSBmaXJzdCBzb3VyY2VcbiAqIHZhbHVlIGFycml2ZXMsIGl0IGlzIGZvcndhcmRlZCB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGVuIHRoZSB0aW1lclxuICogaXMgZW5hYmxlZC4gQWZ0ZXIgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMgKG9yIHRoZSB0aW1lIHVuaXQgZGV0ZXJtaW5lZFxuICogaW50ZXJuYWxseSBieSB0aGUgb3B0aW9uYWwgYHNjaGVkdWxlcmApIGhhcyBwYXNzZWQsIHRoZSB0aW1lciBpcyBkaXNhYmxlZCxcbiAqIGFuZCB0aGlzIHByb2Nlc3MgcmVwZWF0cyBmb3IgdGhlIG5leHQgc291cmNlIHZhbHVlLiBPcHRpb25hbGx5IHRha2VzIGFcbiAqIHtAbGluayBTY2hlZHVsZXJ9IGZvciBtYW5hZ2luZyB0aW1lcnMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGlja3MgYXQgYSByYXRlIG9mIGF0IG1vc3Qgb25lIGNsaWNrIHBlciBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy50aHJvdHRsZVRpbWUoMTAwMCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGF1ZGl0VGltZX1cbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5fVxuICogQHNlZSB7QGxpbmsgc2FtcGxlVGltZX1cbiAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaW1lIHRvIHdhaXQgYmVmb3JlIGVtaXR0aW5nIGFub3RoZXIgdmFsdWUgYWZ0ZXJcbiAqIGVtaXR0aW5nIHRoZSBsYXN0IHZhbHVlLCBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkXG4gKiBpbnRlcm5hbGx5IGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgc2FtcGxpbmcuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbiB0b1xuICogbGltaXQgdGhlIHJhdGUgb2YgZW1pc3Npb25zIGZyb20gdGhlIHNvdXJjZS5cbiAqIEBtZXRob2QgdGhyb3R0bGVUaW1lXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0aHJvdHRsZVRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGhyb3R0bGVUaW1lT3BlcmF0b3IoZHVyYXRpb24sIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy50aHJvdHRsZVRpbWUgPSB0aHJvdHRsZVRpbWU7XG52YXIgVGhyb3R0bGVUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgVGhyb3R0bGVUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGhyb3R0bGVUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmR1cmF0aW9uLCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFRocm90dGxlVGltZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGhyb3R0bGVUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRocm90dGxlVGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGhyb3R0bGVUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFRocm90dGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy50aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1cmF0aW9uLCB7IHN1YnNjcmliZXI6IHRoaXMgfSkpO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGhyb3R0bGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRocm90dGxlZCA9IHRoaXMudGhyb3R0bGVkO1xuICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRocm90dGxlZCk7XG4gICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG4gICAgc3Vic2NyaWJlci5jbGVhclRocm90dGxlKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZVRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90aHJvdHRsZVRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aW1lb3V0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90aW1lb3V0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZW91dCA9IHRpbWVvdXRfMS50aW1lb3V0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0LmpzXG4gKiogbW9kdWxlIGlkID0gNTYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbnZhciBpc0RhdGVfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNEYXRlJyk7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBAcGFyYW0gZHVlXG4gKiBAcGFyYW0gZXJyb3JUb1NlbmRcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCB0aW1lb3V0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0aW1lb3V0KGR1ZSwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuICAgIGlmIChlcnJvclRvU2VuZCA9PT0gdm9pZCAwKSB7IGVycm9yVG9TZW5kID0gbnVsbDsgfVxuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuICAgIHZhciB3YWl0Rm9yID0gYWJzb2x1dGVUaW1lb3V0ID8gKCtkdWUgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZHVlKTtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaW1lb3V0T3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLnRpbWVvdXQgPSB0aW1lb3V0O1xudmFyIFRpbWVvdXRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yO1xuICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcbiAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgVGltZW91dE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRpbWVvdXRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWJzb2x1dGVUaW1lb3V0LCB0aGlzLndhaXRGb3IsIHRoaXMuZXJyb3JUb1NlbmQsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGltZW91dE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGltZW91dFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaW1lb3V0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaW1lb3V0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWJzb2x1dGVUaW1lb3V0LCB3YWl0Rm9yLCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG4gICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG4gICAgICAgIHRoaXMuZXJyb3JUb1NlbmQgPSBlcnJvclRvU2VuZDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0luZGV4ID0gMDtcbiAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUsIFwicHJldmlvdXNJbmRleFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzSW5kZXg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faGFzQ29tcGxldGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBUaW1lb3V0U3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleDtcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzQ29tcGxldGVkICYmIHNvdXJjZS5wcmV2aW91c0luZGV4ID09PSBjdXJyZW50SW5kZXgpIHtcbiAgICAgICAgICAgIHNvdXJjZS5ub3RpZnlUaW1lb3V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZVRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShUaW1lb3V0U3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQsIHRoaXMud2FpdEZvciwgeyBzdWJzY3JpYmVyOiB0aGlzLCBpbmRleDogY3VycmVudEluZGV4IH0pO1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXg7XG4gICAgfTtcbiAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLmFic29sdXRlVGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeVRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZXJyb3IodGhpcy5lcnJvclRvU2VuZCB8fCBuZXcgRXJyb3IoJ3RpbWVvdXQnKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGltZW91dFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdGltZW91dC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRpbWVvdXRXaXRoXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90aW1lb3V0V2l0aCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXRXaXRoID0gdGltZW91dFdpdGhfMS50aW1lb3V0V2l0aDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXRXaXRoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3RpbWVvdXRXaXRoLmpzXG4gKiogbW9kdWxlIGlkID0gNTYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbnZhciBpc0RhdGVfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNEYXRlJyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBAcGFyYW0gZHVlXG4gKiBAcGFyYW0gd2l0aE9ic2VydmFibGVcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCB0aW1lb3V0V2l0aFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdGltZW91dFdpdGgoZHVlLCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICB2YXIgYWJzb2x1dGVUaW1lb3V0ID0gaXNEYXRlXzEuaXNEYXRlKGR1ZSk7XG4gICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRpbWVvdXRXaXRoT3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLnRpbWVvdXRXaXRoID0gdGltZW91dFdpdGg7XG52YXIgVGltZW91dFdpdGhPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGltZW91dFdpdGhPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcbiAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG4gICAgICAgIHRoaXMud2l0aE9ic2VydmFibGUgPSB3aXRoT2JzZXJ2YWJsZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFRpbWVvdXRXaXRoT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFdpdGhTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWJzb2x1dGVUaW1lb3V0LCB0aGlzLndhaXRGb3IsIHRoaXMud2l0aE9ic2VydmFibGUsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGltZW91dFdpdGhPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRpbWVvdXRXaXRoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbWVvdXRXaXRoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaW1lb3V0V2l0aFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGFic29sdXRlVGltZW91dCwgd2FpdEZvciwgd2l0aE9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcbiAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcbiAgICAgICAgdGhpcy53aXRoT2JzZXJ2YWJsZSA9IHdpdGhPYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy50aW1lb3V0U3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQodGhpcyk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLCBcInByZXZpb3VzSW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0luZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJoYXNDb21wbGV0ZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYXNDb21wbGV0ZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleDtcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzQ29tcGxldGVkICYmIHNvdXJjZS5wcmV2aW91c0luZGV4ID09PSBjdXJyZW50SW5kZXgpIHtcbiAgICAgICAgICAgIHNvdXJjZS5oYW5kbGVUaW1lb3V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgdmFyIHRpbWVvdXRTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgaW5kZXg6IGN1cnJlbnRJbmRleCB9O1xuICAgICAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShUaW1lb3V0V2l0aFN1YnNjcmliZXIuZGlzcGF0Y2hUaW1lb3V0LCB0aGlzLndhaXRGb3IsIHRpbWVvdXRTdGF0ZSk7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IGN1cnJlbnRJbmRleDtcbiAgICB9O1xuICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLmFic29sdXRlVGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLmhhbmRsZVRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdmFyIHdpdGhPYnNlcnZhYmxlID0gdGhpcy53aXRoT2JzZXJ2YWJsZTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uYWRkKHRoaXMudGltZW91dFN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgd2l0aE9ic2VydmFibGUpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbWVvdXRXaXRoU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0V2l0aC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3RpbWVvdXRXaXRoLmpzXG4gKiogbW9kdWxlIGlkID0gNTYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdG9BcnJheV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdG9BcnJheScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRvQXJyYXkgPSB0b0FycmF5XzEudG9BcnJheTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvQXJyYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdG9BcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDU2NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEByZXR1cm4ge09ic2VydmFibGU8YW55W10+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgdG9BcnJheVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdG9BcnJheSgpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUb0FycmF5T3BlcmF0b3IoKSk7XG59XG5leHBvcnRzLnRvQXJyYXkgPSB0b0FycmF5O1xudmFyIFRvQXJyYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVG9BcnJheU9wZXJhdG9yKCkge1xuICAgIH1cbiAgICBUb0FycmF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVG9BcnJheVN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFRvQXJyYXlPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRvQXJyYXlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVG9BcnJheVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVG9BcnJheVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFycmF5ID0gW107XG4gICAgfVxuICAgIFRvQXJyYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHRoaXMuYXJyYXkucHVzaCh4KTtcbiAgICB9O1xuICAgIFRvQXJyYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFRvQXJyYXlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9BcnJheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3RvQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0b1Byb21pc2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3RvUHJvbWlzZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IHRvUHJvbWlzZV8xLnRvUHJvbWlzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvUHJvbWlzZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90b1Byb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB3aW5kb3dfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3dpbmRvdycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpbmRvdyA9IHdpbmRvd18xLndpbmRvdztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvdy5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3cuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2hlbmV2ZXJcbiAqIGB3aW5kb3dCb3VuZGFyaWVzYCBlbWl0cy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJ9LCBidXQgZW1pdHMgYSBuZXN0ZWQgT2JzZXJ2YWJsZVxuICogaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3cucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyBjb25uZWN0ZWQsIG5vbi1vdmVybGFwcGluZ1xuICogd2luZG93cy4gSXQgZW1pdHMgdGhlIGN1cnJlbnQgd2luZG93IGFuZCBvcGVucyBhIG5ldyBvbmUgd2hlbmV2ZXIgdGhlXG4gKiBPYnNlcnZhYmxlIGB3aW5kb3dCb3VuZGFyaWVzYCBlbWl0cyBhbiBpdGVtLiBCZWNhdXNlIGVhY2ggd2luZG93IGlzIGFuXG4gKiBPYnNlcnZhYmxlLCB0aGUgb3V0cHV0IGlzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+SW4gZXZlcnkgd2luZG93IG9mIDEgc2Vjb25kIGVhY2gsIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3coaW50ZXJ2YWwpXG4gKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSB3aW5kb3dCb3VuZGFyaWVzIEFuIE9ic2VydmFibGUgdGhhdCBjb21wbGV0ZXMgdGhlXG4gKiBwcmV2aW91cyB3aW5kb3cgYW5kIHN0YXJ0cyBhIG5ldyB3aW5kb3cuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBPYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGFyZVxuICogT2JzZXJ2YWJsZXMgZW1pdHRpbmcgdmFsdWVzIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgd2luZG93XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB3aW5kb3cod2luZG93Qm91bmRhcmllcykge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd09wZXJhdG9yKHdpbmRvd0JvdW5kYXJpZXMpKTtcbn1cbmV4cG9ydHMud2luZG93ID0gd2luZG93O1xudmFyIFdpbmRvd09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSB7XG4gICAgICAgIHRoaXMud2luZG93Qm91bmRhcmllcyA9IHdpbmRvd0JvdW5kYXJpZXM7XG4gICAgfVxuICAgIFdpbmRvd09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFdpbmRvd1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dCb3VuZGFyaWVzKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBXaW5kb3dTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2luZG93U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB3aW5kb3dCb3VuZGFyaWVzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzO1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHdpbmRvd0JvdW5kYXJpZXMpKTtcbiAgICAgICAgdGhpcy5vcGVuV2luZG93KCk7XG4gICAgfVxuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5vcGVuV2luZG93KCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMud2luZG93Lm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLndpbmRvdy5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMud2luZG93LmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcmV2V2luZG93ID0gdGhpcy53aW5kb3c7XG4gICAgICAgIGlmIChwcmV2V2luZG93KSB7XG4gICAgICAgICAgICBwcmV2V2luZG93LmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIG5ld1dpbmRvdyA9IHRoaXMud2luZG93ID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmFkZChuZXdXaW5kb3cpO1xuICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KG5ld1dpbmRvdyk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93U3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3cuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci93aW5kb3cuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB3aW5kb3dDb3VudF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivd2luZG93Q291bnQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dDb3VudCA9IHdpbmRvd0NvdW50XzEud2luZG93Q291bnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xuLyoqXG4gKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSB3aXRoIGVhY2hcbiAqIG5lc3RlZCBPYnNlcnZhYmxlIGVtaXR0aW5nIGF0IG1vc3QgYHdpbmRvd1NpemVgIHZhbHVlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJDb3VudH0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd0NvdW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgd2luZG93cyBldmVyeSBgc3RhcnRXaW5kb3dFdmVyeWBcbiAqIGl0ZW1zLCBlYWNoIGNvbnRhaW5pbmcgbm8gbW9yZSB0aGFuIGB3aW5kb3dTaXplYCBpdGVtcy4gV2hlbiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGNvbXBsZXRlcyBvciBlbmNvdW50ZXJzIGFuIGVycm9yLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHNcbiAqIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgcHJvcGFnYXRlcyB0aGUgbm90aWZpY2F0aW9uIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gSWYgYHN0YXJ0V2luZG93RXZlcnlgIGlzIG5vdCBwcm92aWRlZCwgdGhlbiBuZXcgd2luZG93cyBhcmVcbiAqIHN0YXJ0ZWQgaW1tZWRpYXRlbHkgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2UgYW5kIHdoZW4gZWFjaCB3aW5kb3cgY29tcGxldGVzXG4gKiB3aXRoIHNpemUgYHdpbmRvd1NpemVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPklnbm9yZSBldmVyeSAzcmQgY2xpY2sgZXZlbnQsIHN0YXJ0aW5nIGZyb20gdGhlIGZpcnN0IG9uZTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd0NvdW50KDMpXG4gKiAgIC5tYXAod2luID0+IHdpbi5za2lwKDEpKSAvLyBza2lwIGZpcnN0IG9mIGV2ZXJ5IDMgY2xpY2tzXG4gKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPklnbm9yZSBldmVyeSAzcmQgY2xpY2sgZXZlbnQsIHN0YXJ0aW5nIGZyb20gdGhlIHRoaXJkIG9uZTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd0NvdW50KDIsIDMpXG4gKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIHdpbmRvd31cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHdpbmRvd1NpemUgVGhlIG1heGltdW0gbnVtYmVyIG9mIHZhbHVlcyBlbWl0dGVkIGJ5IGVhY2hcbiAqIHdpbmRvdy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnRXaW5kb3dFdmVyeV0gSW50ZXJ2YWwgYXQgd2hpY2ggdG8gc3RhcnQgYSBuZXcgd2luZG93LlxuICogRm9yIGV4YW1wbGUgaWYgYHN0YXJ0V2luZG93RXZlcnlgIGlzIGAyYCwgdGhlbiBhIG5ldyB3aW5kb3cgd2lsbCBiZSBzdGFydGVkXG4gKiBvbiBldmVyeSBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIGF0IHRoZVxuICogYmVnaW5uaW5nIG9mIHRoZSBzb3VyY2UgYnkgZGVmYXVsdC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIE9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuICogYXJlIE9ic2VydmFibGUgb2YgdmFsdWVzLlxuICogQG1ldGhvZCB3aW5kb3dDb3VudFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gd2luZG93Q291bnQod2luZG93U2l6ZSwgc3RhcnRXaW5kb3dFdmVyeSkge1xuICAgIGlmIChzdGFydFdpbmRvd0V2ZXJ5ID09PSB2b2lkIDApIHsgc3RhcnRXaW5kb3dFdmVyeSA9IDA7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dDb3VudE9wZXJhdG9yKHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpKTtcbn1cbmV4cG9ydHMud2luZG93Q291bnQgPSB3aW5kb3dDb3VudDtcbnZhciBXaW5kb3dDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXaW5kb3dDb3VudE9wZXJhdG9yKHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcbiAgICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZTtcbiAgICAgICAgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID0gc3RhcnRXaW5kb3dFdmVyeTtcbiAgICB9XG4gICAgV2luZG93Q291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dTaXplLCB0aGlzLnN0YXJ0V2luZG93RXZlcnkpKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dDb3VudE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgV2luZG93Q291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2luZG93Q291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFdpbmRvd0NvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgd2luZG93U2l6ZSwgc3RhcnRXaW5kb3dFdmVyeSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZTtcbiAgICAgICAgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID0gc3RhcnRXaW5kb3dFdmVyeTtcbiAgICAgICAgdGhpcy53aW5kb3dzID0gW25ldyBTdWJqZWN0XzEuU3ViamVjdCgpXTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHZhciBmaXJzdFdpbmRvdyA9IHRoaXMud2luZG93c1swXTtcbiAgICAgICAgZGVzdGluYXRpb24uYWRkKGZpcnN0V2luZG93KTtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChmaXJzdFdpbmRvdyk7XG4gICAgfVxuICAgIFdpbmRvd0NvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHN0YXJ0V2luZG93RXZlcnkgPSAodGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID4gMCkgPyB0aGlzLnN0YXJ0V2luZG93RXZlcnkgOiB0aGlzLndpbmRvd1NpemU7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciB3aW5kb3dTaXplID0gdGhpcy53aW5kb3dTaXplO1xuICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcbiAgICAgICAgdmFyIGxlbiA9IHdpbmRvd3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB3aW5kb3dzW2ldLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjID0gdGhpcy5jb3VudCAtIHdpbmRvd1NpemUgKyAxO1xuICAgICAgICBpZiAoYyA+PSAwICYmIGMgJSBzdGFydFdpbmRvd0V2ZXJ5ID09PSAwKSB7XG4gICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKyt0aGlzLmNvdW50ICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgICAgICAgICB3aW5kb3dzLnB1c2god2luZG93XzEpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uYWRkKHdpbmRvd18xKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93XzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIFdpbmRvd0NvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcbiAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpbmRvd0NvdW50U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd0NvdW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93Q291bnQuanNcbiAqKiBtb2R1bGUgaWQgPSA1NzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB3aW5kb3dUaW1lXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aW5kb3dUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93VGltZSA9IHdpbmRvd1RpbWVfMS53aW5kb3dUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNTcxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9TdWJqZWN0Jyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSBwZXJpb2RpY2FsbHlcbiAqIGluIHRpbWUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyVGltZX0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd1RpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBzdGFydHMgYSBuZXcgd2luZG93IHBlcmlvZGljYWxseSwgYXNcbiAqIGRldGVybWluZWQgYnkgdGhlIGB3aW5kb3dDcmVhdGlvbkludGVydmFsYCBhcmd1bWVudC4gSXQgZW1pdHMgZWFjaCB3aW5kb3dcbiAqIGFmdGVyIGEgZml4ZWQgdGltZXNwYW4sIHNwZWNpZmllZCBieSB0aGUgYHdpbmRvd1RpbWVTcGFuYCBhcmd1bWVudC4gV2hlbiB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBvciBlbmNvdW50ZXJzIGFuIGVycm9yLCB0aGUgb3V0cHV0IE9ic2VydmFibGVcbiAqIGVtaXRzIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgcHJvcGFnYXRlcyB0aGUgbm90aWZpY2F0aW9uIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gSWYgYHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWxgIGlzIG5vdCBwcm92aWRlZCwgdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZSBzdGFydHMgYSBuZXcgd2luZG93IHdoZW4gdGhlIHByZXZpb3VzIHdpbmRvdyBvZiBkdXJhdGlvblxuICogYHdpbmRvd1RpbWVTcGFuYCBjb21wbGV0ZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+SW4gZXZlcnkgd2luZG93IG9mIDEgc2Vjb25kIGVhY2gsIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd1RpbWUoMTAwMClcbiAqICAgLm1hcCh3aW4gPT4gd2luLnRha2UoMikpIC8vIGVhY2ggd2luZG93IGhhcyBhdCBtb3N0IDIgZW1pc3Npb25zXG4gKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IDUgc2Vjb25kcyBzdGFydCBhIHdpbmRvdyAxIHNlY29uZCBsb25nLCBhbmQgZW1pdCBhdCBtb3N0IDIgY2xpY2sgZXZlbnRzIHBlciB3aW5kb3c8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDAsIDUwMDApXG4gKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG4gKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aW5kb3dUaW1lU3BhbiBUaGUgYW1vdW50IG9mIHRpbWUgdG8gZmlsbCBlYWNoIHdpbmRvdy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2luZG93Q3JlYXRpb25JbnRlcnZhbF0gVGhlIGludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IG5ld1xuICogd2luZG93cy5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuICogaW50ZXJ2YWxzIHRoYXQgZGV0ZXJtaW5lIHdpbmRvdyBib3VuZGFyaWVzLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG4gKiBhcmUgT2JzZXJ2YWJsZXMuXG4gKiBAbWV0aG9kIHdpbmRvd1RpbWVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHdpbmRvd1RpbWUod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuICAgIGlmICh3aW5kb3dDcmVhdGlvbkludGVydmFsID09PSB2b2lkIDApIHsgd2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IG51bGw7IH1cbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLndpbmRvd1RpbWUgPSB3aW5kb3dUaW1lO1xudmFyIFdpbmRvd1RpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93VGltZU9wZXJhdG9yKHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3dUaW1lU3BhbiA9IHdpbmRvd1RpbWVTcGFuO1xuICAgICAgICB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSB3aW5kb3dDcmVhdGlvbkludGVydmFsO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgV2luZG93VGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFdpbmRvd1RpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93VGltZVNwYW4sIHRoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbCwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dUaW1lT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBXaW5kb3dUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpbmRvd1RpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLndpbmRvd1RpbWVTcGFuID0gd2luZG93VGltZVNwYW47XG4gICAgICAgIHRoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLndpbmRvd3MgPSBbXTtcbiAgICAgICAgaWYgKHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgIT09IG51bGwgJiYgd2luZG93Q3JlYXRpb25JbnRlcnZhbCA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgd2luZG93XzEgPSB0aGlzLm9wZW5XaW5kb3coKTtcbiAgICAgICAgICAgIHZhciBjbG9zZVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCB3aW5kb3c6IHdpbmRvd18xLCBjb250ZXh0OiBudWxsIH07XG4gICAgICAgICAgICB2YXIgY3JlYXRpb25TdGF0ZSA9IHsgd2luZG93VGltZVNwYW46IHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsOiB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBzdWJzY3JpYmVyOiB0aGlzLCBzY2hlZHVsZXI6IHNjaGVkdWxlciB9O1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q2xvc2UsIHdpbmRvd1RpbWVTcGFuLCBjbG9zZVN0YXRlKSk7XG4gICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgY3JlYXRpb25TdGF0ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHdpbmRvd18yID0gdGhpcy5vcGVuV2luZG93KCk7XG4gICAgICAgICAgICB2YXIgdGltZVNwYW5Pbmx5U3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIHdpbmRvdzogd2luZG93XzIsIHdpbmRvd1RpbWVTcGFuOiB3aW5kb3dUaW1lU3BhbiB9O1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93VGltZVNwYW5Pbmx5LCB3aW5kb3dUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHZhciBsZW4gPSB3aW5kb3dzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHdpbmRvd18zID0gd2luZG93c1tpXTtcbiAgICAgICAgICAgIGlmICghd2luZG93XzMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3dfMy5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgd2luZG93XzQgPSB3aW5kb3dzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoIXdpbmRvd180LmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgd2luZG93XzQuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbmRvdyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICB0aGlzLndpbmRvd3MucHVzaCh3aW5kb3cpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQod2luZG93KTtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dCh3aW5kb3cpO1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH07XG4gICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24gKHdpbmRvdykge1xuICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHdpbmRvd3Muc3BsaWNlKHdpbmRvd3MuaW5kZXhPZih3aW5kb3cpLCAxKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dUaW1lU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGRpc3BhdGNoV2luZG93VGltZVNwYW5Pbmx5KHN0YXRlKSB7XG4gICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCB3aW5kb3dUaW1lU3BhbiA9IHN0YXRlLndpbmRvd1RpbWVTcGFuLCB3aW5kb3cgPSBzdGF0ZS53aW5kb3c7XG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcbiAgICB9XG4gICAgc3RhdGUud2luZG93ID0gc3Vic2NyaWJlci5vcGVuV2luZG93KCk7XG4gICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgd2luZG93VGltZVNwYW4pO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbihzdGF0ZSkge1xuICAgIHZhciB3aW5kb3dUaW1lU3BhbiA9IHN0YXRlLndpbmRvd1RpbWVTcGFuLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgc2NoZWR1bGVyID0gc3RhdGUuc2NoZWR1bGVyLCB3aW5kb3dDcmVhdGlvbkludGVydmFsID0gc3RhdGUud2luZG93Q3JlYXRpb25JbnRlcnZhbDtcbiAgICB2YXIgd2luZG93ID0gc3Vic2NyaWJlci5vcGVuV2luZG93KCk7XG4gICAgdmFyIGFjdGlvbiA9IHRoaXM7XG4gICAgdmFyIGNvbnRleHQgPSB7IGFjdGlvbjogYWN0aW9uLCBzdWJzY3JpcHRpb246IG51bGwgfTtcbiAgICB2YXIgdGltZVNwYW5TdGF0ZSA9IHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgd2luZG93OiB3aW5kb3csIGNvbnRleHQ6IGNvbnRleHQgfTtcbiAgICBjb250ZXh0LnN1YnNjcmlwdGlvbiA9IHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0Nsb3NlLCB3aW5kb3dUaW1lU3BhbiwgdGltZVNwYW5TdGF0ZSk7XG4gICAgYWN0aW9uLmFkZChjb250ZXh0LnN1YnNjcmlwdGlvbik7XG4gICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCB3aW5kb3dDcmVhdGlvbkludGVydmFsKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoV2luZG93Q2xvc2UoYXJnKSB7XG4gICAgdmFyIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlciwgd2luZG93ID0gYXJnLndpbmRvdywgY29udGV4dCA9IGFyZy5jb250ZXh0O1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuYWN0aW9uICYmIGNvbnRleHQuc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnRleHQuYWN0aW9uLnJlbW92ZShjb250ZXh0LnN1YnNjcmlwdGlvbik7XG4gICAgfVxuICAgIHN1YnNjcmliZXIuY2xvc2VXaW5kb3cod2luZG93KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci93aW5kb3dUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNTcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93VG9nZ2xlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aW5kb3dUb2dnbGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dUb2dnbGUgPSB3aW5kb3dUb2dnbGVfMS53aW5kb3dUb2dnbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dUb2dnbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlLmpzXG4gKiogbW9kdWxlIGlkID0gNTczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHN0YXJ0aW5nIGZyb21cbiAqIGFuIGVtaXNzaW9uIGZyb20gYG9wZW5pbmdzYCBhbmQgZW5kaW5nIHdoZW4gdGhlIG91dHB1dCBvZiBgY2xvc2luZ1NlbGVjdG9yYFxuICogZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfSwgYnV0IGVtaXRzIGEgbmVzdGVkXG4gKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93VG9nZ2xlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgd2luZG93cyB0aGF0IGNvbnRhaW4gdGhvc2UgaXRlbXNcbiAqIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJldHdlZW4gdGhlIHRpbWUgd2hlbiB0aGUgYG9wZW5pbmdzYFxuICogT2JzZXJ2YWJsZSBlbWl0cyBhbiBpdGVtIGFuZCB3aGVuIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG4gKiBgY2xvc2luZ1NlbGVjdG9yYCBlbWl0cyBhbiBpdGVtLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIG9wZW5pbmdzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93VG9nZ2xlKG9wZW5pbmdzLCBpID0+XG4gKiAgIGkgJSAyID8gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG4gKiApLm1lcmdlQWxsKCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIHdpbmRvd31cbiAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG4gKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlPE8+fSBvcGVuaW5ncyBBbiBvYnNlcnZhYmxlIG9mIG5vdGlmaWNhdGlvbnMgdG8gc3RhcnQgbmV3XG4gKiB3aW5kb3dzLlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogTyk6IE9ic2VydmFibGV9IGNsb3NpbmdTZWxlY3RvciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXNcbiAqIHRoZSB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBgb3BlbmluZ3NgIG9ic2VydmFibGUgYW5kIHJldHVybnMgYW4gT2JzZXJ2YWJsZSxcbiAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzIChlaXRoZXIgYG5leHRgIG9yIGBjb21wbGV0ZWApLCBzaWduYWxzIHRoYXQgdGhlXG4gKiBhc3NvY2lhdGVkIHdpbmRvdyBzaG91bGQgY29tcGxldGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBvYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cbiAqIGFyZSBPYnNlcnZhYmxlcy5cbiAqIEBtZXRob2Qgd2luZG93VG9nZ2xlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB3aW5kb3dUb2dnbGUob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd1RvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMud2luZG93VG9nZ2xlID0gd2luZG93VG9nZ2xlO1xudmFyIFdpbmRvd1RvZ2dsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMub3BlbmluZ3MgPSBvcGVuaW5ncztcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgfVxuICAgIFdpbmRvd1RvZ2dsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vcGVuaW5ncywgdGhpcy5jbG9zaW5nU2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dUb2dnbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICB0aGlzLmNvbnRleHRzID0gW107XG4gICAgICAgIHRoaXMuYWRkKHRoaXMub3BlblN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MsIG9wZW5pbmdzKSk7XG4gICAgfVxuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIGlmIChjb250ZXh0cykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0c1tpXS53aW5kb3cubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIGlmIChjb250ZXh0cykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCBlcnIpO1xuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcbiAgICAgICAgaWYgKGNvbnRleHRzKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcbiAgICAgICAgaWYgKGNvbnRleHRzKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAob3V0ZXJWYWx1ZSA9PT0gdGhpcy5vcGVuaW5ncykge1xuICAgICAgICAgICAgdmFyIGNsb3NpbmdTZWxlY3RvciA9IHRoaXMuY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2xvc2luZ1NlbGVjdG9yKShpbm5lclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IHsgd2luZG93OiB3aW5kb3dfMSwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2goY29udGV4dCk7XG4gICAgICAgICAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh3aW5kb3dfMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMuaW5kZXhPZihvdXRlclZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lcikge1xuICAgICAgICBpZiAoaW5uZXIgIT09IHRoaXMub3BlblN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2YoaW5uZXIuY29udGV4dCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07XG4gICAgICAgIHZhciB3aW5kb3cgPSBjb250ZXh0LndpbmRvdywgc3Vic2NyaXB0aW9uID0gY29udGV4dC5zdWJzY3JpcHRpb247XG4gICAgICAgIGNvbnRleHRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHdpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RvZ2dsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3dpbmRvd1RvZ2dsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHdpbmRvd1doZW5fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3dpbmRvd1doZW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dXaGVuID0gd2luZG93V2hlbl8xLndpbmRvd1doZW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3dpbmRvd1doZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1NzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHVzaW5nIGFcbiAqIGZhY3RvcnkgZnVuY3Rpb24gb2YgY2xvc2luZyBPYnNlcnZhYmxlcyB0byBkZXRlcm1pbmUgd2hlbiB0byBzdGFydCBhIG5ld1xuICogd2luZG93LlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGJ1ZmZlcldoZW59LCBidXQgZW1pdHMgYSBuZXN0ZWRcbiAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmcgd2luZG93cy5cbiAqIEl0IGVtaXRzIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgb3BlbnMgYSBuZXcgb25lIHdoZW5ldmVyIHRoZSBPYnNlcnZhYmxlXG4gKiBwcm9kdWNlZCBieSB0aGUgc3BlY2lmaWVkIGBjbG9zaW5nU2VsZWN0b3JgIGZ1bmN0aW9uIGVtaXRzIGFuIGl0ZW0uIFRoZSBmaXJzdFxuICogd2luZG93IGlzIG9wZW5lZCBpbW1lZGlhdGVseSB3aGVuIHN1YnNjcmliaW5nIHRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IG9ubHkgdGhlIGZpcnN0IHR3byBjbGlja3MgZXZlbnRzIGluIGV2ZXJ5IHdpbmRvdyBvZiBbMS01XSByYW5kb20gc2Vjb25kczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzXG4gKiAgIC53aW5kb3dXaGVuKCgpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCArIE1hdGgucmFuZG9tKCkgKiA0MDAwKSlcbiAqICAgLm1hcCh3aW4gPT4gd2luLnRha2UoMikpIC8vIGVhY2ggd2luZG93IGhhcyBhdCBtb3N0IDIgZW1pc3Npb25zXG4gKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIHdpbmRvd31cbiAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigpOiBPYnNlcnZhYmxlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vXG4gKiBhcmd1bWVudHMgYW5kIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNpZ25hbHMgKG9uIGVpdGhlciBgbmV4dGAgb3JcbiAqIGBjb21wbGV0ZWApIHdoZW4gdG8gY2xvc2UgdGhlIHByZXZpb3VzIHdpbmRvdyBhbmQgc3RhcnQgYSBuZXcgb25lLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG4gKiBhcmUgT2JzZXJ2YWJsZXMuXG4gKiBAbWV0aG9kIHdpbmRvd1doZW5cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHdpbmRvd1doZW4oY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2luZG93T3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSk7XG59XG5leHBvcnRzLndpbmRvd1doZW4gPSB3aW5kb3dXaGVuO1xudmFyIFdpbmRvd09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXaW5kb3dPcGVyYXRvcihjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgfVxuICAgIFdpbmRvd09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFdpbmRvd1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jbG9zaW5nU2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFdpbmRvd1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhXaW5kb3dTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFdpbmRvd1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuICAgIH1cbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdyhpbm5lclN1Yik7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5vcGVuV2luZG93KGlubmVyU3ViKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMud2luZG93Lm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLndpbmRvdy5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMud2luZG93LmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlQ2xvc2luZ05vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgaWYgKGlubmVyU3ViID09PSB2b2lkIDApIHsgaW5uZXJTdWIgPSBudWxsOyB9XG4gICAgICAgIGlmIChpbm5lclN1Yikge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICAgICAgaW5uZXJTdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldldpbmRvdyA9IHRoaXMud2luZG93O1xuICAgICAgICBpZiAocHJldldpbmRvdykge1xuICAgICAgICAgICAgcHJldldpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aW5kb3cgPSB0aGlzLndpbmRvdyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQod2luZG93KTtcbiAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7XG4gICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIpKTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHdpbmRvdyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1doZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci93aW5kb3dXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNTc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2l0aExhdGVzdEZyb21fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2l0aExhdGVzdEZyb20gPSB3aXRoTGF0ZXN0RnJvbV8xLndpdGhMYXRlc3RGcm9tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2l0aExhdGVzdEZyb20uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb20uanNcbiAqKiBtb2R1bGUgaWQgPSA1NzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBDb21iaW5lcyB0aGUgc291cmNlIE9ic2VydmFibGUgd2l0aCBvdGhlciBPYnNlcnZhYmxlcyB0byBjcmVhdGUgYW4gT2JzZXJ2YWJsZVxuICogd2hvc2UgdmFsdWVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCwgb25seSB3aGVuIHRoZVxuICogc291cmNlIGVtaXRzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcbiAqIGNvbXB1dGVzIGEgZm9ybXVsYSB1c2luZyB0aGF0IHZhbHVlIHBsdXMgdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSBvdGhlciBpbnB1dFxuICogT2JzZXJ2YWJsZXMsIHRoZW4gZW1pdHMgdGhlIG91dHB1dCBvZiB0aGF0IGZvcm11bGEuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvd2l0aExhdGVzdEZyb20ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHdpdGhMYXRlc3RGcm9tYCBjb21iaW5lcyBlYWNoIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlICh0aGVcbiAqIGluc3RhbmNlKSB3aXRoIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gdGhlIG90aGVyIGlucHV0IE9ic2VydmFibGVzIG9ubHkgd2hlblxuICogdGhlIHNvdXJjZSBlbWl0cyBhIHZhbHVlLCBvcHRpb25hbGx5IHVzaW5nIGEgYHByb2plY3RgIGZ1bmN0aW9uIHRvIGRldGVybWluZVxuICogdGhlIHZhbHVlIHRvIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBBbGwgaW5wdXQgT2JzZXJ2YWJsZXMgbXVzdFxuICogZW1pdCBhdCBsZWFzdCBvbmUgdmFsdWUgYmVmb3JlIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSB3aWxsIGVtaXQgYSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljayBldmVudCwgZW1pdCBhbiBhcnJheSB3aXRoIHRoZSBsYXRlc3QgdGltZXIgZXZlbnQgcGx1cyB0aGUgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Mud2l0aExhdGVzdEZyb20odGltZXIpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb3RoZXIgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb21iaW5lIHdpdGggdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvamVjdF0gUHJvamVjdGlvbiBmdW5jdGlvbiBmb3IgY29tYmluaW5nIHZhbHVlc1xuICogdG9nZXRoZXIuIFJlY2VpdmVzIGFsbCB2YWx1ZXMgaW4gb3JkZXIgb2YgdGhlIE9ic2VydmFibGVzIHBhc3NlZCwgd2hlcmUgdGhlXG4gKiBmaXJzdCBwYXJhbWV0ZXIgaXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gKGUuZy5cbiAqIGBhLndpdGhMYXRlc3RGcm9tKGIsIGMsIChhMSwgYjEsIGMxKSA9PiBhMSArIGIxICsgYzEpYCkuIElmIHRoaXMgaXMgbm90XG4gKiBwYXNzZWQsIGFycmF5cyB3aWxsIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50XG4gKiB2YWx1ZXMgZnJvbSBlYWNoIGlucHV0IE9ic2VydmFibGUsIG9yIGFuIGFycmF5IG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbVxuICogZWFjaCBpbnB1dCBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCB3aXRoTGF0ZXN0RnJvbVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gd2l0aExhdGVzdEZyb20oKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgcHJvamVjdDtcbiAgICBpZiAodHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9qZWN0ID0gYXJncy5wb3AoKTtcbiAgICB9XG4gICAgdmFyIG9ic2VydmFibGVzID0gYXJncztcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yKG9ic2VydmFibGVzLCBwcm9qZWN0KSk7XG59XG5leHBvcnRzLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb207XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xudmFyIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgIH1cbiAgICBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGVzLCB0aGlzLnByb2plY3QpKTtcbiAgICB9O1xuICAgIHJldHVybiBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb2JzZXJ2YWJsZXMsIHByb2plY3QpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMudG9SZXNwb25kID0gW107XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMudmFsdWVzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudG9SZXNwb25kLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSwgaSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG4gICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcbiAgICAgICAgaWYgKHRvUmVzcG9uZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSB0b1Jlc3BvbmQuaW5kZXhPZihvdXRlckluZGV4KTtcbiAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0b1Jlc3BvbmQuc3BsaWNlKGZvdW5kLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gbm9vcFxuICAgIH07XG4gICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy50b1Jlc3BvbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFt2YWx1ZV0uY29uY2F0KHRoaXMudmFsdWVzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlQcm9qZWN0KGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcm9qZWN0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGhMYXRlc3RGcm9tLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb20uanNcbiAqKiBtb2R1bGUgaWQgPSA1NzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB6aXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3ppcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnppcCA9IHppcF8xLnppcFByb3RvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3ppcC5qc1xuICoqIG1vZHVsZSBpZCA9IDU3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHppcEFsbF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvemlwQWxsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwQWxsID0gemlwQWxsXzEuemlwQWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwQWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3ppcEFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDU4MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgemlwXzEgPSByZXF1aXJlKCcuL3ppcCcpO1xuLyoqXG4gKiBAcGFyYW0gcHJvamVjdFxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHppcEFsbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gemlwQWxsKHByb2plY3QpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyB6aXBfMS5aaXBPcGVyYXRvcihwcm9qZWN0KSk7XG59XG5leHBvcnRzLnppcEFsbCA9IHppcEFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcEFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3ppcEFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDU4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpYmVyJyk7XG52YXIgT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9wZXJhdG9yKCkge1xuICAgIH1cbiAgICBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5PcGVyYXRvciA9IE9wZXJhdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3BlcmF0b3IuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9PcGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDU4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnQsIEhvc3RCaW5kaW5nLCBIb3N0TGlzdGVuZXIsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7Um91dGVyLCBSb3V0ZXMsIFJvdXRlU2VnbWVudCwgUm91dGVUcmVlLCBST1VURVJfRElSRUNUSVZFU30gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuXHJcbmltcG9ydCB7QXBwU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvYXBwLXNlcnZpY2UnO1xyXG5pbXBvcnQge1JlZmVyZW5jZVNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3JlZmVyZW5jZS1zZXJ2aWNlJztcclxuaW1wb3J0IHtTdGFmZlNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3N0YWZmLXNlcnZpY2UnO1xyXG5cclxuaW1wb3J0IHtOYXZDb21wb25lbnR9IGZyb20gJy4vbmF2JztcclxuaW1wb3J0IHtQcm9qZWN0c0NvbXBvbmVudH0gZnJvbSAnLi9wcm9qZWN0cyc7XHJcbmltcG9ydCB7UHJvamVjdENvbXBvbmVudH0gZnJvbSAnLi9wcm9qZWN0JztcclxuaW1wb3J0IHtUYXNrc0NvbXBvbmVudH0gZnJvbSAnLi90YXNrcyc7XHJcbmltcG9ydCB7VGFza0NvbXBvbmVudH0gZnJvbSAnLi90YXNrJztcclxuaW1wb3J0IHtVc2VyUHJvZmlsZUNvbXBvbmVudH0gZnJvbSAnLi91c2VyLXByb2ZpbGUnO1xyXG5pbXBvcnQge0xvZ2luQ29tcG9uZW50fSBmcm9tICcuL2xvZ2luJztcclxuaW1wb3J0IHtVc2Vyc0NvbXBvbmVudH0gZnJvbSAnLi91c2Vycyc7XHJcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi4vbW9kZWxzL3VzZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3Byb2plY3QtYXBwJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuLi90ZW1wbGF0ZXMvYXBwLmh0bWwnKSxcclxuICAgIGRpcmVjdGl2ZXM6IFtcclxuICAgICAgICBST1VURVJfRElSRUNUSVZFUyxcclxuICAgICAgICBOYXZDb21wb25lbnRcclxuICAgIF1cclxufSlcclxuXHJcbkBSb3V0ZXMoW1xyXG4gICAgeyBwYXRoOiAnL3Byb2plY3RzJywgY29tcG9uZW50OiBQcm9qZWN0c0NvbXBvbmVudCB9LFxyXG4gICAgeyBwYXRoOiAnL3Byb2plY3QvOmlkJywgY29tcG9uZW50OiBQcm9qZWN0Q29tcG9uZW50IH0sXHJcbiAgICB7IHBhdGg6ICcvdGFza3MnLCBjb21wb25lbnQ6IFRhc2tzQ29tcG9uZW50IH0sXHJcbiAgICB7IHBhdGg6ICcvdGFza3MvOmlkJywgY29tcG9uZW50OiBUYXNrc0NvbXBvbmVudCB9LFxyXG4gICAgeyBwYXRoOiAnL3Rhc2svOmlkJywgY29tcG9uZW50OiBUYXNrQ29tcG9uZW50IH0sXHJcbiAgICB7IHBhdGg6ICcvdXNlci1wcm9maWxlJywgY29tcG9uZW50OiBVc2VyUHJvZmlsZUNvbXBvbmVudCB9LFxyXG4gICAgeyBwYXRoOiAnL2xvZ2luJywgY29tcG9uZW50OiBMb2dpbkNvbXBvbmVudCB9XHJcbl0pXHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIGxvZ2dlZFVzZXI6IFVzZXI7XHJcbiAgICBIRUFERVJfVElUTEU6IHN0cmluZyA9IFwiUHJvamVjdHNcIjtcclxuICAgIGlzTmF2Q29sbGFwc2VkOiBCb29sZWFuO1xyXG4gICAgaXNNb2JpbGVEZXZpY2U6IEJvb2xlYW47XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50LnRhcmdldCddKSByZXNpemUod2luZG93KSB7IHRoaXMub25SZXNpemUod2luZG93KTsgfTtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MucGhvbmUnKSBnZXQgZGV2aWNlKCkgeyByZXR1cm4gdGhpcy5pc01vYmlsZURldmljZTsgfTtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3Muc2lkZS1uYXYtdG9nZ2xlJykgZ2V0IHRvZ2dsZU5hdlZpc2libGUoKSB7IHJldHVybiB0aGlzLmlzTmF2Q29sbGFwc2VkOyB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgX3JvdXRlcjogUm91dGVyLFxyXG4gICAgICAgIHByaXZhdGUgX2FwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfcmVmZXJlbmNlU2VydmljZTogUmVmZXJlbmNlU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIF9zdGFmZlNlcnZpY2U6IFN0YWZmU2VydmljZVxyXG4gICAgKSB7IH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLmlzTmF2Q29sbGFwc2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sb2dnZWRVc2VyID0gbmV3IFVzZXIoKTtcclxuICAgICAgICB0aGlzLmlzTW9iaWxlRGV2aWNlID0gdGhpcy5pc01vYmlsZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9hcHBTZXJ2aWNlLmdldFRyYW5zbGF0aW9ucygpXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICBjYXB0aW9ucyA9PiBjb25zb2xlLmxvZyhjYXB0aW9ucyksXHJcbiAgICAgICAgICAgICAgICBlcnIgPT4gdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnTG9naW4nXSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVOYXYoKSB7XHJcbiAgICAgICAgdGhpcy5pc05hdkNvbGxhcHNlZCA9ICF0aGlzLmlzTmF2Q29sbGFwc2VkO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVOYXYoKSB7XHJcbiAgICAgICAgdGhpcy5pc05hdkNvbGxhcHNlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZ291dChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5sb2dnZWRVc2VyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBnb0JhY2soKSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc01vYmlsZSgpIHtcclxuICAgICAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXplKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMuaXNNb2JpbGVEZXZpY2UgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0IHx8IHRoaXMuaXNNb2JpbGUoKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb21wb25lbnRzL2FwcC50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmNvbnN0IEhFQURFUiA9IHsgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBBcHBTZXJ2aWNlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBcclxuICAgICkge1xyXG4gICAgICAgIC8vIGh0dHAuZ2V0KCcvc2Vzc2lvbicsIEhFQURFUikuc3Vic2NyaWJlKHJlc3BvbnNlID0+IGNvbnNvbGUubG9nKHJlc3BvbnNlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJhbnNsYXRpb25zKCkge1xyXG4gICAgICAgIGxldCB1cmwgPSAncD9pZD1jb21tb24tY2FwdGlvbnMnO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgSEVBREVSKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKS5jYXB0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmF2KCkge1xyXG4gICAgICAgIGxldCB1cmwgPSAncD9pZD1vdXRsaW5lJztcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIEhFQURFUik7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKCcnKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9zZXJ2aWNlcy9hcHAtc2VydmljZS50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmNvbnN0IEhFQURFUiA9IHsgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBSZWZlcmVuY2VTZXJ2aWNlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZ2V0VGFncygpLnN1YnNjcmliZShyZXNwID0+IGNvbnNvbGUubG9nKHJlc3ApKTtcclxuICAgICAgICB0aGlzLmdldFRhc2tUeXBlcygpLnN1YnNjcmliZShyZXNwID0+IGNvbnNvbGUubG9nKHJlc3ApKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYWdzKCkge1xyXG4gICAgICAgIGxldCB1cmwgPSAnL1JlZmVyZW5jZS9wP2lkPXRhZ3MnO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgSEVBREVSKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhc2tUeXBlcygpIHtcclxuICAgICAgICBsZXQgdXJsID0gJy9SZWZlcmVuY2UvcD9pZD10YXNrdHlwZXMnO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgSEVBREVSKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3QpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL3NlcnZpY2VzL3JlZmVyZW5jZS1zZXJ2aWNlLnRzXG4gKiovIiwiaW1wb3J0IHtJbmplY3RhYmxlLCBJbmplY3R9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0h0dHAsIEhlYWRlcnN9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xyXG5cclxuY29uc3QgSEVBREVSID0geyBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSkgfTtcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFN0YWZmU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmdldE9yZ2FuaXphdGlvbnMoKS5zdWJzY3JpYmUocmVzcCA9PiBjb25zb2xlLmxvZyhyZXNwKSk7XHJcbiAgICAgICAgdGhpcy5nZXRFbXBsb3llZXMoKS5zdWJzY3JpYmUocmVzcCA9PiBjb25zb2xlLmxvZyhyZXNwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3JnYW5pemF0aW9ucygpIHtcclxuICAgICAgICBsZXQgdXJsID0gJy9TdGFmZi9wP2lkPWdldC1vcmdhbml6YXRpb25zJztcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFbXBsb3llZXMoKSB7XHJcbiAgICAgICAgbGV0IHVybCA9ICdwP2lkPXVzZXJzJztcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9zZXJ2aWNlcy9zdGFmZi1zZXJ2aWNlLnRzXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUk9VVEVSX0RJUkVDVElWRVN9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcblxyXG5pbXBvcnQge0FwcFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL2FwcC1zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbbmF2XScsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vdGVtcGxhdGVzL25hdi5odG1sJyksXHJcbiAgICBkaXJlY3RpdmVzOiBbUk9VVEVSX0RJUkVDVElWRVNdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgTmF2Q29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgX2FwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXJcclxuICAgICkgeyB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy9uYXYudHNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHVsPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ2luYm94J11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWluYm94XFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3snaW5ib3gnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAndG9kYXknXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2FsZW5kYXItb1xcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J3RvZGF5J319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ3dlZWsnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2FsZW5kYXJcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eyd3ZWVrJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJ11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWRhdGFiYXNlXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3snYWxsJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ2NvbXBsZXRlZCddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jaGVjay1zcXVhcmUtb1xcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J2NvbXBsZXRlZCd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpPlxcclxcbiAgICAgICAgPGEgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrcycsICdteSddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS10aWNrZXRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydteV90YXNrcyd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpIGNsYXNzPVxcXCJkaXZpZGVyXFxcIj48L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Byb2plY3RzJ11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXB1enpsZS1waWVjZVxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J3Byb2plY3RzJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbjwvdWw+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL3RlbXBsYXRlcy9uYXYuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDU4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnQsIEluamVjdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7Um91dGVyLCBSb3V0ZXN9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcblxyXG5pbXBvcnQge1Byb2plY3R9IGZyb20gJy4uL21vZGVscy9wcm9qZWN0JztcclxuaW1wb3J0IHtQcm9qZWN0U2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlJztcclxuaW1wb3J0IHtQcm9qZWN0RmFjdG9yeX0gZnJvbSAnLi4vZmFjdG9yaWVzL3Byb2plY3QtZmFjdG9yeSc7XHJcbmltcG9ydCB7UHJvamVjdENvbXBvbmVudH0gZnJvbSAnLi4vY29tcG9uZW50cy9wcm9qZWN0JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbcHJvamVjdHNdJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuLi90ZW1wbGF0ZXMvcHJvamVjdHMuaHRtbCcpXHJcbn0pXHJcblxyXG5AUm91dGVzKFtcclxuICAgIHsgcGF0aDogJy86aWQnLCBjb21wb25lbnQ6IFByb2plY3RDb21wb25lbnQgfVxyXG5dKVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RzQ29tcG9uZW50IHtcclxuICAgIHByb2plY3RzOiBQcm9qZWN0W107XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBwcm9qZWN0U2VydmljZTogUHJvamVjdFNlcnZpY2VcclxuICAgICkge1xyXG4gICAgICAgIHByb2plY3RTZXJ2aWNlLmdldFByb2plY3RzKClcclxuICAgICAgICAgICAgLnN1YnNjcmliZShwcm9qZWN0cyA9PiB0aGlzLnByb2plY3RzID0gcHJvamVjdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvc2VSZWNvcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL3Byb2plY3QnLCAnbmV3J10pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVByb2plY3QocHJvamVjdDogUHJvamVjdCkge1xyXG4gICAgICAgIHRoaXMucHJvamVjdFNlcnZpY2UuZGVsZXRlUHJvamVjdChwcm9qZWN0KVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy9wcm9qZWN0cy50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmltcG9ydCB7UHJvamVjdH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5pbXBvcnQge1Byb2plY3RGYWN0b3J5fSBmcm9tICcuLi9mYWN0b3JpZXMvcHJvamVjdC1mYWN0b3J5JztcclxuaW1wb3J0IHtzZXJpYWxpemVPYmp9IGZyb20gJy4uL3V0aWxzL29iai11dGlscyc7XHJcblxyXG5jb25zdCBWSUVXX1VSTCA9ICdwP2lkPXByb2plY3Qtdmlldyc7XHJcbmNvbnN0IEZPUk1fVVJMID0gJ3A/aWQ9cHJvamVjdC1mb3JtJztcclxuY29uc3QgSEVBREVSID0geyBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbn0pIH07XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0U2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwXHJcbiAgICApIHt9XHJcblxyXG4gICAgZ2V0UHJvamVjdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoVklFV19VUkwsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwID0+IFByb2plY3RGYWN0b3J5LmNyZWF0ZVByb2plY3RMaXN0KHJlc3AuanNvbigpLm9iamVjdHNbMF0ubGlzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByb2plY3RCeUlkKHByb2plY3RJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoRk9STV9VUkwgKyAnJmRvY2lkPScgKyBwcm9qZWN0SWQsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwID0+IFByb2plY3RGYWN0b3J5LmNyZWF0ZVByb2plY3QocmVzcC5qc29uKCkub2JqZWN0c1sxXSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVQcm9qZWN0KHByb2plY3Q6IFByb2plY3QpIHtcclxuICAgICAgICBsZXQgdXJsID0gRk9STV9VUkwgKyAocHJvamVjdC5pZCA/ICcmZG9jaWQ9JyArIHByb2plY3QuaWQgOiAnJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgcHJvamVjdC5zZXJpYWxpemUoKSwgSEVBREVSKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVQcm9qZWN0KHByb2plY3Q6IFByb2plY3QpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZShWSUVXX1VSTCk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlLnRzXG4gKiovIiwiaW1wb3J0IHtQcm9qZWN0fSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KGpzb246IGFueSk6IFByb2plY3Qge1xyXG4gICAgbGV0IHJlc3VsdDogUHJvamVjdCA9IG5ldyBQcm9qZWN0KCk7XHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coJ2ZhY3Rvcnk6Y3JlYXRlUHJvamVjdCcsIGpzb24pO1xyXG5cclxuICAgIHJlc3VsdC5pZCA9IGpzb24uaWQ7XHJcbiAgICByZXN1bHQuYXV0aG9yID0ganNvbi5hdXRob3I7XHJcbiAgICByZXN1bHQucmVnRGF0ZSA9IGpzb24ucmVnRGF0ZTtcclxuXHJcbiAgICByZXN1bHQubmFtZSA9IGpzb24ubmFtZTtcclxuICAgIHJlc3VsdC5zdGF0dXMgPSBqc29uLnN0YXR1cztcclxuICAgIHJlc3VsdC5jdXN0b21lciA9IG51bGw7IC8vanNvbi5jdXN0b21lcjtcclxuICAgIHJlc3VsdC5tYW5hZ2VyID0gbnVsbDsgLy9qc29uLm1hbmFnZXI7XHJcbiAgICByZXN1bHQucHJvZ3JhbW1lciA9IG51bGw7IC8vanNvbi5wcm9ncmFtbWVyO1xyXG4gICAgcmVzdWx0LnRlc3RlciA9IG51bGw7IC8vanNvbi50ZXN0ZXI7XHJcbiAgICByZXN1bHQub2JzZXJ2ZXJzID0gbnVsbDsgLy9qc29uLm9ic2VydmVycztcclxuICAgIHJlc3VsdC5jb21tZW50ID0ganNvbi5jb21tZW50O1xyXG4gICAgcmVzdWx0LmZpbmlzaERhdGUgPSBqc29uLmZpbmlzaERhdGU7XHJcbiAgICByZXN1bHQuYXR0YWNobWVudHMgPSBudWxsOyAvL2pzb24uYXR0YWNobWVudHM7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdExpc3QoanNvbjogQXJyYXk8YW55Pik6IFByb2plY3RbXSB7XHJcbiAgICBsZXQgcmVzdWx0OiBQcm9qZWN0W10gPSBbXTtcclxuICAgIGpzb24uZm9yRWFjaChwcm9qZWN0ID0+IHJlc3VsdC5wdXNoKGNyZWF0ZVByb2plY3QocHJvamVjdCkpKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBQcm9qZWN0RmFjdG9yeSA9IHtcclxuICAgIGNyZWF0ZVByb2plY3Q6IGNyZWF0ZVByb2plY3QsXHJcbiAgICBjcmVhdGVQcm9qZWN0TGlzdDogY3JlYXRlUHJvamVjdExpc3RcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9mYWN0b3JpZXMvcHJvamVjdC1mYWN0b3J5LnRzXG4gKiovIiwiaW1wb3J0IHtBdHRhY2htZW50fSBmcm9tICcuL2F0dGFjaG1lbnQnO1xyXG5pbXBvcnQge09yZ2FuaXphdGlvbn0gZnJvbSAnLi9vcmdhbml6YXRpb24nO1xyXG5pbXBvcnQge1VzZXJ9IGZyb20gJy4vdXNlcic7XHJcbmltcG9ydCB7c2VyaWFsaXplT2JqfSBmcm9tICcuLi91dGlscy9vYmotdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFByb2plY3RTdGF0dXNUeXBlID0ge1xyXG4gICAgVU5LTk9XTjogMCxcclxuICAgIERSQUZUOiA4OTksIFxyXG4gICAgUFJPQ0VTU0VEOiA5MDAsXHJcbiAgICBGSU5JU0hFRDogOTAxXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgYXV0aG9yOiBVc2VyO1xyXG4gICAgcmVnRGF0ZTogRGF0ZTtcclxuICAgIHVybDogc3RyaW5nO1xyXG5cclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHN0YXR1czogbnVtYmVyO1xyXG4gICAgY3VzdG9tZXI6IE9yZ2FuaXphdGlvbjtcclxuICAgIG1hbmFnZXI6IG51bWJlcjtcclxuICAgIHByb2dyYW1tZXI6IG51bWJlcjtcclxuICAgIHRlc3RlcjogbnVtYmVyO1xyXG4gICAgb2JzZXJ2ZXJzOiBudW1iZXJbXTtcclxuICAgIGNvbW1lbnQ6IHN0cmluZztcclxuICAgIGZpbmlzaERhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgYXR0YWNobWVudHM6IEF0dGFjaG1lbnRbXTtcclxuXHJcbiAgICBzZXJpYWxpemUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gc2VyaWFsaXplT2JqKHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG4gICAgICAgICAgICBjdXN0b21lcjogKHRoaXMuY3VzdG9tZXIgPyB0aGlzLmN1c3RvbWVyLmlkIDogJycpIHx8ICcnLFxyXG4gICAgICAgICAgICBtYW5hZ2VyOiB0aGlzLm1hbmFnZXIgfHwgMCxcclxuICAgICAgICAgICAgcHJvZ3JhbW1lcjogdGhpcy5wcm9ncmFtbWVyIHx8IDAsXHJcbiAgICAgICAgICAgIHRlc3RlcjogdGhpcy50ZXN0ZXIgfHwgMCxcclxuICAgICAgICAgICAgb2JzZXJ2ZXJzOiB0aGlzLm9ic2VydmVycyA/IHRoaXMub2JzZXJ2ZXJzIDogJycsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICAgICAgZmluaXNoRGF0ZTogdGhpcy5maW5pc2hEYXRlID8gdGhpcy5maW5pc2hEYXRlLnRvU3RyaW5nKCkgOiAnJyxcclxuICAgICAgICAgICAgYXR0YWNobWVudHM6ICcnIC8vdGhpcy5hdHRhY2htZW50cy5qb2luKCcnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL21vZGVscy9wcm9qZWN0LnRzXG4gKiovIiwiZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZU9iaihvYmopIHtcclxuICAgIHZhciByZXN1bHQgPSBbXTtcclxuXHJcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmopIHtcclxuICAgICAgICByZXN1bHQucHVzaChlbmNvZGVVUklDb21wb25lbnQocHJvcGVydHkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwcm9wZXJ0eV0pKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJyYnKTtcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC91dGlscy9vYmotdXRpbHMudHNcbiAqKi8iLCJpbXBvcnQge0NvbXBvbmVudCwgSW5qZWN0LCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUm91dGVTZWdtZW50fSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge0ZPUk1fUFJPVklERVJTLCBGb3JtQnVpbGRlciwgVmFsaWRhdG9ycywgQ29udHJvbEdyb3VwLCBDb250cm9sfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5cclxuaW1wb3J0IHtQcm9qZWN0fSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcbmltcG9ydCB7UHJvamVjdFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3Byb2plY3Qtc2VydmljZSc7XHJcbmltcG9ydCB7UHJvamVjdEZhY3Rvcnl9IGZyb20gJy4uL2ZhY3Rvcmllcy9wcm9qZWN0LWZhY3RvcnknO1xyXG5pbXBvcnQge1N0YWZmU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvc3RhZmYtc2VydmljZSc7XHJcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi4vbW9kZWxzL3VzZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ1twcm9qZWN0XScsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vdGVtcGxhdGVzL3Byb2plY3QuaHRtbCcpXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBsb2FkaW5nOiBCb29sZWFuID0gdHJ1ZTtcclxuICAgIHVzZXJzOiBVc2VyW107XHJcbiAgICBwcm9qZWN0OiBQcm9qZWN0ID0gbmV3IFByb2plY3QoKTtcclxuXHJcbiAgICBwcm9qZWN0Rm9ybTogQ29udHJvbEdyb3VwO1xyXG5cclxuICAgIG5hbWU6IENvbnRyb2w7XHJcbiAgICBzdGF0dXM6IENvbnRyb2w7XHJcbiAgICBjdXN0b21lcjogQ29udHJvbDtcclxuICAgIG1hbmFnZXI6IENvbnRyb2w7XHJcbiAgICBwcm9ncmFtbWVyOiBDb250cm9sO1xyXG4gICAgdGVzdGVyOiBDb250cm9sO1xyXG4gICAgb2JzZXJ2ZXJzOiBDb250cm9sO1xyXG4gICAgY29tbWVudDogQ29udHJvbDtcclxuICAgIGZpbmlzaERhdGU6IENvbnRyb2w7XHJcbiAgICBhdHRhY2htZW50czogQ29udHJvbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIF9wcm9qZWN0U2VydmljZTogUHJvamVjdFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhZmZTZXJ2aWNlOiBTdGFmZlNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBfcGFyYW1zOiBSb3V0ZVNlZ21lbnQsXHJcbiAgICAgICAgcHJpdmF0ZSBfZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuZXcgQ29udHJvbCgnJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXM9IG5ldyBDb250cm9sKCcnKTtcclxuICAgICAgICB0aGlzLmN1c3RvbWVyPSBuZXcgQ29udHJvbCgnJyk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyPSBuZXcgQ29udHJvbCgnJyk7XHJcbiAgICAgICAgdGhpcy5wcm9ncmFtbWVyPSBuZXcgQ29udHJvbCgnJyk7XHJcbiAgICAgICAgdGhpcy50ZXN0ZXI9IG5ldyBDb250cm9sKCcnKTtcclxuICAgICAgICB0aGlzLm9ic2VydmVycz0gbmV3IENvbnRyb2woJycpO1xyXG4gICAgICAgIHRoaXMuY29tbWVudD0gbmV3IENvbnRyb2woJycpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoRGF0ZT0gbmV3IENvbnRyb2woJycpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNobWVudHM9IG5ldyBDb250cm9sKCcnKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcm9qZWN0Rm9ybSA9IF9mb3JtQnVpbGRlci5ncm91cCh7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgY3VzdG9tZXI6IHRoaXMuY3VzdG9tZXIsXHJcbiAgICAgICAgICAgIG1hbmFnZXI6IHRoaXMubWFuYWdlcixcclxuICAgICAgICAgICAgcHJvZ3JhbW1lcjogdGhpcy5wcm9ncmFtbWVyLFxyXG4gICAgICAgICAgICB0ZXN0ZXI6IHRoaXMudGVzdGVyLFxyXG4gICAgICAgICAgICBvYnNlcnZlcnM6IHRoaXMub2JzZXJ2ZXJzLFxyXG4gICAgICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgICAgIGZpbmlzaERhdGU6IHRoaXMuZmluaXNoRGF0ZSxcclxuICAgICAgICAgICAgYXR0YWNobWVudHM6IHRoaXMuYXR0YWNobWVudHNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3BhcmFtcy5nZXRQYXJhbSgnaWQnKSAhPT0gJ25ldycpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvamVjdFNlcnZpY2UuZ2V0UHJvamVjdEJ5SWQodGhpcy5fcGFyYW1zLmdldFBhcmFtKCdpZCcpKS5zdWJzY3JpYmUocHJvamVjdCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdC5pZCA9IHRoaXMuX3BhcmFtcy5nZXRQYXJhbSgnaWQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9zdGFmZlNlcnZpY2UuZ2V0RW1wbG95ZWVzKCkuc3Vic2NyaWJlKHVzZXJzID0+IHRoaXMudXNlcnMgPSB1c2Vycyk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVByb2plY3QoKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvamVjdFNlcnZpY2Uuc2F2ZVByb2plY3QodGhpcy5wcm9qZWN0KS5zdWJzY3JpYmUocmVzcG9uc2UgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvcHJvamVjdHMnXSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy9wcm9qZWN0LnRzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgKm5nSWY9XFxcImxvYWRpbmdcXFwiPlxcclxcbiAgICB7eydsb2FkaW5nJ319XFxyXFxuPC9kaXY+XFxyXFxuPGZvcm0gW25nRm9ybU1vZGVsXT1cXFwicHJvamVjdEZvcm1cXFwiIFtoaWRkZW5dPVxcXCJsb2FkaW5nXFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLWJhY2tcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAge3sncHJvamVjdCd9fVxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5XFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIFtkaXNhYmxlZF09XFxcIiFwcm9qZWN0Rm9ybS52YWxpZFxcXCIgKGNsaWNrKT1cXFwic2F2ZVByb2plY3QoKVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIHt7J3NhdmVfY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIHt7J2Nsb3NlJ319XFxyXFxuICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9oZWFkZXI+XFxyXFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJjb250ZW50LWJvZHlcXFwiPlxcclxcbiAgICAgICAgPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJzcGFuNlxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QubmFtZVxcXCIgbmdDb250cm9sPVxcXCJuYW1lXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydjdXN0b21lcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjZcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LmN1c3RvbWVyXFxcIiBuZ0NvbnRyb2w9XFxcImN1c3RvbWVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IGMgb2YgY3VzdG9tZXJzXFxcIiBbdmFsdWVdPVxcXCJjXFxcIj57e2N9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J21hbmFnZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5tYW5hZ2VyXFxcIiBuZ0NvbnRyb2w9XFxcIm1hbmFnZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgbSBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwibS5pZFxcXCI+e3ttLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydwcm9ncmFtbWVyJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuNlxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QucHJvZ3JhbW1lclxcXCIgbmdDb250cm9sPVxcXCJwcm9ncmFtbWVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IHAgb2YgdXNlcnNcXFwiIFt2YWx1ZV09XFxcInAuaWRcXFwiPnt7cC5sb2dpbn19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3sndGVzdGVyJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuNlxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QudGVzdGVyXFxcIiBuZ0NvbnRyb2w9XFxcInRlc3RlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCB0IG9mIHVzZXJzXFxcIiBbdmFsdWVdPVxcXCJ0LmlkXFxcIj57e3QubG9naW59fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J29ic2VydmVycyd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjZcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0Lm9ic2VydmVyc1xcXCIgbmdDb250cm9sPVxcXCJvYnNlcnZlcnNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgb2JzIG9mIHVzZXJzXFxcIiBbdmFsdWVdPVxcXCJvYnMuaWRcXFwiPnt7b2JzLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGF0dXMnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5zdGF0dXNcXFwiIG5nQ29udHJvbD1cXFwic3RhdHVzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IHN0IG9mIHN0YXR1c2VzXFxcIiBbdmFsdWVdPVxcXCJzdFxcXCI+e3tzdH19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snZmluaXNoRGF0ZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImRhdGVcXFwiIGNsYXNzPVxcXCJzcGFuMlxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QuZmluaXNoRGF0ZVxcXCIgbmdDb250cm9sPVxcXCJmaW5pc2hEYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydjb21tZW50J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5jb21tZW50XFxcIiBuZ0NvbnRyb2w9XFxcImNvbW1lbnRcXFwiPjwvdGV4dGFyZWE+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50c1xcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgPC9zZWN0aW9uPlxcclxcbjwvZm9ybT5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hcHAvdGVtcGxhdGVzL3Byb2plY3QuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDU5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtaGVhZGVyXFxcIj5cXHJcXG4gICAgPGgxIGNsYXNzPVxcXCJoZWFkZXItdGl0bGVcXFwiPlxcclxcbiAgICAgICAge3sncHJvamVjdHMnfX1cXHJcXG4gICAgPC9oMT5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1hY3Rpb25zXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjb21wb3NlUmVjb3JkKClcXFwiPlxcclxcbiAgICAgICAgICAgIHt7J25ld19wcm9qZWN0J319XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBjbGFzcz1cXFwiY29udGVudC1ib2R5XFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwidmlld1xcXCI+XFxyXFxuICAgICAgICA8aGVhZGVyIGNsYXNzPVxcXCJlbnRyaWVzLWhlYWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWQtd3JhcFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cXFwiZW50cnktc2VsZWN0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgZGF0YS10b2dnbGU9XFxcImRvY2lkXFxcIiBjbGFzcz1cXFwiYWxsXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyeS1jYXB0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eyduYW1lJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9oZWFkZXI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyaWVzXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVxcXCIhcHJvamVjdHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydsb2FkaW5nJ319XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktd3JhcFxcXCIgKm5nRm9yPVxcXCJsZXQgcHJvamVjdCBvZiBwcm9qZWN0c1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cXFwie3twcm9qZWN0LmlkfX1cXFwiIGNsYXNzPVxcXCJlbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImVudHJ5LXNlbGVjdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJkb2NpZFxcXCIgdmFsdWU9XFxcInt7cHJvamVjdC5pZH19XFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJlbnRyeS1saW5rXFxcIiBbcm91dGVyTGlua109XFxcIlsnL3Byb2plY3QnLCBwcm9qZWN0LmlkXVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktZmllbGRzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e3Byb2plY3QubmFtZX19XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL3RlbXBsYXRlcy9wcm9qZWN0cy5odG1sXG4gKiogbW9kdWxlIGlkID0gNTk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQge0NvbXBvbmVudCwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtSb3V0ZXIsIFJvdXRlcywgUm91dGVTZWdtZW50LCBSb3V0ZVRyZWV9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcblxyXG5pbXBvcnQge1Rhc2t9IGZyb20gJy4uL21vZGVscy90YXNrJztcclxuaW1wb3J0IHtUYXNrU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvdGFzay1zZXJ2aWNlJztcclxuaW1wb3J0IHtUYXNrRmFjdG9yeX0gZnJvbSAnLi4vZmFjdG9yaWVzL3Rhc2stZmFjdG9yeSc7XHJcbmltcG9ydCB7VGFza0NvbXBvbmVudH0gZnJvbSAnLi4vY29tcG9uZW50cy90YXNrJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbdGFza3NdJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuLi90ZW1wbGF0ZXMvdGFza3MuaHRtbCcpXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVGFza3NDb21wb25lbnQge1xyXG4gICAgdGFza3M6IFRhc2tbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIF9yb3V0ZXI6IFJvdXRlcixcclxuICAgICAgICBwcml2YXRlIF9wYXJhbXM6IFJvdXRlU2VnbWVudCxcclxuICAgICAgICBwcml2YXRlIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGFza1NlcnZpY2UuZ2V0VGFza3MoX3BhcmFtcy5nZXRQYXJhbSgnYXQnKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSh0YXNrcyA9PiB0aGlzLnRhc2tzID0gdGFza3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvc2VSZWNvcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL3Rhc2snLCAnbmV3J10pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVRhc2sodGFzazogVGFzaykge1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZGVsZXRlVGFzayh0YXNrKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy90YXNrcy50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmltcG9ydCB7VGFza30gZnJvbSAnLi4vbW9kZWxzL3Rhc2snO1xyXG5pbXBvcnQge1Rhc2tGYWN0b3J5fSBmcm9tICcuLi9mYWN0b3JpZXMvdGFzay1mYWN0b3J5JztcclxuXHJcbmNvbnN0IFZJRVdfVVJMID0gJ3A/aWQ9dGFzay12aWV3JztcclxuY29uc3QgRk9STV9VUkwgPSAncD9pZD10YXNrLWZvcm0nO1xyXG5jb25zdCBIRUFERVIgPSB7XHJcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH0pXHJcbn07XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBUYXNrU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwXHJcbiAgICApIHt9XHJcblxyXG4gICAgZ2V0VGFza3MoYXQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KFZJRVdfVVJMICsgKGF0ID8gJyZhdD0nICsgYXQgOiAnJyksIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwID0+IFRhc2tGYWN0b3J5LmNyZWF0ZVRhc2tMaXN0KHJlc3AuanNvbigpLm9iamVjdHNbMF0ubGlzdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhc2tCeUlkKHRhc2tJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoRk9STV9VUkwgKyAnJmRvY2lkPScgKyB0YXNrSWQsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiBUYXNrRmFjdG9yeS5jcmVhdGVUYXNrKHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzFdKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVRhc2sodGFzazogVGFzaykge1xyXG4gICAgICAgIGxldCB1cmwgPSBGT1JNX1VSTCArICh0YXNrLmlkID8gJyZkb2NpZD0nICsgdGFzay5pZCA6ICcnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCB0YXNrLnNlcmlhbGl6ZSgpLCBIRUFERVIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVRhc2sodGFzazogVGFzaykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKFZJRVdfVVJMKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9zZXJ2aWNlcy90YXNrLXNlcnZpY2UudHNcbiAqKi8iLCJpbXBvcnQgeyBUYXNrIH0gZnJvbSAnLi4vbW9kZWxzL3Rhc2snO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGFzayhqc29uOiBhbnkpOiBUYXNrIHtcclxuICAgIGxldCByZXN1bHQ6IFRhc2sgPSBuZXcgVGFzaygpO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKCdmYWN0b3J5OmNyZWF0ZVRhc2snLCBqc29uKTtcclxuXHJcbiAgICByZXN1bHQuaWQgPSBqc29uLmlkO1xyXG4gICAgcmVzdWx0LmF1dGhvciA9IGpzb24uYXV0aG9yO1xyXG4gICAgcmVzdWx0LnJlZ0RhdGUgPSBqc29uLnJlZ0RhdGU7XHJcblxyXG4gICAgcmVzdWx0LnR5cGUgPSBqc29uLnR5cGU7XHJcbiAgICByZXN1bHQuc3RhdHVzID0ganNvbi5zdGF0dXM7XHJcbiAgICByZXN1bHQucHJpb3JpdHkgPSBqc29uLnByaW9yaXR5O1xyXG4gICAgcmVzdWx0LmJvZHkgPSBqc29uLmJvZHk7XHJcbiAgICByZXN1bHQuYXNzaWduZWUgPSBqc29uLmFzc2lnbmVlO1xyXG4gICAgcmVzdWx0LnN0YXJ0RGF0ZSA9IGpzb24uc3RhcnREYXRlO1xyXG4gICAgcmVzdWx0LmR1ZURhdGUgPSBqc29uLmR1ZURhdGU7XHJcbiAgICByZXN1bHQudGFncyA9IGpzb24udGFncztcclxuICAgIHJlc3VsdC5hdHRhY2htZW50cyA9IG51bGw7IC8vIGpzb24uYXR0YWNobWVudHM7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGFza0xpc3QoanNvbjogQXJyYXk8YW55Pik6IFRhc2tbXSB7XHJcbiAgICBsZXQgcmVzdWx0OiBUYXNrW10gPSBbXTtcclxuICAgIGpzb24uZm9yRWFjaCgodGFzaykgPT4gcmVzdWx0LnB1c2goY3JlYXRlVGFzayh0YXNrKSkpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhc2tGYWN0b3J5ID0ge1xyXG4gICAgY3JlYXRlVGFzazogY3JlYXRlVGFzayxcclxuICAgIGNyZWF0ZVRhc2tMaXN0OiBjcmVhdGVUYXNrTGlzdFxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2ZhY3Rvcmllcy90YXNrLWZhY3RvcnkudHNcbiAqKi8iLCJpbXBvcnQge0F0dGFjaG1lbnR9IGZyb20gJy4vYXR0YWNobWVudCc7XHJcbmltcG9ydCB7VGFnfSBmcm9tICcuL3RhZyc7XHJcbmltcG9ydCB7VGFza1R5cGV9IGZyb20gJy4vdGFzay10eXBlJztcclxuaW1wb3J0IHtVc2VyfSBmcm9tICcuL3VzZXInO1xyXG5pbXBvcnQge3NlcmlhbGl6ZU9ian0gZnJvbSAnLi4vdXRpbHMvb2JqLXV0aWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrUHJpb3JpdHlUeXBlID0ge1xyXG4gICAgVU5LTk9XTjogMCxcclxuICAgIEhFSUdIRVNUOiAxLFxyXG4gICAgSEVJR0hUOiAyLFxyXG4gICAgTUVESVVNOiAzLFxyXG4gICAgTk9STUFMOiA0XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgVGFza1N0YXR1c1R5cGUgPSB7XHJcbiAgICBVTktOT1dOOiAwLFxyXG4gICAgRFJBRlQ6IDQ1MyxcclxuICAgIFdBSVRJTkc6IDQ1NCxcclxuICAgIFBST0NFU1NFRDogNDU1LFxyXG4gICAgRklOSVNIRUQ6IDQ1NlxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhc2sge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGF1dGhvcjogVXNlcjtcclxuICAgIHJlZ0RhdGU6IERhdGU7XHJcblxyXG4gICAgcGFyZW50OiBUYXNrO1xyXG4gICAgY2hpbGRyZW46IFRhc2tbXTtcclxuXHJcbiAgICB0eXBlOiBUYXNrVHlwZTtcclxuICAgIHN0YXR1czogbnVtYmVyO1xyXG4gICAgcHJpb3JpdHk6IG51bWJlcjtcclxuICAgIGJvZHk6IHN0cmluZztcclxuICAgIGFzc2lnbmVlOiBVc2VyO1xyXG4gICAgc3RhcnREYXRlOiBEYXRlO1xyXG4gICAgZHVlRGF0ZTogRGF0ZTtcclxuICAgIHRhZ3M6IFRhZ1tdO1xyXG4gICAgYXR0YWNobWVudHM6IEF0dGFjaG1lbnRbXTtcclxuXHJcbiAgICBzZXJpYWxpemUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gc2VyaWFsaXplT2JqKHtcclxuICAgICAgICAgICAgYm9keTogdGhpcy5ib2R5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvbW9kZWxzL3Rhc2sudHNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICB7eyd0YXNrcyd9fVxcclxcbiAgICA8L2gxPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWFjdGlvbnNcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcImNvbXBvc2VSZWNvcmQoKVxcXCI+XFxyXFxuICAgICAgICAgICAge3snbmV3X3Rhc2snfX1cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjb250ZW50LWJvZHlcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ2aWV3XFxcIj5cXHJcXG4gICAgICAgIDxoZWFkZXIgY2xhc3M9XFxcImVudHJpZXMtaGVhZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZC13cmFwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBkYXRhLXRvZ2dsZT1cXFwiZG9jaWRcXFwiIGNsYXNzPVxcXCJhbGxcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWNhcHRpb25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J2JvZHknfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2hlYWRlcj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJpZXNcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XFxcIiF0YXNrc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgIHt7J2xvYWRpbmcnfX1cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyeS13cmFwXFxcIiAqbmdGb3I9XFxcImxldCB0YXNrIG9mIHRhc2tzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBkYXRhLWlkPVxcXCJ7e3Rhc2suaWR9fVxcXCIgY2xhc3M9XFxcImVudHJ5XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cXFwiZW50cnktc2VsZWN0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIG5hbWU9XFxcImRvY2lkXFxcIiB2YWx1ZT1cXFwie3t0YXNrLmlkfX1cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImVudHJ5LWxpbmtcXFwiIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFzaycsIHRhc2suaWRdXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyeS1maWVsZHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dGFzay5ib2R5fX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hcHAvdGVtcGxhdGVzL3Rhc2tzLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA2MDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCB7Q29tcG9uZW50LCBJbmplY3QsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7Um91dGVyLCBSb3V0ZVNlZ21lbnR9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7Rk9STV9QUk9WSURFUlMsIEZvcm1CdWlsZGVyLCBWYWxpZGF0b3JzLCBDb250cm9sR3JvdXAsIENvbnRyb2x9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcblxyXG5pbXBvcnQge1Rhc2t9IGZyb20gJy4uL21vZGVscy90YXNrJztcclxuaW1wb3J0IHtUYXNrU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvdGFzay1zZXJ2aWNlJztcclxuaW1wb3J0IHtUYXNrRmFjdG9yeX0gZnJvbSAnLi4vZmFjdG9yaWVzL3Rhc2stZmFjdG9yeSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnW3Rhc2tdJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuLi90ZW1wbGF0ZXMvdGFzay5odG1sJylcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIGxvYWRpbmc6IEJvb2xlYW4gPSB0cnVlO1xyXG4gICAgdGFzazogVGFzayA9IG5ldyBUYXNrKCk7XHJcbiAgICB0YXNrRm9ybTogQ29udHJvbEdyb3VwO1xyXG4gICAgYm9keTogQ29udHJvbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoXHJcbiAgICAgICAgcHJpdmF0ZSBfdGFza1NlcnZpY2U6IFRhc2tTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgX3JvdXRlcjogUm91dGVyLFxyXG4gICAgICAgIHByaXZhdGUgX3BhcmFtczogUm91dGVTZWdtZW50LFxyXG4gICAgICAgIHByaXZhdGUgX2Zvcm1CdWlsZGVyOiBGb3JtQnVpbGRlclxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gbmV3IENvbnRyb2woJycpO1xyXG5cclxuICAgICAgICB0aGlzLnRhc2tGb3JtID0gX2Zvcm1CdWlsZGVyLmdyb3VwKHtcclxuICAgICAgICAgICAgYm9keTogdGhpcy5ib2R5XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9wYXJhbXMuZ2V0UGFyYW0oJ2lkJykgIT09ICduZXcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Rhc2tTZXJ2aWNlLmdldFRhc2tCeUlkKHRoaXMuX3BhcmFtcy5nZXRQYXJhbSgnaWQnKSkuc3Vic2NyaWJlKHRhc2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gdGFzaztcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzYXZlVGFzaygpIHtcclxuICAgICAgICB0aGlzLl90YXNrU2VydmljZS5zYXZlVGFzayh0aGlzLnRhc2spLnN1YnNjcmliZShyZXNwID0+IHRoaXMuY2xvc2UoKSk7O1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy90YXNrcyddKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb21wb25lbnRzL3Rhc2sudHNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiAqbmdJZj1cXFwibG9hZGluZ1xcXCI+XFxyXFxuICAgIHt7J2xvYWRpbmcnfX1cXHJcXG48L2Rpdj5cXHJcXG48Zm9ybSBbbmdGb3JtTW9kZWxdPVxcXCJ0YXNrRm9ybVxcXCIgW2hpZGRlbl09XFxcImxvYWRpbmdcXFwiPlxcclxcbiAgICA8aGVhZGVyIGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4tYmFja1xcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2hldnJvbi1sZWZ0XFxcIj48L2k+XFxyXFxuICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyd0YXNrJ319XFxyXFxuICAgICAgICA8L2gxPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1hY3Rpb25zXFxcIj5cXHJcXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLXByaW1hcnlcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgW2Rpc2FibGVkXT1cXFwiIXRhc2tGb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJzYXZlVGFzaygpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0YXNrX3R5cGUnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwidGFza1R5cGVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snc3RhdHVzJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XFxcInN0YXR1c1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydwcmlvcml0eSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJwcmlvcml0eVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydib2R5J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XFxcInNwYW43XFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay5ib2R5XFxcIiBuZ0NvbnRyb2w9XFxcImJvZHlcXFwiPjwvdGV4dGFyZWE+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2Fzc2lnbmVlX3VzZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwiYXNzaWduZWVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snc3RhcnRfZGF0ZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImRhdGVcXFwiIG5hbWU9XFxcInN0YXJ0RGF0ZVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snZHVlX2RhdGUnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJkYXRlXFxcIiBuYW1lPVxcXCJkdWVEYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0YWdzJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XFxcInRhZ3NcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzXFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9mb3JtPlxcclxcblwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2FwcC90ZW1wbGF0ZXMvdGFzay5odG1sXG4gKiogbW9kdWxlIGlkID0gNjAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQge0NvbXBvbmVudH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQge1VzZXJ9IGZyb20gJy4uL21vZGVscy91c2VyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbdXNlci1wcm9maWxlXScsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vdGVtcGxhdGVzL3VzZXItcHJvZmlsZS5odG1sJylcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyUHJvZmlsZUNvbXBvbmVudCB7XHJcbiAgICB1c2VyOiBVc2VyO1xyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb21wb25lbnRzL3VzZXItcHJvZmlsZS50c1xuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8Zm9ybSBuYW1lPVxcXCJ7QGVudGl0eX1cXFwiIGNsYXNzPVxcXCJmb3JtIGZvcm0tdXNlcnByb2ZpbGVcXFwiIGFjdGlvbj1cXFwiXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCI+XFxyXFxuICAgIDxoZWFkZXIgY2xhc3M9XFxcImNvbnRlbnQtaGVhZGVyXFxcIj5cXHJcXG4gICAgICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiY29uY2F0KC8vY2FwdGlvbnMvZW1wbG95ZWUvQGNhcHRpb24sICcgLSAnLCBmaWVsZHMvbmFtZSlcXFwiLz5cXHJcXG4gICAgICAgIDwvaDE+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWFjdGlvbnNcXFwiPlxcclxcbiAgICAgICAgICAgIDx4c2w6YXBwbHktdGVtcGxhdGVzIHNlbGVjdD1cXFwiLy9hY3Rpb25iYXJcXFwiIC8+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9oZWFkZXI+XFxyXFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJjb250ZW50LWJvZHlcXFwiPlxcclxcbiAgICAgICAgPHVsIGNsYXNzPVxcXCJuYXYgbmF2LXRhYnNcXFwiIHJvbGU9XFxcInRhYmxpc3RcXFwiPlxcclxcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiYWN0aXZlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI3RhYnMtMVxcXCIgcm9sZT1cXFwidGFiXFxcIiBkYXRhLXRvZ2dsZT1cXFwidGFiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL3Byb3BlcnRpZXMvQGNhcHRpb25cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI3RhYnMtM1xcXCIgcm9sZT1cXFwidGFiXFxcIiBkYXRhLXRvZ2dsZT1cXFwidGFiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL2ludGVyZmFjZS9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgIDwvbGk+XFxyXFxuICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwidGFiLWNvbnRlbnRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgcm9sZT1cXFwidGFicGFuZWxcXFwiIGNsYXNzPVxcXCJ0YWItcGFuZSBhY3RpdmVcXFwiIGlkPVxcXCJ0YWJzLTFcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8IS0tPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldCBmaWVsZHNldC11c2VyLWF2YXRhclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInVzZXItYXZhdGFyXFxcIiBzcmM9XFxcImltZy9hdmF0YXIucG5nXFxcIi8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+LS0+XFxyXFxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXQgZmllbGRzZXQtdXNlci1maWVsZHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCIvL2NhcHRpb25zL3VzZXJfbmFtZS9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiZmllbGRzL25hbWVcXFwiLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvbG9naW5fbmFtZS9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBuYW1lPVxcXCJsb2dpblxcXCIgdmFsdWU9XFxcIntmaWVsZHMvbG9naW59XFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9wYXNzd29yZC9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJwYXNzd29yZFxcXCIgbmFtZT1cXFwicHdkXFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9wYXNzd29yZF9jb25maXJtL0BjYXB0aW9uXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInBhc3N3b3JkXFxcIiBuYW1lPVxcXCJwd2RfY29uZmlybVxcXCIgY2xhc3M9XFxcInNwYW4zXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvZW1haWwvQGNhcHRpb25cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgbmFtZT1cXFwiZW1haWxcXFwiIHZhbHVlPVxcXCJ7ZmllbGRzL2VtYWlsfVxcXCIgY2xhc3M9XFxcInNwYW4zXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvb3JnX25hbWUvQGNhcHRpb25cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiaW5wdXQtcGxhY2Vob2xkZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcImZpZWxkcy9vcmdhbml6YXRpb25cXFwiLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvZGVwYXJ0bWVudC9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiZmllbGRzL2RlcGFydG1lbnRcXFwiLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvcG9zaXRpb24vQGNhcHRpb25cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiaW5wdXQtcGxhY2Vob2xkZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcImZpZWxkcy9wb3NpdGlvblxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9yb2xlcy9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwiaW5wdXQtcGxhY2Vob2xkZXIgbGlzdC1zdHlsZS1ub25lXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6Zm9yLWVhY2ggc2VsZWN0PVxcXCJmaWVsZHMvcm9sZXMvZW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi5cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmZvci1lYWNoPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiByb2xlPVxcXCJ0YWJwYW5lbFxcXCIgY2xhc3M9XFxcInRhYi1wYW5lXFxcIiBpZD1cXFwidGFicy0zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIi8vY2FwdGlvbnMvbGltaXRfdmlldy9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwicGFnZXNpemVcXFwiIGNsYXNzPVxcXCJuYXRpdmUgc3BhbjJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICcxMCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjIwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmlmIHRlc3Q9XFxcIi8vcGFnZXNpemUgPSAnMjAnXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3hzbDppZj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIzMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDppZiB0ZXN0PVxcXCIvL3BhZ2VzaXplID0gJzMwJ1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6YXR0cmlidXRlIG5hbWU9XFxcInNlbGVjdGVkXFxcIiBzZWxlY3Q9XFxcIidzZWxlY3RlZCdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMzBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiNTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICc1MCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9pbnRlcmZhY2VfbGFuZy9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFyaWFibGUgbmFtZT1cXFwiY3VycmVudGxhbmdcXFwiIHNlbGVjdD1cXFwiL3JlcXVlc3QvQGxhbmdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwibGFuZ1xcXCIgY2xhc3M9XFxcIm5hdGl2ZSBzcGFuMlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmZvci1lYWNoIHNlbGVjdD1cXFwiLy9xdWVyeVtAZW50aXR5ID0gJ2xhbmd1YWdlJ10vZW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcInt2aWV3Y29udGVudC9sYW5nL0BpZH1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmlmIHRlc3Q9XFxcInZpZXdjb250ZW50L2xhbmcvQGlkID0gJGN1cnJlbnRsYW5nXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6YXR0cmlidXRlIG5hbWU9XFxcInNlbGVjdGVkXFxcIiBzZWxlY3Q9XFxcIidzZWxlY3RlZCdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwidmlld2NvbnRlbnQvbGFuZ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmZvci1lYWNoPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+PC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiIGRhdGEtdG9nZ2xlLXRoZW1lPVxcXCJ0aGVtZTFcXFwiIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLy9jYXB0aW9ucy9jaGFuZ2Vfc2tpbi9AY2FwdGlvblxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9zZWN0aW9uPlxcclxcbjwvZm9ybT5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hcHAvdGVtcGxhdGVzL3VzZXItcHJvZmlsZS5odG1sXG4gKiogbW9kdWxlIGlkID0gNjA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQge0NvbXBvbmVudH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnW2xvZ2luXScsXHJcbiAgICB0ZW1wbGF0ZTogJ2xvZ2luJ1xyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIExvZ2luQ29tcG9uZW50IHtcclxuICAgIFxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2NvbXBvbmVudHMvbG9naW4udHNcbiAqKi8iLCJleHBvcnQgY2xhc3MgVXNlciB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbG9naW46IHN0cmluZztcclxuICAgIGVtYWlsOiBzdHJpbmc7XHJcbiAgICB1c2VyTmFtZTogc3RyaW5nID0gJ0Bhbm9ueW1vdXMnO1xyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL21vZGVscy91c2VyLnRzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImxheW91dFxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtb3ZlcmxheVxcXCIgKG1vdXNlZG93bik9XFxcImhpZGVOYXYoKVxcXCIgKHRvdWNoc3RhcnQpPVxcXCJoaWRlTmF2KClcXFwiPjwvZGl2PlxcclxcbiAgICA8aGVhZGVyIGNsYXNzPVxcXCJoZWFkZXIgbmF2YmFyIG5hdmJhci1maXhlZC10b3BcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGFpbmVyXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJuYXZiYXItaGVhZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLXNpZGUtbmF2LXRvZ2dsZVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJ0b2dnbGVOYXYoKVxcXCI+PC9idXR0b24+XFxyXFxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImJyYW5kLWxvZ29cXFwiIGFsdD1cXFwibG9nb1xcXCIgc3JjPVxcXCJpbWcvbG9nby5wbmdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJicmFuZC10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7e0hFQURFUl9USVRMRX19XFxyXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8bmF2IGNsYXNzPVxcXCJuYXZiYXItbmF2IG5hdmJhci1yaWdodFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwibmF2IG5hdmJhci1yaWdodFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XFxcImRyb3Bkb3duXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwiZHJvcGRvd24tdG9nZ2xlXFxcIiBkYXRhLXRvZ2dsZT1cXFwiZHJvcGRvd25cXFwiIChjbGljayk9XFxcInByZXZlbnREZWZhdWx0KCRldmVudClcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtdXNlclxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnUgcmlnaHRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwidXNlci1wcm9maWxlXFxcIiBbcm91dGVyTGlua109XFxcIlsndXNlci1wcm9maWxlJ11cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7bG9nZ2VkVXNlci51c2VyTmFtZX19XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiZGl2aWRlclxcXCI+PC9saT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImxvZ291dFxcXCIgaHJlZj1cXFwiI2xvZ291dFxcXCIgKGNsaWNrKT1cXFwibG9nb3V0KCRldmVudClcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ291dFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgICAgICAgICA8Zm9ybSBjbGFzcz1cXFwibmF2YmFyLWZvcm0gbmF2YmFyLXNlYXJjaFxcXCIgbmFtZT1cXFwiZnQtc2VhcmNoXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIG5hbWU9XFxcImlkXFxcIiB2YWx1ZT1cXFwic2VhcmNoXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInNlYXJjaFxcXCIgY2xhc3M9XFxcInFcXFwiIG5hbWU9XFxcImtleXdvcmRcXFwiIHZhbHVlPVxcXCJ7e3NlYXJjaF9rZXl3b3JkfX1cXFwiIHBsYWNlaG9sZGVyPXt7c2VhcmNoX3BsYWNlaG9sZGVyfX0gcmVxdWlyZWQ9XFxcInJlcXVpcmVkXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwicmVzZXRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS10aW1lc1xcXCI+PC9pPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwic3VibWl0XFxcIiB2YWx1ZT1cXFwic2VhcmNoXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Zvcm0+XFxyXFxuICAgICAgICAgICAgPC9uYXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9oZWFkZXI+XFxyXFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJjb250YWluZXJcXFwiPlxcclxcbiAgICAgICAgPGFzaWRlIG5hdiBjbGFzcz1cXFwiYXNpZGUgc2lkZS1uYXZcXFwiPjwvYXNpZGU+XFxyXFxuICAgICAgICA8bWFpbiBjbGFzcz1cXFwiY29udGVudFxcXCI+XFxyXFxuICAgICAgICAgICAgPHJvdXRlci1vdXRsZXQ+PC9yb3V0ZXItb3V0bGV0PlxcclxcbiAgICAgICAgPC9tYWluPlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9kaXY+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL3RlbXBsYXRlcy9hcHAuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDYwOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==