webpackJsonp([0],[function(module,exports,__webpack_require__){"use strict";var platform_browser_dynamic_1=__webpack_require__(1),core_1=__webpack_require__(7),http_1=__webpack_require__(281),router_1=__webpack_require__(302),common_1=__webpack_require__(182);__webpack_require__(324);var app_1=__webpack_require__(583),nb_notify_1=__webpack_require__(587),app_service_1=__webpack_require__(584),task_service_1=__webpack_require__(598),project_service_1=__webpack_require__(591),reference_service_1=__webpack_require__(585),staff_service_1=__webpack_require__(586);core_1.enableProdMode(),platform_browser_dynamic_1.bootstrap(app_1.App,[http_1.HTTP_PROVIDERS,router_1.ROUTER_DIRECTIVES,router_1.ROUTER_PROVIDERS,core_1.provide(core_1.PLATFORM_DIRECTIVES,{useValue:router_1.ROUTER_DIRECTIVES,multi:!0}),core_1.provide(common_1.LocationStrategy,{useClass:common_1.HashLocationStrategy}),common_1.FORM_PROVIDERS,nb_notify_1.NBNotifyComponent,app_service_1.AppService,task_service_1.TaskService,project_service_1.ProjectService,reference_service_1.ReferenceService,staff_service_1.StaffService])["catch"](function(err){return console.error(err)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var Subject_1=__webpack_require__(40);exports.Subject=Subject_1.Subject;var Observable_1=__webpack_require__(41);exports.Observable=Observable_1.Observable,__webpack_require__(325),__webpack_require__(329),__webpack_require__(332),__webpack_require__(343),__webpack_require__(347),__webpack_require__(350),__webpack_require__(352),__webpack_require__(355),__webpack_require__(362),__webpack_require__(365),__webpack_require__(368),__webpack_require__(370),__webpack_require__(372),__webpack_require__(381),__webpack_require__(384),__webpack_require__(386),__webpack_require__(390),__webpack_require__(392),__webpack_require__(395),__webpack_require__(398),__webpack_require__(402),__webpack_require__(405),__webpack_require__(407),__webpack_require__(409),__webpack_require__(411),__webpack_require__(413),__webpack_require__(415),__webpack_require__(422),__webpack_require__(424),__webpack_require__(426),__webpack_require__(427),__webpack_require__(428),__webpack_require__(430),__webpack_require__(433),__webpack_require__(436),__webpack_require__(438),__webpack_require__(440),__webpack_require__(442),__webpack_require__(444),__webpack_require__(446),__webpack_require__(448),__webpack_require__(450),__webpack_require__(452),__webpack_require__(454),__webpack_require__(456),__webpack_require__(458),__webpack_require__(460),__webpack_require__(463),__webpack_require__(468),__webpack_require__(470),__webpack_require__(472),__webpack_require__(474),__webpack_require__(476),__webpack_require__(478),__webpack_require__(480),__webpack_require__(482),__webpack_require__(484),__webpack_require__(486),__webpack_require__(487),__webpack_require__(488),__webpack_require__(489),__webpack_require__(490),__webpack_require__(491),__webpack_require__(492),__webpack_require__(495),__webpack_require__(497),__webpack_require__(499),__webpack_require__(502),__webpack_require__(503),__webpack_require__(505),__webpack_require__(506),__webpack_require__(508),__webpack_require__(510),__webpack_require__(512),__webpack_require__(514),__webpack_require__(516),__webpack_require__(518),__webpack_require__(520),__webpack_require__(522),__webpack_require__(524),__webpack_require__(526),__webpack_require__(528),__webpack_require__(530),__webpack_require__(532),__webpack_require__(541),__webpack_require__(543),__webpack_require__(545),__webpack_require__(547),__webpack_require__(550),__webpack_require__(552),__webpack_require__(554),__webpack_require__(556),__webpack_require__(558),__webpack_require__(560),__webpack_require__(562),__webpack_require__(564),__webpack_require__(566),__webpack_require__(567),__webpack_require__(569),__webpack_require__(571),__webpack_require__(573),__webpack_require__(575),__webpack_require__(577),__webpack_require__(579),__webpack_require__(580);var Operator_1=__webpack_require__(582);exports.Operator=Operator_1.Operator;var Subscription_1=__webpack_require__(47);exports.Subscription=Subscription_1.Subscription;var Subscriber_1=__webpack_require__(45);exports.Subscriber=Subscriber_1.Subscriber;var AsyncSubject_1=__webpack_require__(328);exports.AsyncSubject=AsyncSubject_1.AsyncSubject;var ReplaySubject_1=__webpack_require__(418);exports.ReplaySubject=ReplaySubject_1.ReplaySubject;var BehaviorSubject_1=__webpack_require__(501);exports.BehaviorSubject=BehaviorSubject_1.BehaviorSubject;var ConnectableObservable_1=__webpack_require__(421);exports.ConnectableObservable=ConnectableObservable_1.ConnectableObservable;var Notification_1=__webpack_require__(361);exports.Notification=Notification_1.Notification;var EmptyError_1=__webpack_require__(462);exports.EmptyError=EmptyError_1.EmptyError;var ArgumentOutOfRangeError_1=__webpack_require__(549);exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var ObjectUnsubscribedError_1=__webpack_require__(59);exports.ObjectUnsubscribedError=ObjectUnsubscribedError_1.ObjectUnsubscribedError;var UnsubscriptionError_1=__webpack_require__(52);exports.UnsubscriptionError=UnsubscriptionError_1.UnsubscriptionError;var asap_1=__webpack_require__(535),async_1=__webpack_require__(376),queue_1=__webpack_require__(419),rxSubscriber_1=__webpack_require__(53),iterator_1=__webpack_require__(341),observable=__webpack_require__(55),Scheduler={asap:asap_1.asap,async:async_1.async,queue:queue_1.queue};exports.Scheduler=Scheduler;var Symbol={rxSubscriber:rxSubscriber_1.$$rxSubscriber,observable:observable,iterator:iterator_1.$$iterator};exports.Symbol=Symbol},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bindCallback_1=__webpack_require__(326);Observable_1.Observable.bindCallback=bindCallback_1.bindCallback},function(module,exports,__webpack_require__){"use strict";var BoundCallbackObservable_1=__webpack_require__(327);exports.bindCallback=BoundCallbackObservable_1.BoundCallbackObservable.create},function(module,exports,__webpack_require__){"use strict";function dispatch(state){var self=this,source=state.source,subscriber=state.subscriber,callbackFunc=source.callbackFunc,args=source.args,scheduler=source.scheduler,subject=source.subject;if(!subject){subject=source.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject;if(selector){var result_2=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_2===errorObject_1.errorObject?self.add(scheduler.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:subject})):self.add(scheduler.schedule(dispatchNext,0,{value:result_2,subject:subject}))}else{var value=1===innerArgs.length?innerArgs[0]:innerArgs;self.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};handler.source=source;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}self.add(subject.subscribe(subscriber))}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),AsyncSubject_1=__webpack_require__(328),BoundCallbackObservable=function(_super){function BoundCallbackObservable(callbackFunc,selector,args,scheduler){_super.call(this),this.callbackFunc=callbackFunc,this.selector=selector,this.args=args,this.scheduler=scheduler}return __extends(BoundCallbackObservable,_super),BoundCallbackObservable.create=function(func,selector,scheduler){return void 0===selector&&(selector=void 0),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return new BoundCallbackObservable(func,selector,args,scheduler)}},BoundCallbackObservable.prototype._subscribe=function(subscriber){var callbackFunc=this.callbackFunc,args=this.args,scheduler=this.scheduler,subject=this.subject;if(scheduler)return scheduler.schedule(dispatch,0,{source:this,subscriber:subscriber});if(!subject){subject=this.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject;if(selector){var result_1=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_1===errorObject_1.errorObject?subject.error(errorObject_1.errorObject.e):(subject.next(result_1),subject.complete())}else subject.next(1===innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};handler.source=this;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}return subject.subscribe(subscriber)},BoundCallbackObservable}(Observable_1.Observable);exports.BoundCallbackObservable=BoundCallbackObservable},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),AsyncSubject=function(_super){function AsyncSubject(){_super.apply(this,arguments),this.value=null,this.hasNext=!1}return __extends(AsyncSubject,_super),AsyncSubject.prototype._subscribe=function(subscriber){return this.hasCompleted&&this.hasNext&&subscriber.next(this.value),_super.prototype._subscribe.call(this,subscriber)},AsyncSubject.prototype._next=function(value){this.value=value,this.hasNext=!0},AsyncSubject.prototype._complete=function(){var index=-1,observers=this.observers,len=observers.length;if(this.isUnsubscribed=!0,this.hasNext)for(;++index<len;){var o=observers[index];o.next(this.value),o.complete()}else for(;++index<len;)observers[index].complete();this.isUnsubscribed=!1,this.unsubscribe()},AsyncSubject}(Subject_1.Subject);exports.AsyncSubject=AsyncSubject},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bindNodeCallback_1=__webpack_require__(330);Observable_1.Observable.bindNodeCallback=bindNodeCallback_1.bindNodeCallback},function(module,exports,__webpack_require__){"use strict";var BoundNodeCallbackObservable_1=__webpack_require__(331);exports.bindNodeCallback=BoundNodeCallbackObservable_1.BoundNodeCallbackObservable.create},function(module,exports,__webpack_require__){"use strict";function dispatch(state){var self=this,source=state.source,subscriber=state.subscriber,callbackFunc=source.callbackFunc,args=source.args,scheduler=source.scheduler,subject=source.subject;if(!subject){subject=source.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject,err=innerArgs.shift();if(err)subject.error(err);else if(selector){var result_2=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_2===errorObject_1.errorObject?self.add(scheduler.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:subject})):self.add(scheduler.schedule(dispatchNext,0,{value:result_2,subject:subject}))}else{var value=1===innerArgs.length?innerArgs[0]:innerArgs;self.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};handler.source=source;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}self.add(subject.subscribe(subscriber))}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),AsyncSubject_1=__webpack_require__(328),BoundNodeCallbackObservable=function(_super){function BoundNodeCallbackObservable(callbackFunc,selector,args,scheduler){_super.call(this),this.callbackFunc=callbackFunc,this.selector=selector,this.args=args,this.scheduler=scheduler}return __extends(BoundNodeCallbackObservable,_super),BoundNodeCallbackObservable.create=function(func,selector,scheduler){return void 0===selector&&(selector=void 0),function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];return new BoundNodeCallbackObservable(func,selector,args,scheduler)}},BoundNodeCallbackObservable.prototype._subscribe=function(subscriber){var callbackFunc=this.callbackFunc,args=this.args,scheduler=this.scheduler,subject=this.subject;if(scheduler)return scheduler.schedule(dispatch,0,{source:this,subscriber:subscriber});if(!subject){subject=this.subject=new AsyncSubject_1.AsyncSubject;var handler=function handlerFn(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i-0]=arguments[_i];var source=handlerFn.source,selector=source.selector,subject=source.subject,err=innerArgs.shift();if(err)subject.error(err);else if(selector){var result_1=tryCatch_1.tryCatch(selector).apply(this,innerArgs);result_1===errorObject_1.errorObject?subject.error(errorObject_1.errorObject.e):(subject.next(result_1),subject.complete())}else subject.next(1===innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};handler.source=this;var result=tryCatch_1.tryCatch(callbackFunc).apply(this,args.concat(handler));result===errorObject_1.errorObject&&subject.error(errorObject_1.errorObject.e)}return subject.subscribe(subscriber)},BoundNodeCallbackObservable}(Observable_1.Observable);exports.BoundNodeCallbackObservable=BoundNodeCallbackObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),combineLatest_1=__webpack_require__(333);Observable_1.Observable.combineLatest=combineLatest_1.combineLatestStatic},function(module,exports,__webpack_require__){"use strict";function combineLatest(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=null;return"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),observables.unshift(this),new ArrayObservable_1.ArrayObservable(observables).lift(new CombineLatestOperator(project))}function combineLatestStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=null,scheduler=null;return isScheduler_1.isScheduler(observables[observables.length-1])&&(scheduler=observables.pop()),"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new CombineLatestOperator(project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArrayObservable_1=__webpack_require__(334),isArray_1=__webpack_require__(48),isScheduler_1=__webpack_require__(337),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.combineLatest=combineLatest,exports.combineLatestStatic=combineLatestStatic;var CombineLatestOperator=function(){function CombineLatestOperator(project){this.project=project}return CombineLatestOperator.prototype.call=function(subscriber,source){return source._subscribe(new CombineLatestSubscriber(subscriber,this.project))},CombineLatestOperator}();exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(_super){function CombineLatestSubscriber(destination,project){_super.call(this,destination),this.project=project,this.active=0,this.values=[],this.observables=[],this.toRespond=[]}return __extends(CombineLatestSubscriber,_super),CombineLatestSubscriber.prototype._next=function(observable){var toRespond=this.toRespond;toRespond.push(toRespond.length),this.observables.push(observable)},CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len;for(var i=0;len>i;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i))}}},CombineLatestSubscriber.prototype.notifyComplete=function(unused){0===(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var values=this.values;values[outerIndex]=innerValue;var toRespond=this.toRespond;if(toRespond.length>0){var found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}0===toRespond.length&&(this.project?this._tryProject(values):this.destination.next(values))},CombineLatestSubscriber.prototype._tryProject=function(values){var result;try{result=this.project.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)},CombineLatestSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.CombineLatestSubscriber=CombineLatestSubscriber},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ScalarObservable_1=__webpack_require__(335),EmptyObservable_1=__webpack_require__(336),isScheduler_1=__webpack_require__(337),ArrayObservable=function(_super){function ArrayObservable(array,scheduler){_super.call(this),this.array=array,this.scheduler=scheduler,scheduler||1!==array.length||(this._isScalar=!0,this.value=array[0])}return __extends(ArrayObservable,_super),ArrayObservable.create=function(array,scheduler){return new ArrayObservable(array,scheduler)},ArrayObservable.of=function(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i-0]=arguments[_i];var scheduler=array[array.length-1];isScheduler_1.isScheduler(scheduler)?array.pop():scheduler=null;var len=array.length;return len>1?new ArrayObservable(array,scheduler):1===len?new ScalarObservable_1.ScalarObservable(array[0],scheduler):new EmptyObservable_1.EmptyObservable(scheduler)},ArrayObservable.dispatch=function(state){var array=state.array,index=state.index,count=state.count,subscriber=state.subscriber;return index>=count?void subscriber.complete():(subscriber.next(array[index]),void(subscriber.isUnsubscribed||(state.index=index+1,this.schedule(state))))},ArrayObservable.prototype._subscribe=function(subscriber){var index=0,array=this.array,count=array.length,scheduler=this.scheduler;if(scheduler)return scheduler.schedule(ArrayObservable.dispatch,0,{array:array,index:index,count:count,subscriber:subscriber});for(var i=0;count>i&&!subscriber.isUnsubscribed;i++)subscriber.next(array[i]);subscriber.complete()},ArrayObservable}(Observable_1.Observable);exports.ArrayObservable=ArrayObservable},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ScalarObservable=function(_super){function ScalarObservable(value,scheduler){_super.call(this),this.value=value,this.scheduler=scheduler,this._isScalar=!0}return __extends(ScalarObservable,_super),ScalarObservable.create=function(value,scheduler){return new ScalarObservable(value,scheduler)},ScalarObservable.dispatch=function(state){var done=state.done,value=state.value,subscriber=state.subscriber;return done?void subscriber.complete():(subscriber.next(value),void(subscriber.isUnsubscribed||(state.done=!0,this.schedule(state))))},ScalarObservable.prototype._subscribe=function(subscriber){var value=this.value,scheduler=this.scheduler;return scheduler?scheduler.schedule(ScalarObservable.dispatch,0,{done:!1,value:value,subscriber:subscriber}):(subscriber.next(value),void(subscriber.isUnsubscribed||subscriber.complete()))},ScalarObservable}(Observable_1.Observable);exports.ScalarObservable=ScalarObservable},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),EmptyObservable=function(_super){function EmptyObservable(scheduler){_super.call(this),this.scheduler=scheduler}return __extends(EmptyObservable,_super),EmptyObservable.create=function(scheduler){return new EmptyObservable(scheduler)},EmptyObservable.dispatch=function(arg){var subscriber=arg.subscriber;subscriber.complete()},EmptyObservable.prototype._subscribe=function(subscriber){var scheduler=this.scheduler;return scheduler?scheduler.schedule(EmptyObservable.dispatch,0,{subscriber:subscriber}):void subscriber.complete()},EmptyObservable}(Observable_1.Observable);exports.EmptyObservable=EmptyObservable},function(module,exports){"use strict";function isScheduler(value){return value&&"function"==typeof value.schedule}exports.isScheduler=isScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),OuterSubscriber=function(_super){function OuterSubscriber(){_super.apply(this,arguments)}return __extends(OuterSubscriber,_super),OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},OuterSubscriber.prototype.notifyError=function(error,innerSub){this.destination.error(error)},OuterSubscriber.prototype.notifyComplete=function(innerSub){this.destination.complete()},OuterSubscriber}(Subscriber_1.Subscriber);exports.OuterSubscriber=OuterSubscriber},function(module,exports,__webpack_require__){"use strict";function subscribeToResult(outerSubscriber,result,outerValue,outerIndex){var destination=new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex);if(!destination.isUnsubscribed){if(result instanceof Observable_1.Observable)return result._isScalar?(destination.next(result.value),void destination.complete()):result.subscribe(destination);if(isArray_1.isArray(result)){for(var i=0,len=result.length;len>i&&!destination.isUnsubscribed;i++)destination.next(result[i]);destination.isUnsubscribed||destination.complete()}else{if(isPromise_1.isPromise(result))return result.then(function(value){destination.isUnsubscribed||(destination.next(value),destination.complete())},function(err){return destination.error(err)}).then(null,function(err){root_1.root.setTimeout(function(){throw err})}),destination;if("function"==typeof result[iterator_1.$$iterator]){for(var _i=0,_a=result;_i<_a.length;_i++){var item=_a[_i];if(destination.next(item),destination.isUnsubscribed)break}destination.isUnsubscribed||destination.complete()}else if("function"==typeof result[$$observable]){var obs=result[$$observable]();if("function"==typeof obs.subscribe)return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex));destination.error("invalid observable")}else destination.error(new TypeError("unknown type returned"))}}}var root_1=__webpack_require__(42),isArray_1=__webpack_require__(48),isPromise_1=__webpack_require__(340),Observable_1=__webpack_require__(41),iterator_1=__webpack_require__(341),InnerSubscriber_1=__webpack_require__(342),$$observable=__webpack_require__(55);exports.subscribeToResult=subscribeToResult},function(module,exports){"use strict";function isPromise(value){return value&&"function"!=typeof value.subscribe&&"function"==typeof value.then}exports.isPromise=isPromise},function(module,exports,__webpack_require__){"use strict";var root_1=__webpack_require__(42),Symbol=root_1.root.Symbol;if("function"==typeof Symbol)Symbol.iterator?exports.$$iterator=Symbol.iterator:"function"==typeof Symbol["for"]&&(exports.$$iterator=Symbol["for"]("iterator"));else if(root_1.root.Set&&"function"==typeof(new root_1.root.Set)["@@iterator"])exports.$$iterator="@@iterator";else if(root_1.root.Map)for(var keys=Object.getOwnPropertyNames(root_1.root.Map.prototype),i=0;i<keys.length;++i){var key=keys[i];if("entries"!==key&&"size"!==key&&root_1.root.Map.prototype[key]===root_1.root.Map.prototype.entries){exports.$$iterator=key;break}}else exports.$$iterator="@@iterator"},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),InnerSubscriber=function(_super){function InnerSubscriber(parent,outerValue,outerIndex){_super.call(this),this.parent=parent,this.outerValue=outerValue,this.outerIndex=outerIndex,this.index=0}return __extends(InnerSubscriber,_super),InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(Subscriber_1.Subscriber);exports.InnerSubscriber=InnerSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concat_1=__webpack_require__(344);Observable_1.Observable.concat=concat_1.concat},function(module,exports,__webpack_require__){"use strict";var concat_1=__webpack_require__(345);exports.concat=concat_1.concatStatic},function(module,exports,__webpack_require__){"use strict";function concat(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return concatStatic.apply(void 0,[this].concat(observables))}function concatStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var scheduler=null,args=observables;return isScheduler_1.isScheduler(args[observables.length-1])&&(scheduler=args.pop()),new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new mergeAll_1.MergeAllOperator(1))}var isScheduler_1=__webpack_require__(337),ArrayObservable_1=__webpack_require__(334),mergeAll_1=__webpack_require__(346);exports.concat=concat,exports.concatStatic=concatStatic},function(module,exports,__webpack_require__){"use strict";function mergeAll(concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.lift(new MergeAllOperator(concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.mergeAll=mergeAll;var MergeAllOperator=function(){function MergeAllOperator(concurrent){this.concurrent=concurrent}return MergeAllOperator.prototype.call=function(observer,source){return source._subscribe(new MergeAllSubscriber(observer,this.concurrent))},MergeAllOperator}();exports.MergeAllOperator=MergeAllOperator;var MergeAllSubscriber=function(_super){function MergeAllSubscriber(destination,concurrent){_super.call(this,destination),this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0}return __extends(MergeAllSubscriber,_super),MergeAllSubscriber.prototype._next=function(observable){this.active<this.concurrent?(this.active++,this.add(subscribeToResult_1.subscribeToResult(this,observable))):this.buffer.push(observable)},MergeAllSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeAllSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeAllSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeAllSubscriber=MergeAllSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),defer_1=__webpack_require__(348);Observable_1.Observable.defer=defer_1.defer},function(module,exports,__webpack_require__){"use strict";var DeferObservable_1=__webpack_require__(349);exports.defer=DeferObservable_1.DeferObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338),DeferObservable=function(_super){function DeferObservable(observableFactory){_super.call(this),this.observableFactory=observableFactory}return __extends(DeferObservable,_super),DeferObservable.create=function(observableFactory){return new DeferObservable(observableFactory)},DeferObservable.prototype._subscribe=function(subscriber){return new DeferSubscriber(subscriber,this.observableFactory)},DeferObservable}(Observable_1.Observable);exports.DeferObservable=DeferObservable;var DeferSubscriber=function(_super){function DeferSubscriber(destination,factory){_super.call(this,destination),this.factory=factory,this.tryDefer()}return __extends(DeferSubscriber,_super),DeferSubscriber.prototype.tryDefer=function(){try{this._callFactory()}catch(err){this._error(err)}},DeferSubscriber.prototype._callFactory=function(){var result=this.factory();result&&this.add(subscribeToResult_1.subscribeToResult(this,result))},DeferSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),empty_1=__webpack_require__(351);Observable_1.Observable.empty=empty_1.empty},function(module,exports,__webpack_require__){"use strict";var EmptyObservable_1=__webpack_require__(336);exports.empty=EmptyObservable_1.EmptyObservable.create},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),forkJoin_1=__webpack_require__(353);Observable_1.Observable.forkJoin=forkJoin_1.forkJoin},function(module,exports,__webpack_require__){"use strict";var ForkJoinObservable_1=__webpack_require__(354);exports.forkJoin=ForkJoinObservable_1.ForkJoinObservable.create},function(module,exports,__webpack_require__){
"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),EmptyObservable_1=__webpack_require__(336),isArray_1=__webpack_require__(48),subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338),ForkJoinObservable=function(_super){function ForkJoinObservable(sources,resultSelector){_super.call(this),this.sources=sources,this.resultSelector=resultSelector}return __extends(ForkJoinObservable,_super),ForkJoinObservable.create=function(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i-0]=arguments[_i];if(null===sources||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var resultSelector=null;return"function"==typeof sources[sources.length-1]&&(resultSelector=sources.pop()),1===sources.length&&isArray_1.isArray(sources[0])&&(sources=sources[0]),0===sources.length?new EmptyObservable_1.EmptyObservable:new ForkJoinObservable(sources,resultSelector)},ForkJoinObservable.prototype._subscribe=function(subscriber){return new ForkJoinSubscriber(subscriber,this.sources,this.resultSelector)},ForkJoinObservable}(Observable_1.Observable);exports.ForkJoinObservable=ForkJoinObservable;var ForkJoinSubscriber=function(_super){function ForkJoinSubscriber(destination,sources,resultSelector){_super.call(this,destination),this.sources=sources,this.resultSelector=resultSelector,this.completed=0,this.haveValues=0;var len=sources.length;this.total=len,this.values=new Array(len);for(var i=0;len>i;i++){var source=sources[i],innerSubscription=subscribeToResult_1.subscribeToResult(this,source,null,i);innerSubscription&&(innerSubscription.outerIndex=i,this.add(innerSubscription))}}return __extends(ForkJoinSubscriber,_super),ForkJoinSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue,innerSub._hasValue||(innerSub._hasValue=!0,this.haveValues++)},ForkJoinSubscriber.prototype.notifyComplete=function(innerSub){var destination=this.destination,_a=this,haveValues=_a.haveValues,resultSelector=_a.resultSelector,values=_a.values,len=values.length;if(!innerSub._hasValue)return void destination.complete();if(this.completed++,this.completed===len){if(haveValues===len){var value=resultSelector?resultSelector.apply(this,values):values;destination.next(value)}destination.complete()}},ForkJoinSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),from_1=__webpack_require__(356);Observable_1.Observable.from=from_1.from},function(module,exports,__webpack_require__){"use strict";var FromObservable_1=__webpack_require__(357);exports.from=FromObservable_1.FromObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isArray_1=__webpack_require__(48),isFunction_1=__webpack_require__(46),isPromise_1=__webpack_require__(340),isScheduler_1=__webpack_require__(337),PromiseObservable_1=__webpack_require__(60),IteratorObservable_1=__webpack_require__(358),ArrayObservable_1=__webpack_require__(334),ArrayLikeObservable_1=__webpack_require__(359),iterator_1=__webpack_require__(341),Observable_1=__webpack_require__(41),observeOn_1=__webpack_require__(360),$$observable=__webpack_require__(55),isArrayLike=function(x){return x&&"number"==typeof x.length},FromObservable=function(_super){function FromObservable(ish,scheduler){_super.call(this,null),this.ish=ish,this.scheduler=scheduler}return __extends(FromObservable,_super),FromObservable.create=function(ish,mapFnOrScheduler,thisArg,lastScheduler){var scheduler=null,mapFn=null;if(isFunction_1.isFunction(mapFnOrScheduler)?(scheduler=lastScheduler||null,mapFn=mapFnOrScheduler):isScheduler_1.isScheduler(scheduler)&&(scheduler=mapFnOrScheduler),null!=ish){if("function"==typeof ish[$$observable])return ish instanceof Observable_1.Observable&&!scheduler?ish:new FromObservable(ish,scheduler);if(isArray_1.isArray(ish))return new ArrayObservable_1.ArrayObservable(ish,scheduler);if(isPromise_1.isPromise(ish))return new PromiseObservable_1.PromiseObservable(ish,scheduler);if("function"==typeof ish[iterator_1.$$iterator]||"string"==typeof ish)return new IteratorObservable_1.IteratorObservable(ish,null,null,scheduler);if(isArrayLike(ish))return new ArrayLikeObservable_1.ArrayLikeObservable(ish,mapFn,thisArg,scheduler)}throw new TypeError((null!==ish&&typeof ish||ish)+" is not observable")},FromObservable.prototype._subscribe=function(subscriber){var ish=this.ish,scheduler=this.scheduler;return null==scheduler?ish[$$observable]().subscribe(subscriber):ish[$$observable]().subscribe(new observeOn_1.ObserveOnSubscriber(subscriber,scheduler,0))},FromObservable}(Observable_1.Observable);exports.FromObservable=FromObservable},function(module,exports,__webpack_require__){"use strict";function getIterator(obj){var i=obj[iterator_1.$$iterator];if(!i&&"string"==typeof obj)return new StringIterator(obj);if(!i&&void 0!==obj.length)return new ArrayIterator(obj);if(!i)throw new TypeError("Object is not iterable");return obj[iterator_1.$$iterator]()}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),0>=len?0:len>maxSafeInteger?maxSafeInteger:len):len}function numberIsFinite(value){return"number"==typeof value&&root_1.root.isFinite(value)}function sign(value){var valueAsNumber=+value;return 0===valueAsNumber?valueAsNumber:isNaN(valueAsNumber)?valueAsNumber:0>valueAsNumber?-1:1}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=__webpack_require__(42),isObject_1=__webpack_require__(49),tryCatch_1=__webpack_require__(50),Observable_1=__webpack_require__(41),isFunction_1=__webpack_require__(46),iterator_1=__webpack_require__(341),errorObject_1=__webpack_require__(51),IteratorObservable=function(_super){function IteratorObservable(iterator,project,thisArg,scheduler){if(_super.call(this),null==iterator)throw new Error("iterator cannot be null.");if(isObject_1.isObject(project))this.thisArg=project,this.scheduler=thisArg;else if(isFunction_1.isFunction(project))this.project=project,this.thisArg=thisArg,this.scheduler=scheduler;else if(null!=project)throw new Error("When provided, `project` must be a function.");this.iterator=getIterator(iterator)}return __extends(IteratorObservable,_super),IteratorObservable.create=function(iterator,project,thisArg,scheduler){return new IteratorObservable(iterator,project,thisArg,scheduler)},IteratorObservable.dispatch=function(state){var index=state.index,hasError=state.hasError,thisArg=state.thisArg,project=state.project,iterator=state.iterator,subscriber=state.subscriber;if(hasError)return void subscriber.error(state.error);var result=iterator.next();return result.done?void subscriber.complete():(project?(result=tryCatch_1.tryCatch(project).call(thisArg,result.value,index),result===errorObject_1.errorObject?(state.error=errorObject_1.errorObject.e,state.hasError=!0):(subscriber.next(result),state.index=index+1)):(subscriber.next(result.value),state.index=index+1),void(subscriber.isUnsubscribed||this.schedule(state)))},IteratorObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,iterator=_a.iterator,project=_a.project,thisArg=_a.thisArg,scheduler=_a.scheduler;if(scheduler)return scheduler.schedule(IteratorObservable.dispatch,0,{index:index,thisArg:thisArg,project:project,iterator:iterator,subscriber:subscriber});for(;;){var result=iterator.next();if(result.done){subscriber.complete();break}if(project){if(result=tryCatch_1.tryCatch(project).call(thisArg,result.value,index++),result===errorObject_1.errorObject){subscriber.error(errorObject_1.errorObject.e);break}subscriber.next(result)}else subscriber.next(result.value);if(subscriber.isUnsubscribed)break}},IteratorObservable}(Observable_1.Observable);exports.IteratorObservable=IteratorObservable;var StringIterator=function(){function StringIterator(str,idx,len){void 0===idx&&(idx=0),void 0===len&&(len=str.length),this.str=str,this.idx=idx,this.len=len}return StringIterator.prototype[iterator_1.$$iterator]=function(){return this},StringIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},StringIterator}(),ArrayIterator=function(){function ArrayIterator(arr,idx,len){void 0===idx&&(idx=0),void 0===len&&(len=toLength(arr)),this.arr=arr,this.idx=idx,this.len=len}return ArrayIterator.prototype[iterator_1.$$iterator]=function(){return this},ArrayIterator.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},ArrayIterator}(),maxSafeInteger=Math.pow(2,53)-1},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ScalarObservable_1=__webpack_require__(335),EmptyObservable_1=__webpack_require__(336),ArrayLikeObservable=function(_super){function ArrayLikeObservable(arrayLike,mapFn,thisArg,scheduler){_super.call(this),this.arrayLike=arrayLike,this.scheduler=scheduler,mapFn||scheduler||1!==arrayLike.length||(this._isScalar=!0,this.value=arrayLike[0]),mapFn&&(this.mapFn=mapFn.bind(thisArg))}return __extends(ArrayLikeObservable,_super),ArrayLikeObservable.create=function(arrayLike,mapFn,thisArg,scheduler){var length=arrayLike.length;return 0===length?new EmptyObservable_1.EmptyObservable:1!==length||mapFn?new ArrayLikeObservable(arrayLike,mapFn,thisArg,scheduler):new ScalarObservable_1.ScalarObservable(arrayLike[0],scheduler)},ArrayLikeObservable.dispatch=function(state){var arrayLike=state.arrayLike,index=state.index,length=state.length,mapFn=state.mapFn,subscriber=state.subscriber;if(!subscriber.isUnsubscribed){if(index>=length)return void subscriber.complete();var result=mapFn?mapFn(arrayLike[index],index):arrayLike[index];subscriber.next(result),state.index=index+1,this.schedule(state)}},ArrayLikeObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,arrayLike=_a.arrayLike,mapFn=_a.mapFn,scheduler=_a.scheduler,length=arrayLike.length;if(scheduler)return scheduler.schedule(ArrayLikeObservable.dispatch,0,{arrayLike:arrayLike,index:index,length:length,mapFn:mapFn,subscriber:subscriber});for(var i=0;length>i&&!subscriber.isUnsubscribed;i++){var result=mapFn?mapFn(arrayLike[i],i):arrayLike[i];subscriber.next(result)}subscriber.complete()},ArrayLikeObservable}(Observable_1.Observable);exports.ArrayLikeObservable=ArrayLikeObservable},function(module,exports,__webpack_require__){"use strict";function observeOn(scheduler,delay){return void 0===delay&&(delay=0),this.lift(new ObserveOnOperator(scheduler,delay))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Notification_1=__webpack_require__(361);exports.observeOn=observeOn;var ObserveOnOperator=function(){function ObserveOnOperator(scheduler,delay){void 0===delay&&(delay=0),this.scheduler=scheduler,this.delay=delay}return ObserveOnOperator.prototype.call=function(subscriber,source){return source._subscribe(new ObserveOnSubscriber(subscriber,this.scheduler,this.delay))},ObserveOnOperator}();exports.ObserveOnOperator=ObserveOnOperator;var ObserveOnSubscriber=function(_super){function ObserveOnSubscriber(destination,scheduler,delay){void 0===delay&&(delay=0),_super.call(this,destination),this.scheduler=scheduler,this.delay=delay}return __extends(ObserveOnSubscriber,_super),ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination)},ObserveOnSubscriber.prototype.scheduleMessage=function(notification){this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))},ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(Notification_1.Notification.createNext(value))},ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(Notification_1.Notification.createError(err))},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete())},ObserveOnSubscriber}(Subscriber_1.Subscriber);exports.ObserveOnSubscriber=ObserveOnSubscriber;var ObserveOnMessage=function(){function ObserveOnMessage(notification,destination){this.notification=notification,this.destination=destination}return ObserveOnMessage}();exports.ObserveOnMessage=ObserveOnMessage},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),Notification=function(){function Notification(kind,value,exception){this.kind=kind,this.value=value,this.exception=exception,this.hasValue="N"===kind}return Notification.prototype.observe=function(observer){switch(this.kind){case"N":return observer.next&&observer.next(this.value);case"E":return observer.error&&observer.error(this.exception);case"C":return observer.complete&&observer.complete()}},Notification.prototype["do"]=function(next,error,complete){var kind=this.kind;switch(kind){case"N":return next&&next(this.value);case"E":return error&&error(this.exception);case"C":return complete&&complete()}},Notification.prototype.accept=function(nextOrObserver,error,complete){return nextOrObserver&&"function"==typeof nextOrObserver.next?this.observe(nextOrObserver):this["do"](nextOrObserver,error,complete)},Notification.prototype.toObservable=function(){var kind=this.kind;switch(kind){case"N":return Observable_1.Observable.of(this.value);case"E":return Observable_1.Observable["throw"](this.exception);case"C":return Observable_1.Observable.empty()}},Notification.createNext=function(value){return"undefined"!=typeof value?new Notification("N",value):this.undefinedValueNotification},Notification.createError=function(err){return new Notification("E",void 0,err)},Notification.createComplete=function(){return this.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}();exports.Notification=Notification},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),fromEvent_1=__webpack_require__(363);Observable_1.Observable.fromEvent=fromEvent_1.fromEvent},function(module,exports,__webpack_require__){"use strict";var FromEventObservable_1=__webpack_require__(364);exports.fromEvent=FromEventObservable_1.FromEventObservable.create},function(module,exports,__webpack_require__){"use strict";function isNodeStyleEventEmmitter(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}function isJQueryStyleEventEmitter(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}function isNodeList(sourceObj){return!!sourceObj&&"[object NodeList]"===sourceObj.toString()}function isHTMLCollection(sourceObj){return!!sourceObj&&"[object HTMLCollection]"===sourceObj.toString()}function isEventTarget(sourceObj){return!!sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),Subscription_1=__webpack_require__(47),FromEventObservable=function(_super){function FromEventObservable(sourceObj,eventName,selector){_super.call(this),this.sourceObj=sourceObj,this.eventName=eventName,this.selector=selector}return __extends(FromEventObservable,_super),FromEventObservable.create=function(target,eventName,selector){return new FromEventObservable(target,eventName,selector)},FromEventObservable.setupSubscription=function(sourceObj,eventName,handler,subscriber){var unsubscribe;if(isNodeList(sourceObj)||isHTMLCollection(sourceObj))for(var i=0,len=sourceObj.length;len>i;i++)FromEventObservable.setupSubscription(sourceObj[i],eventName,handler,subscriber);else isEventTarget(sourceObj)?(sourceObj.addEventListener(eventName,handler),unsubscribe=function(){return sourceObj.removeEventListener(eventName,handler)}):isJQueryStyleEventEmitter(sourceObj)?(sourceObj.on(eventName,handler),unsubscribe=function(){return sourceObj.off(eventName,handler)}):isNodeStyleEventEmmitter(sourceObj)&&(sourceObj.addListener(eventName,handler),unsubscribe=function(){return sourceObj.removeListener(eventName,handler)});subscriber.add(new Subscription_1.Subscription(unsubscribe))},FromEventObservable.prototype._subscribe=function(subscriber){var sourceObj=this.sourceObj,eventName=this.eventName,selector=this.selector,handler=selector?function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var result=tryCatch_1.tryCatch(selector).apply(void 0,args);result===errorObject_1.errorObject?subscriber.error(errorObject_1.errorObject.e):subscriber.next(result)}:function(e){return subscriber.next(e)};FromEventObservable.setupSubscription(sourceObj,eventName,handler,subscriber)},FromEventObservable}(Observable_1.Observable);exports.FromEventObservable=FromEventObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),fromEventPattern_1=__webpack_require__(366);Observable_1.Observable.fromEventPattern=fromEventPattern_1.fromEventPattern},function(module,exports,__webpack_require__){"use strict";var FromEventPatternObservable_1=__webpack_require__(367);exports.fromEventPattern=FromEventPatternObservable_1.FromEventPatternObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),Subscription_1=__webpack_require__(47),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),FromEventPatternObservable=function(_super){function FromEventPatternObservable(addHandler,removeHandler,selector){_super.call(this),this.addHandler=addHandler,this.removeHandler=removeHandler,this.selector=selector}return __extends(FromEventPatternObservable,_super),FromEventPatternObservable.create=function(addHandler,removeHandler,selector){return new FromEventPatternObservable(addHandler,removeHandler,selector)},FromEventPatternObservable.prototype._subscribe=function(subscriber){var addHandler=this.addHandler,removeHandler=this.removeHandler,selector=this.selector,handler=selector?function(e){var result=tryCatch_1.tryCatch(selector).apply(null,arguments);result===errorObject_1.errorObject?subscriber.error(result.e):subscriber.next(result)}:function(e){subscriber.next(e)},result=tryCatch_1.tryCatch(addHandler)(handler);result===errorObject_1.errorObject&&subscriber.error(result.e),subscriber.add(new Subscription_1.Subscription(function(){removeHandler(handler)}))},FromEventPatternObservable}(Observable_1.Observable);exports.FromEventPatternObservable=FromEventPatternObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),fromPromise_1=__webpack_require__(369);Observable_1.Observable.fromPromise=fromPromise_1.fromPromise},function(module,exports,__webpack_require__){"use strict";var PromiseObservable_1=__webpack_require__(60);exports.fromPromise=PromiseObservable_1.PromiseObservable.create},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),GenerateObservable_1=__webpack_require__(371);Observable_1.Observable.generate=GenerateObservable_1.GenerateObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),isScheduler_1=__webpack_require__(337),selfSelector=function(value){return value},GenerateObservable=function(_super){function GenerateObservable(initialState,condition,iterate,resultSelector,scheduler){_super.call(this),this.initialState=initialState,this.condition=condition,this.iterate=iterate,this.resultSelector=resultSelector,this.scheduler=scheduler}return __extends(GenerateObservable,_super),GenerateObservable.create=function(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){return 1==arguments.length?new GenerateObservable(initialStateOrOptions.initialState,initialStateOrOptions.condition,initialStateOrOptions.iterate,initialStateOrOptions.resultSelector||selfSelector,initialStateOrOptions.scheduler):void 0===resultSelectorOrObservable||isScheduler_1.isScheduler(resultSelectorOrObservable)?new GenerateObservable(initialStateOrOptions,condition,iterate,selfSelector,resultSelectorOrObservable):new GenerateObservable(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler)},GenerateObservable.prototype._subscribe=function(subscriber){var state=this.initialState;if(this.scheduler)return this.scheduler.schedule(GenerateObservable.dispatch,0,{subscriber:subscriber,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:state});for(var _a=this,condition=_a.condition,resultSelector=_a.resultSelector,iterate=_a.iterate;;){if(condition){var conditionResult=void 0;try{conditionResult=condition(state)}catch(err){return void subscriber.error(err)}if(!conditionResult){subscriber.complete();break}}var value=void 0;try{value=resultSelector(state)}catch(err){return void subscriber.error(err)}if(subscriber.next(value),subscriber.isUnsubscribed)break;try{state=iterate(state)}catch(err){return void subscriber.error(err)}}},GenerateObservable.dispatch=function(state){var subscriber=state.subscriber,condition=state.condition;if(!subscriber.isUnsubscribed){if(state.needIterate)try{state.state=state.iterate(state.state)}catch(err){return void subscriber.error(err)}else state.needIterate=!0;if(condition){var conditionResult=void 0;try{conditionResult=condition(state.state)}catch(err){return void subscriber.error(err)}if(!conditionResult)return void subscriber.complete();if(subscriber.isUnsubscribed)return}var value;try{value=state.resultSelector(state.state)}catch(err){return void subscriber.error(err)}if(!subscriber.isUnsubscribed&&(subscriber.next(value),!subscriber.isUnsubscribed))return this.schedule(state)}},GenerateObservable}(Observable_1.Observable);exports.GenerateObservable=GenerateObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),interval_1=__webpack_require__(373);Observable_1.Observable.interval=interval_1.interval},function(module,exports,__webpack_require__){"use strict";var IntervalObservable_1=__webpack_require__(374);exports.interval=IntervalObservable_1.IntervalObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isNumeric_1=__webpack_require__(375),Observable_1=__webpack_require__(41),async_1=__webpack_require__(376),IntervalObservable=function(_super){function IntervalObservable(period,scheduler){void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),_super.call(this),this.period=period,this.scheduler=scheduler,(!isNumeric_1.isNumeric(period)||0>period)&&(this.period=0),scheduler&&"function"==typeof scheduler.schedule||(this.scheduler=async_1.async)}return __extends(IntervalObservable,_super),IntervalObservable.create=function(period,scheduler){return void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),new IntervalObservable(period,scheduler)},IntervalObservable.dispatch=function(state){var index=state.index,subscriber=state.subscriber,period=state.period;subscriber.next(index),subscriber.isUnsubscribed||(state.index+=1,this.schedule(state,period))},IntervalObservable.prototype._subscribe=function(subscriber){var index=0,period=this.period,scheduler=this.scheduler;subscriber.add(scheduler.schedule(IntervalObservable.dispatch,period,{index:index,subscriber:subscriber,period:period}))},IntervalObservable}(Observable_1.Observable);exports.IntervalObservable=IntervalObservable},function(module,exports,__webpack_require__){"use strict";function isNumeric(val){return!isArray_1.isArray(val)&&val-parseFloat(val)+1>=0}var isArray_1=__webpack_require__(48);exports.isNumeric=isNumeric},function(module,exports,__webpack_require__){"use strict";var AsyncScheduler_1=__webpack_require__(377);exports.async=new AsyncScheduler_1.AsyncScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},FutureAction_1=__webpack_require__(378),QueueScheduler_1=__webpack_require__(379),AsyncScheduler=function(_super){function AsyncScheduler(){_super.apply(this,arguments)}return __extends(AsyncScheduler,_super),AsyncScheduler.prototype.scheduleNow=function(work,state){return new FutureAction_1.FutureAction(this,work).schedule(state,0)},AsyncScheduler}(QueueScheduler_1.QueueScheduler);exports.AsyncScheduler=AsyncScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},root_1=__webpack_require__(42),Subscription_1=__webpack_require__(47),FutureAction=function(_super){function FutureAction(scheduler,work){_super.call(this),this.scheduler=scheduler,this.work=work,this.pending=!1}return __extends(FutureAction,_super),FutureAction.prototype.execute=function(){if(this.isUnsubscribed)this.error=new Error("executing a cancelled action");else try{this.work(this.state)}catch(e){this.unsubscribe(),this.error=e}},FutureAction.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this.isUnsubscribed?this:this._schedule(state,delay)},FutureAction.prototype._schedule=function(state,delay){var _this=this;void 0===delay&&(delay=0),this.state=state,this.pending=!0;var id=this.id;return null!=id&&this.delay===delay?this:(this.delay=delay,null!=id&&(this.id=null,root_1.root.clearInterval(id)),this.id=root_1.root.setInterval(function(){_this.pending=!1;var _a=_this,id=_a.id,scheduler=_a.scheduler;scheduler.actions.push(_this),scheduler.flush(),_this.pending===!1&&null!=id&&(_this.id=null,root_1.root.clearInterval(id))},delay),this)},FutureAction.prototype._unsubscribe=function(){this.pending=!1;var _a=this,id=_a.id,scheduler=_a.scheduler,actions=scheduler.actions,index=actions.indexOf(this);null!=id&&(this.id=null,root_1.root.clearInterval(id)),-1!==index&&actions.splice(index,1),this.work=null,this.state=null,this.scheduler=null},FutureAction}(Subscription_1.Subscription);exports.FutureAction=FutureAction},function(module,exports,__webpack_require__){"use strict";var QueueAction_1=__webpack_require__(380),FutureAction_1=__webpack_require__(378),QueueScheduler=function(){function QueueScheduler(){this.active=!1,this.actions=[],this.scheduledId=null}return QueueScheduler.prototype.now=function(){return Date.now()},QueueScheduler.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var actions=this.actions,action=null;action=actions.shift();)if(action.execute(),action.error)throw this.active=!1,action.error;this.active=!1}},QueueScheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),0>=delay?this.scheduleNow(work,state):this.scheduleLater(work,delay,state)},QueueScheduler.prototype.scheduleNow=function(work,state){return new QueueAction_1.QueueAction(this,work).schedule(state)},QueueScheduler.prototype.scheduleLater=function(work,delay,state){return new FutureAction_1.FutureAction(this,work).schedule(state,delay)},QueueScheduler}();exports.QueueScheduler=QueueScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},FutureAction_1=__webpack_require__(378),QueueAction=function(_super){function QueueAction(){_super.apply(this,arguments)}return __extends(QueueAction,_super),QueueAction.prototype._schedule=function(state,delay){if(void 0===delay&&(delay=0),delay>0)return _super.prototype._schedule.call(this,state,delay);this.delay=delay,this.state=state;var scheduler=this.scheduler;return scheduler.actions.push(this),scheduler.flush(),this},QueueAction}(FutureAction_1.FutureAction);exports.QueueAction=QueueAction},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),merge_1=__webpack_require__(382);Observable_1.Observable.merge=merge_1.merge},function(module,exports,__webpack_require__){"use strict";var merge_1=__webpack_require__(383);exports.merge=merge_1.mergeStatic},function(module,exports,__webpack_require__){"use strict";function merge(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return observables.unshift(this),mergeStatic.apply(this,observables)}function mergeStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return isScheduler_1.isScheduler(last)?(scheduler=observables.pop(),observables.length>1&&"number"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):"number"==typeof last&&(concurrent=observables.pop()),1===observables.length?observables[0]:new ArrayObservable_1.ArrayObservable(observables,scheduler).lift(new mergeAll_1.MergeAllOperator(concurrent))}var ArrayObservable_1=__webpack_require__(334),mergeAll_1=__webpack_require__(346),isScheduler_1=__webpack_require__(337);exports.merge=merge,exports.mergeStatic=mergeStatic},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),race_1=__webpack_require__(385);Observable_1.Observable.race=race_1.raceStatic},function(module,exports,__webpack_require__){"use strict";function race(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return 1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),observables.unshift(this),raceStatic.apply(this,observables)}function raceStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];if(1===observables.length){if(!isArray_1.isArray(observables[0]))return observables[0];observables=observables[0]}return new ArrayObservable_1.ArrayObservable(observables).lift(new RaceOperator)}var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isArray_1=__webpack_require__(48),ArrayObservable_1=__webpack_require__(334),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.race=race,exports.raceStatic=raceStatic;var RaceOperator=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(subscriber,source){return source._subscribe(new RaceSubscriber(subscriber))},RaceOperator}();exports.RaceOperator=RaceOperator;var RaceSubscriber=function(_super){function RaceSubscriber(destination){_super.call(this,destination),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends(RaceSubscriber,_super),RaceSubscriber.prototype._next=function(observable){this.observables.push(observable)},RaceSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{for(var i=0;len>i;i++){var observable=observables[i],subscription=subscribeToResult_1.subscribeToResult(this,observable,observable,i);this.subscriptions&&(this.subscriptions.push(subscription),this.add(subscription))}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe(),this.remove(subscription)}this.subscriptions=null}this.destination.next(innerValue)},RaceSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.RaceSubscriber=RaceSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),never_1=__webpack_require__(387);Observable_1.Observable.never=never_1.never},function(module,exports,__webpack_require__){"use strict";var NeverObservable_1=__webpack_require__(388);exports.never=NeverObservable_1.NeverObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),noop_1=__webpack_require__(389),NeverObservable=function(_super){function NeverObservable(){_super.call(this)}return __extends(NeverObservable,_super),NeverObservable.create=function(){return new NeverObservable},NeverObservable.prototype._subscribe=function(subscriber){noop_1.noop()},NeverObservable}(Observable_1.Observable);exports.NeverObservable=NeverObservable},function(module,exports){"use strict";function noop(){}exports.noop=noop},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),of_1=__webpack_require__(391);Observable_1.Observable.of=of_1.of},function(module,exports,__webpack_require__){"use strict";var ArrayObservable_1=__webpack_require__(334);exports.of=ArrayObservable_1.ArrayObservable.of},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),range_1=__webpack_require__(393);Observable_1.Observable.range=range_1.range},function(module,exports,__webpack_require__){"use strict";var RangeObservable_1=__webpack_require__(394);exports.range=RangeObservable_1.RangeObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),RangeObservable=function(_super){function RangeObservable(start,count,scheduler){_super.call(this),this.start=start,this._count=count,this.scheduler=scheduler}return __extends(RangeObservable,_super),RangeObservable.create=function(start,count,scheduler){return void 0===start&&(start=0),void 0===count&&(count=0),new RangeObservable(start,count,scheduler)},RangeObservable.dispatch=function(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;return index>=count?void subscriber.complete():(subscriber.next(start),void(subscriber.isUnsubscribed||(state.index=index+1,state.start=start+1,this.schedule(state))))},RangeObservable.prototype._subscribe=function(subscriber){var index=0,start=this.start,count=this._count,scheduler=this.scheduler;if(scheduler)return scheduler.schedule(RangeObservable.dispatch,0,{index:index,count:count,start:start,subscriber:subscriber});for(;;){if(index++>=count){subscriber.complete();break}if(subscriber.next(start++),subscriber.isUnsubscribed)break}},RangeObservable}(Observable_1.Observable);exports.RangeObservable=RangeObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),throw_1=__webpack_require__(396);Observable_1.Observable["throw"]=throw_1._throw},function(module,exports,__webpack_require__){"use strict";var ErrorObservable_1=__webpack_require__(397);exports._throw=ErrorObservable_1.ErrorObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),ErrorObservable=function(_super){function ErrorObservable(error,scheduler){_super.call(this),this.error=error,this.scheduler=scheduler}return __extends(ErrorObservable,_super),ErrorObservable.create=function(error,scheduler){return new ErrorObservable(error,scheduler)},ErrorObservable.dispatch=function(arg){var error=arg.error,subscriber=arg.subscriber;subscriber.error(error)},ErrorObservable.prototype._subscribe=function(subscriber){var error=this.error,scheduler=this.scheduler;return scheduler?scheduler.schedule(ErrorObservable.dispatch,0,{error:error,subscriber:subscriber}):void subscriber.error(error)},ErrorObservable}(Observable_1.Observable);exports.ErrorObservable=ErrorObservable},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),timer_1=__webpack_require__(399);Observable_1.Observable.timer=timer_1.timer},function(module,exports,__webpack_require__){"use strict";var TimerObservable_1=__webpack_require__(400);exports.timer=TimerObservable_1.TimerObservable.create},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isNumeric_1=__webpack_require__(375),Observable_1=__webpack_require__(41),async_1=__webpack_require__(376),isScheduler_1=__webpack_require__(337),isDate_1=__webpack_require__(401),TimerObservable=function(_super){function TimerObservable(dueTime,period,scheduler){void 0===dueTime&&(dueTime=0),_super.call(this),this.period=-1,this.dueTime=0,isNumeric_1.isNumeric(period)?this.period=Number(period)<1&&1||Number(period):isScheduler_1.isScheduler(period)&&(scheduler=period),isScheduler_1.isScheduler(scheduler)||(scheduler=async_1.async),this.scheduler=scheduler,this.dueTime=isDate_1.isDate(dueTime)?+dueTime-this.scheduler.now():dueTime}return __extends(TimerObservable,_super),TimerObservable.create=function(initialDelay,period,scheduler){return void 0===initialDelay&&(initialDelay=0),new TimerObservable(initialDelay,period,scheduler)},TimerObservable.dispatch=function(state){var index=state.index,period=state.period,subscriber=state.subscriber,action=this;if(subscriber.next(index),!subscriber.isUnsubscribed){if(-1===period)return subscriber.complete();state.index=index+1,action.schedule(state,period)}},TimerObservable.prototype._subscribe=function(subscriber){var index=0,_a=this,period=_a.period,dueTime=_a.dueTime,scheduler=_a.scheduler;return scheduler.schedule(TimerObservable.dispatch,dueTime,{index:index,period:period,subscriber:subscriber})},TimerObservable}(Observable_1.Observable);exports.TimerObservable=TimerObservable},function(module,exports){"use strict";function isDate(value){return value instanceof Date&&!isNaN(+value)}exports.isDate=isDate},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),zip_1=__webpack_require__(403);Observable_1.Observable.zip=zip_1.zip},function(module,exports,__webpack_require__){"use strict";var zip_1=__webpack_require__(404);exports.zip=zip_1.zipStatic},function(module,exports,__webpack_require__){"use strict";function zipProto(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];return observables.unshift(this),zipStatic.apply(this,observables)}function zipStatic(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i-0]=arguments[_i];var project=observables[observables.length-1];return"function"==typeof project&&observables.pop(),new ArrayObservable_1.ArrayObservable(observables).lift(new ZipOperator(project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArrayObservable_1=__webpack_require__(334),isArray_1=__webpack_require__(48),Subscriber_1=__webpack_require__(45),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339),iterator_1=__webpack_require__(341);exports.zipProto=zipProto,exports.zipStatic=zipStatic;var ZipOperator=function(){function ZipOperator(project){this.project=project}return ZipOperator.prototype.call=function(subscriber,source){return source._subscribe(new ZipSubscriber(subscriber,this.project))},ZipOperator}();exports.ZipOperator=ZipOperator;var ZipSubscriber=function(_super){function ZipSubscriber(destination,project,values){void 0===values&&(values=Object.create(null)),_super.call(this,destination),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof project?project:null,this.values=values}return __extends(ZipSubscriber,_super),ZipSubscriber.prototype._next=function(value){var iterators=this.iterators,index=this.index++;isArray_1.isArray(value)?iterators.push(new StaticArrayIterator(value)):"function"==typeof value[iterator_1.$$iterator]?iterators.push(new StaticIterator(value[iterator_1.$$iterator]())):iterators.push(new ZipBufferIterator(this.destination,this,value,index))},ZipSubscriber.prototype._complete=function(){var iterators=this.iterators,len=iterators.length;this.active=len;for(var i=0;len>i;i++){var iterator=iterators[i];iterator.stillUnsubscribed?this.add(iterator.subscribe(iterator,i)):this.active--}},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var iterators=this.iterators,len=iterators.length,destination=this.destination,i=0;len>i;i++){var iterator=iterators[i];if("function"==typeof iterator.hasValue&&!iterator.hasValue())return}for(var shouldComplete=!1,args=[],i=0;len>i;i++){var iterator=iterators[i],result=iterator.next();if(iterator.hasCompleted()&&(shouldComplete=!0),result.done)return void destination.complete();args.push(result.value)}this.project?this._tryProject(args):destination.next(args),shouldComplete&&destination.complete()},ZipSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},ZipSubscriber}(Subscriber_1.Subscriber);exports.ZipSubscriber=ZipSubscriber;var StaticIterator=function(){function StaticIterator(iterator){this.iterator=iterator,this.nextResult=iterator.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var result=this.nextResult;return this.nextResult=this.iterator.next(),result},StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return nextResult&&nextResult.done},StaticIterator}(),StaticArrayIterator=function(){function StaticArrayIterator(array){this.array=array,this.index=0,this.length=0,this.length=array.length}return StaticArrayIterator.prototype[iterator_1.$$iterator]=function(){return this},StaticArrayIterator.prototype.next=function(value){var i=this.index++,array=this.array;return i<this.length?{value:array[i],done:!1}:{done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),ZipBufferIterator=function(_super){function ZipBufferIterator(destination,parent,observable,index){_super.call(this,destination),this.parent=parent,this.observable=observable,this.index=index,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return __extends(ZipBufferIterator,_super),ZipBufferIterator.prototype[iterator_1.$$iterator]=function(){return this},ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;return 0===buffer.length&&this.isComplete?{done:!0}:{value:buffer.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.buffer.push(innerValue),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(value,index){return subscribeToResult_1.subscribeToResult(this,this.observable,this,index)},ZipBufferIterator}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),buffer_1=__webpack_require__(406);Observable_1.Observable.prototype.buffer=buffer_1.buffer},function(module,exports,__webpack_require__){"use strict";function buffer(closingNotifier){return this.lift(new BufferOperator(closingNotifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.buffer=buffer;var BufferOperator=function(){function BufferOperator(closingNotifier){this.closingNotifier=closingNotifier}return BufferOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferSubscriber(subscriber,this.closingNotifier))},BufferOperator}(),BufferSubscriber=function(_super){function BufferSubscriber(destination,closingNotifier){_super.call(this,destination),this.buffer=[],this.add(subscribeToResult_1.subscribeToResult(this,closingNotifier))}return __extends(BufferSubscriber,_super),BufferSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var buffer=this.buffer;this.buffer=[],this.destination.next(buffer)},BufferSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferCount_1=__webpack_require__(408);Observable_1.Observable.prototype.bufferCount=bufferCount_1.bufferCount},function(module,exports,__webpack_require__){"use strict";function bufferCount(bufferSize,startBufferEvery){return void 0===startBufferEvery&&(startBufferEvery=null),this.lift(new BufferCountOperator(bufferSize,startBufferEvery))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.bufferCount=bufferCount;var BufferCountOperator=function(){function BufferCountOperator(bufferSize,startBufferEvery){this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery}return BufferCountOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferCountSubscriber(subscriber,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),BufferCountSubscriber=function(_super){function BufferCountSubscriber(destination,bufferSize,startBufferEvery){_super.call(this,destination),this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.buffers=[[]],this.count=0}return __extends(BufferCountSubscriber,_super),BufferCountSubscriber.prototype._next=function(value){var count=this.count+=1,destination=this.destination,bufferSize=this.bufferSize,startBufferEvery=null==this.startBufferEvery?bufferSize:this.startBufferEvery,buffers=this.buffers,len=buffers.length,remove=-1;count%startBufferEvery===0&&buffers.push([]);for(var i=0;len>i;i++){var buffer=buffers[i];buffer.push(value),buffer.length===bufferSize&&(remove=i,destination.next(buffer))}-1!==remove&&buffers.splice(remove,1)},BufferCountSubscriber.prototype._complete=function(){for(var destination=this.destination,buffers=this.buffers;buffers.length>0;){var buffer=buffers.shift();buffer.length>0&&destination.next(buffer)}_super.prototype._complete.call(this)},BufferCountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferTime_1=__webpack_require__(410);Observable_1.Observable.prototype.bufferTime=bufferTime_1.bufferTime},function(module,exports,__webpack_require__){"use strict";function bufferTime(bufferTimeSpan,bufferCreationInterval,scheduler){return void 0===bufferCreationInterval&&(bufferCreationInterval=null),void 0===scheduler&&(scheduler=async_1.async),this.lift(new BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,scheduler))}function dispatchBufferTimeSpanOnly(state){var subscriber=state.subscriber,prevBuffer=state.buffer;prevBuffer&&subscriber.closeBuffer(prevBuffer),state.buffer=subscriber.openBuffer(),subscriber.isUnsubscribed||this.schedule(state,state.bufferTimeSpan)}function dispatchBufferCreation(state){var bufferCreationInterval=state.bufferCreationInterval,bufferTimeSpan=state.bufferTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,buffer=subscriber.openBuffer(),action=this;subscriber.isUnsubscribed||(action.add(scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:subscriber,buffer:buffer})),action.schedule(state,bufferCreationInterval))}function dispatchBufferClose(arg){var subscriber=arg.subscriber,buffer=arg.buffer;subscriber.closeBuffer(buffer)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.bufferTime=bufferTime;var BufferTimeOperator=function(){function BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,scheduler){this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.scheduler=scheduler}return BufferTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferTimeSubscriber(subscriber,this.bufferTimeSpan,this.bufferCreationInterval,this.scheduler))},BufferTimeOperator}(),BufferTimeSubscriber=function(_super){function BufferTimeSubscriber(destination,bufferTimeSpan,bufferCreationInterval,scheduler){_super.call(this,destination),this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.scheduler=scheduler,this.buffers=[];var buffer=this.openBuffer();if(null!==bufferCreationInterval&&bufferCreationInterval>=0){var closeState={subscriber:this,buffer:buffer},creationState={bufferTimeSpan:bufferTimeSpan,bufferCreationInterval:bufferCreationInterval,subscriber:this,scheduler:scheduler};this.add(scheduler.schedule(dispatchBufferClose,bufferTimeSpan,closeState)),this.add(scheduler.schedule(dispatchBufferCreation,bufferCreationInterval,creationState))}else{var timeSpanOnlyState={subscriber:this,buffer:buffer,bufferTimeSpan:bufferTimeSpan};this.add(scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}}return __extends(BufferTimeSubscriber,_super),BufferTimeSubscriber.prototype._next=function(value){for(var buffers=this.buffers,len=buffers.length,i=0;len>i;i++)buffers[i].push(value)},BufferTimeSubscriber.prototype._error=function(err){this.buffers.length=0,_super.prototype._error.call(this,err)},BufferTimeSubscriber.prototype._complete=function(){for(var _a=this,buffers=_a.buffers,destination=_a.destination;buffers.length>0;)destination.next(buffers.shift());_super.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.buffers=null},BufferTimeSubscriber.prototype.openBuffer=function(){var buffer=[];return this.buffers.push(buffer),buffer},BufferTimeSubscriber.prototype.closeBuffer=function(buffer){this.destination.next(buffer);var buffers=this.buffers;buffers.splice(buffers.indexOf(buffer),1)},BufferTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferToggle_1=__webpack_require__(412);Observable_1.Observable.prototype.bufferToggle=bufferToggle_1.bufferToggle},function(module,exports,__webpack_require__){"use strict";function bufferToggle(openings,closingSelector){return this.lift(new BufferToggleOperator(openings,closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=__webpack_require__(47),subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338);exports.bufferToggle=bufferToggle;var BufferToggleOperator=function(){function BufferToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return BufferToggleOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferToggleSubscriber(subscriber,this.openings,this.closingSelector))},BufferToggleOperator}(),BufferToggleSubscriber=function(_super){function BufferToggleSubscriber(destination,openings,closingSelector){_super.call(this,destination),this.openings=openings,this.closingSelector=closingSelector,this.contexts=[],this.add(subscribeToResult_1.subscribeToResult(this,openings))}return __extends(BufferToggleSubscriber,_super),BufferToggleSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0;len>i;i++)contexts[i].buffer.push(value)},BufferToggleSubscriber.prototype._error=function(err){for(var contexts=this.contexts;contexts.length>0;){var context=contexts.shift();context.subscription.unsubscribe(),context.buffer=null,context.subscription=null}this.contexts=null,_super.prototype._error.call(this,err)},BufferToggleSubscriber.prototype._complete=function(){for(var contexts=this.contexts;contexts.length>0;){var context=contexts.shift();this.destination.next(context.buffer),context.subscription.unsubscribe(),context.buffer=null,context.subscription=null}this.contexts=null,_super.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){outerValue?this.closeBuffer(outerValue):this.openBuffer(innerValue)},BufferToggleSubscriber.prototype.notifyComplete=function(innerSub){this.closeBuffer(innerSub.context)},BufferToggleSubscriber.prototype.openBuffer=function(value){try{var closingSelector=this.closingSelector,closingNotifier=closingSelector.call(this,value);closingNotifier&&this.trySubscribe(closingNotifier)}catch(err){this._error(err)}},BufferToggleSubscriber.prototype.closeBuffer=function(context){var contexts=this.contexts;if(contexts&&context){var buffer=context.buffer,subscription=context.subscription;this.destination.next(buffer),contexts.splice(contexts.indexOf(context),1),this.remove(subscription),subscription.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(closingNotifier){var contexts=this.contexts,buffer=[],subscription=new Subscription_1.Subscription,context={buffer:buffer,subscription:subscription};contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);!innerSubscription||innerSubscription.isUnsubscribed?this.closeBuffer(context):(innerSubscription.context=context,this.add(innerSubscription),subscription.add(innerSubscription))},BufferToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),bufferWhen_1=__webpack_require__(414);Observable_1.Observable.prototype.bufferWhen=bufferWhen_1.bufferWhen},function(module,exports,__webpack_require__){"use strict";function bufferWhen(closingSelector){return this.lift(new BufferWhenOperator(closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscription_1=__webpack_require__(47),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.bufferWhen=bufferWhen;var BufferWhenOperator=function(){function BufferWhenOperator(closingSelector){this.closingSelector=closingSelector}return BufferWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new BufferWhenSubscriber(subscriber,this.closingSelector))},BufferWhenOperator}(),BufferWhenSubscriber=function(_super){function BufferWhenSubscriber(destination,closingSelector){_super.call(this,destination),this.closingSelector=closingSelector,this.subscribing=!1,this.openBuffer()}return __extends(BufferWhenSubscriber,_super),BufferWhenSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferWhenSubscriber.prototype._complete=function(){var buffer=this.buffer;buffer&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var closingSubscription=this.closingSubscription;closingSubscription&&(this.remove(closingSubscription),closingSubscription.unsubscribe());var buffer=this.buffer;this.buffer&&this.destination.next(buffer),this.buffer=[];var closingNotifier=tryCatch_1.tryCatch(this.closingSelector)();closingNotifier===errorObject_1.errorObject?this.error(errorObject_1.errorObject.e):(closingSubscription=new Subscription_1.Subscription,this.closingSubscription=closingSubscription,this.add(closingSubscription),this.subscribing=!0,closingSubscription.add(subscribeToResult_1.subscribeToResult(this,closingNotifier)),this.subscribing=!1)},BufferWhenSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),cache_1=__webpack_require__(416);Observable_1.Observable.prototype.cache=cache_1.cache},function(module,exports,__webpack_require__){"use strict";function cache(bufferSize,windowTime,scheduler){return void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),publishReplay_1.publishReplay.call(this,bufferSize,windowTime,scheduler).refCount()}var publishReplay_1=__webpack_require__(417);exports.cache=cache},function(module,exports,__webpack_require__){"use strict";function publishReplay(bufferSize,windowTime,scheduler){return void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),multicast_1.multicast.call(this,new ReplaySubject_1.ReplaySubject(bufferSize,windowTime,scheduler))}var ReplaySubject_1=__webpack_require__(418),multicast_1=__webpack_require__(420);exports.publishReplay=publishReplay},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),queue_1=__webpack_require__(419),observeOn_1=__webpack_require__(360),ReplaySubject=function(_super){function ReplaySubject(bufferSize,windowTime,scheduler){void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY),_super.call(this),this.events=[],this.scheduler=scheduler,this.bufferSize=1>bufferSize?1:bufferSize,this._windowTime=1>windowTime?1:windowTime}return __extends(ReplaySubject,_super),ReplaySubject.prototype._next=function(value){var now=this._getNow();this.events.push(new ReplayEvent(now,value)),this._trimBufferThenGetEvents(now),_super.prototype._next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){var events=this._trimBufferThenGetEvents(this._getNow()),scheduler=this.scheduler;scheduler&&subscriber.add(subscriber=new observeOn_1.ObserveOnSubscriber(subscriber,scheduler));for(var index=-1,len=events.length;++index<len&&!subscriber.isUnsubscribed;)subscriber.next(events[index].value);return _super.prototype._subscribe.call(this,subscriber)},ReplaySubject.prototype._getNow=function(){return(this.scheduler||queue_1.queue).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(now){for(var bufferSize=this.bufferSize,_windowTime=this._windowTime,events=this.events,eventsCount=events.length,spliceCount=0;eventsCount>spliceCount&&!(now-events[spliceCount].time<_windowTime);)spliceCount+=1;return eventsCount>bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-bufferSize)),spliceCount>0&&events.splice(0,spliceCount),events},ReplaySubject}(Subject_1.Subject);exports.ReplaySubject=ReplaySubject;var ReplayEvent=function(){function ReplayEvent(time,value){this.time=time,this.value=value}return ReplayEvent}()},function(module,exports,__webpack_require__){"use strict";var QueueScheduler_1=__webpack_require__(379);exports.queue=new QueueScheduler_1.QueueScheduler},function(module,exports,__webpack_require__){"use strict";function multicast(subjectOrSubjectFactory){var subjectFactory;return subjectFactory="function"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory},new ConnectableObservable_1.ConnectableObservable(this,subjectFactory)}var ConnectableObservable_1=__webpack_require__(421);exports.multicast=multicast},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),Subscriber_1=__webpack_require__(45),Subscription_1=__webpack_require__(47),ConnectableObservable=function(_super){function ConnectableObservable(source,subjectFactory){_super.call(this),this.source=source,this.subjectFactory=subjectFactory}return __extends(ConnectableObservable,_super),ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)},ConnectableObservable.prototype.getSubject=function(){var subject=this.subject;return subject&&!subject.isUnsubscribed?subject:this.subject=this.subjectFactory();
},ConnectableObservable.prototype.connect=function(){var source=this.source,subscription=this.subscription;return subscription&&!subscription.isUnsubscribed?subscription:(subscription=source.subscribe(this.getSubject()),subscription.add(new ConnectableSubscription(this)),this.subscription=subscription)},ConnectableObservable.prototype.refCount=function(){return new RefCountObservable(this)},ConnectableObservable.prototype._closeSubscription=function(){this.subject=null,this.subscription=null},ConnectableObservable}(Observable_1.Observable);exports.ConnectableObservable=ConnectableObservable;var ConnectableSubscription=function(_super){function ConnectableSubscription(connectable){_super.call(this),this.connectable=connectable}return __extends(ConnectableSubscription,_super),ConnectableSubscription.prototype._unsubscribe=function(){var connectable=this.connectable;connectable._closeSubscription(),this.connectable=null},ConnectableSubscription}(Subscription_1.Subscription),RefCountObservable=function(_super){function RefCountObservable(connectable,refCount){void 0===refCount&&(refCount=0),_super.call(this),this.connectable=connectable,this.refCount=refCount}return __extends(RefCountObservable,_super),RefCountObservable.prototype._subscribe=function(subscriber){var connectable=this.connectable,refCountSubscriber=new RefCountSubscriber(subscriber,this),subscription=connectable.subscribe(refCountSubscriber);return subscription.isUnsubscribed||1!==++this.refCount||(refCountSubscriber.connection=this.connection=connectable.connect()),subscription},RefCountObservable}(Observable_1.Observable),RefCountSubscriber=function(_super){function RefCountSubscriber(destination,refCountObservable){_super.call(this,null),this.destination=destination,this.refCountObservable=refCountObservable,this.connection=refCountObservable.connection,destination.add(this)}return __extends(RefCountSubscriber,_super),RefCountSubscriber.prototype._next=function(value){this.destination.next(value)},RefCountSubscriber.prototype._error=function(err){this._resetConnectable(),this.destination.error(err)},RefCountSubscriber.prototype._complete=function(){this._resetConnectable(),this.destination.complete()},RefCountSubscriber.prototype._resetConnectable=function(){var observable=this.refCountObservable,obsConnection=observable.connection,subConnection=this.connection;subConnection&&subConnection===obsConnection&&(observable.refCount=0,obsConnection.unsubscribe(),observable.connection=null,this.unsubscribe())},RefCountSubscriber.prototype._unsubscribe=function(){var observable=this.refCountObservable;if(0!==observable.refCount&&0===--observable.refCount){var obsConnection=observable.connection,subConnection=this.connection;subConnection&&subConnection===obsConnection&&(obsConnection.unsubscribe(),observable.connection=null)}},RefCountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),catch_1=__webpack_require__(423);Observable_1.Observable.prototype["catch"]=catch_1._catch},function(module,exports,__webpack_require__){"use strict";function _catch(selector){var operator=new CatchOperator(selector),caught=this.lift(operator);return operator.caught=caught}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports._catch=_catch;var CatchOperator=function(){function CatchOperator(selector){this.selector=selector}return CatchOperator.prototype.call=function(subscriber,source){return source._subscribe(new CatchSubscriber(subscriber,this.selector,this.caught))},CatchOperator}(),CatchSubscriber=function(_super){function CatchSubscriber(destination,selector,caught){_super.call(this,destination),this.selector=selector,this.caught=caught}return __extends(CatchSubscriber,_super),CatchSubscriber.prototype.error=function(err){if(!this.isStopped){var result=void 0;try{result=this.selector(err,this.caught)}catch(err){return void this.destination.error(err)}this._innerSub(result)}},CatchSubscriber.prototype._innerSub=function(result){this.unsubscribe(),this.destination.remove(this),result.subscribe(this.destination)},CatchSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),combineAll_1=__webpack_require__(425);Observable_1.Observable.prototype.combineAll=combineAll_1.combineAll},function(module,exports,__webpack_require__){"use strict";function combineAll(project){return this.lift(new combineLatest_1.CombineLatestOperator(project))}var combineLatest_1=__webpack_require__(333);exports.combineAll=combineAll},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),combineLatest_1=__webpack_require__(333);Observable_1.Observable.prototype.combineLatest=combineLatest_1.combineLatest},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concat_1=__webpack_require__(345);Observable_1.Observable.prototype.concat=concat_1.concat},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concatAll_1=__webpack_require__(429);Observable_1.Observable.prototype.concatAll=concatAll_1.concatAll},function(module,exports,__webpack_require__){"use strict";function concatAll(){return this.lift(new mergeAll_1.MergeAllOperator(1))}var mergeAll_1=__webpack_require__(346);exports.concatAll=concatAll},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concatMap_1=__webpack_require__(431);Observable_1.Observable.prototype.concatMap=concatMap_1.concatMap},function(module,exports,__webpack_require__){"use strict";function concatMap(project,resultSelector){return this.lift(new mergeMap_1.MergeMapOperator(project,resultSelector,1))}var mergeMap_1=__webpack_require__(432);exports.concatMap=concatMap},function(module,exports,__webpack_require__){"use strict";function mergeMap(project,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"number"==typeof resultSelector&&(concurrent=resultSelector,resultSelector=null),this.lift(new MergeMapOperator(project,resultSelector,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},subscribeToResult_1=__webpack_require__(339),OuterSubscriber_1=__webpack_require__(338);exports.mergeMap=mergeMap;var MergeMapOperator=function(){function MergeMapOperator(project,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.project=project,this.resultSelector=resultSelector,this.concurrent=concurrent}return MergeMapOperator.prototype.call=function(observer,source){return source._subscribe(new MergeMapSubscriber(observer,this.project,this.resultSelector,this.concurrent))},MergeMapOperator}();exports.MergeMapOperator=MergeMapOperator;var MergeMapSubscriber=function(_super){function MergeMapSubscriber(destination,project,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeMapSubscriber,_super),MergeMapSubscriber.prototype._next=function(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)},MergeMapSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result,value,index)},MergeMapSubscriber.prototype._innerSub=function(ish,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.resultSelector?this._notifyResultSelector(outerValue,innerValue,outerIndex,innerIndex):this.destination.next(innerValue)},MergeMapSubscriber.prototype._notifyResultSelector=function(outerValue,innerValue,outerIndex,innerIndex){var result;try{result=this.resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MergeMapSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeMapSubscriber=MergeMapSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),concatMapTo_1=__webpack_require__(434);Observable_1.Observable.prototype.concatMapTo=concatMapTo_1.concatMapTo},function(module,exports,__webpack_require__){"use strict";function concatMapTo(innerObservable,resultSelector){return this.lift(new mergeMapTo_1.MergeMapToOperator(innerObservable,resultSelector,1))}var mergeMapTo_1=__webpack_require__(435);exports.concatMapTo=concatMapTo},function(module,exports,__webpack_require__){"use strict";function mergeMapTo(innerObservable,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"number"==typeof resultSelector&&(concurrent=resultSelector,resultSelector=null),this.lift(new MergeMapToOperator(innerObservable,resultSelector,concurrent))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.mergeMapTo=mergeMapTo;var MergeMapToOperator=function(){function MergeMapToOperator(ish,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.ish=ish,this.resultSelector=resultSelector,this.concurrent=concurrent}return MergeMapToOperator.prototype.call=function(observer,source){return source._subscribe(new MergeMapToSubscriber(observer,this.ish,this.resultSelector,this.concurrent))},MergeMapToOperator}();exports.MergeMapToOperator=MergeMapToOperator;var MergeMapToSubscriber=function(_super){function MergeMapToSubscriber(destination,ish,resultSelector,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),_super.call(this,destination),this.ish=ish,this.resultSelector=resultSelector,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends(MergeMapToSubscriber,_super),MergeMapToSubscriber.prototype._next=function(value){if(this.active<this.concurrent){var resultSelector=this.resultSelector,index=this.index++,ish=this.ish,destination=this.destination;this.active++,this._innerSub(ish,destination,resultSelector,value,index)}else this.buffer.push(value)},MergeMapToSubscriber.prototype._innerSub=function(ish,destination,resultSelector,value,index){this.add(subscribeToResult_1.subscribeToResult(this,ish,value,index))},MergeMapToSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapToSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.trySelectResult(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},MergeMapToSubscriber.prototype.trySelectResult=function(outerValue,innerValue,outerIndex,innerIndex){var result,_a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{result=resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void destination.error(err)}destination.next(result)},MergeMapToSubscriber.prototype.notifyError=function(err){this.destination.error(err)},MergeMapToSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapToSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.MergeMapToSubscriber=MergeMapToSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),count_1=__webpack_require__(437);Observable_1.Observable.prototype.count=count_1.count},function(module,exports,__webpack_require__){"use strict";function count(predicate){return this.lift(new CountOperator(predicate,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.count=count;var CountOperator=function(){function CountOperator(predicate,source){this.predicate=predicate,this.source=source}return CountOperator.prototype.call=function(subscriber,source){return source._subscribe(new CountSubscriber(subscriber,this.predicate,this.source))},CountOperator}(),CountSubscriber=function(_super){function CountSubscriber(destination,predicate,source){_super.call(this,destination),this.predicate=predicate,this.source=source,this.count=0,this.index=0}return __extends(CountSubscriber,_super),CountSubscriber.prototype._next=function(value){this.predicate?this._tryPredicate(value):this.count++},CountSubscriber.prototype._tryPredicate=function(value){var result;try{result=this.predicate(value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),dematerialize_1=__webpack_require__(439);Observable_1.Observable.prototype.dematerialize=dematerialize_1.dematerialize},function(module,exports,__webpack_require__){"use strict";function dematerialize(){return this.lift(new DeMaterializeOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.dematerialize=dematerialize;var DeMaterializeOperator=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(subscriber,source){return source._subscribe(new DeMaterializeSubscriber(subscriber))},DeMaterializeOperator}(),DeMaterializeSubscriber=function(_super){function DeMaterializeSubscriber(destination){_super.call(this,destination)}return __extends(DeMaterializeSubscriber,_super),DeMaterializeSubscriber.prototype._next=function(value){value.observe(this.destination)},DeMaterializeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),debounce_1=__webpack_require__(441);Observable_1.Observable.prototype.debounce=debounce_1.debounce},function(module,exports,__webpack_require__){"use strict";function debounce(durationSelector){return this.lift(new DebounceOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.debounce=debounce;var DebounceOperator=function(){function DebounceOperator(durationSelector){this.durationSelector=durationSelector}return DebounceOperator.prototype.call=function(subscriber,source){return source._subscribe(new DebounceSubscriber(subscriber,this.durationSelector))},DebounceOperator}(),DebounceSubscriber=function(_super){function DebounceSubscriber(destination,durationSelector){_super.call(this,destination),this.durationSelector=durationSelector,this.hasValue=!1,this.durationSubscription=null}return __extends(DebounceSubscriber,_super),DebounceSubscriber.prototype._next=function(value){try{var result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(value,duration){var subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),subscription=subscribeToResult_1.subscribeToResult(this,duration),subscription.isUnsubscribed||this.add(this.durationSubscription=subscription)},DebounceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=null,subscription.unsubscribe(),this.remove(subscription)),this.value=null,this.hasValue=!1,_super.prototype._next.call(this,value)}},DebounceSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),debounceTime_1=__webpack_require__(443);Observable_1.Observable.prototype.debounceTime=debounceTime_1.debounceTime},function(module,exports,__webpack_require__){"use strict";function debounceTime(dueTime,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new DebounceTimeOperator(dueTime,scheduler))}function dispatchNext(subscriber){subscriber.debouncedNext()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.debounceTime=debounceTime;var DebounceTimeOperator=function(){function DebounceTimeOperator(dueTime,scheduler){this.dueTime=dueTime,this.scheduler=scheduler}return DebounceTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new DebounceTimeSubscriber(subscriber,this.dueTime,this.scheduler))},DebounceTimeOperator}(),DebounceTimeSubscriber=function(_super){function DebounceTimeSubscriber(destination,dueTime,scheduler){_super.call(this,destination),this.dueTime=dueTime,this.scheduler=scheduler,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return __extends(DebounceTimeSubscriber,_super),DebounceTimeSubscriber.prototype._next=function(value){this.clearDebounce(),this.lastValue=value,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},DebounceTimeSubscriber.prototype.clearDebounce=function(){var debouncedSubscription=this.debouncedSubscription;null!==debouncedSubscription&&(this.remove(debouncedSubscription),debouncedSubscription.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),defaultIfEmpty_1=__webpack_require__(445);Observable_1.Observable.prototype.defaultIfEmpty=defaultIfEmpty_1.defaultIfEmpty},function(module,exports,__webpack_require__){"use strict";function defaultIfEmpty(defaultValue){return void 0===defaultValue&&(defaultValue=null),this.lift(new DefaultIfEmptyOperator(defaultValue))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.defaultIfEmpty=defaultIfEmpty;var DefaultIfEmptyOperator=function(){function DefaultIfEmptyOperator(defaultValue){this.defaultValue=defaultValue}return DefaultIfEmptyOperator.prototype.call=function(subscriber,source){return source._subscribe(new DefaultIfEmptySubscriber(subscriber,this.defaultValue))},DefaultIfEmptyOperator}(),DefaultIfEmptySubscriber=function(_super){function DefaultIfEmptySubscriber(destination,defaultValue){_super.call(this,destination),this.defaultValue=defaultValue,this.isEmpty=!0}return __extends(DefaultIfEmptySubscriber,_super),DefaultIfEmptySubscriber.prototype._next=function(value){this.isEmpty=!1,this.destination.next(value)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),delay_1=__webpack_require__(447);Observable_1.Observable.prototype.delay=delay_1.delay},function(module,exports,__webpack_require__){"use strict";function delay(delay,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteDelay=isDate_1.isDate(delay),delayFor=absoluteDelay?+delay-scheduler.now():Math.abs(delay);return this.lift(new DelayOperator(delayFor,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),isDate_1=__webpack_require__(401),Subscriber_1=__webpack_require__(45),Notification_1=__webpack_require__(361);exports.delay=delay;var DelayOperator=function(){function DelayOperator(delay,scheduler){this.delay=delay,this.scheduler=scheduler}return DelayOperator.prototype.call=function(subscriber,source){return source._subscribe(new DelaySubscriber(subscriber,this.delay,this.scheduler))},DelayOperator}(),DelaySubscriber=function(_super){function DelaySubscriber(destination,delay,scheduler){_super.call(this,destination),this.delay=delay,this.scheduler=scheduler,this.queue=[],this.active=!1,this.errored=!1}return __extends(DelaySubscriber,_super),DelaySubscriber.dispatch=function(state){for(var source=state.source,queue=source.queue,scheduler=state.scheduler,destination=state.destination;queue.length>0&&queue[0].time-scheduler.now()<=0;)queue.shift().notification.observe(destination);if(queue.length>0){var delay_1=Math.max(0,queue[0].time-scheduler.now());this.schedule(state,delay_1)}else source.active=!1},DelaySubscriber.prototype._schedule=function(scheduler){this.active=!0,this.add(scheduler.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:scheduler}))},DelaySubscriber.prototype.scheduleNotification=function(notification){if(this.errored!==!0){var scheduler=this.scheduler,message=new DelayMessage(scheduler.now()+this.delay,notification);this.queue.push(message),this.active===!1&&this._schedule(scheduler)}},DelaySubscriber.prototype._next=function(value){this.scheduleNotification(Notification_1.Notification.createNext(value))},DelaySubscriber.prototype._error=function(err){this.errored=!0,this.queue=[],this.destination.error(err)},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(Notification_1.Notification.createComplete())},DelaySubscriber}(Subscriber_1.Subscriber),DelayMessage=function(){function DelayMessage(time,notification){this.time=time,this.notification=notification}return DelayMessage}()},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),delayWhen_1=__webpack_require__(449);Observable_1.Observable.prototype.delayWhen=delayWhen_1.delayWhen},function(module,exports,__webpack_require__){"use strict";function delayWhen(delayDurationSelector,subscriptionDelay){return subscriptionDelay?new SubscriptionDelayObservable(this,subscriptionDelay).lift(new DelayWhenOperator(delayDurationSelector)):this.lift(new DelayWhenOperator(delayDurationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Observable_1=__webpack_require__(41),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.delayWhen=delayWhen;var DelayWhenOperator=function(){function DelayWhenOperator(delayDurationSelector){this.delayDurationSelector=delayDurationSelector}return DelayWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new DelayWhenSubscriber(subscriber,this.delayDurationSelector))},DelayWhenOperator}(),DelayWhenSubscriber=function(_super){function DelayWhenSubscriber(destination,delayDurationSelector){_super.call(this,destination),this.delayDurationSelector=delayDurationSelector,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return __extends(DelayWhenSubscriber,_super),DelayWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(outerValue),this.removeSubscription(innerSub),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},DelayWhenSubscriber.prototype.notifyComplete=function(innerSub){var value=this.removeSubscription(innerSub);value&&this.destination.next(value),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(value){try{var delayNotifier=this.delayDurationSelector(value);delayNotifier&&this.tryDelay(delayNotifier,value)}catch(err){this.destination.error(err)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete()},DelayWhenSubscriber.prototype.removeSubscription=function(subscription){subscription.unsubscribe();var subscriptionIdx=this.delayNotifierSubscriptions.indexOf(subscription),value=null;return-1!==subscriptionIdx&&(value=this.values[subscriptionIdx],this.delayNotifierSubscriptions.splice(subscriptionIdx,1),this.values.splice(subscriptionIdx,1)),value},DelayWhenSubscriber.prototype.tryDelay=function(delayNotifier,value){var notifierSubscription=subscribeToResult_1.subscribeToResult(this,delayNotifier,value);this.add(notifierSubscription),this.delayNotifierSubscriptions.push(notifierSubscription),this.values.push(value)},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(OuterSubscriber_1.OuterSubscriber),SubscriptionDelayObservable=function(_super){function SubscriptionDelayObservable(source,subscriptionDelay){_super.call(this),this.source=source,this.subscriptionDelay=subscriptionDelay}return __extends(SubscriptionDelayObservable,_super),SubscriptionDelayObservable.prototype._subscribe=function(subscriber){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber,this.source))},SubscriptionDelayObservable}(Observable_1.Observable),SubscriptionDelaySubscriber=function(_super){function SubscriptionDelaySubscriber(parent,source){_super.call(this),this.parent=parent,this.source=source,this.sourceSubscribed=!1}return __extends(SubscriptionDelaySubscriber,_super),SubscriptionDelaySubscriber.prototype._next=function(unused){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(err){this.unsubscribe(),this.parent.error(err)},SubscriptionDelaySubscriber.prototype._complete=function(){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),distinctUntilChanged_1=__webpack_require__(451);Observable_1.Observable.prototype.distinctUntilChanged=distinctUntilChanged_1.distinctUntilChanged},function(module,exports,__webpack_require__){"use strict";function distinctUntilChanged(compare,keySelector){return this.lift(new DistinctUntilChangedOperator(compare,keySelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51);exports.distinctUntilChanged=distinctUntilChanged;var DistinctUntilChangedOperator=function(){function DistinctUntilChangedOperator(compare,keySelector){this.compare=compare,this.keySelector=keySelector}return DistinctUntilChangedOperator.prototype.call=function(subscriber,source){return source._subscribe(new DistinctUntilChangedSubscriber(subscriber,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),DistinctUntilChangedSubscriber=function(_super){function DistinctUntilChangedSubscriber(destination,compare,keySelector){_super.call(this,destination),this.keySelector=keySelector,this.hasKey=!1,"function"==typeof compare&&(this.compare=compare)}return __extends(DistinctUntilChangedSubscriber,_super),DistinctUntilChangedSubscriber.prototype.compare=function(x,y){return x===y},DistinctUntilChangedSubscriber.prototype._next=function(value){var keySelector=this.keySelector,key=value;if(keySelector&&(key=tryCatch_1.tryCatch(this.keySelector)(value),key===errorObject_1.errorObject))return this.destination.error(errorObject_1.errorObject.e);var result=!1;if(this.hasKey){if(result=tryCatch_1.tryCatch(this.compare)(this.key,key),result===errorObject_1.errorObject)return this.destination.error(errorObject_1.errorObject.e)}else this.hasKey=!0;Boolean(result)===!1&&(this.key=key,this.destination.next(value))},DistinctUntilChangedSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),do_1=__webpack_require__(453);Observable_1.Observable.prototype["do"]=do_1._do},function(module,exports,__webpack_require__){"use strict";function _do(nextOrObserver,error,complete){return this.lift(new DoOperator(nextOrObserver,error,complete))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports._do=_do;var DoOperator=function(){function DoOperator(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}return DoOperator.prototype.call=function(subscriber,source){return source._subscribe(new DoSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))},DoOperator}(),DoSubscriber=function(_super){function DoSubscriber(destination,nextOrObserver,error,complete){_super.call(this,destination);var safeSubscriber=new Subscriber_1.Subscriber(nextOrObserver,error,complete);safeSubscriber.syncErrorThrowable=!0,this.add(safeSubscriber),this.safeSubscriber=safeSubscriber}return __extends(DoSubscriber,_super),DoSubscriber.prototype._next=function(value){var safeSubscriber=this.safeSubscriber;safeSubscriber.next(value),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.next(value);
},DoSubscriber.prototype._error=function(err){var safeSubscriber=this.safeSubscriber;safeSubscriber.error(err),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.error(err)},DoSubscriber.prototype._complete=function(){var safeSubscriber=this.safeSubscriber;safeSubscriber.complete(),safeSubscriber.syncErrorThrown?this.destination.error(safeSubscriber.syncErrorValue):this.destination.complete()},DoSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),expand_1=__webpack_require__(455);Observable_1.Observable.prototype.expand=expand_1.expand},function(module,exports,__webpack_require__){"use strict";function expand(project,concurrent,scheduler){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),void 0===scheduler&&(scheduler=void 0),concurrent=1>(concurrent||0)?Number.POSITIVE_INFINITY:concurrent,this.lift(new ExpandOperator(project,concurrent,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.expand=expand;var ExpandOperator=function(){function ExpandOperator(project,concurrent,scheduler){this.project=project,this.concurrent=concurrent,this.scheduler=scheduler}return ExpandOperator.prototype.call=function(subscriber,source){return source._subscribe(new ExpandSubscriber(subscriber,this.project,this.concurrent,this.scheduler))},ExpandOperator}();exports.ExpandOperator=ExpandOperator;var ExpandSubscriber=function(_super){function ExpandSubscriber(destination,project,concurrent,scheduler){_super.call(this,destination),this.project=project,this.concurrent=concurrent,this.scheduler=scheduler,this.index=0,this.active=0,this.hasCompleted=!1,concurrent<Number.POSITIVE_INFINITY&&(this.buffer=[])}return __extends(ExpandSubscriber,_super),ExpandSubscriber.dispatch=function(arg){var subscriber=arg.subscriber,result=arg.result,value=arg.value,index=arg.index;subscriber.subscribeToProjection(result,value,index)},ExpandSubscriber.prototype._next=function(value){var destination=this.destination;if(destination.isUnsubscribed)return void this._complete();var index=this.index++;if(this.active<this.concurrent){destination.next(value);var result=tryCatch_1.tryCatch(this.project)(value,index);if(result===errorObject_1.errorObject)destination.error(errorObject_1.errorObject.e);else if(this.scheduler){var state={subscriber:this,result:result,value:value,index:index};this.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,state))}else this.subscribeToProjection(result,value,index)}else this.buffer.push(value)},ExpandSubscriber.prototype.subscribeToProjection=function(result,value,index){this.active++,this.add(subscribeToResult_1.subscribeToResult(this,result,value,index))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._next(innerValue)},ExpandSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer&&buffer.length>0&&this._next(buffer.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.ExpandSubscriber=ExpandSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),filter_1=__webpack_require__(457);Observable_1.Observable.prototype.filter=filter_1.filter},function(module,exports,__webpack_require__){"use strict";function filter(predicate,thisArg){return this.lift(new FilterOperator(predicate,thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.filter=filter;var FilterOperator=function(){function FilterOperator(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}return FilterOperator.prototype.call=function(subscriber,source){return source._subscribe(new FilterSubscriber(subscriber,this.predicate,this.thisArg))},FilterOperator}(),FilterSubscriber=function(_super){function FilterSubscriber(destination,predicate,thisArg){_super.call(this,destination),this.predicate=predicate,this.thisArg=thisArg,this.count=0,this.predicate=predicate}return __extends(FilterSubscriber,_super),FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)},FilterSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),finally_1=__webpack_require__(459);Observable_1.Observable.prototype["finally"]=finally_1._finally},function(module,exports,__webpack_require__){"use strict";function _finally(finallySelector){return this.lift(new FinallyOperator(finallySelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subscription_1=__webpack_require__(47);exports._finally=_finally;var FinallyOperator=function(){function FinallyOperator(finallySelector){this.finallySelector=finallySelector}return FinallyOperator.prototype.call=function(subscriber,source){return source._subscribe(new FinallySubscriber(subscriber,this.finallySelector))},FinallyOperator}(),FinallySubscriber=function(_super){function FinallySubscriber(destination,finallySelector){_super.call(this,destination),this.add(new Subscription_1.Subscription(finallySelector))}return __extends(FinallySubscriber,_super),FinallySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),first_1=__webpack_require__(461);Observable_1.Observable.prototype.first=first_1.first},function(module,exports,__webpack_require__){"use strict";function first(predicate,resultSelector,defaultValue){return this.lift(new FirstOperator(predicate,resultSelector,defaultValue,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyError_1=__webpack_require__(462);exports.first=first;var FirstOperator=function(){function FirstOperator(predicate,resultSelector,defaultValue,source){this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source}return FirstOperator.prototype.call=function(observer,source){return source._subscribe(new FirstSubscriber(observer,this.predicate,this.resultSelector,this.defaultValue,this.source))},FirstOperator}(),FirstSubscriber=function(_super){function FirstSubscriber(destination,predicate,resultSelector,defaultValue,source){_super.call(this,destination),this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source,this.index=0,this.hasCompleted=!1}return __extends(FirstSubscriber,_super),FirstSubscriber.prototype._next=function(value){var index=this.index++;this.predicate?this._tryPredicate(value,index):this._emit(value,index)},FirstSubscriber.prototype._tryPredicate=function(value,index){var result;try{result=this.predicate(value,index,this.source)}catch(err){return void this.destination.error(err)}result&&this._emit(value,index)},FirstSubscriber.prototype._emit=function(value,index){return this.resultSelector?void this._tryResultSelector(value,index):void this._emitFinal(value)},FirstSubscriber.prototype._tryResultSelector=function(value,index){var result;try{result=this.resultSelector(value,index)}catch(err){return void this.destination.error(err)}this._emitFinal(result)},FirstSubscriber.prototype._emitFinal=function(value){var destination=this.destination;destination.next(value),destination.complete(),this.hasCompleted=!0},FirstSubscriber.prototype._complete=function(){var destination=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||destination.error(new EmptyError_1.EmptyError):(destination.next(this.defaultValue),destination.complete())},FirstSubscriber}(Subscriber_1.Subscriber)},function(module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},EmptyError=function(_super){function EmptyError(){_super.call(this,"no elements in sequence"),this.name="EmptyError"}return __extends(EmptyError,_super),EmptyError}(Error);exports.EmptyError=EmptyError},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),groupBy_1=__webpack_require__(464);Observable_1.Observable.prototype.groupBy=groupBy_1.groupBy},function(module,exports,__webpack_require__){"use strict";function groupBy(keySelector,elementSelector,durationSelector){return this.lift(new GroupByOperator(this,keySelector,elementSelector,durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subscription_1=__webpack_require__(47),Observable_1=__webpack_require__(41),Subject_1=__webpack_require__(40),Map_1=__webpack_require__(465),FastMap_1=__webpack_require__(467);exports.groupBy=groupBy;var GroupByOperator=function(){function GroupByOperator(source,keySelector,elementSelector,durationSelector){this.source=source,this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector}return GroupByOperator.prototype.call=function(subscriber,source){return source._subscribe(new GroupBySubscriber(subscriber,this.keySelector,this.elementSelector,this.durationSelector))},GroupByOperator}(),GroupBySubscriber=function(_super){function GroupBySubscriber(destination,keySelector,elementSelector,durationSelector){_super.call(this),this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0,this.destination=destination,this.add(destination)}return __extends(GroupBySubscriber,_super),GroupBySubscriber.prototype._next=function(value){var key;try{key=this.keySelector(value)}catch(err){return void this.error(err)}this._group(value,key)},GroupBySubscriber.prototype._group=function(value,key){var groups=this.groups;groups||(groups=this.groups="string"==typeof key?new FastMap_1.FastMap:new Map_1.Map);var group=groups.get(key);if(!group){groups.set(key,group=new Subject_1.Subject);var groupedObservable=new GroupedObservable(key,group,this);this.durationSelector&&this._selectDuration(key,group),this.destination.next(groupedObservable)}this.elementSelector?this._selectElement(value,group):this.tryGroupNext(value,group)},GroupBySubscriber.prototype._selectElement=function(value,group){var result;try{result=this.elementSelector(value)}catch(err){return void this.error(err)}this.tryGroupNext(result,group)},GroupBySubscriber.prototype._selectDuration=function(key,group){var duration;try{duration=this.durationSelector(new GroupedObservable(key,group))}catch(err){return void this.error(err)}this.add(duration.subscribe(new GroupDurationSubscriber(key,group,this)))},GroupBySubscriber.prototype.tryGroupNext=function(value,group){group.isUnsubscribed||group.next(value)},GroupBySubscriber.prototype._error=function(err){var groups=this.groups;groups&&(groups.forEach(function(group,key){group.error(err)}),groups.clear()),this.destination.error(err)},GroupBySubscriber.prototype._complete=function(){var groups=this.groups;groups&&(groups.forEach(function(group,key){group.complete()}),groups.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(key){this.groups["delete"](key)},GroupBySubscriber.prototype.unsubscribe=function(){this.isUnsubscribed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&_super.prototype.unsubscribe.call(this))},GroupBySubscriber}(Subscriber_1.Subscriber),GroupDurationSubscriber=function(_super){function GroupDurationSubscriber(key,group,parent){_super.call(this),this.key=key,this.group=group,this.parent=parent}return __extends(GroupDurationSubscriber,_super),GroupDurationSubscriber.prototype._next=function(value){this.tryComplete()},GroupDurationSubscriber.prototype._error=function(err){this.tryError(err)},GroupDurationSubscriber.prototype._complete=function(){this.tryComplete()},GroupDurationSubscriber.prototype.tryError=function(err){var group=this.group;group.isUnsubscribed||group.error(err),this.parent.removeGroup(this.key)},GroupDurationSubscriber.prototype.tryComplete=function(){var group=this.group;group.isUnsubscribed||group.complete(),this.parent.removeGroup(this.key)},GroupDurationSubscriber}(Subscriber_1.Subscriber),GroupedObservable=function(_super){function GroupedObservable(key,groupSubject,refCountSubscription){_super.call(this),this.key=key,this.groupSubject=groupSubject,this.refCountSubscription=refCountSubscription}return __extends(GroupedObservable,_super),GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new Subscription_1.Subscription,_a=this,refCountSubscription=_a.refCountSubscription,groupSubject=_a.groupSubject;return refCountSubscription&&!refCountSubscription.isUnsubscribed&&subscription.add(new InnerRefCountSubscription(refCountSubscription)),subscription.add(groupSubject.subscribe(subscriber)),subscription},GroupedObservable}(Observable_1.Observable);exports.GroupedObservable=GroupedObservable;var InnerRefCountSubscription=function(_super){function InnerRefCountSubscription(parent){_super.call(this),this.parent=parent,parent.count++}return __extends(InnerRefCountSubscription,_super),InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;parent.isUnsubscribed||this.isUnsubscribed||(_super.prototype.unsubscribe.call(this),parent.count-=1,0===parent.count&&parent.attemptedToUnsubscribe&&parent.unsubscribe())},InnerRefCountSubscription}(Subscription_1.Subscription)},function(module,exports,__webpack_require__){"use strict";var root_1=__webpack_require__(42),MapPolyfill_1=__webpack_require__(466);exports.Map=root_1.root.Map||function(){return MapPolyfill_1.MapPolyfill}()},function(module,exports){"use strict";var MapPolyfill=function(){function MapPolyfill(){this.size=0,this._values=[],this._keys=[]}return MapPolyfill.prototype.get=function(key){var i=this._keys.indexOf(key);return-1===i?void 0:this._values[i]},MapPolyfill.prototype.set=function(key,value){var i=this._keys.indexOf(key);return-1===i?(this._keys.push(key),this._values.push(value),this.size++):this._values[i]=value,this},MapPolyfill.prototype["delete"]=function(key){var i=this._keys.indexOf(key);return-1===i?!1:(this._values.splice(i,1),this._keys.splice(i,1),this.size--,!0)},MapPolyfill.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},MapPolyfill.prototype.forEach=function(cb,thisArg){for(var i=0;i<this.size;i++)cb.call(thisArg,this._values[i],this._keys[i])},MapPolyfill}();exports.MapPolyfill=MapPolyfill},function(module,exports){"use strict";var FastMap=function(){function FastMap(){this.values={}}return FastMap.prototype["delete"]=function(key){return this.values[key]=null,!0},FastMap.prototype.set=function(key,value){return this.values[key]=value,this},FastMap.prototype.get=function(key){return this.values[key]},FastMap.prototype.forEach=function(cb,thisArg){var values=this.values;for(var key in values)values.hasOwnProperty(key)&&null!==values[key]&&cb.call(thisArg,values[key],key)},FastMap.prototype.clear=function(){this.values={}},FastMap}();exports.FastMap=FastMap},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),ignoreElements_1=__webpack_require__(469);Observable_1.Observable.prototype.ignoreElements=ignoreElements_1.ignoreElements},function(module,exports,__webpack_require__){"use strict";function ignoreElements(){return this.lift(new IgnoreElementsOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),noop_1=__webpack_require__(389);exports.ignoreElements=ignoreElements;var IgnoreElementsOperator=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(subscriber,source){return source._subscribe(new IgnoreElementsSubscriber(subscriber))},IgnoreElementsOperator}(),IgnoreElementsSubscriber=function(_super){function IgnoreElementsSubscriber(){_super.apply(this,arguments)}return __extends(IgnoreElementsSubscriber,_super),IgnoreElementsSubscriber.prototype._next=function(unused){noop_1.noop()},IgnoreElementsSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),audit_1=__webpack_require__(471);Observable_1.Observable.prototype.audit=audit_1.audit},function(module,exports,__webpack_require__){"use strict";function audit(durationSelector){return this.lift(new AuditOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.audit=audit;var AuditOperator=function(){function AuditOperator(durationSelector){this.durationSelector=durationSelector}return AuditOperator.prototype.call=function(subscriber,source){return source._subscribe(new AuditSubscriber(subscriber,this.durationSelector))},AuditOperator}(),AuditSubscriber=function(_super){function AuditSubscriber(destination,durationSelector){_super.call(this,destination),this.durationSelector=durationSelector,this.hasValue=!1}return __extends(AuditSubscriber,_super),AuditSubscriber.prototype._next=function(value){if(this.value=value,this.hasValue=!0,!this.throttled){var duration=tryCatch_1.tryCatch(this.durationSelector)(value);duration===errorObject_1.errorObject?this.destination.error(errorObject_1.errorObject.e):this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,duration))}},AuditSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),auditTime_1=__webpack_require__(473);Observable_1.Observable.prototype.auditTime=auditTime_1.auditTime},function(module,exports,__webpack_require__){"use strict";function auditTime(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new AuditTimeOperator(duration,scheduler))}function dispatchNext(subscriber){subscriber.clearThrottle()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),Subscriber_1=__webpack_require__(45);exports.auditTime=auditTime;var AuditTimeOperator=function(){function AuditTimeOperator(duration,scheduler){this.duration=duration,this.scheduler=scheduler}return AuditTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new AuditTimeSubscriber(subscriber,this.duration,this.scheduler))},AuditTimeOperator}(),AuditTimeSubscriber=function(_super){function AuditTimeSubscriber(destination,duration,scheduler){_super.call(this,destination),this.duration=duration,this.scheduler=scheduler,this.hasValue=!1}return __extends(AuditTimeSubscriber,_super),AuditTimeSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,this))},AuditTimeSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),last_1=__webpack_require__(475);Observable_1.Observable.prototype.last=last_1.last},function(module,exports,__webpack_require__){"use strict";function last(predicate,resultSelector,defaultValue){return this.lift(new LastOperator(predicate,resultSelector,defaultValue,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyError_1=__webpack_require__(462);exports.last=last;var LastOperator=function(){function LastOperator(predicate,resultSelector,defaultValue,source){this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source}return LastOperator.prototype.call=function(observer,source){return source._subscribe(new LastSubscriber(observer,this.predicate,this.resultSelector,this.defaultValue,this.source))},LastOperator}(),LastSubscriber=function(_super){function LastSubscriber(destination,predicate,resultSelector,defaultValue,source){_super.call(this,destination),this.predicate=predicate,this.resultSelector=resultSelector,this.defaultValue=defaultValue,this.source=source,this.hasValue=!1,this.index=0,"undefined"!=typeof defaultValue&&(this.lastValue=defaultValue,this.hasValue=!0)}return __extends(LastSubscriber,_super),LastSubscriber.prototype._next=function(value){var index=this.index++;if(this.predicate)this._tryPredicate(value,index);else{if(this.resultSelector)return void this._tryResultSelector(value,index);this.lastValue=value,this.hasValue=!0}},LastSubscriber.prototype._tryPredicate=function(value,index){var result;try{result=this.predicate(value,index,this.source)}catch(err){return void this.destination.error(err)}if(result){if(this.resultSelector)return void this._tryResultSelector(value,index);this.lastValue=value,this.hasValue=!0}},LastSubscriber.prototype._tryResultSelector=function(value,index){var result;try{result=this.resultSelector(value,index)}catch(err){return void this.destination.error(err)}this.lastValue=result,this.hasValue=!0},LastSubscriber.prototype._complete=function(){var destination=this.destination;this.hasValue?(destination.next(this.lastValue),destination.complete()):destination.error(new EmptyError_1.EmptyError)},LastSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),let_1=__webpack_require__(477);Observable_1.Observable.prototype.let=let_1.letProto,Observable_1.Observable.prototype.letBind=let_1.letProto},function(module,exports){"use strict";function letProto(func){return func(this)}exports.letProto=letProto},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),every_1=__webpack_require__(479);Observable_1.Observable.prototype.every=every_1.every},function(module,exports,__webpack_require__){"use strict";function every(predicate,thisArg){return this.lift(new EveryOperator(predicate,thisArg,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.every=every;var EveryOperator=function(){function EveryOperator(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}return EveryOperator.prototype.call=function(observer,source){return source._subscribe(new EverySubscriber(observer,this.predicate,this.thisArg,this.source))},EveryOperator}(),EverySubscriber=function(_super){function EverySubscriber(destination,predicate,thisArg,source){_super.call(this,destination),this.predicate=predicate,this.thisArg=thisArg,this.source=source,this.index=0,this.thisArg=thisArg||this}return __extends(EverySubscriber,_super),EverySubscriber.prototype.notifyComplete=function(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()},EverySubscriber.prototype._next=function(value){var result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),map_1=__webpack_require__(481);Observable_1.Observable.prototype.map=map_1.map},function(module,exports,__webpack_require__){"use strict";function map(project,thisArg){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new MapOperator(project,thisArg))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.map=map;var MapOperator=function(){function MapOperator(project,thisArg){this.project=project,this.thisArg=thisArg}return MapOperator.prototype.call=function(subscriber,source){return source._subscribe(new MapSubscriber(subscriber,this.project,this.thisArg))},MapOperator}(),MapSubscriber=function(_super){function MapSubscriber(destination,project,thisArg){_super.call(this,destination),this.project=project,this.count=0,this.thisArg=thisArg||this}return __extends(MapSubscriber,_super),MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MapSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mapTo_1=__webpack_require__(483);Observable_1.Observable.prototype.mapTo=mapTo_1.mapTo},function(module,exports,__webpack_require__){"use strict";function mapTo(value){return this.lift(new MapToOperator(value))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.mapTo=mapTo;var MapToOperator=function(){function MapToOperator(value){this.value=value}return MapToOperator.prototype.call=function(subscriber,source){return source._subscribe(new MapToSubscriber(subscriber,this.value))},MapToOperator}(),MapToSubscriber=function(_super){function MapToSubscriber(destination,value){_super.call(this,destination),this.value=value}return __extends(MapToSubscriber,_super),MapToSubscriber.prototype._next=function(x){this.destination.next(this.value)},MapToSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),materialize_1=__webpack_require__(485);Observable_1.Observable.prototype.materialize=materialize_1.materialize},function(module,exports,__webpack_require__){"use strict";function materialize(){return this.lift(new MaterializeOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Notification_1=__webpack_require__(361);exports.materialize=materialize;var MaterializeOperator=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(subscriber,source){return source._subscribe(new MaterializeSubscriber(subscriber))},MaterializeOperator}(),MaterializeSubscriber=function(_super){function MaterializeSubscriber(destination){_super.call(this,destination)}return __extends(MaterializeSubscriber,_super),MaterializeSubscriber.prototype._next=function(value){this.destination.next(Notification_1.Notification.createNext(value))},MaterializeSubscriber.prototype._error=function(err){var destination=this.destination;destination.next(Notification_1.Notification.createError(err)),destination.complete()},MaterializeSubscriber.prototype._complete=function(){var destination=this.destination;destination.next(Notification_1.Notification.createComplete()),destination.complete()},MaterializeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),merge_1=__webpack_require__(383);Observable_1.Observable.prototype.merge=merge_1.merge},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mergeAll_1=__webpack_require__(346);Observable_1.Observable.prototype.mergeAll=mergeAll_1.mergeAll},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mergeMap_1=__webpack_require__(432);Observable_1.Observable.prototype.mergeMap=mergeMap_1.mergeMap,Observable_1.Observable.prototype.flatMap=mergeMap_1.mergeMap},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),mergeMapTo_1=__webpack_require__(435);Observable_1.Observable.prototype.flatMapTo=mergeMapTo_1.mergeMapTo,Observable_1.Observable.prototype.mergeMapTo=mergeMapTo_1.mergeMapTo},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),multicast_1=__webpack_require__(420);Observable_1.Observable.prototype.multicast=multicast_1.multicast},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),observeOn_1=__webpack_require__(360);Observable_1.Observable.prototype.observeOn=observeOn_1.observeOn},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),partition_1=__webpack_require__(493);Observable_1.Observable.prototype.partition=partition_1.partition},function(module,exports,__webpack_require__){"use strict";function partition(predicate,thisArg){return[filter_1.filter.call(this,predicate),filter_1.filter.call(this,not_1.not(predicate,thisArg))]}var not_1=__webpack_require__(494),filter_1=__webpack_require__(457);exports.partition=partition},function(module,exports){"use strict";function not(pred,thisArg){function notPred(){
return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=pred,notPred.thisArg=thisArg,notPred}exports.not=not},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),pluck_1=__webpack_require__(496);Observable_1.Observable.prototype.pluck=pluck_1.pluck},function(module,exports,__webpack_require__){"use strict";function pluck(){for(var properties=[],_i=0;_i<arguments.length;_i++)properties[_i-0]=arguments[_i];var length=properties.length;if(0===length)throw new Error("List of properties cannot be empty.");return map_1.map.call(this,plucker(properties,length))}function plucker(props,length){var mapper=function(x){for(var currentProp=x,i=0;length>i;i++){var p=currentProp[props[i]];if("undefined"==typeof p)return;currentProp=p}return currentProp};return mapper}var map_1=__webpack_require__(481);exports.pluck=pluck},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publish_1=__webpack_require__(498);Observable_1.Observable.prototype.publish=publish_1.publish},function(module,exports,__webpack_require__){"use strict";function publish(){return multicast_1.multicast.call(this,new Subject_1.Subject)}var Subject_1=__webpack_require__(40),multicast_1=__webpack_require__(420);exports.publish=publish},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publishBehavior_1=__webpack_require__(500);Observable_1.Observable.prototype.publishBehavior=publishBehavior_1.publishBehavior},function(module,exports,__webpack_require__){"use strict";function publishBehavior(value){return multicast_1.multicast.call(this,new BehaviorSubject_1.BehaviorSubject(value))}var BehaviorSubject_1=__webpack_require__(501),multicast_1=__webpack_require__(420);exports.publishBehavior=publishBehavior},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),throwError_1=__webpack_require__(58),ObjectUnsubscribedError_1=__webpack_require__(59),BehaviorSubject=function(_super){function BehaviorSubject(_value){_super.call(this),this._value=_value}return __extends(BehaviorSubject,_super),BehaviorSubject.prototype.getValue=function(){if(this.hasErrored)throwError_1.throwError(this.errorValue);else{if(!this.isUnsubscribed)return this._value;throwError_1.throwError(new ObjectUnsubscribedError_1.ObjectUnsubscribedError)}},Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.isUnsubscribed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype._next=function(value){_super.prototype._next.call(this,this._value=value)},BehaviorSubject.prototype._error=function(err){this.hasErrored=!0,_super.prototype._error.call(this,this.errorValue=err)},BehaviorSubject}(Subject_1.Subject);exports.BehaviorSubject=BehaviorSubject},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publishReplay_1=__webpack_require__(417);Observable_1.Observable.prototype.publishReplay=publishReplay_1.publishReplay},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),publishLast_1=__webpack_require__(504);Observable_1.Observable.prototype.publishLast=publishLast_1.publishLast},function(module,exports,__webpack_require__){"use strict";function publishLast(){return multicast_1.multicast.call(this,new AsyncSubject_1.AsyncSubject)}var AsyncSubject_1=__webpack_require__(328),multicast_1=__webpack_require__(420);exports.publishLast=publishLast},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),race_1=__webpack_require__(385);Observable_1.Observable.prototype.race=race_1.race},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),reduce_1=__webpack_require__(507);Observable_1.Observable.prototype.reduce=reduce_1.reduce},function(module,exports,__webpack_require__){"use strict";function reduce(project,seed){return this.lift(new ReduceOperator(project,seed))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.reduce=reduce;var ReduceOperator=function(){function ReduceOperator(project,seed){this.project=project,this.seed=seed}return ReduceOperator.prototype.call=function(subscriber,source){return source._subscribe(new ReduceSubscriber(subscriber,this.project,this.seed))},ReduceOperator}();exports.ReduceOperator=ReduceOperator;var ReduceSubscriber=function(_super){function ReduceSubscriber(destination,project,seed){_super.call(this,destination),this.hasValue=!1,this.acc=seed,this.project=project,this.hasSeed="undefined"!=typeof seed}return __extends(ReduceSubscriber,_super),ReduceSubscriber.prototype._next=function(value){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(value):(this.acc=value,this.hasValue=!0)},ReduceSubscriber.prototype._tryReduce=function(value){var result;try{result=this.project(this.acc,value)}catch(err){return void this.destination.error(err)}this.acc=result},ReduceSubscriber.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},ReduceSubscriber}(Subscriber_1.Subscriber);exports.ReduceSubscriber=ReduceSubscriber},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),repeat_1=__webpack_require__(509);Observable_1.Observable.prototype.repeat=repeat_1.repeat},function(module,exports,__webpack_require__){"use strict";function repeat(count){return void 0===count&&(count=-1),0===count?new EmptyObservable_1.EmptyObservable:0>count?this.lift(new RepeatOperator(-1,this)):this.lift(new RepeatOperator(count-1,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyObservable_1=__webpack_require__(336);exports.repeat=repeat;var RepeatOperator=function(){function RepeatOperator(count,source){this.count=count,this.source=source}return RepeatOperator.prototype.call=function(subscriber,source){return source._subscribe(new RepeatSubscriber(subscriber,this.count,this.source))},RepeatOperator}(),RepeatSubscriber=function(_super){function RepeatSubscriber(destination,count,source){_super.call(this,destination),this.count=count,this.source=source}return __extends(RepeatSubscriber,_super),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.complete.call(this);count>-1&&(this.count=count-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,source.subscribe(this)}},RepeatSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),retry_1=__webpack_require__(511);Observable_1.Observable.prototype.retry=retry_1.retry},function(module,exports,__webpack_require__){"use strict";function retry(count){return void 0===count&&(count=-1),this.lift(new RetryOperator(count,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.retry=retry;var RetryOperator=function(){function RetryOperator(count,source){this.count=count,this.source=source}return RetryOperator.prototype.call=function(subscriber,source){return source._subscribe(new RetrySubscriber(subscriber,this.count,this.source))},RetryOperator}(),RetrySubscriber=function(_super){function RetrySubscriber(destination,count,source){_super.call(this,destination),this.count=count,this.source=source}return __extends(RetrySubscriber,_super),RetrySubscriber.prototype.error=function(err){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.error.call(this,err);count>-1&&(this.count=count-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,source.subscribe(this)}},RetrySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),retryWhen_1=__webpack_require__(513);Observable_1.Observable.prototype.retryWhen=retryWhen_1.retryWhen},function(module,exports,__webpack_require__){"use strict";function retryWhen(notifier){return this.lift(new RetryWhenOperator(notifier,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.retryWhen=retryWhen;var RetryWhenOperator=function(){function RetryWhenOperator(notifier,source){this.notifier=notifier,this.source=source}return RetryWhenOperator.prototype.call=function(subscriber,source){return source._subscribe(new RetryWhenSubscriber(subscriber,this.notifier,this.source))},RetryWhenOperator}(),RetryWhenSubscriber=function(_super){function RetryWhenSubscriber(destination,notifier,source){_super.call(this,destination),this.notifier=notifier,this.source=source}return __extends(RetryWhenSubscriber,_super),RetryWhenSubscriber.prototype.error=function(err){if(!this.isStopped){var errors=this.errors,retries=this.retries,retriesSubscription=this.retriesSubscription;if(retries)this.errors=null,this.retriesSubscription=null;else{if(errors=new Subject_1.Subject,retries=tryCatch_1.tryCatch(this.notifier)(errors),retries===errorObject_1.errorObject)return _super.prototype.error.call(this,errorObject_1.errorObject.e);retriesSubscription=subscribeToResult_1.subscribeToResult(this,retries)}this.unsubscribe(),this.isUnsubscribed=!1,this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,errors.next(err)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var _a=this,errors=_a.errors,retriesSubscription=_a.retriesSubscription;errors&&(errors.unsubscribe(),this.errors=null),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,errors=_a.errors,retries=_a.retries,retriesSubscription=_a.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,this.source.subscribe(this)},RetryWhenSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),sample_1=__webpack_require__(515);Observable_1.Observable.prototype.sample=sample_1.sample},function(module,exports,__webpack_require__){"use strict";function sample(notifier){return this.lift(new SampleOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.sample=sample;var SampleOperator=function(){function SampleOperator(notifier){this.notifier=notifier}return SampleOperator.prototype.call=function(subscriber,source){return source._subscribe(new SampleSubscriber(subscriber,this.notifier))},SampleOperator}(),SampleSubscriber=function(_super){function SampleSubscriber(destination,notifier){_super.call(this,destination),this.hasValue=!1,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(SampleSubscriber,_super),SampleSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),sampleTime_1=__webpack_require__(517);Observable_1.Observable.prototype.sampleTime=sampleTime_1.sampleTime},function(module,exports,__webpack_require__){"use strict";function sampleTime(period,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new SampleTimeOperator(period,scheduler))}function dispatchNotification(state){var subscriber=state.subscriber,period=state.period;subscriber.notifyNext(),this.schedule(state,period)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.sampleTime=sampleTime;var SampleTimeOperator=function(){function SampleTimeOperator(period,scheduler){this.period=period,this.scheduler=scheduler}return SampleTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new SampleTimeSubscriber(subscriber,this.period,this.scheduler))},SampleTimeOperator}(),SampleTimeSubscriber=function(_super){function SampleTimeSubscriber(destination,period,scheduler){_super.call(this,destination),this.period=period,this.scheduler=scheduler,this.hasValue=!1,this.add(scheduler.schedule(dispatchNotification,period,{subscriber:this,period:period}))}return __extends(SampleTimeSubscriber,_super),SampleTimeSubscriber.prototype._next=function(value){this.lastValue=value,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),scan_1=__webpack_require__(519);Observable_1.Observable.prototype.scan=scan_1.scan},function(module,exports,__webpack_require__){"use strict";function scan(accumulator,seed){return this.lift(new ScanOperator(accumulator,seed))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.scan=scan;var ScanOperator=function(){function ScanOperator(accumulator,seed){this.accumulator=accumulator,this.seed=seed}return ScanOperator.prototype.call=function(subscriber,source){return source._subscribe(new ScanSubscriber(subscriber,this.accumulator,this.seed))},ScanOperator}(),ScanSubscriber=function(_super){function ScanSubscriber(destination,accumulator,seed){_super.call(this,destination),this.accumulator=accumulator,this.index=0,this.accumulatorSet=!1,this.seed=seed,this.accumulatorSet="undefined"!=typeof seed}return __extends(ScanSubscriber,_super),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(value){this.accumulatorSet=!0,this._seed=value},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(value){return this.accumulatorSet?this._tryNext(value):(this.seed=value,void this.destination.next(value))},ScanSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)},ScanSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),share_1=__webpack_require__(521);Observable_1.Observable.prototype.share=share_1.share},function(module,exports,__webpack_require__){"use strict";function shareSubjectFactory(){return new Subject_1.Subject}function share(){return multicast_1.multicast.call(this,shareSubjectFactory).refCount()}var multicast_1=__webpack_require__(420),Subject_1=__webpack_require__(40);exports.share=share},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),single_1=__webpack_require__(523);Observable_1.Observable.prototype.single=single_1.single},function(module,exports,__webpack_require__){"use strict";function single(predicate){return this.lift(new SingleOperator(predicate,this))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),EmptyError_1=__webpack_require__(462);exports.single=single;var SingleOperator=function(){function SingleOperator(predicate,source){this.predicate=predicate,this.source=source}return SingleOperator.prototype.call=function(subscriber,source){return source._subscribe(new SingleSubscriber(subscriber,this.predicate,this.source))},SingleOperator}(),SingleSubscriber=function(_super){function SingleSubscriber(destination,predicate,source){_super.call(this,destination),this.predicate=predicate,this.source=source,this.seenValue=!1,this.index=0}return __extends(SingleSubscriber,_super),SingleSubscriber.prototype.applySingleValue=function(value){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=value)},SingleSubscriber.prototype._next=function(value){var predicate=this.predicate;this.index++,predicate?this.tryNext(value):this.applySingleValue(value)},SingleSubscriber.prototype.tryNext=function(value){try{var result=this.predicate(value,this.index,this.source);result&&this.applySingleValue(value)}catch(err){this.destination.error(err)}},SingleSubscriber.prototype._complete=function(){var destination=this.destination;this.index>0?(destination.next(this.seenValue?this.singleValue:void 0),destination.complete()):destination.error(new EmptyError_1.EmptyError)},SingleSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),skip_1=__webpack_require__(525);Observable_1.Observable.prototype.skip=skip_1.skip},function(module,exports,__webpack_require__){"use strict";function skip(total){return this.lift(new SkipOperator(total))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.skip=skip;var SkipOperator=function(){function SkipOperator(total){this.total=total}return SkipOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipSubscriber(subscriber,this.total))},SkipOperator}(),SkipSubscriber=function(_super){function SkipSubscriber(destination,total){_super.call(this,destination),this.total=total,this.count=0}return __extends(SkipSubscriber,_super),SkipSubscriber.prototype._next=function(x){++this.count>this.total&&this.destination.next(x)},SkipSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),skipUntil_1=__webpack_require__(527);Observable_1.Observable.prototype.skipUntil=skipUntil_1.skipUntil},function(module,exports,__webpack_require__){"use strict";function skipUntil(notifier){return this.lift(new SkipUntilOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.skipUntil=skipUntil;var SkipUntilOperator=function(){function SkipUntilOperator(notifier){this.notifier=notifier}return SkipUntilOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipUntilSubscriber(subscriber,this.notifier))},SkipUntilOperator}(),SkipUntilSubscriber=function(_super){function SkipUntilSubscriber(destination,notifier){_super.call(this,destination),this.hasValue=!1,this.isInnerStopped=!1,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(SkipUntilSubscriber,_super),SkipUntilSubscriber.prototype._next=function(value){this.hasValue&&_super.prototype._next.call(this,value)},SkipUntilSubscriber.prototype._complete=function(){this.isInnerStopped?_super.prototype._complete.call(this):this.unsubscribe()},SkipUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.hasValue=!0},SkipUntilSubscriber.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&_super.prototype._complete.call(this)},SkipUntilSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),skipWhile_1=__webpack_require__(529);Observable_1.Observable.prototype.skipWhile=skipWhile_1.skipWhile},function(module,exports,__webpack_require__){"use strict";function skipWhile(predicate){return this.lift(new SkipWhileOperator(predicate))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.skipWhile=skipWhile;var SkipWhileOperator=function(){function SkipWhileOperator(predicate){this.predicate=predicate}return SkipWhileOperator.prototype.call=function(subscriber,source){return source._subscribe(new SkipWhileSubscriber(subscriber,this.predicate))},SkipWhileOperator}(),SkipWhileSubscriber=function(_super){function SkipWhileSubscriber(destination,predicate){_super.call(this,destination),this.predicate=predicate,this.skipping=!0,this.index=0}return __extends(SkipWhileSubscriber,_super),SkipWhileSubscriber.prototype._next=function(value){var destination=this.destination;this.skipping&&this.tryCallPredicate(value),this.skipping||destination.next(value)},SkipWhileSubscriber.prototype.tryCallPredicate=function(value){try{var result=this.predicate(value,this.index++);this.skipping=Boolean(result)}catch(err){this.destination.error(err)}},SkipWhileSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),startWith_1=__webpack_require__(531);Observable_1.Observable.prototype.startWith=startWith_1.startWith},function(module,exports,__webpack_require__){"use strict";function startWith(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i-0]=arguments[_i];var scheduler=array[array.length-1];isScheduler_1.isScheduler(scheduler)?array.pop():scheduler=null;var len=array.length;return 1===len?concat_1.concatStatic(new ScalarObservable_1.ScalarObservable(array[0],scheduler),this):len>1?concat_1.concatStatic(new ArrayObservable_1.ArrayObservable(array,scheduler),this):concat_1.concatStatic(new EmptyObservable_1.EmptyObservable(scheduler),this)}var ArrayObservable_1=__webpack_require__(334),ScalarObservable_1=__webpack_require__(335),EmptyObservable_1=__webpack_require__(336),concat_1=__webpack_require__(345),isScheduler_1=__webpack_require__(337);exports.startWith=startWith},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),subscribeOn_1=__webpack_require__(533);Observable_1.Observable.prototype.subscribeOn=subscribeOn_1.subscribeOn},function(module,exports,__webpack_require__){"use strict";function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),new SubscribeOnObservable_1.SubscribeOnObservable(this,delay,scheduler)}var SubscribeOnObservable_1=__webpack_require__(534);exports.subscribeOn=subscribeOn},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Observable_1=__webpack_require__(41),asap_1=__webpack_require__(535),isNumeric_1=__webpack_require__(375),SubscribeOnObservable=function(_super){function SubscribeOnObservable(source,delayTime,scheduler){void 0===delayTime&&(delayTime=0),void 0===scheduler&&(scheduler=asap_1.asap),_super.call(this),this.source=source,this.delayTime=delayTime,this.scheduler=scheduler,(!isNumeric_1.isNumeric(delayTime)||0>delayTime)&&(this.delayTime=0),scheduler&&"function"==typeof scheduler.schedule||(this.scheduler=asap_1.asap)}return __extends(SubscribeOnObservable,_super),SubscribeOnObservable.create=function(source,delay,scheduler){return void 0===delay&&(delay=0),void 0===scheduler&&(scheduler=asap_1.asap),new SubscribeOnObservable(source,delay,scheduler)},SubscribeOnObservable.dispatch=function(arg){var source=arg.source,subscriber=arg.subscriber;return source.subscribe(subscriber)},SubscribeOnObservable.prototype._subscribe=function(subscriber){var delay=this.delayTime,source=this.source,scheduler=this.scheduler;return scheduler.schedule(SubscribeOnObservable.dispatch,delay,{source:source,subscriber:subscriber})},SubscribeOnObservable}(Observable_1.Observable);exports.SubscribeOnObservable=SubscribeOnObservable},function(module,exports,__webpack_require__){"use strict";var AsapScheduler_1=__webpack_require__(536);exports.asap=new AsapScheduler_1.AsapScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},AsapAction_1=__webpack_require__(537),QueueScheduler_1=__webpack_require__(379),AsapScheduler=function(_super){function AsapScheduler(){_super.apply(this,arguments)}return __extends(AsapScheduler,_super),AsapScheduler.prototype.scheduleNow=function(work,state){return new AsapAction_1.AsapAction(this,work).schedule(state)},AsapScheduler}(QueueScheduler_1.QueueScheduler);exports.AsapScheduler=AsapScheduler},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Immediate_1=__webpack_require__(538),FutureAction_1=__webpack_require__(378),AsapAction=function(_super){function AsapAction(){_super.apply(this,arguments)}return __extends(AsapAction,_super),AsapAction.prototype._schedule=function(state,delay){if(void 0===delay&&(delay=0),delay>0)return _super.prototype._schedule.call(this,state,delay);this.delay=delay,this.state=state;var scheduler=this.scheduler;return scheduler.actions.push(this),scheduler.scheduledId||(scheduler.scheduledId=Immediate_1.Immediate.setImmediate(function(){scheduler.scheduledId=null,scheduler.flush()})),this},AsapAction.prototype._unsubscribe=function(){var scheduler=this.scheduler,scheduledId=scheduler.scheduledId,actions=scheduler.actions;_super.prototype._unsubscribe.call(this),0===actions.length&&(scheduler.active=!1,null!=scheduledId&&(scheduler.scheduledId=null,Immediate_1.Immediate.clearImmediate(scheduledId)))},AsapAction}(FutureAction_1.FutureAction);exports.AsapAction=AsapAction},function(module,exports,__webpack_require__){(function(clearImmediate,setImmediate){"use strict";var root_1=__webpack_require__(42),ImmediateDefinition=function(){function ImmediateDefinition(root){if(this.root=root,root.setImmediate&&"function"==typeof root.setImmediate)this.setImmediate=root.setImmediate.bind(root),this.clearImmediate=root.clearImmediate.bind(root);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var ci=function clearImmediate(handle){delete clearImmediate.instance.tasksByHandle[handle]};ci.instance=this,this.clearImmediate=ci}}return ImmediateDefinition.prototype.identify=function(o){return this.root.Object.prototype.toString.call(o)},ImmediateDefinition.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},ImmediateDefinition.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},ImmediateDefinition.prototype.canUseReadyStateChange=function(){var document=this.root.document;return Boolean(document&&"onreadystatechange"in document.createElement("script"))},ImmediateDefinition.prototype.canUsePostMessage=function(){var root=this.root;if(root.postMessage&&!root.importScripts){var postMessageIsAsynchronous_1=!0,oldOnMessage=root.onmessage;return root.onmessage=function(){postMessageIsAsynchronous_1=!1},root.postMessage("","*"),root.onmessage=oldOnMessage,postMessageIsAsynchronous_1}return!1},ImmediateDefinition.prototype.partiallyApplied=function(handler){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var fn=function result(){var _a=result,handler=_a.handler,args=_a.args;"function"==typeof handler?handler.apply(void 0,args):new Function(""+handler)()};return fn.handler=handler,fn.args=args,fn},ImmediateDefinition.prototype.addFromSetImmediateArguments=function(args){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,args),this.nextHandle++},ImmediateDefinition.prototype.createProcessNextTickSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.process.nextTick(instance.partiallyApplied(instance.runIfPresent,handle)),handle};return fn.instance=this,fn},ImmediateDefinition.prototype.createPostMessageSetImmediate=function(){var root=this.root,messagePrefix="setImmediate$"+root.Math.random()+"$",onGlobalMessage=function globalMessageHandler(event){var instance=globalMessageHandler.instance;event.source===root&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&instance.runIfPresent(+event.data.slice(messagePrefix.length))};onGlobalMessage.instance=this,root.addEventListener("message",onGlobalMessage,!1);var fn=function setImmediate(){var _a=setImmediate,messagePrefix=_a.messagePrefix,instance=_a.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.postMessage(messagePrefix+handle,"*"),handle};return fn.instance=this,fn.messagePrefix=messagePrefix,fn},ImmediateDefinition.prototype.runIfPresent=function(handle){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,handle),0);else{var task=this.tasksByHandle[handle];if(task){this.currentlyRunningATask=!0;try{task()}finally{this.clearImmediate(handle),this.currentlyRunningATask=!1;
}}}},ImmediateDefinition.prototype.createMessageChannelSetImmediate=function(){var _this=this,channel=new this.root.MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;_this.runIfPresent(handle)};var fn=function setImmediate(){var _a=setImmediate,channel=_a.channel,instance=_a.instance,handle=instance.addFromSetImmediateArguments(arguments);return channel.port2.postMessage(handle),handle};return fn.channel=channel,fn.instance=this,fn},ImmediateDefinition.prototype.createReadyStateChangeSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,root=instance.root,doc=root.document,html=doc.documentElement,handle=instance.addFromSetImmediateArguments(arguments),script=doc.createElement("script");return script.onreadystatechange=function(){instance.runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script),handle};return fn.instance=this,fn},ImmediateDefinition.prototype.createSetTimeoutSetImmediate=function(){var fn=function setImmediate(){var instance=setImmediate.instance,handle=instance.addFromSetImmediateArguments(arguments);return instance.root.setTimeout(instance.partiallyApplied(instance.runIfPresent,handle),0),handle};return fn.instance=this,fn},ImmediateDefinition}();exports.ImmediateDefinition=ImmediateDefinition,exports.Immediate=new ImmediateDefinition(root_1.root)}).call(exports,__webpack_require__(539).clearImmediate,__webpack_require__(539).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=__webpack_require__(540).nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=arguments.length<2?!1:slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(539).setImmediate,__webpack_require__(539).clearImmediate)},,function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),switch_1=__webpack_require__(542);Observable_1.Observable.prototype["switch"]=switch_1._switch},function(module,exports,__webpack_require__){"use strict";function _switch(){return this.lift(new SwitchOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports._switch=_switch;var SwitchOperator=function(){function SwitchOperator(){}return SwitchOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchSubscriber(subscriber))},SwitchOperator}(),SwitchSubscriber=function(_super){function SwitchSubscriber(destination){_super.call(this,destination),this.active=0,this.hasCompleted=!1}return __extends(SwitchSubscriber,_super),SwitchSubscriber.prototype._next=function(value){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,value))},SwitchSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},SwitchSubscriber.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var innerSubscription=this.innerSubscription;innerSubscription&&(innerSubscription.unsubscribe(),this.remove(innerSubscription))},SwitchSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},SwitchSubscriber.prototype.notifyError=function(err){this.destination.error(err)},SwitchSubscriber.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},SwitchSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),switchMap_1=__webpack_require__(544);Observable_1.Observable.prototype.switchMap=switchMap_1.switchMap},function(module,exports,__webpack_require__){"use strict";function switchMap(project,resultSelector){return this.lift(new SwitchMapOperator(project,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.switchMap=switchMap;var SwitchMapOperator=function(){function SwitchMapOperator(project,resultSelector){this.project=project,this.resultSelector=resultSelector}return SwitchMapOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchMapSubscriber(subscriber,this.project,this.resultSelector))},SwitchMapOperator}(),SwitchMapSubscriber=function(_super){function SwitchMapSubscriber(destination,project,resultSelector){_super.call(this,destination),this.project=project,this.resultSelector=resultSelector,this.index=0}return __extends(SwitchMapSubscriber,_super),SwitchMapSubscriber.prototype._next=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result,value,index)},SwitchMapSubscriber.prototype._innerSub=function(result,value,index){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,result,value,index))},SwitchMapSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.isUnsubscribed||_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.resultSelector?this._tryNotifyNext(outerValue,innerValue,outerIndex,innerIndex):this.destination.next(innerValue)},SwitchMapSubscriber.prototype._tryNotifyNext=function(outerValue,innerValue,outerIndex,innerIndex){var result;try{result=this.resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void this.destination.error(err)}this.destination.next(result)},SwitchMapSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),switchMapTo_1=__webpack_require__(546);Observable_1.Observable.prototype.switchMapTo=switchMapTo_1.switchMapTo},function(module,exports,__webpack_require__){"use strict";function switchMapTo(innerObservable,resultSelector){return this.lift(new SwitchMapToOperator(innerObservable,resultSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.switchMapTo=switchMapTo;var SwitchMapToOperator=function(){function SwitchMapToOperator(observable,resultSelector){this.observable=observable,this.resultSelector=resultSelector}return SwitchMapToOperator.prototype.call=function(subscriber,source){return source._subscribe(new SwitchMapToSubscriber(subscriber,this.observable,this.resultSelector))},SwitchMapToOperator}(),SwitchMapToSubscriber=function(_super){function SwitchMapToSubscriber(destination,inner,resultSelector){_super.call(this,destination),this.inner=inner,this.resultSelector=resultSelector,this.index=0}return __extends(SwitchMapToSubscriber,_super),SwitchMapToSubscriber.prototype._next=function(value){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,this.inner,value,this.index++))},SwitchMapToSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.isUnsubscribed||_super.prototype._complete.call(this)},SwitchMapToSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapToSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapToSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _a=this,resultSelector=_a.resultSelector,destination=_a.destination;resultSelector?this.tryResultSelector(outerValue,innerValue,outerIndex,innerIndex):destination.next(innerValue)},SwitchMapToSubscriber.prototype.tryResultSelector=function(outerValue,innerValue,outerIndex,innerIndex){var result,_a=this,resultSelector=_a.resultSelector,destination=_a.destination;try{result=resultSelector(outerValue,innerValue,outerIndex,innerIndex)}catch(err){return void destination.error(err)}destination.next(result)},SwitchMapToSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),take_1=__webpack_require__(548);Observable_1.Observable.prototype.take=take_1.take},function(module,exports,__webpack_require__){"use strict";function take(count){return 0===count?new EmptyObservable_1.EmptyObservable:this.lift(new TakeOperator(count))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),ArgumentOutOfRangeError_1=__webpack_require__(549),EmptyObservable_1=__webpack_require__(336);exports.take=take;var TakeOperator=function(){function TakeOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeSubscriber(subscriber,this.total))},TakeOperator}(),TakeSubscriber=function(_super){function TakeSubscriber(destination,total){_super.call(this,destination),this.total=total,this.count=0}return __extends(TakeSubscriber,_super),TakeSubscriber.prototype._next=function(value){var total=this.total;++this.count<=total&&(this.destination.next(value),this.count===total&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(Subscriber_1.Subscriber)},function(module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ArgumentOutOfRangeError=function(_super){function ArgumentOutOfRangeError(){_super.call(this,"argument out of range"),this.name="ArgumentOutOfRangeError"}return __extends(ArgumentOutOfRangeError,_super),ArgumentOutOfRangeError}(Error);exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),takeLast_1=__webpack_require__(551);Observable_1.Observable.prototype.takeLast=takeLast_1.takeLast},function(module,exports,__webpack_require__){"use strict";function takeLast(count){return 0===count?new EmptyObservable_1.EmptyObservable:this.lift(new TakeLastOperator(count))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),ArgumentOutOfRangeError_1=__webpack_require__(549),EmptyObservable_1=__webpack_require__(336);exports.takeLast=takeLast;var TakeLastOperator=function(){function TakeLastOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeLastOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeLastSubscriber(subscriber,this.total))},TakeLastOperator}(),TakeLastSubscriber=function(_super){function TakeLastSubscriber(destination,total){_super.call(this,destination),this.total=total,this.ring=new Array,this.count=0}return __extends(TakeLastSubscriber,_super),TakeLastSubscriber.prototype._next=function(value){var ring=this.ring,total=this.total,count=this.count++;if(ring.length<total)ring.push(value);else{var index=count%total;ring[index]=value}},TakeLastSubscriber.prototype._complete=function(){var destination=this.destination,count=this.count;if(count>0)for(var total=this.count>=this.total?this.total:this.count,ring=this.ring,i=0;total>i;i++){var idx=count++%total;destination.next(ring[idx])}destination.complete()},TakeLastSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),takeUntil_1=__webpack_require__(553);Observable_1.Observable.prototype.takeUntil=takeUntil_1.takeUntil},function(module,exports,__webpack_require__){"use strict";function takeUntil(notifier){return this.lift(new TakeUntilOperator(notifier))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.takeUntil=takeUntil;var TakeUntilOperator=function(){function TakeUntilOperator(notifier){this.notifier=notifier}return TakeUntilOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeUntilSubscriber(subscriber,this.notifier))},TakeUntilOperator}(),TakeUntilSubscriber=function(_super){function TakeUntilSubscriber(destination,notifier){_super.call(this,destination),this.notifier=notifier,this.add(subscribeToResult_1.subscribeToResult(this,notifier))}return __extends(TakeUntilSubscriber,_super),TakeUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),takeWhile_1=__webpack_require__(555);Observable_1.Observable.prototype.takeWhile=takeWhile_1.takeWhile},function(module,exports,__webpack_require__){"use strict";function takeWhile(predicate){return this.lift(new TakeWhileOperator(predicate))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.takeWhile=takeWhile;var TakeWhileOperator=function(){function TakeWhileOperator(predicate){this.predicate=predicate}return TakeWhileOperator.prototype.call=function(subscriber,source){return source._subscribe(new TakeWhileSubscriber(subscriber,this.predicate))},TakeWhileOperator}(),TakeWhileSubscriber=function(_super){function TakeWhileSubscriber(destination,predicate){_super.call(this,destination),this.predicate=predicate,this.index=0}return __extends(TakeWhileSubscriber,_super),TakeWhileSubscriber.prototype._next=function(value){var result,destination=this.destination;try{result=this.predicate(value,this.index++)}catch(err){return void destination.error(err)}this.nextOrComplete(value,result)},TakeWhileSubscriber.prototype.nextOrComplete=function(value,predicateResult){var destination=this.destination;Boolean(predicateResult)?destination.next(value):destination.complete()},TakeWhileSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),throttle_1=__webpack_require__(557);Observable_1.Observable.prototype.throttle=throttle_1.throttle},function(module,exports,__webpack_require__){"use strict";function throttle(durationSelector){return this.lift(new ThrottleOperator(durationSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.throttle=throttle;var ThrottleOperator=function(){function ThrottleOperator(durationSelector){this.durationSelector=durationSelector}return ThrottleOperator.prototype.call=function(subscriber,source){return source._subscribe(new ThrottleSubscriber(subscriber,this.durationSelector))},ThrottleOperator}(),ThrottleSubscriber=function(_super){function ThrottleSubscriber(destination,durationSelector){_super.call(this,destination),this.destination=destination,this.durationSelector=durationSelector}return __extends(ThrottleSubscriber,_super),ThrottleSubscriber.prototype._next=function(value){this.throttled||this.tryDurationSelector(value)},ThrottleSubscriber.prototype.tryDurationSelector=function(value){var duration=null;try{duration=this.durationSelector(value)}catch(err){return void this.destination.error(err)}this.emitAndThrottle(value,duration)},ThrottleSubscriber.prototype.emitAndThrottle=function(value,duration){this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,duration)),this.destination.next(value)},ThrottleSubscriber.prototype._unsubscribe=function(){var throttled=this.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe())},ThrottleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._unsubscribe()},ThrottleSubscriber.prototype.notifyComplete=function(){this._unsubscribe()},ThrottleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),throttleTime_1=__webpack_require__(559);Observable_1.Observable.prototype.throttleTime=throttleTime_1.throttleTime},function(module,exports,__webpack_require__){"use strict";function throttleTime(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),this.lift(new ThrottleTimeOperator(duration,scheduler))}function dispatchNext(arg){var subscriber=arg.subscriber;subscriber.clearThrottle()}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),async_1=__webpack_require__(376);exports.throttleTime=throttleTime;var ThrottleTimeOperator=function(){function ThrottleTimeOperator(duration,scheduler){this.duration=duration,this.scheduler=scheduler}return ThrottleTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new ThrottleTimeSubscriber(subscriber,this.duration,this.scheduler))},ThrottleTimeOperator}(),ThrottleTimeSubscriber=function(_super){function ThrottleTimeSubscriber(destination,duration,scheduler){_super.call(this,destination),this.duration=duration,this.scheduler=scheduler}return __extends(ThrottleTimeSubscriber,_super),ThrottleTimeSubscriber.prototype._next=function(value){this.throttled||(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.destination.next(value))},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var throttled=this.throttled;throttled&&(throttled.unsubscribe(),this.remove(throttled),this.throttled=null)},ThrottleTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),timeout_1=__webpack_require__(561);Observable_1.Observable.prototype.timeout=timeout_1.timeout},function(module,exports,__webpack_require__){"use strict";function timeout(due,errorToSend,scheduler){void 0===errorToSend&&(errorToSend=null),void 0===scheduler&&(scheduler=async_1.async);var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return this.lift(new TimeoutOperator(waitFor,absoluteTimeout,errorToSend,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),isDate_1=__webpack_require__(401),Subscriber_1=__webpack_require__(45);exports.timeout=timeout;var TimeoutOperator=function(){function TimeoutOperator(waitFor,absoluteTimeout,errorToSend,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.errorToSend=errorToSend,this.scheduler=scheduler}return TimeoutOperator.prototype.call=function(subscriber,source){return source._subscribe(new TimeoutSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},TimeoutOperator}(),TimeoutSubscriber=function(_super){function TimeoutSubscriber(destination,absoluteTimeout,waitFor,errorToSend,scheduler){_super.call(this,destination),this.absoluteTimeout=absoluteTimeout,this.waitFor=waitFor,this.errorToSend=errorToSend,this.scheduler=scheduler,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return __extends(TimeoutSubscriber,_super),Object.defineProperty(TimeoutSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutSubscriber.dispatchTimeout=function(state){var source=state.subscriber,currentIndex=state.index;source.hasCompleted||source.previousIndex!==currentIndex||source.notifyTimeout()},TimeoutSubscriber.prototype.scheduleTimeout=function(){var currentIndex=this.index;this.scheduler.schedule(TimeoutSubscriber.dispatchTimeout,this.waitFor,{subscriber:this,index:currentIndex}),this.index++,this._previousIndex=currentIndex},TimeoutSubscriber.prototype._next=function(value){this.destination.next(value),this.absoluteTimeout||this.scheduleTimeout()},TimeoutSubscriber.prototype._error=function(err){this.destination.error(err),this._hasCompleted=!0},TimeoutSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutSubscriber.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},TimeoutSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),timeoutWith_1=__webpack_require__(563);Observable_1.Observable.prototype.timeoutWith=timeoutWith_1.timeoutWith},function(module,exports,__webpack_require__){"use strict";function timeoutWith(due,withObservable,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return this.lift(new TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},async_1=__webpack_require__(376),isDate_1=__webpack_require__(401),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.timeoutWith=timeoutWith;var TimeoutWithOperator=function(){function TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.withObservable=withObservable,this.scheduler=scheduler}return TimeoutWithOperator.prototype.call=function(subscriber,source){return source._subscribe(new TimeoutWithSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),TimeoutWithSubscriber=function(_super){function TimeoutWithSubscriber(destination,absoluteTimeout,waitFor,withObservable,scheduler){_super.call(this),this.destination=destination,this.absoluteTimeout=absoluteTimeout,this.waitFor=waitFor,this.withObservable=withObservable,this.scheduler=scheduler,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,destination.add(this),this.scheduleTimeout()}return __extends(TimeoutWithSubscriber,_super),Object.defineProperty(TimeoutWithSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutWithSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutWithSubscriber.dispatchTimeout=function(state){var source=state.subscriber,currentIndex=state.index;source.hasCompleted||source.previousIndex!==currentIndex||source.handleTimeout()},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var currentIndex=this.index,timeoutState={subscriber:this,index:currentIndex};this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,timeoutState),this.index++,this._previousIndex=currentIndex},TimeoutWithSubscriber.prototype._next=function(value){this.destination.next(value),this.absoluteTimeout||this.scheduleTimeout()},TimeoutWithSubscriber.prototype._error=function(err){this.destination.error(err),this._hasCompleted=!0},TimeoutWithSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutWithSubscriber.prototype.handleTimeout=function(){if(!this.isUnsubscribed){var withObservable=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=subscribeToResult_1.subscribeToResult(this,withObservable))}},TimeoutWithSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),toArray_1=__webpack_require__(565);Observable_1.Observable.prototype.toArray=toArray_1.toArray},function(module,exports,__webpack_require__){"use strict";function toArray(){return this.lift(new ToArrayOperator)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45);exports.toArray=toArray;var ToArrayOperator=function(){function ToArrayOperator(){}return ToArrayOperator.prototype.call=function(subscriber,source){return source._subscribe(new ToArraySubscriber(subscriber))},ToArrayOperator}(),ToArraySubscriber=function(_super){function ToArraySubscriber(destination){_super.call(this,destination),this.array=[]}return __extends(ToArraySubscriber,_super),ToArraySubscriber.prototype._next=function(x){this.array.push(x)},ToArraySubscriber.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},ToArraySubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),toPromise_1=__webpack_require__(61);Observable_1.Observable.prototype.toPromise=toPromise_1.toPromise},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),window_1=__webpack_require__(568);Observable_1.Observable.prototype.window=window_1.window},function(module,exports,__webpack_require__){"use strict";function window(windowBoundaries){return this.lift(new WindowOperator(windowBoundaries))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.window=window;var WindowOperator=function(){function WindowOperator(windowBoundaries){this.windowBoundaries=windowBoundaries}return WindowOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowSubscriber(subscriber,this.windowBoundaries))},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination,windowBoundaries){_super.call(this,destination),this.destination=destination,this.windowBoundaries=windowBoundaries,this.add(subscribeToResult_1.subscribeToResult(this,windowBoundaries)),this.openWindow()}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow()},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this._complete()},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype.openWindow=function(){var prevWindow=this.window;prevWindow&&prevWindow.complete();var destination=this.destination,newWindow=this.window=new Subject_1.Subject;destination.add(newWindow),destination.next(newWindow)},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowCount_1=__webpack_require__(570);Observable_1.Observable.prototype.windowCount=windowCount_1.windowCount},function(module,exports,__webpack_require__){"use strict";function windowCount(windowSize,startWindowEvery){return void 0===startWindowEvery&&(startWindowEvery=0),this.lift(new WindowCountOperator(windowSize,startWindowEvery))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subject_1=__webpack_require__(40);exports.windowCount=windowCount;var WindowCountOperator=function(){function WindowCountOperator(windowSize,startWindowEvery){this.windowSize=windowSize,this.startWindowEvery=startWindowEvery}return WindowCountOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowCountSubscriber(subscriber,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),WindowCountSubscriber=function(_super){function WindowCountSubscriber(destination,windowSize,startWindowEvery){_super.call(this,destination),this.destination=destination,this.windowSize=windowSize,this.startWindowEvery=startWindowEvery,
this.windows=[new Subject_1.Subject],this.count=0;var firstWindow=this.windows[0];destination.add(firstWindow),destination.next(firstWindow)}return __extends(WindowCountSubscriber,_super),WindowCountSubscriber.prototype._next=function(value){for(var startWindowEvery=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,destination=this.destination,windowSize=this.windowSize,windows=this.windows,len=windows.length,i=0;len>i;i++)windows[i].next(value);var c=this.count-windowSize+1;if(c>=0&&c%startWindowEvery===0&&windows.shift().complete(),++this.count%startWindowEvery===0){var window_1=new Subject_1.Subject;windows.push(window_1),destination.add(window_1),destination.next(window_1)}},WindowCountSubscriber.prototype._error=function(err){for(var windows=this.windows;windows.length>0;)windows.shift().error(err);this.destination.error(err)},WindowCountSubscriber.prototype._complete=function(){for(var windows=this.windows;windows.length>0;)windows.shift().complete();this.destination.complete()},WindowCountSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowTime_1=__webpack_require__(572);Observable_1.Observable.prototype.windowTime=windowTime_1.windowTime},function(module,exports,__webpack_require__){"use strict";function windowTime(windowTimeSpan,windowCreationInterval,scheduler){return void 0===windowCreationInterval&&(windowCreationInterval=null),void 0===scheduler&&(scheduler=async_1.async),this.lift(new WindowTimeOperator(windowTimeSpan,windowCreationInterval,scheduler))}function dispatchWindowTimeSpanOnly(state){var subscriber=state.subscriber,windowTimeSpan=state.windowTimeSpan,window=state.window;window&&window.complete(),state.window=subscriber.openWindow(),this.schedule(state,windowTimeSpan)}function dispatchWindowCreation(state){var windowTimeSpan=state.windowTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,windowCreationInterval=state.windowCreationInterval,window=subscriber.openWindow(),action=this,context={action:action,subscription:null},timeSpanState={subscriber:subscriber,window:window,context:context};context.subscription=scheduler.schedule(dispatchWindowClose,windowTimeSpan,timeSpanState),action.add(context.subscription),action.schedule(state,windowCreationInterval)}function dispatchWindowClose(arg){var subscriber=arg.subscriber,window=arg.window,context=arg.context;context&&context.action&&context.subscription&&context.action.remove(context.subscription),subscriber.closeWindow(window)}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subscriber_1=__webpack_require__(45),Subject_1=__webpack_require__(40),async_1=__webpack_require__(376);exports.windowTime=windowTime;var WindowTimeOperator=function(){function WindowTimeOperator(windowTimeSpan,windowCreationInterval,scheduler){this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.scheduler=scheduler}return WindowTimeOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowTimeSubscriber(subscriber,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},WindowTimeOperator}(),WindowTimeSubscriber=function(_super){function WindowTimeSubscriber(destination,windowTimeSpan,windowCreationInterval,scheduler){if(_super.call(this,destination),this.destination=destination,this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.scheduler=scheduler,this.windows=[],null!==windowCreationInterval&&windowCreationInterval>=0){var window_1=this.openWindow(),closeState={subscriber:this,window:window_1,context:null},creationState={windowTimeSpan:windowTimeSpan,windowCreationInterval:windowCreationInterval,subscriber:this,scheduler:scheduler};this.add(scheduler.schedule(dispatchWindowClose,windowTimeSpan,closeState)),this.add(scheduler.schedule(dispatchWindowCreation,windowCreationInterval,creationState))}else{var window_2=this.openWindow(),timeSpanOnlyState={subscriber:this,window:window_2,windowTimeSpan:windowTimeSpan};this.add(scheduler.schedule(dispatchWindowTimeSpanOnly,windowTimeSpan,timeSpanOnlyState))}}return __extends(WindowTimeSubscriber,_super),WindowTimeSubscriber.prototype._next=function(value){for(var windows=this.windows,len=windows.length,i=0;len>i;i++){var window_3=windows[i];window_3.isUnsubscribed||window_3.next(value)}},WindowTimeSubscriber.prototype._error=function(err){for(var windows=this.windows;windows.length>0;)windows.shift().error(err);this.destination.error(err)},WindowTimeSubscriber.prototype._complete=function(){for(var windows=this.windows;windows.length>0;){var window_4=windows.shift();window_4.isUnsubscribed||window_4.complete()}this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var window=new Subject_1.Subject;this.windows.push(window);var destination=this.destination;return destination.add(window),destination.next(window),window},WindowTimeSubscriber.prototype.closeWindow=function(window){window.complete();var windows=this.windows;windows.splice(windows.indexOf(window),1)},WindowTimeSubscriber}(Subscriber_1.Subscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowToggle_1=__webpack_require__(574);Observable_1.Observable.prototype.windowToggle=windowToggle_1.windowToggle},function(module,exports,__webpack_require__){"use strict";function windowToggle(openings,closingSelector){return this.lift(new WindowToggleOperator(openings,closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),Subscription_1=__webpack_require__(47),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.windowToggle=windowToggle;var WindowToggleOperator=function(){function WindowToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return WindowToggleOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowToggleSubscriber(subscriber,this.openings,this.closingSelector))},WindowToggleOperator}(),WindowToggleSubscriber=function(_super){function WindowToggleSubscriber(destination,openings,closingSelector){_super.call(this,destination),this.openings=openings,this.closingSelector=closingSelector,this.contexts=[],this.add(this.openSubscription=subscribeToResult_1.subscribeToResult(this,openings,openings))}return __extends(WindowToggleSubscriber,_super),WindowToggleSubscriber.prototype._next=function(value){var contexts=this.contexts;if(contexts)for(var len=contexts.length,i=0;len>i;i++)contexts[i].window.next(value)},WindowToggleSubscriber.prototype._error=function(err){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.error(err),context.subscription.unsubscribe()}_super.prototype._error.call(this,err)},WindowToggleSubscriber.prototype._complete=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.complete(),context.subscription.unsubscribe()}_super.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context=contexts[index];context.window.unsubscribe(),context.subscription.unsubscribe()}},WindowToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(outerValue===this.openings){var closingSelector=this.closingSelector,closingNotifier=tryCatch_1.tryCatch(closingSelector)(innerValue);if(closingNotifier===errorObject_1.errorObject)return this.error(errorObject_1.errorObject.e);var window_1=new Subject_1.Subject,subscription=new Subscription_1.Subscription,context={window:window_1,subscription:subscription};this.contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);innerSubscription.isUnsubscribed?this.closeWindow(this.contexts.length-1):(innerSubscription.context=context,subscription.add(innerSubscription)),this.destination.next(window_1)}else this.closeWindow(this.contexts.indexOf(outerValue))},WindowToggleSubscriber.prototype.notifyError=function(err){this.error(err)},WindowToggleSubscriber.prototype.notifyComplete=function(inner){inner!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(inner.context))},WindowToggleSubscriber.prototype.closeWindow=function(index){if(-1!==index){var contexts=this.contexts,context=contexts[index],window=context.window,subscription=context.subscription;contexts.splice(index,1),window.complete(),subscription.unsubscribe()}},WindowToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),windowWhen_1=__webpack_require__(576);Observable_1.Observable.prototype.windowWhen=windowWhen_1.windowWhen},function(module,exports,__webpack_require__){"use strict";function windowWhen(closingSelector){return this.lift(new WindowOperator(closingSelector))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(40),tryCatch_1=__webpack_require__(50),errorObject_1=__webpack_require__(51),OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.windowWhen=windowWhen;var WindowOperator=function(){function WindowOperator(closingSelector){this.closingSelector=closingSelector}return WindowOperator.prototype.call=function(subscriber,source){return source._subscribe(new WindowSubscriber(subscriber,this.closingSelector))},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination,closingSelector){_super.call(this,destination),this.destination=destination,this.closingSelector=closingSelector,this.openWindow()}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(innerSub){void 0===innerSub&&(innerSub=null),innerSub&&(this.remove(innerSub),innerSub.unsubscribe());var prevWindow=this.window;prevWindow&&prevWindow.complete();var window=this.window=new Subject_1.Subject;this.destination.next(window);var closingNotifier=tryCatch_1.tryCatch(this.closingSelector)();if(closingNotifier===errorObject_1.errorObject){var err=errorObject_1.errorObject.e;this.destination.error(err),this.window.error(err)}else this.add(this.closingNotification=subscribeToResult_1.subscribeToResult(this,closingNotifier)),this.add(window)},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),withLatestFrom_1=__webpack_require__(578);Observable_1.Observable.prototype.withLatestFrom=withLatestFrom_1.withLatestFrom},function(module,exports,__webpack_require__){"use strict";function withLatestFrom(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var project;"function"==typeof args[args.length-1]&&(project=args.pop());var observables=args;return this.lift(new WithLatestFromOperator(observables,project))}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OuterSubscriber_1=__webpack_require__(338),subscribeToResult_1=__webpack_require__(339);exports.withLatestFrom=withLatestFrom;var WithLatestFromOperator=function(){function WithLatestFromOperator(observables,project){this.observables=observables,this.project=project}return WithLatestFromOperator.prototype.call=function(subscriber,source){return source._subscribe(new WithLatestFromSubscriber(subscriber,this.observables,this.project))},WithLatestFromOperator}(),WithLatestFromSubscriber=function(_super){function WithLatestFromSubscriber(destination,observables,project){_super.call(this,destination),this.observables=observables,this.project=project,this.toRespond=[];var len=observables.length;this.values=new Array(len);for(var i=0;len>i;i++)this.toRespond.push(i);for(var i=0;len>i;i++){var observable=observables[i];this.add(subscribeToResult_1.subscribeToResult(this,observable,observable,i))}}return __extends(WithLatestFromSubscriber,_super),WithLatestFromSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue;var toRespond=this.toRespond;if(toRespond.length>0){var found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(value){if(0===this.toRespond.length){var args=[value].concat(this.values);this.project?this._tryProject(args):this.destination.next(args)}},WithLatestFromSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},WithLatestFromSubscriber}(OuterSubscriber_1.OuterSubscriber)},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),zip_1=__webpack_require__(404);Observable_1.Observable.prototype.zip=zip_1.zipProto},function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(41),zipAll_1=__webpack_require__(581);Observable_1.Observable.prototype.zipAll=zipAll_1.zipAll},function(module,exports,__webpack_require__){"use strict";function zipAll(project){return this.lift(new zip_1.ZipOperator(project))}var zip_1=__webpack_require__(404);exports.zipAll=zipAll},function(module,exports,__webpack_require__){"use strict";var Subscriber_1=__webpack_require__(45),Operator=function(){function Operator(){}return Operator.prototype.call=function(subscriber,source){return source._subscribe(new Subscriber_1.Subscriber(subscriber))},Operator}();exports.Operator=Operator},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),app_service_1=__webpack_require__(584),reference_service_1=__webpack_require__(585),staff_service_1=__webpack_require__(586),nb_notify_1=__webpack_require__(587),nav_1=__webpack_require__(588),projects_1=__webpack_require__(590),project_1=__webpack_require__(594),tasks_1=__webpack_require__(597),task_1=__webpack_require__(600),user_profile_1=__webpack_require__(603),login_1=__webpack_require__(608),user_1=__webpack_require__(606),App=function(){function App(_router,_appService,_referenceService,_staffService){this._router=_router,this._appService=_appService,this._referenceService=_referenceService,this._staffService=_staffService,this.HEADER_TITLE="Projects"}return App.prototype.resize=function(window){this.onResize(window)},Object.defineProperty(App.prototype,"device",{get:function(){return this.isMobileDevice},enumerable:!0,configurable:!0}),Object.defineProperty(App.prototype,"toggleNavVisible",{get:function(){return this.isNavCollapsed},enumerable:!0,configurable:!0}),Object.defineProperty(App.prototype,"toggleSearch",{get:function(){return this.isSearchOpen},enumerable:!0,configurable:!0}),App.prototype.ngOnInit=function(){var _this=this;this.isSearchOpen=!1,this.isNavCollapsed=!1,this.loggedUser=new user_1.User,this.isMobileDevice=this.isMobile(),this._appService.getTranslations().subscribe(function(captions){return console.log(captions)},function(err){console.log(err),_this._router.navigate(["/login"])})},App.prototype.toggleNav=function(){this.isNavCollapsed=!this.isNavCollapsed},App.prototype.hideNav=function(event){event.preventDefault(),this.isNavCollapsed=!1,this.isSearchOpen=!1},App.prototype.searchToggle=function(){this.isSearchOpen=!this.isSearchOpen},App.prototype.logout=function(event){event.preventDefault(),window.location.href="Logout"},App.prototype.goBack=function(){window.history.back()},App.prototype.preventDefault=function(event){event.preventDefault()},App.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},App.prototype.onResize=function(window){this.isMobileDevice=window.innerWidth<=1024||this.isMobile()},__decorate([core_1.HostListener("window:resize",["$event.target"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],App.prototype,"resize",null),__decorate([core_1.HostBinding("class.phone"),__metadata("design:type",Object)],App.prototype,"device",null),__decorate([core_1.HostBinding("class.side-nav-toggle"),__metadata("design:type",Object)],App.prototype,"toggleNavVisible",null),__decorate([core_1.HostBinding("class.search-open"),__metadata("design:type",Object)],App.prototype,"toggleSearch",null),App=__decorate([core_1.Component({selector:"project-app",template:__webpack_require__(609),directives:[router_1.ROUTER_DIRECTIVES,nav_1.NavComponent,nb_notify_1.NBNotifyComponent]}),router_1.Routes([{path:"/tasks/:for",component:tasks_1.TasksComponent},{path:"/tasks",component:tasks_1.TasksComponent},{path:"/task/:id",component:task_1.TaskComponent},{path:"/projects/:id",component:project_1.ProjectComponent},{path:"/projects",component:projects_1.ProjectsComponent},{path:"/user-profile",component:user_profile_1.UserProfileComponent},{path:"/login",component:login_1.LoginComponent}]),__metadata("design:paramtypes",[router_1.Router,app_service_1.AppService,reference_service_1.ReferenceService,staff_service_1.StaffService])],App)}();exports.App=App},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),AppService=function(){function AppService(_http){this._http=_http}return AppService.prototype.getTranslations=function(){var header={headers:new http_1.Headers({Accept:"application/json"})},url="p?id=common-captions";return this._http.get(url,header).map(function(response){return response.json().captions})},AppService.prototype.getNav=function(){var header={headers:new http_1.Headers({Accept:"application/json"})},url="p?id=outline";return this._http.get(url,header)},AppService.prototype.getUsers=function(){var header={headers:new http_1.Headers({Accept:"application/json"})},url="p?id=users";return this._http.get(url,header).map(function(response){return response.json().objects[0].list}).map(function(response){return response})},AppService.prototype.updateUserProfile=function(user){},AppService.prototype.logout=function(){return this._http["delete"]("/")},AppService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],AppService)}();exports.AppService=AppService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),ReferenceService=function(){function ReferenceService(http){this.http=http}return ReferenceService.prototype.getTags=function(){var header={headers:new http_1.Headers({Accept:"application/json"})},url="/Reference/p?id=tags";return this.http.get(url,header).map(function(response){return response.json().objects[0].list}).map(function(response){return response})},ReferenceService.prototype.getTaskTypes=function(){var header={headers:new http_1.Headers({Accept:"application/json"})},url="/Reference/p?id=tasktypes";return this.http.get(url,header).map(function(response){return response.json().objects[0].list}).map(function(response){return response})},ReferenceService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],ReferenceService)}();exports.ReferenceService=ReferenceService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),StaffService=function(){function StaffService(http){this.http=http}return StaffService.prototype.getOrganizations=function(){var header={headers:new http_1.Headers({Accept:"application/json"})},url="/Staff/p?id=get-organizations";return this.http.get(url,header).map(function(response){return response.json().objects[0].list}).map(function(response){return response})},StaffService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],StaffService)}();exports.StaffService=StaffService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),NBNotifyComponent=(function(){function _Noty(type,message,visible){this.type="",this.message="",this.visible=!1,this.type=type,this.message=message,this.visible=visible}return _Noty}(),function(){function NBNotifyComponent(){this.notifyList=[]}return NBNotifyComponent=__decorate([core_1.Component({selector:"nb-notify",template:'\n        <div class="nb-notify" *ngIf="notifyList">\n            <div class="nb-notify-entry-{{notify.type}}" style="display:block;" *ngFor="let notify of notifyList">{{notify.message}}</div>\n        </div>\n    '}),__metadata("design:paramtypes",[])],NBNotifyComponent)}());exports.NBNotifyComponent=NBNotifyComponent},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),app_service_1=__webpack_require__(584),NavComponent=function(){function NavComponent(_router,_appService){this._router=_router,this._appService=_appService}return NavComponent=__decorate([core_1.Component({selector:"[nav]",template:__webpack_require__(589),directives:[router_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[router_1.Router,app_service_1.AppService])],NavComponent)}();exports.NavComponent=NavComponent},function(module,exports){module.exports='<ul>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'inbox\']" class="nav-link">\r\n            <i class="fa fa-inbox"></i>\r\n            <span>{{\'inbox\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'today\']" class="nav-link">\r\n            <i class="fa fa-calendar-o"></i>\r\n            <span>{{\'today\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'week\']" class="nav-link">\r\n            <i class="fa fa-calendar"></i>\r\n            <span>{{\'week\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'all\']" class="nav-link">\r\n            <i class="fa fa-database"></i>\r\n            <span>{{\'all\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'completed\']" class="nav-link">\r\n            <i class="fa fa-check-square-o"></i>\r\n            <span>{{\'completed\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a [routerLink]="[\'/tasks\', \'my\']" class="nav-link">\r\n            <i class="fa fa-ticket"></i>\r\n            <span>{{\'my_tasks\'}}</span>\r\n        </a>\r\n    </li>\r\n    <li class="divider"></li>\r\n    <li>\r\n        <a [routerLink]="[\'/projects\']" class="nav-link">\r\n            <i class="fa fa-puzzle-piece"></i>\r\n            <span>{{\'projects\'}}</span>\r\n        </a>\r\n    </li>\r\n</ul>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),project_service_1=__webpack_require__(591),ProjectsComponent=function(){function ProjectsComponent(_router,projectService){var _this=this;this._router=_router,this.projectService=projectService,projectService.getProjects().subscribe(function(projects){return _this.projects=projects},function(errorResponse){return _this.handleXhrError(errorResponse)})}return ProjectsComponent.prototype.composeRecord=function(){this._router.navigate(["/projects","new"])},ProjectsComponent.prototype.deleteProject=function(){this.projectService.deleteProject(this.selectedProjects).subscribe()},ProjectsComponent.prototype.handleXhrError=function(errorResponse){401===errorResponse.status&&this._router.navigate(["/login"])},ProjectsComponent=__decorate([core_1.Component({selector:"[projects]",template:__webpack_require__(593),pipes:[common_1.DatePipe]}),__metadata("design:paramtypes",[router_1.Router,project_service_1.ProjectService])],ProjectsComponent)}();exports.ProjectsComponent=ProjectsComponent},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),obj_utils_1=__webpack_require__(592),VIEW_URL="p?id=project-view",FORM_URL="p?id=project-form",HEADER={headers:new http_1.Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json"})},ProjectService=function(){function ProjectService(_http){this._http=_http}return ProjectService.prototype.getProjects=function(){return this._http.get(VIEW_URL,HEADER).map(function(response){return response.json().objects[0].list}).map(function(response){return response})},ProjectService.prototype.getProjectById=function(projectId){return this._http.get(FORM_URL+"&docid="+projectId,HEADER).map(function(response){return response.json().objects[1]}).map(function(response){return response})},ProjectService.prototype.saveProject=function(project){var url=FORM_URL+(project.id?"&docid="+project.id:"");return this._http.post(url,this.serializeProject(project),HEADER)},ProjectService.prototype.deleteProject=function(projects){return this._http["delete"](VIEW_URL)},ProjectService.prototype.serializeProject=function(project){return obj_utils_1.serializeObj({name:project.name,status:project.status,customer:project.customer||"",manager:project.manager||0,programmer:project.programmer||0,tester:project.tester||0,observers:Array.isArray(project.observers)?project.observers.join(","):"",comment:project.comment,finish_date:project.finishDate?project.finishDate.toString():"",attachments:project.attachments?project.attachments.map(function(it){return it.id;
}).join(","):""})},ProjectService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],ProjectService)}();exports.ProjectService=ProjectService},function(module,exports){"use strict";function serializeObj(obj){var result=[];for(var property in obj)result.push(encodeURIComponent(property)+"="+encodeURIComponent(obj[property]));return result.join("&")}exports.serializeObj=serializeObj},function(module,exports){module.exports='<div class="content-header">\r\n    <h1 class="header-title">\r\n        {{\'projects\'}}\r\n    </h1>\r\n    <div class="content-actions">\r\n        <button class="btn" type="button" (click)="composeRecord()">\r\n            {{\'new_project\'}}\r\n        </button>\r\n    </div>\r\n</div>\r\n<div class="content-body">\r\n    <div class="view view-project">\r\n        <header class="entries-head">\r\n            <div class="head-wrap">\r\n                <label class="entry-select">\r\n                    <input type="checkbox" data-toggle="docid" class="all" />\r\n                </label>\r\n                <div class="entry-captions">\r\n                    <span class="vw-project-name">{{\'name\'}}</span>\r\n                </div>\r\n            </div>\r\n        </header>\r\n        <div class="entries">\r\n            <div *ngIf="!projects">\r\n                {{\'loading\'}}\r\n            </div>\r\n            <div class="entry-wrap" *ngFor="let project of projects">\r\n                <div data-id="{{project.id}}" class="entry">\r\n                    <label class="entry-select">\r\n                        <input type="checkbox" name="docid" value="{{project.id}}" />\r\n                    </label>\r\n                    <a class="entry-link" [routerLink]="[\'/projects\', project.id]">\r\n                        <div class="entry-fields">\r\n                            <span class="vw-project-name">{{project.name}}</span>\r\n                            <span class="vw-project-customer">{{project.customer?.name}}</span>\r\n                            <span class="vw-project-comment">{{project.comment}}</span>\r\n                            <span class="vw-date">{{project.finishDate | date:\'dd.MM.y\'}}</span>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),app_service_1=__webpack_require__(584),project_1=__webpack_require__(595),project_service_1=__webpack_require__(591),staff_service_1=__webpack_require__(586),ProjectComponent=function(){function ProjectComponent(_router,_routeSegment,_formBuilder,_appService,_projectService,_staffService){var _this=this;this._router=_router,this._routeSegment=_routeSegment,this._formBuilder=_formBuilder,this._appService=_appService,this._projectService=_projectService,this._staffService=_staffService,this.statusOptions=project_1.ProjectStatusType,this.form=_formBuilder.group({name:["",common_1.Validators.required],status:[""],customer:[""],manager:[""],programmer:[""],tester:[""],observers:[""],comment:[""],finishDate:[""],attachments:[""]}),"new"!==this._routeSegment.getParam("id")?this._projectService.getProjectById(this._routeSegment.getParam("id")).subscribe(function(project){return _this.project=project},function(errorResponse){return _this.handleXhrError(errorResponse)}):this.project=new project_1.Project,_staffService.getOrganizations().subscribe(function(orgs){return _this.customers=orgs}),_appService.getUsers().subscribe(function(users){return _this.users=users})}return ProjectComponent.prototype.saveProject=function(){var _this=this;this._projectService.saveProject(this.project).subscribe(function(response){return _this.close()})},ProjectComponent.prototype.close=function(){this._router.navigate(["/projects"])},ProjectComponent.prototype.handleXhrError=function(errorResponse){401===errorResponse.status&&this._router.navigate(["/login"])},ProjectComponent=__decorate([core_1.Component({selector:"[project]",template:__webpack_require__(596),directives:[common_1.FORM_DIRECTIVES],providers:[common_1.FormBuilder]}),__metadata("design:paramtypes",[router_1.Router,router_1.RouteSegment,common_1.FormBuilder,app_service_1.AppService,project_service_1.ProjectService,staff_service_1.StaffService])],ProjectComponent)}();exports.ProjectComponent=ProjectComponent},function(module,exports){"use strict";exports.ProjectStatusType=["DRAFT","PROCESSED","FINISHED"];var Project=function(){function Project(){}return Project}();exports.Project=Project},function(module,exports){module.exports='<div *ngIf="!project">\r\n    {{\'loading\'}}\r\n</div>\r\n<form class="form" [ngFormModel]="form" *ngIf="project">\r\n    <header class="content-header">\r\n        <button class="btn-back" type="button" (click)="close($event)">\r\n            <i class="fa fa-chevron-left"></i>\r\n        </button>\r\n        <h1 class="header-title">\r\n            {{\'project\'}}\r\n        </h1>\r\n        <div class="content-actions">\r\n            <button class="btn btn-primary" type="button" [disabled]="!form.valid" (click)="saveProject()">\r\n                {{\'save_close\'}}\r\n            </button>\r\n            <button class="btn" type="button" (click)="close($event)">\r\n                {{\'close\'}}\r\n            </button>\r\n        </div>\r\n    </header>\r\n    <section class="content-body">\r\n        <fieldset class="fieldset">\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'name\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.name.valid">\r\n                    <input class="span8" [(ngModel)]="project.name" ngControl="name" />\r\n                    <div [hidden]="form.controls.name.valid || form.controls.name.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'customer\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.customer.valid">\r\n                    <select class="span8" [(ngModel)]="project.customer" ngControl="customer">\r\n                        <option *ngFor="let c of customers" [value]="c.id">{{c.name}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.customer.valid || form.controls.customer.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'manager\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.manager.valid">\r\n                    <select class="span8" [(ngModel)]="project.manager" ngControl="manager">\r\n                        <option *ngFor="let m of users" [value]="m.id">{{m.login}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.manager.valid || form.controls.manager.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'programmer\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.programmer.valid">\r\n                    <select class="span8" [(ngModel)]="project.programmer" ngControl="programmer">\r\n                        <option *ngFor="let p of users" [value]="p.id">{{p.login}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.programmer.valid || form.controls.programmer.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'tester\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.tester.valid">\r\n                    <select class="span8" [(ngModel)]="project.tester" ngControl="tester">\r\n                        <option *ngFor="let t of users" [value]="t.id">{{t.login}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.tester.valid || form.controls.tester.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'observers\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span8" [(ngModel)]="project.observers" ngControl="observers">\r\n                        <option *ngFor="let obs of users" [value]="obs.id">{{obs.login}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'status\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <select class="span8" [(ngModel)]="project.status" ngControl="status">\r\n                        <option *ngFor="let st of statusOptions" [value]="st">{{st}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'finishDate\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input type="date" class="span2" [(ngModel)]="project.finishDate" ngControl="finishDate" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'comment\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.comment.valid">\r\n                    <textarea class="span8" [(ngModel)]="project.comment" ngControl="comment"></textarea>\r\n                    <div [hidden]="form.controls.comment.valid || form.controls.comment.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="fieldset">\r\n            <legend class="legend">\r\n                {{\'attachments\'}}\r\n            </legend>\r\n            <div class="form-group">\r\n                <button type="button" class="btn btn-upload" data-upload="">\r\n                    <i class="fa fa-paperclip"></i>\r\n                    <span>{{\'attach_file\'}}</span>\r\n                </button>\r\n                <div class="attachments" data-upload-files="">\r\n                    <div class="attachments-file" *ngFor="let att of project.attachments">\r\n                        <a class="file-name" href="{{att.url}}">\r\n                            {{att.realFileName}}\r\n                        </a>\r\n                        <span class="btn btn-sm btn-link btn-remove-file on-edit">\r\n                            <i class="fa fa-times"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </section>\r\n</form>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),task_service_1=__webpack_require__(598),TasksComponent=function(){function TasksComponent(_router,_routeSegment,_taskService){var _this=this;this._router=_router,this._routeSegment=_routeSegment,this._taskService=_taskService,this._taskService.getTasks(this._routeSegment.getParam("for")).subscribe(function(tasks){return _this.tasks=tasks},function(errorResponse){return _this.handleXhrError(errorResponse)})}return TasksComponent.prototype.composeRecord=function(){this._router.navigate(["/task","new"])},TasksComponent.prototype.deleteTask=function(task){this._taskService.deleteTask(task).subscribe()},TasksComponent.prototype.handleXhrError=function(errorResponse){401===errorResponse.status&&this._router.navigate(["/login"])},TasksComponent=__decorate([core_1.Component({selector:"[tasks]",template:__webpack_require__(599),pipes:[common_1.DatePipe]}),__metadata("design:paramtypes",[router_1.Router,router_1.RouteSegment,task_service_1.TaskService])],TasksComponent)}();exports.TasksComponent=TasksComponent},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),http_1=__webpack_require__(281),obj_utils_1=__webpack_require__(592),VIEW_URL="p?id=task-view",FORM_URL="p?id=task-form",HEADER={headers:new http_1.Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json"})},TaskService=function(){function TaskService(http){this.http=http}return TaskService.prototype.getTasks=function(at){return this.http.get(VIEW_URL+(at?"&for="+at:""),HEADER).map(function(response){return response.json().objects[0].list}).map(function(response){return response})},TaskService.prototype.getTaskById=function(taskId){return this.http.get(FORM_URL+"&docid="+taskId,HEADER).map(function(response){return response.json().objects[1]}).map(function(response){return response})},TaskService.prototype.saveTask=function(task){var url=FORM_URL+(task.id?"&docid="+task.id:"");return this.http.post(url,this.serializeTask(task),HEADER)},TaskService.prototype.deleteTask=function(task){return this.http["delete"](VIEW_URL)},TaskService.prototype.serializeTask=function(task){return obj_utils_1.serializeObj({type:task.type.id,status:task.status,priority:task.priority,body:task.body,assignee:task.assignee,start_date:task.startDate,due_date:task.dueDate,tags:Array.isArray(task.tags)?task.tags.map(function(it){return it.id}).join(","):task.tags,attachments:Array.isArray(task.attachments)?task.attachments.map(function(it){return it.id}).join(","):""})},TaskService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],TaskService)}();exports.TaskService=TaskService},function(module,exports){module.exports='<div class="content-header">\r\n    <h1 class="header-title">\r\n        {{\'tasks\'}}\r\n    </h1>\r\n    <div class="content-actions">\r\n        <button class="btn" type="button" (click)="composeRecord()">\r\n            {{\'new_task\'}}\r\n        </button>\r\n    </div>\r\n</div>\r\n<div class="content-body">\r\n    <div class="view view-task">\r\n        <header class="entries-head">\r\n            <div class="head-wrap">\r\n                <label class="entry-select">\r\n                    <input type="checkbox" data-toggle="docid" class="all" />\r\n                </label>\r\n                <div class="entry-captions">\r\n                    <span>{{\'body\'}}</span>\r\n                </div>\r\n            </div>\r\n        </header>\r\n        <div class="entries">\r\n            <div *ngIf="!tasks">\r\n                {{\'loading\'}}\r\n            </div>\r\n            <div class="entry-wrap" *ngFor="let task of tasks">\r\n                <div data-id="{{task.id}}" class="entry">\r\n                    <label class="entry-select">\r\n                        <input type="checkbox" name="docid" value="{{task.id}}" />\r\n                    </label>\r\n                    <a class="entry-link" [routerLink]="[\'/task\', task.id]">\r\n                        <div class="entry-fields">\r\n                            <div class="entry-fields">\r\n                                <span class="vw-task-status">{{task.status}}</span>\r\n                                <span class="vw-task-priority">{{task.priority}}</span>\r\n                                <span class="vw-task-body">{{task.body}}</span>\r\n                                <span class="vw-task-assignee">{{task.assignee}}</span>\r\n                                <span class="vw-date">{{task.startDate | date:\'dd.MM.y\'}}</span>\r\n                                <span class="vw-date">{{task.dueDate | date:\'dd.MM.y\'}}</span>\r\n                                <span class="vw-tags">\r\n                                    <span class="tag" *ngFor="let tag of tags">{{tag.name}}</span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),app_service_1=__webpack_require__(584),task_1=__webpack_require__(601),task_service_1=__webpack_require__(598),reference_service_1=__webpack_require__(585),TaskComponent=function(){function TaskComponent(_router,_routeSegment,_formBuilder,_appService,_taskService,_referenceService){var _this=this;this._router=_router,this._routeSegment=_routeSegment,this._formBuilder=_formBuilder,this._appService=_appService,this._taskService=_taskService,this._referenceService=_referenceService,this.form=_formBuilder.group({type:[""],status:[""],priority:[""],body:["",common_1.Validators.required],assignee:[""],startDate:[""],dueDate:[""],tags:[""],attachments:[""]}),"new"!==this._routeSegment.getParam("id")?this._taskService.getTaskById(this._routeSegment.getParam("id")).subscribe(function(task){return _this.task=task},function(errorResponse){return _this.handleXhrError(errorResponse)}):this.task=new task_1.Task,this._appService.getUsers().subscribe(function(users){return _this.users=users}),this._referenceService.getTags().subscribe(function(tags){return _this.tags=tags})}return TaskComponent.prototype.saveTask=function(){var _this=this;this._taskService.saveTask(this.task).subscribe(function(resp){return _this.close()})},TaskComponent.prototype.close=function(){this._router.navigate(["/tasks"])},TaskComponent.prototype.handleXhrError=function(errorResponse){401===errorResponse.status&&this._router.navigate(["/login"])},TaskComponent=__decorate([core_1.Component({selector:"[task]",template:__webpack_require__(602),directives:[common_1.FORM_DIRECTIVES],providers:[common_1.FormBuilder]}),__metadata("design:paramtypes",[router_1.Router,router_1.RouteSegment,common_1.FormBuilder,app_service_1.AppService,task_service_1.TaskService,reference_service_1.ReferenceService])],TaskComponent)}();exports.TaskComponent=TaskComponent},function(module,exports){"use strict";exports.TaskPriorityType=["HEIGHEST","HEIGHT","MEDIUM","NORMAL"],exports.TaskStatusType=["DRAFT","WAITING","PROCESSED","FINISHED"];var Task=function(){function Task(){}return Task}();exports.Task=Task},function(module,exports){module.exports='<div *ngIf="!task">\r\n    {{\'loading\'}}\r\n</div>\r\n<form class="form" [ngFormModel]="form" *ngIf="task">\r\n    <header class="content-header">\r\n        <button class="btn-back" type="button" (click)="close($event)">\r\n            <i class="fa fa-chevron-left"></i>\r\n        </button>\r\n        <h1 class="header-title">\r\n            {{\'task\'}}\r\n        </h1>\r\n        <div class="content-actions">\r\n            <button class="btn btn-primary" type="button" [disabled]="!form.valid" (click)="saveTask()">\r\n                {{\'save_close\'}}\r\n            </button>\r\n            <button class="btn" type="button" (click)="close($event)">\r\n                {{\'close\'}}\r\n            </button>\r\n        </div>\r\n    </header>\r\n    <section class="content-body">\r\n        <fieldset class="fieldset">\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'task_type\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.type.valid">\r\n                    <input class="span6" [(ngModel)]="task.type" ngControl="type" />\r\n                    <div [hidden]="form.controls.type.valid || form.controls.type.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'status\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <label>\r\n                        <input type="radio" name="status" value="453" [(ngModel)]="task.status" ngControl="status" />\r\n                        <span>DRAFT</span>\r\n                    </label>\r\n                    <label>\r\n                        <input type="radio" name="status" value="454" [(ngModel)]="task.status" ngControl="status" />\r\n                        <span>WAITING</span>\r\n                    </label>\r\n                    <label>\r\n                        <input type="radio" name="status" value="455" [(ngModel)]="task.status" ngControl="status" />\r\n                        <span>PROCESSED</span>\r\n                    </label>\r\n                    <label>\r\n                        <input type="radio" name="status" value="456" [(ngModel)]="task.status" ngControl="status" />\r\n                        <span>FINISHED</span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'priority\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.priority.valid">\r\n                    <select class="span3" [(ngModel)]="task.priority" ngControl="priority">\r\n                        <option *ngFor="let m of priorities" [value]="m.value">{{m.name}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.priority.valid || form.controls.priority.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'body\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.body.valid">\r\n                    <textarea class="span8" [(ngModel)]="task.body" ngControl="body"></textarea>\r\n                    <div [hidden]="form.controls.body.valid || form.controls.body.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'assignee_user\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.assignee.valid">\r\n                    <select class="span8" [(ngModel)]="task.assignee" ngControl="assignee">\r\n                        <option *ngFor="let m of users" [value]="m.id">{{m.login}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.assignee.valid || form.controls.assignee.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'start_date\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input type="date" class="span2" [(ngModel)]="task.startDate" ngControl="startDate" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'due_date\'}}\r\n                </div>\r\n                <div class="controls">\r\n                    <input type="date" class="span2" [(ngModel)]="task.dueDate" ngControl="dueDate" />\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    {{\'tags\'}}\r\n                </div>\r\n                <div class="controls" [class.has-error]="!form.controls.tags.valid">\r\n                    <select class="span8" multiple [(ngModel)]="task.tags" ngControl="tags">\r\n                        <option *ngFor="let m of tags" [value]="m.id">{{m.name}}</option>\r\n                    </select>\r\n                    <div [hidden]="form.controls.tags.valid || form.controls.tags.pristine" class="error-message">\r\n                        {{\'required\'}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="fieldset">\r\n            <legend class="legend">\r\n                {{\'attachments\'}}\r\n            </legend>\r\n            <div class="form-group">\r\n                <button type="button" class="btn btn-upload" data-upload="">\r\n                    <i class="fa fa-paperclip"></i>\r\n                    <span>{{\'attach_file\'}}</span>\r\n                </button>\r\n                <div class="attachments" data-upload-files="">\r\n                    <div class="attachments-file" *ngFor="let att of task.attachments">\r\n                        <a class="file-name" href="{{att.url}}">\r\n                            {{att.realFileName}}\r\n                        </a>\r\n                        <span class="btn btn-sm btn-link btn-remove-file on-edit">\r\n                            <i class="fa fa-times"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </section>\r\n</form>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),router_1=__webpack_require__(302),common_1=__webpack_require__(182),tabs_1=__webpack_require__(604),tab_1=__webpack_require__(605),app_service_1=__webpack_require__(584),user_1=__webpack_require__(606),UserProfileComponent=function(){function UserProfileComponent(_router,_formBuilder,_appService){this._router=_router,this._formBuilder=_formBuilder,this._appService=_appService,this.user=new user_1.User,this.form=_formBuilder.group({login:[],pwd:[],pwd_confirm:[],email:[]})}return UserProfileComponent.prototype.updateUserProfile=function(){this._appService.updateUserProfile(this.user)},UserProfileComponent.prototype.close=function(event){event.preventDefault(),window.history.back()},UserProfileComponent=__decorate([core_1.Component({selector:"[user-profile]",template:__webpack_require__(607),directives:[common_1.FORM_DIRECTIVES,tabs_1.Tabs,tab_1.Tab],providers:[common_1.FormBuilder]}),__metadata("design:paramtypes",[router_1.Router,common_1.FormBuilder,app_service_1.AppService])],UserProfileComponent)}();exports.UserProfileComponent=UserProfileComponent},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),tab_1=__webpack_require__(605),Tabs=function(){function Tabs(){}return Tabs.prototype.ngAfterContentInit=function(){var activeTabs=this.tabs.filter(function(tab){return tab.active});0===activeTabs.length&&this.selectTab(this.tabs.first)},Tabs.prototype.selectTab=function(tab){this.tabs.forEach(function(tab){return tab.active=!1}),tab.active=!0},Tabs.prototype.preventDefault=function(event){event.preventDefault()},__decorate([core_1.ContentChildren(tab_1.Tab),__metadata("design:type",core_1.QueryList)],Tabs.prototype,"tabs",void 0),Tabs=__decorate([core_1.Component({selector:"tabs",template:'\n      <ul class="nav nav-tabs">\n        <li *ngFor="let tab of tabs" (click)="selectTab(tab)" [class.active]="tab.active">\n          <a href="#" (click)="preventDefault($event)">{{tab.title}}</a>\n        </li>\n      </ul>\n      <ng-content></ng-content>\n    '
}),__metadata("design:paramtypes",[])],Tabs)}();exports.Tabs=Tabs},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),Tab=function(){function Tab(){this.active=!1}return __decorate([core_1.Input("tabTitle"),__metadata("design:type",String)],Tab.prototype,"title",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],Tab.prototype,"active",void 0),Tab=__decorate([core_1.Component({selector:"tab",styles:[".nav-tabs .pane { }"],template:'\n      <div [hidden]="!active" class="pane">\n        <ng-content></ng-content>\n      </div>\n    '}),__metadata("design:paramtypes",[])],Tab)}();exports.Tab=Tab},function(module,exports){"use strict";var User=function(){function User(){this.user_name="@anonymous"}return User}();exports.User=User},function(module,exports){module.exports='<form class="form form-userprofile" autocomplete="off" [ngFormModel]="form">\r\n    <header class="content-header">\r\n        <button class="btn-back" type="button" (click)="close($event)">\r\n            <i class="fa fa-chevron-left"></i>\r\n        </button>\r\n        <h1 class="header-title">\r\n            {{\'employee\'}} {{user.name}}\r\n        </h1>\r\n        <div class="content-actions">\r\n            <button class="btn btn-primary" type="button" [disabled]="!form.valid" (click)="updateUserProfile()">\r\n                {{\'save_close\'}}\r\n            </button>\r\n            <button class="btn" type="button" (click)="close($event)">\r\n                {{\'close\'}}\r\n            </button>\r\n        </div>\r\n    </header>\r\n    <section class="content-body">\r\n        <tabs>\r\n            <tab class="tab-pane" tabTitle="{{\'properties\'}}">\r\n                <!--<fieldset class="fieldset fieldset-user-avatar">\r\n                            <img class="user-avatar" src="img/avatar.png"/>\r\n                </fieldset>-->\r\n                <fieldset class="fieldset fieldset-user-fields">\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'user_name\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                {{user.name}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'login_name\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="text" class="span3" [(ngModel)]="user.login" ngControl="login" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'password\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="password" class="span3" [(ngModel)]="user.pwd" ngControl="pwd" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'password_confirm\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="password" class="span3" [(ngModel)]="user.pwd_confirm" ngControl="pwd_confirm" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'email\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <input type="email" class="span3" [(ngModel)]="user.email" ngControl="email" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'org_name\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                {{user.organization}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'department\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                {{user.department}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'position\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <span class="input-placeholder">\r\n                                {{user.position}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'roles\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <ul class="input-placeholder list-style-none">\r\n                                <xsl:for-each select="fields/roles/entry">\r\n                                    <li>\r\n                                        <xsl:value-of select="." />\r\n                                    </li>\r\n                                </xsl:for-each>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n            </tab>\r\n            <tab class="tab-pane" tabTitle="{{\'interface\'}}">\r\n                <fieldset class="fieldset">\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'limit_view\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <select name="pagesize" class="native span2">\r\n                                <option value="10">\r\n                                    <xsl:if test="//pagesize = \'10\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    10\r\n                                </option>\r\n                                <option value="20">\r\n                                    <xsl:if test="//pagesize = \'20\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    20\r\n                                </option>\r\n                                <option value="30">\r\n                                    <xsl:if test="//pagesize = \'30\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    30\r\n                                </option>\r\n                                <option value="50">\r\n                                    <xsl:if test="//pagesize = \'50\'">\r\n                                        <xsl:attribute name="selected" select="\'selected\'" />\r\n                                    </xsl:if>\r\n                                    50\r\n                                </option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label">\r\n                            {{\'interface_lang\'}}\r\n                        </div>\r\n                        <div class="controls">\r\n                            <xsl:variable name="currentlang" select="/request/@lang" />\r\n                            <select name="lang" class="native span2">\r\n                                <xsl:for-each select="//query[@entity = \'language\']/entry">\r\n                                    <option value="{viewcontent/lang/@id}">\r\n                                        <xsl:if test="viewcontent/lang/@id = $currentlang">\r\n                                            <xsl:attribute name="selected" select="\'selected\'" />\r\n                                        </xsl:if>\r\n                                        <xsl:value-of select="viewcontent/lang" />\r\n                                    </option>\r\n                                </xsl:for-each>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="control-label"></div>\r\n                        <div class="controls">\r\n                            <a href="javascript:void(0)" data-toggle-theme="theme1" class="input-placeholder">\r\n                                {{\'change_skin\'}}\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n            </tab>\r\n        </tabs>\r\n    </section>\r\n</form>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},core_1=__webpack_require__(7),LoginComponent=function(){function LoginComponent(){window.location.href="Logout"}return LoginComponent=__decorate([core_1.Component({selector:"[login]",template:"login"}),__metadata("design:paramtypes",[])],LoginComponent)}();exports.LoginComponent=LoginComponent},function(module,exports){module.exports='<nb-notify></nb-notify>\r\n<div class="layout">\r\n    <div class="content-overlay" (mousedown)="hideNav($event)" (touchstart)="hideNav($event)"></div>\r\n    <header class="header navbar navbar-fixed-top">\r\n        <div class="container">\r\n            <div class="navbar-header">\r\n                <button class="btn-side-nav-toggle" type="button" (click)="toggleNav()"></button>\r\n                <img class="brand-logo" alt="logo" src="img/logo.png" />\r\n                <span class="brand-title">\r\n                    {{HEADER_TITLE}}\r\n                </span>\r\n            </div>\r\n            <nav class="navbar-nav navbar-right">\r\n                <ul class="nav navbar-right">\r\n                    <li class="dropdown">\r\n                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" (click)="preventDefault($event)">\r\n                            <i class="fa fa-user"></i>\r\n                        </a>\r\n                        <ul class="dropdown-menu right">\r\n                            <li>\r\n                                <a class="user-profile" [routerLink]="[\'/user-profile\']">\r\n                                    {{loggedUser.user_name}}\r\n                                </a>\r\n                            </li>\r\n                            <li class="divider"></li>\r\n                            <li>\r\n                                <a class="logout" href="#logout" (click)="logout($event)">\r\n                                    logout\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n                <form class="navbar-form navbar-search" name="ft-search" (submit)="ftSearch()">\r\n                    <input type="hidden" name="id" value="search" />\r\n                    <input type="search" class="q" name="keyword" value="{{search_keyword}}" placeholder="{{\'search\'}}" required autocomplete="off" (focus)="searchToggle()" (blur)="searchToggle()" />\r\n                    <button type="reset">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                    <input type="submit" value="search" />\r\n                </form>\r\n            </nav>\r\n        </div>\r\n    </header>\r\n    <section class="container">\r\n        <aside nav class="aside side-nav"></aside>\r\n        <main class="content">\r\n            <router-outlet></router-outlet>\r\n        </main>\r\n    </section>\r\n</div>\r\n'}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy8uL2FwcC9tYWluLnRzIiwid2VicGFjazovLy8uL34vcnhqcy9SeC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvYmluZENhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvQXN5bmNTdWJqZWN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb21iaW5lTGF0ZXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc1NjaGVkdWxlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvT3V0ZXJTdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL2lzUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc3ltYm9sL2l0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9Jbm5lclN1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2NvbmNhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9jb25jYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2RlZmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2RlZmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0RlZmVyT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZW1wdHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvZW1wdHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0ZvcmtKb2luT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0l0ZXJhdG9yT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9BcnJheUxpa2VPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9vYnNlcnZlT24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL05vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9nZW5lcmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9HZW5lcmF0ZU9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2ludGVydmFsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2ludGVydmFsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0ludGVydmFsT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc051bWVyaWMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9hc3luYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvUXVldWVTY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9RdWV1ZUFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvbWVyZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvbWVyZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21lcmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9yYWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yYWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9uZXZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9uZXZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9OZXZlck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3JhbmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL3JhbmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL1JhbmdlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvdGhyb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvdGhyb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvRXJyb3JPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS90aW1lci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS90aW1lci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9UaW1lck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvaXNEYXRlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS96aXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvemlwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci96aXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlckNvdW50LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9idWZmZXJDb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlclRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlclRvZ2dsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlcldoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlcldoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL1JlcGxheVN1YmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbXVsdGljYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NhdGNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbWJpbmVBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbWJpbmVBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb21iaW5lTGF0ZXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0QWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb25jYXRBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0TWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21lcmdlTWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZW1hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kZW1hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kZWJvdW5jZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZGVmYXVsdElmRW1wdHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWxheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWxheVdoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RlbGF5V2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2RvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2V4cGFuZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZXhwYW5kLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9maW5hbGx5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9maW5hbGx5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZmlyc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2ZpcnN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL0VtcHR5RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9ncm91cEJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9ncm91cEJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL01hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9NYXBQb2x5ZmlsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9GYXN0TWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvaWdub3JlRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYXVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2F1ZGl0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYXVkaXRUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9hdWRpdFRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9sYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9sYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbGV0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9sZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9ldmVyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZXZlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9tYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9tYXRlcmlhbGl6ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tdWx0aWNhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9vYnNlcnZlT24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wYXJ0aXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3BhcnRpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9ub3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wbHVjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcGx1Y2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL0JlaGF2aW9yU3ViamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoTGFzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaExhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9yYWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcmVkdWNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yZWR1Y2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZXBlYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3JlcGVhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3JldHJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yZXRyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3JldHJ5V2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcmV0cnlXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2FtcGxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zYW1wbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zYW1wbGVUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zYW1wbGVUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2Nhbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2Nhbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NoYXJlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zaGFyZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NpbmdsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2luZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2tpcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NraXBVbnRpbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc2tpcFVudGlsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFdoaWxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9za2lwV2hpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zdGFydFdpdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N0YXJ0V2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3N1YnNjcmliZU9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zdWJzY3JpYmVPbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9hc2FwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvQXNhcFNjaGVkdWxlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL0FzYXBBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvSW1tZWRpYXRlLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc3dpdGNoTWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaE1hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGFrZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VMYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90YWtlTGFzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VVbnRpbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGFrZVVudGlsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZVdoaWxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90YWtlV2hpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGhyb3R0bGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3Rocm90dGxlVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3RpbWVvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3RpbWVvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0V2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGltZW91dFdpdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90b0FycmF5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90b0FycmF5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdG9Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93Q291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dUb2dnbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb20uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvemlwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvemlwQWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci96aXBBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL09wZXJhdG9yLmpzIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvYXBwLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3NlcnZpY2VzL3JlZmVyZW5jZS5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2FwcC9zZXJ2aWNlcy9zdGFmZi5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL25iLW5vdGlmeS50cyIsIndlYnBhY2s6Ly8vLi9hcHAvY29tcG9uZW50cy9uYXYudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RlbXBsYXRlcy9uYXYuaHRtbCIsIndlYnBhY2s6Ly8vLi9hcHAvY29tcG9uZW50cy9wcm9qZWN0cy50cyIsIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC5zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL2FwcC91dGlscy9vYmotdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RlbXBsYXRlcy9wcm9qZWN0cy5odG1sIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL3Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovLy8uL2FwcC90ZW1wbGF0ZXMvcHJvamVjdC5odG1sIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL3Rhc2tzLnRzIiwid2VicGFjazovLy8uL2FwcC9zZXJ2aWNlcy90YXNrLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RlbXBsYXRlcy90YXNrcy5odG1sIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL3Rhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGVscy90YXNrLnRzIiwid2VicGFjazovLy8uL2FwcC90ZW1wbGF0ZXMvdGFzay5odG1sIiwid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL3VzZXItcHJvZmlsZS50cyIsIndlYnBhY2s6Ly8vLi9hcHAvY29tcG9uZW50cy90YWJzL3RhYnMudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbXBvbmVudHMvdGFicy90YWIudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL21vZGVscy91c2VyLnRzIiwid2VicGFjazovLy8uL2FwcC90ZW1wbGF0ZXMvdXNlci1wcm9maWxlLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vYXBwL2NvbXBvbmVudHMvbG9naW4udHMiLCJ3ZWJwYWNrOi8vLy4vYXBwL3RlbXBsYXRlcy9hcHAuaHRtbCJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInBsYXRmb3JtX2Jyb3dzZXJfZHluYW1pY18xIiwiY29yZV8xIiwiaHR0cF8xIiwicm91dGVyXzEiLCJjb21tb25fMSIsImFwcF8xIiwibmJfbm90aWZ5XzEiLCJhcHBfc2VydmljZV8xIiwidGFza19zZXJ2aWNlXzEiLCJwcm9qZWN0X3NlcnZpY2VfMSIsInJlZmVyZW5jZV9zZXJ2aWNlXzEiLCJzdGFmZl9zZXJ2aWNlXzEiLCJlbmFibGVQcm9kTW9kZSIsImJvb3RzdHJhcCIsIkFwcCIsIkhUVFBfUFJPVklERVJTIiwiUk9VVEVSX0RJUkVDVElWRVMiLCJST1VURVJfUFJPVklERVJTIiwicHJvdmlkZSIsIlBMQVRGT1JNX0RJUkVDVElWRVMiLCJ1c2VWYWx1ZSIsIm11bHRpIiwiTG9jYXRpb25TdHJhdGVneSIsInVzZUNsYXNzIiwiSGFzaExvY2F0aW9uU3RyYXRlZ3kiLCJGT1JNX1BST1ZJREVSUyIsIk5CTm90aWZ5Q29tcG9uZW50IiwiQXBwU2VydmljZSIsIlRhc2tTZXJ2aWNlIiwiUHJvamVjdFNlcnZpY2UiLCJSZWZlcmVuY2VTZXJ2aWNlIiwiU3RhZmZTZXJ2aWNlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiU3ViamVjdF8xIiwiU3ViamVjdCIsIk9ic2VydmFibGVfMSIsIk9ic2VydmFibGUiLCJPcGVyYXRvcl8xIiwiT3BlcmF0b3IiLCJTdWJzY3JpcHRpb25fMSIsIlN1YnNjcmlwdGlvbiIsIlN1YnNjcmliZXJfMSIsIlN1YnNjcmliZXIiLCJBc3luY1N1YmplY3RfMSIsIkFzeW5jU3ViamVjdCIsIlJlcGxheVN1YmplY3RfMSIsIlJlcGxheVN1YmplY3QiLCJCZWhhdmlvclN1YmplY3RfMSIsIkJlaGF2aW9yU3ViamVjdCIsIkNvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xIiwiQ29ubmVjdGFibGVPYnNlcnZhYmxlIiwiTm90aWZpY2F0aW9uXzEiLCJOb3RpZmljYXRpb24iLCJFbXB0eUVycm9yXzEiLCJFbXB0eUVycm9yIiwiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSIsIkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIiwiVW5zdWJzY3JpcHRpb25FcnJvcl8xIiwiVW5zdWJzY3JpcHRpb25FcnJvciIsImFzYXBfMSIsImFzeW5jXzEiLCJxdWV1ZV8xIiwicnhTdWJzY3JpYmVyXzEiLCJpdGVyYXRvcl8xIiwib2JzZXJ2YWJsZSIsIlNjaGVkdWxlciIsImFzYXAiLCJhc3luYyIsInF1ZXVlIiwiU3ltYm9sIiwicnhTdWJzY3JpYmVyIiwiJCRyeFN1YnNjcmliZXIiLCJpdGVyYXRvciIsIiQkaXRlcmF0b3IiLCJiaW5kQ2FsbGJhY2tfMSIsImJpbmRDYWxsYmFjayIsIkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlXzEiLCJCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSIsImNyZWF0ZSIsImRpc3BhdGNoIiwic3RhdGUiLCJzZWxmIiwidGhpcyIsInNvdXJjZSIsInN1YnNjcmliZXIiLCJjYWxsYmFja0Z1bmMiLCJhcmdzIiwic2NoZWR1bGVyIiwic3ViamVjdCIsImhhbmRsZXIiLCJoYW5kbGVyRm4iLCJpbm5lckFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNlbGVjdG9yIiwicmVzdWx0XzIiLCJ0cnlDYXRjaF8xIiwidHJ5Q2F0Y2giLCJhcHBseSIsImVycm9yT2JqZWN0XzEiLCJlcnJvck9iamVjdCIsImFkZCIsInNjaGVkdWxlIiwiZGlzcGF0Y2hFcnJvciIsImUiLCJkaXNwYXRjaE5leHQiLCJ2YWx1ZSIsInJlc3VsdCIsImNvbmNhdCIsInN1YnNjcmliZSIsImFyZyIsIm5leHQiLCJjb21wbGV0ZSIsIl9fZXh0ZW5kcyIsImQiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3RvdHlwZSIsIk9iamVjdCIsIl9zdXBlciIsImNhbGwiLCJmdW5jIiwidW5kZWZpbmVkIiwiX3N1YnNjcmliZSIsInJlc3VsdF8xIiwiaGFzTmV4dCIsImhhc0NvbXBsZXRlZCIsIl9uZXh0IiwiX2NvbXBsZXRlIiwiaW5kZXgiLCJvYnNlcnZlcnMiLCJsZW4iLCJpc1Vuc3Vic2NyaWJlZCIsIm8iLCJ1bnN1YnNjcmliZSIsImJpbmROb2RlQ2FsbGJhY2tfMSIsImJpbmROb2RlQ2FsbGJhY2siLCJCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMSIsIkJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSIsInNoaWZ0IiwiY29tYmluZUxhdGVzdF8xIiwiY29tYmluZUxhdGVzdCIsImNvbWJpbmVMYXRlc3RTdGF0aWMiLCJvYnNlcnZhYmxlcyIsInByb2plY3QiLCJwb3AiLCJpc0FycmF5XzEiLCJpc0FycmF5IiwidW5zaGlmdCIsIkFycmF5T2JzZXJ2YWJsZV8xIiwiQXJyYXlPYnNlcnZhYmxlIiwibGlmdCIsIkNvbWJpbmVMYXRlc3RPcGVyYXRvciIsImlzU2NoZWR1bGVyXzEiLCJpc1NjaGVkdWxlciIsIk91dGVyU3Vic2NyaWJlcl8xIiwic3Vic2NyaWJlVG9SZXN1bHRfMSIsIkNvbWJpbmVMYXRlc3RTdWJzY3JpYmVyIiwiZGVzdGluYXRpb24iLCJhY3RpdmUiLCJ2YWx1ZXMiLCJ0b1Jlc3BvbmQiLCJwdXNoIiwiaSIsInN1YnNjcmliZVRvUmVzdWx0Iiwibm90aWZ5Q29tcGxldGUiLCJ1bnVzZWQiLCJub3RpZnlOZXh0Iiwib3V0ZXJWYWx1ZSIsImlubmVyVmFsdWUiLCJvdXRlckluZGV4IiwiaW5uZXJJbmRleCIsImlubmVyU3ViIiwiZm91bmQiLCJpbmRleE9mIiwic3BsaWNlIiwiX3RyeVByb2plY3QiLCJPdXRlclN1YnNjcmliZXIiLCJTY2FsYXJPYnNlcnZhYmxlXzEiLCJFbXB0eU9ic2VydmFibGVfMSIsImFycmF5IiwiX2lzU2NhbGFyIiwib2YiLCJTY2FsYXJPYnNlcnZhYmxlIiwiRW1wdHlPYnNlcnZhYmxlIiwiY291bnQiLCJkb25lIiwibm90aWZ5RXJyb3IiLCJvdXRlclN1YnNjcmliZXIiLCJJbm5lclN1YnNjcmliZXJfMSIsIklubmVyU3Vic2NyaWJlciIsImlzUHJvbWlzZV8xIiwiaXNQcm9taXNlIiwidGhlbiIsInJvb3RfMSIsInJvb3QiLCJzZXRUaW1lb3V0IiwiX2EiLCJpdGVtIiwiJCRvYnNlcnZhYmxlIiwib2JzIiwiVHlwZUVycm9yIiwiU2V0IiwiTWFwIiwia2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJrZXkiLCJwYXJlbnQiLCJfZXJyb3IiLCJjb25jYXRfMSIsImNvbmNhdFN0YXRpYyIsIm1lcmdlQWxsXzEiLCJNZXJnZUFsbE9wZXJhdG9yIiwibWVyZ2VBbGwiLCJjb25jdXJyZW50IiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJvYnNlcnZlciIsIk1lcmdlQWxsU3Vic2NyaWJlciIsImJ1ZmZlciIsInJlbW92ZSIsImRlZmVyXzEiLCJkZWZlciIsIkRlZmVyT2JzZXJ2YWJsZV8xIiwiRGVmZXJPYnNlcnZhYmxlIiwib2JzZXJ2YWJsZUZhY3RvcnkiLCJEZWZlclN1YnNjcmliZXIiLCJmYWN0b3J5IiwidHJ5RGVmZXIiLCJfY2FsbEZhY3RvcnkiLCJlbXB0eV8xIiwiZW1wdHkiLCJmb3JrSm9pbl8xIiwiZm9ya0pvaW4iLCJGb3JrSm9pbk9ic2VydmFibGVfMSIsIkZvcmtKb2luT2JzZXJ2YWJsZSIsInNvdXJjZXMiLCJyZXN1bHRTZWxlY3RvciIsIkZvcmtKb2luU3Vic2NyaWJlciIsImNvbXBsZXRlZCIsImhhdmVWYWx1ZXMiLCJ0b3RhbCIsIkFycmF5IiwiaW5uZXJTdWJzY3JpcHRpb24iLCJfaGFzVmFsdWUiLCJmcm9tXzEiLCJmcm9tIiwiRnJvbU9ic2VydmFibGVfMSIsIkZyb21PYnNlcnZhYmxlIiwiaXNGdW5jdGlvbl8xIiwiUHJvbWlzZU9ic2VydmFibGVfMSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZV8xIiwiQXJyYXlMaWtlT2JzZXJ2YWJsZV8xIiwib2JzZXJ2ZU9uXzEiLCJpc0FycmF5TGlrZSIsIngiLCJpc2giLCJtYXBGbk9yU2NoZWR1bGVyIiwidGhpc0FyZyIsImxhc3RTY2hlZHVsZXIiLCJtYXBGbiIsImlzRnVuY3Rpb24iLCJQcm9taXNlT2JzZXJ2YWJsZSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZSIsIkFycmF5TGlrZU9ic2VydmFibGUiLCJPYnNlcnZlT25TdWJzY3JpYmVyIiwiZ2V0SXRlcmF0b3IiLCJvYmoiLCJTdHJpbmdJdGVyYXRvciIsIkFycmF5SXRlcmF0b3IiLCJ0b0xlbmd0aCIsImlzTmFOIiwibnVtYmVySXNGaW5pdGUiLCJzaWduIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibWF4U2FmZUludGVnZXIiLCJpc0Zpbml0ZSIsInZhbHVlQXNOdW1iZXIiLCJpc09iamVjdF8xIiwiRXJyb3IiLCJpc09iamVjdCIsImhhc0Vycm9yIiwic3RyIiwiaWR4IiwiY2hhckF0IiwiYXJyIiwicG93IiwiYXJyYXlMaWtlIiwiYmluZCIsIm9ic2VydmVPbiIsImRlbGF5IiwiT2JzZXJ2ZU9uT3BlcmF0b3IiLCJub3RpZmljYXRpb24iLCJvYnNlcnZlIiwic2NoZWR1bGVNZXNzYWdlIiwiT2JzZXJ2ZU9uTWVzc2FnZSIsImNyZWF0ZU5leHQiLCJjcmVhdGVFcnJvciIsImNyZWF0ZUNvbXBsZXRlIiwia2luZCIsImV4Y2VwdGlvbiIsImhhc1ZhbHVlIiwiYWNjZXB0IiwibmV4dE9yT2JzZXJ2ZXIiLCJ0b09ic2VydmFibGUiLCJ1bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbiIsImNvbXBsZXRlTm90aWZpY2F0aW9uIiwiZnJvbUV2ZW50XzEiLCJmcm9tRXZlbnQiLCJGcm9tRXZlbnRPYnNlcnZhYmxlXzEiLCJGcm9tRXZlbnRPYnNlcnZhYmxlIiwiaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyIiwic291cmNlT2JqIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImlzSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXIiLCJvbiIsIm9mZiIsImlzTm9kZUxpc3QiLCJ0b1N0cmluZyIsImlzSFRNTENvbGxlY3Rpb24iLCJpc0V2ZW50VGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJ0YXJnZXQiLCJzZXR1cFN1YnNjcmlwdGlvbiIsImZyb21FdmVudFBhdHRlcm5fMSIsImZyb21FdmVudFBhdHRlcm4iLCJGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZV8xIiwiRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUiLCJhZGRIYW5kbGVyIiwicmVtb3ZlSGFuZGxlciIsImZyb21Qcm9taXNlXzEiLCJmcm9tUHJvbWlzZSIsIkdlbmVyYXRlT2JzZXJ2YWJsZV8xIiwiZ2VuZXJhdGUiLCJHZW5lcmF0ZU9ic2VydmFibGUiLCJzZWxmU2VsZWN0b3IiLCJpbml0aWFsU3RhdGUiLCJjb25kaXRpb24iLCJpdGVyYXRlIiwiaW5pdGlhbFN0YXRlT3JPcHRpb25zIiwicmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUiLCJjb25kaXRpb25SZXN1bHQiLCJuZWVkSXRlcmF0ZSIsImludGVydmFsXzEiLCJpbnRlcnZhbCIsIkludGVydmFsT2JzZXJ2YWJsZV8xIiwiSW50ZXJ2YWxPYnNlcnZhYmxlIiwiaXNOdW1lcmljXzEiLCJwZXJpb2QiLCJpc051bWVyaWMiLCJ2YWwiLCJwYXJzZUZsb2F0IiwiQXN5bmNTY2hlZHVsZXJfMSIsIkFzeW5jU2NoZWR1bGVyIiwiRnV0dXJlQWN0aW9uXzEiLCJRdWV1ZVNjaGVkdWxlcl8xIiwic2NoZWR1bGVOb3ciLCJ3b3JrIiwiRnV0dXJlQWN0aW9uIiwiUXVldWVTY2hlZHVsZXIiLCJwZW5kaW5nIiwiZXhlY3V0ZSIsIl9zY2hlZHVsZSIsIl90aGlzIiwiaWQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJhY3Rpb25zIiwiZmx1c2giLCJfdW5zdWJzY3JpYmUiLCJRdWV1ZUFjdGlvbl8xIiwic2NoZWR1bGVkSWQiLCJub3ciLCJEYXRlIiwiYWN0aW9uIiwic2NoZWR1bGVMYXRlciIsIlF1ZXVlQWN0aW9uIiwibWVyZ2VfMSIsIm1lcmdlIiwibWVyZ2VTdGF0aWMiLCJsYXN0IiwicmFjZV8xIiwicmFjZSIsInJhY2VTdGF0aWMiLCJSYWNlT3BlcmF0b3IiLCJSYWNlU3Vic2NyaWJlciIsImhhc0ZpcnN0Iiwic3Vic2NyaXB0aW9ucyIsInN1YnNjcmlwdGlvbiIsIm5ldmVyXzEiLCJuZXZlciIsIk5ldmVyT2JzZXJ2YWJsZV8xIiwiTmV2ZXJPYnNlcnZhYmxlIiwibm9vcF8xIiwibm9vcCIsIm9mXzEiLCJyYW5nZV8xIiwicmFuZ2UiLCJSYW5nZU9ic2VydmFibGVfMSIsIlJhbmdlT2JzZXJ2YWJsZSIsInN0YXJ0IiwiX2NvdW50IiwidGhyb3dfMSIsIl90aHJvdyIsIkVycm9yT2JzZXJ2YWJsZV8xIiwiRXJyb3JPYnNlcnZhYmxlIiwidGltZXJfMSIsInRpbWVyIiwiVGltZXJPYnNlcnZhYmxlXzEiLCJUaW1lck9ic2VydmFibGUiLCJpc0RhdGVfMSIsImR1ZVRpbWUiLCJpc0RhdGUiLCJpbml0aWFsRGVsYXkiLCJ6aXBfMSIsInppcCIsInppcFN0YXRpYyIsInppcFByb3RvIiwiWmlwT3BlcmF0b3IiLCJaaXBTdWJzY3JpYmVyIiwiaXRlcmF0b3JzIiwiU3RhdGljQXJyYXlJdGVyYXRvciIsIlN0YXRpY0l0ZXJhdG9yIiwiWmlwQnVmZmVySXRlcmF0b3IiLCJzdGlsbFVuc3Vic2NyaWJlZCIsIm5vdGlmeUluYWN0aXZlIiwiY2hlY2tJdGVyYXRvcnMiLCJzaG91bGRDb21wbGV0ZSIsIm5leHRSZXN1bHQiLCJpc0NvbXBsZXRlIiwiYnVmZmVyXzEiLCJjbG9zaW5nTm90aWZpZXIiLCJCdWZmZXJPcGVyYXRvciIsIkJ1ZmZlclN1YnNjcmliZXIiLCJidWZmZXJDb3VudF8xIiwiYnVmZmVyQ291bnQiLCJidWZmZXJTaXplIiwic3RhcnRCdWZmZXJFdmVyeSIsIkJ1ZmZlckNvdW50T3BlcmF0b3IiLCJCdWZmZXJDb3VudFN1YnNjcmliZXIiLCJidWZmZXJzIiwiYnVmZmVyVGltZV8xIiwiYnVmZmVyVGltZSIsImJ1ZmZlclRpbWVTcGFuIiwiYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCIsIkJ1ZmZlclRpbWVPcGVyYXRvciIsImRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5IiwicHJldkJ1ZmZlciIsImNsb3NlQnVmZmVyIiwib3BlbkJ1ZmZlciIsImRpc3BhdGNoQnVmZmVyQ3JlYXRpb24iLCJkaXNwYXRjaEJ1ZmZlckNsb3NlIiwiQnVmZmVyVGltZVN1YnNjcmliZXIiLCJjbG9zZVN0YXRlIiwiY3JlYXRpb25TdGF0ZSIsInRpbWVTcGFuT25seVN0YXRlIiwiYnVmZmVyVG9nZ2xlXzEiLCJidWZmZXJUb2dnbGUiLCJvcGVuaW5ncyIsImNsb3NpbmdTZWxlY3RvciIsIkJ1ZmZlclRvZ2dsZU9wZXJhdG9yIiwiQnVmZmVyVG9nZ2xlU3Vic2NyaWJlciIsImNvbnRleHRzIiwiY29udGV4dCIsInRyeVN1YnNjcmliZSIsImJ1ZmZlcldoZW5fMSIsImJ1ZmZlcldoZW4iLCJCdWZmZXJXaGVuT3BlcmF0b3IiLCJCdWZmZXJXaGVuU3Vic2NyaWJlciIsInN1YnNjcmliaW5nIiwiY2xvc2luZ1N1YnNjcmlwdGlvbiIsImNhY2hlXzEiLCJjYWNoZSIsIndpbmRvd1RpbWUiLCJwdWJsaXNoUmVwbGF5XzEiLCJwdWJsaXNoUmVwbGF5IiwicmVmQ291bnQiLCJtdWx0aWNhc3RfMSIsIm11bHRpY2FzdCIsImV2ZW50cyIsIl93aW5kb3dUaW1lIiwiX2dldE5vdyIsIlJlcGxheUV2ZW50IiwiX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzIiwiZXZlbnRzQ291bnQiLCJzcGxpY2VDb3VudCIsInRpbWUiLCJtYXgiLCJzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeSIsInN1YmplY3RGYWN0b3J5IiwiZ2V0U3ViamVjdCIsImNvbm5lY3QiLCJDb25uZWN0YWJsZVN1YnNjcmlwdGlvbiIsIlJlZkNvdW50T2JzZXJ2YWJsZSIsIl9jbG9zZVN1YnNjcmlwdGlvbiIsImNvbm5lY3RhYmxlIiwicmVmQ291bnRTdWJzY3JpYmVyIiwiUmVmQ291bnRTdWJzY3JpYmVyIiwiY29ubmVjdGlvbiIsInJlZkNvdW50T2JzZXJ2YWJsZSIsIl9yZXNldENvbm5lY3RhYmxlIiwib2JzQ29ubmVjdGlvbiIsInN1YkNvbm5lY3Rpb24iLCJjYXRjaF8xIiwiX2NhdGNoIiwib3BlcmF0b3IiLCJDYXRjaE9wZXJhdG9yIiwiY2F1Z2h0IiwiQ2F0Y2hTdWJzY3JpYmVyIiwiaXNTdG9wcGVkIiwiX2lubmVyU3ViIiwiY29tYmluZUFsbF8xIiwiY29tYmluZUFsbCIsImNvbmNhdEFsbF8xIiwiY29uY2F0QWxsIiwiY29uY2F0TWFwXzEiLCJjb25jYXRNYXAiLCJtZXJnZU1hcF8xIiwiTWVyZ2VNYXBPcGVyYXRvciIsIm1lcmdlTWFwIiwiTWVyZ2VNYXBTdWJzY3JpYmVyIiwiX3RyeU5leHQiLCJfbm90aWZ5UmVzdWx0U2VsZWN0b3IiLCJjb25jYXRNYXBUb18xIiwiY29uY2F0TWFwVG8iLCJpbm5lck9ic2VydmFibGUiLCJtZXJnZU1hcFRvXzEiLCJNZXJnZU1hcFRvT3BlcmF0b3IiLCJtZXJnZU1hcFRvIiwiTWVyZ2VNYXBUb1N1YnNjcmliZXIiLCJ0cnlTZWxlY3RSZXN1bHQiLCJjb3VudF8xIiwicHJlZGljYXRlIiwiQ291bnRPcGVyYXRvciIsIkNvdW50U3Vic2NyaWJlciIsIl90cnlQcmVkaWNhdGUiLCJkZW1hdGVyaWFsaXplXzEiLCJkZW1hdGVyaWFsaXplIiwiRGVNYXRlcmlhbGl6ZU9wZXJhdG9yIiwiRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIiLCJkZWJvdW5jZV8xIiwiZGVib3VuY2UiLCJkdXJhdGlvblNlbGVjdG9yIiwiRGVib3VuY2VPcGVyYXRvciIsIkRlYm91bmNlU3Vic2NyaWJlciIsImR1cmF0aW9uU3Vic2NyaXB0aW9uIiwiZW1pdFZhbHVlIiwiZHVyYXRpb24iLCJkZWJvdW5jZVRpbWVfMSIsImRlYm91bmNlVGltZSIsIkRlYm91bmNlVGltZU9wZXJhdG9yIiwiZGVib3VuY2VkTmV4dCIsIkRlYm91bmNlVGltZVN1YnNjcmliZXIiLCJkZWJvdW5jZWRTdWJzY3JpcHRpb24iLCJsYXN0VmFsdWUiLCJjbGVhckRlYm91bmNlIiwiZGVmYXVsdElmRW1wdHlfMSIsImRlZmF1bHRJZkVtcHR5IiwiZGVmYXVsdFZhbHVlIiwiRGVmYXVsdElmRW1wdHlPcGVyYXRvciIsIkRlZmF1bHRJZkVtcHR5U3Vic2NyaWJlciIsImlzRW1wdHkiLCJkZWxheV8xIiwiYWJzb2x1dGVEZWxheSIsImRlbGF5Rm9yIiwiRGVsYXlPcGVyYXRvciIsIkRlbGF5U3Vic2NyaWJlciIsImVycm9yZWQiLCJzY2hlZHVsZU5vdGlmaWNhdGlvbiIsIm1lc3NhZ2UiLCJEZWxheU1lc3NhZ2UiLCJkZWxheVdoZW5fMSIsImRlbGF5V2hlbiIsImRlbGF5RHVyYXRpb25TZWxlY3RvciIsInN1YnNjcmlwdGlvbkRlbGF5IiwiU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlIiwiRGVsYXlXaGVuT3BlcmF0b3IiLCJEZWxheVdoZW5TdWJzY3JpYmVyIiwiZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMiLCJyZW1vdmVTdWJzY3JpcHRpb24iLCJ0cnlDb21wbGV0ZSIsImRlbGF5Tm90aWZpZXIiLCJ0cnlEZWxheSIsInN1YnNjcmlwdGlvbklkeCIsIm5vdGlmaWVyU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyIiwic291cmNlU3Vic2NyaWJlZCIsInN1YnNjcmliZVRvU291cmNlIiwiZGlzdGluY3RVbnRpbENoYW5nZWRfMSIsImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwiY29tcGFyZSIsImtleVNlbGVjdG9yIiwiRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvciIsIkRpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciIsImhhc0tleSIsInkiLCJCb29sZWFuIiwiZG9fMSIsIl9kbyIsIkRvT3BlcmF0b3IiLCJEb1N1YnNjcmliZXIiLCJzYWZlU3Vic2NyaWJlciIsInN5bmNFcnJvclRocm93YWJsZSIsInN5bmNFcnJvclRocm93biIsInN5bmNFcnJvclZhbHVlIiwiZXhwYW5kXzEiLCJleHBhbmQiLCJFeHBhbmRPcGVyYXRvciIsIkV4cGFuZFN1YnNjcmliZXIiLCJzdWJzY3JpYmVUb1Byb2plY3Rpb24iLCJmaWx0ZXJfMSIsImZpbHRlciIsIkZpbHRlck9wZXJhdG9yIiwiRmlsdGVyU3Vic2NyaWJlciIsImZpbmFsbHlfMSIsIl9maW5hbGx5IiwiZmluYWxseVNlbGVjdG9yIiwiRmluYWxseU9wZXJhdG9yIiwiRmluYWxseVN1YnNjcmliZXIiLCJmaXJzdF8xIiwiZmlyc3QiLCJGaXJzdE9wZXJhdG9yIiwiRmlyc3RTdWJzY3JpYmVyIiwiX2VtaXQiLCJfdHJ5UmVzdWx0U2VsZWN0b3IiLCJfZW1pdEZpbmFsIiwibmFtZSIsImdyb3VwQnlfMSIsImdyb3VwQnkiLCJlbGVtZW50U2VsZWN0b3IiLCJHcm91cEJ5T3BlcmF0b3IiLCJNYXBfMSIsIkZhc3RNYXBfMSIsIkdyb3VwQnlTdWJzY3JpYmVyIiwiZ3JvdXBzIiwiYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSIsIl9ncm91cCIsIkZhc3RNYXAiLCJncm91cCIsImdldCIsInNldCIsImdyb3VwZWRPYnNlcnZhYmxlIiwiR3JvdXBlZE9ic2VydmFibGUiLCJfc2VsZWN0RHVyYXRpb24iLCJfc2VsZWN0RWxlbWVudCIsInRyeUdyb3VwTmV4dCIsIkdyb3VwRHVyYXRpb25TdWJzY3JpYmVyIiwiZm9yRWFjaCIsImNsZWFyIiwicmVtb3ZlR3JvdXAiLCJ0cnlFcnJvciIsImdyb3VwU3ViamVjdCIsInJlZkNvdW50U3Vic2NyaXB0aW9uIiwiSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiIsIk1hcFBvbHlmaWxsXzEiLCJNYXBQb2x5ZmlsbCIsInNpemUiLCJfdmFsdWVzIiwiX2tleXMiLCJjYiIsImlnbm9yZUVsZW1lbnRzXzEiLCJpZ25vcmVFbGVtZW50cyIsIklnbm9yZUVsZW1lbnRzT3BlcmF0b3IiLCJJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIiLCJhdWRpdF8xIiwiYXVkaXQiLCJBdWRpdE9wZXJhdG9yIiwiQXVkaXRTdWJzY3JpYmVyIiwidGhyb3R0bGVkIiwiY2xlYXJUaHJvdHRsZSIsImF1ZGl0VGltZV8xIiwiYXVkaXRUaW1lIiwiQXVkaXRUaW1lT3BlcmF0b3IiLCJBdWRpdFRpbWVTdWJzY3JpYmVyIiwibGFzdF8xIiwiTGFzdE9wZXJhdG9yIiwiTGFzdFN1YnNjcmliZXIiLCJsZXRfMSIsImxldCIsImxldFByb3RvIiwibGV0QmluZCIsImV2ZXJ5XzEiLCJldmVyeSIsIkV2ZXJ5T3BlcmF0b3IiLCJFdmVyeVN1YnNjcmliZXIiLCJldmVyeVZhbHVlTWF0Y2giLCJtYXBfMSIsIm1hcCIsIk1hcE9wZXJhdG9yIiwiTWFwU3Vic2NyaWJlciIsIm1hcFRvXzEiLCJtYXBUbyIsIk1hcFRvT3BlcmF0b3IiLCJNYXBUb1N1YnNjcmliZXIiLCJtYXRlcmlhbGl6ZV8xIiwibWF0ZXJpYWxpemUiLCJNYXRlcmlhbGl6ZU9wZXJhdG9yIiwiTWF0ZXJpYWxpemVTdWJzY3JpYmVyIiwiZmxhdE1hcCIsImZsYXRNYXBUbyIsInBhcnRpdGlvbl8xIiwicGFydGl0aW9uIiwibm90XzEiLCJub3QiLCJwcmVkIiwibm90UHJlZCIsInBsdWNrXzEiLCJwbHVjayIsInByb3BlcnRpZXMiLCJwbHVja2VyIiwicHJvcHMiLCJtYXBwZXIiLCJjdXJyZW50UHJvcCIsInB1Ymxpc2hfMSIsInB1Ymxpc2giLCJwdWJsaXNoQmVoYXZpb3JfMSIsInB1Ymxpc2hCZWhhdmlvciIsInRocm93RXJyb3JfMSIsIl92YWx1ZSIsImdldFZhbHVlIiwiaGFzRXJyb3JlZCIsInRocm93RXJyb3IiLCJlcnJvclZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwicHVibGlzaExhc3RfMSIsInB1Ymxpc2hMYXN0IiwicmVkdWNlXzEiLCJyZWR1Y2UiLCJzZWVkIiwiUmVkdWNlT3BlcmF0b3IiLCJSZWR1Y2VTdWJzY3JpYmVyIiwiYWNjIiwiaGFzU2VlZCIsIl90cnlSZWR1Y2UiLCJyZXBlYXRfMSIsInJlcGVhdCIsIlJlcGVhdE9wZXJhdG9yIiwiUmVwZWF0U3Vic2NyaWJlciIsInJldHJ5XzEiLCJyZXRyeSIsIlJldHJ5T3BlcmF0b3IiLCJSZXRyeVN1YnNjcmliZXIiLCJyZXRyeVdoZW5fMSIsInJldHJ5V2hlbiIsIm5vdGlmaWVyIiwiUmV0cnlXaGVuT3BlcmF0b3IiLCJSZXRyeVdoZW5TdWJzY3JpYmVyIiwiZXJyb3JzIiwicmV0cmllcyIsInJldHJpZXNTdWJzY3JpcHRpb24iLCJzYW1wbGVfMSIsInNhbXBsZSIsIlNhbXBsZU9wZXJhdG9yIiwiU2FtcGxlU3Vic2NyaWJlciIsInNhbXBsZVRpbWVfMSIsInNhbXBsZVRpbWUiLCJTYW1wbGVUaW1lT3BlcmF0b3IiLCJkaXNwYXRjaE5vdGlmaWNhdGlvbiIsIlNhbXBsZVRpbWVTdWJzY3JpYmVyIiwic2Nhbl8xIiwic2NhbiIsImFjY3VtdWxhdG9yIiwiU2Nhbk9wZXJhdG9yIiwiU2NhblN1YnNjcmliZXIiLCJhY2N1bXVsYXRvclNldCIsIl9zZWVkIiwic2hhcmVfMSIsInNoYXJlIiwic2hhcmVTdWJqZWN0RmFjdG9yeSIsInNpbmdsZV8xIiwic2luZ2xlIiwiU2luZ2xlT3BlcmF0b3IiLCJTaW5nbGVTdWJzY3JpYmVyIiwic2VlblZhbHVlIiwiYXBwbHlTaW5nbGVWYWx1ZSIsInNpbmdsZVZhbHVlIiwidHJ5TmV4dCIsInNraXBfMSIsInNraXAiLCJTa2lwT3BlcmF0b3IiLCJTa2lwU3Vic2NyaWJlciIsInNraXBVbnRpbF8xIiwic2tpcFVudGlsIiwiU2tpcFVudGlsT3BlcmF0b3IiLCJTa2lwVW50aWxTdWJzY3JpYmVyIiwiaXNJbm5lclN0b3BwZWQiLCJza2lwV2hpbGVfMSIsInNraXBXaGlsZSIsIlNraXBXaGlsZU9wZXJhdG9yIiwiU2tpcFdoaWxlU3Vic2NyaWJlciIsInNraXBwaW5nIiwidHJ5Q2FsbFByZWRpY2F0ZSIsInN0YXJ0V2l0aF8xIiwic3RhcnRXaXRoIiwic3Vic2NyaWJlT25fMSIsInN1YnNjcmliZU9uIiwiU3Vic2NyaWJlT25PYnNlcnZhYmxlXzEiLCJTdWJzY3JpYmVPbk9ic2VydmFibGUiLCJkZWxheVRpbWUiLCJBc2FwU2NoZWR1bGVyXzEiLCJBc2FwU2NoZWR1bGVyIiwiQXNhcEFjdGlvbl8xIiwiQXNhcEFjdGlvbiIsIkltbWVkaWF0ZV8xIiwiSW1tZWRpYXRlIiwic2V0SW1tZWRpYXRlIiwiY2xlYXJJbW1lZGlhdGUiLCJJbW1lZGlhdGVEZWZpbml0aW9uIiwibmV4dEhhbmRsZSIsInRhc2tzQnlIYW5kbGUiLCJjdXJyZW50bHlSdW5uaW5nQVRhc2siLCJjYW5Vc2VQcm9jZXNzTmV4dFRpY2siLCJjcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGUiLCJjYW5Vc2VQb3N0TWVzc2FnZSIsImNyZWF0ZVBvc3RNZXNzYWdlU2V0SW1tZWRpYXRlIiwiY2FuVXNlTWVzc2FnZUNoYW5uZWwiLCJjcmVhdGVNZXNzYWdlQ2hhbm5lbFNldEltbWVkaWF0ZSIsImNhblVzZVJlYWR5U3RhdGVDaGFuZ2UiLCJjcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlIiwiY3JlYXRlU2V0VGltZW91dFNldEltbWVkaWF0ZSIsImNpIiwiaGFuZGxlIiwiaW5zdGFuY2UiLCJpZGVudGlmeSIsInByb2Nlc3MiLCJNZXNzYWdlQ2hhbm5lbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXNfMSIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsInBhcnRpYWxseUFwcGxpZWQiLCJmbiIsIkZ1bmN0aW9uIiwiYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyIsIm5leHRUaWNrIiwicnVuSWZQcmVzZW50IiwibWVzc2FnZVByZWZpeCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImdsb2JhbE1lc3NhZ2VIYW5kbGVyIiwiZXZlbnQiLCJkYXRhIiwic2xpY2UiLCJ0YXNrIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJkb2MiLCJodG1sIiwiZG9jdW1lbnRFbGVtZW50Iiwic2NyaXB0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJpbW1lZGlhdGVJZHMiLCJuZXh0SW1tZWRpYXRlSWQiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJ0aW1lb3V0IiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsIl9vblRpbWVvdXQiLCJzd2l0Y2hfMSIsIl9zd2l0Y2giLCJTd2l0Y2hPcGVyYXRvciIsIlN3aXRjaFN1YnNjcmliZXIiLCJ1bnN1YnNjcmliZUlubmVyIiwic3dpdGNoTWFwXzEiLCJzd2l0Y2hNYXAiLCJTd2l0Y2hNYXBPcGVyYXRvciIsIlN3aXRjaE1hcFN1YnNjcmliZXIiLCJfdHJ5Tm90aWZ5TmV4dCIsInN3aXRjaE1hcFRvXzEiLCJzd2l0Y2hNYXBUbyIsIlN3aXRjaE1hcFRvT3BlcmF0b3IiLCJTd2l0Y2hNYXBUb1N1YnNjcmliZXIiLCJpbm5lciIsInRyeVJlc3VsdFNlbGVjdG9yIiwidGFrZV8xIiwidGFrZSIsIlRha2VPcGVyYXRvciIsIlRha2VTdWJzY3JpYmVyIiwidGFrZUxhc3RfMSIsInRha2VMYXN0IiwiVGFrZUxhc3RPcGVyYXRvciIsIlRha2VMYXN0U3Vic2NyaWJlciIsInJpbmciLCJ0YWtlVW50aWxfMSIsInRha2VVbnRpbCIsIlRha2VVbnRpbE9wZXJhdG9yIiwiVGFrZVVudGlsU3Vic2NyaWJlciIsInRha2VXaGlsZV8xIiwidGFrZVdoaWxlIiwiVGFrZVdoaWxlT3BlcmF0b3IiLCJUYWtlV2hpbGVTdWJzY3JpYmVyIiwibmV4dE9yQ29tcGxldGUiLCJwcmVkaWNhdGVSZXN1bHQiLCJ0aHJvdHRsZV8xIiwidGhyb3R0bGUiLCJUaHJvdHRsZU9wZXJhdG9yIiwiVGhyb3R0bGVTdWJzY3JpYmVyIiwidHJ5RHVyYXRpb25TZWxlY3RvciIsImVtaXRBbmRUaHJvdHRsZSIsInRocm90dGxlVGltZV8xIiwidGhyb3R0bGVUaW1lIiwiVGhyb3R0bGVUaW1lT3BlcmF0b3IiLCJUaHJvdHRsZVRpbWVTdWJzY3JpYmVyIiwidGltZW91dF8xIiwiZHVlIiwiZXJyb3JUb1NlbmQiLCJhYnNvbHV0ZVRpbWVvdXQiLCJ3YWl0Rm9yIiwiVGltZW91dE9wZXJhdG9yIiwiVGltZW91dFN1YnNjcmliZXIiLCJfcHJldmlvdXNJbmRleCIsIl9oYXNDb21wbGV0ZWQiLCJzY2hlZHVsZVRpbWVvdXQiLCJkaXNwYXRjaFRpbWVvdXQiLCJjdXJyZW50SW5kZXgiLCJwcmV2aW91c0luZGV4Iiwibm90aWZ5VGltZW91dCIsInRpbWVvdXRXaXRoXzEiLCJ0aW1lb3V0V2l0aCIsIndpdGhPYnNlcnZhYmxlIiwiVGltZW91dFdpdGhPcGVyYXRvciIsIlRpbWVvdXRXaXRoU3Vic2NyaWJlciIsInRpbWVvdXRTdWJzY3JpcHRpb24iLCJoYW5kbGVUaW1lb3V0IiwidGltZW91dFN0YXRlIiwidG9BcnJheV8xIiwidG9BcnJheSIsIlRvQXJyYXlPcGVyYXRvciIsIlRvQXJyYXlTdWJzY3JpYmVyIiwidG9Qcm9taXNlXzEiLCJ0b1Byb21pc2UiLCJ3aW5kb3dfMSIsIndpbmRvd0JvdW5kYXJpZXMiLCJXaW5kb3dPcGVyYXRvciIsIldpbmRvd1N1YnNjcmliZXIiLCJvcGVuV2luZG93IiwicHJldldpbmRvdyIsIm5ld1dpbmRvdyIsIndpbmRvd0NvdW50XzEiLCJ3aW5kb3dDb3VudCIsIndpbmRvd1NpemUiLCJzdGFydFdpbmRvd0V2ZXJ5IiwiV2luZG93Q291bnRPcGVyYXRvciIsIldpbmRvd0NvdW50U3Vic2NyaWJlciIsIndpbmRvd3MiLCJmaXJzdFdpbmRvdyIsImMiLCJ3aW5kb3dUaW1lXzEiLCJ3aW5kb3dUaW1lU3BhbiIsIndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwiLCJXaW5kb3dUaW1lT3BlcmF0b3IiLCJkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seSIsImRpc3BhdGNoV2luZG93Q3JlYXRpb24iLCJ0aW1lU3BhblN0YXRlIiwiZGlzcGF0Y2hXaW5kb3dDbG9zZSIsImNsb3NlV2luZG93IiwiV2luZG93VGltZVN1YnNjcmliZXIiLCJ3aW5kb3dfMiIsIndpbmRvd18zIiwid2luZG93XzQiLCJ3aW5kb3dUb2dnbGVfMSIsIndpbmRvd1RvZ2dsZSIsIldpbmRvd1RvZ2dsZU9wZXJhdG9yIiwiV2luZG93VG9nZ2xlU3Vic2NyaWJlciIsIm9wZW5TdWJzY3JpcHRpb24iLCJ3aW5kb3dXaGVuXzEiLCJ3aW5kb3dXaGVuIiwidW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uIiwiY2xvc2luZ05vdGlmaWNhdGlvbiIsIndpdGhMYXRlc3RGcm9tXzEiLCJ3aXRoTGF0ZXN0RnJvbSIsIldpdGhMYXRlc3RGcm9tT3BlcmF0b3IiLCJXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIiLCJ6aXBBbGxfMSIsInppcEFsbCIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwiZGVzYyIsInIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsIm5hdl8xIiwicHJvamVjdHNfMSIsInByb2plY3RfMSIsInRhc2tzXzEiLCJ0YXNrXzEiLCJ1c2VyX3Byb2ZpbGVfMSIsImxvZ2luXzEiLCJ1c2VyXzEiLCJfcm91dGVyIiwiX2FwcFNlcnZpY2UiLCJfcmVmZXJlbmNlU2VydmljZSIsIl9zdGFmZlNlcnZpY2UiLCJIRUFERVJfVElUTEUiLCJyZXNpemUiLCJvblJlc2l6ZSIsImlzTW9iaWxlRGV2aWNlIiwiaXNOYXZDb2xsYXBzZWQiLCJpc1NlYXJjaE9wZW4iLCJuZ09uSW5pdCIsImxvZ2dlZFVzZXIiLCJVc2VyIiwiaXNNb2JpbGUiLCJnZXRUcmFuc2xhdGlvbnMiLCJjYXB0aW9ucyIsImxvZyIsIm5hdmlnYXRlIiwidG9nZ2xlTmF2IiwiaGlkZU5hdiIsInByZXZlbnREZWZhdWx0Iiwic2VhcmNoVG9nZ2xlIiwibG9nb3V0IiwibG9jYXRpb24iLCJocmVmIiwiZ29CYWNrIiwiaGlzdG9yeSIsImJhY2siLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5uZXJXaWR0aCIsIkhvc3RMaXN0ZW5lciIsIkhvc3RCaW5kaW5nIiwiQ29tcG9uZW50IiwidGVtcGxhdGUiLCJkaXJlY3RpdmVzIiwiTmF2Q29tcG9uZW50IiwiUm91dGVzIiwicGF0aCIsImNvbXBvbmVudCIsIlRhc2tzQ29tcG9uZW50IiwiVGFza0NvbXBvbmVudCIsIlByb2plY3RDb21wb25lbnQiLCJQcm9qZWN0c0NvbXBvbmVudCIsIlVzZXJQcm9maWxlQ29tcG9uZW50IiwiTG9naW5Db21wb25lbnQiLCJSb3V0ZXIiLCJfaHR0cCIsImhlYWRlciIsImhlYWRlcnMiLCJIZWFkZXJzIiwiQWNjZXB0IiwidXJsIiwicmVzcG9uc2UiLCJqc29uIiwiZ2V0TmF2IiwiZ2V0VXNlcnMiLCJvYmplY3RzIiwibGlzdCIsInVwZGF0ZVVzZXJQcm9maWxlIiwidXNlciIsIkluamVjdGFibGUiLCJIdHRwIiwiaHR0cCIsImdldFRhZ3MiLCJnZXRUYXNrVHlwZXMiLCJnZXRPcmdhbml6YXRpb25zIiwiX05vdHkiLCJ0eXBlIiwidmlzaWJsZSIsIm5vdGlmeUxpc3QiLCJwcm9qZWN0U2VydmljZSIsImdldFByb2plY3RzIiwicHJvamVjdHMiLCJlcnJvclJlc3BvbnNlIiwiaGFuZGxlWGhyRXJyb3IiLCJjb21wb3NlUmVjb3JkIiwiZGVsZXRlUHJvamVjdCIsInNlbGVjdGVkUHJvamVjdHMiLCJzdGF0dXMiLCJwaXBlcyIsIkRhdGVQaXBlIiwib2JqX3V0aWxzXzEiLCJWSUVXX1VSTCIsIkZPUk1fVVJMIiwiSEVBREVSIiwiQ29udGVudC1UeXBlIiwiZ2V0UHJvamVjdEJ5SWQiLCJwcm9qZWN0SWQiLCJzYXZlUHJvamVjdCIsInBvc3QiLCJzZXJpYWxpemVQcm9qZWN0Iiwic2VyaWFsaXplT2JqIiwiY3VzdG9tZXIiLCJtYW5hZ2VyIiwicHJvZ3JhbW1lciIsInRlc3RlciIsImpvaW4iLCJjb21tZW50IiwiZmluaXNoX2RhdGUiLCJmaW5pc2hEYXRlIiwiYXR0YWNobWVudHMiLCJpdCIsInByb3BlcnR5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiX3JvdXRlU2VnbWVudCIsIl9mb3JtQnVpbGRlciIsIl9wcm9qZWN0U2VydmljZSIsInN0YXR1c09wdGlvbnMiLCJQcm9qZWN0U3RhdHVzVHlwZSIsImZvcm0iLCJWYWxpZGF0b3JzIiwicmVxdWlyZWQiLCJnZXRQYXJhbSIsIlByb2plY3QiLCJvcmdzIiwiY3VzdG9tZXJzIiwidXNlcnMiLCJGT1JNX0RJUkVDVElWRVMiLCJwcm92aWRlcnMiLCJGb3JtQnVpbGRlciIsIlJvdXRlU2VnbWVudCIsIl90YXNrU2VydmljZSIsImdldFRhc2tzIiwidGFza3MiLCJkZWxldGVUYXNrIiwiYXQiLCJnZXRUYXNrQnlJZCIsInRhc2tJZCIsInNhdmVUYXNrIiwic2VyaWFsaXplVGFzayIsInByaW9yaXR5IiwiYm9keSIsImFzc2lnbmVlIiwic3RhcnRfZGF0ZSIsInN0YXJ0RGF0ZSIsImR1ZV9kYXRlIiwiZHVlRGF0ZSIsInRhZ3MiLCJUYXNrIiwicmVzcCIsIlRhc2tQcmlvcml0eVR5cGUiLCJUYXNrU3RhdHVzVHlwZSIsInRhYnNfMSIsInRhYl8xIiwibG9naW4iLCJwd2QiLCJwd2RfY29uZmlybSIsImVtYWlsIiwiVGFicyIsIlRhYiIsIm5nQWZ0ZXJDb250ZW50SW5pdCIsImFjdGl2ZVRhYnMiLCJ0YWJzIiwidGFiIiwic2VsZWN0VGFiIiwiQ29udGVudENoaWxkcmVuIiwiUXVlcnlMaXN0IiwiSW5wdXQiLCJTdHJpbmciLCJzdHlsZXMiLCJ1c2VyX25hbWUiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVIsU0FBU0MsT0FBUUMsUUFBU0MscUJBRS9CLFlDSkQsSUFBQUMsNEJBQUFELG9CQUF3QixHQUN4QkUsT0FBQUYsb0JBQWlFLEdBQ2pFRyxPQUFBSCxvQkFBMEUsS0FDMUVJLFNBQUFKLG9CQUFrRCxLQUNsREssU0FBQUwsb0JBQXFFLElBQ3JFQSxxQkFBTyxJQUVQLElBQUFNLE9BQUFOLG9CQUFrQixLQUNsQk8sWUFBQVAsb0JBQWdDLEtBQ2hDUSxjQUFBUixvQkFBeUIsS0FDekJTLGVBQUFULG9CQUEwQixLQUMxQlUsa0JBQUFWLG9CQUE2QixLQUM3Qlcsb0JBQUFYLG9CQUErQixLQUMvQlksZ0JBQUFaLG9CQUEyQixJQUl2QkUsUUFBQVcsaUJBR0paLDJCQUFBYSxVQUFVUixNQUFBUyxLQUNOWixPQUFBYSxlQUNBWixTQUFBYSxrQkFDQWIsU0FBQWMsaUJBQ0FoQixPQUFBaUIsUUFBUWpCLE9BQUFrQixxQkFBdUJDLFNBQVVqQixTQUFBYSxrQkFBbUJLLE9BQU8sSUFDbkVwQixPQUFBaUIsUUFBUWQsU0FBQWtCLGtCQUFvQkMsU0FBVW5CLFNBQUFvQix1QkFDdENwQixTQUFBcUIsZUFDQW5CLFlBQUFvQixrQkFDQW5CLGNBQUFvQixXQUNBbkIsZUFBQW9CLFlBQ0FuQixrQkFBQW9CLGVBQ0FuQixvQkFBQW9CLGlCQUNBbkIsZ0JBQUFvQixlQVpKL0IsU0FhUyxTQUFBZ0MsS0FBTyxNQUFBQyxTQUFRQyxNQUFNRixRREt2QixDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQyxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQyxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBQ0EsQ0FDQSxDQUNBLENBRUgsU0FBU25DLE9BQVFDLFFBQVNDLHFCRTFXaEMsWUFLQSxJQUFBb0MsV0FBQXBDLG9CQUFBLEdBQ0FELFNBQUFzQyxRQUFBRCxVQUFBQyxPQUVBLElBQUFDLGNBQUF0QyxvQkFBQSxHQUNBRCxTQUFBd0MsV0FBQUQsYUFBQUMsV0FHQXZDLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBRUFBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtBQ0FBLG9CQUFBLEtB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QixVQUNwSCxLQUFLLEdBQUl2MEIsR0FBSXMwQixXQUFXLzRCLE9BQVMsRUFBR3lFLEdBQUssRUFBR0EsS0FBU3BELEVBQUkwM0IsV0FBV3QwQixNQUFJdzBCLEdBQVMsRUFBSmhDLEVBQVE1MUIsRUFBRTQzQixHQUFLaEMsRUFBSSxFQUFJNTFCLEVBQUV3TixPQUFRekgsSUFBSzZ4QixHQUFLNTNCLEVBQUV3TixPQUFRekgsT0FBUzZ4QixFQUNoSixPQUFPaEMsR0FBSSxHQUFLZ0MsR0FBS3IzQixPQUFPa21CLGVBQWVqWixPQUFRekgsSUFBSzZ4QixHQUFJQSxHQUU1REksV0FBY2o2QixNQUFRQSxLQUFLaTZCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsTUFBdUIsZ0JBQVpKLFVBQW9ELGtCQUFyQkEsU0FBUUssU0FBZ0NMLFFBQVFLLFNBQVNGLEVBQUdDLEdBQXRHLFE2UmoxY0x4L0IsT0FBQUYsb0JBQXdCLEdBT3hCa2pDLGVBQUEsV0FDSSxRQUFBQSxrQkFDSW5NLE9BQU80SyxTQUFTQyxLQUFPLFNBRS9CLE1BVEFzQixnQkFBQWpFLFlBQUMvK0IsT0FBQW9pQyxXQUNHbDhCLFNBQVUsVUFDVm04QixTQUFVLFU3UnkxY0wvQyxXQUFXLHlCQUNaMEQsa0I2UnYxY0tuakMsU0FBQW1qQyxlQUFjQSxnQjdSKzFjckIsU0FBU3BqQyxPQUFRQyxTOFJ0MmN2QkQsT0FBQUMsUUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzBdLFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBwbGF0Zm9ybV9icm93c2VyX2R5bmFtaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIGh0dHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgxKTtcclxuXHR2YXIgcm91dGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMik7XHJcblx0dmFyIGNvbW1vbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpO1xyXG5cdF9fd2VicGFja19yZXF1aXJlX18oMzI0KTtcclxuXHR2YXIgYXBwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4Myk7XHJcblx0dmFyIG5iX25vdGlmeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODcpO1xyXG5cdHZhciBhcHBfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODQpO1xyXG5cdHZhciB0YXNrX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTk4KTtcclxuXHR2YXIgcHJvamVjdF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5MSk7XHJcblx0dmFyIHJlZmVyZW5jZV9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4NSk7XHJcblx0dmFyIHN0YWZmX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg2KTtcclxuXHRpZiAodHJ1ZSkge1xyXG5cdCAgICBjb3JlXzEuZW5hYmxlUHJvZE1vZGUoKTtcclxuXHR9XHJcblx0cGxhdGZvcm1fYnJvd3Nlcl9keW5hbWljXzEuYm9vdHN0cmFwKGFwcF8xLkFwcCwgW1xyXG5cdCAgICBodHRwXzEuSFRUUF9QUk9WSURFUlMsXHJcblx0ICAgIHJvdXRlcl8xLlJPVVRFUl9ESVJFQ1RJVkVTLFxyXG5cdCAgICByb3V0ZXJfMS5ST1VURVJfUFJPVklERVJTLFxyXG5cdCAgICBjb3JlXzEucHJvdmlkZShjb3JlXzEuUExBVEZPUk1fRElSRUNUSVZFUywgeyB1c2VWYWx1ZTogcm91dGVyXzEuUk9VVEVSX0RJUkVDVElWRVMsIG11bHRpOiB0cnVlIH0pLFxyXG5cdCAgICBjb3JlXzEucHJvdmlkZShjb21tb25fMS5Mb2NhdGlvblN0cmF0ZWd5LCB7IHVzZUNsYXNzOiBjb21tb25fMS5IYXNoTG9jYXRpb25TdHJhdGVneSB9KSxcclxuXHQgICAgY29tbW9uXzEuRk9STV9QUk9WSURFUlMsXHJcblx0ICAgIG5iX25vdGlmeV8xLk5CTm90aWZ5Q29tcG9uZW50LFxyXG5cdCAgICBhcHBfc2VydmljZV8xLkFwcFNlcnZpY2UsXHJcblx0ICAgIHRhc2tfc2VydmljZV8xLlRhc2tTZXJ2aWNlLFxyXG5cdCAgICBwcm9qZWN0X3NlcnZpY2VfMS5Qcm9qZWN0U2VydmljZSxcclxuXHQgICAgcmVmZXJlbmNlX3NlcnZpY2VfMS5SZWZlcmVuY2VTZXJ2aWNlLFxyXG5cdCAgICBzdGFmZl9zZXJ2aWNlXzEuU3RhZmZTZXJ2aWNlXHJcblx0XSkuY2F0Y2goZnVuY3Rpb24gKGVycikgeyByZXR1cm4gY29uc29sZS5lcnJvcihlcnIpOyB9KTtcclxuXG5cbi8qKiovIH0sXG4vKiAxICovLFxuLyogMiAqLyxcbi8qIDMgKi8sXG4vKiA0ICovLFxuLyogNSAqLyxcbi8qIDYgKi8sXG4vKiA3ICovLFxuLyogOCAqLyxcbi8qIDkgKi8sXG4vKiAxMCAqLyxcbi8qIDExICovLFxuLyogMTIgKi8sXG4vKiAxMyAqLyxcbi8qIDE0ICovLFxuLyogMTUgKi8sXG4vKiAxNiAqLyxcbi8qIDE3ICovLFxuLyogMTggKi8sXG4vKiAxOSAqLyxcbi8qIDIwICovLFxuLyogMjEgKi8sXG4vKiAyMiAqLyxcbi8qIDIzICovLFxuLyogMjQgKi8sXG4vKiAyNSAqLyxcbi8qIDI2ICovLFxuLyogMjcgKi8sXG4vKiAyOCAqLyxcbi8qIDI5ICovLFxuLyogMzAgKi8sXG4vKiAzMSAqLyxcbi8qIDMyICovLFxuLyogMzMgKi8sXG4vKiAzNCAqLyxcbi8qIDM1ICovLFxuLyogMzYgKi8sXG4vKiAzNyAqLyxcbi8qIDM4ICovLFxuLyogMzkgKi8sXG4vKiA0MCAqLyxcbi8qIDQxICovLFxuLyogNDIgKi8sXG4vKiA0MyAqLyxcbi8qIDQ0ICovLFxuLyogNDUgKi8sXG4vKiA0NiAqLyxcbi8qIDQ3ICovLFxuLyogNDggKi8sXG4vKiA0OSAqLyxcbi8qIDUwICovLFxuLyogNTEgKi8sXG4vKiA1MiAqLyxcbi8qIDUzICovLFxuLyogNTQgKi8sXG4vKiA1NSAqLyxcbi8qIDU2ICovLFxuLyogNTcgKi8sXG4vKiA1OCAqLyxcbi8qIDU5ICovLFxuLyogNjAgKi8sXG4vKiA2MSAqLyxcbi8qIDYyICovLFxuLyogNjMgKi8sXG4vKiA2NCAqLyxcbi8qIDY1ICovLFxuLyogNjYgKi8sXG4vKiA2NyAqLyxcbi8qIDY4ICovLFxuLyogNjkgKi8sXG4vKiA3MCAqLyxcbi8qIDcxICovLFxuLyogNzIgKi8sXG4vKiA3MyAqLyxcbi8qIDc0ICovLFxuLyogNzUgKi8sXG4vKiA3NiAqLyxcbi8qIDc3ICovLFxuLyogNzggKi8sXG4vKiA3OSAqLyxcbi8qIDgwICovLFxuLyogODEgKi8sXG4vKiA4MiAqLyxcbi8qIDgzICovLFxuLyogODQgKi8sXG4vKiA4NSAqLyxcbi8qIDg2ICovLFxuLyogODcgKi8sXG4vKiA4OCAqLyxcbi8qIDg5ICovLFxuLyogOTAgKi8sXG4vKiA5MSAqLyxcbi8qIDkyICovLFxuLyogOTMgKi8sXG4vKiA5NCAqLyxcbi8qIDk1ICovLFxuLyogOTYgKi8sXG4vKiA5NyAqLyxcbi8qIDk4ICovLFxuLyogOTkgKi8sXG4vKiAxMDAgKi8sXG4vKiAxMDEgKi8sXG4vKiAxMDIgKi8sXG4vKiAxMDMgKi8sXG4vKiAxMDQgKi8sXG4vKiAxMDUgKi8sXG4vKiAxMDYgKi8sXG4vKiAxMDcgKi8sXG4vKiAxMDggKi8sXG4vKiAxMDkgKi8sXG4vKiAxMTAgKi8sXG4vKiAxMTEgKi8sXG4vKiAxMTIgKi8sXG4vKiAxMTMgKi8sXG4vKiAxMTQgKi8sXG4vKiAxMTUgKi8sXG4vKiAxMTYgKi8sXG4vKiAxMTcgKi8sXG4vKiAxMTggKi8sXG4vKiAxMTkgKi8sXG4vKiAxMjAgKi8sXG4vKiAxMjEgKi8sXG4vKiAxMjIgKi8sXG4vKiAxMjMgKi8sXG4vKiAxMjQgKi8sXG4vKiAxMjUgKi8sXG4vKiAxMjYgKi8sXG4vKiAxMjcgKi8sXG4vKiAxMjggKi8sXG4vKiAxMjkgKi8sXG4vKiAxMzAgKi8sXG4vKiAxMzEgKi8sXG4vKiAxMzIgKi8sXG4vKiAxMzMgKi8sXG4vKiAxMzQgKi8sXG4vKiAxMzUgKi8sXG4vKiAxMzYgKi8sXG4vKiAxMzcgKi8sXG4vKiAxMzggKi8sXG4vKiAxMzkgKi8sXG4vKiAxNDAgKi8sXG4vKiAxNDEgKi8sXG4vKiAxNDIgKi8sXG4vKiAxNDMgKi8sXG4vKiAxNDQgKi8sXG4vKiAxNDUgKi8sXG4vKiAxNDYgKi8sXG4vKiAxNDcgKi8sXG4vKiAxNDggKi8sXG4vKiAxNDkgKi8sXG4vKiAxNTAgKi8sXG4vKiAxNTEgKi8sXG4vKiAxNTIgKi8sXG4vKiAxNTMgKi8sXG4vKiAxNTQgKi8sXG4vKiAxNTUgKi8sXG4vKiAxNTYgKi8sXG4vKiAxNTcgKi8sXG4vKiAxNTggKi8sXG4vKiAxNTkgKi8sXG4vKiAxNjAgKi8sXG4vKiAxNjEgKi8sXG4vKiAxNjIgKi8sXG4vKiAxNjMgKi8sXG4vKiAxNjQgKi8sXG4vKiAxNjUgKi8sXG4vKiAxNjYgKi8sXG4vKiAxNjcgKi8sXG4vKiAxNjggKi8sXG4vKiAxNjkgKi8sXG4vKiAxNzAgKi8sXG4vKiAxNzEgKi8sXG4vKiAxNzIgKi8sXG4vKiAxNzMgKi8sXG4vKiAxNzQgKi8sXG4vKiAxNzUgKi8sXG4vKiAxNzYgKi8sXG4vKiAxNzcgKi8sXG4vKiAxNzggKi8sXG4vKiAxNzkgKi8sXG4vKiAxODAgKi8sXG4vKiAxODEgKi8sXG4vKiAxODIgKi8sXG4vKiAxODMgKi8sXG4vKiAxODQgKi8sXG4vKiAxODUgKi8sXG4vKiAxODYgKi8sXG4vKiAxODcgKi8sXG4vKiAxODggKi8sXG4vKiAxODkgKi8sXG4vKiAxOTAgKi8sXG4vKiAxOTEgKi8sXG4vKiAxOTIgKi8sXG4vKiAxOTMgKi8sXG4vKiAxOTQgKi8sXG4vKiAxOTUgKi8sXG4vKiAxOTYgKi8sXG4vKiAxOTcgKi8sXG4vKiAxOTggKi8sXG4vKiAxOTkgKi8sXG4vKiAyMDAgKi8sXG4vKiAyMDEgKi8sXG4vKiAyMDIgKi8sXG4vKiAyMDMgKi8sXG4vKiAyMDQgKi8sXG4vKiAyMDUgKi8sXG4vKiAyMDYgKi8sXG4vKiAyMDcgKi8sXG4vKiAyMDggKi8sXG4vKiAyMDkgKi8sXG4vKiAyMTAgKi8sXG4vKiAyMTEgKi8sXG4vKiAyMTIgKi8sXG4vKiAyMTMgKi8sXG4vKiAyMTQgKi8sXG4vKiAyMTUgKi8sXG4vKiAyMTYgKi8sXG4vKiAyMTcgKi8sXG4vKiAyMTggKi8sXG4vKiAyMTkgKi8sXG4vKiAyMjAgKi8sXG4vKiAyMjEgKi8sXG4vKiAyMjIgKi8sXG4vKiAyMjMgKi8sXG4vKiAyMjQgKi8sXG4vKiAyMjUgKi8sXG4vKiAyMjYgKi8sXG4vKiAyMjcgKi8sXG4vKiAyMjggKi8sXG4vKiAyMjkgKi8sXG4vKiAyMzAgKi8sXG4vKiAyMzEgKi8sXG4vKiAyMzIgKi8sXG4vKiAyMzMgKi8sXG4vKiAyMzQgKi8sXG4vKiAyMzUgKi8sXG4vKiAyMzYgKi8sXG4vKiAyMzcgKi8sXG4vKiAyMzggKi8sXG4vKiAyMzkgKi8sXG4vKiAyNDAgKi8sXG4vKiAyNDEgKi8sXG4vKiAyNDIgKi8sXG4vKiAyNDMgKi8sXG4vKiAyNDQgKi8sXG4vKiAyNDUgKi8sXG4vKiAyNDYgKi8sXG4vKiAyNDcgKi8sXG4vKiAyNDggKi8sXG4vKiAyNDkgKi8sXG4vKiAyNTAgKi8sXG4vKiAyNTEgKi8sXG4vKiAyNTIgKi8sXG4vKiAyNTMgKi8sXG4vKiAyNTQgKi8sXG4vKiAyNTUgKi8sXG4vKiAyNTYgKi8sXG4vKiAyNTcgKi8sXG4vKiAyNTggKi8sXG4vKiAyNTkgKi8sXG4vKiAyNjAgKi8sXG4vKiAyNjEgKi8sXG4vKiAyNjIgKi8sXG4vKiAyNjMgKi8sXG4vKiAyNjQgKi8sXG4vKiAyNjUgKi8sXG4vKiAyNjYgKi8sXG4vKiAyNjcgKi8sXG4vKiAyNjggKi8sXG4vKiAyNjkgKi8sXG4vKiAyNzAgKi8sXG4vKiAyNzEgKi8sXG4vKiAyNzIgKi8sXG4vKiAyNzMgKi8sXG4vKiAyNzQgKi8sXG4vKiAyNzUgKi8sXG4vKiAyNzYgKi8sXG4vKiAyNzcgKi8sXG4vKiAyNzggKi8sXG4vKiAyNzkgKi8sXG4vKiAyODAgKi8sXG4vKiAyODEgKi8sXG4vKiAyODIgKi8sXG4vKiAyODMgKi8sXG4vKiAyODQgKi8sXG4vKiAyODUgKi8sXG4vKiAyODYgKi8sXG4vKiAyODcgKi8sXG4vKiAyODggKi8sXG4vKiAyODkgKi8sXG4vKiAyOTAgKi8sXG4vKiAyOTEgKi8sXG4vKiAyOTIgKi8sXG4vKiAyOTMgKi8sXG4vKiAyOTQgKi8sXG4vKiAyOTUgKi8sXG4vKiAyOTYgKi8sXG4vKiAyOTcgKi8sXG4vKiAyOTggKi8sXG4vKiAyOTkgKi8sXG4vKiAzMDAgKi8sXG4vKiAzMDEgKi8sXG4vKiAzMDIgKi8sXG4vKiAzMDMgKi8sXG4vKiAzMDQgKi8sXG4vKiAzMDUgKi8sXG4vKiAzMDYgKi8sXG4vKiAzMDcgKi8sXG4vKiAzMDggKi8sXG4vKiAzMDkgKi8sXG4vKiAzMTAgKi8sXG4vKiAzMTEgKi8sXG4vKiAzMTIgKi8sXG4vKiAzMTMgKi8sXG4vKiAzMTQgKi8sXG4vKiAzMTUgKi8sXG4vKiAzMTYgKi8sXG4vKiAzMTcgKi8sXG4vKiAzMTggKi8sXG4vKiAzMTkgKi8sXG4vKiAzMjAgKi8sXG4vKiAzMjEgKi8sXG4vKiAzMjIgKi8sXG4vKiAzMjMgKi8sXG4vKiAzMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cblx0Ly8gU3ViamVjdCBpbXBvcnRlZCBiZWZvcmUgT2JzZXJ2YWJsZSB0byBieXBhc3MgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZSBzaW5jZVxuXHQvLyBTdWJqZWN0IGV4dGVuZHMgT2JzZXJ2YWJsZSBhbmQgT2JzZXJ2YWJsZSByZWZlcmVuY2VzIFN1YmplY3QgaW4gaXQnc1xuXHQvLyBkZWZpbml0aW9uXG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0ZXhwb3J0cy5TdWJqZWN0ID0gU3ViamVjdF8xLlN1YmplY3Q7XG5cdC8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0ZXhwb3J0cy5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGU7XG5cdC8vIHN0YXRpY3Ncblx0LyogdHNsaW50OmRpc2FibGU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXG5cdF9fd2VicGFja19yZXF1aXJlX18oMzI1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMjkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzQzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNDcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM1MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNjgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM3MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzcyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM4NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzg2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzOTApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzk1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzOTgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMik7XG5cdC8vb3BlcmF0b3JzXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MDcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQwOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDExKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MTMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQxNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDIyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MjQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDI3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MjgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQzMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDMzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MzYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQzOCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDQwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NDIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDQ2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NDgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDUyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NTQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDU4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NjApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDY4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NzApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDc0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NzYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDgwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0ODIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDg2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0ODcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDg5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OTApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5MSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDkyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDk5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MDIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUwMyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MDYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUwOCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTEwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MTIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUxNCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTE2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MTgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUyMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTIyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MjQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTI4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MzApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUzMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NDMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU0NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQ3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NTApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU1Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTU0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NTYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU1OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTYwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NjIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU2NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTY2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NjcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU2OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTcxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NzMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU3NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTc3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NzkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU4MCk7XG5cdC8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuXHR2YXIgT3BlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgyKTtcblx0ZXhwb3J0cy5PcGVyYXRvciA9IE9wZXJhdG9yXzEuT3BlcmF0b3I7XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHRleHBvcnRzLlN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbjtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHRleHBvcnRzLlN1YnNjcmliZXIgPSBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcjtcblx0dmFyIEFzeW5jU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMjgpO1xuXHRleHBvcnRzLkFzeW5jU3ViamVjdCA9IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdDtcblx0dmFyIFJlcGxheVN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDE4KTtcblx0ZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdF8xLlJlcGxheVN1YmplY3Q7XG5cdHZhciBCZWhhdmlvclN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTAxKTtcblx0ZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3Q7XG5cdHZhciBDb25uZWN0YWJsZU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIxKTtcblx0ZXhwb3J0cy5Db25uZWN0YWJsZU9ic2VydmFibGUgPSBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGU7XG5cdHZhciBOb3RpZmljYXRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYxKTtcblx0ZXhwb3J0cy5Ob3RpZmljYXRpb24gPSBOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb247XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdGV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yO1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ5KTtcblx0ZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG5cdHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cdGV4cG9ydHMuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO1xuXHR2YXIgVW5zdWJzY3JpcHRpb25FcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdGV4cG9ydHMuVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yO1xuXHR2YXIgYXNhcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzUpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIHF1ZXVlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxOSk7XG5cdHZhciByeFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHR2YXIgaXRlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQxKTtcblx0dmFyIG9ic2VydmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0LyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cblx0LyoqXG5cdCAqIEB0eXBlZGVmIHtPYmplY3R9IFJ4LlNjaGVkdWxlclxuXHQgKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gcXVldWUgU2NoZWR1bGVzIG9uIGEgcXVldWUgaW4gdGhlIGN1cnJlbnQgZXZlbnQgZnJhbWVcblx0ICogKHRyYW1wb2xpbmUgc2NoZWR1bGVyKS4gVXNlIHRoaXMgZm9yIGl0ZXJhdGlvbiBvcGVyYXRpb25zLlxuXHQgKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXNhcCBTY2hlZHVsZXMgb24gdGhlIG1pY3JvIHRhc2sgcXVldWUsIHdoaWNoIHVzZXMgdGhlXG5cdCAqIGZhc3Rlc3QgdHJhbnNwb3J0IG1lY2hhbmlzbSBhdmFpbGFibGUsIGVpdGhlciBOb2RlLmpzJyBgcHJvY2Vzcy5uZXh0VGljaygpYFxuXHQgKiBvciBXZWIgV29ya2VyIE1lc3NhZ2VDaGFubmVsIG9yIHNldFRpbWVvdXQgb3Igb3RoZXJzLiBVc2UgdGhpcyBmb3Jcblx0ICogYXN5bmNocm9ub3VzIGNvbnZlcnNpb25zLlxuXHQgKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXN5bmMgU2NoZWR1bGVzIHdvcmsgd2l0aCBgc2V0SW50ZXJ2YWxgLiBVc2UgdGhpcyBmb3Jcblx0ICogdGltZS1iYXNlZCBvcGVyYXRpb25zLlxuXHQgKi9cblx0dmFyIFNjaGVkdWxlciA9IHtcblx0ICAgIGFzYXA6IGFzYXBfMS5hc2FwLFxuXHQgICAgYXN5bmM6IGFzeW5jXzEuYXN5bmMsXG5cdCAgICBxdWV1ZTogcXVldWVfMS5xdWV1ZVxuXHR9O1xuXHRleHBvcnRzLlNjaGVkdWxlciA9IFNjaGVkdWxlcjtcblx0LyoqXG5cdCAqIEB0eXBlZGVmIHtPYmplY3R9IFJ4LlN5bWJvbFxuXHQgKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IHJ4U3Vic2NyaWJlciBBIHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvXG5cdCAqIHJldHJpZXZlIGFuIFwiUnggc2FmZVwiIE9ic2VydmVyIGZyb20gYW4gb2JqZWN0LiBcIlJ4IHNhZmV0eVwiIGNhbiBiZSBkZWZpbmVkIGFzXG5cdCAqIGFuIG9iamVjdCB0aGF0IGhhcyBhbGwgb2YgdGhlIHRyYWl0cyBvZiBhbiBSeCBTdWJzY3JpYmVyLCBpbmNsdWRpbmcgdGhlXG5cdCAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc3Vic2NyaXB0aW9uIGNoYWluIGFuZFxuXHQgKiBndWFyYW50ZWVzIGludm9sdmluZyBldmVudCB0cmlnZ2VyaW5nIChjYW4ndCBcIm5leHRcIiBhZnRlciB1bnN1YnNjcmlwdGlvbixcblx0ICogZXRjKS5cblx0ICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSBvYnNlcnZhYmxlIEEgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWUgdG9cblx0ICogcmV0cmlldmUgYW4gT2JzZXJ2YWJsZSBhcyBkZWZpbmVkIGJ5IHRoZSBbRUNNQVNjcmlwdCBcIk9ic2VydmFibGVcIiBzcGVjXShodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlKS5cblx0ICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSBpdGVyYXRvciBUaGUgRVM2IHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lXG5cdCAqIHRvIHJldHJpZXZlIGFuIGl0ZXJhdG9yIGZyb20gYW4gb2JqZWN0LlxuXHQgKi9cblx0dmFyIFN5bWJvbCA9IHtcblx0ICAgIHJ4U3Vic2NyaWJlcjogcnhTdWJzY3JpYmVyXzEuJCRyeFN1YnNjcmliZXIsXG5cdCAgICBvYnNlcnZhYmxlOiBvYnNlcnZhYmxlLFxuXHQgICAgaXRlcmF0b3I6IGl0ZXJhdG9yXzEuJCRpdGVyYXRvclxuXHR9O1xuXHRleHBvcnRzLlN5bWJvbCA9IFN5bWJvbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9UnguanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBiaW5kQ2FsbGJhY2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzI2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZENhbGxiYWNrID0gYmluZENhbGxiYWNrXzEuYmluZENhbGxiYWNrO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kQ2FsbGJhY2suanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQm91bmRDYWxsYmFja09ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzI3KTtcblx0ZXhwb3J0cy5iaW5kQ2FsbGJhY2sgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZENhbGxiYWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgQXN5bmNTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOCk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGNhbGxiYWNrRnVuYywgc2VsZWN0b3IsIGFyZ3MsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jO1xuXHQgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0ICAgIC8qKlxuXHQgICAgICogQ29udmVydHMgYSBjYWxsYmFjayBBUEkgdG8gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZS5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+R2l2ZSBpdCBhIGZ1bmN0aW9uIGBmYCBvZiB0eXBlIGBmKHgsIGNhbGxiYWNrKWAgYW5kXG5cdCAgICAgKiBpdCB3aWxsIHJldHVybiBhIGZ1bmN0aW9uIGBnYCB0aGF0IHdoZW4gY2FsbGVkIGFzIGBnKHgpYCB3aWxsIG91dHB1dCBhblxuXHQgICAgICogT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogYGJpbmRDYWxsYmFja2AgaXMgbm90IGFuIG9wZXJhdG9yIGJlY2F1c2UgaXRzIGlucHV0IGFuZCBvdXRwdXQgYXJlIG5vdFxuXHQgICAgICogT2JzZXJ2YWJsZXMuIFRoZSBpbnB1dCBpcyBhIGZ1bmN0aW9uIGBmdW5jYCB3aXRoIHNvbWUgcGFyYW1ldGVycywgYnV0IHRoZVxuXHQgICAgICogbGFzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYGZ1bmNgIGNhbGxzIHdoZW4gaXQgaXNcblx0ICAgICAqIGRvbmUuIFRoZSBvdXRwdXQgb2YgYGJpbmRDYWxsYmFja2AgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBzYW1lXG5cdCAgICAgKiBwYXJhbWV0ZXJzIGFzIGBmdW5jYCwgZXhjZXB0IHRoZSBsYXN0IG9uZSAodGhlIGNhbGxiYWNrKS4gV2hlbiB0aGUgb3V0cHV0XG5cdCAgICAgKiBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhcmd1bWVudHMsIGl0IHdpbGwgcmV0dXJuIGFuIE9ic2VydmFibGUgd2hlcmUgdGhlXG5cdCAgICAgKiByZXN1bHRzIHdpbGwgYmUgZGVsaXZlcmVkIHRvLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbnZlcnQgalF1ZXJ5J3MgZ2V0SlNPTiB0byBhbiBPYnNlcnZhYmxlIEFQSTwvY2FwdGlvbj5cblx0ICAgICAqIC8vIFN1cHBvc2Ugd2UgaGF2ZSBqUXVlcnkuZ2V0SlNPTignL215L3VybCcsIGNhbGxiYWNrKVxuXHQgICAgICogdmFyIGdldEpTT05Bc09ic2VydmFibGUgPSBSeC5PYnNlcnZhYmxlLmJpbmRDYWxsYmFjayhqUXVlcnkuZ2V0SlNPTik7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gZ2V0SlNPTkFzT2JzZXJ2YWJsZSgnL215L3VybCcpO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGJpbmROb2RlQ2FsbGJhY2t9XG5cdCAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbVByb21pc2V9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuYyBGdW5jdGlvbiB3aXRoIGEgY2FsbGJhY2sgYXMgdGhlIGxhc3QgcGFyYW1ldGVyLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc2VsZWN0b3IgQSBmdW5jdGlvbiB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlXG5cdCAgICAgKiBjYWxsYmFjayBhbmQgbWFwcyB0aG9zZSBhIHZhbHVlIHRvIGVtaXQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG5cdCAgICAgKiBjYWxsYmFja3MuXG5cdCAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5wYXJhbXM6ICopOiBPYnNlcnZhYmxlfSBBIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlXG5cdCAgICAgKiBPYnNlcnZhYmxlIHRoYXQgZGVsaXZlcnMgdGhlIHNhbWUgdmFsdWVzIHRoZSBjYWxsYmFjayB3b3VsZCBkZWxpdmVyLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBiaW5kQ2FsbGJhY2tcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmdW5jLCBzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGZ1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgIH07XG5cdCAgICB9O1xuXHQgICAgQm91bmRDYWxsYmFja09ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBjYWxsYmFja0Z1bmMgPSB0aGlzLmNhbGxiYWNrRnVuYztcblx0ICAgICAgICB2YXIgYXJncyA9IHRoaXMuYXJncztcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgaWYgKCFzdWJqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuXHQgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuXHQgICAgICAgICAgICAgICAgaGFuZGxlci5zb3VyY2UgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIDAsIHsgc291cmNlOiB0aGlzLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQm91bmRDYWxsYmFja09ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSA9IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHRmdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgY2FsbGJhY2tGdW5jID0gc291cmNlLmNhbGxiYWNrRnVuYywgYXJncyA9IHNvdXJjZS5hcmdzLCBzY2hlZHVsZXIgPSBzb3VyY2Uuc2NoZWR1bGVyO1xuXHQgICAgdmFyIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgIGlmICghc3ViamVjdCkge1xuXHQgICAgICAgIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcblx0ICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuXHQgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8yID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogcmVzdWx0XzIsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncztcblx0ICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gdXNlIG5hbWVkIGZ1bmN0aW9uIHRvIHBhc3MgdmFsdWVzIGluIHdpdGhvdXQgY2xvc3VyZVxuXHQgICAgICAgIGhhbmRsZXIuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuXHQgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHNlbGYuYWRkKHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBhcmcudmFsdWUsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcblx0ICAgIHN1YmplY3QubmV4dCh2YWx1ZSk7XG5cdCAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hFcnJvcihhcmcpIHtcblx0ICAgIHZhciBlcnIgPSBhcmcuZXJyLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG5cdCAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Qm91bmRDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgQXN5bmNTdWJqZWN0PFQ+XG5cdCAqL1xuXHR2YXIgQXN5bmNTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc3luY1N1YmplY3QsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5oYXNOZXh0ID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmhhc05leHQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc05leHQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcblx0ICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cblx0ICAgICAgICAvLyBzcGxpY2luZyB0aGVtc2VsdmVzIG91dCBvZiB0aGUgb2JzZXJ2ZXJzIGxpc3Qgb25lIGJ5IG9uZS5cblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNOZXh0KSB7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgbyA9IG9ic2VydmVyc1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBvLm5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICBvLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXN5bmNTdWJqZWN0O1xuXHR9KFN1YmplY3RfMS5TdWJqZWN0KSk7XG5cdGV4cG9ydHMuQXN5bmNTdWJqZWN0ID0gQXN5bmNTdWJqZWN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY1N1YmplY3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBiaW5kTm9kZUNhbGxiYWNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmJpbmROb2RlQ2FsbGJhY2sgPSBiaW5kTm9kZUNhbGxiYWNrXzEuYmluZE5vZGVDYWxsYmFjaztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZE5vZGVDYWxsYmFjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMxKTtcblx0ZXhwb3J0cy5iaW5kTm9kZUNhbGxiYWNrID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXzEuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZE5vZGVDYWxsYmFjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIEFzeW5jU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMjgpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrRnVuYyA9IGNhbGxiYWNrRnVuYztcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5hcmdzID0gYXJncztcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdCAgICAvKipcblx0ICAgICAqIENvbnZlcnRzIGEgTm9kZS5qcy1zdHlsZSBjYWxsYmFjayBBUEkgdG8gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW5cblx0ICAgICAqIE9ic2VydmFibGUuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MganVzdCBsaWtlIHtAbGluayBiaW5kQ2FsbGJhY2t9LCBidXQgdGhlXG5cdCAgICAgKiBjYWxsYmFjayBpcyBleHBlY3RlZCB0byBiZSBvZiB0eXBlIGBjYWxsYmFjayhlcnJvciwgcmVzdWx0KWAuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIGBiaW5kTm9kZUNhbGxiYWNrYCBpcyBub3QgYW4gb3BlcmF0b3IgYmVjYXVzZSBpdHMgaW5wdXQgYW5kIG91dHB1dCBhcmUgbm90XG5cdCAgICAgKiBPYnNlcnZhYmxlcy4gVGhlIGlucHV0IGlzIGEgZnVuY3Rpb24gYGZ1bmNgIHdpdGggc29tZSBwYXJhbWV0ZXJzLCBidXQgdGhlXG5cdCAgICAgKiBsYXN0IHBhcmFtZXRlciBtdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBgZnVuY2AgY2FsbHMgd2hlbiBpdCBpc1xuXHQgICAgICogZG9uZS4gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGV4cGVjdGVkIHRvIGZvbGxvdyBOb2RlLmpzIGNvbnZlbnRpb25zLFxuXHQgICAgICogd2hlcmUgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBjYWxsYmFjayBpcyBhbiBlcnJvciwgd2hpbGUgcmVtYWluaW5nXG5cdCAgICAgKiBhcmd1bWVudHMgYXJlIHRoZSBjYWxsYmFjayByZXN1bHQuIFRoZSBvdXRwdXQgb2YgYGJpbmROb2RlQ2FsbGJhY2tgIGlzIGFcblx0ICAgICAqIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHNhbWUgcGFyYW1ldGVycyBhcyBgZnVuY2AsIGV4Y2VwdCB0aGUgbGFzdCBvbmUgKHRoZVxuXHQgICAgICogY2FsbGJhY2spLiBXaGVuIHRoZSBvdXRwdXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYXJndW1lbnRzLCBpdCB3aWxsXG5cdCAgICAgKiByZXR1cm4gYW4gT2JzZXJ2YWJsZSB3aGVyZSB0aGUgcmVzdWx0cyB3aWxsIGJlIGRlbGl2ZXJlZCB0by5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZWFkIGEgZmlsZSBmcm9tIHRoZSBmaWxlc3lzdGVtIGFuZCBnZXQgdGhlIGRhdGEgYXMgYW4gT2JzZXJ2YWJsZTwvY2FwdGlvbj5cblx0ICAgICAqIGltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcblx0ICAgICAqIHZhciByZWFkRmlsZUFzT2JzZXJ2YWJsZSA9IFJ4Lk9ic2VydmFibGUuYmluZE5vZGVDYWxsYmFjayhmcy5yZWFkRmlsZSk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gcmVhZEZpbGVBc09ic2VydmFibGUoJy4vcm9hZE5hbWVzLnR4dCcsICd1dGY4Jyk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgYmluZENhbGxiYWNrfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21Qcm9taXNlfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gd2l0aCBhIGNhbGxiYWNrIGFzIHRoZSBsYXN0IHBhcmFtZXRlci5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIEEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZVxuXHQgICAgICogY2FsbGJhY2sgYW5kIG1hcHMgdGhvc2UgYSB2YWx1ZSB0byBlbWl0IG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuXHQgICAgICogY2FsbGJhY2tzLlxuXHQgICAgICogQHJldHVybiB7ZnVuY3Rpb24oLi4ucGFyYW1zOiAqKTogT2JzZXJ2YWJsZX0gQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZVxuXHQgICAgICogT2JzZXJ2YWJsZSB0aGF0IGRlbGl2ZXJzIHRoZSBzYW1lIHZhbHVlcyB0aGUgTm9kZS5qcyBjYWxsYmFjayB3b3VsZFxuXHQgICAgICogZGVsaXZlci5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgYmluZE5vZGVDYWxsYmFja1xuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmdW5jLCBzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShmdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKTtcblx0ICAgICAgICB9O1xuXHQgICAgfTtcblx0ICAgIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHRoaXMuY2FsbGJhY2tGdW5jO1xuXHQgICAgICAgIHZhciBhcmdzID0gdGhpcy5hcmdzO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcblx0ICAgICAgICBpZiAoIXNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICBpZiAoIXN1YmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHN1YmplY3QgPSB0aGlzLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJBcmdzID0gW107XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gaW5uZXJBcmdzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuXHQgICAgICAgICAgICAgICAgaGFuZGxlci5zb3VyY2UgPSB0aGlzO1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIDAsIHsgc291cmNlOiB0aGlzLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHRmdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgY2FsbGJhY2tGdW5jID0gc291cmNlLmNhbGxiYWNrRnVuYywgYXJncyA9IHNvdXJjZS5hcmdzLCBzY2hlZHVsZXIgPSBzb3VyY2Uuc2NoZWR1bGVyO1xuXHQgICAgdmFyIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgIGlmICghc3ViamVjdCkge1xuXHQgICAgICAgIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcblx0ICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuXHQgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcblx0ICAgICAgICAgICAgdmFyIGVyciA9IGlubmVyQXJncy5zaGlmdCgpO1xuXHQgICAgICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hFcnJvciwgMCwgeyBlcnI6IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSwgc3ViamVjdDogc3ViamVjdCB9KSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiByZXN1bHRfMiwgc3ViamVjdDogc3ViamVjdCB9KSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzO1xuXHQgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdmFsdWUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gdG8gcGFzcyB2YWx1ZXMgaW4gd2l0aG91dCBjbG9zdXJlXG5cdCAgICAgICAgaGFuZGxlci5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG5cdCAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgc2VsZi5hZGQoc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcikpO1xuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcblx0ICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3ViamVjdCA9IGFyZy5zdWJqZWN0O1xuXHQgICAgc3ViamVjdC5uZXh0KHZhbHVlKTtcblx0ICAgIHN1YmplY3QuY29tcGxldGUoKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaEVycm9yKGFyZykge1xuXHQgICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcblx0ICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb21iaW5lTGF0ZXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdFN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBBcnJheU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM0KTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIENvbWJpbmVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvIGNyZWF0ZSBhbiBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmVcblx0ICogY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2ggb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgYW55IGlucHV0IE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcblx0ICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dHMsIHRoZW4gZW1pdHNcblx0ICogdGhlIG91dHB1dCBvZiB0aGF0IGZvcm11bGEuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVMYXRlc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBjb21iaW5lTGF0ZXN0YCBjb21iaW5lcyB0aGUgdmFsdWVzIGZyb20gdGhpcyBPYnNlcnZhYmxlIHdpdGggdmFsdWVzIGZyb21cblx0ICogT2JzZXJ2YWJsZXMgcGFzc2VkIGFzIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nIHRvIGVhY2hcblx0ICogT2JzZXJ2YWJsZSwgaW4gb3JkZXIsIGFuZCBjb2xsZWN0aW5nIGFuIGFycmF5IG9mIGVhY2ggb2YgdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBhbnkgdGltZSBhbnkgb2YgdGhlIGlucHV0IE9ic2VydmFibGVzIGVtaXRzLCB0aGVuIGVpdGhlciB0YWtpbmcgdGhhdFxuXHQgKiBhcnJheSBhbmQgcGFzc2luZyBpdCBhcyBhcmd1bWVudHMgdG8gYW4gb3B0aW9uYWwgYHByb2plY3RgIGZ1bmN0aW9uIGFuZFxuXHQgKiBlbWl0dGluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoYXQsIG9yIGp1c3QgZW1pdHRpbmcgdGhlIGFycmF5IG9mIHJlY2VudFxuXHQgKiB2YWx1ZXMgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm8gYHByb2plY3RgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5EeW5hbWljYWxseSBjYWxjdWxhdGUgdGhlIEJvZHktTWFzcyBJbmRleCBmcm9tIGFuIE9ic2VydmFibGUgb2Ygd2VpZ2h0IGFuZCBvbmUgZm9yIGhlaWdodDwvY2FwdGlvbj5cblx0ICogdmFyIHdlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoNzAsIDcyLCA3NiwgNzksIDc1KTtcblx0ICogdmFyIGhlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoMS43NiwgMS43NywgMS43OCk7XG5cdCAqIHZhciBibWkgPSB3ZWlnaHQuY29tYmluZUxhdGVzdChoZWlnaHQsICh3LCBoKSA9PiB3IC8gKGggKiBoKSk7XG5cdCAqIGJtaS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnQk1JIGlzICcgKyB4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlfVxuXHQgKiBAc2VlIHtAbGluayB3aXRoTGF0ZXN0RnJvbX1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbWJpbmUgd2l0aCB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gcHJvamVjdCB0aGUgdmFsdWVzIGZyb21cblx0ICogdGhlIGNvbWJpbmVkIGxhdGVzdCB2YWx1ZXMgaW50byBhIG5ldyB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZXMgZnJvbSBlYWNoIGlucHV0IE9ic2VydmFibGUsIG9yIGFuIGFycmF5IG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbVxuXHQgKiBlYWNoIGlucHV0IE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgY29tYmluZUxhdGVzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29tYmluZUxhdGVzdCgpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9qZWN0ID0gbnVsbDtcblx0ICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9qZWN0ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcblx0ICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBwcm9qZWN0KWBcblx0ICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcblx0ICAgIH1cblx0ICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0O1xuXHQvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuXHQvKipcblx0ICogQ29tYmluZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGUgd2hvc2UgdmFsdWVzIGFyZVxuXHQgKiBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCBvZiBpdHMgaW5wdXQgT2JzZXJ2YWJsZXMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciBhbnkgaW5wdXQgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLCBpdFxuXHQgKiBjb21wdXRlcyBhIGZvcm11bGEgdXNpbmcgdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlucHV0cywgdGhlbiBlbWl0c1xuXHQgKiB0aGUgb3V0cHV0IG9mIHRoYXQgZm9ybXVsYS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvY29tYmluZUxhdGVzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYGNvbWJpbmVMYXRlc3RgIGNvbWJpbmVzIHRoZSB2YWx1ZXMgZnJvbSBhbGwgdGhlIE9ic2VydmFibGVzIHBhc3NlZCBhc1xuXHQgKiBhcmd1bWVudHMuIFRoaXMgaXMgZG9uZSBieSBzdWJzY3JpYmluZyB0byBlYWNoIE9ic2VydmFibGUsIGluIG9yZGVyLCBhbmRcblx0ICogY29sbGVjdGluZyBhbiBhcnJheSBvZiBlYWNoIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgYW55IHRpbWUgYW55IG9mIHRoZVxuXHQgKiBpbnB1dCBPYnNlcnZhYmxlcyBlbWl0cywgdGhlbiBlaXRoZXIgdGFraW5nIHRoYXQgYXJyYXkgYW5kIHBhc3NpbmcgaXQgYXNcblx0ICogYXJndW1lbnRzIHRvIGFuIG9wdGlvbmFsIGBwcm9qZWN0YCBmdW5jdGlvbiBhbmQgZW1pdHRpbmcgdGhlIHJldHVybiB2YWx1ZSBvZlxuXHQgKiB0aGF0LCBvciBqdXN0IGVtaXR0aW5nIHRoZSBhcnJheSBvZiByZWNlbnQgdmFsdWVzIGRpcmVjdGx5IGlmIHRoZXJlIGlzIG5vXG5cdCAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RHluYW1pY2FsbHkgY2FsY3VsYXRlIHRoZSBCb2R5LU1hc3MgSW5kZXggZnJvbSBhbiBPYnNlcnZhYmxlIG9mIHdlaWdodCBhbmQgb25lIGZvciBoZWlnaHQ8L2NhcHRpb24+XG5cdCAqIHZhciB3ZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDcwLCA3MiwgNzYsIDc5LCA3NSk7XG5cdCAqIHZhciBoZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDEuNzYsIDEuNzcsIDEuNzgpO1xuXHQgKiB2YXIgYm1pID0gUnguT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KHdlaWdodCwgaGVpZ2h0LCAodywgaCkgPT4gdyAvIChoICogaCkpO1xuXHQgKiBibWkuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coJ0JNSSBpcyAnICsgeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgd2l0aExhdGVzdEZyb219XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZTEgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb21iaW5lIHdpdGggdGhlXG5cdCAqIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG9ic2VydmFibGUyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZVxuXHQgKiBzb3VyY2UgT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSB2YWx1ZXMgZnJvbVxuXHQgKiB0aGUgY29tYmluZWQgbGF0ZXN0IHZhbHVlcyBpbnRvIGEgbmV3IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIHN1YnNjcmliaW5nIHRvXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQHN0YXRpYyB0cnVlXG5cdCAqIEBuYW1lIGNvbWJpbmVMYXRlc3Rcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvbWJpbmVMYXRlc3RTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvamVjdCA9IG51bGw7XG5cdCAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdKSkge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb2plY3QgPSBvYnNlcnZhYmxlcy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHRoZSBmaXJzdCBhbmQgb25seSBvdGhlciBhcmd1bWVudCBiZXNpZGVzIHRoZSByZXN1bHRTZWxlY3RvciBpcyBhbiBhcnJheVxuXHQgICAgLy8gYXNzdW1lIGl0J3MgYmVlbiBjYWxsZWQgd2l0aCBgY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIHByb2plY3QpYFxuXHQgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcblx0ICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLmNvbWJpbmVMYXRlc3RTdGF0aWMgPSBjb21iaW5lTGF0ZXN0U3RhdGljO1xuXHR2YXIgQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENvbWJpbmVMYXRlc3RPcGVyYXRvcihwcm9qZWN0KSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgIH1cblx0ICAgIENvbWJpbmVMYXRlc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb21iaW5lTGF0ZXN0T3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQ29tYmluZUxhdGVzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuXHQgICAgfVxuXHQgICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0ICAgICAgICB2YXIgdG9SZXNwb25kID0gdGhpcy50b1Jlc3BvbmQ7XG5cdCAgICAgICAgdG9SZXNwb25kLnB1c2godG9SZXNwb25kLmxlbmd0aCk7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUpO1xuXHQgICAgfTtcblx0ICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIG9ic2VydmFibGVzID0gdGhpcy5vYnNlcnZhYmxlcztcblx0ICAgICAgICB2YXIgbGVuID0gb2JzZXJ2YWJsZXMubGVuZ3RoO1xuXHQgICAgICAgIGlmIChsZW4gPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAodW51c2VkKSB7XG5cdCAgICAgICAgaWYgKCh0aGlzLmFjdGl2ZSAtPSAxKSA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMudmFsdWVzO1xuXHQgICAgICAgIHZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG5cdCAgICAgICAgdmFyIHRvUmVzcG9uZCA9IHRoaXMudG9SZXNwb25kO1xuXHQgICAgICAgIGlmICh0b1Jlc3BvbmQubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgZm91bmQgPSB0b1Jlc3BvbmQuaW5kZXhPZihvdXRlckluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKGZvdW5kICE9PSAtMSkge1xuXHQgICAgICAgICAgICAgICAgdG9SZXNwb25kLnNwbGljZShmb3VuZCwgMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRvUmVzcG9uZC5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fdHJ5UHJvamVjdCh2YWx1ZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlcyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcm9qZWN0ID0gZnVuY3Rpb24gKHZhbHVlcykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIHZhbHVlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5Db21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lTGF0ZXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgU2NhbGFyT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzUpO1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNik7XG5cdHZhciBpc1NjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzcpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFycmF5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhcnJheVswXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBBcnJheU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFycmF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcblx0ICAgICAqIGltbWVkaWF0ZWx5IG9uZSBhZnRlciB0aGUgb3RoZXIsIGFuZCB0aGVuIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuXHQgICAgICogYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgd2l0aCB7QGxpbmsgY29uY2F0fS5cblx0ICAgICAqIEJ5IGRlZmF1bHQsIGl0IHVzZXMgYSBgbnVsbGAgU2NoZWR1bGVyLCB3aGljaCBtZWFucyB0aGUgYG5leHRgXG5cdCAgICAgKiBub3RpZmljYXRpb25zIGFyZSBzZW50IHN5bmNocm9ub3VzbHksIGFsdGhvdWdoIHdpdGggYSBkaWZmZXJlbnQgU2NoZWR1bGVyXG5cdCAgICAgKiBpdCBpcyBwb3NzaWJsZSB0byBkZXRlcm1pbmUgd2hlbiB0aG9zZSBub3RpZmljYXRpb25zIHdpbGwgYmUgZGVsaXZlcmVkLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgMTAsIDIwLCAzMCwgdGhlbiAnYScsICdiJywgJ2MnLCB0aGVuIHN0YXJ0IHRpY2tpbmcgZXZlcnkgc2Vjb25kLjwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5vZigxMCwgMjAsIDMwKTtcblx0ICAgICAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcblx0ICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb25jYXQobGV0dGVycykuY29uY2F0KGludGVydmFsKTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG5cdCAgICAgKiBAc2VlIHtAbGluayBuZXZlcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7Li4uVH0gdmFsdWVzIEFyZ3VtZW50cyB0aGF0IHJlcHJlc2VudCBgbmV4dGAgdmFsdWVzIHRvIGJlIGVtaXR0ZWQuXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbnMgb2YgdGhlIGBuZXh0YCBub3RpZmljYXRpb25zLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIG9mXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBBcnJheU9ic2VydmFibGUub2YgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGFycmF5ID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgYXJyYXlbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblx0ICAgICAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuID4gMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlbMF0sIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBBcnJheU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgYXJyYXkgPSBzdGF0ZS5hcnJheSwgaW5kZXggPSBzdGF0ZS5pbmRleCwgY291bnQgPSBzdGF0ZS5jb3VudCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaW5kZXhdKTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIEFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuXHQgICAgICAgIHZhciBjb3VudCA9IGFycmF5Lmxlbmd0aDtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5T2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgYXJyYXk6IGFycmF5LCBpbmRleDogaW5kZXgsIGNvdW50OiBjb3VudCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQgJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2ldKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBcnJheU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5BcnJheU9ic2VydmFibGUgPSBBcnJheU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgU2NhbGFyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2NhbGFyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBTY2FsYXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTY2FsYXJPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFNjYWxhck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgZG9uZSA9IHN0YXRlLmRvbmUsIHZhbHVlID0gc3RhdGUudmFsdWUsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChkb25lKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUuZG9uZSA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG5cdCAgICB9O1xuXHQgICAgU2NhbGFyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFNjYWxhck9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcblx0ICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2NhbGFyT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLlNjYWxhck9ic2VydmFibGUgPSBTY2FsYXJPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1TY2FsYXJPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBFbXB0eU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEVtcHR5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuXHQgICAgICogZW1pdHMgYSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuXHQgICAgICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cblx0ICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmVtcHR5KCkuc3RhcnRXaXRoKDcpO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gb25seSBvZGQgbnVtYmVycyB0byB0aGUgc2VxdWVuY2UgJ2EnLCAnYicsICdjJzwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuXHQgICAgICogICB4ICUgMiA9PT0gMSA/IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJykgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcblx0ICAgICAqICk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cblx0ICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuXHQgICAgICogQHNlZSB7QGxpbmsgb2Z9XG5cdCAgICAgKiBAc2VlIHtAbGluayB0aHJvd31cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbiBvZiB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG5cdCAgICAgKiBub3RpZmljYXRpb24uXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGVtcHR5XG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBFbXB0eU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG5cdCAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIEVtcHR5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShFbXB0eU9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkVtcHR5T2JzZXJ2YWJsZSA9IEVtcHR5T2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RW1wdHlPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gaXNTY2hlZHVsZXIodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc2NoZWR1bGUgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZXhwb3J0cy5pc1NjaGVkdWxlciA9IGlzU2NoZWR1bGVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc1NjaGVkdWxlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhPdXRlclN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBPdXRlclN1YnNjcmliZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBPdXRlclN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5PdXRlclN1YnNjcmliZXIgPSBPdXRlclN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU91dGVyU3Vic2NyaWJlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDMzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNQcm9taXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MCk7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MSk7XG5cdHZhciBJbm5lclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQyKTtcblx0dmFyICQkb2JzZXJ2YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRmdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuXHQgICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IElubmVyU3Vic2NyaWJlcl8xLklubmVyU3Vic2NyaWJlcihvdXRlclN1YnNjcmliZXIsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpO1xuXHQgICAgaWYgKGRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgaWYgKHJlc3VsdC5faXNTY2FsYXIpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHJlc3VsdCkpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGxlbiAmJiAhZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJlc3VsdFtpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UocmVzdWx0KSkge1xuXHQgICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBkZXN0aW5hdGlvbi5lcnJvcihlcnIpOyB9KVxuXHQgICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgICAgIC8vIEVzY2FwaW5nIHRoZSBQcm9taXNlIHRyYXA6IGdsb2JhbGx5IHRocm93IHVuaGFuZGxlZCBlcnJvcnNcblx0ICAgICAgICAgICAgcm9vdF8xLnJvb3Quc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJlc3VsdDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbSk7XG5cdCAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRbJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHZhciBvYnMgPSByZXN1bHRbJCRvYnNlcnZhYmxlXSgpO1xuXHQgICAgICAgIGlmICh0eXBlb2Ygb2JzLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcignaW52YWxpZCBvYnNlcnZhYmxlJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JzLnN1YnNjcmliZShuZXcgSW5uZXJTdWJzY3JpYmVyXzEuSW5uZXJTdWJzY3JpYmVyKG91dGVyU3Vic2NyaWJlciwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBUeXBlRXJyb3IoJ3Vua25vd24gdHlwZSByZXR1cm5lZCcpKTtcblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLnN1YnNjcmliZVRvUmVzdWx0ID0gc3Vic2NyaWJlVG9SZXN1bHQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvUmVzdWx0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRleHBvcnRzLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNQcm9taXNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgU3ltYm9sID0gcm9vdF8xLnJvb3QuU3ltYm9sO1xuXHRpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgaWYgKFN5bWJvbC5pdGVyYXRvcikge1xuXHQgICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9IFN5bWJvbC5pdGVyYXRvcjtcblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gU3ltYm9sLmZvcignaXRlcmF0b3InKTtcblx0ICAgIH1cblx0fVxuXHRlbHNlIHtcblx0ICAgIGlmIChyb290XzEucm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290XzEucm9vdC5TZXQoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgLy8gQnVnIGZvciBtb3ppbGxhIHZlcnNpb25cblx0ICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSAnQEBpdGVyYXRvcic7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChyb290XzEucm9vdC5NYXApIHtcblx0ICAgICAgICAvLyBlczYtc2hpbSBzcGVjaWZpYyBsb2dpY1xuXHQgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZSk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG5cdCAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgICAgICBpZiAoa2V5ICE9PSAnZW50cmllcycgJiYga2V5ICE9PSAnc2l6ZScgJiYgcm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZVtrZXldID09PSByb290XzEucm9vdC5NYXAucHJvdG90eXBlWydlbnRyaWVzJ10pIHtcblx0ICAgICAgICAgICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9IGtleTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gJ0BAaXRlcmF0b3InO1xuXHQgICAgfVxuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZXJhdG9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBJbm5lclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKElubmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuXHQgICAgICAgIHRoaXMub3V0ZXJJbmRleCA9IG91dGVySW5kZXg7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBJbm5lclN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5TmV4dCh0aGlzLm91dGVyVmFsdWUsIHZhbHVlLCB0aGlzLm91dGVySW5kZXgsIHRoaXMuaW5kZXgrKywgdGhpcyk7XG5cdCAgICB9O1xuXHQgICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlFcnJvcihlcnJvciwgdGhpcyk7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuSW5uZXJTdWJzY3JpYmVyID0gSW5uZXJTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb25jYXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuY29uY2F0ID0gY29uY2F0XzEuY29uY2F0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgY29uY2F0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NSk7XG5cdGV4cG9ydHMuY29uY2F0ID0gY29uY2F0XzEuY29uY2F0U3RhdGljO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgbWVyZ2VBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ2KTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggc2VxdWVudGlhbGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuXHQgKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIGFmdGVyIHRoZSBjdXJyZW50IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db25jYXRlbmF0ZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnlcblx0ICogc2VxdWVudGlhbGx5IGVtaXR0aW5nIHRoZWlyIHZhbHVlcywgb25lIE9ic2VydmFibGUgYWZ0ZXIgdGhlIG90aGVyLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEpvaW5zIHRoaXMgT2JzZXJ2YWJsZSB3aXRoIG11bHRpcGxlIG90aGVyIE9ic2VydmFibGVzIGJ5IHN1YnNjcmliaW5nIHRvIHRoZW1cblx0ICogb25lIGF0IGEgdGltZSwgc3RhcnRpbmcgd2l0aCB0aGUgc291cmNlLCBhbmQgbWVyZ2luZyB0aGVpciByZXN1bHRzIGludG8gdGhlXG5cdCAqIG91dHB1dCBPYnNlcnZhYmxlLiBXaWxsIHdhaXQgZm9yIGVhY2ggT2JzZXJ2YWJsZSB0byBjb21wbGV0ZSBiZWZvcmUgbW92aW5nXG5cdCAqIG9uIHRvIHRoZSBuZXh0LlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSBhIHRpbWVyIGNvdW50aW5nIGZyb20gMCB0byAzIHdpdGggYSBzeW5jaHJvbm91cyBzZXF1ZW5jZSBmcm9tIDEgdG8gMTA8L2NhcHRpb24+XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KTtcblx0ICogdmFyIHNlcXVlbmNlID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG5cdCAqIHZhciByZXN1bHQgPSB0aW1lci5jb25jYXQoc2VxdWVuY2UpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSAzIE9ic2VydmFibGVzPC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcblx0ICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcblx0ICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcblx0ICogdmFyIHJlc3VsdCA9IHRpbWVyMS5jb25jYXQodGltZXIyLCB0aW1lcjMpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb3RoZXIgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb25jYXRlbmF0ZSBhZnRlciB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBBbiBvcHRpb25hbCBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgZWFjaFxuXHQgKiBPYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQWxsIHZhbHVlcyBvZiBlYWNoIHBhc3NlZCBPYnNlcnZhYmxlIG1lcmdlZCBpbnRvIGFcblx0ICogc2luZ2xlIE9ic2VydmFibGUsIGluIG9yZGVyLCBpbiBzZXJpYWwgZmFzaGlvbi5cblx0ICogQG1ldGhvZCBjb25jYXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvbmNhdCgpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBjb25jYXRTdGF0aWMuYXBwbHkodm9pZCAwLCBbdGhpc10uY29uY2F0KG9ic2VydmFibGVzKSk7XG5cdH1cblx0ZXhwb3J0cy5jb25jYXQgPSBjb25jYXQ7XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIHNlcXVlbnRpYWxseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcblx0ICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSBhZnRlciB0aGUgY3VycmVudCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29uY2F0ZW5hdGVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5XG5cdCAqIHNlcXVlbnRpYWxseSBlbWl0dGluZyB0aGVpciB2YWx1ZXMsIG9uZSBPYnNlcnZhYmxlIGFmdGVyIHRoZSBvdGhlci48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBKb2lucyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0b2dldGhlciBieSBzdWJzY3JpYmluZyB0byB0aGVtIG9uZSBhdCBhIHRpbWUgYW5kXG5cdCAqIG1lcmdpbmcgdGhlaXIgcmVzdWx0cyBpbnRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gV2lsbCB3YWl0IGZvciBlYWNoXG5cdCAqIE9ic2VydmFibGUgdG8gY29tcGxldGUgYmVmb3JlIG1vdmluZyBvbiB0byB0aGUgbmV4dC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q29uY2F0ZW5hdGUgYSB0aW1lciBjb3VudGluZyBmcm9tIDAgdG8gMyB3aXRoIGEgc3luY2hyb25vdXMgc2VxdWVuY2UgZnJvbSAxIHRvIDEwPC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCk7XG5cdCAqIHZhciBzZXF1ZW5jZSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTApO1xuXHQgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5jb25jYXQodGltZXIsIHNlcXVlbmNlKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q29uY2F0ZW5hdGUgMyBPYnNlcnZhYmxlczwvY2FwdGlvbj5cblx0ICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG5cdCAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG5cdCAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG5cdCAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lcjEsIHRpbWVyMiwgdGltZXIzKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MSBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIHdpdGggb3RoZXJzLlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIHdpdGggb3RoZXJzLlxuXHQgKiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gQW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHNjaGVkdWxlIGVhY2hcblx0ICogT2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gb24uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFsbCB2YWx1ZXMgb2YgZWFjaCBwYXNzZWQgT2JzZXJ2YWJsZSBtZXJnZWQgaW50byBhXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCBpbiBvcmRlciwgaW4gc2VyaWFsIGZhc2hpb24uXG5cdCAqIEBzdGF0aWMgdHJ1ZVxuXHQgKiBAbmFtZSBjb25jYXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvbmNhdFN0YXRpYygpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuXHQgICAgdmFyIGFyZ3MgPSBvYnNlcnZhYmxlcztcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKGFyZ3Nbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0pKSB7XG5cdCAgICAgICAgc2NoZWR1bGVyID0gYXJncy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzLCBzY2hlZHVsZXIpLmxpZnQobmV3IG1lcmdlQWxsXzEuTWVyZ2VBbGxPcGVyYXRvcigxKSk7XG5cdH1cblx0ZXhwb3J0cy5jb25jYXRTdGF0aWMgPSBjb25jYXRTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIHdoaWNoXG5cdCAqIGNvbmN1cnJlbnRseSBkZWxpdmVycyBhbGwgdmFsdWVzIHRoYXQgYXJlIGVtaXR0ZWQgb24gdGhlIGlubmVyIE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2VBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBtZXJnZUFsbGAgc3Vic2NyaWJlcyB0byBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgT2JzZXJ2YWJsZXMsIGFsc28ga25vd24gYXNcblx0ICogYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZS4gRWFjaCB0aW1lIGl0IG9ic2VydmVzIG9uZSBvZiB0aGVzZSBlbWl0dGVkIGlubmVyXG5cdCAqIE9ic2VydmFibGVzLCBpdCBzdWJzY3JpYmVzIHRvIHRoYXQgYW5kIGRlbGl2ZXJzIGFsbCB0aGUgdmFsdWVzIGZyb20gdGhlXG5cdCAqIGlubmVyIE9ic2VydmFibGUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgb25seVxuXHQgKiBjb21wbGV0ZXMgb25jZSBhbGwgaW5uZXIgT2JzZXJ2YWJsZXMgaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnlcblx0ICogYSBpbm5lciBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPlNwYXduIGEgbmV3IGludGVydmFsIE9ic2VydmFibGUgZm9yIGVhY2ggY2xpY2sgZXZlbnQsIGFuZCBibGVuZCB0aGVpciBvdXRwdXRzIGFzIG9uZSBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG5cdCAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIubWVyZ2VBbGwoKTtcblx0ICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50IGZyb20gMCB0byA5IGV2ZXJ5IHNlY29uZCBmb3IgZWFjaCBjbGljaywgYnV0IG9ubHkgYWxsb3cgMiBjb25jdXJyZW50IHRpbWVyczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCkpO1xuXHQgKiB2YXIgZmlyc3RPcmRlciA9IGhpZ2hlck9yZGVyLm1lcmdlQWxsKDIpO1xuXHQgKiBmaXJzdE9yZGVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0fVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayB6aXBBbGx9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlubmVyXG5cdCAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdmFsdWVzIGNvbWluZyBmcm9tIGFsbCB0aGVcblx0ICogaW5uZXIgT2JzZXJ2YWJsZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgbWVyZ2VBbGxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlQWxsKGNvbmN1cnJlbnQpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSk7XG5cdH1cblx0ZXhwb3J0cy5tZXJnZUFsbCA9IG1lcmdlQWxsO1xuXHR2YXIgTWVyZ2VBbGxPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNZXJnZUFsbE9wZXJhdG9yKGNvbmN1cnJlbnQpIHtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgfVxuXHQgICAgTWVyZ2VBbGxPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNZXJnZUFsbFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMuY29uY3VycmVudCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZXJnZUFsbE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk1lcmdlQWxsT3BlcmF0b3IgPSBNZXJnZUFsbE9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNZXJnZUFsbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1lcmdlQWxsU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlQWxsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29uY3VycmVudCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICB9XG5cdCAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKG9ic2VydmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlQWxsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlLS07XG5cdCAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZXJnZUFsbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuTWVyZ2VBbGxTdWJzY3JpYmVyID0gTWVyZ2VBbGxTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGRlZmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmRlZmVyID0gZGVmZXJfMS5kZWZlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRGVmZXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0OSk7XG5cdGV4cG9ydHMuZGVmZXIgPSBEZWZlck9ic2VydmFibGVfMS5EZWZlck9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZWZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRGVmZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhEZWZlck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVGYWN0b3J5ID0gb2JzZXJ2YWJsZUZhY3Rvcnk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0LCBvbiBzdWJzY3JpYmUsIGNhbGxzIGFuIE9ic2VydmFibGUgZmFjdG9yeSB0b1xuXHQgICAgICogbWFrZSBhbiBPYnNlcnZhYmxlIGZvciBlYWNoIG5ldyBPYnNlcnZlci5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q3JlYXRlcyB0aGUgT2JzZXJ2YWJsZSBsYXppbHksIHRoYXQgaXMsIG9ubHkgd2hlbiBpdFxuXHQgICAgICogaXMgc3Vic2NyaWJlZC5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGBkZWZlcmAgYWxsb3dzIHlvdSB0byBjcmVhdGUgdGhlIE9ic2VydmFibGUgb25seSB3aGVuIHRoZSBPYnNlcnZlclxuXHQgICAgICogc3Vic2NyaWJlcywgYW5kIGNyZWF0ZSBhIGZyZXNoIE9ic2VydmFibGUgZm9yIGVhY2ggT2JzZXJ2ZXIuIEl0IHdhaXRzIHVudGlsXG5cdCAgICAgKiBhbiBPYnNlcnZlciBzdWJzY3JpYmVzIHRvIGl0LCBhbmQgdGhlbiBpdCBnZW5lcmF0ZXMgYW4gT2JzZXJ2YWJsZSxcblx0ICAgICAqIHR5cGljYWxseSB3aXRoIGFuIE9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi4gSXQgZG9lcyB0aGlzIGFmcmVzaCBmb3IgZWFjaFxuXHQgICAgICogc3Vic2NyaWJlciwgc28gYWx0aG91Z2ggZWFjaCBzdWJzY3JpYmVyIG1heSB0aGluayBpdCBpcyBzdWJzY3JpYmluZyB0byB0aGVcblx0ICAgICAqIHNhbWUgT2JzZXJ2YWJsZSwgaW4gZmFjdCBlYWNoIHN1YnNjcmliZXIgZ2V0cyBpdHMgb3duIGluZGl2aWR1YWxcblx0ICAgICAqIE9ic2VydmFibGUuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHRvIGVpdGhlciBhbiBPYnNlcnZhYmxlIG9mIGNsaWNrcyBvciBhbiBPYnNlcnZhYmxlIG9mIGludGVydmFsLCBhdCByYW5kb208L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgY2xpY2tzT3JJbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICogICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuXHQgICAgICogICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAgICAgKiAgIH0gZWxzZSB7XG5cdCAgICAgKiAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiAgIH1cblx0ICAgICAqIH0pO1xuXHQgICAgICogY2xpY2tzT3JJbnRlcnZhbC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBvYnNlcnZhYmxlRmFjdG9yeSBUaGUgT2JzZXJ2YWJsZVxuXHQgICAgICogZmFjdG9yeSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggT2JzZXJ2ZXIgdGhhdCBzdWJzY3JpYmVzIHRvIHRoZSBvdXRwdXRcblx0ICAgICAqIE9ic2VydmFibGUuIE1heSBhbHNvIHJldHVybiBhIFByb21pc2UsIHdoaWNoIHdpbGwgYmUgY29udmVydGVkIG9uIHRoZSBmbHlcblx0ICAgICAqIHRvIGFuIE9ic2VydmFibGUuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHdob3NlIE9ic2VydmVycycgc3Vic2NyaXB0aW9ucyB0cmlnZ2VyXG5cdCAgICAgKiBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGRlZmVyXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBEZWZlck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKG9ic2VydmFibGVGYWN0b3J5KSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpO1xuXHQgICAgfTtcblx0ICAgIERlZmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEZWZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlRmFjdG9yeSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlZmVyT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkRlZmVyT2JzZXJ2YWJsZSA9IERlZmVyT2JzZXJ2YWJsZTtcblx0dmFyIERlZmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVmZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmYWN0b3J5KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG5cdCAgICAgICAgdGhpcy50cnlEZWZlcigpO1xuXHQgICAgfVxuXHQgICAgRGVmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEZWZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9jYWxsRmFjdG9yeSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NhbGxGYWN0b3J5ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmZhY3RvcnkoKTtcblx0ICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgcmVzdWx0KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWZlclN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGVtcHR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmVtcHR5ID0gZW1wdHlfMS5lbXB0eTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1wdHkuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNik7XG5cdGV4cG9ydHMuZW1wdHkgPSBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1lbXB0eS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZvcmtKb2luXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZvcmtKb2luID0gZm9ya0pvaW5fMS5mb3JrSm9pbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ya0pvaW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRm9ya0pvaW5PYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1NCk7XG5cdGV4cG9ydHMuZm9ya0pvaW4gPSBGb3JrSm9pbk9ic2VydmFibGVfMS5Gb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mb3JrSm9pbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzYpO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEZvcmtKb2luT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRm9ya0pvaW5PYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZhYmxlKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSBzb3VyY2VzXG5cdCAgICAgKiBAcmV0dXJuIHthbnl9XG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGZvcmtKb2luXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBGb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzb3VyY2VzID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgc291cmNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHNvdXJjZXMgPT09IG51bGwgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc291cmNlc1tzb3VyY2VzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdFNlbGVjdG9yID0gc291cmNlcy5wb3AoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGFuZCBvbmx5IG90aGVyIGFyZ3VtZW50IGJlc2lkZXMgdGhlIHJlc3VsdFNlbGVjdG9yIGlzIGFuIGFycmF5XG5cdCAgICAgICAgLy8gYXNzdW1lIGl0J3MgYmVlbiBjYWxsZWQgd2l0aCBgZm9ya0pvaW4oW29iczEsIG9iczIsIG9iczNdLCByZXN1bHRTZWxlY3RvcilgXG5cdCAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KHNvdXJjZXNbMF0pKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pbk9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpO1xuXHQgICAgfTtcblx0ICAgIEZvcmtKb2luT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zb3VyY2VzLCB0aGlzLnJlc3VsdFNlbGVjdG9yKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRm9ya0pvaW5PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuRm9ya0pvaW5PYnNlcnZhYmxlID0gRm9ya0pvaW5PYnNlcnZhYmxlO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGb3JrSm9pblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZvcmtKb2luU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZvcmtKb2luU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuXHQgICAgICAgIHRoaXMuaGF2ZVZhbHVlcyA9IDA7XG5cdCAgICAgICAgdmFyIGxlbiA9IHNvdXJjZXMubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSBsZW47XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuXHQgICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHNvdXJjZSwgbnVsbCwgaSk7XG5cdCAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24ub3V0ZXJJbmRleCA9IGk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgaW5uZXJTdWIuX2hhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdGhpcy5oYXZlVmFsdWVzKys7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGhhdmVWYWx1ZXMgPSBfYS5oYXZlVmFsdWVzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCB2YWx1ZXMgPSBfYS52YWx1ZXM7XG5cdCAgICAgICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmNvbXBsZXRlZCsrO1xuXHQgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAhPT0gbGVuKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGhhdmVWYWx1ZXMgPT09IGxlbikge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHRTZWxlY3RvciA/IHJlc3VsdFNlbGVjdG9yLmFwcGx5KHRoaXMsIHZhbHVlcykgOiB2YWx1ZXM7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGb3JrSm9pblN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvcmtKb2luT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZyb21fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbSA9IGZyb21fMS5mcm9tO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEZyb21PYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Nyk7XG5cdGV4cG9ydHMuZnJvbSA9IEZyb21PYnNlcnZhYmxlXzEuRnJvbU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNGdW5jdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdHZhciBpc1Byb21pc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQwKTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdHZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdHZhciBJdGVyYXRvck9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU4KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTkpO1xuXHR2YXIgaXRlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQxKTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdHZhciAkJG9ic2VydmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0dmFyIGlzQXJyYXlMaWtlID0gKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBGcm9tT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRnJvbU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIG51bGwpO1xuXHQgICAgICAgIHRoaXMuaXNoID0gaXNoO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBcnJheSwgYW4gYXJyYXktbGlrZSBvYmplY3QsIGEgUHJvbWlzZSwgYW5cblx0ICAgICAqIGl0ZXJhYmxlIG9iamVjdCwgb3IgYW4gT2JzZXJ2YWJsZS1saWtlIG9iamVjdC5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29udmVydHMgYWxtb3N0IGFueXRoaW5nIHRvIGFuIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBDb252ZXJ0IHZhcmlvdXMgb3RoZXIgb2JqZWN0cyBhbmQgZGF0YSB0eXBlcyBpbnRvIE9ic2VydmFibGVzLiBgZnJvbWBcblx0ICAgICAqIGNvbnZlcnRzIGEgUHJvbWlzZSBvciBhbiBhcnJheS1saWtlIG9yIGFuXG5cdCAgICAgKiBbaXRlcmFibGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMjaXRlcmFibGUpXG5cdCAgICAgKiBvYmplY3QgaW50byBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGluIHRoYXQgcHJvbWlzZSBvciBhcnJheSBvclxuXHQgICAgICogaXRlcmFibGUuIEEgU3RyaW5nLCBpbiB0aGlzIGNvbnRleHQsIGlzIHRyZWF0ZWQgYXMgYW4gYXJyYXkgb2YgY2hhcmFjdGVycy5cblx0ICAgICAqIE9ic2VydmFibGUtbGlrZSBvYmplY3RzIChjb250YWlucyBhIGZ1bmN0aW9uIG5hbWVkIHdpdGggdGhlIEVTMjAxNSBTeW1ib2xcblx0ICAgICAqIGZvciBPYnNlcnZhYmxlKSBjYW4gYWxzbyBiZSBjb252ZXJ0ZWQgdGhyb3VnaCB0aGlzIG9wZXJhdG9yLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbnZlcnRzIGFuIGFycmF5IHRvIGFuIE9ic2VydmFibGU8L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgYXJyYXkgPSBbMTAsIDIwLCAzMF07XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5mcm9tKGFycmF5KTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q29udmVydCBhbiBpbmZpbml0ZSBpdGVyYWJsZSAoZnJvbSBhIGdlbmVyYXRvcikgdG8gYW4gT2JzZXJ2YWJsZTwvY2FwdGlvbj5cblx0ICAgICAqIGZ1bmN0aW9uKiBnZW5lcmF0ZURvdWJsZXMoc2VlZCkge1xuXHQgICAgICogICB2YXIgaSA9IHNlZWQ7XG5cdCAgICAgKiAgIHdoaWxlICh0cnVlKSB7XG5cdCAgICAgKiAgICAgeWllbGQgaTtcblx0ICAgICAqICAgICBpID0gMiAqIGk7IC8vIGRvdWJsZSBpdFxuXHQgICAgICogICB9XG5cdCAgICAgKiB9XG5cdCAgICAgKlxuXHQgICAgICogdmFyIGl0ZXJhdG9yID0gZ2VuZXJhdGVEb3VibGVzKDMpO1xuXHQgICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUuZnJvbShpdGVyYXRvcikudGFrZSgxMCk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudH1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudFBhdHRlcm59XG5cdCAgICAgKiBAc2VlIHtAbGluayBmcm9tUHJvbWlzZX1cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmFibGVJbnB1dDxUPn0gaXNoIEEgc3Vic2NyaWJhYmxlIG9iamVjdCwgYSBQcm9taXNlLCBhblxuXHQgICAgICogT2JzZXJ2YWJsZS1saWtlLCBhbiBBcnJheSwgYW4gaXRlcmFibGUgb3IgYW4gYXJyYXktbGlrZSBvYmplY3QgdG8gYmVcblx0ICAgICAqIGNvbnZlcnRlZC5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oeDogYW55LCBpOiBudW1iZXIpOiBUfSBbbWFwRm5dIEEgXCJtYXBcIiBmdW5jdGlvbiB0byBjYWxsXG5cdCAgICAgKiB3aGVuIGNvbnZlcnRpbmcgYXJyYXktbGlrZSBvYmplY3RzLCB3aGVyZSBgeGAgaXMgYSB2YWx1ZSBmcm9tIHRoZVxuXHQgICAgICogYXJyYXktbGlrZSBhbmQgYGlgIGlzIHRoZSBpbmRleCBvZiB0aGF0IHZhbHVlIGluIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gVGhlIGNvbnRleHQgb2JqZWN0IHRvIHVzZSB3aGVuIGNhbGxpbmcgdGhlIGBtYXBGbmAsXG5cdCAgICAgKiBpZiBwcm92aWRlZC5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuXHQgICAgICogZW1pc3Npb25zIG9mIHZhbHVlcy5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IFRoZSBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmUgb3JpZ2luYWxseSBmcm9tIHRoZVxuXHQgICAgICogaW5wdXQgb2JqZWN0IHRoYXQgd2FzIGNvbnZlcnRlZC5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgZnJvbVxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRnJvbU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGlzaCwgbWFwRm5PclNjaGVkdWxlciwgdGhpc0FyZywgbGFzdFNjaGVkdWxlcikge1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuXHQgICAgICAgIHZhciBtYXBGbiA9IG51bGw7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKG1hcEZuT3JTY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlciA9IGxhc3RTY2hlZHVsZXIgfHwgbnVsbDtcblx0ICAgICAgICAgICAgbWFwRm4gPSBtYXBGbk9yU2NoZWR1bGVyO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gbWFwRm5PclNjaGVkdWxlcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzaCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgaXNoWyQkb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChpc2ggaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSAmJiAhc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzaDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlfMS5pc0FycmF5KGlzaCkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UoaXNoKSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXNoW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGlzaCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlXzEuSXRlcmF0b3JPYnNlcnZhYmxlKGlzaCwgbnVsbCwgbnVsbCwgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5TGlrZShpc2gpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlrZU9ic2VydmFibGVfMS5BcnJheUxpa2VPYnNlcnZhYmxlKGlzaCwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigoaXNoICE9PSBudWxsICYmIHR5cGVvZiBpc2ggfHwgaXNoKSArICcgaXMgbm90IG9ic2VydmFibGUnKTtcblx0ICAgIH07XG5cdCAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGlzaCA9IHRoaXMuaXNoO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzaFskJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzaFskJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKG5ldyBvYnNlcnZlT25fMS5PYnNlcnZlT25TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgMCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRnJvbU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Gcm9tT2JzZXJ2YWJsZSA9IEZyb21PYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Gcm9tT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGlzT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgaXNGdW5jdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdHZhciBpdGVyYXRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDEpO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBJdGVyYXRvck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEl0ZXJhdG9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEl0ZXJhdG9yT2JzZXJ2YWJsZShpdGVyYXRvciwgcHJvamVjdCwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgaWYgKGl0ZXJhdG9yID09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpdGVyYXRvciBjYW5ub3QgYmUgbnVsbC4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0XzEuaXNPYmplY3QocHJvamVjdCkpIHtcblx0ICAgICAgICAgICAgdGhpcy50aGlzQXJnID0gcHJvamVjdDtcblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSB0aGlzQXJnO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihwcm9qZWN0KSkge1xuXHQgICAgICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAocHJvamVjdCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2hlbiBwcm92aWRlZCwgYHByb2plY3RgIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5pdGVyYXRvciA9IGdldEl0ZXJhdG9yKGl0ZXJhdG9yKTtcblx0ICAgIH1cblx0ICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXRlcmF0b3IsIHByb2plY3QsIHRoaXNBcmcsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlKGl0ZXJhdG9yLCBwcm9qZWN0LCB0aGlzQXJnLCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IHN0YXRlLmluZGV4LCBoYXNFcnJvciA9IHN0YXRlLmhhc0Vycm9yLCB0aGlzQXJnID0gc3RhdGUudGhpc0FyZywgcHJvamVjdCA9IHN0YXRlLnByb2plY3QsIGl0ZXJhdG9yID0gc3RhdGUuaXRlcmF0b3IsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChoYXNFcnJvcikge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHN0YXRlLmVycm9yKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHByb2plY3QpIHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChwcm9qZWN0KS5jYWxsKHRoaXNBcmcsIHJlc3VsdC52YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZTtcblx0ICAgICAgICAgICAgICAgIHN0YXRlLmhhc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBJdGVyYXRvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgaXRlcmF0b3IgPSBfYS5pdGVyYXRvciwgcHJvamVjdCA9IF9hLnByb2plY3QsIHRoaXNBcmcgPSBfYS50aGlzQXJnLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCB0aGlzQXJnOiB0aGlzQXJnLCBwcm9qZWN0OiBwcm9qZWN0LCBpdGVyYXRvcjogaXRlcmF0b3IsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkbyB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2gocHJvamVjdCkuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIGluZGV4KyspO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gd2hpbGUgKHRydWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gSXRlcmF0b3JPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuSXRlcmF0b3JPYnNlcnZhYmxlID0gSXRlcmF0b3JPYnNlcnZhYmxlO1xuXHR2YXIgU3RyaW5nSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Ioc3RyLCBpZHgsIGxlbikge1xuXHQgICAgICAgIGlmIChpZHggPT09IHZvaWQgMCkgeyBpZHggPSAwOyB9XG5cdCAgICAgICAgaWYgKGxlbiA9PT0gdm9pZCAwKSB7IGxlbiA9IHN0ci5sZW5ndGg7IH1cblx0ICAgICAgICB0aGlzLnN0ciA9IHN0cjtcblx0ICAgICAgICB0aGlzLmlkeCA9IGlkeDtcblx0ICAgICAgICB0aGlzLmxlbiA9IGxlbjtcblx0ICAgIH1cblx0ICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHRoaXMpOyB9O1xuXHQgICAgU3RyaW5nSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG5cdCAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdHIuY2hhckF0KHRoaXMuaWR4KyspXG5cdCAgICAgICAgfSA6IHtcblx0ICAgICAgICAgICAgZG9uZTogdHJ1ZSxcblx0ICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuXHQgICAgICAgIH07XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN0cmluZ0l0ZXJhdG9yO1xuXHR9KCkpO1xuXHR2YXIgQXJyYXlJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBBcnJheUl0ZXJhdG9yKGFyciwgaWR4LCBsZW4pIHtcblx0ICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuXHQgICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSB0b0xlbmd0aChhcnIpOyB9XG5cdCAgICAgICAgdGhpcy5hcnIgPSBhcnI7XG5cdCAgICAgICAgdGhpcy5pZHggPSBpZHg7XG5cdCAgICAgICAgdGhpcy5sZW4gPSBsZW47XG5cdCAgICB9XG5cdCAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcblx0ICAgIEFycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG5cdCAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTogdGhpcy5hcnJbdGhpcy5pZHgrK11cblx0ICAgICAgICB9IDoge1xuXHQgICAgICAgICAgICBkb25lOiB0cnVlLFxuXHQgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG5cdCAgICAgICAgfTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXJyYXlJdGVyYXRvcjtcblx0fSgpKTtcblx0ZnVuY3Rpb24gZ2V0SXRlcmF0b3Iob2JqKSB7XG5cdCAgICB2YXIgaSA9IG9ialtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdO1xuXHQgICAgaWYgKCFpICYmIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdJdGVyYXRvcihvYmopO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpICYmIG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcihvYmopO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9ialtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdKCk7XG5cdH1cblx0dmFyIG1heFNhZmVJbnRlZ2VyID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblx0ZnVuY3Rpb24gdG9MZW5ndGgobykge1xuXHQgICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcblx0ICAgIGlmIChpc05hTihsZW4pKSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICB9XG5cdCAgICBpZiAobGVuID09PSAwIHx8ICFudW1iZXJJc0Zpbml0ZShsZW4pKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlbjtcblx0ICAgIH1cblx0ICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG5cdCAgICBpZiAobGVuIDw9IDApIHtcblx0ICAgICAgICByZXR1cm4gMDtcblx0ICAgIH1cblx0ICAgIGlmIChsZW4gPiBtYXhTYWZlSW50ZWdlcikge1xuXHQgICAgICAgIHJldHVybiBtYXhTYWZlSW50ZWdlcjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBsZW47XG5cdH1cblx0ZnVuY3Rpb24gbnVtYmVySXNGaW5pdGUodmFsdWUpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHJvb3RfMS5yb290LmlzRmluaXRlKHZhbHVlKTtcblx0fVxuXHRmdW5jdGlvbiBzaWduKHZhbHVlKSB7XG5cdCAgICB2YXIgdmFsdWVBc051bWJlciA9ICt2YWx1ZTtcblx0ICAgIGlmICh2YWx1ZUFzTnVtYmVyID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG5cdCAgICB9XG5cdCAgICBpZiAoaXNOYU4odmFsdWVBc051bWJlcikpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWVBc051bWJlcjtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyIDwgMCA/IC0xIDogMTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1JdGVyYXRvck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXJyYXlMaWtlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hcnJheUxpa2UgPSBhcnJheUxpa2U7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKCFtYXBGbiAmJiAhc2NoZWR1bGVyICYmIGFycmF5TGlrZS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlID0gYXJyYXlMaWtlWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobWFwRm4pIHtcblx0ICAgICAgICAgICAgdGhpcy5tYXBGbiA9IG1hcEZuLmJpbmQodGhpc0FyZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG5cdCAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChsZW5ndGggPT09IDEgJiYgIW1hcEZuKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgYXJyYXlMaWtlID0gc3RhdGUuYXJyYXlMaWtlLCBpbmRleCA9IHN0YXRlLmluZGV4LCBsZW5ndGggPSBzdGF0ZS5sZW5ndGgsIG1hcEZuID0gc3RhdGUubWFwRm4sIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGluZGV4ID49IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2luZGV4XSwgaW5kZXgpIDogYXJyYXlMaWtlW2luZGV4XTtcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBBcnJheUxpa2VPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGFycmF5TGlrZSA9IF9hLmFycmF5TGlrZSwgbWFwRm4gPSBfYS5tYXBGbiwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShBcnJheUxpa2VPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG5cdCAgICAgICAgICAgICAgICBhcnJheUxpa2U6IGFycmF5TGlrZSwgaW5kZXg6IGluZGV4LCBsZW5ndGg6IGxlbmd0aCwgbWFwRm46IG1hcEZuLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2ldLCBpKSA6IGFycmF5TGlrZVtpXTtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEFycmF5TGlrZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5BcnJheUxpa2VPYnNlcnZhYmxlID0gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlMaWtlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE5vdGlmaWNhdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjEpO1xuXHQvKipcblx0ICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuXHQgKlxuXHQgKiBAcGFyYW0gc2NoZWR1bGVyXG5cdCAqIEBwYXJhbSBkZWxheVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCBvYnNlcnZlT25cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG9ic2VydmVPbihzY2hlZHVsZXIsIGRlbGF5KSB7XG5cdCAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpKTtcblx0fVxuXHRleHBvcnRzLm9ic2VydmVPbiA9IG9ic2VydmVPbjtcblx0dmFyIE9ic2VydmVPbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICB9XG5cdCAgICBPYnNlcnZlT25PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gT2JzZXJ2ZU9uT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuT2JzZXJ2ZU9uT3BlcmF0b3IgPSBPYnNlcnZlT25PcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoT2JzZXJ2ZU9uU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgfVxuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gYXJnLm5vdGlmaWNhdGlvbiwgZGVzdGluYXRpb24gPSBhcmcuZGVzdGluYXRpb247XG5cdCAgICAgICAgbm90aWZpY2F0aW9uLm9ic2VydmUoZGVzdGluYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTWVzc2FnZSA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcblx0ICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShPYnNlcnZlT25TdWJzY3JpYmVyLmRpc3BhdGNoLCB0aGlzLmRlbGF5LCBuZXcgT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIHRoaXMuZGVzdGluYXRpb24pKSk7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZXJyKSk7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gT2JzZXJ2ZU9uU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLk9ic2VydmVPblN1YnNjcmliZXIgPSBPYnNlcnZlT25TdWJzY3JpYmVyO1xuXHR2YXIgT2JzZXJ2ZU9uTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBPYnNlcnZlT25NZXNzYWdlKG5vdGlmaWNhdGlvbiwgZGVzdGluYXRpb24pIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICB9XG5cdCAgICByZXR1cm4gT2JzZXJ2ZU9uTWVzc2FnZTtcblx0fSgpKTtcblx0ZXhwb3J0cy5PYnNlcnZlT25NZXNzYWdlID0gT2JzZXJ2ZU9uTWVzc2FnZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2ZU9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQvKipcblx0ICogUmVwcmVzZW50cyBhIHB1c2gtYmFzZWQgZXZlbnQgb3IgdmFsdWUgdGhhdCBhbiB7QGxpbmsgT2JzZXJ2YWJsZX0gY2FuIGVtaXQuXG5cdCAqIFRoaXMgY2xhc3MgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igb3BlcmF0b3JzIHRoYXQgbWFuYWdlIG5vdGlmaWNhdGlvbnMsXG5cdCAqIGxpa2Uge0BsaW5rIG1hdGVyaWFsaXplfSwge0BsaW5rIGRlbWF0ZXJpYWxpemV9LCB7QGxpbmsgb2JzZXJ2ZU9ufSwgYW5kXG5cdCAqIG90aGVycy4gQmVzaWRlcyB3cmFwcGluZyB0aGUgYWN0dWFsIGRlbGl2ZXJlZCB2YWx1ZSwgaXQgYWxzbyBhbm5vdGF0ZXMgaXRcblx0ICogd2l0aCBtZXRhZGF0YSBvZiwgZm9yIGluc3RhbmNlLCB3aGF0IHR5cGUgb2YgcHVzaCBtZXNzYWdlIGl0IGlzIChgbmV4dGAsXG5cdCAqIGBlcnJvcmAsIG9yIGBjb21wbGV0ZWApLlxuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXRlcmlhbGl6ZX1cblx0ICogQHNlZSB7QGxpbmsgZGVtYXRlcmlhbGl6ZX1cblx0ICogQHNlZSB7QGxpbmsgb2JzZXJ2ZU9ufVxuXHQgKlxuXHQgKiBAY2xhc3MgTm90aWZpY2F0aW9uPFQ+XG5cdCAqL1xuXHR2YXIgTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbihraW5kLCB2YWx1ZSwgZXhjZXB0aW9uKSB7XG5cdCAgICAgICAgdGhpcy5raW5kID0ga2luZDtcblx0ICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgdGhpcy5leGNlcHRpb24gPSBleGNlcHRpb247XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09ICdOJztcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogRGVsaXZlcnMgdG8gdGhlIGdpdmVuIGBvYnNlcnZlcmAgdGhlIHZhbHVlIHdyYXBwZWQgYnkgdGhpcyBOb3RpZmljYXRpb24uXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlclxuXHQgICAgICogQHJldHVyblxuXHQgICAgICovXG5cdCAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcblx0ICAgICAgICBzd2l0Y2ggKHRoaXMua2luZCkge1xuXHQgICAgICAgICAgICBjYXNlICdOJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5uZXh0ICYmIG9ic2VydmVyLm5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKHRoaXMuZXhjZXB0aW9uKTtcblx0ICAgICAgICAgICAgY2FzZSAnQyc6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuY29tcGxldGUgJiYgb2JzZXJ2ZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBHaXZlbiBzb21lIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2tzLCBkZWxpdmVyIHRoZSB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGVcblx0ICAgICAqIGN1cnJlbnQgTm90aWZpY2F0aW9uIHRvIHRoZSBjb3JyZWN0bHkgY29ycmVzcG9uZGluZyBjYWxsYmFjay5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiB2b2lkfSBuZXh0IEFuIE9ic2VydmVyIGBuZXh0YCBjYWxsYmFjay5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gQW4gT2JzZXJ2ZXIgYGNvbXBsZXRlYCBjYWxsYmFjay5cblx0ICAgICAqIEByZXR1cm4ge2FueX1cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5kbyA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcblx0ICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcblx0ICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcblx0ICAgICAgICAgICAgY2FzZSAnTic6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCAmJiBuZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgICAgICAgICBjYXNlICdFJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBlcnJvciAmJiBlcnJvcih0aGlzLmV4Y2VwdGlvbik7XG5cdCAgICAgICAgICAgIGNhc2UgJ0MnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogVGFrZXMgYW4gT2JzZXJ2ZXIgb3IgaXRzIGluZGl2aWR1YWwgY2FsbGJhY2sgZnVuY3Rpb25zLCBhbmQgY2FsbHMgYG9ic2VydmVgXG5cdCAgICAgKiBvciBgZG9gIG1ldGhvZHMgYWNjb3JkaW5nbHkuXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dE9yT2JzZXJ2ZXIgQW4gT2JzZXJ2ZXIgb3Jcblx0ICAgICAqIHRoZSBgbmV4dGAgY2FsbGJhY2suXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVycjogYW55KTogdm9pZH0gW2Vycm9yXSBBbiBPYnNlcnZlciBgZXJyb3JgIGNhbGxiYWNrLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG5cdCAgICAgKiBAcmV0dXJuIHthbnl9XG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcblx0ICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgJiYgdHlwZW9mIG5leHRPck9ic2VydmVyLm5leHQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZShuZXh0T3JPYnNlcnZlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5kbyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm5zIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb24gcmVwcmVzZW50ZWRcblx0ICAgICAqIGJ5IHRoaXMgTm90aWZpY2F0aW9uIGluc3RhbmNlLlxuXHQgICAgICogQHJldHVybiB7YW55fVxuXHQgICAgICovXG5cdCAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcblx0ICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcblx0ICAgICAgICAgICAgY2FzZSAnTic6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUub2YodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgIGNhc2UgJ0UnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRocm93KHRoaXMuZXhjZXB0aW9uKTtcblx0ICAgICAgICAgICAgY2FzZSAnQyc6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZW1wdHkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgbmV4dGAgZnJvbSBhXG5cdCAgICAgKiBnaXZlbiB2YWx1ZS5cblx0ICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cblx0ICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxUPn0gVGhlIFwibmV4dFwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG5cdCAgICAgKiBhcmd1bWVudC5cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignTicsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb247XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgZXJyb3JgIGZyb20gYVxuXHQgICAgICogZ2l2ZW4gZXJyb3IuXG5cdCAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXhjZXB0aW9uLlxuXHQgICAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uPFQ+fSBUaGUgXCJlcnJvclwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG5cdCAgICAgKiBhcmd1bWVudC5cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnIpO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGNvbXBsZXRlYC5cblx0ICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxhbnk+fSBUaGUgdmFsdWVsZXNzIFwiY29tcGxldGVcIiBOb3RpZmljYXRpb24uXG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZU5vdGlmaWNhdGlvbjtcblx0ICAgIH07XG5cdCAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG5cdCAgICBOb3RpZmljYXRpb24udW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdOJywgdW5kZWZpbmVkKTtcblx0ICAgIHJldHVybiBOb3RpZmljYXRpb247XG5cdH0oKSk7XG5cdGV4cG9ydHMuTm90aWZpY2F0aW9uID0gTm90aWZpY2F0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Ob3RpZmljYXRpb24uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBmcm9tRXZlbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnJvbUV2ZW50XzEuZnJvbUV2ZW50O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRnJvbUV2ZW50T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHRleHBvcnRzLmZyb21FdmVudCA9IEZyb21FdmVudE9ic2VydmFibGVfMS5Gcm9tRXZlbnRPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0ZnVuY3Rpb24gaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHR5cGVvZiBzb3VyY2VPYmouYWRkTGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRmdW5jdGlvbiBpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHR5cGVvZiBzb3VyY2VPYmoub24gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5vZmYgPT09ICdmdW5jdGlvbic7XG5cdH1cblx0ZnVuY3Rpb24gaXNOb2RlTGlzdChzb3VyY2VPYmopIHtcblx0ICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiBzb3VyY2VPYmoudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgTm9kZUxpc3RdJztcblx0fVxuXHRmdW5jdGlvbiBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHNvdXJjZU9iai50b1N0cmluZygpID09PSAnW29iamVjdCBIVE1MQ29sbGVjdGlvbl0nO1xuXHR9XG5cdGZ1bmN0aW9uIGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSB7XG5cdCAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3VyY2VPYmoucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBGcm9tRXZlbnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRnJvbUV2ZW50T2JzZXJ2YWJsZShzb3VyY2VPYmosIGV2ZW50TmFtZSwgc2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNvdXJjZU9iaiA9IHNvdXJjZU9iajtcblx0ICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgY29taW5nIGZyb20gdGhlXG5cdCAgICAgKiBnaXZlbiBldmVudCB0YXJnZXQuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNyZWF0ZXMgYW4gT2JzZXJ2YWJsZSBmcm9tIERPTSBldmVudHMsIG9yIE5vZGVcblx0ICAgICAqIEV2ZW50RW1pdHRlciBldmVudHMgb3Igb3RoZXJzLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgYnkgYXR0YWNoaW5nIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGFuIFwiZXZlbnQgdGFyZ2V0XCIsXG5cdCAgICAgKiB3aGljaCBtYXkgYmUgYW4gb2JqZWN0IHdpdGggYGFkZEV2ZW50TGlzdGVuZXJgIGFuZCBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAsXG5cdCAgICAgKiBhIE5vZGUuanMgRXZlbnRFbWl0dGVyLCBhIGpRdWVyeSBzdHlsZSBFdmVudEVtaXR0ZXIsIGEgTm9kZUxpc3QgZnJvbSB0aGVcblx0ICAgICAqIERPTSwgb3IgYW4gSFRNTENvbGxlY3Rpb24gZnJvbSB0aGUgRE9NLiBUaGUgZXZlbnQgaGFuZGxlciBpcyBhdHRhY2hlZCB3aGVuXG5cdCAgICAgKiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIHJlbW92ZWQgd2hlbiB0aGUgU3Vic2NyaXB0aW9uIGlzXG5cdCAgICAgKiB1bnN1YnNjcmliZWQuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuXHQgICAgICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICAgICAqIGNsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudFBhdHRlcm59XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtFdmVudFRhcmdldExpa2V9IHRhcmdldCBUaGUgRE9NRWxlbWVudCwgZXZlbnQgdGFyZ2V0LCBOb2RlLmpzXG5cdCAgICAgKiBFdmVudEVtaXR0ZXIsIE5vZGVMaXN0IG9yIEhUTUxDb2xsZWN0aW9uIHRvIGF0dGFjaCB0aGUgZXZlbnQgaGFuZGxlciB0by5cblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgb2YgaW50ZXJlc3QsIGJlaW5nIGVtaXR0ZWQgYnkgdGhlXG5cdCAgICAgKiBgdGFyZ2V0YC5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYXJnczogYW55KTogVH0gW3NlbGVjdG9yXSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0b1xuXHQgICAgICogcG9zdC1wcm9jZXNzIHJlc3VsdHMuIEl0IHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciBhbmRcblx0ICAgICAqIHNob3VsZCByZXR1cm4gYSBzaW5nbGUgdmFsdWUuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fVxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBmcm9tRXZlbnRcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHRhcmdldCwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnJvbUV2ZW50T2JzZXJ2YWJsZSh0YXJnZXQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpO1xuXHQgICAgfTtcblx0ICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc291cmNlT2JqLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgdW5zdWJzY3JpYmU7XG5cdCAgICAgICAgaWYgKGlzTm9kZUxpc3Qoc291cmNlT2JqKSB8fCBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZU9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmpbaV0sIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNFdmVudFRhcmdldChzb3VyY2VPYmopKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cdCAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZU9iai5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuXHQgICAgICAgICAgICB1bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvdXJjZU9iai5vZmYoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikpIHtcblx0ICAgICAgICAgICAgc291cmNlT2JqLmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cdCAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpKTtcblx0ICAgIH07XG5cdCAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgc291cmNlT2JqID0gdGhpcy5zb3VyY2VPYmo7XG5cdCAgICAgICAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuZXZlbnROYW1lO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBzZWxlY3RvciA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBzdWJzY3JpYmVyLm5leHQoZSk7IH07XG5cdCAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmosIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZyb21FdmVudE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Gcm9tRXZlbnRPYnNlcnZhYmxlID0gRnJvbUV2ZW50T2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbUV2ZW50T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZyb21FdmVudFBhdHRlcm5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybiA9IGZyb21FdmVudFBhdHRlcm5fMS5mcm9tRXZlbnRQYXR0ZXJuO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Nyk7XG5cdGV4cG9ydHMuZnJvbUV2ZW50UGF0dGVybiA9IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmFkZEhhbmRsZXIgPSBhZGRIYW5kbGVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XG5cdCAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBUEkgYmFzZWQgb24gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyXG5cdCAgICAgKiBmdW5jdGlvbnMuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFueSBhZGRIYW5kbGVyL3JlbW92ZUhhbmRsZXIgQVBJIHRvIGFuXG5cdCAgICAgKiBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudFBhdHRlcm4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAgICAgKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGJ5IHVzaW5nIHRoZSBgYWRkSGFuZGxlcmAgYW5kIGByZW1vdmVIYW5kbGVyYFxuXHQgICAgICogZnVuY3Rpb25zIHRvIGFkZCBhbmQgcmVtb3ZlIHRoZSBoYW5kbGVycywgd2l0aCBhbiBvcHRpb25hbCBzZWxlY3RvclxuXHQgICAgICogZnVuY3Rpb24gdG8gcHJvamVjdCB0aGUgZXZlbnQgYXJndW1lbnRzIHRvIGEgcmVzdWx0LiBUaGUgYGFkZEhhbmRsZXJgIGlzXG5cdCAgICAgKiBjYWxsZWQgd2hlbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIGByZW1vdmVIYW5kbGVyYCBpc1xuXHQgICAgICogY2FsbGVkIHdoZW4gdGhlIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuXHQgICAgICogZnVuY3Rpb24gYWRkQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcblx0ICAgICAqICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVyKTtcblx0ICAgICAqIH1cblx0ICAgICAqXG5cdCAgICAgKiBmdW5jdGlvbiByZW1vdmVDbGlja0hhbmRsZXIoaGFuZGxlcikge1xuXHQgICAgICogICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuXHQgICAgICogfVxuXHQgICAgICpcblx0ICAgICAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4oXG5cdCAgICAgKiAgIGFkZENsaWNrSGFuZGxlcixcblx0ICAgICAqICAgcmVtb3ZlQ2xpY2tIYW5kbGVyXG5cdCAgICAgKiApO1xuXHQgICAgICogY2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50fVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaGFuZGxlcjogRnVuY3Rpb24pOiBhbnl9IGFkZEhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG5cdCAgICAgKiBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgYXR0YWNoZXMgaXQgc29tZWhvdyB0byB0aGUgYWN0dWFsXG5cdCAgICAgKiBzb3VyY2Ugb2YgZXZlbnRzLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbihoYW5kbGVyOiBGdW5jdGlvbik6IHZvaWR9IHJlbW92ZUhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0XG5cdCAgICAgKiB0YWtlcyBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgcmVtb3ZlcyBpdCBpbiBjYXNlIGl0IHdhc1xuXHQgICAgICogcHJldmlvdXNseSBhdHRhY2hlZCB1c2luZyBgYWRkSGFuZGxlcmAuXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFyZ3M6IGFueSk6IFR9IFtzZWxlY3Rvcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG9cblx0ICAgICAqIHBvc3QtcHJvY2VzcyByZXN1bHRzLiBJdCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgYW5kXG5cdCAgICAgKiBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHZhbHVlLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn1cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgZnJvbUV2ZW50UGF0dGVyblxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcik7XG5cdCAgICB9O1xuXHQgICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBhZGRIYW5kbGVyID0gdGhpcy5hZGRIYW5kbGVyO1xuXHQgICAgICAgIHZhciByZW1vdmVIYW5kbGVyID0gdGhpcy5yZW1vdmVIYW5kbGVyO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBzZWxlY3RvciA/IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHJlc3VsdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHN1YnNjcmliZXIubmV4dChlKTsgfTtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChhZGRIYW5kbGVyKShoYW5kbGVyKTtcblx0ICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IocmVzdWx0LmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgLy9UT0RPOiBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyXG5cdCAgICAgICAgICAgIHJlbW92ZUhhbmRsZXIoaGFuZGxlcik7XG5cdCAgICAgICAgfSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZnJvbVByb21pc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmcm9tUHJvbWlzZV8xLmZyb21Qcm9taXNlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tUHJvbWlzZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdGV4cG9ydHMuZnJvbVByb21pc2UgPSBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBHZW5lcmF0ZU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzcxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZ2VuZXJhdGUgPSBHZW5lcmF0ZU9ic2VydmFibGVfMS5HZW5lcmF0ZU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1nZW5lcmF0ZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdHZhciBzZWxmU2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBHZW5lcmF0ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEdlbmVyYXRlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuaW5pdGlhbFN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXHQgICAgICAgIHRoaXMuY29uZGl0aW9uID0gY29uZGl0aW9uO1xuXHQgICAgICAgIHRoaXMuaXRlcmF0ZSA9IGl0ZXJhdGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgR2VuZXJhdGVPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlT3JPcHRpb25zLmluaXRpYWxTdGF0ZSwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLmNvbmRpdGlvbiwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLml0ZXJhdGUsIGluaXRpYWxTdGF0ZU9yT3B0aW9ucy5yZXN1bHRTZWxlY3RvciB8fCBzZWxmU2VsZWN0b3IsIGluaXRpYWxTdGF0ZU9yT3B0aW9ucy5zY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUgPT09IHVuZGVmaW5lZCB8fCBpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgc2VsZlNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZU9yT3B0aW9ucywgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBHZW5lcmF0ZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuXHQgICAgICAgIGlmICh0aGlzLnNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoR2VuZXJhdGVPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLFxuXHQgICAgICAgICAgICAgICAgaXRlcmF0ZTogdGhpcy5pdGVyYXRlLFxuXHQgICAgICAgICAgICAgICAgY29uZGl0aW9uOiB0aGlzLmNvbmRpdGlvbixcblx0ICAgICAgICAgICAgICAgIHJlc3VsdFNlbGVjdG9yOiB0aGlzLnJlc3VsdFNlbGVjdG9yLFxuXHQgICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCBjb25kaXRpb24gPSBfYS5jb25kaXRpb24sIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGl0ZXJhdGUgPSBfYS5pdGVyYXRlO1xuXHQgICAgICAgIGRvIHtcblx0ICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvblJlc3VsdCA9IHZvaWQgMDtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gY29uZGl0aW9uKHN0YXRlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb25SZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRTZWxlY3RvcihzdGF0ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgc3RhdGUgPSBpdGVyYXRlKHN0YXRlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IHdoaWxlICh0cnVlKTtcblx0ICAgIH07XG5cdCAgICBHZW5lcmF0ZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIGNvbmRpdGlvbiA9IHN0YXRlLmNvbmRpdGlvbjtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzdGF0ZS5uZWVkSXRlcmF0ZSkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgc3RhdGUuc3RhdGUgPSBzdGF0ZS5pdGVyYXRlKHN0YXRlLnN0YXRlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN0YXRlLm5lZWRJdGVyYXRlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuXHQgICAgICAgICAgICB2YXIgY29uZGl0aW9uUmVzdWx0ID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gY29uZGl0aW9uKHN0YXRlLnN0YXRlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKCFjb25kaXRpb25SZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB2YWx1ZTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IHN0YXRlLnJlc3VsdFNlbGVjdG9yKHN0YXRlLnN0YXRlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBHZW5lcmF0ZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5HZW5lcmF0ZU9ic2VydmFibGUgPSBHZW5lcmF0ZU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlbmVyYXRlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGludGVydmFsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmludGVydmFsID0gaW50ZXJ2YWxfMS5pbnRlcnZhbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJ2YWwuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgSW50ZXJ2YWxPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3NCk7XG5cdGV4cG9ydHMuaW50ZXJ2YWwgPSBJbnRlcnZhbE9ic2VydmFibGVfMS5JbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc051bWVyaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc1KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgSW50ZXJ2YWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhJbnRlcnZhbE9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJbnRlcnZhbE9ic2VydmFibGUocGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAocGVyaW9kID09PSB2b2lkIDApIHsgcGVyaW9kID0gMDsgfVxuXHQgICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wZXJpb2QgPSBwZXJpb2Q7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKCFpc051bWVyaWNfMS5pc051bWVyaWMocGVyaW9kKSB8fCBwZXJpb2QgPCAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMucGVyaW9kID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBzZXF1ZW50aWFsIG51bWJlcnMgZXZlcnkgc3BlY2lmaWVkXG5cdCAgICAgKiBpbnRlcnZhbCBvZiB0aW1lLCBvbiBhIHNwZWNpZmllZCBTY2hlZHVsZXIuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGluY3JlbWVudGFsIG51bWJlcnMgcGVyaW9kaWNhbGx5IGluIHRpbWUuXG5cdCAgICAgKiA8L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogPGltZyBzcmM9XCIuL2ltZy9pbnRlcnZhbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBgaW50ZXJ2YWxgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFuIGluZmluaXRlIHNlcXVlbmNlIG9mXG5cdCAgICAgKiBhc2NlbmRpbmcgaW50ZWdlcnMsIHdpdGggYSBjb25zdGFudCBpbnRlcnZhbCBvZiB0aW1lIG9mIHlvdXIgY2hvb3Npbmdcblx0ICAgICAqIGJldHdlZW4gdGhvc2UgZW1pc3Npb25zLiBUaGUgZmlyc3QgZW1pc3Npb24gaXMgbm90IHNlbnQgaW1tZWRpYXRlbHksIGJ1dFxuXHQgICAgICogb25seSBhZnRlciB0aGUgZmlyc3QgcGVyaW9kIGhhcyBwYXNzZWQuIEJ5IGRlZmF1bHQsIHRoaXMgb3BlcmF0b3IgdXNlcyB0aGVcblx0ICAgICAqIGBhc3luY2AgU2NoZWR1bGVyIHRvIHByb3ZpZGUgYSBub3Rpb24gb2YgdGltZSwgYnV0IHlvdSBtYXkgcGFzcyBhbnlcblx0ICAgICAqIFNjaGVkdWxlciB0byBpdC5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBhc2NlbmRpbmcgbnVtYmVycywgb25lIGV2ZXJ5IHNlY29uZCAoMTAwMG1zKTwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIHRpbWVyfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZGVsYXl9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ9IFtwZXJpb2Q9MF0gVGhlIGludGVydmFsIHNpemUgaW4gbWlsbGlzZWNvbmRzIChieSBkZWZhdWx0KVxuXHQgICAgICogb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGJ5IHRoZSBzY2hlZHVsZXIncyBjbG9jay5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuXHQgICAgICogdGhlIGVtaXNzaW9uIG9mIHZhbHVlcywgYW5kIHByb3ZpZGluZyBhIG5vdGlvbiBvZiBcInRpbWVcIi5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhIHNlcXVlbnRpYWwgbnVtYmVyIGVhY2ggdGltZVxuXHQgICAgICogaW50ZXJ2YWwuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGludGVydmFsXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBJbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHBlcmlvZCA9PT0gdm9pZCAwKSB7IHBlcmlvZCA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWxPYnNlcnZhYmxlKHBlcmlvZCwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBJbnRlcnZhbE9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZDtcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5kZXgpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUuaW5kZXggKz0gMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xuXHQgICAgfTtcblx0ICAgIEludGVydmFsT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgcGVyaW9kID0gdGhpcy5wZXJpb2Q7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShJbnRlcnZhbE9ic2VydmFibGUuZGlzcGF0Y2gsIHBlcmlvZCwge1xuXHQgICAgICAgICAgICBpbmRleDogaW5kZXgsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIHBlcmlvZDogcGVyaW9kXG5cdCAgICAgICAgfSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBJbnRlcnZhbE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5JbnRlcnZhbE9ic2VydmFibGUgPSBJbnRlcnZhbE9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVydmFsT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBpc0FycmF5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0ZnVuY3Rpb24gaXNOdW1lcmljKHZhbCkge1xuXHQgICAgLy8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuXHQgICAgLy8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHQgICAgLy8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdCAgICAvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcblx0ICAgIHJldHVybiAhaXNBcnJheV8xLmlzQXJyYXkodmFsKSAmJiAodmFsIC0gcGFyc2VGbG9hdCh2YWwpICsgMSkgPj0gMDtcblx0fVxuXHRleHBvcnRzLmlzTnVtZXJpYyA9IGlzTnVtZXJpYztcblx0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc051bWVyaWMuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXN5bmNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc3KTtcblx0ZXhwb3J0cy5hc3luYyA9IG5ldyBBc3luY1NjaGVkdWxlcl8xLkFzeW5jU2NoZWR1bGVyKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzgpO1xuXHR2YXIgUXVldWVTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc5KTtcblx0dmFyIEFzeW5jU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc3luY1NjaGVkdWxlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFzeW5jU2NoZWR1bGVyKCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgQXN5bmNTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlTm93ID0gZnVuY3Rpb24gKHdvcmssIHN0YXRlKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUsIDApO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBc3luY1NjaGVkdWxlcjtcblx0fShRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKSk7XG5cdGV4cG9ydHMuQXN5bmNTY2hlZHVsZXIgPSBBc3luY1NjaGVkdWxlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTY2hlZHVsZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGdXR1cmVBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZ1dHVyZUFjdGlvbiwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZ1dHVyZUFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLndvcmsgPSB3b3JrO1xuXHQgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBuZXcgRXJyb3IoJ2V4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb24nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLndvcmsodGhpcy5zdGF0ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgLy8gQWx3YXlzIHJlcGxhY2UgdGhlIGN1cnJlbnQgc3RhdGUgd2l0aCB0aGUgbmV3IHN0YXRlLlxuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgICAvLyBTZXQgdGhlIHBlbmRpbmcgZmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhpcyBhY3Rpb24gaGFzIGJlZW4gc2NoZWR1bGVkLCBvclxuXHQgICAgICAgIC8vIGhhcyByZWN1cnNpdmVseSByZXNjaGVkdWxlZCBpdHNlbGYuXG5cdCAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuXHQgICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElEIGFuZCB0aGUgc3BlY2lmaWVkIGRlbGF5IG1hdGNoZXMgdGhlXG5cdCAgICAgICAgLy8gZGVsYXkgd2UgdXNlZCB0byBjcmVhdGUgdGhlIGludGVydmFsSUQsIGRvbid0IGNhbGwgYHNldEludGVydmFsYCBhZ2Fpbi5cblx0ICAgICAgICBpZiAoaWQgIT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBkZWxheSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElELCBidXQgd2FzIHJlc2NoZWR1bGVkIHdpdGggYSBkaWZmZXJlbnRcblx0ICAgICAgICAvLyBgZGVsYXlgIHRpbWUsIGNhbmNlbCB0aGUgY3VycmVudCBpbnRlcnZhbElEIGFuZCBjYWxsIGBzZXRJbnRlcnZhbGAgd2l0aFxuXHQgICAgICAgIC8vIHRoZSBuZXcgYGRlbGF5YCB0aW1lLlxuXHQgICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRoaXMuaWQgPSBudWxsO1xuXHQgICAgICAgICAgICByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBJbXBvcnRhbnQgaW1wbGVtZW50YXRpb24gbm90ZTpcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEJ5IGRlZmF1bHQsIEZ1dHVyZUFjdGlvbiBvbmx5IGV4ZWN1dGVzIG9uY2UuIEhvd2V2ZXIsIEFjdGlvbnMgaGF2ZSB0aGVcblx0ICAgICAgICAvLyBhYmlsaXR5IHRvIGJlIHJlc2NoZWR1bGVkIGZyb20gd2l0aGluIHRoZSBzY2hlZHVsZWQgY2FsbGJhY2sgKG1pbWlja2luZ1xuXHQgICAgICAgIC8vIHJlY3Vyc2lvbiBmb3IgYXN5bmNocm9ub3VzIG1ldGhvZHMpLiBUaGlzIGFsbG93cyB1cyB0byBpbXBsZW1lbnQgc2luZ2xlXG5cdCAgICAgICAgLy8gYW5kIHJlcGVhdGVkIGFjdGlvbnMgd2l0aCB0aGUgc2FtZSBjb2RlIHBhdGggd2l0aG91dCBhZGRpbmcgQVBJIHN1cmZhY2Vcblx0ICAgICAgICAvLyBhcmVhLCBhbmQgaW1wbGVtZW50IHRhaWwtY2FsbCBvcHRpbWl6YXRpb24gb3ZlciBhc3luY2hyb25vdXMgYm91bmRhcmllcy5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEhvd2V2ZXIsIEpTIHJ1bnRpbWVzIG1ha2UgYSBkaXN0aW5jdGlvbiBiZXR3ZWVuIGludGVydmFscyBzY2hlZHVsZWQgYnlcblx0ICAgICAgICAvLyByZXBlYXRlZGx5IGNhbGxpbmcgYHNldFRpbWVvdXRgIHZzLiBhIHNpbmdsZSBgc2V0SW50ZXJ2YWxgIGNhbGwsIHdpdGhcblx0ICAgICAgICAvLyB0aGUgbGF0dGVyIHByb3ZpZGluZyBhIGJldHRlciBndWFyYW50ZWUgb2YgcHJlY2lzaW9uLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjb21tb2RhdGUgYm90aCBzaW5nbGUgYW5kIHJlcGVhdGVkbHkgcmVzY2hlZHVsZWQgYWN0aW9ucyxcblx0ICAgICAgICAvLyB1c2UgYHNldEludGVydmFsYCBoZXJlIGZvciBib3RoIGNhc2VzLiBCeSBkZWZhdWx0LCB0aGUgaW50ZXJ2YWwgd2lsbCBiZVxuXHQgICAgICAgIC8vIGNhbmNlbGVkIGFmdGVyIGl0cyBmaXJzdCBleGVjdXRpb24sIG9yIGlmIHRoZSBhY3Rpb24gc2NoZWR1bGVzIGl0c2VsZiB0b1xuXHQgICAgICAgIC8vIHJ1biBhZ2FpbiB3aXRoIGEgZGlmZmVyZW50IGBkZWxheWAgdGltZS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIElmIHRoZSBhY3Rpb24gcmVjdXJzaXZlbHkgc2NoZWR1bGVzIGl0c2VsZiB0byBydW4gYWdhaW4gd2l0aCB0aGUgc2FtZVxuXHQgICAgICAgIC8vIGBkZWxheWAgdGltZSwgdGhlIGludGVydmFsIGlzIG5vdCBjYW5jZWxlZCwgYnV0IGFsbG93ZWQgdG8gbG9vcCBhZ2Fpbi5cblx0ICAgICAgICAvLyBUaGUgY2hlY2sgb2Ygd2hldGhlciB0aGUgaW50ZXJ2YWwgc2hvdWxkIGJlIGNhbmNlbGVkIG9yIG5vdCBpcyBydW4gZXZlcnlcblx0ICAgICAgICAvLyB0aW1lIHRoZSBpbnRlcnZhbCBpcyBleGVjdXRlZC4gVGhlIGZpcnN0IHRpbWUgYW4gYWN0aW9uIGZhaWxzIHRvXG5cdCAgICAgICAgLy8gcmVzY2hlZHVsZSBpdHNlbGYsIHRoZSBpbnRlcnZhbCBpcyBjYW5jZWxlZC5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIHRoaXMuaWQgPSByb290XzEucm9vdC5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnBlbmRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyLmFjdGlvbnMucHVzaChfdGhpcyk7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgICAgICAvL1xuXHQgICAgICAgICAgICAvLyBUZXJtaW5hdGUgdGhpcyBpbnRlcnZhbCBpZiB0aGUgYWN0aW9uIGRpZG4ndCByZXNjaGVkdWxlIGl0c2VsZi5cblx0ICAgICAgICAgICAgLy8gRG9uJ3QgY2FsbCBgdGhpcy51bnN1YnNjcmliZSgpYCBoZXJlLCBiZWNhdXNlIHRoZSBhY3Rpb24gY291bGQgYmVcblx0ICAgICAgICAgICAgLy8gcmVzY2hlZHVsZWQgbGF0ZXIuIEZvciBleGFtcGxlOlxuXHQgICAgICAgICAgICAvL1xuXHQgICAgICAgICAgICAvLyBgYGBcblx0ICAgICAgICAgICAgLy8gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uIGRvV29yayhjb3VudGVyKSB7XG5cdCAgICAgICAgICAgIC8vICAgLyogLi4uIEknbSBhIGJ1c3kgd29ya2VyIGJlZSAuLi4gKi9cblx0ICAgICAgICAgICAgLy8gICB2YXIgb3JpZ2luYWxBY3Rpb24gPSB0aGlzO1xuXHQgICAgICAgICAgICAvLyAgIC8qIHdhaXQgMTAwbXMgYmVmb3JlIHJlc2NoZWR1bGluZyB0aGlzIGFjdGlvbiBhZ2FpbiAqL1xuXHQgICAgICAgICAgICAvLyAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyAgICAgb3JpZ2luYWxBY3Rpb24uc2NoZWR1bGUoY291bnRlciArIDEpO1xuXHQgICAgICAgICAgICAvLyAgIH0sIDEwMCk7XG5cdCAgICAgICAgICAgIC8vIH0sIDEwMDApO1xuXHQgICAgICAgICAgICAvLyBgYGBcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmcgPT09IGZhbHNlICYmIGlkICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIF90aGlzLmlkID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZGVsYXkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuXHQgICAgICAgIHZhciBpbmRleCA9IGFjdGlvbnMuaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICB0aGlzLmlkID0gbnVsbDtcblx0ICAgICAgICAgICAgcm9vdF8xLnJvb3QuY2xlYXJJbnRlcnZhbChpZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRnV0dXJlQWN0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHRleHBvcnRzLkZ1dHVyZUFjdGlvbiA9IEZ1dHVyZUFjdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnV0dXJlQWN0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFF1ZXVlQWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4MCk7XG5cdHZhciBGdXR1cmVBY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc4KTtcblx0dmFyIFF1ZXVlU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFF1ZXVlU2NoZWR1bGVyKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5hY3Rpb25zID0gW107IC8vIFhYWDogdXNlIGBhbnlgIHRvIHJlbW92ZSB0eXBlIHBhcmFtIGBUYCBmcm9tIGBWaXJ0dWFsVGltZVNjaGVkdWxlcmAuXG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZWRJZCA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgfHwgdGhpcy5zY2hlZHVsZWRJZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcblx0ICAgICAgICAvLyBYWFg6IHVzZSBgYW55YCB0byByZW1vdmUgdHlwZSBwYXJhbSBgVGAgZnJvbSBgVmlydHVhbFRpbWVTY2hlZHVsZXJgLlxuXHQgICAgICAgIGZvciAodmFyIGFjdGlvbiA9IG51bGw7IGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKTspIHtcblx0ICAgICAgICAgICAgYWN0aW9uLmV4ZWN1dGUoKTtcblx0ICAgICAgICAgICAgaWYgKGFjdGlvbi5lcnJvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIHRocm93IGFjdGlvbi5lcnJvcjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICByZXR1cm4gKGRlbGF5IDw9IDApID9cblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU5vdyh3b3JrLCBzdGF0ZSkgOlxuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlTGF0ZXIod29yaywgZGVsYXksIHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFF1ZXVlQWN0aW9uXzEuUXVldWVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUxhdGVyID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFF1ZXVlU2NoZWR1bGVyO1xuXHR9KCkpO1xuXHRleHBvcnRzLlF1ZXVlU2NoZWR1bGVyID0gUXVldWVTY2hlZHVsZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlU2NoZWR1bGVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzgpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBRdWV1ZUFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUXVldWVBY3Rpb24sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBRdWV1ZUFjdGlvbigpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIFF1ZXVlQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuXHQgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBRdWV1ZUFjdGlvbjtcblx0fShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcblx0ZXhwb3J0cy5RdWV1ZUFjdGlvbiA9IFF1ZXVlQWN0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1RdWV1ZUFjdGlvbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1lcmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4Mik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm1lcmdlID0gbWVyZ2VfMS5tZXJnZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgbWVyZ2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgzKTtcblx0ZXhwb3J0cy5tZXJnZSA9IG1lcmdlXzEubWVyZ2VTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgbWVyZ2VBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ2KTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIGNvbmN1cnJlbnRseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcblx0ICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IGJsZW5kaW5nXG5cdCAqIHRoZWlyIHZhbHVlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYG1lcmdlYCBzdWJzY3JpYmVzIHRvIGVhY2ggZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSAoZWl0aGVyIHRoZSBzb3VyY2Ugb3IgYW5cblx0ICogT2JzZXJ2YWJsZSBnaXZlbiBhcyBhcmd1bWVudCksIGFuZCBzaW1wbHkgZm9yd2FyZHMgKHdpdGhvdXQgZG9pbmcgYW55XG5cdCAqIHRyYW5zZm9ybWF0aW9uKSBhbGwgdGhlIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5wdXQgT2JzZXJ2YWJsZXMgdG8gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgb25seSBjb21wbGV0ZXMgb25jZSBhbGwgaW5wdXQgT2JzZXJ2YWJsZXNcblx0ICogaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnkgYW4gaW5wdXQgT2JzZXJ2YWJsZSB3aWxsIGJlIGltbWVkaWF0ZWx5XG5cdCAqIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciB0d28gT2JzZXJ2YWJsZXM6IDFzIGludGVydmFsIGFuZCBjbGlja3M8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBjbGlja3NPclRpbWVyID0gY2xpY2tzLm1lcmdlKHRpbWVyKTtcblx0ICogY2xpY2tzT3JUaW1lci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIDMgT2JzZXJ2YWJsZXMsIGJ1dCBvbmx5IDIgcnVuIGNvbmN1cnJlbnRseTwvY2FwdGlvbj5cblx0ICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG5cdCAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG5cdCAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG5cdCAqIHZhciBjb25jdXJyZW50ID0gMjsgLy8gdGhlIGFyZ3VtZW50XG5cdCAqIHZhciBtZXJnZWQgPSB0aW1lcjEubWVyZ2UodGltZXIyLCB0aW1lcjMsIGNvbmN1cnJlbnQpO1xuXHQgKiBtZXJnZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcblx0ICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZ1xuXHQgKiBjb25jdXJyZW5jeSBvZiBpbnB1dCBPYnNlcnZhYmxlcy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIHRoYXQgYXJlIHRoZSByZXN1bHQgb2Zcblx0ICogZXZlcnkgaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBtZXJnZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2UoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICBvYnNlcnZhYmxlcy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgcmV0dXJuIG1lcmdlU3RhdGljLmFwcGx5KHRoaXMsIG9ic2VydmFibGVzKTtcblx0fVxuXHRleHBvcnRzLm1lcmdlID0gbWVyZ2U7XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIGNvbmN1cnJlbnRseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcblx0ICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IGJsZW5kaW5nXG5cdCAqIHRoZWlyIHZhbHVlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYG1lcmdlYCBzdWJzY3JpYmVzIHRvIGVhY2ggZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSAoYXMgYXJndW1lbnRzKSwgYW5kIHNpbXBseVxuXHQgKiBmb3J3YXJkcyAod2l0aG91dCBkb2luZyBhbnkgdHJhbnNmb3JtYXRpb24pIGFsbCB0aGUgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IGNvbXBsZXRlc1xuXHQgKiBvbmNlIGFsbCBpbnB1dCBPYnNlcnZhYmxlcyBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieSBhbiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIHR3byBPYnNlcnZhYmxlczogMXMgaW50ZXJ2YWwgYW5kIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrc09yVGltZXIgPSBSeC5PYnNlcnZhYmxlLm1lcmdlKGNsaWNrcywgdGltZXIpO1xuXHQgKiBjbGlja3NPclRpbWVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgMyBPYnNlcnZhYmxlcywgYnV0IG9ubHkgMiBydW4gY29uY3VycmVudGx5PC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcblx0ICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcblx0ICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcblx0ICogdmFyIGNvbmN1cnJlbnQgPSAyOyAvLyB0aGUgYXJndW1lbnRcblx0ICogdmFyIG1lcmdlZCA9IFJ4Lk9ic2VydmFibGUubWVyZ2UodGltZXIxLCB0aW1lcjIsIHRpbWVyMywgY29uY3VycmVudCk7XG5cdCAqIG1lcmdlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MSBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggb3RoZXJzLlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggb3RoZXJzLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nXG5cdCAqIGNvbmN1cnJlbmN5IG9mIGlucHV0IE9ic2VydmFibGVzLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgdGhhdCBhcmUgdGhlIHJlc3VsdCBvZlxuXHQgKiBldmVyeSBpbnB1dCBPYnNlcnZhYmxlLlxuXHQgKiBAc3RhdGljIHRydWVcblx0ICogQG5hbWUgbWVyZ2Vcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlU3RhdGljKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5cdCAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIHZhciBsYXN0ID0gb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV07XG5cdCAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihsYXN0KSkge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPiAxICYmIHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICAgICAgY29uY3VycmVudCA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiBsYXN0ID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgIGNvbmN1cnJlbnQgPSBvYnNlcnZhYmxlcy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZXNbMF07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBtZXJnZUFsbF8xLk1lcmdlQWxsT3BlcmF0b3IoY29uY3VycmVudCkpO1xuXHR9XG5cdGV4cG9ydHMubWVyZ2VTdGF0aWMgPSBtZXJnZVN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciByYWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhY2UgPSByYWNlXzEucmFjZVN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc0FycmF5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgZmlyc3Qgc291cmNlIE9ic2VydmFibGUgdG8gZW1pdCBhbiBpdGVtXG5cdCAqIGZyb20gdGhlIGNvbWJpbmF0aW9uIG9mIHRoaXMgT2JzZXJ2YWJsZSBhbmQgc3VwcGxpZWQgT2JzZXJ2YWJsZXNcblx0ICogQHBhcmFtIHsuLi5PYnNlcnZhYmxlc30gLi4ub2JzZXJ2YWJsZXMgc291cmNlcyB1c2VkIHRvIHJhY2UgZm9yIHdoaWNoIE9ic2VydmFibGUgZW1pdHMgZmlyc3QuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBvdXRwdXQgb2YgdGhlIGZpcnN0IE9ic2VydmFibGUgdG8gZW1pdCBhbiBpdGVtLlxuXHQgKiBAbWV0aG9kIHJhY2Vcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHJhY2UoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG5cdCAgICAvLyBgcGFpcihbb2JzMSwgb2JzMiwgLi4uXSlgXG5cdCAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuXHQgICAgICAgIG9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXNbMF07XG5cdCAgICB9XG5cdCAgICBvYnNlcnZhYmxlcy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgcmV0dXJuIHJhY2VTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xuXHR9XG5cdGV4cG9ydHMucmFjZSA9IHJhY2U7XG5cdGZ1bmN0aW9uIHJhY2VTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG5cdCAgICAvLyBgcGFpcihbb2JzMSwgb2JzMiwgLi4uXSlgXG5cdCAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzKS5saWZ0KG5ldyBSYWNlT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5yYWNlU3RhdGljID0gcmFjZVN0YXRpYztcblx0dmFyIFJhY2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSYWNlT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBSYWNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSYWNlU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJhY2VPcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5SYWNlT3BlcmF0b3IgPSBSYWNlT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFJhY2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSYWNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJhY2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuaGFzRmlyc3QgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gW107XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG5cdCAgICB9XG5cdCAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAob2JzZXJ2YWJsZSkge1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcblx0ICAgIH07XG5cdCAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG5cdCAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKTtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFJhY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmhhc0ZpcnN0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzRmlyc3QgPSB0cnVlO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGkgIT09IG91dGVySW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb25zW2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSYWNlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5SYWNlU3Vic2NyaWJlciA9IFJhY2VTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbmV2ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUubmV2ZXIgPSBuZXZlcl8xLm5ldmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBOZXZlck9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg4KTtcblx0ZXhwb3J0cy5uZXZlciA9IE5ldmVyT2JzZXJ2YWJsZV8xLk5ldmVyT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbm9vcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBOZXZlck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE5ldmVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE5ldmVyT2JzZXJ2YWJsZSgpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5BbiBPYnNlcnZhYmxlIHRoYXQgbmV2ZXIgZW1pdHMgYW55dGhpbmcuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvbmV2ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAgICAgKlxuXHQgICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcblx0ICAgICAqIG5laXRoZXIgdmFsdWVzIG5vciBlcnJvcnMgbm9yIHRoZSBjb21wbGV0aW9uIG5vdGlmaWNhdGlvbi4gSXQgY2FuIGJlIHVzZWRcblx0ICAgICAqIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9yIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlciBPYnNlcnZhYmxlcy4gUGxlYXNlIG5vdFxuXHQgICAgICogdGhhdCBieSBuZXZlciBlbWl0dGluZyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbiwgdGhpcyBPYnNlcnZhYmxlIGtlZXBzIHRoZVxuXHQgICAgICogc3Vic2NyaXB0aW9uIGZyb20gYmVpbmcgZGlzcG9zZWQgYXV0b21hdGljYWxseS4gU3Vic2NyaXB0aW9ucyBuZWVkIHRvIGJlXG5cdCAgICAgKiBtYW51YWxseSBkaXNwb3NlZC5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBuZXZlciBlbWl0IGFueXRoaW5nIGVsc2UgKG5vdCBldmVuIGNvbXBsZXRlKS48L2NhcHRpb24+XG5cdCAgICAgKiBmdW5jdGlvbiBpbmZvKCkge1xuXHQgICAgICogICBjb25zb2xlLmxvZygnV2lsbCBub3QgYmUgY2FsbGVkJyk7XG5cdCAgICAgKiB9XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5uZXZlcigpLnN0YXJ0V2l0aCg3KTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgaW5mbywgaW5mbyk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG5cdCAgICAgKiBAc2VlIHtAbGluayBvZn1cblx0ICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEEgXCJuZXZlclwiIE9ic2VydmFibGU6IG5ldmVyIGVtaXRzIGFueXRoaW5nLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBuZXZlclxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgTmV2ZXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuXHQgICAgfTtcblx0ICAgIE5ldmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgbm9vcF8xLm5vb3AoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuTmV2ZXJPYnNlcnZhYmxlID0gTmV2ZXJPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1OZXZlck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuXHRmdW5jdGlvbiBub29wKCkgeyB9XG5cdGV4cG9ydHMubm9vcCA9IG5vb3A7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vb3AuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBvZl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZiA9IG9mXzEub2Y7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHRleHBvcnRzLm9mID0gQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlLm9mO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1vZi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHJhbmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhbmdlID0gcmFuZ2VfMS5yYW5nZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgUmFuZ2VPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5NCk7XG5cdGV4cG9ydHMucmFuZ2UgPSBSYW5nZU9ic2VydmFibGVfMS5SYW5nZU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yYW5nZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSYW5nZU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW5jZSBvZiBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZFxuXHQgICAgICogcmFuZ2UuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGEgc2VxdWVuY2Ugb2YgbnVtYmVycyBpbiBhIHJhbmdlLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3JhbmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGByYW5nZWAgb3BlcmF0b3IgZW1pdHMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVnZXJzLCBpbiBvcmRlciwgd2hlcmUgeW91XG5cdCAgICAgKiBzZWxlY3QgdGhlIGBzdGFydGAgb2YgdGhlIHJhbmdlIGFuZCBpdHMgYGxlbmd0aGAuIEJ5IGRlZmF1bHQsIHVzZXMgbm9cblx0ICAgICAqIFNjaGVkdWxlciBhbmQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9ucyBzeW5jaHJvbm91c2x5LCBidXQgbWF5IHVzZVxuXHQgICAgICogYW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHJlZ3VsYXRlIHRob3NlIGRlbGl2ZXJpZXMuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgdGhlIG51bWJlcnMgMSB0byAxMDwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG5cdCAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayB0aW1lcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnQ9MF0gVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb25zIG9mIHRoZSBub3RpZmljYXRpb25zLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBudW1iZXJzIHRoYXQgZW1pdHMgYSBmaW5pdGUgcmFuZ2Ugb2Zcblx0ICAgICAqIHNlcXVlbnRpYWwgaW50ZWdlcnMuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIHJhbmdlXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBSYW5nZU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgc3RhcnQgPSAwOyB9XG5cdCAgICAgICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAwOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzdGFydCA9IHN0YXRlLnN0YXJ0LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICBpZiAoaW5kZXggPj0gY291bnQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIubmV4dChzdGFydCk7XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICBzdGF0ZS5zdGFydCA9IHN0YXJ0ICsgMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBSYW5nZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0ICAgICAgICB2YXIgY291bnQgPSB0aGlzLl9jb3VudDtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN0YXJ0OiBzdGFydCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRvIHtcblx0ICAgICAgICAgICAgICAgIGlmIChpbmRleCsrID49IGNvdW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHN0YXJ0KyspO1xuXHQgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBSYW5nZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5SYW5nZU9ic2VydmFibGUgPSBSYW5nZU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhbmdlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRocm93XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Nik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRocm93ID0gdGhyb3dfMS5fdGhyb3c7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzk2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEVycm9yT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTcpO1xuXHRleHBvcnRzLl90aHJvdyA9IEVycm9yT2JzZXJ2YWJsZV8xLkVycm9yT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEVycm9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEVycm9yT2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIgYW5kIGltbWVkaWF0ZWx5XG5cdCAgICAgKiBlbWl0cyBhbiBlcnJvciBub3RpZmljYXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2Vycm9yJywgYW5kIG5vdGhpbmcgZWxzZS5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBlcnJvciBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuXHQgICAgICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGVtaXQgYW4gZXJyb3IuPC9jYXB0aW9uPlxuXHQgICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUudGhyb3cobmV3IEVycm9yKCdvb3BzIScpKS5zdGFydFdpdGgoNyk7XG5cdCAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVucyBudW1iZXJzIHRvIHRoZSBzZXF1ZW5jZSAnYScsICdiJywgJ2MnLCBidXQgdGhyb3cgYW4gZXJyb3IgZm9yIDEzPC9jYXB0aW9uPlxuXHQgICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICAgICAqIHZhciByZXN1bHQgPSBpbnRlcnZhbC5tZXJnZU1hcCh4ID0+XG5cdCAgICAgKiAgIHggPT09IDEzID9cblx0ICAgICAqICAgICBSeC5PYnNlcnZhYmxlLnRocm93KCdUaGlydGVlbnMgYXJlIGJhZCcpIDpcblx0ICAgICAqICAgICBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpXG5cdCAgICAgKiApO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cblx0ICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuXHQgICAgICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG5cdCAgICAgKiBAc2VlIHtAbGluayBvZn1cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge2FueX0gZXJyb3IgVGhlIHBhcnRpY3VsYXIgRXJyb3IgdG8gcGFzcyB0byB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb24gb2YgdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIGVycm9yIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGVycm9yIG5vdGlmaWNhdGlvblxuXHQgICAgICogdXNpbmcgdGhlIGdpdmVuIGVycm9yIGFyZ3VtZW50LlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSB0aHJvd1xuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChlcnJvciwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFcnJvck9ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgRXJyb3JPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBlcnJvciA9IGFyZy5lcnJvciwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuXHQgICAgfTtcblx0ICAgIEVycm9yT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGVycm9yID0gdGhpcy5lcnJvcjtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBFcnJvck9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5FcnJvck9ic2VydmFibGUgPSBFcnJvck9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUVycm9yT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRpbWVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5OSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRpbWVyID0gdGltZXJfMS50aW1lcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgVGltZXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMCk7XG5cdGV4cG9ydHMudGltZXIgPSBUaW1lck9ic2VydmFibGVfMS5UaW1lck9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc051bWVyaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc1KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIGlzU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdHZhciBpc0RhdGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgVGltZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUaW1lck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaW1lck9ic2VydmFibGUoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAoZHVlVGltZSA9PT0gdm9pZCAwKSB7IGR1ZVRpbWUgPSAwOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wZXJpb2QgPSAtMTtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSAwO1xuXHQgICAgICAgIGlmIChpc051bWVyaWNfMS5pc051bWVyaWMocGVyaW9kKSkge1xuXHQgICAgICAgICAgICB0aGlzLnBlcmlvZCA9IE51bWJlcihwZXJpb2QpIDwgMSAmJiAxIHx8IE51bWJlcihwZXJpb2QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHBlcmlvZCkpIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gcGVyaW9kO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSkge1xuXHQgICAgICAgICAgICBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSBpc0RhdGVfMS5pc0RhdGUoZHVlVGltZSkgP1xuXHQgICAgICAgICAgICAoK2R1ZVRpbWUgLSB0aGlzLnNjaGVkdWxlci5ub3coKSkgOlxuXHQgICAgICAgICAgICBkdWVUaW1lO1xuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBzdGFydHMgZW1pdHRpbmcgYWZ0ZXIgYW4gYGluaXRpYWxEZWxheWAgYW5kXG5cdCAgICAgKiBlbWl0cyBldmVyIGluY3JlYXNpbmcgbnVtYmVycyBhZnRlciBlYWNoIGBwZXJpb2RgIG9mIHRpbWUgdGhlcmVhZnRlci5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXRzIGxpa2Uge0BsaW5rIGludGVydmFsfSwgYnV0IHlvdSBjYW4gc3BlY2lmeSB3aGVuXG5cdCAgICAgKiBzaG91bGQgdGhlIGVtaXNzaW9ucyBzdGFydC48L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogPGltZyBzcmM9XCIuL2ltZy90aW1lci5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBgdGltZXJgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFuIGluZmluaXRlIHNlcXVlbmNlIG9mIGFzY2VuZGluZ1xuXHQgICAgICogaW50ZWdlcnMsIHdpdGggYSBjb25zdGFudCBpbnRlcnZhbCBvZiB0aW1lLCBgcGVyaW9kYCBvZiB5b3VyIGNob29zaW5nXG5cdCAgICAgKiBiZXR3ZWVuIHRob3NlIGVtaXNzaW9ucy4gVGhlIGZpcnN0IGVtaXNzaW9uIGhhcHBlbnMgYWZ0ZXIgdGhlIHNwZWNpZmllZFxuXHQgICAgICogYGluaXRpYWxEZWxheWAuIFRoZSBpbml0aWFsIGRlbGF5IG1heSBiZSBhIHtAbGluayBEYXRlfS4gQnkgZGVmYXVsdCwgdGhpc1xuXHQgICAgICogb3BlcmF0b3IgdXNlcyB0aGUgYGFzeW5jYCBTY2hlZHVsZXIgdG8gcHJvdmlkZSBhIG5vdGlvbiBvZiB0aW1lLCBidXQgeW91XG5cdCAgICAgKiBtYXkgcGFzcyBhbnkgU2NoZWR1bGVyIHRvIGl0LiBJZiBgcGVyaW9kYCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgb3V0cHV0XG5cdCAgICAgKiBPYnNlcnZhYmxlIGVtaXRzIG9ubHkgb25lIHZhbHVlLCBgMGAuIE90aGVyd2lzZSwgaXQgZW1pdHMgYW4gaW5maW5pdGVcblx0ICAgICAqIHNlcXVlbmNlLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIGFzY2VuZGluZyBudW1iZXJzLCBvbmUgZXZlcnkgc2Vjb25kICgxMDAwbXMpLCBzdGFydGluZyBhZnRlciAzIHNlY29uZHM8L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUudGltZXIoMzAwMCwgMTAwMCk7XG5cdCAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBvbmUgbnVtYmVyIGFmdGVyIGZpdmUgc2Vjb25kczwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcig1MDAwKTtcblx0ICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZGVsYXl9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtudW1iZXJ8RGF0ZX0gaW5pdGlhbERlbGF5IFRoZSBpbml0aWFsIGRlbGF5IHRpbWUgdG8gd2FpdCBiZWZvcmVcblx0ICAgICAqIGVtaXR0aW5nIHRoZSBmaXJzdCB2YWx1ZSBvZiBgMGAuXG5cdCAgICAgKiBAcGFyYW0ge251bWJlcn0gW3BlcmlvZF0gVGhlIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gZW1pc3Npb25zIG9mIHRoZVxuXHQgICAgICogc3Vic2VxdWVudCBudW1iZXJzLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb24gb2YgdmFsdWVzLCBhbmQgcHJvdmlkaW5nIGEgbm90aW9uIG9mIFwidGltZVwiLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgYDBgIGFmdGVyIHRoZVxuXHQgICAgICogYGluaXRpYWxEZWxheWAgYW5kIGV2ZXIgaW5jcmVhc2luZyBudW1iZXJzIGFmdGVyIGVhY2ggYHBlcmlvZGAgb2YgdGltZVxuXHQgICAgICogdGhlcmVhZnRlci5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgdGltZXJcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIFRpbWVyT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChpbml0aWFsRGVsYXkgPT09IHZvaWQgMCkgeyBpbml0aWFsRGVsYXkgPSAwOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBUaW1lck9ic2VydmFibGUoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgVGltZXJPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXM7XG5cdCAgICAgICAgc3Vic2NyaWJlci5uZXh0KGluZGV4KTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHBlcmlvZCA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG5cdCAgICAgICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xuXHQgICAgfTtcblx0ICAgIFRpbWVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCBwZXJpb2QgPSBfYS5wZXJpb2QsIGR1ZVRpbWUgPSBfYS5kdWVUaW1lLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG5cdCAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShUaW1lck9ic2VydmFibGUuZGlzcGF0Y2gsIGR1ZVRpbWUsIHtcblx0ICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBwZXJpb2Q6IHBlcmlvZCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lck9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5UaW1lck9ic2VydmFibGUgPSBUaW1lck9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oK3ZhbHVlKTtcblx0fVxuXHRleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNEYXRlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgemlwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnppcCA9IHppcF8xLnppcDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHppcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDQpO1xuXHRleHBvcnRzLnppcCA9IHppcF8xLnppcFN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MSk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gb2JzZXJ2YWJsZXNcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cblx0ICogQG1ldGhvZCB6aXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHppcFByb3RvKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcblx0ICAgIHJldHVybiB6aXBTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xuXHR9XG5cdGV4cG9ydHMuemlwUHJvdG8gPSB6aXBQcm90bztcblx0LyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0LyoqXG5cdCAqIEBwYXJhbSBvYnNlcnZhYmxlc1xuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fVxuXHQgKiBAc3RhdGljIHRydWVcblx0ICogQG5hbWUgemlwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB6aXBTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvamVjdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuXHQgICAgaWYgKHR5cGVvZiBwcm9qZWN0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgWmlwT3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuemlwU3RhdGljID0gemlwU3RhdGljO1xuXHR2YXIgWmlwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gWmlwT3BlcmF0b3IocHJvamVjdCkge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICB9XG5cdCAgICBaaXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFppcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLlppcE9wZXJhdG9yID0gWmlwT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFppcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFppcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBaaXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB2YWx1ZXMpIHtcblx0ICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9ycyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSAodHlwZW9mIHByb2plY3QgPT09ICdmdW5jdGlvbicpID8gcHJvamVjdCA6IG51bGw7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG5cdCAgICB9XG5cdCAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljQXJyYXlJdGVyYXRvcih2YWx1ZSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljSXRlcmF0b3IodmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSgpKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgWmlwQnVmZmVySXRlcmF0b3IodGhpcy5kZXN0aW5hdGlvbiwgdGhpcywgdmFsdWUsIGluZGV4KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7XG5cdCAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG5cdCAgICAgICAgICAgIGlmIChpdGVyYXRvci5zdGlsbFVuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQoaXRlcmF0b3Iuc3Vic2NyaWJlKGl0ZXJhdG9yLCBpKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZS0tOyAvLyBub3QgYW4gb2JzZXJ2YWJsZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlLS07XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzO1xuXHQgICAgICAgIHZhciBsZW4gPSBpdGVyYXRvcnMubGVuZ3RoO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgLy8gYWJvcnQgaWYgbm90IGFsbCBvZiB0aGVtIGhhdmUgdmFsdWVzXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IuaGFzVmFsdWUgPT09ICdmdW5jdGlvbicgJiYgIWl0ZXJhdG9yLmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc2hvdWxkQ29tcGxldGUgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JzW2ldO1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgaXQncyBjb21wbGV0ZWQgbm93IHRoYXQgeW91J3ZlIGdvdHRlblxuXHQgICAgICAgICAgICAvLyB0aGUgbmV4dCB2YWx1ZS5cblx0ICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmhhc0NvbXBsZXRlZCgpKSB7XG5cdCAgICAgICAgICAgICAgICBzaG91bGRDb21wbGV0ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGFyZ3MucHVzaChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QoYXJncyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc2hvdWxkQ29tcGxldGUpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gWmlwU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLlppcFN1YnNjcmliZXIgPSBaaXBTdWJzY3JpYmVyO1xuXHR2YXIgU3RhdGljSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RhdGljSXRlcmF0b3IoaXRlcmF0b3IpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRlcmF0b3I7XG5cdCAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgfVxuXHQgICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gdGhpcy5pdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUuaGFzQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBuZXh0UmVzdWx0ID0gdGhpcy5uZXh0UmVzdWx0O1xuXHQgICAgICAgIHJldHVybiBuZXh0UmVzdWx0ICYmIG5leHRSZXN1bHQuZG9uZTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3RhdGljSXRlcmF0b3I7XG5cdH0oKSk7XG5cdHZhciBTdGF0aWNBcnJheUl0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0YXRpY0FycmF5SXRlcmF0b3IoYXJyYXkpIHtcblx0ICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuXHQgICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTtcblx0ICAgICAgICByZXR1cm4gaSA8IHRoaXMubGVuZ3RoID8geyB2YWx1ZTogYXJyYXlbaV0sIGRvbmU6IGZhbHNlIH0gOiB7IGRvbmU6IHRydWUgfTtcblx0ICAgIH07XG5cdCAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPiB0aGlzLmluZGV4O1xuXHQgICAgfTtcblx0ICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPT09IHRoaXMuaW5kZXg7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN0YXRpY0FycmF5SXRlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFppcEJ1ZmZlckl0ZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhaaXBCdWZmZXJJdGVyYXRvciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFppcEJ1ZmZlckl0ZXJhdG9yKGRlc3RpbmF0aW9uLCBwYXJlbnQsIG9ic2VydmFibGUsIGluZGV4KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuXHQgICAgICAgIHRoaXMuc3RpbGxVbnN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICAvLyBOT1RFOiB0aGVyZSBpcyBhY3R1YWxseSBhIG5hbWUgY29sbGlzaW9uIGhlcmUgd2l0aCBTdWJzY3JpYmVyLm5leHQgYW5kIEl0ZXJhdG9yLm5leHRcblx0ICAgIC8vICAgIHRoaXMgaXMgbGVnaXQgYmVjYXVzZSBgbmV4dCgpYCB3aWxsIG5ldmVyIGJlIGNhbGxlZCBieSBhIHN1YnNjcmlwdGlvbiBpbiB0aGlzIGNhc2UuXG5cdCAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBidWZmZXIuc2hpZnQoKSwgZG9uZTogZmFsc2UgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlzQ29tcGxldGU7XG5cdCAgICB9O1xuXHQgICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXIucHVzaChpbm5lclZhbHVlKTtcblx0ICAgICAgICB0aGlzLnBhcmVudC5jaGVja0l0ZXJhdG9ycygpO1xuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgcmV0dXJuIHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgdGhpcy5vYnNlcnZhYmxlLCB0aGlzLCBpbmRleCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFppcEJ1ZmZlckl0ZXJhdG9yO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD16aXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBidWZmZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDA2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlciA9IGJ1ZmZlcl8xLmJ1ZmZlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyB1bnRpbCBgY2xvc2luZ05vdGlmaWVyYCBlbWl0cy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcblx0ICogdGhhdCBhcnJheSBvbmx5IHdoZW4gYW5vdGhlciBPYnNlcnZhYmxlIGVtaXRzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgdGhlIGluY29taW5nIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIHRoZSBnaXZlbiBgY2xvc2luZ05vdGlmaWVyYFxuXHQgKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGF0IHdoaWNoIHBvaW50IGl0IGVtaXRzIHRoZSBidWZmZXIgb24gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlIGFuZCBzdGFydHMgYSBuZXcgYnVmZmVyIGludGVybmFsbHksIGF3YWl0aW5nIHRoZSBuZXh0IHRpbWVcblx0ICogYGNsb3NpbmdOb3RpZmllcmAgZW1pdHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBlbWl0IGFycmF5IG9mIG1vc3QgcmVjZW50IGludGVydmFsIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gaW50ZXJ2YWwuYnVmZmVyKGNsaWNrcyk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93fVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGU8YW55Pn0gY2xvc2luZ05vdGlmaWVyIEFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIHRoZVxuXHQgKiBidWZmZXIgdG8gYmUgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gT2JzZXJ2YWJsZSBvZiBidWZmZXJzLCB3aGljaCBhcmUgYXJyYXlzIG9mXG5cdCAqIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGJ1ZmZlcihjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikpO1xuXHR9XG5cdGV4cG9ydHMuYnVmZmVyID0gYnVmZmVyO1xuXHR2YXIgQnVmZmVyT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyT3BlcmF0b3IoY2xvc2luZ05vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nTm90aWZpZXIgPSBjbG9zaW5nTm90aWZpZXI7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jbG9zaW5nTm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJ1ZmZlclN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllcikpO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGJ1ZmZlckNvdW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwOCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50XzEuYnVmZmVyQ291bnQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIHRoZSBzaXplIGhpdHMgdGhlIG1heGltdW1cblx0ICogYGJ1ZmZlclNpemVgIGdpdmVuLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuXHQgKiB0aGF0IGFycmF5IG9ubHkgd2hlbiBpdHMgc2l6ZSByZWFjaGVzIGBidWZmZXJTaXplYC48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyQ291bnQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgYSBudW1iZXIgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGBidWZmZXJTaXplYCB0aGVuXG5cdCAqIGVtaXRzIHRoZSBidWZmZXIgYW5kIGNsZWFycyBpdCwgYW5kIHN0YXJ0cyBhIG5ldyBidWZmZXIgZWFjaFxuXHQgKiBgc3RhcnRCdWZmZXJFdmVyeWAgdmFsdWVzLiBJZiBgc3RhcnRCdWZmZXJFdmVyeWAgaXMgbm90IHByb3ZpZGVkIG9yIGlzXG5cdCAqIGBudWxsYCwgdGhlbiBuZXcgYnVmZmVycyBhcmUgc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZVxuXHQgKiBhbmQgd2hlbiBlYWNoIGJ1ZmZlciBjbG9zZXMgYW5kIGlzIGVtaXR0ZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlckNvdW50KDIpO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBlbWl0IHRoZSBsYXN0IHR3byBjbGljayBldmVudHMgYXMgYW4gYXJyYXk8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJDb3VudCgyLCAxKTtcblx0ICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgcGFpcndpc2V9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyU2l6ZSBUaGUgbWF4aW11bSBzaXplIG9mIHRoZSBidWZmZXIgZW1pdHRlZC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydEJ1ZmZlckV2ZXJ5XSBJbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBhIG5ldyBidWZmZXIuXG5cdCAqIEZvciBleGFtcGxlIGlmIGBzdGFydEJ1ZmZlckV2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgYnVmZmVyIHdpbGwgYmUgc3RhcnRlZFxuXHQgKiBvbiBldmVyeSBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IGJ1ZmZlciBpcyBzdGFydGVkIGF0IHRoZVxuXHQgKiBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBieSBkZWZhdWx0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIE9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJDb3VudFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyQ291bnQoYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkge1xuXHQgICAgaWYgKHN0YXJ0QnVmZmVyRXZlcnkgPT09IHZvaWQgMCkgeyBzdGFydEJ1ZmZlckV2ZXJ5ID0gbnVsbDsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyQ291bnRPcGVyYXRvcihidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50O1xuXHR2YXIgQnVmZmVyQ291bnRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHtcblx0ICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuXHQgICAgICAgIHRoaXMuc3RhcnRCdWZmZXJFdmVyeSA9IHN0YXJ0QnVmZmVyRXZlcnk7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJDb3VudE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYnVmZmVyU2l6ZSwgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlckNvdW50T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlckNvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQnVmZmVyQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID0gc3RhcnRCdWZmZXJFdmVyeTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbW11dO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBjb3VudCA9ICh0aGlzLmNvdW50ICs9IDEpO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIGJ1ZmZlclNpemUgPSB0aGlzLmJ1ZmZlclNpemU7XG5cdCAgICAgICAgdmFyIHN0YXJ0QnVmZmVyRXZlcnkgPSAodGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID09IG51bGwpID8gYnVmZmVyU2l6ZSA6IHRoaXMuc3RhcnRCdWZmZXJFdmVyeTtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG5cdCAgICAgICAgdmFyIHJlbW92ZSA9IC0xO1xuXHQgICAgICAgIGlmIChjb3VudCAlIHN0YXJ0QnVmZmVyRXZlcnkgPT09IDApIHtcblx0ICAgICAgICAgICAgYnVmZmVycy5wdXNoKFtdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tpXTtcblx0ICAgICAgICAgICAgYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gYnVmZmVyU2l6ZSkge1xuXHQgICAgICAgICAgICAgICAgcmVtb3ZlID0gaTtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVtb3ZlICE9PSAtMSkge1xuXHQgICAgICAgICAgICBidWZmZXJzLnNwbGljZShyZW1vdmUsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuXHQgICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnMuc2hpZnQoKTtcblx0ICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyQ291bnRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYnVmZmVyVGltZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVGltZSA9IGJ1ZmZlclRpbWVfMS5idWZmZXJUaW1lO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBmb3IgYSBzcGVjaWZpYyB0aW1lIHBlcmlvZC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcblx0ICogdGhvc2UgYXJyYXlzIHBlcmlvZGljYWxseSBpbiB0aW1lLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBCdWZmZXJzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgZm9yIGEgc3BlY2lmaWMgdGltZSBkdXJhdGlvbiBgYnVmZmVyVGltZVNwYW5gLlxuXHQgKiBVbmxlc3MgdGhlIG9wdGlvbmFsIGFyZ3VtZW50IGBidWZmZXJDcmVhdGlvbkludGVydmFsYCBpcyBnaXZlbiwgaXQgZW1pdHMgYW5kXG5cdCAqIHJlc2V0cyB0aGUgYnVmZmVyIGV2ZXJ5IGBidWZmZXJUaW1lU3BhbmAgbWlsbGlzZWNvbmRzLiBJZlxuXHQgKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgaXMgZ2l2ZW4sIHRoaXMgb3BlcmF0b3Igb3BlbnMgdGhlIGJ1ZmZlciBldmVyeVxuXHQgKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgbWlsbGlzZWNvbmRzIGFuZCBjbG9zZXMgKGVtaXRzIGFuZCByZXNldHMpIHRoZVxuXHQgKiBidWZmZXIgZXZlcnkgYGJ1ZmZlclRpbWVTcGFuYCBtaWxsaXNlY29uZHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IHNlY29uZCwgZW1pdCBhbiBhcnJheSBvZiB0aGUgcmVjZW50IGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRpbWUoMTAwMCk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgNSBzZWNvbmRzLCBlbWl0IHRoZSBjbGljayBldmVudHMgZnJvbSB0aGUgbmV4dCAyIHNlY29uZHM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUaW1lKDIwMDAsIDUwMDApO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IGJ1ZmZlclRpbWVTcGFuIFRoZSBhbW91bnQgb2YgdGltZSB0byBmaWxsIGVhY2ggYnVmZmVyIGFycmF5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2J1ZmZlckNyZWF0aW9uSW50ZXJ2YWxdIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBuZXdcblx0ICogYnVmZmVycy5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG5cdCAqIGludGVydmFscyB0aGF0IGRldGVybWluZSBidWZmZXIgYm91bmRhcmllcy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBvYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgYnVmZmVyVGltZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyVGltZShidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyVGltZU9wZXJhdG9yKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmJ1ZmZlclRpbWUgPSBidWZmZXJUaW1lO1xuXHR2YXIgQnVmZmVyVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlclRpbWVPcGVyYXRvcihidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmJ1ZmZlclRpbWVTcGFuLCB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQnVmZmVyVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJ1ZmZlclRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5idWZmZXJzID0gW107XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMub3BlbkJ1ZmZlcigpO1xuXHQgICAgICAgIGlmIChidWZmZXJDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuXHQgICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgYnVmZmVyOiBidWZmZXIgfTtcblx0ICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IGJ1ZmZlclRpbWVTcGFuOiBidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDogYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyQ2xvc2UsIGJ1ZmZlclRpbWVTcGFuLCBjbG9zZVN0YXRlKSk7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNyZWF0aW9uLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBjcmVhdGlvblN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGltZVNwYW5Pbmx5U3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIGJ1ZmZlcjogYnVmZmVyLCBidWZmZXJUaW1lU3BhbjogYnVmZmVyVGltZVNwYW4gfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5LCBidWZmZXJUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBidWZmZXJzW2ldLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuYnVmZmVycy5sZW5ndGggPSAwO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGJ1ZmZlcnMgPSBfYS5idWZmZXJzLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXJzLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXJzID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcblx0ICAgICAgICByZXR1cm4gYnVmZmVyO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICBidWZmZXJzLnNwbGljZShidWZmZXJzLmluZGV4T2YoYnVmZmVyKSwgMSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5KHN0YXRlKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgcHJldkJ1ZmZlciA9IHN0YXRlLmJ1ZmZlcjtcblx0ICAgIGlmIChwcmV2QnVmZmVyKSB7XG5cdCAgICAgICAgc3Vic2NyaWJlci5jbG9zZUJ1ZmZlcihwcmV2QnVmZmVyKTtcblx0ICAgIH1cblx0ICAgIHN0YXRlLmJ1ZmZlciA9IHN1YnNjcmliZXIub3BlbkJ1ZmZlcigpO1xuXHQgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgc3RhdGUuYnVmZmVyVGltZVNwYW4pO1xuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ3JlYXRpb24oc3RhdGUpIHtcblx0ICAgIHZhciBidWZmZXJDcmVhdGlvbkludGVydmFsID0gc3RhdGUuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgYnVmZmVyVGltZVNwYW4gPSBzdGF0ZS5idWZmZXJUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjtcblx0ICAgIHZhciBidWZmZXIgPSBzdWJzY3JpYmVyLm9wZW5CdWZmZXIoKTtcblx0ICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuXHQgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgYWN0aW9uLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDbG9zZSwgYnVmZmVyVGltZVNwYW4sIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgYnVmZmVyOiBidWZmZXIgfSkpO1xuXHQgICAgICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCk7XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJDbG9zZShhcmcpIHtcblx0ICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIGJ1ZmZlciA9IGFyZy5idWZmZXI7XG5cdCAgICBzdWJzY3JpYmVyLmNsb3NlQnVmZmVyKGJ1ZmZlcik7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGJ1ZmZlclRvZ2dsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVG9nZ2xlID0gYnVmZmVyVG9nZ2xlXzEuYnVmZmVyVG9nZ2xlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUb2dnbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBzdGFydGluZyBmcm9tIGFuIGVtaXNzaW9uIGZyb21cblx0ICogYG9wZW5pbmdzYCBhbmQgZW5kaW5nIHdoZW4gdGhlIG91dHB1dCBvZiBgY2xvc2luZ1NlbGVjdG9yYCBlbWl0cy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LiBTdGFydHNcblx0ICogY29sbGVjdGluZyBvbmx5IHdoZW4gYG9wZW5pbmdgIGVtaXRzLCBhbmQgY2FsbHMgdGhlIGBjbG9zaW5nU2VsZWN0b3JgXG5cdCAqIGZ1bmN0aW9uIHRvIGdldCBhbiBPYnNlcnZhYmxlIHRoYXQgdGVsbHMgd2hlbiB0byBjbG9zZSB0aGUgYnVmZmVyLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUb2dnbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBieSBvcGVuaW5nIHRoZSBidWZmZXIgdmlhIHNpZ25hbHMgZnJvbSBhblxuXHQgKiBPYnNlcnZhYmxlIHByb3ZpZGVkIHRvIGBvcGVuaW5nc2AsIGFuZCBjbG9zaW5nIGFuZCBzZW5kaW5nIHRoZSBidWZmZXJzIHdoZW5cblx0ICogYSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUb2dnbGUob3BlbmluZ3MsIGkgPT5cblx0ICogICBpICUgMiA/IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKSA6IFJ4Lk9ic2VydmFibGUuZW1wdHkoKVxuXHQgKiApO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cblx0ICpcblx0ICogQHBhcmFtIHtTdWJzY3JpYmFibGVPclByb21pc2U8Tz59IG9wZW5pbmdzIEEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2Ugb2Ygbm90aWZpY2F0aW9ucyB0byBzdGFydCBuZXdcblx0ICogYnVmZmVycy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogTyk6IFN1YnNjcmliYWJsZU9yUHJvbWlzZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuXHQgKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2UsXG5cdCAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzLCBzaWduYWxzIHRoYXQgdGhlIGFzc29jaWF0ZWQgYnVmZmVyIHNob3VsZCBiZSBlbWl0dGVkXG5cdCAqIGFuZCBjbGVhcmVkLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIG9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJUb2dnbGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGJ1ZmZlclRvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXJUb2dnbGUgPSBidWZmZXJUb2dnbGU7XG5cdHZhciBCdWZmZXJUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyVG9nZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MpKTtcblx0ICAgIH1cblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgY29udGV4dHNbaV0uYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIGNvbnRleHQuYnVmZmVyID0gbnVsbDtcblx0ICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIGVycik7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgd2hpbGUgKGNvbnRleHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0cy5zaGlmdCgpO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoY29udGV4dC5idWZmZXIpO1xuXHQgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICBjb250ZXh0LmJ1ZmZlciA9IG51bGw7XG5cdCAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgb3V0ZXJWYWx1ZSA/IHRoaXMuY2xvc2VCdWZmZXIob3V0ZXJWYWx1ZSkgOiB0aGlzLm9wZW5CdWZmZXIoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmNsb3NlQnVmZmVyKGlubmVyU3ViLmNvbnRleHQpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2xvc2luZ1NlbGVjdG9yID0gdGhpcy5jbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSBjbG9zaW5nU2VsZWN0b3IuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJ5U3Vic2NyaWJlKGNsb3NpbmdOb3RpZmllcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICBpZiAoY29udGV4dHMgJiYgY29udGV4dCkge1xuXHQgICAgICAgICAgICB2YXIgYnVmZmVyID0gY29udGV4dC5idWZmZXIsIHN1YnNjcmlwdGlvbiA9IGNvbnRleHQuc3Vic2NyaXB0aW9uO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICAgICAgY29udGV4dHMuc3BsaWNlKGNvbnRleHRzLmluZGV4T2YoY29udGV4dCksIDEpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKGNsb3NpbmdOb3RpZmllcikge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG5cdCAgICAgICAgdmFyIGNvbnRleHQgPSB7IGJ1ZmZlcjogYnVmZmVyLCBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiB9O1xuXHQgICAgICAgIGNvbnRleHRzLnB1c2goY29udGV4dCk7XG5cdCAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIsIGNvbnRleHQpO1xuXHQgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZUJ1ZmZlcihjb250ZXh0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLmNvbnRleHQgPSBjb250ZXh0O1xuXHQgICAgICAgICAgICB0aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgYnVmZmVyV2hlbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyV2hlbiA9IGJ1ZmZlcldoZW5fMS5idWZmZXJXaGVuO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMsIHVzaW5nIGEgZmFjdG9yeSBmdW5jdGlvbiBvZiBjbG9zaW5nXG5cdCAqIE9ic2VydmFibGVzIHRvIGRldGVybWluZSB3aGVuIHRvIGNsb3NlLCBlbWl0LCBhbmQgcmVzZXQgdGhlIGJ1ZmZlci5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LiBXaGVuIGl0XG5cdCAqIHN0YXJ0cyBjb2xsZWN0aW5nIHZhbHVlcywgaXQgY2FsbHMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0XG5cdCAqIHRlbGxzIHdoZW4gdG8gY2xvc2UgdGhlIGJ1ZmZlciBhbmQgcmVzdGFydCBjb2xsZWN0aW5nLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBPcGVucyBhIGJ1ZmZlciBpbW1lZGlhdGVseSwgdGhlbiBjbG9zZXMgdGhlIGJ1ZmZlciB3aGVuIHRoZSBvYnNlcnZhYmxlXG5cdCAqIHJldHVybmVkIGJ5IGNhbGxpbmcgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMgYSB2YWx1ZS4gV2hlbiBpdCBjbG9zZXNcblx0ICogdGhlIGJ1ZmZlciwgaXQgaW1tZWRpYXRlbHkgb3BlbnMgYSBuZXcgYnVmZmVyIGFuZCByZXBlYXRzIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGFuIGFycmF5IG9mIHRoZSBsYXN0IGNsaWNrcyBldmVyeSBbMS01XSByYW5kb20gc2Vjb25kczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlcldoZW4oKCkgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAgKyBNYXRoLnJhbmRvbSgpICogNDAwMClcblx0ICogKTtcblx0ICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuXHQgKiBhcmd1bWVudHMgYW5kIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNpZ25hbHMgYnVmZmVyIGNsb3N1cmUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gb2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIGJ1ZmZlcldoZW5cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGJ1ZmZlcldoZW4oY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJXaGVuT3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXJXaGVuID0gYnVmZmVyV2hlbjtcblx0dmFyIEJ1ZmZlcldoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJXaGVuT3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBCdWZmZXJXaGVuT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlcldoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCdWZmZXJXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlcldoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nU2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgaWYgKGJ1ZmZlcikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJpbmcpIHtcblx0ICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5vcGVuQnVmZmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuQnVmZmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjbG9zaW5nU3Vic2NyaXB0aW9uID0gdGhpcy5jbG9zaW5nU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChjbG9zaW5nU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKGNsb3NpbmdTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblx0ICAgICAgICBpZiAodGhpcy5idWZmZXIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7XG5cdCAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllciA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICB0aGlzLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgICAgICB0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb24gPSBjbG9zaW5nU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgICAgICB0aGlzLmFkZChjbG9zaW5nU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IHRydWU7XG5cdCAgICAgICAgICAgIGNsb3NpbmdTdWJzY3JpcHRpb24uYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG5cdCAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlcldoZW5TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY2FjaGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDE2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNhY2hlID0gY2FjaGVfMS5jYWNoZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcHVibGlzaFJlcGxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpO1xuXHQvKipcblx0ICogQHBhcmFtIGJ1ZmZlclNpemVcblx0ICogQHBhcmFtIHdpbmRvd1RpbWVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59XG5cdCAqIEBtZXRob2QgY2FjaGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNhY2hlKGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7IHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgIHJldHVybiBwdWJsaXNoUmVwbGF5XzEucHVibGlzaFJlcGxheS5jYWxsKHRoaXMsIGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikucmVmQ291bnQoKTtcblx0fVxuXHRleHBvcnRzLmNhY2hlID0gY2FjaGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFJlcGxheVN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDE4KTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjApO1xuXHQvKipcblx0ICogQHBhcmFtIGJ1ZmZlclNpemVcblx0ICogQHBhcmFtIHdpbmRvd1RpbWVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgcHVibGlzaFJlcGxheVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaFJlcGxheShidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IFJlcGxheVN1YmplY3RfMS5SZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hSZXBsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdHZhciBxdWV1ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTkpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgUmVwbGF5U3ViamVjdDxUPlxuXHQgKi9cblx0dmFyIFJlcGxheVN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlcGxheVN1YmplY3QsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIGlmICh3aW5kb3dUaW1lID09PSB2b2lkIDApIHsgd2luZG93VGltZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZXZlbnRzID0gW107XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZSA8IDEgPyAxIDogYnVmZmVyU2l6ZTtcblx0ICAgICAgICB0aGlzLl93aW5kb3dUaW1lID0gd2luZG93VGltZSA8IDEgPyAxIDogd2luZG93VGltZTtcblx0ICAgIH1cblx0ICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIG5vdyA9IHRoaXMuX2dldE5vdygpO1xuXHQgICAgICAgIHRoaXMuZXZlbnRzLnB1c2gobmV3IFJlcGxheUV2ZW50KG5vdywgdmFsdWUpKTtcblx0ICAgICAgICB0aGlzLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyhub3cpO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKHRoaXMuX2dldE5vdygpKTtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChzdWJzY3JpYmVyID0gbmV3IG9ic2VydmVPbl8xLk9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgc2NoZWR1bGVyKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBsZW4gPSBldmVudHMubGVuZ3RoO1xuXHQgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuICYmICFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChldmVudHNbaW5kZXhdLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuXHQgICAgfTtcblx0ICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9nZXROb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuICh0aGlzLnNjaGVkdWxlciB8fCBxdWV1ZV8xLnF1ZXVlKS5ub3coKTtcblx0ICAgIH07XG5cdCAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMgPSBmdW5jdGlvbiAobm93KSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlclNpemUgPSB0aGlzLmJ1ZmZlclNpemU7XG5cdCAgICAgICAgdmFyIF93aW5kb3dUaW1lID0gdGhpcy5fd2luZG93VGltZTtcblx0ICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHM7XG5cdCAgICAgICAgdmFyIGV2ZW50c0NvdW50ID0gZXZlbnRzLmxlbmd0aDtcblx0ICAgICAgICB2YXIgc3BsaWNlQ291bnQgPSAwO1xuXHQgICAgICAgIC8vIFRyaW0gZXZlbnRzIHRoYXQgZmFsbCBvdXQgb2YgdGhlIHRpbWUgd2luZG93LlxuXHQgICAgICAgIC8vIFN0YXJ0IGF0IHRoZSBmcm9udCBvZiB0aGUgbGlzdC4gQnJlYWsgZWFybHkgb25jZVxuXHQgICAgICAgIC8vIHdlIGVuY291bnRlciBhbiBldmVudCB0aGF0IGZhbGxzIHdpdGhpbiB0aGUgd2luZG93LlxuXHQgICAgICAgIHdoaWxlIChzcGxpY2VDb3VudCA8IGV2ZW50c0NvdW50KSB7XG5cdCAgICAgICAgICAgIGlmICgobm93IC0gZXZlbnRzW3NwbGljZUNvdW50XS50aW1lKSA8IF93aW5kb3dUaW1lKSB7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBzcGxpY2VDb3VudCArPSAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZXZlbnRzQ291bnQgPiBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgIHNwbGljZUNvdW50ID0gTWF0aC5tYXgoc3BsaWNlQ291bnQsIGV2ZW50c0NvdW50IC0gYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzcGxpY2VDb3VudCA+IDApIHtcblx0ICAgICAgICAgICAgZXZlbnRzLnNwbGljZSgwLCBzcGxpY2VDb3VudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBldmVudHM7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlcGxheVN1YmplY3Q7XG5cdH0oU3ViamVjdF8xLlN1YmplY3QpKTtcblx0ZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdDtcblx0dmFyIFJlcGxheUV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJlcGxheUV2ZW50KHRpbWUsIHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy50aW1lID0gdGltZTtcblx0ICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gUmVwbGF5RXZlbnQ7XG5cdH0oKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheVN1YmplY3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgUXVldWVTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc5KTtcblx0ZXhwb3J0cy5xdWV1ZSA9IG5ldyBRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjEpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdHMgb2YgaW52b2tpbmcgYSBzcGVjaWZpZWQgc2VsZWN0b3Igb24gaXRlbXNcblx0ICogZW1pdHRlZCBieSBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL211bHRpY2FzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgLSBhIGZ1bmN0aW9uIHRoYXQgY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHN0cmVhbVxuXHQgKiBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzdHJlYW0uXG5cdCAqIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGVcblx0ICogdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIGZvcndhcmQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Jcblx0ICogb24gdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgYSBgQ29ubmVjdGFibGVPYnNlcnZhYmxlYCB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG9cblx0ICogdGhlIHVuZGVybHlpbmcgc3RyZWFtLlxuXHQgKiBAbWV0aG9kIG11bHRpY2FzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbXVsdGljYXN0KHN1YmplY3RPclN1YmplY3RGYWN0b3J5KSB7XG5cdCAgICB2YXIgc3ViamVjdEZhY3Rvcnk7XG5cdCAgICBpZiAodHlwZW9mIHN1YmplY3RPclN1YmplY3RGYWN0b3J5ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHN1YmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gc3ViamVjdEZhY3RvcnkoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGUodGhpcywgc3ViamVjdEZhY3RvcnkpO1xuXHR9XG5cdGV4cG9ydHMubXVsdGljYXN0ID0gbXVsdGljYXN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tdWx0aWNhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgQ29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+XG5cdCAqL1xuXHR2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb25uZWN0YWJsZU9ic2VydmFibGUoc291cmNlLCBzdWJqZWN0RmFjdG9yeSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0RmFjdG9yeTtcblx0ICAgIH1cblx0ICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3ViamVjdCgpLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgIH07XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmdldFN1YmplY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG5cdCAgICAgICAgaWYgKHN1YmplY3QgJiYgIXN1YmplY3QuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAodGhpcy5zdWJqZWN0ID0gdGhpcy5zdWJqZWN0RmFjdG9yeSgpKTtcblx0ICAgIH07XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZSh0aGlzLmdldFN1YmplY3QoKSk7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24odGhpcykpO1xuXHQgICAgICAgIHJldHVybiAodGhpcy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb24pO1xuXHQgICAgfTtcblx0ICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudE9ic2VydmFibGUodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBvcGVuZWQgZm9yIGBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbmAuXG5cdCAgICAgKiBOb3QgdG8gY2FsbCBmcm9tIG90aGVycy5cblx0ICAgICAqL1xuXHQgICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fY2xvc2VTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ29ubmVjdGFibGVTdWJzY3JpcHRpb24oY29ubmVjdGFibGUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG5cdCAgICB9XG5cdCAgICBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG5cdCAgICAgICAgY29ubmVjdGFibGUuX2Nsb3NlU3Vic2NyaXB0aW9uKCk7XG5cdCAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZkNvdW50T2JzZXJ2YWJsZShjb25uZWN0YWJsZSwgcmVmQ291bnQpIHtcblx0ICAgICAgICBpZiAocmVmQ291bnQgPT09IHZvaWQgMCkgeyByZWZDb3VudCA9IDA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG5cdCAgICAgICAgdGhpcy5yZWZDb3VudCA9IHJlZkNvdW50O1xuXHQgICAgfVxuXHQgICAgUmVmQ291bnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlO1xuXHQgICAgICAgIHZhciByZWZDb3VudFN1YnNjcmliZXIgPSBuZXcgUmVmQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMpO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBjb25uZWN0YWJsZS5zdWJzY3JpYmUocmVmQ291bnRTdWJzY3JpYmVyKTtcblx0ICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCAmJiArK3RoaXMucmVmQ291bnQgPT09IDEpIHtcblx0ICAgICAgICAgICAgcmVmQ291bnRTdWJzY3JpYmVyLmNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5jb25uZWN0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlZkNvdW50T2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWZDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlZkNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZkNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcmVmQ291bnRPYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMucmVmQ291bnRPYnNlcnZhYmxlID0gcmVmQ291bnRPYnNlcnZhYmxlO1xuXHQgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHJlZkNvdW50T2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcblx0ICAgIH1cblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuX3Jlc2V0Q29ubmVjdGFibGUoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5fcmVzZXRDb25uZWN0YWJsZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9yZXNldENvbm5lY3RhYmxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG5cdCAgICAgICAgdmFyIG9ic0Nvbm5lY3Rpb24gPSBvYnNlcnZhYmxlLmNvbm5lY3Rpb247XG5cdCAgICAgICAgdmFyIHN1YkNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb247XG5cdCAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlLnJlZkNvdW50ID0gMDtcblx0ICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlLmNvbm5lY3Rpb24gPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG5cdCAgICAgICAgaWYgKG9ic2VydmFibGUucmVmQ291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoLS1vYnNlcnZhYmxlLnJlZkNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBvYnNDb25uZWN0aW9uID0gb2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuXHQgICAgICAgICAgICB2YXIgc3ViQ29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcblx0ICAgICAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuXHQgICAgICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5jb25uZWN0aW9uID0gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVmQ291bnRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jYXRjaCA9IGNhdGNoXzEuX2NhdGNoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jYXRjaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIENhdGNoZXMgZXJyb3JzIG9uIHRoZSBvYnNlcnZhYmxlIHRvIGJlIGhhbmRsZWQgYnkgcmV0dXJuaW5nIGEgbmV3IG9ic2VydmFibGUgb3IgdGhyb3dpbmcgYW4gZXJyb3IuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhcyBhcmd1bWVudHMgYGVycmAsIHdoaWNoIGlzIHRoZSBlcnJvciwgYW5kIGBjYXVnaHRgLCB3aGljaFxuXHQgKiAgaXMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlLCBpbiBjYXNlIHlvdSdkIGxpa2UgdG8gXCJyZXRyeVwiIHRoYXQgb2JzZXJ2YWJsZSBieSByZXR1cm5pbmcgaXQgYWdhaW4uIFdoYXRldmVyIG9ic2VydmFibGVcblx0ICogIGlzIHJldHVybmVkIGJ5IHRoZSBgc2VsZWN0b3JgIHdpbGwgYmUgdXNlZCB0byBjb250aW51ZSB0aGUgb2JzZXJ2YWJsZSBjaGFpbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gb2JzZXJ2YWJsZSB0aGF0IG9yaWdpbmF0ZXMgZnJvbSBlaXRoZXIgdGhlIHNvdXJjZSBvciB0aGUgb2JzZXJ2YWJsZSByZXR1cm5lZCBieSB0aGVcblx0ICogIGNhdGNoIGBzZWxlY3RvcmAgZnVuY3Rpb24uXG5cdCAqIEBtZXRob2QgY2F0Y2hcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIF9jYXRjaChzZWxlY3Rvcikge1xuXHQgICAgdmFyIG9wZXJhdG9yID0gbmV3IENhdGNoT3BlcmF0b3Ioc2VsZWN0b3IpO1xuXHQgICAgdmFyIGNhdWdodCA9IHRoaXMubGlmdChvcGVyYXRvcik7XG5cdCAgICByZXR1cm4gKG9wZXJhdG9yLmNhdWdodCA9IGNhdWdodCk7XG5cdH1cblx0ZXhwb3J0cy5fY2F0Y2ggPSBfY2F0Y2g7XG5cdHZhciBDYXRjaE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENhdGNoT3BlcmF0b3Ioc2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBDYXRjaE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQ2F0Y2hTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc2VsZWN0b3IsIHRoaXMuY2F1Z2h0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENhdGNoT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIENhdGNoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQ2F0Y2hTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ2F0Y2hTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzZWxlY3RvciwgY2F1Z2h0KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmNhdWdodCA9IGNhdWdodDtcblx0ICAgIH1cblx0ICAgIC8vIE5PVEU6IG92ZXJyaWRpbmcgYGVycm9yYCBpbnN0ZWFkIG9mIGBfZXJyb3JgIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudFxuXHQgICAgLy8gdG8gaGF2ZSB0aGlzIGZsYWcgdGhpcyBzdWJzY3JpYmVyIGFzIGBpc1N0b3BwZWRgLlxuXHQgICAgQ2F0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnNlbGVjdG9yKGVyciwgdGhpcy5jYXVnaHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDYXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5yZW1vdmUodGhpcyk7XG5cdCAgICAgICAgcmVzdWx0LnN1YnNjcmliZSh0aGlzLmRlc3RpbmF0aW9uKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ2F0Y2hTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY29tYmluZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29tYmluZUFsbCA9IGNvbWJpbmVBbGxfMS5jb21iaW5lQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lQWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIGNvbWJpbmVMYXRlc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMzKTtcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnkgd2FpdGluZ1xuXHQgKiBmb3IgdGhlIG91dGVyIE9ic2VydmFibGUgdG8gY29tcGxldGUsIHRoZW4gYXBwbHlpbmcge0BsaW5rIGNvbWJpbmVMYXRlc3R9LlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBhcHBseWluZ1xuXHQgKiB7QGxpbmsgY29tYmluZUxhdGVzdH0gd2hlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFRha2VzIGFuIE9ic2VydmFibGUgb2YgT2JzZXJ2YWJsZXMsIGFuZCBjb2xsZWN0cyBhbGwgT2JzZXJ2YWJsZXMgZnJvbSBpdC5cblx0ICogT25jZSB0aGUgb3V0ZXIgT2JzZXJ2YWJsZSBjb21wbGV0ZXMsIGl0IHN1YnNjcmliZXMgdG8gYWxsIGNvbGxlY3RlZFxuXHQgKiBPYnNlcnZhYmxlcyBhbmQgY29tYmluZXMgdGhlaXIgdmFsdWVzIHVzaW5nIHRoZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cblx0ICogc3RyYXRlZ3ksIHN1Y2ggdGhhdDpcblx0ICogLSBFdmVyeSB0aW1lIGFuIGlubmVyIE9ic2VydmFibGUgZW1pdHMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cy5cblx0ICogLSBXaGVuIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlIGVtaXRzLCBpdCBlbWl0cyBhbGwgb2YgdGhlIGxhdGVzdCB2YWx1ZXMgYnk6XG5cdCAqICAgLSBJZiBhIGBwcm9qZWN0YCBmdW5jdGlvbiBpcyBwcm92aWRlZCwgaXQgaXMgY2FsbGVkIHdpdGggZWFjaCByZWNlbnQgdmFsdWVcblx0ICogICAgIGZyb20gZWFjaCBpbm5lciBPYnNlcnZhYmxlIGluIHdoYXRldmVyIG9yZGVyIHRoZXkgYXJyaXZlZCwgYW5kIHRoZSByZXN1bHRcblx0ICogICAgIG9mIHRoZSBgcHJvamVjdGAgZnVuY3Rpb24gaXMgd2hhdCBpcyBlbWl0dGVkIGJ5IHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogICAtIElmIHRoZXJlIGlzIG5vIGBwcm9qZWN0YCBmdW5jdGlvbiwgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBtb3N0IHJlY2VudFxuXHQgKiAgICAgdmFsdWVzIGlzIGVtaXR0ZWQgYnkgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgdHdvIGNsaWNrIGV2ZW50cyB0byBhIGZpbml0ZSBpbnRlcnZhbCBPYnNlcnZhYmxlLCB0aGVuIGFwcGx5IGNvbWJpbmVBbGw8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKE1hdGgucmFuZG9tKCkqMjAwMCkudGFrZSgzKVxuXHQgKiApLnRha2UoMik7XG5cdCAqIHZhciByZXN1bHQgPSBoaWdoZXJPcmRlci5jb21iaW5lQWxsKCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVMYXRlc3R9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gbWFwIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZXMgZnJvbSBlYWNoIGlubmVyIE9ic2VydmFibGUgaW50byBhIG5ldyByZXN1bHQuIFRha2VzIGVhY2ggb2YgdGhlIG1vc3Rcblx0ICogcmVjZW50IHZhbHVlcyBmcm9tIGVhY2ggY29sbGVjdGVkIGlubmVyIE9ic2VydmFibGUgYXMgYXJndW1lbnRzLCBpbiBvcmRlci5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgcmVzdWx0cyBvciBhcnJheXMgb2YgcmVjZW50XG5cdCAqIHZhbHVlcy5cblx0ICogQG1ldGhvZCBjb21iaW5lQWxsXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb21iaW5lQWxsKHByb2plY3QpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IGNvbWJpbmVMYXRlc3RfMS5Db21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuY29tYmluZUFsbCA9IGNvbWJpbmVBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb21iaW5lTGF0ZXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lTGF0ZXN0ID0gY29tYmluZUxhdGVzdF8xLmNvbWJpbmVMYXRlc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVMYXRlc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb25jYXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ1KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdCA9IGNvbmNhdF8xLmNvbmNhdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY29uY2F0QWxsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyOSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRBbGwgPSBjb25jYXRBbGxfMS5jb25jYXRBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDYpO1xuXHQvKipcblx0ICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieVxuXHQgKiBjb25jYXRlbmF0aW5nIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpbiBvcmRlci5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgYnkgcHV0dGluZyBvbmVcblx0ICogaW5uZXIgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdEFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogSm9pbnMgZXZlcnkgT2JzZXJ2YWJsZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgKGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUpLCBpblxuXHQgKiBhIHNlcmlhbCBmYXNoaW9uLiBJdCBzdWJzY3JpYmVzIHRvIGVhY2ggaW5uZXIgT2JzZXJ2YWJsZSBvbmx5IGFmdGVyIHRoZVxuXHQgKiBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlIGhhcyBjb21wbGV0ZWQsIGFuZCBtZXJnZXMgYWxsIG9mIHRoZWlyIHZhbHVlcyBpbnRvXG5cdCAqIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBfX1dhcm5pbmc6X18gSWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIE9ic2VydmFibGVzIHF1aWNrbHkgYW5kXG5cdCAqIGVuZGxlc3NseSwgYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpdCBlbWl0cyBnZW5lcmFsbHkgY29tcGxldGUgc2xvd2VyIHRoYW5cblx0ICogdGhlIHNvdXJjZSBlbWl0cywgeW91IGNhbiBydW4gaW50byBtZW1vcnkgaXNzdWVzIGFzIHRoZSBpbmNvbWluZyBPYnNlcnZhYmxlc1xuXHQgKiBjb2xsZWN0IGluIGFuIHVuYm91bmRlZCBidWZmZXIuXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRBbGxgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlQWxsYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcblx0ICogdG8gYDFgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcblx0ICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5jb25jYXRBbGwoKTtcblx0ICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaH1cblx0ICogQHNlZSB7QGxpbmsgemlwQWxsfVxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIGVtaXR0aW5nIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5uZXJcblx0ICogT2JzZXJ2YWJsZXMgY29uY2F0ZW5hdGVkLlxuXHQgKiBAbWV0aG9kIGNvbmNhdEFsbFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0QWxsKCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdEFsbCA9IGNvbmNhdEFsbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0QWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY29uY2F0TWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzMSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRNYXAgPSBjb25jYXRNYXBfMS5jb25jYXRNYXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZU1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzIpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLCBpbiBhIHNlcmlhbGl6ZWQgZmFzaGlvbiB3YWl0aW5nIGZvciBlYWNoIG9uZSB0byBjb21wbGV0ZSBiZWZvcmVcblx0ICogbWVyZ2luZyB0aGUgbmV4dC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuXHQgKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgY29uY2F0QWxsfS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0TWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG5cdCAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cblx0ICogcmV0dXJucyBhbiAoc28tY2FsbGVkIFwiaW5uZXJcIikgT2JzZXJ2YWJsZS4gRWFjaCBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpc1xuXHQgKiBjb25jYXRlbmF0ZWQgd2l0aCB0aGUgcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogX19XYXJuaW5nOl9fIGlmIHNvdXJjZSB2YWx1ZXMgYXJyaXZlIGVuZGxlc3NseSBhbmQgZmFzdGVyIHRoYW4gdGhlaXJcblx0ICogY29ycmVzcG9uZGluZyBpbm5lciBPYnNlcnZhYmxlcyBjYW4gY29tcGxldGUsIGl0IHdpbGwgcmVzdWx0IGluIG1lbW9yeSBpc3N1ZXNcblx0ICogYXMgaW5uZXIgT2JzZXJ2YWJsZXMgYW1hc3MgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlciB3YWl0aW5nIGZvciB0aGVpciB0dXJuIHRvXG5cdCAqIGJlIHN1YnNjcmliZWQgdG8uXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRNYXBgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlTWFwYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcblx0ICogdG8gYDFgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MuY29uY2F0TWFwKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cblx0ICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cblx0ICogT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBvYnNlcnZhYmxlIG9mIHZhbHVlcyBtZXJnZWQgZnJvbSB0aGUgcHJvamVjdGVkXG5cdCAqIE9ic2VydmFibGVzIGFzIHRoZXkgd2VyZSBzdWJzY3JpYmVkIHRvLCBvbmUgYXQgYSB0aW1lLiBPcHRpb25hbGx5LCB0aGVzZVxuXHQgKiB2YWx1ZXMgbWF5IGhhdmUgYmVlbiBwcm9qZWN0ZWQgZnJvbSBhIHBhc3NlZCBgcHJvamVjdFJlc3VsdGAgYXJndW1lbnQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuXHQgKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG5cdCAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgdGFraW5nIHZhbHVlcyBmcm9tIGVhY2ggcHJvamVjdGVkIGlubmVyXG5cdCAqIE9ic2VydmFibGUgc2VxdWVudGlhbGx5LlxuXHQgKiBAbWV0aG9kIGNvbmNhdE1hcFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0TWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZU1hcF8xLk1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdE1hcCA9IGNvbmNhdE1hcDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0LyoqXG5cdCAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuXHQgKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgbWVyZ2VBbGx9Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuXHQgKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG5cdCAqIHJldHVybnMgYW4gT2JzZXJ2YWJsZSwgYW5kIHRoZW4gbWVyZ2luZyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgYW5kXG5cdCAqIGVtaXR0aW5nIHRoZSByZXN1bHRzIG9mIHRoaXMgbWVyZ2VyLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gZWFjaCBsZXR0ZXIgdG8gYW4gT2JzZXJ2YWJsZSB0aWNraW5nIGV2ZXJ5IDEgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgbGV0dGVycyA9IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJyk7XG5cdCAqIHZhciByZXN1bHQgPSBsZXR0ZXJzLm1lcmdlTWFwKHggPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLm1hcChpID0+IHgraSlcblx0ICogKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCA/aW5kZXg6IG51bWJlcik6IE9ic2VydmFibGV9IHByb2plY3QgQSBmdW5jdGlvblxuXHQgKiB0aGF0LCB3aGVuIGFwcGxpZWQgdG8gYW4gaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmV0dXJucyBhblxuXHQgKiBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcblx0ICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcblx0ICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG5cdCAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcblx0ICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuXHQgKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG1lcmdpbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE9ic2VydmFibGVzIG9idGFpbmVkXG5cdCAqIGZyb20gdGhpcyB0cmFuc2Zvcm1hdGlvbi5cblx0ICogQG1ldGhvZCBtZXJnZU1hcFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkpO1xuXHR9XG5cdGV4cG9ydHMubWVyZ2VNYXAgPSBtZXJnZU1hcDtcblx0dmFyIE1lcmdlTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuXHQgICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICB9XG5cdCAgICBNZXJnZU1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlTWFwU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmNvbmN1cnJlbnQpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBPcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5NZXJnZU1hcE9wZXJhdG9yID0gTWVyZ2VNYXBPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgTWVyZ2VNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBNZXJnZU1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5TmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5TmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuXHQgICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgaXNoLCB2YWx1ZSwgaW5kZXgpKTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9ub3RpZnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuXHQgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLk1lcmdlTWFwU3Vic2NyaWJlciA9IE1lcmdlTWFwU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBjb25jYXRNYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0TWFwVG8gPSBjb25jYXRNYXBUb18xLmNvbmNhdE1hcFRvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZU1hcFRvXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNSk7XG5cdC8qKlxuXHQgKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgc2FtZSBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBtdWx0aXBsZVxuXHQgKiB0aW1lcyBpbiBhIHNlcmlhbGl6ZWQgZmFzaGlvbiBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGNvbmNhdE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcblx0ICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIEVhY2ggbmV3IGBpbm5lck9ic2VydmFibGVgXG5cdCAqIGluc3RhbmNlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGlzIGNvbmNhdGVuYXRlZCB3aXRoIHRoZSBwcmV2aW91c1xuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCBpbnN0YW5jZS5cblx0ICpcblx0ICogX19XYXJuaW5nOl9fIGlmIHNvdXJjZSB2YWx1ZXMgYXJyaXZlIGVuZGxlc3NseSBhbmQgZmFzdGVyIHRoYW4gdGhlaXJcblx0ICogY29ycmVzcG9uZGluZyBpbm5lciBPYnNlcnZhYmxlcyBjYW4gY29tcGxldGUsIGl0IHdpbGwgcmVzdWx0IGluIG1lbW9yeSBpc3N1ZXNcblx0ICogYXMgaW5uZXIgT2JzZXJ2YWJsZXMgYW1hc3MgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlciB3YWl0aW5nIGZvciB0aGVpciB0dXJuIHRvXG5cdCAqIGJlIHN1YnNjcmliZWQgdG8uXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRNYXBUb2AgaXMgZXF1aXZhbGVudCB0byBgbWVyZ2VNYXBUb2Agd2l0aCBjb25jdXJyZW5jeSBwYXJhbWV0ZXJcblx0ICogc2V0IHRvIGAxYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHRpY2sgZXZlcnkgc2Vjb25kIGZyb20gMCB0byAzLCB3aXRoIG5vIGNvbmN1cnJlbmN5PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmNvbmNhdE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIG9mIHZhbHVlcyBtZXJnZWQgdG9nZXRoZXIgYnkgam9pbmluZyB0aGVcblx0ICogcGFzc2VkIG9ic2VydmFibGUgd2l0aCBpdHNlbGYsIG9uZSBhZnRlciB0aGUgb3RoZXIsIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWRcblx0ICogZnJvbSB0aGUgc291cmNlLlxuXHQgKiBAbWV0aG9kIGNvbmNhdE1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb25jYXRNYXBUbyhpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBtZXJnZU1hcFRvXzEuTWVyZ2VNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdE1hcFRvID0gY29uY2F0TWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcFRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBzYW1lIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIG11bHRpcGxlXG5cdCAqIHRpbWVzIGluIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgbWVyZ2VNYXB9LCBidXQgbWFwcyBlYWNoIHZhbHVlIGFsd2F5c1xuXHQgKiB0byB0aGUgc2FtZSBpbm5lciBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gbWVyZ2VzIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBpbnRvIG9uZVxuXHQgKiBzaW5nbGUgT2JzZXJ2YWJsZSwgd2hpY2ggaXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgc3RhcnQgYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSB0aWNraW5nIGV2ZXJ5IDEgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLm1lcmdlTWFwVG8oUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZX1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlIGdpdmVuXG5cdCAqIGBpbm5lck9ic2VydmFibGVgIChhbmQgb3B0aW9uYWxseSB0cmFuc2Zvcm1lZCB0aHJvdWdoIGByZXN1bHRTZWxlY3RvcmApIGV2ZXJ5XG5cdCAqIHRpbWUgYSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBtZXJnZU1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZU1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpKTtcblx0fVxuXHRleHBvcnRzLm1lcmdlTWFwVG8gPSBtZXJnZU1hcFRvO1xuXHQvLyBUT0RPOiBGaWd1cmUgb3V0IGNvcnJlY3Qgc2lnbmF0dXJlIGhlcmU6IGFuIE9wZXJhdG9yPE9ic2VydmFibGU8VD4sIFI+XG5cdC8vICAgICAgIG5lZWRzIHRvIGltcGxlbWVudCBjYWxsKG9ic2VydmVyOiBTdWJzY3JpYmVyPFI+KTogU3Vic2NyaWJlcjxPYnNlcnZhYmxlPFQ+PlxuXHR2YXIgTWVyZ2VNYXBUb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlTWFwVG9PcGVyYXRvcihpc2gsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICB9XG5cdCAgICBNZXJnZU1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWVyZ2VNYXBUb1N1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMuaXNoLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmNvbmN1cnJlbnQpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBUb09wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk1lcmdlTWFwVG9PcGVyYXRvciA9IE1lcmdlTWFwVG9PcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgTWVyZ2VNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1lcmdlTWFwVG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWVyZ2VNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlzaCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSB0aGlzLnJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgICAgIHZhciBpc2ggPSB0aGlzLmlzaDtcblx0ICAgICAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICAgICAgdGhpcy5faW5uZXJTdWIoaXNoLCBkZXN0aW5hdGlvbiwgcmVzdWx0U2VsZWN0b3IsIHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIGRlc3RpbmF0aW9uLCByZXN1bHRTZWxlY3RvciwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBpc2gsIHZhbHVlLCBpbmRleCkpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG5cdCAgICAgICAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5U2VsZWN0UmVzdWx0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLnRyeVNlbGVjdFJlc3VsdCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuXHQgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWVyZ2VNYXBUb1N1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuTWVyZ2VNYXBUb1N1YnNjcmliZXIgPSBNZXJnZU1hcFRvU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGNvdW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb3VudCA9IGNvdW50XzEuY291bnQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQ291bnRzIHRoZSBudW1iZXIgb2YgZW1pc3Npb25zIG9uIHRoZSBzb3VyY2UgYW5kIGVtaXRzIHRoYXQgbnVtYmVyIHdoZW4gdGhlXG5cdCAqIHNvdXJjZSBjb21wbGV0ZXMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UZWxscyBob3cgbWFueSB2YWx1ZXMgd2VyZSBlbWl0dGVkLCB3aGVuIHRoZSBzb3VyY2Vcblx0ICogY29tcGxldGVzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYGNvdW50YCB0cmFuc2Zvcm1zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB2YWx1ZXMgaW50byBhbiBPYnNlcnZhYmxlIHRoYXRcblx0ICogZW1pdHMgYSBzaW5nbGUgdmFsdWUgdGhhdCByZXByZXNlbnRzIHRoZSBudW1iZXIgb2YgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlXG5cdCAqIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgdGVybWluYXRlcyB3aXRoIGFuIGVycm9yLCBgY291bnRgXG5cdCAqIHdpbGwgcGFzcyB0aGlzIGVycm9yIG5vdGlmaWNhdGlvbiBhbG9uZyB3aXRob3V0IGVtaXR0aW5nIGFuIHZhbHVlIGZpcnN0LiBJZlxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUgZG9lcyBub3QgdGVybWluYXRlIGF0IGFsbCwgYGNvdW50YCB3aWxsIG5laXRoZXIgZW1pdFxuXHQgKiBhIHZhbHVlIG5vciB0ZXJtaW5hdGUuIFRoaXMgb3BlcmF0b3IgdGFrZXMgYW4gb3B0aW9uYWwgYHByZWRpY2F0ZWAgZnVuY3Rpb25cblx0ICogYXMgYXJndW1lbnQsIGluIHdoaWNoIGNhc2UgdGhlIG91dHB1dCBlbWlzc2lvbiB3aWxsIHJlcHJlc2VudCB0aGUgbnVtYmVyIG9mXG5cdCAqIHNvdXJjZSB2YWx1ZXMgdGhhdCBtYXRjaGVkIGB0cnVlYCB3aXRoIHRoZSBgcHJlZGljYXRlYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnRzIGhvdyBtYW55IHNlY29uZHMgaGF2ZSBwYXNzZWQgYmVmb3JlIHRoZSBmaXJzdCBjbGljayBoYXBwZW5lZDwvY2FwdGlvbj5cblx0ICogdmFyIHNlY29uZHMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgc2Vjb25kc0JlZm9yZUNsaWNrID0gc2Vjb25kcy50YWtlVW50aWwoY2xpY2tzKTtcblx0ICogdmFyIHJlc3VsdCA9IHNlY29uZHNCZWZvcmVDbGljay5jb3VudCgpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db3VudHMgaG93IG1hbnkgb2RkIG51bWJlcnMgYXJlIHRoZXJlIGJldHdlZW4gMSBhbmQgNzwvY2FwdGlvbj5cblx0ICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDcpO1xuXHQgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb3VudChpID0+IGkgJSAyID09PSAxKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgbWF4fVxuXHQgKiBAc2VlIHtAbGluayBtaW59XG5cdCAqIEBzZWUge0BsaW5rIHJlZHVjZX1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaTogbnVtYmVyLCBzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBib29sZWFufSBbcHJlZGljYXRlXSBBXG5cdCAqIGJvb2xlYW4gZnVuY3Rpb24gdG8gc2VsZWN0IHdoYXQgdmFsdWVzIGFyZSB0byBiZSBjb3VudGVkLiBJdCBpcyBwcm92aWRlZCB3aXRoXG5cdCAqIGFyZ3VtZW50cyBvZjpcblx0ICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIC0gYGluZGV4YDogdGhlICh6ZXJvLWJhc2VkKSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiAtIGBzb3VyY2VgOiB0aGUgc291cmNlIE9ic2VydmFibGUgaW5zdGFuY2UgaXRzZWxmLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIG9uZSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSBjb3VudCBhc1xuXHQgKiBkZXNjcmliZWQgYWJvdmUuXG5cdCAqIEBtZXRob2QgY291bnRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNvdW50KHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQ291bnRPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLmNvdW50ID0gY291bnQ7XG5cdHZhciBDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENvdW50T3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIENvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvdW50T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIENvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuY291bnQrKztcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJlZGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrLCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5jb3VudCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDb3VudFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBkZW1hdGVyaWFsaXplXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzOSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZV8xLmRlbWF0ZXJpYWxpemU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbWF0ZXJpYWxpemUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCB0cmFuc2Zvcm1zIE5vdGlmaWNhdGlvbiBvYmplY3RzIGludG8gdGhlIGl0ZW1zIG9yIG5vdGlmaWNhdGlvbnMgdGhleSByZXByZXNlbnQuXG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGFuZCBub3RpZmljYXRpb25zIGVtYmVkZGVkIGluIE5vdGlmaWNhdGlvbiBvYmplY3RzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGRlbWF0ZXJpYWxpemVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlbWF0ZXJpYWxpemUoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZTtcblx0dmFyIERlTWF0ZXJpYWxpemVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBEZU1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlTWF0ZXJpYWxpemVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICB9XG5cdCAgICBEZU1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YWx1ZS5vYnNlcnZlKHRoaXMuZGVzdGluYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGVib3VuY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlYm91bmNlID0gZGVib3VuY2VfMS5kZWJvdW5jZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogRW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbmx5IGFmdGVyIGEgcGFydGljdWxhciB0aW1lIHNwYW5cblx0ICogZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUgaGFzIHBhc3NlZCB3aXRob3V0IGFub3RoZXIgc291cmNlIGVtaXNzaW9uLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBkZWJvdW5jZVRpbWV9LCBidXQgdGhlIHRpbWUgc3BhbiBvZlxuXHQgKiBlbWlzc2lvbiBzaWxlbmNlIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZGVib3VuY2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBkZWJvdW5jZWAgZGVsYXlzIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IGRyb3BzIHByZXZpb3VzXG5cdCAqIHBlbmRpbmcgZGVsYXllZCBlbWlzc2lvbnMgaWYgYSBuZXcgdmFsdWUgYXJyaXZlcyBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIFRoaXMgb3BlcmF0b3Iga2VlcHMgdHJhY2sgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLCBhbmQgc3Bhd25zIGEgZHVyYXRpb24gT2JzZXJ2YWJsZSBieSBjYWxsaW5nIHRoZVxuXHQgKiBgZHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24uIFRoZSB2YWx1ZSBpcyBlbWl0dGVkIG9ubHkgd2hlbiB0aGUgZHVyYXRpb25cblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgYW5kIGlmIG5vIG90aGVyIHZhbHVlIHdhcyBlbWl0dGVkIG9uXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBzaW5jZSB0aGUgZHVyYXRpb24gT2JzZXJ2YWJsZSB3YXMgc3Bhd25lZC4gSWYgYSBuZXdcblx0ICogdmFsdWUgYXBwZWFycyBiZWZvcmUgdGhlIGR1cmF0aW9uIE9ic2VydmFibGUgZW1pdHMsIHRoZSBwcmV2aW91cyB2YWx1ZSB3aWxsXG5cdCAqIGJlIGRyb3BwZWQgYW5kIHdpbGwgbm90IGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBMaWtlIHtAbGluayBkZWJvdW5jZVRpbWV9LCB0aGlzIGlzIGEgcmF0ZS1saW1pdGluZyBvcGVyYXRvciwgYW5kIGFsc28gYVxuXHQgKiBkZWxheS1saWtlIG9wZXJhdG9yIHNpbmNlIG91dHB1dCBlbWlzc2lvbnMgZG8gbm90IG5lY2Vzc2FyaWx5IG9jY3VyIGF0IHRoZVxuXHQgKiBzYW1lIHRpbWUgYXMgdGhleSBkaWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhZnRlciBhIGJ1cnN0IG9mIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5kZWJvdW5jZSgoKSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYXVkaXR9XG5cdCAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZX1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IE9ic2VydmFibGV8UHJvbWlzZX0gZHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uXG5cdCAqIHRoYXQgcmVjZWl2ZXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgZm9yIGNvbXB1dGluZyB0aGUgdGltZW91dFxuXHQgKiBkdXJhdGlvbiBmb3IgZWFjaCBzb3VyY2UgdmFsdWUsIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gT2JzZXJ2YWJsZSByZXR1cm5lZCBieVxuXHQgKiBgZHVyYXRpb25TZWxlY3RvcmAsIGFuZCBtYXkgZHJvcCBzb21lIHZhbHVlcyBpZiB0aGV5IG9jY3VyIHRvbyBmcmVxdWVudGx5LlxuXHQgKiBAbWV0aG9kIGRlYm91bmNlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWJvdW5jZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmRlYm91bmNlID0gZGVib3VuY2U7XG5cdHZhciBEZWJvdW5jZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBEZWJvdW5jZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVib3VuY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWJvdW5jZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlYm91bmNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5kdXJhdGlvblNlbGVjdG9yLmNhbGwodGhpcywgdmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlLCByZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKTtcblx0ICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZVN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGVib3VuY2VUaW1lXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWJvdW5jZVRpbWUgPSBkZWJvdW5jZVRpbWVfMS5kZWJvdW5jZVRpbWU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdC8qKlxuXHQgKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9ubHkgYWZ0ZXIgYSBwYXJ0aWN1bGFyIHRpbWUgc3BhblxuXHQgKiBoYXMgcGFzc2VkIHdpdGhvdXQgYW5vdGhlciBzb3VyY2UgZW1pc3Npb24uXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlbGF5fSwgYnV0IHBhc3NlcyBvbmx5IHRoZSBtb3N0XG5cdCAqIHJlY2VudCB2YWx1ZSBmcm9tIGVhY2ggYnVyc3Qgb2YgZW1pc3Npb25zLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kZWJvdW5jZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBkZWJvdW5jZVRpbWVgIGRlbGF5cyB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCBkcm9wc1xuXHQgKiBwcmV2aW91cyBwZW5kaW5nIGRlbGF5ZWQgZW1pc3Npb25zIGlmIGEgbmV3IHZhbHVlIGFycml2ZXMgb24gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGlzIG9wZXJhdG9yIGtlZXBzIHRyYWNrIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSBmcm9tIHRoZVxuXHQgKiBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoYXQgb25seSB3aGVuIGBkdWVUaW1lYCBlbm91Z2ggdGltZSBoYXMgcGFzc2VkXG5cdCAqIHdpdGhvdXQgYW55IG90aGVyIHZhbHVlIGFwcGVhcmluZyBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGEgbmV3IHZhbHVlXG5cdCAqIGFwcGVhcnMgYmVmb3JlIGBkdWVUaW1lYCBzaWxlbmNlIG9jY3VycywgdGhlIHByZXZpb3VzIHZhbHVlIHdpbGwgYmUgZHJvcHBlZFxuXHQgKiBhbmQgd2lsbCBub3QgYmUgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIFRoaXMgaXMgYSByYXRlLWxpbWl0aW5nIG9wZXJhdG9yLCBiZWNhdXNlIGl0IGlzIGltcG9zc2libGUgZm9yIG1vcmUgdGhhbiBvbmVcblx0ICogdmFsdWUgdG8gYmUgZW1pdHRlZCBpbiBhbnkgdGltZSB3aW5kb3cgb2YgZHVyYXRpb24gYGR1ZVRpbWVgLCBidXQgaXQgaXMgYWxzb1xuXHQgKiBhIGRlbGF5LWxpa2Ugb3BlcmF0b3Igc2luY2Ugb3V0cHV0IGVtaXNzaW9ucyBkbyBub3Qgb2NjdXIgYXQgdGhlIHNhbWUgdGltZSBhc1xuXHQgKiB0aGV5IGRpZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuIE9wdGlvbmFsbHkgdGFrZXMgYSB7QGxpbmsgU2NoZWR1bGVyfSBmb3Jcblx0ICogbWFuYWdpbmcgdGltZXJzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhZnRlciBhIGJ1cnN0IG9mIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5kZWJvdW5jZVRpbWUoMTAwMCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGF1ZGl0VGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBkdWVUaW1lIFRoZSB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWVcblx0ICogdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBmb3IgdGhlIHdpbmRvdyBvZlxuXHQgKiB0aW1lIHJlcXVpcmVkIHRvIHdhaXQgZm9yIGVtaXNzaW9uIHNpbGVuY2UgYmVmb3JlIGVtaXR0aW5nIHRoZSBtb3N0IHJlY2VudFxuXHQgKiBzb3VyY2UgdmFsdWUuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuXHQgKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSB0aW1lb3V0IGZvciBlYWNoIHZhbHVlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgYGR1ZVRpbWVgLCBhbmQgbWF5IGRyb3Agc29tZSB2YWx1ZXMgaWYgdGhleSBvY2N1clxuXHQgKiB0b28gZnJlcXVlbnRseS5cblx0ICogQG1ldGhvZCBkZWJvdW5jZVRpbWVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlVGltZShkdWVUaW1lLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWJvdW5jZVRpbWVPcGVyYXRvcihkdWVUaW1lLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmRlYm91bmNlVGltZSA9IGRlYm91bmNlVGltZTtcblx0dmFyIERlYm91bmNlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZU9wZXJhdG9yKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBEZWJvdW5jZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlYm91bmNlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdWVUaW1lLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZVRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVib3VuY2VUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVib3VuY2VUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSBkdWVUaW1lO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTtcblx0ICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1ZVRpbWUsIHRoaXMpKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5kZWJvdW5jZWROZXh0KCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmRlYm91bmNlZE5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jbGVhckRlYm91bmNlKCk7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyRGVib3VuY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChkZWJvdW5jZWRTdWJzY3JpcHRpb24gIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoZGVib3VuY2VkU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgZGVib3VuY2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlYm91bmNlVGltZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHtcblx0ICAgIHN1YnNjcmliZXIuZGVib3VuY2VkTmV4dCgpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGRlZmF1bHRJZkVtcHR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5XzEuZGVmYXVsdElmRW1wdHk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogRW1pdHMgYSBnaXZlbiB2YWx1ZSBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgY29tcGxldGVzIHdpdGhvdXQgZW1pdHRpbmcgYW55XG5cdCAqIGBuZXh0YCB2YWx1ZSwgb3RoZXJ3aXNlIG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHR1cm5zIG91dCB0byBiZSBlbXB0eSwgdGhlblxuXHQgKiB0aGlzIG9wZXJhdG9yIHdpbGwgZW1pdCBhIGRlZmF1bHQgdmFsdWUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmF1bHRJZkVtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgZGVmYXVsdElmRW1wdHlgIGVtaXRzIHRoZSB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgb3IgYVxuXHQgKiBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgaXMgZW1wdHkgKGNvbXBsZXRlcyB3aXRob3V0XG5cdCAqIGhhdmluZyBlbWl0dGVkIGFueSBgbmV4dGAgdmFsdWUpLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZiBubyBjbGlja3MgaGFwcGVuIGluIDUgc2Vjb25kcywgdGhlbiBlbWl0IFwibm8gY2xpY2tzXCI8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBjbGlja3NCZWZvcmVGaXZlID0gY2xpY2tzLnRha2VVbnRpbChSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMDApKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrc0JlZm9yZUZpdmUuZGVmYXVsdElmRW1wdHkoJ25vIGNsaWNrcycpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBlbXB0eX1cblx0ICogQHNlZSB7QGxpbmsgbGFzdH1cblx0ICpcblx0ICogQHBhcmFtIHthbnl9IFtkZWZhdWx0VmFsdWU9bnVsbF0gVGhlIGRlZmF1bHQgdmFsdWUgdXNlZCBpZiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgaXMgZW1wdHkuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBlaXRoZXIgdGhlIHNwZWNpZmllZFxuXHQgKiBgZGVmYXVsdFZhbHVlYCBpZiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgbm8gaXRlbXMsIG9yIHRoZSB2YWx1ZXMgZW1pdHRlZFxuXHQgKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgZGVmYXVsdElmRW1wdHlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlZmF1bHRJZkVtcHR5KGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IG51bGw7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlZmF1bHRJZkVtcHR5T3BlcmF0b3IoZGVmYXVsdFZhbHVlKSk7XG5cdH1cblx0ZXhwb3J0cy5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5O1xuXHR2YXIgRGVmYXVsdElmRW1wdHlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgfVxuXHQgICAgRGVmYXVsdElmRW1wdHlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlZmF1bHRWYWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGVsYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5ID0gZGVsYXlfMS5kZWxheTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIGlzRGF0ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBOb3RpZmljYXRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYxKTtcblx0LyoqXG5cdCAqIERlbGF5cyB0aGUgZW1pc3Npb24gb2YgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYSBnaXZlbiB0aW1lb3V0IG9yXG5cdCAqIHVudGlsIGEgZ2l2ZW4gRGF0ZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRpbWUgc2hpZnRzIGVhY2ggaXRlbSBieSBzb21lIHNwZWNpZmllZCBhbW91bnQgb2Zcblx0ICogbWlsbGlzZWNvbmRzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kZWxheS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogSWYgdGhlIGRlbGF5IGFyZ3VtZW50IGlzIGEgTnVtYmVyLCB0aGlzIG9wZXJhdG9yIHRpbWUgc2hpZnRzIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBieSB0aGF0IGFtb3VudCBvZiB0aW1lIGV4cHJlc3NlZCBpbiBtaWxsaXNlY29uZHMuIFRoZSByZWxhdGl2ZVxuXHQgKiB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cblx0ICpcblx0ICogSWYgdGhlIGRlbGF5IGFyZ3VtZW50IGlzIGEgRGF0ZSwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc3RhcnQgb2YgdGhlXG5cdCAqIE9ic2VydmFibGUgZXhlY3V0aW9uIHVudGlsIHRoZSBnaXZlbiBkYXRlIG9jY3Vycy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgZWFjaCBjbGljayBieSBvbmUgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheSgxMDAwKTsgLy8gZWFjaCBjbGljayBlbWl0dGVkIGFmdGVyIDEgc2Vjb25kXG5cdCAqIGRlbGF5ZWRDbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBhbGwgY2xpY2tzIHVudGlsIGEgZnV0dXJlIGRhdGUgaGFwcGVuczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGRhdGUgPSBuZXcgRGF0ZSgnTWFyY2ggMTUsIDIwNTAgMTI6MDA6MDAnKTsgLy8gaW4gdGhlIGZ1dHVyZVxuXHQgKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheShkYXRlKTsgLy8gY2xpY2sgZW1pdHRlZCBvbmx5IGFmdGVyIHRoYXQgZGF0ZVxuXHQgKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2VUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBkZWxheVdoZW59XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfERhdGV9IGRlbGF5IFRoZSBkZWxheSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgKGEgYG51bWJlcmApIG9yXG5cdCAqIGEgYERhdGVgIHVudGlsIHdoaWNoIHRoZSBlbWlzc2lvbiBvZiB0aGUgc291cmNlIGl0ZW1zIGlzIGRlbGF5ZWQuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Jcblx0ICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgdGltZS1zaGlmdCBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgdGltZW91dCBvciBEYXRlLlxuXHQgKiBAbWV0aG9kIGRlbGF5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWxheShkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlRGVsYXkgPSBpc0RhdGVfMS5pc0RhdGUoZGVsYXkpO1xuXHQgICAgdmFyIGRlbGF5Rm9yID0gYWJzb2x1dGVEZWxheSA/ICgrZGVsYXkgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZGVsYXkpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlPcGVyYXRvcihkZWxheUZvciwgc2NoZWR1bGVyKSk7XG5cdH1cblx0ZXhwb3J0cy5kZWxheSA9IGRlbGF5O1xuXHR2YXIgRGVsYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWxheU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBEZWxheU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVsYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXksIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIERlbGF5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmVycm9yZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2U7XG5cdCAgICAgICAgdmFyIHF1ZXVlID0gc291cmNlLnF1ZXVlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gc3RhdGUuZGVzdGluYXRpb247XG5cdCAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDAgJiYgKHF1ZXVlWzBdLnRpbWUgLSBzY2hlZHVsZXIubm93KCkpIDw9IDApIHtcblx0ICAgICAgICAgICAgcXVldWUuc2hpZnQoKS5ub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHZhciBkZWxheV8xID0gTWF0aC5tYXgoMCwgcXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSk7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGRlbGF5XzEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc291cmNlLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwge1xuXHQgICAgICAgICAgICBzb3VyY2U6IHRoaXMsIGRlc3RpbmF0aW9uOiB0aGlzLmRlc3RpbmF0aW9uLCBzY2hlZHVsZXI6IHNjaGVkdWxlclxuXHQgICAgICAgIH0pKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuXHQgICAgICAgIGlmICh0aGlzLmVycm9yZWQgPT09IHRydWUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgRGVsYXlNZXNzYWdlKHNjaGVkdWxlci5ub3coKSArIHRoaXMuZGVsYXksIG5vdGlmaWNhdGlvbik7XG5cdCAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKG1lc3NhZ2UpO1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoc2NoZWR1bGVyKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24oTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLmVycm9yZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMucXVldWUgPSBbXTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHR2YXIgRGVsYXlNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlbGF5TWVzc2FnZSh0aW1lLCBub3RpZmljYXRpb24pIHtcblx0ICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuXHQgICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIERlbGF5TWVzc2FnZTtcblx0fSgpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBkZWxheVdoZW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5V2hlbiA9IGRlbGF5V2hlbl8xLmRlbGF5V2hlbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBEZWxheXMgdGhlIGVtaXNzaW9uIG9mIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGEgZ2l2ZW4gdGltZSBzcGFuXG5cdCAqIGRldGVybWluZWQgYnkgdGhlIGVtaXNzaW9ucyBvZiBhbm90aGVyIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlbGF5fSwgYnV0IHRoZSB0aW1lIHNwYW4gb2YgdGhlXG5cdCAqIGRlbGF5IGR1cmF0aW9uIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZGVsYXlXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgZGVsYXlXaGVuYCB0aW1lIHNoaWZ0cyBlYWNoIGVtaXR0ZWQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYVxuXHQgKiB0aW1lIHNwYW4gZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUuIFdoZW4gdGhlIHNvdXJjZSBlbWl0cyBhIHZhbHVlLFxuXHQgKiB0aGUgYGRlbGF5RHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIHNvdXJjZSB2YWx1ZSBhc1xuXHQgKiBhcmd1bWVudCwgYW5kIHNob3VsZCByZXR1cm4gYW4gT2JzZXJ2YWJsZSwgY2FsbGVkIHRoZSBcImR1cmF0aW9uXCIgT2JzZXJ2YWJsZS5cblx0ICogVGhlIHNvdXJjZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IHdoZW4gdGhlIGR1cmF0aW9uXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSBvciBjb21wbGV0ZXMuXG5cdCAqXG5cdCAqIE9wdGlvbmFsbHksIGBkZWxheVdoZW5gIHRha2VzIGEgc2Vjb25kIGFyZ3VtZW50LCBgc3Vic2NyaXB0aW9uRGVsYXlgLCB3aGljaFxuXHQgKiBpcyBhbiBPYnNlcnZhYmxlLiBXaGVuIGBzdWJzY3JpcHRpb25EZWxheWAgZW1pdHMgaXRzIGZpcnN0IHZhbHVlIG9yXG5cdCAqIGNvbXBsZXRlcywgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQgdG8gYW5kIHN0YXJ0cyBiZWhhdmluZyBsaWtlXG5cdCAqIGRlc2NyaWJlZCBpbiB0aGUgcHJldmlvdXMgcGFyYWdyYXBoLiBJZiBgc3Vic2NyaXB0aW9uRGVsYXlgIGlzIG5vdCBwcm92aWRlZCxcblx0ICogYGRlbGF5V2hlbmAgd2lsbCBzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFzIHNvb24gYXMgdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkRlbGF5IGVhY2ggY2xpY2sgYnkgYSByYW5kb20gYW1vdW50IG9mIHRpbWUsIGJldHdlZW4gMCBhbmQgNSBzZWNvbmRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheVdoZW4oZXZlbnQgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKE1hdGgucmFuZG9tKCkgKiA1MDAwKVxuXHQgKiApO1xuXHQgKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZX0gZGVsYXlEdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdFxuXHQgKiByZXR1cm5zIGFuIE9ic2VydmFibGUgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoaWNoXG5cdCAqIGlzIHRoZW4gdXNlZCB0byBkZWxheSB0aGUgZW1pc3Npb24gb2YgdGhhdCBpdGVtIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuXHQgKiB1bnRpbCB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBmcm9tIHRoaXMgZnVuY3Rpb24gZW1pdHMgYSB2YWx1ZS5cblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzdWJzY3JpcHRpb25EZWxheSBBbiBPYnNlcnZhYmxlIHRoYXQgdHJpZ2dlcnMgdGhlXG5cdCAqIHN1YnNjcmlwdGlvbiB0byB0aGUgc291cmNlIE9ic2VydmFibGUgb25jZSBpdCBlbWl0cyBhbnkgdmFsdWUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgYnkgYW4gYW1vdW50IG9mIHRpbWUgc3BlY2lmaWVkIGJ5IHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG5cdCAqIGBkZWxheUR1cmF0aW9uU2VsZWN0b3JgLlxuXHQgKiBAbWV0aG9kIGRlbGF5V2hlblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZGVsYXlXaGVuKGRlbGF5RHVyYXRpb25TZWxlY3Rvciwgc3Vic2NyaXB0aW9uRGVsYXkpIHtcblx0ICAgIGlmIChzdWJzY3JpcHRpb25EZWxheSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlKHRoaXMsIHN1YnNjcmlwdGlvbkRlbGF5KVxuXHQgICAgICAgICAgICAubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWxheVdoZW5PcGVyYXRvcihkZWxheUR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmRlbGF5V2hlbiA9IGRlbGF5V2hlbjtcblx0dmFyIERlbGF5V2hlbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlbGF5V2hlbk9wZXJhdG9yKGRlbGF5RHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgRGVsYXlXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWxheVdoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5V2hlbk9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWxheVdoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhEZWxheVdoZW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVsYXlXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucyA9IFtdO1xuXHQgICAgICAgIHRoaXMudmFsdWVzID0gW107XG5cdCAgICB9XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KG91dGVyVmFsdWUpO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaW5uZXJTdWIpO1xuXHQgICAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgZGVsYXlOb3RpZmllciA9IHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKHZhbHVlKTtcblx0ICAgICAgICAgICAgaWYgKGRlbGF5Tm90aWZpZXIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJ5RGVsYXkoZGVsYXlOb3RpZmllciwgdmFsdWUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5yZW1vdmVTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbklkeCA9IHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgaWYgKHN1YnNjcmlwdGlvbklkeCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc1tzdWJzY3JpcHRpb25JZHhdO1xuXHQgICAgICAgICAgICB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JZHgsIDEpO1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlcy5zcGxpY2Uoc3Vic2NyaXB0aW9uSWR4LCAxKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLnRyeURlbGF5ID0gZnVuY3Rpb24gKGRlbGF5Tm90aWZpZXIsIHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIG5vdGlmaWVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkZWxheU5vdGlmaWVyLCB2YWx1ZSk7XG5cdCAgICAgICAgdGhpcy5hZGQobm90aWZpZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMucHVzaChub3RpZmllclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMucHVzaCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkICYmIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlbGF5V2hlblN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlKHNvdXJjZSwgc3Vic2NyaXB0aW9uRGVsYXkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkRlbGF5ID0gc3Vic2NyaXB0aW9uRGVsYXk7XG5cdCAgICB9XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uRGVsYXkuc3Vic2NyaWJlKG5ldyBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHBhcmVudCwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VTdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Tb3VyY2UoKTtcblx0ICAgIH07XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQuZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnN1YnNjcmliZVRvU291cmNlKCk7XG5cdCAgICB9O1xuXHQgICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zdWJzY3JpYmVUb1NvdXJjZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuc291cmNlU3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzLnBhcmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZGlzdGluY3RVbnRpbENoYW5nZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWRfMS5kaXN0aW5jdFVudGlsQ2hhbmdlZDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBhcmUgZGlzdGluY3QgYnkgY29tcGFyaXNvbiBmcm9tIHRoZSBwcmV2aW91cyBpdGVtLlxuXHQgKiBJZiBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoZW4gaXQgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggaXRlbSB0byB0ZXN0IGZvciB3aGV0aGVyIG9yIG5vdCB0aGF0IHZhbHVlIHNob3VsZCBiZSBlbWl0dGVkLlxuXHQgKiBJZiBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gaXMgbm90IHByb3ZpZGVkLCBhbiBlcXVhbGl0eSBjaGVjayBpcyB1c2VkIGJ5IGRlZmF1bHQuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjb21wYXJlXSBvcHRpb25hbCBjb21wYXJpc29uIGZ1bmN0aW9uIGNhbGxlZCB0byB0ZXN0IGlmIGFuIGl0ZW0gaXMgZGlzdGluY3QgZnJvbSB0aGUgcHJldmlvdXMgaXRlbSBpbiB0aGUgc291cmNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgd2l0aCBkaXN0aW5jdCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgZGlzdGluY3RVbnRpbENoYW5nZWRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRpc3RpbmN0VW50aWxDaGFuZ2VkKGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5kaXN0aW5jdFVudGlsQ2hhbmdlZCA9IGRpc3RpbmN0VW50aWxDaGFuZ2VkO1xuXHR2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5jb21wYXJlID0gY29tcGFyZTtcblx0ICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY29tcGFyZSwgdGhpcy5rZXlTZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29tcGFyZSwga2V5U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaGFzS2V5ID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb21wYXJlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHgsIHkpIHtcblx0ICAgICAgICByZXR1cm4geCA9PT0geTtcblx0ICAgIH07XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGtleVNlbGVjdG9yID0gdGhpcy5rZXlTZWxlY3Rvcjtcblx0ICAgICAgICB2YXIga2V5ID0gdmFsdWU7XG5cdCAgICAgICAgaWYgKGtleVNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgIGtleSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5rZXlTZWxlY3RvcikodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNLZXkpIHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmNvbXBhcmUpKHRoaXMua2V5LCBrZXkpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmhhc0tleSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChCb29sZWFuKHJlc3VsdCkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RpbmN0VW50aWxDaGFuZ2VkLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZG9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRvID0gZG9fMS5fZG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogUGVyZm9ybSBhIHNpZGUgZWZmZWN0IGZvciBldmVyeSBlbWlzc2lvbiBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCByZXR1cm5cblx0ICogYW4gT2JzZXJ2YWJsZSB0aGF0IGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SW50ZXJjZXB0cyBlYWNoIGVtaXNzaW9uIG9uIHRoZSBzb3VyY2UgYW5kIHJ1bnMgYVxuXHQgKiBmdW5jdGlvbiwgYnV0IHJldHVybnMgYW4gb3V0cHV0IHdoaWNoIGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhIG1pcnJvcmVkIE9ic2VydmFibGUgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgbW9kaWZpZWQgc28gdGhhdFxuXHQgKiB0aGUgcHJvdmlkZWQgT2JzZXJ2ZXIgaXMgY2FsbGVkIHRvIHBlcmZvcm0gYSBzaWRlIGVmZmVjdCBmb3IgZXZlcnkgdmFsdWUsXG5cdCAqIGVycm9yLCBhbmQgY29tcGxldGlvbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UuIEFueSBlcnJvcnMgdGhhdCBhcmUgdGhyb3duIGluXG5cdCAqIHRoZSBhZm9yZW1lbnRpb25lZCBPYnNlcnZlciBvciBoYW5kbGVycyBhcmUgc2FmZWx5IHNlbnQgZG93biB0aGUgZXJyb3IgcGF0aFxuXHQgKiBvZiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIFRoaXMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgeW91ciBPYnNlcnZhYmxlcyBmb3IgdGhlIGNvcnJlY3QgdmFsdWVzXG5cdCAqIG9yIHBlcmZvcm1pbmcgb3RoZXIgc2lkZSBlZmZlY3RzLlxuXHQgKlxuXHQgKiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCB0byBhIGBzdWJzY3JpYmVgIG9uIHRoZSBPYnNlcnZhYmxlLiBJZiB0aGUgT2JzZXJ2YWJsZVxuXHQgKiByZXR1cm5lZCBieSBgZG9gIGlzIG5vdCBzdWJzY3JpYmVkLCB0aGUgc2lkZSBlZmZlY3RzIHNwZWNpZmllZCBieSB0aGVcblx0ICogT2JzZXJ2ZXIgd2lsbCBuZXZlciBoYXBwZW4uIGBkb2AgdGhlcmVmb3JlIHNpbXBseSBzcGllcyBvbiBleGlzdGluZ1xuXHQgKiBleGVjdXRpb24sIGl0IGRvZXMgbm90IHRyaWdnZXIgYW4gZXhlY3V0aW9uIHRvIGhhcHBlbiBsaWtlIGBzdWJzY3JpYmVgIGRvZXMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrLCB3aGlsZSBhbHNvIGxvZ2dpbmcgdGhlIGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcG9zaXRpb25zID0gY2xpY2tzXG5cdCAqICAgLmRvKGV2ID0+IGNvbnNvbGUubG9nKGV2KSlcblx0ICogICAubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuXHQgKiBwb3NpdGlvbnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqIEBzZWUge0BsaW5rIHN1YnNjcmliZX1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbn0gW25leHRPck9ic2VydmVyXSBBIG5vcm1hbCBPYnNlcnZlciBvYmplY3Qgb3IgYVxuXHQgKiBjYWxsYmFjayBmb3IgYG5leHRgLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbZXJyb3JdIENhbGxiYWNrIGZvciBlcnJvcnMgaW4gdGhlIHNvdXJjZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBsZXRlXSBDYWxsYmFjayBmb3IgdGhlIGNvbXBsZXRpb24gb2YgdGhlIHNvdXJjZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBpZGVudGljYWwgdG8gdGhlIHNvdXJjZSwgYnV0IHJ1bnMgdGhlXG5cdCAqIHNwZWNpZmllZCBPYnNlcnZlciBvciBjYWxsYmFjayhzKSBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAbWV0aG9kIGRvXG5cdCAqIEBuYW1lIGRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZG8obmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRG9PcGVyYXRvcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSk7XG5cdH1cblx0ZXhwb3J0cy5fZG8gPSBfZG87XG5cdHZhciBEb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgICAgIHRoaXMubmV4dE9yT2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcblx0ICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuXHQgICAgfVxuXHQgICAgRG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5leHRPck9ic2VydmVyLCB0aGlzLmVycm9yLCB0aGlzLmNvbXBsZXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERvT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIERvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHNhZmVTdWJzY3JpYmVyKTtcblx0ICAgICAgICB0aGlzLnNhZmVTdWJzY3JpYmVyID0gc2FmZVN1YnNjcmliZXI7XG5cdCAgICB9XG5cdCAgICBEb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5lcnJvcihlcnIpO1xuXHQgICAgICAgIGlmIChzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24pIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG5cdCAgICAgICAgc2FmZVN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRG9TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZXhwYW5kXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5leHBhbmQgPSBleHBhbmRfMS5leHBhbmQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgd2hlcmUgZm9yIGVhY2ggaXRlbSBpbiB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSBzdXBwbGllZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIGVhY2ggaXRlbSxcblx0ICogcmVzdWx0aW5nIGluIGEgbmV3IHZhbHVlIHRvIHRoZW4gYmUgYXBwbGllZCBhZ2FpbiB3aXRoIHRoZSBmdW5jdGlvbi5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcHJvamVjdCB0aGUgZnVuY3Rpb24gZm9yIHByb2plY3RpbmcgdGhlIG5leHQgZW1pdHRlZCBpdGVtIG9mIHRoZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnRdIHRoZSBtYXggbnVtYmVyIG9mIG9ic2VydmFibGVzIHRoYXQgY2FuIGJlIGNyZWF0ZWQgY29uY3VycmVudGx5LiBkZWZhdWx0cyB0byBpbmZpbml0eS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZyB0aGUgZXhwYW5zaW9ucy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSBjb250YWluaW5nIHRoZSBleHBhbnNpb25zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBleHBhbmRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGV4cGFuZChwcm9qZWN0LCBjb25jdXJyZW50LCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IHVuZGVmaW5lZDsgfVxuXHQgICAgY29uY3VycmVudCA9IChjb25jdXJyZW50IHx8IDApIDwgMSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IGNvbmN1cnJlbnQ7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBFeHBhbmRPcGVyYXRvcihwcm9qZWN0LCBjb25jdXJyZW50LCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmV4cGFuZCA9IGV4cGFuZDtcblx0dmFyIEV4cGFuZE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEV4cGFuZE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIEV4cGFuZE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRXhwYW5kU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMuY29uY3VycmVudCwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRXhwYW5kT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuRXhwYW5kT3BlcmF0b3IgPSBFeHBhbmRPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRXhwYW5kU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRXhwYW5kU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEV4cGFuZFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpIHtcblx0ICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHJlc3VsdCA9IGFyZy5yZXN1bHQsIHZhbHVlID0gYXJnLnZhbHVlLCBpbmRleCA9IGFyZy5pbmRleDtcblx0ICAgICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZVRvUHJvamVjdGlvbihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG5cdCAgICB9O1xuXHQgICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMucHJvamVjdCkodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICghdGhpcy5zY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgcmVzdWx0OiByZXN1bHQsIHZhbHVlOiB2YWx1ZSwgaW5kZXg6IGluZGV4IH07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoLCAwLCBzdGF0ZSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uID0gZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG5cdCAgICB9O1xuXHQgICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fbmV4dChpbm5lclZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblx0ICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUtLTtcblx0ICAgICAgICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRXhwYW5kU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5FeHBhbmRTdWJzY3JpYmVyID0gRXhwYW5kU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhwYW5kLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZmlsdGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1Nyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maWx0ZXIgPSBmaWx0ZXJfMS5maWx0ZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbHRlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIEZpbHRlciBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBvbmx5IGVtaXR0aW5nIHRob3NlIHRoYXRcblx0ICogc2F0aXNmeSBhIHNwZWNpZmllZCBwcmVkaWNhdGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlXG5cdCAqIFtBcnJheS5wcm90b3R5cGUuZmlsdGVyKCldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZpbHRlciksXG5cdCAqIGl0IG9ubHkgZW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgaWYgaXQgcGFzc2VzIGEgY3JpdGVyaW9uIGZ1bmN0aW9uLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9maWx0ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFNpbWlsYXIgdG8gdGhlIHdlbGwta25vd24gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZCwgdGhpcyBvcGVyYXRvclxuXHQgKiB0YWtlcyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHBhc3NlcyB0aGVtIHRocm91Z2ggYSBgcHJlZGljYXRlYFxuXHQgKiBmdW5jdGlvbiBhbmQgb25seSBlbWl0cyB0aG9zZSB2YWx1ZXMgdGhhdCB5aWVsZGVkIGB0cnVlYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IGNsaWNrIGV2ZW50cyB3aG9zZSB0YXJnZXQgd2FzIGEgRElWIGVsZW1lbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBjbGlja3NPbkRpdnMgPSBjbGlja3MuZmlsdGVyKGV2ID0+IGV2LnRhcmdldC50YWdOYW1lID09PSAnRElWJyk7XG5cdCAqIGNsaWNrc09uRGl2cy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGRpc3RpbmN0fVxuXHQgKiBAc2VlIHtAbGluayBkaXN0aW5jdEtleX1cblx0ICogQHNlZSB7QGxpbmsgZGlzdGluY3RVbnRpbENoYW5nZWR9XG5cdCAqIEBzZWUge0BsaW5rIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkfVxuXHQgKiBAc2VlIHtAbGluayBpZ25vcmVFbGVtZW50c31cblx0ICogQHNlZSB7QGxpbmsgcGFydGl0aW9ufVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogYm9vbGVhbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdGhhdFxuXHQgKiBldmFsdWF0ZXMgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAsXG5cdCAqIHRoZSB2YWx1ZSBpcyBlbWl0dGVkLCBpZiBgZmFsc2VgIHRoZSB2YWx1ZSBpcyBub3QgcGFzc2VkIHRvIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2Vcblx0ICogZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyXG5cdCAqIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuXHQgKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSB0aGF0IHdlcmVcblx0ICogYWxsb3dlZCBieSB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEBtZXRob2QgZmlsdGVyXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaWx0ZXJPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcpKTtcblx0fVxuXHRleHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcblx0dmFyIEZpbHRlck9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZpbHRlck9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG5cdCAgICB9XG5cdCAgICBGaWx0ZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEZpbHRlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMudGhpc0FyZykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGaWx0ZXJPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRmlsdGVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmlsdGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZpbHRlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgLy8gdGhlIHRyeSBjYXRjaCBibG9jayBiZWxvdyBpcyBsZWZ0IHNwZWNpZmljYWxseSBmb3Jcblx0ICAgIC8vIG9wdGltaXphdGlvbiBhbmQgcGVyZiByZWFzb25zLiBhIHRyeUNhdGNoZXIgaXMgbm90IG5lY2Vzc2FyeSBoZXJlLlxuXHQgICAgRmlsdGVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmlsdGVyU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBmaW5hbGx5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1OSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maW5hbGx5ID0gZmluYWxseV8xLl9maW5hbGx5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maW5hbGx5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgd2lsbCBjYWxsIGEgc3BlY2lmaWVkIGZ1bmN0aW9uIHdoZW5cblx0ICogdGhlIHNvdXJjZSB0ZXJtaW5hdGVzIG9uIGNvbXBsZXRlIG9yIGVycm9yLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmaW5hbGx5U2VsZWN0b3IgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gc291cmNlIHRlcm1pbmF0ZXMuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBzb3VyY2UsIGJ1dCB3aWxsIGNhbGwgdGhlIHNwZWNpZmllZCBmdW5jdGlvbiBvbiB0ZXJtaW5hdGlvbi5cblx0ICogQG1ldGhvZCBmaW5hbGx5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZmluYWxseShmaW5hbGx5U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEZpbmFsbHlPcGVyYXRvcihmaW5hbGx5U2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLl9maW5hbGx5ID0gX2ZpbmFsbHk7XG5cdHZhciBGaW5hbGx5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRmluYWxseU9wZXJhdG9yKGZpbmFsbHlTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZmluYWxseVNlbGVjdG9yID0gZmluYWxseVNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgRmluYWxseU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmluYWxseVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5maW5hbGx5U2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmluYWxseU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGaW5hbGx5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmluYWxseVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBGaW5hbGx5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZmluYWxseVNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oZmluYWxseVNlbGVjdG9yKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gRmluYWxseVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluYWxseS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGZpcnN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maXJzdCA9IGZpcnN0XzEuZmlyc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgRW1wdHlFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjIpO1xuXHQvKipcblx0ICogRW1pdHMgb25seSB0aGUgZmlyc3QgdmFsdWUgKG9yIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IG1lZXRzIHNvbWUgY29uZGl0aW9uKVxuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIG9ubHkgdGhlIGZpcnN0IHZhbHVlLiBPciBlbWl0cyBvbmx5IHRoZSBmaXJzdFxuXHQgKiB2YWx1ZSB0aGF0IHBhc3NlcyBzb21lIHRlc3QuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2ZpcnN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGBmaXJzdGAgZW1pdHMgdGhlIGZpcnN0IHZhbHVlIG9mIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSwgdGhlbiBjb21wbGV0ZXMuIElmIGNhbGxlZCB3aXRoIGEgYHByZWRpY2F0ZWAgZnVuY3Rpb24sIGBmaXJzdGBcblx0ICogZW1pdHMgdGhlIGZpcnN0IHZhbHVlIG9mIHRoZSBzb3VyY2UgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgY29uZGl0aW9uLiBJdFxuXHQgKiBtYXkgYWxzbyB0YWtlIGEgYHJlc3VsdFNlbGVjdG9yYCBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSBvdXRwdXQgdmFsdWUgZnJvbVxuXHQgKiB0aGUgaW5wdXQgdmFsdWUsIGFuZCBhIGBkZWZhdWx0VmFsdWVgIHRvIGVtaXQgaW4gY2FzZSB0aGUgc291cmNlIGNvbXBsZXRlc1xuXHQgKiBiZWZvcmUgaXQgaXMgYWJsZSB0byBlbWl0IGEgdmFsaWQgdmFsdWUuIFRocm93cyBhbiBlcnJvciBpZiBgZGVmYXVsdFZhbHVlYFxuXHQgKiB3YXMgbm90IHByb3ZpZGVkIGFuZCBhIG1hdGNoaW5nIGVsZW1lbnQgaXMgbm90IGZvdW5kLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IG9ubHkgdGhlIGZpcnN0IGNsaWNrIHRoYXQgaGFwcGVucyBvbiB0aGUgRE9NPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmZpcnN0KCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIHRoZSBmaXJzdCBjbGljayB0aGF0IGhhcHBlbnMgb24gYSBESVY8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MuZmlyc3QoZXYgPT4gZXYudGFyZ2V0LnRhZ05hbWUgPT09ICdESVYnKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZmlsdGVyfVxuXHQgKiBAc2VlIHtAbGluayBmaW5kfVxuXHQgKiBAc2VlIHtAbGluayB0YWtlfVxuXHQgKlxuXHQgKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcblx0ICogY2FsbGJhY2sgaWYgdGhlIE9ic2VydmFibGUgY29tcGxldGVzIGJlZm9yZSBhbnkgYG5leHRgIG5vdGlmaWNhdGlvbiB3YXMgc2VudC5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogYm9vbGVhbn0gW3ByZWRpY2F0ZV1cblx0ICogQW4gb3B0aW9uYWwgZnVuY3Rpb24gY2FsbGVkIHdpdGggZWFjaCBpdGVtIHRvIHRlc3QgZm9yIGNvbmRpdGlvbiBtYXRjaGluZy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IFJ9IFtyZXN1bHRTZWxlY3Rvcl0gQSBmdW5jdGlvbiB0b1xuXHQgKiBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuXHQgKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzXG5cdCAqIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgdGhhdCB3YXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLlxuXHQgKiAtIGBpbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHNvdXJjZS5cblx0ICogQHBhcmFtIHtSfSBbZGVmYXVsdFZhbHVlXSBUaGUgZGVmYXVsdCB2YWx1ZSBlbWl0dGVkIGluIGNhc2Ugbm8gdmFsaWQgdmFsdWVcblx0ICogd2FzIGZvdW5kIG9uIHRoZSBzb3VyY2UuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VHxSPn0gYW4gT2JzZXJ2YWJsZSBvZiB0aGUgZmlyc3QgaXRlbSB0aGF0IG1hdGNoZXMgdGhlXG5cdCAqIGNvbmRpdGlvbi5cblx0ICogQG1ldGhvZCBmaXJzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZmlyc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaXJzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMuZmlyc3QgPSBmaXJzdDtcblx0dmFyIEZpcnN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRmlyc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIEZpcnN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmlyc3RTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5kZWZhdWx0VmFsdWUsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZpcnN0T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEZpcnN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmlyc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRmlyc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgaWYgKHRoaXMucHJlZGljYXRlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5fZW1pdCh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2VtaXQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9lbWl0RmluYWwodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9lbWl0RmluYWwocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9lbWl0RmluYWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgaWYgKCF0aGlzLmhhc0NvbXBsZXRlZCAmJiB0eXBlb2YgdGhpcy5kZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICghdGhpcy5oYXNDb21wbGV0ZWQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZpcnN0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maXJzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8qKlxuXHQgKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBPYnNlcnZhYmxlIG9yIGEgc2VxdWVuY2Ugd2FzIHF1ZXJpZWQgYnV0IGhhcyBub1xuXHQgKiBlbGVtZW50cy5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZmlyc3R9XG5cdCAqIEBzZWUge0BsaW5rIGxhc3R9XG5cdCAqIEBzZWUge0BsaW5rIHNpbmdsZX1cblx0ICpcblx0ICogQGNsYXNzIEVtcHR5RXJyb3Jcblx0ICovXG5cdHZhciBFbXB0eUVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhFbXB0eUVycm9yLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRW1wdHlFcnJvcigpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnbm8gZWxlbWVudHMgaW4gc2VxdWVuY2UnKTtcblx0ICAgICAgICB0aGlzLm5hbWUgPSAnRW1wdHlFcnJvcic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gRW1wdHlFcnJvcjtcblx0fShFcnJvcikpO1xuXHRleHBvcnRzLkVtcHR5RXJyb3IgPSBFbXB0eUVycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1FbXB0eUVycm9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZ3JvdXBCeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ3JvdXBCeSA9IGdyb3VwQnlfMS5ncm91cEJ5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cEJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdHZhciBNYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY1KTtcblx0dmFyIEZhc3RNYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY3KTtcblx0LyoqXG5cdCAqIEdyb3VwcyB0aGUgaXRlbXMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlIGFjY29yZGluZyB0byBhIHNwZWNpZmllZCBjcml0ZXJpb24sXG5cdCAqIGFuZCBlbWl0cyB0aGVzZSBncm91cGVkIGl0ZW1zIGFzIGBHcm91cGVkT2JzZXJ2YWJsZXNgLCBvbmVcblx0ICoge0BsaW5rIEdyb3VwZWRPYnNlcnZhYmxlfSBwZXIgZ3JvdXAuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZ3JvdXBCeS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IEt9IGtleVNlbGVjdG9yIGEgZnVuY3Rpb24gdGhhdCBleHRyYWN0cyB0aGUga2V5XG5cdCAqIGZvciBlYWNoIGl0ZW0uXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBSfSBbZWxlbWVudFNlbGVjdG9yXSBhIGZ1bmN0aW9uIHRoYXQgZXh0cmFjdHMgdGhlXG5cdCAqIHJldHVybiBlbGVtZW50IGZvciBlYWNoIGl0ZW0uXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oZ3JvdXBlZDogR3JvdXBlZE9ic2VydmFibGU8SyxSPik6IE9ic2VydmFibGU8YW55Pn0gW2R1cmF0aW9uU2VsZWN0b3JdXG5cdCAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIE9ic2VydmFibGUgdG8gZGV0ZXJtaW5lIGhvdyBsb25nIGVhY2ggZ3JvdXAgc2hvdWxkXG5cdCAqIGV4aXN0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPEdyb3VwZWRPYnNlcnZhYmxlPEssUj4+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcblx0ICogR3JvdXBlZE9ic2VydmFibGVzLCBlYWNoIG9mIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdW5pcXVlIGtleSB2YWx1ZSBhbmQgZWFjaFxuXHQgKiBvZiB3aGljaCBlbWl0cyB0aG9zZSBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNoYXJlIHRoYXQga2V5XG5cdCAqIHZhbHVlLlxuXHQgKiBAbWV0aG9kIGdyb3VwQnlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGdyb3VwQnkoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgR3JvdXBCeU9wZXJhdG9yKHRoaXMsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmdyb3VwQnkgPSBncm91cEJ5O1xuXHR2YXIgR3JvdXBCeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEdyb3VwQnlPcGVyYXRvcihzb3VyY2UsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIEdyb3VwQnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEdyb3VwQnlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMua2V5U2VsZWN0b3IsIHRoaXMuZWxlbWVudFNlbGVjdG9yLCB0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gR3JvdXBCeU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBHcm91cEJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoR3JvdXBCeVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBHcm91cEJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZ3JvdXBzID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5hZGQoZGVzdGluYXRpb24pO1xuXHQgICAgfVxuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGtleTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBrZXkgPSB0aGlzLmtleVNlbGVjdG9yKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fZ3JvdXAodmFsdWUsIGtleSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9ncm91cCA9IGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuXHQgICAgICAgIGlmICghZ3JvdXBzKSB7XG5cdCAgICAgICAgICAgIGdyb3VwcyA9IHRoaXMuZ3JvdXBzID0gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycgPyBuZXcgRmFzdE1hcF8xLkZhc3RNYXAoKSA6IG5ldyBNYXBfMS5NYXAoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLmdldChrZXkpO1xuXHQgICAgICAgIGlmICghZ3JvdXApIHtcblx0ICAgICAgICAgICAgZ3JvdXBzLnNldChrZXksIGdyb3VwID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCkpO1xuXHQgICAgICAgICAgICB2YXIgZ3JvdXBlZE9ic2VydmFibGUgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCwgdGhpcyk7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdER1cmF0aW9uKGtleSwgZ3JvdXApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChncm91cGVkT2JzZXJ2YWJsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLmVsZW1lbnRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50KHZhbHVlLCBncm91cCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnRyeUdyb3VwTmV4dCh2YWx1ZSwgZ3JvdXApO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX3NlbGVjdEVsZW1lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGdyb3VwKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmVsZW1lbnRTZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMudHJ5R3JvdXBOZXh0KHJlc3VsdCwgZ3JvdXApO1xuXHQgICAgfTtcblx0ICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2VsZWN0RHVyYXRpb24gPSBmdW5jdGlvbiAoa2V5LCBncm91cCkge1xuXHQgICAgICAgIHZhciBkdXJhdGlvbjtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3RvcihuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFkZChkdXJhdGlvbi5zdWJzY3JpYmUobmV3IEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHRoaXMpKSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnRyeUdyb3VwTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSwgZ3JvdXApIHtcblx0ICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3Vwcztcblx0ICAgICAgICBpZiAoZ3JvdXBzKSB7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICBncm91cC5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgZ3JvdXBzLmNsZWFyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3Vwcztcblx0ICAgICAgICBpZiAoZ3JvdXBzKSB7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICBncm91cC5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgZ3JvdXBzLmNsZWFyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdGhpcy5ncm91cHMuZGVsZXRlKGtleSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1Vuc3Vic2NyaWJlZCAmJiAhdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSA9IHRydWU7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEdyb3VwQnlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhHcm91cER1cmF0aW9uU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHBhcmVudCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXHQgICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgIH1cblx0ICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMudHJ5RXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDtcblx0ICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMua2V5KTtcblx0ICAgIH07XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDtcblx0ICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIGdyb3VwLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMua2V5KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gR3JvdXBEdXJhdGlvblN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0LyoqXG5cdCAqIEFuIE9ic2VydmFibGUgcmVwcmVzZW50aW5nIHZhbHVlcyBiZWxvbmdpbmcgdG8gdGhlIHNhbWUgZ3JvdXAgcmVwcmVzZW50ZWQgYnlcblx0ICogYSBjb21tb24ga2V5LiBUaGUgdmFsdWVzIGVtaXR0ZWQgYnkgYSBHcm91cGVkT2JzZXJ2YWJsZSBjb21lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgY29tbW9uIGtleSBpcyBhdmFpbGFibGUgYXMgdGhlIGZpZWxkIGBrZXlgIG9uIGFcblx0ICogR3JvdXBlZE9ic2VydmFibGUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBjbGFzcyBHcm91cGVkT2JzZXJ2YWJsZTxLLCBUPlxuXHQgKi9cblx0dmFyIEdyb3VwZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhHcm91cGVkT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXBTdWJqZWN0LCByZWZDb3VudFN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXHQgICAgICAgIHRoaXMuZ3JvdXBTdWJqZWN0ID0gZ3JvdXBTdWJqZWN0O1xuXHQgICAgICAgIHRoaXMucmVmQ291bnRTdWJzY3JpcHRpb24gPSByZWZDb3VudFN1YnNjcmlwdGlvbjtcblx0ICAgIH1cblx0ICAgIEdyb3VwZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlZkNvdW50U3Vic2NyaXB0aW9uID0gX2EucmVmQ291bnRTdWJzY3JpcHRpb24sIGdyb3VwU3ViamVjdCA9IF9hLmdyb3VwU3ViamVjdDtcblx0ICAgICAgICBpZiAocmVmQ291bnRTdWJzY3JpcHRpb24gJiYgIXJlZkNvdW50U3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQobmV3IElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ocmVmQ291bnRTdWJzY3JpcHRpb24pKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChncm91cFN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcblx0ICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBHcm91cGVkT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkdyb3VwZWRPYnNlcnZhYmxlID0gR3JvdXBlZE9ic2VydmFibGU7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHBhcmVudCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICAgIHBhcmVudC5jb3VudCsrO1xuXHQgICAgfVxuXHQgICAgSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50O1xuXHQgICAgICAgIGlmICghcGFyZW50LmlzVW5zdWJzY3JpYmVkICYmICF0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcblx0ICAgICAgICAgICAgcGFyZW50LmNvdW50IC09IDE7XG5cdCAgICAgICAgICAgIGlmIChwYXJlbnQuY291bnQgPT09IDAgJiYgcGFyZW50LmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUpIHtcblx0ICAgICAgICAgICAgICAgIHBhcmVudC51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cEJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgTWFwUG9seWZpbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY2KTtcblx0ZXhwb3J0cy5NYXAgPSByb290XzEucm9vdC5NYXAgfHwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1hcFBvbHlmaWxsXzEuTWFwUG9seWZpbGw7IH0pKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBNYXBQb2x5ZmlsbCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXBQb2x5ZmlsbCgpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuXHQgICAgICAgIHRoaXMuX2tleXMgPSBbXTtcblx0ICAgIH1cblx0ICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgICByZXR1cm4gaSA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLl92YWx1ZXNbaV07XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgICBpZiAoaSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XG5cdCAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcblx0ICAgICAgICAgICAgdGhpcy5zaXplKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuXHQgICAgICAgIGlmIChpID09PSAtMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgdGhpcy5zaXplLS07XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcblx0ICAgICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgfTtcblx0ICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCB0aGlzQXJnKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkrKykge1xuXHQgICAgICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuX3ZhbHVlc1tpXSwgdGhpcy5fa2V5c1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBQb2x5ZmlsbDtcblx0fSgpKTtcblx0ZXhwb3J0cy5NYXBQb2x5ZmlsbCA9IE1hcFBvbHlmaWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQb2x5ZmlsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBGYXN0TWFwID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZhc3RNYXAoKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcblx0ICAgIH1cblx0ICAgIEZhc3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlc1trZXldID0gbnVsbDtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWVzW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleV07XG5cdCAgICB9O1xuXHQgICAgRmFzdE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuXHQgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiB2YWx1ZXNba2V5XSAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB2YWx1ZXNba2V5XSwga2V5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGYXN0TWFwO1xuXHR9KCkpO1xuXHRleHBvcnRzLkZhc3RNYXAgPSBGYXN0TWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1GYXN0TWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgaWdub3JlRWxlbWVudHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmlnbm9yZUVsZW1lbnRzID0gaWdub3JlRWxlbWVudHNfMS5pZ25vcmVFbGVtZW50cztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aWdub3JlRWxlbWVudHMuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBub29wXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4OSk7XG5cdC8qKlxuXHQgKiBJZ25vcmVzIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgb25seSBwYXNzZXMgY2FsbHMgb2YgYGNvbXBsZXRlYCBvciBgZXJyb3JgLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2lnbm9yZUVsZW1lbnRzLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBlbXB0eSBPYnNlcnZhYmxlIHRoYXQgb25seSBjYWxscyBgY29tcGxldGVgXG5cdCAqIG9yIGBlcnJvcmAsIGJhc2VkIG9uIHdoaWNoIG9uZSBpcyBjYWxsZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGlnbm9yZUVsZW1lbnRzXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBpZ25vcmVFbGVtZW50cygpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IElnbm9yZUVsZW1lbnRzT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5pZ25vcmVFbGVtZW50cyA9IGlnbm9yZUVsZW1lbnRzO1xuXHQ7XG5cdHZhciBJZ25vcmVFbGVtZW50c09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIElnbm9yZUVsZW1lbnRzT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBJZ25vcmVFbGVtZW50c09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSWdub3JlRWxlbWVudHNPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuXHQgICAgICAgIG5vb3BfMS5ub29wKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVFbGVtZW50cy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGF1ZGl0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5hdWRpdCA9IGF1ZGl0XzEuYXVkaXQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIElnbm9yZXMgc291cmNlIHZhbHVlcyBmb3IgYSBkdXJhdGlvbiBkZXRlcm1pbmVkIGJ5IGFub3RoZXIgT2JzZXJ2YWJsZSwgdGhlblxuXHQgKiBlbWl0cyB0aGUgbW9zdCByZWNlbnQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gcmVwZWF0cyB0aGlzXG5cdCAqIHByb2Nlc3MuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGF1ZGl0VGltZX0sIGJ1dCB0aGUgc2lsZW5jaW5nXG5cdCAqIGR1cmF0aW9uIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvYXVkaXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBhdWRpdGAgaXMgc2ltaWxhciB0byBgdGhyb3R0bGVgLCBidXQgZW1pdHMgdGhlIGxhc3QgdmFsdWUgZnJvbSB0aGUgc2lsZW5jZWRcblx0ICogdGltZSB3aW5kb3csIGluc3RlYWQgb2YgdGhlIGZpcnN0IHZhbHVlLiBgYXVkaXRgIGVtaXRzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZVxuXHQgKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYXMgc29vbiBhcyBpdHMgaW50ZXJuYWxcblx0ICogdGltZXIgYmVjb21lcyBkaXNhYmxlZCwgYW5kIGlnbm9yZXMgc291cmNlIHZhbHVlcyB3aGlsZSB0aGUgdGltZXIgaXMgZW5hYmxlZC5cblx0ICogSW5pdGlhbGx5LCB0aGUgdGltZXIgaXMgZGlzYWJsZWQuIEFzIHNvb24gYXMgdGhlIGZpcnN0IHNvdXJjZSB2YWx1ZSBhcnJpdmVzLFxuXHQgKiB0aGUgdGltZXIgaXMgZW5hYmxlZCBieSBjYWxsaW5nIHRoZSBgZHVyYXRpb25TZWxlY3RvcmAgZnVuY3Rpb24gd2l0aCB0aGVcblx0ICogc291cmNlIHZhbHVlLCB3aGljaCByZXR1cm5zIHRoZSBcImR1cmF0aW9uXCIgT2JzZXJ2YWJsZS4gV2hlbiB0aGUgZHVyYXRpb25cblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgdGhlIHRpbWVyIGlzIGRpc2FibGVkLCB0aGVuIHRoZSBtb3N0XG5cdCAqIHJlY2VudCBzb3VyY2UgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGlzIHByb2Nlc3Ncblx0ICogcmVwZWF0cyBmb3IgdGhlIG5leHQgc291cmNlIHZhbHVlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5hdWRpdChldiA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGV9XG5cdCAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBkdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb25cblx0ICogdGhhdCByZWNlaXZlcyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBmb3IgY29tcHV0aW5nIHRoZSBzaWxlbmNpbmdcblx0ICogZHVyYXRpb24sIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgcmF0ZS1saW1pdGluZyBvZlxuXHQgKiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgYXVkaXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGF1ZGl0KGR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMuYXVkaXQgPSBhdWRpdDtcblx0dmFyIEF1ZGl0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQXVkaXRPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIEF1ZGl0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBBdWRpdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEF1ZGl0T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEF1ZGl0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXVkaXRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQXVkaXRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5kdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHZhbHVlID0gX2EudmFsdWUsIGhhc1ZhbHVlID0gX2EuaGFzVmFsdWUsIHRocm90dGxlZCA9IF9hLnRocm90dGxlZDtcblx0ICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRocm90dGxlZCk7XG5cdCAgICAgICAgICAgIHRoaXMudGhyb3R0bGVkID0gbnVsbDtcblx0ICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChoYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHRoaXMuY2xlYXJUaHJvdHRsZSgpO1xuXHQgICAgfTtcblx0ICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEF1ZGl0U3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBhdWRpdFRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDczKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmF1ZGl0VGltZSA9IGF1ZGl0VGltZV8xLmF1ZGl0VGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXRUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIElnbm9yZXMgc291cmNlIHZhbHVlcyBmb3IgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMsIHRoZW4gZW1pdHMgdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIHJlcGVhdHMgdGhpcyBwcm9jZXNzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbiBpdCBzZWVzIGEgc291cmNlIHZhbHVlcywgaXQgaWdub3JlcyB0aGF0IHBsdXNcblx0ICogdGhlIG5leHQgb25lcyBmb3IgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGl0IGVtaXRzIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2F1ZGl0VGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYGF1ZGl0VGltZWAgaXMgc2ltaWxhciB0byBgdGhyb3R0bGVUaW1lYCwgYnV0IGVtaXRzIHRoZSBsYXN0IHZhbHVlIGZyb20gdGhlXG5cdCAqIHNpbGVuY2VkIHRpbWUgd2luZG93LCBpbnN0ZWFkIG9mIHRoZSBmaXJzdCB2YWx1ZS4gYGF1ZGl0VGltZWAgZW1pdHMgdGhlIG1vc3Rcblx0ICogcmVjZW50IHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBhcyBzb29uIGFzXG5cdCAqIGl0cyBpbnRlcm5hbCB0aW1lciBiZWNvbWVzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoaWxlIHRoZVxuXHQgKiB0aW1lciBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Rcblx0ICogc291cmNlIHZhbHVlIGFycml2ZXMsIHRoZSB0aW1lciBpcyBlbmFibGVkLiBBZnRlciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcyAob3Jcblx0ICogdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBoYXMgcGFzc2VkLFxuXHQgKiB0aGUgdGltZXIgaXMgZGlzYWJsZWQsIHRoZW4gdGhlIG1vc3QgcmVjZW50IHNvdXJjZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZVxuXHQgKiBvdXRwdXQgT2JzZXJ2YWJsZSwgYW5kIHRoaXMgcHJvY2VzcyByZXBlYXRzIGZvciB0aGUgbmV4dCBzb3VyY2UgdmFsdWUuXG5cdCAqIE9wdGlvbmFsbHkgdGFrZXMgYSB7QGxpbmsgU2NoZWR1bGVyfSBmb3IgbWFuYWdpbmcgdGltZXJzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IGNsaWNrcyBhdCBhIHJhdGUgb2YgYXQgbW9zdCBvbmUgY2xpY2sgcGVyIHNlY29uZDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5hdWRpdFRpbWUoMTAwMCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaW1lIHRvIHdhaXQgYmVmb3JlIGVtaXR0aW5nIHRoZSBtb3N0IHJlY2VudCBzb3VyY2Vcblx0ICogdmFsdWUsIG1lYXN1cmVkIGluIG1pbGxpc2Vjb25kcyBvciB0aGUgdGltZSB1bml0IGRldGVybWluZWQgaW50ZXJuYWxseVxuXHQgKiBieSB0aGUgb3B0aW9uYWwgYHNjaGVkdWxlcmAuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuXHQgKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSByYXRlLWxpbWl0aW5nIGJlaGF2aW9yLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgcmF0ZS1saW1pdGluZyBvZlxuXHQgKiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgYXVkaXRUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBhdWRpdFRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0VGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmF1ZGl0VGltZSA9IGF1ZGl0VGltZTtcblx0dmFyIEF1ZGl0VGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEF1ZGl0VGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBBdWRpdFRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEF1ZGl0VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXVkaXRUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEF1ZGl0VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEF1ZGl0VGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBdWRpdFRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBBdWRpdFRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1cmF0aW9uLCB0aGlzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEF1ZGl0VGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyVGhyb3R0bGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgdmFsdWUgPSBfYS52YWx1ZSwgaGFzVmFsdWUgPSBfYS5oYXNWYWx1ZSwgdGhyb3R0bGVkID0gX2EudGhyb3R0bGVkO1xuXHQgICAgICAgIGlmICh0aHJvdHRsZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGhhc1ZhbHVlKSB7XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBdWRpdFRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTmV4dChzdWJzY3JpYmVyKSB7XG5cdCAgICBzdWJzY3JpYmVyLmNsZWFyVGhyb3R0bGUoKTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdFRpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBsYXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3NSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5sYXN0ID0gbGFzdF8xLmxhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBsYXN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEl0IG9wdGlvbmFsbHkgdGFrZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gYXMgYSBwYXJhbWV0ZXIsIGluIHdoaWNoIGNhc2UsIHJhdGhlciB0aGFuIGVtaXR0aW5nXG5cdCAqIHRoZSBsYXN0IGl0ZW0gZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSB3aWxsIGVtaXQgdGhlIGxhc3QgaXRlbVxuXHQgKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2xhc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEB0aHJvd3Mge0VtcHR5RXJyb3J9IERlbGl2ZXJzIGFuIEVtcHR5RXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYFxuXHQgKiBjYWxsYmFjayBpZiB0aGUgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgYmVmb3JlIGFueSBgbmV4dGAgbm90aWZpY2F0aW9uIHdhcyBzZW50LlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVkaWNhdGUgLSB0aGUgY29uZGl0aW9uIGFueSBzb3VyY2UgZW1pdHRlZCBpdGVtIGhhcyB0byBzYXRpc2Z5LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgbGFzdCBpdGVtIHNhdGlzZnlpbmcgdGhlIGdpdmVuIGNvbmRpdGlvblxuXHQgKiBmcm9tIHRoZSBzb3VyY2UsIG9yIGFuIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gaWYgbm8gc3VjaCBpdGVtcyBhcmUgZW1pdHRlZC5cblx0ICogQHRocm93cyAtIFRocm93cyBpZiBubyBpdGVtcyB0aGF0IG1hdGNoIHRoZSBwcmVkaWNhdGUgYXJlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGxhc3Rcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGxhc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBMYXN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCB0aGlzKSk7XG5cdH1cblx0ZXhwb3J0cy5sYXN0ID0gbGFzdDtcblx0dmFyIExhc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBMYXN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICBMYXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTGFzdFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmRlZmF1bHRWYWx1ZSwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTGFzdE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBMYXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTGFzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSByZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIExhc3RTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBsZXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDc3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxldCA9IGxldF8xLmxldFByb3RvO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGV0QmluZCA9IGxldF8xLmxldFByb3RvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1sZXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKipcblx0ICogQHBhcmFtIGZ1bmNcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cblx0ICogQG1ldGhvZCBsZXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGxldFByb3RvKGZ1bmMpIHtcblx0ICAgIHJldHVybiBmdW5jKHRoaXMpO1xuXHR9XG5cdGV4cG9ydHMubGV0UHJvdG8gPSBsZXRQcm90bztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bGV0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZXZlcnlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDc5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmV2ZXJ5ID0gZXZlcnlfMS5ldmVyeTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlcnkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aGV0aGVyIG9yIG5vdCBldmVyeSBpdGVtIG9mIHRoZSBzb3VyY2Ugc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gc3BlY2lmaWVkLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVkaWNhdGUgYSBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgaWYgYW4gaXRlbSBtZWV0cyBhIHNwZWNpZmllZCBjb25kaXRpb24uXG5cdCAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gb3B0aW9uYWwgb2JqZWN0IHRvIHVzZSBmb3IgYHRoaXNgIGluIHRoZSBjYWxsYmFja1xuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIG9mIGJvb2xlYW5zIHRoYXQgZGV0ZXJtaW5lcyBpZiBhbGwgaXRlbXMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1lZXQgdGhlIGNvbmRpdGlvbiBzcGVjaWZpZWQuXG5cdCAqIEBtZXRob2QgZXZlcnlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRXZlcnlPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLmV2ZXJ5ID0gZXZlcnk7XG5cdHZhciBFdmVyeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEV2ZXJ5T3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgRXZlcnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFdmVyeVN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEV2ZXJ5T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEV2ZXJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRXZlcnlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRXZlcnlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcblx0ICAgIH1cblx0ICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoZXZlcnlWYWx1ZU1hdGNoKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGV2ZXJ5VmFsdWVNYXRjaCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmluZGV4KyssIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFyZXN1bHQpIHtcblx0ICAgICAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZShmYWxzZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMubm90aWZ5Q29tcGxldGUodHJ1ZSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEV2ZXJ5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ldmVyeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0ODEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwID0gbWFwXzEubWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBBcHBsaWVzIGEgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uIHRvIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUsIGFuZCBlbWl0cyB0aGUgcmVzdWx0aW5nIHZhbHVlcyBhcyBhbiBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSBbQXJyYXkucHJvdG90eXBlLm1hcCgpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9tYXApLFxuXHQgKiBpdCBwYXNzZXMgZWFjaCBzb3VyY2UgdmFsdWUgdGhyb3VnaCBhIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIHRvIGdldFxuXHQgKiBjb3JyZXNwb25kaW5nIG91dHB1dCB2YWx1ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogU2ltaWxhciB0byB0aGUgd2VsbCBrbm93biBgQXJyYXkucHJvdG90eXBlLm1hcGAgZnVuY3Rpb24sIHRoaXMgb3BlcmF0b3Jcblx0ICogYXBwbGllcyBhIHByb2plY3Rpb24gdG8gZWFjaCB2YWx1ZSBhbmQgZW1pdHMgdGhhdCBwcm9qZWN0aW9uIGluIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSBjbGllbnRYIHBvc2l0aW9uIG9mIHRoYXQgY2xpY2s8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3MubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuXHQgKiBwb3NpdGlvbnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXBUb31cblx0ICogQHNlZSB7QGxpbmsgcGx1Y2t9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBwcm9qZWN0IFRoZSBmdW5jdGlvbiB0byBhcHBseVxuXHQgKiB0byBlYWNoIGB2YWx1ZWAgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIFRoZSBgaW5kZXhgIHBhcmFtZXRlciBpc1xuXHQgKiB0aGUgbnVtYmVyIGBpYCBmb3IgdGhlIGktdGggZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlXG5cdCAqIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZWZpbmUgd2hhdCBgdGhpc2AgaXMgaW4gdGhlXG5cdCAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgdHJhbnNmb3JtZWQgYnkgdGhlIGdpdmVuIGBwcm9qZWN0YCBmdW5jdGlvbi5cblx0ICogQG1ldGhvZCBtYXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG5cdCAgICBpZiAodHlwZW9mIHByb2plY3QgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4gQXJlIHlvdSBsb29raW5nIGZvciBgbWFwVG8oKWA/Jyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG5cdH1cblx0ZXhwb3J0cy5tYXAgPSBtYXA7XG5cdHZhciBNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgfVxuXHQgICAgTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy50aGlzQXJnKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgdGhpc0FyZykge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIE5PVEU6IFRoaXMgbG9va3MgdW5vcHRpbWl6ZWQsIGJ1dCBpdCdzIGFjdHVhbGx5IHB1cnBvc2VmdWxseSBOT1Rcblx0ICAgIC8vIHVzaW5nIHRyeS9jYXRjaCBvcHRpbWl6YXRpb25zLlxuXHQgICAgTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuY291bnQrKyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1hcFRvXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXBUbyA9IG1hcFRvXzEubWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcFRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogRW1pdHMgdGhlIGdpdmVuIGNvbnN0YW50IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBldmVyeSB0aW1lIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSB7QGxpbmsgbWFwfSwgYnV0IGl0IG1hcHMgZXZlcnkgc291cmNlIHZhbHVlIHRvXG5cdCAqIHRoZSBzYW1lIG91dHB1dCB2YWx1ZSBldmVyeSB0aW1lLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogVGFrZXMgYSBjb25zdGFudCBgdmFsdWVgIGFzIGFyZ3VtZW50LCBhbmQgZW1pdHMgdGhhdCB3aGVuZXZlciB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS4gSW4gb3RoZXIgd29yZHMsIGlnbm9yZXMgdGhlIGFjdHVhbCBzb3VyY2UgdmFsdWUsXG5cdCAqIGFuZCBzaW1wbHkgdXNlcyB0aGUgZW1pc3Npb24gbW9tZW50IHRvIGtub3cgd2hlbiB0byBlbWl0IHRoZSBnaXZlbiBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIHN0cmluZyAnSGknPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZ3JlZXRpbmdzID0gY2xpY2tzLm1hcFRvKCdIaScpO1xuXHQgKiBncmVldGluZ3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFwIGVhY2ggc291cmNlIHZhbHVlIHRvLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGdpdmVuIGB2YWx1ZWAgZXZlcnkgdGltZVxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgc29tZXRoaW5nLlxuXHQgKiBAbWV0aG9kIG1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUbyh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWFwVG9PcGVyYXRvcih2YWx1ZSkpO1xuXHR9XG5cdGV4cG9ydHMubWFwVG8gPSBtYXBUbztcblx0dmFyIE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWFwVG9PcGVyYXRvcih2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIE1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBUb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy52YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBUb09wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdmFsdWUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgfVxuXHQgICAgTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBUb1N1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtYXRlcmlhbGl6ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0ODUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWF0ZXJpYWxpemUgPSBtYXRlcmlhbGl6ZV8xLm1hdGVyaWFsaXplO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbGl6ZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE5vdGlmaWNhdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjEpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgcmVwcmVzZW50cyBhbGwgb2YgdGhlIGVtaXNzaW9ucyBhbmQgbm90aWZpY2F0aW9uc1xuXHQgKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnRvIGVtaXNzaW9ucyBtYXJrZWQgd2l0aCB0aGVpciBvcmlnaW5hbCB0eXBlc1xuXHQgKiB3aXRoaW4gYSBgTm90aWZpY2F0aW9uYCBvYmplY3RzLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21hdGVyaWFsaXplLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBOb3RpZmljYXRpb259XG5cdCAqXG5cdCAqIEBzY2hlZHVsZXIgbWF0ZXJpYWxpemUgZG9lcyBub3Qgb3BlcmF0ZSBieSBkZWZhdWx0IG9uIGEgcGFydGljdWxhciBTY2hlZHVsZXIuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Tm90aWZpY2F0aW9uPFQ+Pn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIHRoYXQgYXJlIHRoZSByZXN1bHQgb2Zcblx0ICogbWF0ZXJpYWxpemluZyB0aGUgaXRlbXMgYW5kIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIG1hdGVyaWFsaXplXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRlcmlhbGl6ZSgpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1hdGVyaWFsaXplT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5tYXRlcmlhbGl6ZSA9IG1hdGVyaWFsaXplO1xuXHR2YXIgTWF0ZXJpYWxpemVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZU9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgTWF0ZXJpYWxpemVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hdGVyaWFsaXplT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIE1hdGVyaWFsaXplU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgfVxuXHQgICAgTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIE1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZXJyKSk7XG5cdCAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hdGVyaWFsaXplU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbGl6ZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1lcmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4Myk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZSA9IG1lcmdlXzEubWVyZ2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbWVyZ2VBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlQWxsID0gbWVyZ2VBbGxfMS5tZXJnZUFsbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtZXJnZU1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VNYXAgPSBtZXJnZU1hcF8xLm1lcmdlTWFwO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcCA9IG1lcmdlTWFwXzEubWVyZ2VNYXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbWVyZ2VNYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm11bHRpY2FzdCA9IG11bHRpY2FzdF8xLm11bHRpY2FzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bXVsdGljYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5vYnNlcnZlT24gPSBvYnNlcnZlT25fMS5vYnNlcnZlT247XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVPbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHBhcnRpdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OTMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGFydGl0aW9uID0gcGFydGl0aW9uXzEucGFydGl0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0aXRpb24uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgbm90XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5NCk7XG5cdHZhciBmaWx0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDU3KTtcblx0LyoqXG5cdCAqIFNwbGl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgaW50byB0d28sIG9uZSB3aXRoIHZhbHVlcyB0aGF0IHNhdGlzZnkgYVxuXHQgKiBwcmVkaWNhdGUsIGFuZCBhbm90aGVyIHdpdGggdmFsdWVzIHRoYXQgZG9uJ3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBmaWx0ZXJ9LCBidXQgcmV0dXJucyB0d28gT2JzZXJ2YWJsZXM6XG5cdCAqIG9uZSBsaWtlIHRoZSBvdXRwdXQgb2Yge0BsaW5rIGZpbHRlcn0sIGFuZCB0aGUgb3RoZXIgd2l0aCB2YWx1ZXMgdGhhdCBkaWQgbm90XG5cdCAqIHBhc3MgdGhlIGNvbmRpdGlvbi48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvcGFydGl0aW9uLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgcGFydGl0aW9uYCBvdXRwdXRzIGFuIGFycmF5IHdpdGggdHdvIE9ic2VydmFibGVzIHRoYXQgcGFydGl0aW9uIHRoZSB2YWx1ZXNcblx0ICogZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhyb3VnaCB0aGUgZ2l2ZW4gYHByZWRpY2F0ZWAgZnVuY3Rpb24uIFRoZSBmaXJzdFxuXHQgKiBPYnNlcnZhYmxlIGluIHRoYXQgYXJyYXkgZW1pdHMgc291cmNlIHZhbHVlcyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSBhcmd1bWVudFxuXHQgKiByZXR1cm5zIHRydWUuIFRoZSBzZWNvbmQgT2JzZXJ2YWJsZSBlbWl0cyBzb3VyY2UgdmFsdWVzIGZvciB3aGljaCB0aGVcblx0ICogcHJlZGljYXRlIHJldHVybnMgZmFsc2UuIFRoZSBmaXJzdCBiZWhhdmVzIGxpa2Uge0BsaW5rIGZpbHRlcn0gYW5kIHRoZSBzZWNvbmRcblx0ICogYmVoYXZlcyBsaWtlIHtAbGluayBmaWx0ZXJ9IHdpdGggdGhlIHByZWRpY2F0ZSBuZWdhdGVkLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5QYXJ0aXRpb24gY2xpY2sgZXZlbnRzIGludG8gdGhvc2Ugb24gRElWIGVsZW1lbnRzIGFuZCB0aG9zZSBlbHNld2hlcmU8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBwYXJ0cyA9IGNsaWNrcy5wYXJ0aXRpb24oZXYgPT4gZXYudGFyZ2V0LnRhZ05hbWUgPT09ICdESVYnKTtcblx0ICogdmFyIGNsaWNrc09uRGl2cyA9IHBhcnRzWzBdO1xuXHQgKiB2YXIgY2xpY2tzRWxzZXdoZXJlID0gcGFydHNbMV07XG5cdCAqIGNsaWNrc09uRGl2cy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnRElWIGNsaWNrZWQ6ICcsIHgpKTtcblx0ICogY2xpY2tzRWxzZXdoZXJlLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKCdPdGhlciBjbGlja2VkOiAnLCB4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGZpbHRlcn1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW59IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRoYXRcblx0ICogZXZhbHVhdGVzIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGl0IHJldHVybnMgYHRydWVgLFxuXHQgKiB0aGUgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgZmlyc3QgT2JzZXJ2YWJsZSBpbiB0aGUgcmV0dXJuZWQgYXJyYXksIGlmXG5cdCAqIGBmYWxzZWAgdGhlIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIHNlY29uZCBPYnNlcnZhYmxlIGluIHRoZSBhcnJheS4gVGhlXG5cdCAqIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2UgZW1pc3Npb24gdGhhdCBoYXNcblx0ICogaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuXHQgKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEByZXR1cm4ge1tPYnNlcnZhYmxlPFQ+LCBPYnNlcnZhYmxlPFQ+XX0gQW4gYXJyYXkgd2l0aCB0d28gT2JzZXJ2YWJsZXM6IG9uZVxuXHQgKiB3aXRoIHZhbHVlcyB0aGF0IHBhc3NlZCB0aGUgcHJlZGljYXRlLCBhbmQgYW5vdGhlciB3aXRoIHZhbHVlcyB0aGF0IGRpZCBub3Rcblx0ICogcGFzcyB0aGUgcHJlZGljYXRlLlxuXHQgKiBAbWV0aG9kIHBhcnRpdGlvblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFydGl0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICBmaWx0ZXJfMS5maWx0ZXIuY2FsbCh0aGlzLCBwcmVkaWNhdGUpLFxuXHQgICAgICAgIGZpbHRlcl8xLmZpbHRlci5jYWxsKHRoaXMsIG5vdF8xLm5vdChwcmVkaWNhdGUsIHRoaXNBcmcpKVxuXHQgICAgXTtcblx0fVxuXHRleHBvcnRzLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydGl0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gbm90KHByZWQsIHRoaXNBcmcpIHtcblx0ICAgIGZ1bmN0aW9uIG5vdFByZWQoKSB7XG5cdCAgICAgICAgcmV0dXJuICEobm90UHJlZC5wcmVkLmFwcGx5KG5vdFByZWQudGhpc0FyZywgYXJndW1lbnRzKSk7XG5cdCAgICB9XG5cdCAgICBub3RQcmVkLnByZWQgPSBwcmVkO1xuXHQgICAgbm90UHJlZC50aGlzQXJnID0gdGhpc0FyZztcblx0ICAgIHJldHVybiBub3RQcmVkO1xuXHR9XG5cdGV4cG9ydHMubm90ID0gbm90O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ub3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBwbHVja18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OTYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGx1Y2sgPSBwbHVja18xLnBsdWNrO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wbHVjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgxKTtcblx0LyoqXG5cdCAqIE1hcHMgZWFjaCBzb3VyY2UgdmFsdWUgKGFuIG9iamVjdCkgdG8gaXRzIHNwZWNpZmllZCBuZXN0ZWQgcHJvcGVydHkuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlIHtAbGluayBtYXB9LCBidXQgbWVhbnQgb25seSBmb3IgcGlja2luZyBvbmUgb2Zcblx0ICogdGhlIG5lc3RlZCBwcm9wZXJ0aWVzIG9mIGV2ZXJ5IGVtaXR0ZWQgb2JqZWN0Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9wbHVjay5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogR2l2ZW4gYSBsaXN0IG9mIHN0cmluZ3MgZGVzY3JpYmluZyBhIHBhdGggdG8gYW4gb2JqZWN0IHByb3BlcnR5LCByZXRyaWV2ZXNcblx0ICogdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFsbCB2YWx1ZXMgaW4gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBJZiBhIHByb3BlcnR5IGNhbid0IGJlIHJlc29sdmVkLCBpdCB3aWxsIHJldHVybiBgdW5kZWZpbmVkYCBmb3Jcblx0ICogdGhhdCB2YWx1ZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSB0YWdOYW1lIG9mIHRoZSBjbGlja2VkIHRhcmdldCBlbGVtZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgdGFnTmFtZXMgPSBjbGlja3MucGx1Y2soJ3RhcmdldCcsICd0YWdOYW1lJyk7XG5cdCAqIHRhZ05hbWVzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgbWFwfVxuXHQgKlxuXHQgKiBAcGFyYW0gey4uLnN0cmluZ30gcHJvcGVydGllcyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2sgZnJvbSBlYWNoIHNvdXJjZVxuXHQgKiB2YWx1ZSAoYW4gb2JqZWN0KS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gUmV0dXJucyBhIG5ldyBPYnNlcnZhYmxlIG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIHRoZVxuXHQgKiBzb3VyY2UgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIHBsdWNrXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBwbHVjaygpIHtcblx0ICAgIHZhciBwcm9wZXJ0aWVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIHByb3BlcnRpZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7XG5cdCAgICBpZiAobGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LicpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1hcF8xLm1hcC5jYWxsKHRoaXMsIHBsdWNrZXIocHJvcGVydGllcywgbGVuZ3RoKSk7XG5cdH1cblx0ZXhwb3J0cy5wbHVjayA9IHBsdWNrO1xuXHRmdW5jdGlvbiBwbHVja2VyKHByb3BzLCBsZW5ndGgpIHtcblx0ICAgIHZhciBtYXBwZXIgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgIHZhciBjdXJyZW50UHJvcCA9IHg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgcCA9IGN1cnJlbnRQcm9wW3Byb3BzW2ldXTtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFByb3AgPSBwO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY3VycmVudFByb3A7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIG1hcHBlcjtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wbHVjay5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHB1Ymxpc2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDk4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2ggPSBwdWJsaXNoXzEucHVibGlzaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjApO1xuXHQvKipcblx0ICogUmV0dXJucyBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgd2hpY2ggaXMgYSB2YXJpZXR5IG9mIE9ic2VydmFibGUgdGhhdCB3YWl0cyB1bnRpbCBpdHMgY29ubmVjdCBtZXRob2QgaXMgY2FsbGVkXG5cdCAqIGJlZm9yZSBpdCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgdG8gdGhvc2UgT2JzZXJ2ZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3B1Ymxpc2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEByZXR1cm4gYSBDb25uZWN0YWJsZU9ic2VydmFibGUgdGhhdCB1cG9uIGNvbm5lY3Rpb24gY2F1c2VzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGl0ZW1zIHRvIGl0cyBPYnNlcnZlcnMuXG5cdCAqIEBtZXRob2QgcHVibGlzaFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaCgpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgU3ViamVjdF8xLlN1YmplY3QoKSk7XG5cdH1cblx0ZXhwb3J0cy5wdWJsaXNoID0gcHVibGlzaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHB1Ymxpc2hCZWhhdmlvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaEJlaGF2aW9yID0gcHVibGlzaEJlaGF2aW9yXzEucHVibGlzaEJlaGF2aW9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoQmVoYXZpb3IuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQmVoYXZpb3JTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwMSk7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0LyoqXG5cdCAqIEBwYXJhbSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgcHVibGlzaEJlaGF2aW9yXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBwdWJsaXNoQmVoYXZpb3IodmFsdWUpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgQmVoYXZpb3JTdWJqZWN0XzEuQmVoYXZpb3JTdWJqZWN0KHZhbHVlKSk7XG5cdH1cblx0ZXhwb3J0cy5wdWJsaXNoQmVoYXZpb3IgPSBwdWJsaXNoQmVoYXZpb3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hCZWhhdmlvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIHRocm93RXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXHR2YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpO1xuXHQvKipcblx0ICogQGNsYXNzIEJlaGF2aW9yU3ViamVjdDxUPlxuXHQgKi9cblx0dmFyIEJlaGF2aW9yU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQmVoYXZpb3JTdWJqZWN0LCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQmVoYXZpb3JTdWJqZWN0KF92YWx1ZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuXHQgICAgfVxuXHQgICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNFcnJvcmVkKSB7XG5cdCAgICAgICAgICAgIHRocm93RXJyb3JfMS50aHJvd0Vycm9yKHRoaXMuZXJyb3JWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdGhyb3dFcnJvcl8xLnRocm93RXJyb3IobmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy5fdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuXHQgICAgfTtcblx0ICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdGhpcy5fdmFsdWUgPSB2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5oYXNFcnJvcmVkID0gdHJ1ZTtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIHRoaXMuZXJyb3JWYWx1ZSA9IGVycik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcblx0fShTdWJqZWN0XzEuU3ViamVjdCkpO1xuXHRleHBvcnRzLkJlaGF2aW9yU3ViamVjdCA9IEJlaGF2aW9yU3ViamVjdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QmVoYXZpb3JTdWJqZWN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcHVibGlzaFJlcGxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXlfMS5wdWJsaXNoUmVwbGF5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoUmVwbGF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcHVibGlzaExhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTA0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hMYXN0ID0gcHVibGlzaExhc3RfMS5wdWJsaXNoTGFzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaExhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXN5bmNTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOCk7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0LyoqXG5cdCAqIEByZXR1cm4ge0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCBwdWJsaXNoTGFzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaExhc3QoKSB7XG5cdCAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpKTtcblx0fVxuXHRleHBvcnRzLnB1Ymxpc2hMYXN0ID0gcHVibGlzaExhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hMYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcmFjZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmFjZSA9IHJhY2VfMS5yYWNlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcmVkdWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwNyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZWR1Y2UgPSByZWR1Y2VfMS5yZWR1Y2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGFwcGxpZXMgYSBzcGVjaWZpZWQgYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSBhIHNvdXJjZSBPYnNlcnZhYmxlLFxuXHQgKiB0aGVuIGZlZWRzIHRoZSByZXN1bHQgb2YgdGhhdCBmdW5jdGlvbiBhbG9uZyB3aXRoIHRoZSBzZWNvbmQgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnRvIHRoZSBzYW1lXG5cdCAqIGZ1bmN0aW9uLCBhbmQgc28gb24gdW50aWwgYWxsIGl0ZW1zIGhhdmUgYmVlbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoZSBmaW5hbCByZXN1bHQgZnJvbVxuXHQgKiB0aGUgZmluYWwgY2FsbCB0byB5b3VyIGZ1bmN0aW9uIGFzIGl0cyBzb2xlIGl0ZW0uXG5cdCAqIFRoaXMgdGVjaG5pcXVlLCB3aGljaCBpcyBjYWxsZWQgXCJyZWR1Y2VcIiBoZXJlLCBpcyBzb21ldGltZXMgY2FsbGVkIFwiYWdncmVnYXRlLFwiIFwiZm9sZCxcIiBcImFjY3VtdWxhdGUsXCIgXCJjb21wcmVzcyxcIiBvclxuXHQgKiBcImluamVjdFwiIGluIG90aGVyIHByb2dyYW1taW5nIGNvbnRleHRzLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JlZHVjZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtpbml0aWFsVmFsdWV9IHRoZSBpbml0aWFsIChzZWVkKSBhY2N1bXVsYXRvciB2YWx1ZVxuXHQgKiBAcGFyYW0ge2FjY3VtdWxhdG9yfSBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlXG5cdCAqIHJlc3VsdCBvZiB3aGljaCB3aWxsIGJlIHVzZWQgaW4gdGhlIG5leHQgYWNjdW11bGF0b3IgY2FsbC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgc2luZ2xlIGl0ZW0gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFjY3VtdWxhdGluZyB0aGUgb3V0cHV0IGZyb20gdGhlXG5cdCAqIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIHJlZHVjZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVkdWNlKHByb2plY3QsIHNlZWQpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlZHVjZU9wZXJhdG9yKHByb2plY3QsIHNlZWQpKTtcblx0fVxuXHRleHBvcnRzLnJlZHVjZSA9IHJlZHVjZTtcblx0dmFyIFJlZHVjZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJlZHVjZU9wZXJhdG9yKHByb2plY3QsIHNlZWQpIHtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG5cdCAgICB9XG5cdCAgICBSZWR1Y2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJlZHVjZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnNlZWQpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVkdWNlT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuUmVkdWNlT3BlcmF0b3IgPSBSZWR1Y2VPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmVkdWNlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVkdWNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZHVjZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHNlZWQpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYWNjID0gc2VlZDtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMuaGFzU2VlZCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcblx0ICAgIH1cblx0ICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUgfHwgKHRoaXMuaGFzVmFsdWUgPSB0aGlzLmhhc1NlZWQpKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVJlZHVjZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmFjYyA9IHZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVJlZHVjZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHRoaXMuYWNjLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWNjID0gcmVzdWx0O1xuXHQgICAgfTtcblx0ICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSB8fCB0aGlzLmhhc1NlZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZWR1Y2VTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuUmVkdWNlU3Vic2NyaWJlciA9IFJlZHVjZVN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHJlcGVhdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVwZWF0ID0gcmVwZWF0XzEucmVwZWF0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0IGNvdW50IHRpbWVzLFxuXHQgKiBvbiBhIHBhcnRpY3VsYXIgU2NoZWR1bGVyLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JlcGVhdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gZW1pdCB0aGUgaXRlbXMgb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnRdIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGl0ZW1zIGFyZSByZXBlYXRlZCwgYSBjb3VudCBvZiAwIHdpbGwgeWllbGRcblx0ICogYW4gZW1wdHkgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0XG5cdCAqIGNvdW50IHRpbWVzLlxuXHQgKiBAbWV0aG9kIHJlcGVhdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVwZWF0KGNvdW50KSB7XG5cdCAgICBpZiAoY291bnQgPT09IHZvaWQgMCkgeyBjb3VudCA9IC0xOyB9XG5cdCAgICBpZiAoY291bnQgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAoY291bnQgPCAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVwZWF0T3BlcmF0b3IoLTEsIHRoaXMpKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlcGVhdE9wZXJhdG9yKGNvdW50IC0gMSwgdGhpcykpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucmVwZWF0ID0gcmVwZWF0O1xuXHR2YXIgUmVwZWF0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmVwZWF0T3BlcmF0b3IoY291bnQsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJlcGVhdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmVwZWF0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXBlYXRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmVwZWF0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVwZWF0U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlcGVhdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmVwZWF0U3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgX2EgPSB0aGlzLCBzb3VyY2UgPSBfYS5zb3VyY2UsIGNvdW50ID0gX2EuY291bnQ7XG5cdCAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVwZWF0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciByZXRyeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MTEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmV0cnkgPSByZXRyeV8xLnJldHJ5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXN1YnNjcmliaW5nIHRvIGl0IGlmIGl0IGNhbGxzIGBlcnJvcmAgYW5kIHRoZVxuXHQgKiBwcmVkaWNhdGUgcmV0dXJucyB0cnVlIGZvciB0aGF0IHNwZWNpZmljIGV4Y2VwdGlvbiBhbmQgcmV0cnkgY291bnQuXG5cdCAqIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBjYWxscyBgZXJyb3JgLCB0aGlzIG1ldGhvZCB3aWxsIHJlc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBmb3IgYSBtYXhpbXVtIG9mXG5cdCAqIGNvdW50IHJlc3Vic2NyaXB0aW9ucyAoZ2l2ZW4gYXMgYSBudW1iZXIgcGFyYW1ldGVyKSByYXRoZXIgdGhhbiBwcm9wYWdhdGluZyB0aGUgYGVycm9yYCBjYWxsLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JldHJ5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBBbnkgYW5kIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aWxsIGJlIGVtaXR0ZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLCBldmVuIHRob3NlIGVtaXR0ZWRcblx0ICogZHVyaW5nIGZhaWxlZCBzdWJzY3JpcHRpb25zLiBGb3IgZXhhbXBsZSwgaWYgYW4gT2JzZXJ2YWJsZSBmYWlscyBhdCBmaXJzdCBidXQgZW1pdHMgWzEsIDJdIHRoZW4gc3VjY2VlZHMgdGhlIHNlY29uZFxuXHQgKiB0aW1lIGFuZCBlbWl0czogWzEsIDIsIDMsIDQsIDVdIHRoZW4gdGhlIGNvbXBsZXRlIHN0cmVhbSBvZiBlbWlzc2lvbnMgYW5kIG5vdGlmaWNhdGlvbnNcblx0ICogd291bGQgYmU6IFsxLCAyLCAxLCAyLCAzLCA0LCA1LCBgY29tcGxldGVgXS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciBvZiByZXRyeSBhdHRlbXB0cyBiZWZvcmUgZmFpbGluZy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1vZGlmaWVkIHdpdGggdGhlIHJldHJ5IGxvZ2ljLlxuXHQgKiBAbWV0aG9kIHJldHJ5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiByZXRyeShjb3VudCkge1xuXHQgICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAtMTsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmV0cnlPcGVyYXRvcihjb3VudCwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMucmV0cnkgPSByZXRyeTtcblx0dmFyIFJldHJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmV0cnlPcGVyYXRvcihjb3VudCwgc291cmNlKSB7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmV0cnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJldHJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXRyeU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZXRyeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJldHJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJldHJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY291bnQsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICBSZXRyeVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgdmFyIF9hID0gdGhpcywgc291cmNlID0gX2Euc291cmNlLCBjb3VudCA9IF9hLmNvdW50O1xuXHQgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcmV0cnlXaGVuXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXRyeVdoZW4gPSByZXRyeVdoZW5fMS5yZXRyeVdoZW47XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5V2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGUgc291cmNlIG9ic2VydmFibGUgd2l0aCB0aGUgZXhjZXB0aW9uIG9mIGFuIGBlcnJvcmAuXG5cdCAqIEFuIGBlcnJvcmAgd2lsbCBjYXVzZSB0aGUgZW1pc3Npb24gb2YgdGhlIFRocm93YWJsZSB0aGF0IGNhdXNlIHRoZSBlcnJvciB0byB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBmcm9tXG5cdCAqIG5vdGlmaWNhdGlvbkhhbmRsZXIuIElmIHRoYXQgT2JzZXJ2YWJsZSBjYWxscyBvbkNvbXBsZXRlIG9yIGBlcnJvcmAgdGhlbiByZXRyeSB3aWxsIGNhbGwgYGNvbXBsZXRlYCBvciBgZXJyb3JgXG5cdCAqIG9uIHRoZSBjaGlsZCBzdWJzY3JpcHRpb24uIE90aGVyd2lzZSwgdGhpcyBPYnNlcnZhYmxlIHdpbGwgcmVzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBvYnNlcnZhYmxlLCBvbiBhIHBhcnRpY3VsYXJcblx0ICogU2NoZWR1bGVyLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JldHJ5V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtub3RpZmljYXRpb25IYW5kbGVyfSByZWNlaXZlcyBhbiBPYnNlcnZhYmxlIG9mIG5vdGlmaWNhdGlvbnMgd2l0aCB3aGljaCBhIHVzZXIgY2FuIGBjb21wbGV0ZWAgb3IgYGVycm9yYCxcblx0ICogYWJvcnRpbmcgdGhlIHJldHJ5LlxuXHQgKiBAcGFyYW0ge3NjaGVkdWxlcn0gdGhlIFNjaGVkdWxlciBvbiB3aGljaCB0byBzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSB0aGUgc291cmNlIE9ic2VydmFibGUgbW9kaWZpZWQgd2l0aCByZXRyeSBsb2dpYy5cblx0ICogQG1ldGhvZCByZXRyeVdoZW5cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHJldHJ5V2hlbihub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmV0cnlXaGVuT3BlcmF0b3Iobm90aWZpZXIsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLnJldHJ5V2hlbiA9IHJldHJ5V2hlbjtcblx0dmFyIFJldHJ5V2hlbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJldHJ5V2hlbk9wZXJhdG9yKG5vdGlmaWVyLCBzb3VyY2UpIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICBSZXRyeVdoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJldHJ5V2hlblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllciwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlXaGVuT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFJldHJ5V2hlblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJldHJ5V2hlblN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSZXRyeVdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllciwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgdmFyIGVycm9ycyA9IHRoaXMuZXJyb3JzO1xuXHQgICAgICAgICAgICB2YXIgcmV0cmllcyA9IHRoaXMucmV0cmllcztcblx0ICAgICAgICAgICAgdmFyIHJldHJpZXNTdWJzY3JpcHRpb24gPSB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIGlmICghcmV0cmllcykge1xuXHQgICAgICAgICAgICAgICAgZXJyb3JzID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICByZXRyaWVzID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLm5vdGlmaWVyKShlcnJvcnMpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJldHJpZXMgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXRyaWVzU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXRyaWVzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuXHQgICAgICAgICAgICB0aGlzLnJldHJpZXMgPSByZXRyaWVzO1xuXHQgICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSByZXRyaWVzU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgICAgICBlcnJvcnMubmV4dChlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JzID0gX2EuZXJyb3JzLCByZXRyaWVzU3Vic2NyaXB0aW9uID0gX2EucmV0cmllc1N1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoZXJyb3JzKSB7XG5cdCAgICAgICAgICAgIGVycm9ycy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChyZXRyaWVzU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JzID0gX2EuZXJyb3JzLCByZXRyaWVzID0gX2EucmV0cmllcywgcmV0cmllc1N1YnNjcmlwdGlvbiA9IF9hLnJldHJpZXNTdWJzY3JpcHRpb247XG5cdCAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsO1xuXHQgICAgICAgIHRoaXMucmV0cmllcyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzID0gcmV0cmllcztcblx0ICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSByZXRyaWVzU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlXaGVuU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgc2FtcGxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxNSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zYW1wbGUgPSBzYW1wbGVfMS5zYW1wbGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBFbWl0cyB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdoZW5ldmVyXG5cdCAqIGFub3RoZXIgT2JzZXJ2YWJsZSwgdGhlIGBub3RpZmllcmAsIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBzYW1wbGVUaW1lfSwgYnV0IHNhbXBsZXMgd2hlbmV2ZXJcblx0ICogdGhlIGBub3RpZmllcmAgT2JzZXJ2YWJsZSBlbWl0cyBzb21ldGhpbmcuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NhbXBsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogV2hlbmV2ZXIgdGhlIGBub3RpZmllcmAgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgYHNhbXBsZWBcblx0ICogbG9va3MgYXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBlbWl0cyB3aGljaGV2ZXIgdmFsdWUgaXQgaGFzIG1vc3QgcmVjZW50bHlcblx0ICogZW1pdHRlZCBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcsIHVubGVzcyB0aGUgc291cmNlIGhhcyBub3QgZW1pdHRlZFxuXHQgKiBhbnl0aGluZyBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcuIFRoZSBgbm90aWZpZXJgIGlzIHN1YnNjcmliZWQgdG8gYXMgc29vblxuXHQgKiBhcyB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2ssIHNhbXBsZSB0aGUgbW9zdCByZWNlbnQgXCJzZWNvbmRzXCIgdGltZXI8L2NhcHRpb24+XG5cdCAqIHZhciBzZWNvbmRzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IHNlY29uZHMuc2FtcGxlKGNsaWNrcyk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cblx0ICogQHNlZSB7QGxpbmsgc2FtcGxlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgdGhyb3R0bGV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSBub3RpZmllciBUaGUgT2JzZXJ2YWJsZSB0byB1c2UgZm9yIHNhbXBsaW5nIHRoZVxuXHQgKiBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIHNhbXBsaW5nIHRoZVxuXHQgKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2hlbmV2ZXIgdGhlIG5vdGlmaWVyIE9ic2VydmFibGVcblx0ICogZW1pdHMgdmFsdWUgb3IgY29tcGxldGVzLlxuXHQgKiBAbWV0aG9kIHNhbXBsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2FtcGxlKG5vdGlmaWVyKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVPcGVyYXRvcihub3RpZmllcikpO1xuXHR9XG5cdGV4cG9ydHMuc2FtcGxlID0gc2FtcGxlO1xuXHR2YXIgU2FtcGxlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU2FtcGxlT3BlcmF0b3Iobm90aWZpZXIpIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICB9XG5cdCAgICBTYW1wbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNhbXBsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2FtcGxlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2FtcGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNhbXBsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG5vdGlmaWVyKSk7XG5cdCAgICB9XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuXHQgICAgfTtcblx0ICAgIFNhbXBsZVN1YnNjcmliZXIucHJvdG90eXBlLmVtaXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNhbXBsZVN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNhbXBsZVRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTE3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNhbXBsZVRpbWUgPSBzYW1wbGVUaW1lXzEuc2FtcGxlVGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdC8qKlxuXHQgKiBFbWl0cyB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGhpblxuXHQgKiBwZXJpb2RpYyB0aW1lIGludGVydmFscy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlNhbXBsZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IHBlcmlvZGljIHRpbWVcblx0ICogaW50ZXJ2YWxzLCBlbWl0dGluZyB3aGF0IGl0IHNhbXBsZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NhbXBsZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBzYW1wbGVUaW1lYCBwZXJpb2RpY2FsbHkgbG9va3MgYXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBlbWl0cyB3aGljaGV2ZXJcblx0ICogdmFsdWUgaXQgaGFzIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcsIHVubGVzcyB0aGVcblx0ICogc291cmNlIGhhcyBub3QgZW1pdHRlZCBhbnl0aGluZyBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcuIFRoZSBzYW1wbGluZ1xuXHQgKiBoYXBwZW5zIHBlcmlvZGljYWxseSBpbiB0aW1lIGV2ZXJ5IGBwZXJpb2RgIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWUgdW5pdFxuXHQgKiBkZWZpbmVkIGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYCBhcmd1bWVudCkuIFRoZSBzYW1wbGluZyBzdGFydHMgYXMgc29vbiBhc1xuXHQgKiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgc2Vjb25kLCBlbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhdCBtb3N0IG9uY2U8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Muc2FtcGxlVGltZSgxMDAwKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuXHQgKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgKiBAc2VlIHtAbGluayBzYW1wbGV9XG5cdCAqIEBzZWUge0BsaW5rIHRocm90dGxlVGltZX1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IHBlcmlvZCBUaGUgc2FtcGxpbmcgcGVyaW9kIGV4cHJlc3NlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlXG5cdCAqIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3Jcblx0ICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgc2FtcGxpbmcuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBzYW1wbGluZyB0aGVcblx0ICogdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IHRoZSBzcGVjaWZpZWQgdGltZSBpbnRlcnZhbC5cblx0ICogQG1ldGhvZCBzYW1wbGVUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBzYW1wbGVUaW1lKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2FtcGxlVGltZU9wZXJhdG9yKHBlcmlvZCwgc2NoZWR1bGVyKSk7XG5cdH1cblx0ZXhwb3J0cy5zYW1wbGVUaW1lID0gc2FtcGxlVGltZTtcblx0dmFyIFNhbXBsZVRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTYW1wbGVUaW1lT3BlcmF0b3IocGVyaW9kLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIFNhbXBsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNhbXBsZVRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucGVyaW9kLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNhbXBsZVRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTYW1wbGVUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTm90aWZpY2F0aW9uLCBwZXJpb2QsIHsgc3Vic2NyaWJlcjogdGhpcywgcGVyaW9kOiBwZXJpb2QgfSkpO1xuXHQgICAgfVxuXHQgICAgU2FtcGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmxhc3RWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVUaW1lU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRmdW5jdGlvbiBkaXNwYXRjaE5vdGlmaWNhdGlvbihzdGF0ZSkge1xuXHQgICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwZXJpb2QgPSBzdGF0ZS5wZXJpb2Q7XG5cdCAgICBzdWJzY3JpYmVyLm5vdGlmeU5leHQoKTtcblx0ICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHBlcmlvZCk7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNjYW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTE5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNjYW4gPSBzY2FuXzEuc2Nhbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nhbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0LyoqXG5cdCAqIEFwcGxpZXMgYW4gYWNjdW11bGF0aW9uIGZ1bmN0aW9uIG92ZXIgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgcmV0dXJucyBlYWNoXG5cdCAqIGludGVybWVkaWF0ZSByZXN1bHQsIHdpdGggYW4gb3B0aW9uYWwgc2VlZCB2YWx1ZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgcmVkdWNlfSwgYnV0IGVtaXRzIHRoZSBjdXJyZW50XG5cdCAqIGFjY3VtdWxhdGlvbiB3aGVuZXZlciB0aGUgc291cmNlIGVtaXRzIGEgdmFsdWUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NjYW4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIENvbWJpbmVzIHRvZ2V0aGVyIGFsbCB2YWx1ZXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLCB1c2luZyBhbiBhY2N1bXVsYXRvclxuXHQgKiBmdW5jdGlvbiB0aGF0IGtub3dzIGhvdyB0byBqb2luIGEgbmV3IHNvdXJjZSB2YWx1ZSBpbnRvIHRoZSBhY2N1bXVsYXRpb24gZnJvbVxuXHQgKiB0aGUgcGFzdC4gSXMgc2ltaWxhciB0byB7QGxpbmsgcmVkdWNlfSwgYnV0IGVtaXRzIHRoZSBpbnRlcm1lZGlhdGVcblx0ICogYWNjdW11bGF0aW9ucy5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgYXBwbGllcyBhIHNwZWNpZmllZCBgYWNjdW11bGF0b3JgIGZ1bmN0aW9uIHRvIGVhY2hcblx0ICogaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgYSBgc2VlZGAgdmFsdWUgaXMgc3BlY2lmaWVkLCB0aGVuXG5cdCAqIHRoYXQgdmFsdWUgd2lsbCBiZSB1c2VkIGFzIHRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGUgYWNjdW11bGF0b3IuIElmIG5vIHNlZWRcblx0ICogdmFsdWUgaXMgc3BlY2lmaWVkLCB0aGUgZmlyc3QgaXRlbSBvZiB0aGUgc291cmNlIGlzIHVzZWQgYXMgdGhlIHNlZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50IHRoZSBudW1iZXIgb2YgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgb25lcyA9IGNsaWNrcy5tYXBUbygxKTtcblx0ICogdmFyIHNlZWQgPSAwO1xuXHQgKiB2YXIgY291bnQgPSBvbmVzLnNjYW4oKGFjYywgb25lKSA9PiBhY2MgKyBvbmUsIHNlZWQpO1xuXHQgKiBjb3VudC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGV4cGFuZH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKiBAc2VlIHtAbGluayByZWR1Y2V9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oYWNjOiBSLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IFJ9IGFjY3VtdWxhdG9yXG5cdCAqIFRoZSBhY2N1bXVsYXRvciBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBzb3VyY2UgdmFsdWUuXG5cdCAqIEBwYXJhbSB7VHxSfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0aW9uIHZhbHVlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fSBBbiBvYnNlcnZhYmxlIG9mIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZXMuXG5cdCAqIEBtZXRob2Qgc2NhblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2NhbihhY2N1bXVsYXRvciwgc2VlZCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2Nhbk9wZXJhdG9yKGFjY3VtdWxhdG9yLCBzZWVkKSk7XG5cdH1cblx0ZXhwb3J0cy5zY2FuID0gc2Nhbjtcblx0dmFyIFNjYW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTY2FuT3BlcmF0b3IoYWNjdW11bGF0b3IsIHNlZWQpIHtcblx0ICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG5cdCAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcblx0ICAgIH1cblx0ICAgIFNjYW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNjYW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWNjdW11bGF0b3IsIHRoaXMuc2VlZCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTY2FuT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNjYW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTY2FuU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNjYW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhY2N1bXVsYXRvciwgc2VlZCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG5cdCAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcblx0ICAgIH1cblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2FuU3Vic2NyaWJlci5wcm90b3R5cGUsIFwic2VlZFwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWVkO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMuX3NlZWQgPSB2YWx1ZTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICghdGhpcy5hY2N1bXVsYXRvclNldCkge1xuXHQgICAgICAgICAgICB0aGlzLnNlZWQgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl90cnlOZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRvcih0aGlzLnNlZWQsIHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnNlZWQgPSByZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNjYW5TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjYW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBzaGFyZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2hhcmUgPSBzaGFyZV8xLnNoYXJlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIwKTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRmdW5jdGlvbiBzaGFyZVN1YmplY3RGYWN0b3J5KCkge1xuXHQgICAgcmV0dXJuIG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuXHR9XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgdGhhdCBtdWx0aWNhc3RzIChzaGFyZXMpIHRoZSBvcmlnaW5hbCBPYnNlcnZhYmxlLiBBcyBsb25nIGFzIHRoZXJlIGlzIGF0IGxlYXN0IG9uZVxuXHQgKiBTdWJzY3JpYmVyIHRoaXMgT2JzZXJ2YWJsZSB3aWxsIGJlIHN1YnNjcmliZWQgYW5kIGVtaXR0aW5nIGRhdGEuIFdoZW4gYWxsIHN1YnNjcmliZXJzIGhhdmUgdW5zdWJzY3JpYmVkIGl0IHdpbGxcblx0ICogdW5zdWJzY3JpYmUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuIEJlY2F1c2UgdGhlIE9ic2VydmFibGUgaXMgbXVsdGljYXN0aW5nIGl0IG1ha2VzIHRoZSBzdHJlYW0gYGhvdGAuXG5cdCAqIFRoaXMgaXMgYW4gYWxpYXMgZm9yIC5wdWJsaXNoKCkucmVmQ291bnQoKS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zaGFyZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IHVwb24gY29ubmVjdGlvbiBjYXVzZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRvIGVtaXQgaXRlbXMgdG8gaXRzIE9ic2VydmVyc1xuXHQgKiBAbWV0aG9kIHNoYXJlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBzaGFyZSgpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBzaGFyZVN1YmplY3RGYWN0b3J5KS5yZWZDb3VudCgpO1xuXHR9XG5cdGV4cG9ydHMuc2hhcmUgPSBzaGFyZTtcblx0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNpbmdsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2luZ2xlID0gc2luZ2xlXzEuc2luZ2xlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2luZ2xlIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBtYXRjaGVzIGEgc3BlY2lmaWVkXG5cdCAqIHByZWRpY2F0ZSwgaWYgdGhhdCBPYnNlcnZhYmxlIGVtaXRzIG9uZSBzdWNoIGl0ZW0uIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBtb3JlIHRoYW4gb25lIHN1Y2ggaXRlbSBvciBub1xuXHQgKiBzdWNoIGl0ZW1zLCBub3RpZnkgb2YgYW4gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIG9yIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gcmVzcGVjdGl2ZWx5LlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NpbmdsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHRocm93cyB7RW1wdHlFcnJvcn0gRGVsaXZlcnMgYW4gRW1wdHlFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgXG5cdCAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRvIGV2YWx1YXRlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHNpbmdsZSBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgbWF0Y2hlc1xuXHQgKiB0aGUgcHJlZGljYXRlLlxuXHQgLlxuXHQgKiBAbWV0aG9kIHNpbmdsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2luZ2xlKHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzKSk7XG5cdH1cblx0ZXhwb3J0cy5zaW5nbGUgPSBzaW5nbGU7XG5cdHZhciBTaW5nbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTaW5nbGVPcGVyYXRvcihwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgU2luZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTaW5nbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTaW5nbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2luZ2xlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2luZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNpbmdsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc2VlblZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5hcHBseVNpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc2VlblZhbHVlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgZWxlbWVudCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5zZWVuVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnNpbmdsZVZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHRoaXMucHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAocHJlZGljYXRlKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5TmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmFwcGx5U2luZ2xlVmFsdWUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaW5nbGVWYWx1ZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLmluZGV4ID4gMCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMuc2VlblZhbHVlID8gdGhpcy5zaW5nbGVWYWx1ZSA6IHVuZGVmaW5lZCk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2luZ2xlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBza2lwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwID0gc2tpcF8xLnNraXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBgbmAgaXRlbXMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NraXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0aGUgYG5gIG9mIHRpbWVzLCBpdGVtcyBlbWl0dGVkIGJ5IHNvdXJjZSBPYnNlcnZhYmxlIHNob3VsZCBiZSBza2lwcGVkLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAbWV0aG9kIHNraXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHNraXAodG90YWwpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNraXBPcGVyYXRvcih0b3RhbCkpO1xuXHR9XG5cdGV4cG9ydHMuc2tpcCA9IHNraXA7XG5cdHZhciBTa2lwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU2tpcE9wZXJhdG9yKHRvdGFsKSB7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgfVxuXHQgICAgU2tpcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2tpcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTa2lwT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNraXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTa2lwU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNraXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB0b3RhbCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IDA7XG5cdCAgICB9XG5cdCAgICBTa2lwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgIGlmICgrK3RoaXMuY291bnQgPiB0aGlzLnRvdGFsKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh4KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBza2lwVW50aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTI3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBVbnRpbCA9IHNraXBVbnRpbF8xLnNraXBVbnRpbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcFVudGlsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHVudGlsIGEgc2Vjb25kIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9za2lwVW50aWwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gdGhlIHNlY29uZCBPYnNlcnZhYmxlIHRoYXQgaGFzIHRvIGVtaXQgYW4gaXRlbSBiZWZvcmUgdGhlIHNvdXJjZSBPYnNlcnZhYmxlJ3MgZWxlbWVudHMgYmVnaW4gdG9cblx0ICogYmUgbWlycm9yZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgdGhlIHNlY29uZCBPYnNlcnZhYmxlIGVtaXRzXG5cdCAqIGFuIGl0ZW0sIHRoZW4gZW1pdHMgdGhlIHJlbWFpbmluZyBpdGVtcy5cblx0ICogQG1ldGhvZCBza2lwVW50aWxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHNraXBVbnRpbChub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcblx0fVxuXHRleHBvcnRzLnNraXBVbnRpbCA9IHNraXBVbnRpbDtcblx0dmFyIFNraXBVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNraXBVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgfVxuXHQgICAgU2tpcFVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2tpcFVudGlsT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNraXBVbnRpbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNraXBVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTa2lwVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pc0lubmVyU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgbm90aWZpZXIpKTtcblx0ICAgIH1cblx0ICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmlzSW5uZXJTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmlzSW5uZXJTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBVbnRpbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBVbnRpbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHNraXBXaGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcFdoaWxlID0gc2tpcFdoaWxlXzEuc2tpcFdoaWxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1za2lwV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaG9sZHNcblx0ICogdHJ1ZSwgYnV0IGVtaXRzIGFsbCBmdXJ0aGVyIHNvdXJjZSBpdGVtcyBhcyBzb29uIGFzIHRoZSBjb25kaXRpb24gYmVjb21lcyBmYWxzZS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9za2lwV2hpbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSAtIGEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGl0ZW0gZW1pdHRlZCBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGJlZ2lucyBlbWl0dGluZyBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aGVuIHRoZVxuXHQgKiBzcGVjaWZpZWQgcHJlZGljYXRlIGJlY29tZXMgZmFsc2UuXG5cdCAqIEBtZXRob2Qgc2tpcFdoaWxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBza2lwV2hpbGUocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcblx0fVxuXHRleHBvcnRzLnNraXBXaGlsZSA9IHNraXBXaGlsZTtcblx0dmFyIFNraXBXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNraXBXaGlsZU9wZXJhdG9yKHByZWRpY2F0ZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgU2tpcFdoaWxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBXaGlsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTa2lwV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTa2lwV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU2tpcFdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc2tpcHBpbmcgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgU2tpcFdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLnNraXBwaW5nKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5Q2FsbFByZWRpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghdGhpcy5za2lwcGluZykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2tpcFdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q2FsbFByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTtcblx0ICAgICAgICAgICAgdGhpcy5za2lwcGluZyA9IEJvb2xlYW4ocmVzdWx0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTa2lwV2hpbGVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHN0YXJ0V2l0aF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3RhcnRXaXRoID0gc3RhcnRXaXRoXzEuc3RhcnRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdGFydFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNCk7XG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0dmFyIGNvbmNhdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDUpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiBhIHNwZWNpZmllZCBJdGVyYWJsZSBiZWZvcmUgaXQgYmVnaW5zIHRvIGVtaXQgaXRlbXMgZW1pdHRlZCBieSB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvc3RhcnRXaXRoLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge1ZhbHVlc30gYW4gSXRlcmFibGUgdGhhdCBjb250YWlucyB0aGUgaXRlbXMgeW91IHdhbnQgdGhlIG1vZGlmaWVkIE9ic2VydmFibGUgdG8gZW1pdCBmaXJzdC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiB0aGUgc3BlY2lmaWVkIEl0ZXJhYmxlIGFuZCB0aGVuIGVtaXRzIHRoZSBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBzdGFydFdpdGhcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN0YXJ0V2l0aCgpIHtcblx0ICAgIHZhciBhcnJheSA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcblx0ICAgICAgICBhcnJheS5wb3AoKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuXHQgICAgaWYgKGxlbiA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiBjb25jYXRfMS5jb25jYXRTdGF0aWMobmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKGxlbiA+IDEpIHtcblx0ICAgICAgICByZXR1cm4gY29uY2F0XzEuY29uY2F0U3RhdGljKG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlciksIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGNvbmNhdF8xLmNvbmNhdFN0YXRpYyhuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlciksIHRoaXMpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMuc3RhcnRXaXRoID0gc3RhcnRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdGFydFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciBzdWJzY3JpYmVPbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlT24gPSBzdWJzY3JpYmVPbl8xLnN1YnNjcmliZU9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVPbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBTdWJzY3JpYmVPbk9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM0KTtcblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91c2x5IHN1YnNjcmliZXMgT2JzZXJ2ZXJzIHRvIHRoaXMgT2JzZXJ2YWJsZSBvbiB0aGUgc3BlY2lmaWVkIFNjaGVkdWxlci5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zdWJzY3JpYmVPbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IHRoZSBTY2hlZHVsZXIgdG8gcGVyZm9ybSBzdWJzY3JpcHRpb24gYWN0aW9ucyBvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1vZGlmaWVkIHNvIHRoYXQgaXRzIHN1YnNjcmlwdGlvbnMgaGFwcGVuIG9uIHRoZSBzcGVjaWZpZWQgU2NoZWR1bGVyXG5cdCAuXG5cdCAqIEBtZXRob2Qgc3Vic2NyaWJlT25cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN1YnNjcmliZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuXHQgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGVfMS5TdWJzY3JpYmVPbk9ic2VydmFibGUodGhpcywgZGVsYXksIHNjaGVkdWxlcik7XG5cdH1cblx0ZXhwb3J0cy5zdWJzY3JpYmVPbiA9IHN1YnNjcmliZU9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVPbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGFzYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM1KTtcblx0dmFyIGlzTnVtZXJpY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzUpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBTdWJzY3JpYmVPbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFN1YnNjcmliZU9uT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIGRlbGF5VGltZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKGRlbGF5VGltZSA9PT0gdm9pZCAwKSB7IGRlbGF5VGltZSA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmRlbGF5VGltZSA9IGRlbGF5VGltZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoIWlzTnVtZXJpY18xLmlzTnVtZXJpYyhkZWxheVRpbWUpIHx8IGRlbGF5VGltZSA8IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZWxheVRpbWUgPSAwO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIXNjaGVkdWxlciB8fCB0eXBlb2Ygc2NoZWR1bGVyLnNjaGVkdWxlICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgU3Vic2NyaWJlT25PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzb3VyY2UsIGRlbGF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7IH1cblx0ICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIGRlbGF5LCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gYXJnLnNvdXJjZSwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5kZWxheVRpbWU7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCwgZGVsYXksIHtcblx0ICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVPbk9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXNhcFNjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MzYpO1xuXHRleHBvcnRzLmFzYXAgPSBuZXcgQXNhcFNjaGVkdWxlcl8xLkFzYXBTY2hlZHVsZXIoKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXNhcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBBc2FwQWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzNyk7XG5cdHZhciBRdWV1ZVNjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzkpO1xuXHR2YXIgQXNhcFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXNhcFNjaGVkdWxlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFzYXBTY2hlZHVsZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBBc2FwU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQXNhcEFjdGlvbl8xLkFzYXBBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBc2FwU2NoZWR1bGVyO1xuXHR9KFF1ZXVlU2NoZWR1bGVyXzEuUXVldWVTY2hlZHVsZXIpKTtcblx0ZXhwb3J0cy5Bc2FwU2NoZWR1bGVyID0gQXNhcFNjaGVkdWxlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcFNjaGVkdWxlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBJbW1lZGlhdGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM4KTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzgpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBBc2FwQWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc2FwQWN0aW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQXNhcEFjdGlvbigpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIEFzYXBBY3Rpb24ucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICBpZiAoZGVsYXkgPiAwKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9zY2hlZHVsZS5jYWxsKHRoaXMsIHN0YXRlLCBkZWxheSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2godGhpcyk7XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIuc2NoZWR1bGVkSWQpIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZElkID0gSW1tZWRpYXRlXzEuSW1tZWRpYXRlLnNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgc2NoZWR1bGVyLmZsdXNoKCk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZWRJZCA9IHNjaGVkdWxlci5zY2hlZHVsZWRJZCwgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgaWYgKGFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlci5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlZElkICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZWRJZCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBJbW1lZGlhdGVfMS5JbW1lZGlhdGUuY2xlYXJJbW1lZGlhdGUoc2NoZWR1bGVkSWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBc2FwQWN0aW9uO1xuXHR9KEZ1dHVyZUFjdGlvbl8xLkZ1dHVyZUFjdGlvbikpO1xuXHRleHBvcnRzLkFzYXBBY3Rpb24gPSBBc2FwQWN0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bc2FwQWN0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oY2xlYXJJbW1lZGlhdGUsIHNldEltbWVkaWF0ZSkgey8qKlxuXHRTb21lIGNyZWRpdCBmb3IgdGhpcyBoZWxwZXIgZ29lcyB0byBodHRwOi8vZ2l0aHViLmNvbS9ZdXp1SlMvc2V0SW1tZWRpYXRlXG5cdCovXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBJbW1lZGlhdGVEZWZpbml0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEltbWVkaWF0ZURlZmluaXRpb24ocm9vdCkge1xuXHQgICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG5cdCAgICAgICAgaWYgKHJvb3Quc2V0SW1tZWRpYXRlICYmIHR5cGVvZiByb290LnNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHJvb3Quc2V0SW1tZWRpYXRlLmJpbmQocm9vdCk7XG5cdCAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUgPSByb290LmNsZWFySW1tZWRpYXRlLmJpbmQocm9vdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLm5leHRIYW5kbGUgPSAxO1xuXHQgICAgICAgICAgICB0aGlzLnRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgICAgICAgICBpZiAodGhpcy5jYW5Vc2VQcm9jZXNzTmV4dFRpY2soKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVBvc3RNZXNzYWdlU2V0SW1tZWRpYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VNZXNzYWdlQ2hhbm5lbCgpKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlKCkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVNldFRpbWVvdXRTZXRJbW1lZGlhdGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgY2kgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgICAgIGRlbGV0ZSBjbGVhckltbWVkaWF0ZS5pbnN0YW5jZS50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGNpLmluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZSA9IGNpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yb290Lk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VQcm9jZXNzTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZnkodGhpcy5yb290LnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlTWVzc2FnZUNoYW5uZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKTtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMucm9vdC5kb2N1bWVudDtcblx0ICAgICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudCAmJiAnb25yZWFkeXN0YXRlY2hhbmdlJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSk7XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHJvb3QgPSB0aGlzLnJvb3Q7XG5cdCAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuXHQgICAgICAgIC8vIHdoZXJlIGByb290LnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAocm9vdC5wb3N0TWVzc2FnZSAmJiAhcm9vdC5pbXBvcnRTY3JpcHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzXzEgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gcm9vdC5vbm1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHJvb3QucG9zdE1lc3NhZ2UoJycsICcqJyk7XG5cdCAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgLy8gVGhpcyBmdW5jdGlvbiBhY2NlcHRzIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBzZXRJbW1lZGlhdGUsIGJ1dFxuXHQgICAgLy8gcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmVxdWlyZXMgbm8gYXJndW1lbnRzLlxuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucGFydGlhbGx5QXBwbGllZCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiByZXN1bHQoKSB7XG5cdCAgICAgICAgICAgIHZhciBfYSA9IHJlc3VsdCwgaGFuZGxlciA9IF9hLmhhbmRsZXIsIGFyZ3MgPSBfYS5hcmdzO1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIChuZXcgRnVuY3Rpb24oJycgKyBoYW5kbGVyKSkoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaGFuZGxlciA9IGhhbmRsZXI7XG5cdCAgICAgICAgZm4uYXJncyA9IGFyZ3M7XG5cdCAgICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHRoaXMudGFza3NCeUhhbmRsZVt0aGlzLm5leHRIYW5kbGVdID0gdGhpcy5wYXJ0aWFsbHlBcHBsaWVkLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubmV4dEhhbmRsZSsrO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG5cdCAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wcm9jZXNzLm5leHRUaWNrKGluc3RhbmNlLnBhcnRpYWxseUFwcGxpZWQoaW5zdGFuY2UucnVuSWZQcmVzZW50LCBoYW5kbGUpKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gZm47XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHQgICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gJ3NldEltbWVkaWF0ZSQnICsgcm9vdC5NYXRoLnJhbmRvbSgpICsgJyQnO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBnbG9iYWxNZXNzYWdlSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBnbG9iYWxNZXNzYWdlSGFuZGxlci5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gcm9vdCAmJlxuXHQgICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmXG5cdCAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIGluc3RhbmNlLnJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBvbkdsb2JhbE1lc3NhZ2UuaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIF9hID0gc2V0SW1tZWRpYXRlLCBtZXNzYWdlUHJlZml4ID0gX2EubWVzc2FnZVByZWZpeCwgaW5zdGFuY2UgPSBfYS5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCAnKicpO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIGZuLm1lc3NhZ2VQcmVmaXggPSBtZXNzYWdlUHJlZml4O1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5ydW5JZlByZXNlbnQgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogJ1dhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLidcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmICh0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyAndG9vIG11Y2ggcmVjdXJzaW9uJyBlcnJvci5cblx0ICAgICAgICAgICAgdGhpcy5yb290LnNldFRpbWVvdXQodGhpcy5wYXJ0aWFsbHlBcHBsaWVkKHRoaXMucnVuSWZQcmVzZW50LCBoYW5kbGUpLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGhpcy50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRhc2soKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgdGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIF90aGlzLnJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgX2EgPSBzZXRJbW1lZGlhdGUsIGNoYW5uZWwgPSBfYS5jaGFubmVsLCBpbnN0YW5jZSA9IF9hLmluc3RhbmNlO1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBmbi5jaGFubmVsID0gY2hhbm5lbDtcblx0ICAgICAgICBmbi5pbnN0YW5jZSA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG5cdCAgICAgICAgICAgIHZhciByb290ID0gaW5zdGFuY2Uucm9vdDtcblx0ICAgICAgICAgICAgdmFyIGRvYyA9IHJvb3QuZG9jdW1lbnQ7XG5cdCAgICAgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVTZXRUaW1lb3V0U2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gc2V0SW1tZWRpYXRlLmluc3RhbmNlO1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5yb290LnNldFRpbWVvdXQoaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSksIDApO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW1tZWRpYXRlRGVmaW5pdGlvbjtcblx0fSgpKTtcblx0ZXhwb3J0cy5JbW1lZGlhdGVEZWZpbml0aW9uID0gSW1tZWRpYXRlRGVmaW5pdGlvbjtcblx0ZXhwb3J0cy5JbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlRGVmaW5pdGlvbihyb290XzEucm9vdCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUltbWVkaWF0ZS5qcy5tYXBcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNTM5KS5jbGVhckltbWVkaWF0ZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0sXG4vKiA1MzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUsIGNsZWFySW1tZWRpYXRlKSB7dmFyIG5leHRUaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDApLm5leHRUaWNrO1xuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblx0dmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xuXHR2YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuXHRleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuXHQgICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHNldEltbWVkaWF0ZSA6IGZ1bmN0aW9uKGZuKSB7XG5cdCAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG5cdCAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcblx0ICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblx0XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gb25OZXh0VGljaygpIHtcblx0ICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG5cdCAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2Vcblx0ICAgICAgLy8gQHNlZSBodHRwOi8vanNwZXJmLmNvbS9jYWxsLWFwcGx5LXNlZ3Vcblx0ICAgICAgaWYgKGFyZ3MpIHtcblx0ICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmbi5jYWxsKG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIFByZXZlbnQgaWRzIGZyb20gbGVha2luZ1xuXHQgICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGlkO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xuXHQgIGRlbGV0ZSBpbW1lZGlhdGVJZHNbaWRdO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpLnNldEltbWVkaWF0ZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpLmNsZWFySW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDU0MCAqLyxcbi8qIDU0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHN3aXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoID0gc3dpdGNoXzEuX3N3aXRjaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnlcblx0ICogc3Vic2NyaWJpbmcgdG8gb25seSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIG9mIHRob3NlIGlubmVyIE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBkcm9wcGluZyB0aGVcblx0ICogcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZSBvbmNlIGEgbmV3IG9uZSBhcHBlYXJzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zd2l0Y2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBzd2l0Y2hgIHN1YnNjcmliZXMgdG8gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzLCBhbHNvIGtub3duIGFzIGFcblx0ICogaGlnaGVyLW9yZGVyIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2UgZW1pdHRlZCBpbm5lclxuXHQgKiBPYnNlcnZhYmxlcywgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHN1YnNjcmliZXMgdG8gdGhlIGlubmVyIE9ic2VydmFibGUgYW5kXG5cdCAqIGJlZ2lucyBlbWl0dGluZyB0aGUgaXRlbXMgZW1pdHRlZCBieSB0aGF0LiBTbyBmYXIsIGl0IGJlaGF2ZXNcblx0ICogbGlrZSB7QGxpbmsgbWVyZ2VBbGx9LiBIb3dldmVyLCB3aGVuIGEgbmV3IGlubmVyIE9ic2VydmFibGUgaXMgZW1pdHRlZCxcblx0ICogYHN3aXRjaGAgdW5zdWJzY3JpYmVzIGZyb20gdGhlIGVhcmxpZXItZW1pdHRlZCBpbm5lciBPYnNlcnZhYmxlIGFuZFxuXHQgKiBzdWJzY3JpYmVzIHRvIHRoZSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBhbmQgYmVnaW5zIGVtaXR0aW5nIGl0ZW1zIGZyb20gaXQuIEl0XG5cdCAqIGNvbnRpbnVlcyB0byBiZWhhdmUgbGlrZSB0aGlzIGZvciBzdWJzZXF1ZW50IGlubmVyIE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiAvLyBFYWNoIGNsaWNrIGV2ZW50IGlzIG1hcHBlZCB0byBhbiBPYnNlcnZhYmxlIHRoYXQgdGlja3MgZXZlcnkgc2Vjb25kXG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogdmFyIHN3aXRjaGVkID0gaGlnaGVyT3JkZXIuc3dpdGNoKCk7XG5cdCAqIC8vIFRoZSBvdXRjb21lIGlzIHRoYXQgYHN3aXRjaGVkYCBpcyBlc3NlbnRpYWxseSBhIHRpbWVyIHRoYXQgcmVzdGFydHNcblx0ICogLy8gb24gZXZlcnkgY2xpY2suIFRoZSBpbnRlcnZhbCBPYnNlcnZhYmxlcyBmcm9tIG9sZGVyIGNsaWNrcyBkbyBub3QgbWVyZ2Vcblx0ICogLy8gd2l0aCB0aGUgY3VycmVudCBpbnRlcnZhbCBPYnNlcnZhYmxlLlxuXHQgKiBzd2l0Y2hlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG5cdCAqIEBzZWUge0BsaW5rIHppcEFsbH1cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZVxuXHQgKiBPYnNlcnZhYmxlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2Qgc3dpdGNoXG5cdCAqIEBuYW1lIHN3aXRjaFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3N3aXRjaCgpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE9wZXJhdG9yKCkpO1xuXHR9XG5cdGV4cG9ydHMuX3N3aXRjaCA9IF9zd2l0Y2g7XG5cdHZhciBTd2l0Y2hPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hPcGVyYXRvcigpIHtcblx0ICAgIH1cblx0ICAgIFN3aXRjaE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3dpdGNoU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN3aXRjaE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTd2l0Y2hTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZUlubmVyKCk7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUrKztcblx0ICAgICAgICB0aGlzLmFkZCh0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB2YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmVJbm5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlID4gMCA/IHRoaXMuYWN0aXZlIC0gMSA6IDA7XG5cdCAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSW5uZXIoKTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgc3dpdGNoTWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0NCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXBfMS5zd2l0Y2hNYXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBpbiB0aGUgb3V0cHV0XG5cdCAqIE9ic2VydmFibGUsIGVtaXR0aW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5NYXBzIGVhY2ggdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSwgdGhlbiBmbGF0dGVucyBhbGwgb2Zcblx0ICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIHN3aXRjaH0uPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuXHQgKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG5cdCAqIHJldHVybnMgYW4gKHNvLWNhbGxlZCBcImlubmVyXCIpIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2Vcblx0ICogaW5uZXIgT2JzZXJ2YWJsZXMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiZWdpbnMgZW1pdHRpbmcgdGhlIGl0ZW1zIGVtaXR0ZWQgYnlcblx0ICogdGhhdCBpbm5lciBPYnNlcnZhYmxlLiBXaGVuIGEgbmV3IGlubmVyIE9ic2VydmFibGUgaXMgZW1pdHRlZCwgYHN3aXRjaE1hcGBcblx0ICogc3RvcHMgZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kIGJlZ2luc1xuXHQgKiBlbWl0dGluZyBpdGVtcyBmcm9tIHRoZSBuZXcgb25lLiBJdCBjb250aW51ZXMgdG8gYmVoYXZlIGxpa2UgdGhpcyBmb3Jcblx0ICogc3Vic2VxdWVudCBpbm5lciBPYnNlcnZhYmxlcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+UmVydW4gYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSBvbiBldmVyeSBjbGljayBldmVudDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zd2l0Y2hNYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cblx0ICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cblx0ICogT2JzZXJ2YWJsZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG5cdCAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcblx0ICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG5cdCAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcblx0ICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuXHQgKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIHRha2luZyBvbmx5IHRoZSB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRseVxuXHQgKiBwcm9qZWN0ZWQgaW5uZXIgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBzd2l0Y2hNYXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN3aXRjaE1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLnN3aXRjaE1hcCA9IHN3aXRjaE1hcDtcblx0dmFyIFN3aXRjaE1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN3aXRjaE1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBTd2l0Y2hNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnJlc3VsdFNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN3aXRjaE1hcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTd2l0Y2hNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKCFpbm5lclN1YnNjcmlwdGlvbiB8fCBpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICB0aGlzLl90cnlOb3RpZnlOZXh0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5Tm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgc3dpdGNoTWFwVG9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN3aXRjaE1hcFRvID0gc3dpdGNoTWFwVG9fMS5zd2l0Y2hNYXBUbztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBmbGF0dGVuZWQgbXVsdGlwbGVcblx0ICogdGltZXMgd2l0aCB7QGxpbmsgc3dpdGNofSBpbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHN3aXRjaE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcblx0ICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZXNcblx0ICogZW1pdHMgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIGluc3RhbmNlIG9mXG5cdCAqIGBpbm5lck9ic2VydmFibGVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnN3aXRjaE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5uZXJPYnNlcnZhYmxlIEFuIE9ic2VydmFibGUgdG8gcmVwbGFjZSBlYWNoIHZhbHVlIGZyb21cblx0ICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcblx0ICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcblx0ICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCBldmVyeSB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCAoYW5kIG9wdGlvbmFsbHkgdHJhbnNmb3JtZWQgdGhyb3VnaCBgcmVzdWx0U2VsZWN0b3JgKSBldmVyeVxuXHQgKiB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCB0YWtpbmcgb25seSB0aGUgdmFsdWVzXG5cdCAqIGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2Qgc3dpdGNoTWFwVG9cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN3aXRjaE1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE1hcFRvT3BlcmF0b3IoaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMuc3dpdGNoTWFwVG8gPSBzd2l0Y2hNYXBUbztcblx0dmFyIFN3aXRjaE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoTWFwVG9PcGVyYXRvcihvYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFRvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGUsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwVG9PcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU3dpdGNoTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlubmVyLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHRoaXMuaW5uZXIsIHZhbHVlLCB0aGlzLmluZGV4KyspKTtcblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy50cnlSZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwVG9TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRha2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2UgPSB0YWtlXzEudGFrZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0OSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0LyoqXG5cdCAqIEVtaXRzIG9ubHkgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGFrZXMgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSwgdGhlblxuXHQgKiBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGB0YWtlYCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBmaXJzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkXG5cdCAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGAgdmFsdWVzIHRoZW5cblx0ICogYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIEFmdGVyIHRoYXQsIGl0IGNvbXBsZXRlcywgcmVnYXJkbGVzcyBpZiB0aGVcblx0ICogc291cmNlIGNvbXBsZXRlcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+VGFrZSB0aGUgZmlyc3QgNSBzZWNvbmRzIG9mIGFuIGluZmluaXRlIDEtc2Vjb25kIGludGVydmFsIE9ic2VydmFibGU8L2NhcHRpb24+XG5cdCAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBmaXZlID0gaW50ZXJ2YWwudGFrZSg1KTtcblx0ICogZml2ZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuXHQgKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VXaGlsZX1cblx0ICogQHNlZSB7QGxpbmsgc2tpcH1cblx0ICpcblx0ICogQHRocm93cyB7QXJndW1lbnRPdXRPZlJhbmdlRXJyb3J9IFdoZW4gdXNpbmcgYHRha2UoaSlgLCBpdCBkZWxpdmVycyBhblxuXHQgKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYG5leHRgIHZhbHVlcyB0byBlbWl0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgYGNvdW50YFxuXHQgKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIG9yIGFsbCBvZiB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBpZiB0aGUgc291cmNlIGVtaXRzIGZld2VyIHRoYW4gYGNvdW50YCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgdGFrZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGFrZShjb3VudCkge1xuXHQgICAgaWYgKGNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRha2VPcGVyYXRvcihjb3VudCkpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMudGFrZSA9IHRha2U7XG5cdHZhciBUYWtlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGFrZU9wZXJhdG9yKHRvdGFsKSB7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBUYWtlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVGFrZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRha2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGFrZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgIH1cblx0ICAgIFRha2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG5cdCAgICAgICAgaWYgKCsrdGhpcy5jb3VudCA8PSB0b3RhbCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gdG90YWwpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdC8qKlxuXHQgKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBlbGVtZW50IHdhcyBxdWVyaWVkIGF0IGEgY2VydGFpbiBpbmRleCBvZiBhblxuXHQgKiBPYnNlcnZhYmxlLCBidXQgbm8gc3VjaCBpbmRleCBvciBwb3NpdGlvbiBleGlzdHMgaW4gdGhhdCBzZXF1ZW5jZS5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZWxlbWVudEF0fVxuXHQgKiBAc2VlIHtAbGluayB0YWtlfVxuXHQgKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cblx0ICpcblx0ICogQGNsYXNzIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXG5cdCAqL1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgJ2FyZ3VtZW50IG91dCBvZiByYW5nZScpO1xuXHQgICAgICAgIHRoaXMubmFtZSA9ICdBcmd1bWVudE91dE9mUmFuZ2VFcnJvcic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG5cdH0oRXJyb3IpKTtcblx0ZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRha2VMYXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlTGFzdCA9IHRha2VMYXN0XzEudGFrZUxhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VMYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ5KTtcblx0dmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzYpO1xuXHQvKipcblx0ICogRW1pdHMgb25seSB0aGUgbGFzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlJlbWVtYmVycyB0aGUgbGF0ZXN0IGBjb3VudGAgdmFsdWVzLCB0aGVuIGVtaXRzIHRob3NlXG5cdCAqIG9ubHkgd2hlbiB0aGUgc291cmNlIGNvbXBsZXRlcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvdGFrZUxhc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGB0YWtlTGFzdGAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYXQgbW9zdCB0aGUgbGFzdCBgY291bnRgIHZhbHVlc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGBcblx0ICogdmFsdWVzIHRoZW4gYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIFRoaXMgb3BlcmF0b3IgbXVzdCB3YWl0IHVudGlsIHRoZVxuXHQgKiBgY29tcGxldGVgIG5vdGlmaWNhdGlvbiBlbWlzc2lvbiBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gZW1pdCB0aGUgYG5leHRgXG5cdCAqIHZhbHVlcyBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGJlY2F1c2Ugb3RoZXJ3aXNlIGl0IGlzIGltcG9zc2libGUgdG8ga25vd1xuXHQgKiB3aGV0aGVyIG9yIG5vdCBtb3JlIHZhbHVlcyB3aWxsIGJlIGVtaXR0ZWQgb24gdGhlIHNvdXJjZS4gRm9yIHRoaXMgcmVhc29uLFxuXHQgKiBhbGwgdmFsdWVzIGFyZSBlbWl0dGVkIHN5bmNocm9ub3VzbHksIGZvbGxvd2VkIGJ5IHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPlRha2UgdGhlIGxhc3QgMyB2YWx1ZXMgb2YgYW4gT2JzZXJ2YWJsZSB3aXRoIG1hbnkgdmFsdWVzPC9jYXB0aW9uPlxuXHQgKiB2YXIgbWFueSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTAwKTtcblx0ICogdmFyIGxhc3RUaHJlZSA9IG1hbnkudGFrZUxhc3QoMyk7XG5cdCAqIGxhc3RUaHJlZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHRha2V9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VVbnRpbH1cblx0ICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAdGhyb3dzIHtBcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0gV2hlbiB1c2luZyBgdGFrZUxhc3QoaSlgLCBpdCBkZWxpdmVycyBhblxuXHQgKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgdmFsdWVzIHRvIGVtaXQgZnJvbSB0aGUgZW5kIG9mXG5cdCAqIHRoZSBzZXF1ZW5jZSBvZiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhdCBtb3N0IHRoZSBsYXN0IGNvdW50XG5cdCAqIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB0YWtlTGFzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGFrZUxhc3QoY291bnQpIHtcblx0ICAgIGlmIChjb3VudCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlTGFzdE9wZXJhdG9yKGNvdW50KSk7XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy50YWtlTGFzdCA9IHRha2VMYXN0O1xuXHR2YXIgVGFrZUxhc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUYWtlTGFzdE9wZXJhdG9yKHRvdGFsKSB7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBUYWtlTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZUxhc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZUxhc3RPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVGFrZUxhc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUYWtlTGFzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUYWtlTGFzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcblx0ICAgICAgICB0aGlzLnJpbmcgPSBuZXcgQXJyYXkoKTtcblx0ICAgICAgICB0aGlzLmNvdW50ID0gMDtcblx0ICAgIH1cblx0ICAgIFRha2VMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZztcblx0ICAgICAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsO1xuXHQgICAgICAgIHZhciBjb3VudCA9IHRoaXMuY291bnQrKztcblx0ICAgICAgICBpZiAocmluZy5sZW5ndGggPCB0b3RhbCkge1xuXHQgICAgICAgICAgICByaW5nLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gY291bnQgJSB0b3RhbDtcblx0ICAgICAgICAgICAgcmluZ1tpbmRleF0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGFrZUxhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgY291bnQgPSB0aGlzLmNvdW50O1xuXHQgICAgICAgIGlmIChjb3VudCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5jb3VudCA+PSB0aGlzLnRvdGFsID8gdGhpcy50b3RhbCA6IHRoaXMuY291bnQ7XG5cdCAgICAgICAgICAgIHZhciByaW5nID0gdGhpcy5yaW5nO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBpZHggPSAoY291bnQrKykgJSB0b3RhbDtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmluZ1tpZHhdKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUYWtlTGFzdFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZUxhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB0YWtlVW50aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2VVbnRpbCA9IHRha2VVbnRpbF8xLnRha2VVbnRpbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZVVudGlsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEVtaXRzIHRoZSB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgYSBgbm90aWZpZXJgXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxldHMgdmFsdWVzIHBhc3MgdW50aWwgYSBzZWNvbmQgT2JzZXJ2YWJsZSxcblx0ICogYG5vdGlmaWVyYCwgZW1pdHMgc29tZXRoaW5nLiBUaGVuLCBpdCBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2VVbnRpbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYHRha2VVbnRpbGAgc3Vic2NyaWJlcyBhbmQgYmVnaW5zIG1pcnJvcmluZyB0aGUgc291cmNlIE9ic2VydmFibGUuIEl0IGFsc29cblx0ICogbW9uaXRvcnMgYSBzZWNvbmQgT2JzZXJ2YWJsZSwgYG5vdGlmaWVyYCB0aGF0IHlvdSBwcm92aWRlLiBJZiB0aGUgYG5vdGlmaWVyYFxuXHQgKiBlbWl0cyBhIHZhbHVlIG9yIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgc3RvcHNcblx0ICogbWlycm9yaW5nIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgY29tcGxldGVzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5UaWNrIGV2ZXJ5IHNlY29uZCB1bnRpbCB0aGUgZmlyc3QgY2xpY2sgaGFwcGVuczwvY2FwdGlvbj5cblx0ICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGludGVydmFsLnRha2VVbnRpbChjbGlja3MpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB0YWtlfVxuXHQgKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cblx0ICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG5vdGlmaWVyIFRoZSBPYnNlcnZhYmxlIHdob3NlIGZpcnN0IGVtaXR0ZWQgdmFsdWUgd2lsbFxuXHQgKiBjYXVzZSB0aGUgb3V0cHV0IE9ic2VydmFibGUgb2YgYHRha2VVbnRpbGAgdG8gc3RvcCBlbWl0dGluZyB2YWx1ZXMgZnJvbSB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIHVudGlsIHN1Y2ggdGltZSBhcyBgbm90aWZpZXJgIGVtaXRzIGl0cyBmaXJzdCB2YWx1ZS5cblx0ICogQG1ldGhvZCB0YWtlVW50aWxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRha2VVbnRpbChub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZVVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcblx0fVxuXHRleHBvcnRzLnRha2VVbnRpbCA9IHRha2VVbnRpbDtcblx0dmFyIFRha2VVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgfVxuXHQgICAgVGFrZVVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlVW50aWxTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVVudGlsT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFRha2VVbnRpbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRha2VVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUYWtlVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuXHQgICAgfVxuXHQgICAgVGFrZVVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBUYWtlVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvLyBub29wXG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VVbnRpbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VVbnRpbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHRha2VXaGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NTUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZVdoaWxlID0gdGFrZVdoaWxlXzEudGFrZVdoaWxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8qKlxuXHQgKiBFbWl0cyB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgc28gbG9uZyBhcyBlYWNoIHZhbHVlIHNhdGlzZmllc1xuXHQgKiB0aGUgZ2l2ZW4gYHByZWRpY2F0ZWAsIGFuZCB0aGVuIGNvbXBsZXRlcyBhcyBzb29uIGFzIHRoaXMgYHByZWRpY2F0ZWAgaXMgbm90XG5cdCAqIHNhdGlzZmllZC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRha2VzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugb25seSB3aGlsZSB0aGV5IHBhc3MgdGhlXG5cdCAqIGNvbmRpdGlvbiBnaXZlbi4gV2hlbiB0aGUgZmlyc3QgdmFsdWUgZG9lcyBub3Qgc2F0aXNmeSwgaXQgY29tcGxldGVzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy90YWtlV2hpbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGB0YWtlV2hpbGVgIHN1YnNjcmliZXMgYW5kIGJlZ2lucyBtaXJyb3JpbmcgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBFYWNoIHZhbHVlXG5cdCAqIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSBpcyBnaXZlbiB0byB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhXG5cdCAqIGJvb2xlYW4sIHJlcHJlc2VudGluZyBhIGNvbmRpdGlvbiB0byBiZSBzYXRpc2ZpZWQgYnkgdGhlIHNvdXJjZSB2YWx1ZXMuIFRoZVxuXHQgKiBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyB0aGUgc291cmNlIHZhbHVlcyB1bnRpbCBzdWNoIHRpbWUgYXMgdGhlIGBwcmVkaWNhdGVgXG5cdCAqIHJldHVybnMgZmFsc2UsIGF0IHdoaWNoIHBvaW50IGB0YWtlV2hpbGVgIHN0b3BzIG1pcnJvcmluZyB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgYW5kIGNvbXBsZXRlcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgY2xpY2sgZXZlbnRzIG9ubHkgd2hpbGUgdGhlIGNsaWVudFggcHJvcGVydHkgaXMgZ3JlYXRlciB0aGFuIDIwMDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy50YWtlV2hpbGUoZXYgPT4gZXYuY2xpZW50WCA+IDIwMCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHRha2V9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuXHQgKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG5cdCAqIEBzZWUge0BsaW5rIHNraXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBib29sZWFufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0aGF0XG5cdCAqIGV2YWx1YXRlcyBhIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCByZXR1cm5zIGEgYm9vbGVhbi5cblx0ICogQWxzbyB0YWtlcyB0aGUgKHplcm8tYmFzZWQpIGluZGV4IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlIHNvIGxvbmcgYXMgZWFjaCB2YWx1ZSBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBkZWZpbmVkIGJ5IHRoZVxuXHQgKiBgcHJlZGljYXRlYCwgdGhlbiBjb21wbGV0ZXMuXG5cdCAqIEBtZXRob2QgdGFrZVdoaWxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0YWtlV2hpbGUocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcblx0fVxuXHRleHBvcnRzLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcblx0dmFyIFRha2VXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRha2VXaGlsZU9wZXJhdG9yKHByZWRpY2F0ZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgVGFrZVdoaWxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VXaGlsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUYWtlV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUYWtlV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGFrZVdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgVGFrZVdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIHRoaXMuaW5kZXgrKyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm5leHRPckNvbXBsZXRlKHZhbHVlLCByZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIFRha2VXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHRPckNvbXBsZXRlID0gZnVuY3Rpb24gKHZhbHVlLCBwcmVkaWNhdGVSZXN1bHQpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmIChCb29sZWFuKHByZWRpY2F0ZVJlc3VsdCkpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVdoaWxlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB0aHJvdHRsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NTcpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGhyb3R0bGUgPSB0aHJvdHRsZV8xLnRocm90dGxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdC8qKlxuXHQgKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIGlnbm9yZXMgc3Vic2VxdWVudCBzb3VyY2Vcblx0ICogdmFsdWVzIGZvciBhIGR1cmF0aW9uIGRldGVybWluZWQgYnkgYW5vdGhlciBPYnNlcnZhYmxlLCB0aGVuIHJlcGVhdHMgdGhpc1xuXHQgKiBwcm9jZXNzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayB0aHJvdHRsZVRpbWV9LCBidXQgdGhlIHNpbGVuY2luZ1xuXHQgKiBkdXJhdGlvbiBpcyBkZXRlcm1pbmVkIGJ5IGEgc2Vjb25kIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm90dGxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgdGhyb3R0bGVgIGVtaXRzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlXG5cdCAqIHdoZW4gaXRzIGludGVybmFsIHRpbWVyIGlzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoZW4gdGhlIHRpbWVyXG5cdCAqIGlzIGVuYWJsZWQuIEluaXRpYWxseSwgdGhlIHRpbWVyIGlzIGRpc2FibGVkLiBBcyBzb29uIGFzIHRoZSBmaXJzdCBzb3VyY2Vcblx0ICogdmFsdWUgYXJyaXZlcywgaXQgaXMgZm9yd2FyZGVkIHRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSwgYW5kIHRoZW4gdGhlIHRpbWVyXG5cdCAqIGlzIGVuYWJsZWQgYnkgY2FsbGluZyB0aGUgYGR1cmF0aW9uU2VsZWN0b3JgIGZ1bmN0aW9uIHdpdGggdGhlIHNvdXJjZSB2YWx1ZSxcblx0ICogd2hpY2ggcmV0dXJucyB0aGUgXCJkdXJhdGlvblwiIE9ic2VydmFibGUuIFdoZW4gdGhlIGR1cmF0aW9uIE9ic2VydmFibGUgZW1pdHMgYVxuXHQgKiB2YWx1ZSBvciBjb21wbGV0ZXMsIHRoZSB0aW1lciBpcyBkaXNhYmxlZCwgYW5kIHRoaXMgcHJvY2VzcyByZXBlYXRzIGZvciB0aGVcblx0ICogbmV4dCBzb3VyY2UgdmFsdWUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgY2xpY2tzIGF0IGEgcmF0ZSBvZiBhdCBtb3N0IG9uZSBjbGljayBwZXIgc2Vjb25kPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnRocm90dGxlKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBhdWRpdH1cblx0ICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG5cdCAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cblx0ICogQHNlZSB7QGxpbmsgc2FtcGxlfVxuXHQgKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBPYnNlcnZhYmxlfFByb21pc2V9IGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvblxuXHQgKiB0aGF0IHJlY2VpdmVzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIGZvciBjb21wdXRpbmcgdGhlIHNpbGVuY2luZ1xuXHQgKiBkdXJhdGlvbiBmb3IgZWFjaCBzb3VyY2UgdmFsdWUsIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbiB0b1xuXHQgKiBsaW1pdCB0aGUgcmF0ZSBvZiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlLlxuXHQgKiBAbWV0aG9kIHRocm90dGxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZShkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLnRocm90dGxlID0gdGhyb3R0bGU7XG5cdHZhciBUaHJvdHRsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBUaHJvdHRsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGhyb3R0bGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaHJvdHRsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUaHJvdHRsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRocm90dGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5RHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RHVyYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBkdXJhdGlvbiA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmVtaXRBbmRUaHJvdHRsZSh2YWx1ZSwgZHVyYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuZW1pdEFuZFRocm90dGxlID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbikpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHRocm90dGxlZCA9IHRoaXMudGhyb3R0bGVkO1xuXHQgICAgICAgIGlmICh0aHJvdHRsZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRocm90dGxlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB0aHJvdHRsZVRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTU5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRocm90dGxlVGltZSA9IHRocm90dGxlVGltZV8xLnRocm90dGxlVGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0LyoqXG5cdCAqIEVtaXRzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gaWdub3JlcyBzdWJzZXF1ZW50IHNvdXJjZVxuXHQgKiB2YWx1ZXMgZm9yIGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzLCB0aGVuIHJlcGVhdHMgdGhpcyBwcm9jZXNzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGV0cyBhIHZhbHVlIHBhc3MsIHRoZW4gaWdub3JlcyBzb3VyY2UgdmFsdWVzIGZvciB0aGVcblx0ICogbmV4dCBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvdGhyb3R0bGVUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgdGhyb3R0bGVUaW1lYCBlbWl0cyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuXHQgKiB3aGVuIGl0cyBpbnRlcm5hbCB0aW1lciBpcyBkaXNhYmxlZCwgYW5kIGlnbm9yZXMgc291cmNlIHZhbHVlcyB3aGVuIHRoZSB0aW1lclxuXHQgKiBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Qgc291cmNlXG5cdCAqIHZhbHVlIGFycml2ZXMsIGl0IGlzIGZvcndhcmRlZCB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGVuIHRoZSB0aW1lclxuXHQgKiBpcyBlbmFibGVkLiBBZnRlciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkXG5cdCAqIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBoYXMgcGFzc2VkLCB0aGUgdGltZXIgaXMgZGlzYWJsZWQsXG5cdCAqIGFuZCB0aGlzIHByb2Nlc3MgcmVwZWF0cyBmb3IgdGhlIG5leHQgc291cmNlIHZhbHVlLiBPcHRpb25hbGx5IHRha2VzIGFcblx0ICoge0BsaW5rIFNjaGVkdWxlcn0gZm9yIG1hbmFnaW5nIHRpbWVycy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGlja3MgYXQgYSByYXRlIG9mIGF0IG1vc3Qgb25lIGNsaWNrIHBlciBzZWNvbmQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MudGhyb3R0bGVUaW1lKDEwMDApO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBhdWRpdFRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXl9XG5cdCAqIEBzZWUge0BsaW5rIHNhbXBsZVRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gVGltZSB0byB3YWl0IGJlZm9yZSBlbWl0dGluZyBhbm90aGVyIHZhbHVlIGFmdGVyXG5cdCAqIGVtaXR0aW5nIHRoZSBsYXN0IHZhbHVlLCBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkXG5cdCAqIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3Jcblx0ICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgc2FtcGxpbmcuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBwZXJmb3JtcyB0aGUgdGhyb3R0bGUgb3BlcmF0aW9uIHRvXG5cdCAqIGxpbWl0IHRoZSByYXRlIG9mIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UuXG5cdCAqIEBtZXRob2QgdGhyb3R0bGVUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZVRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLnRocm90dGxlVGltZSA9IHRocm90dGxlVGltZTtcblx0dmFyIFRocm90dGxlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBUaHJvdHRsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRocm90dGxlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGhyb3R0bGVUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFRocm90dGxlVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRocm90dGxlVGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIFRocm90dGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgdGhpcy5kdXJhdGlvbiwgeyBzdWJzY3JpYmVyOiB0aGlzIH0pKTtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdGhyb3R0bGVkID0gdGhpcy50aHJvdHRsZWQ7XG5cdCAgICAgICAgaWYgKHRocm90dGxlZCkge1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGhyb3R0bGVUaW1lU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRmdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgc3Vic2NyaWJlci5jbGVhclRocm90dGxlKCk7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdGltZW91dF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZW91dCA9IHRpbWVvdXRfMS50aW1lb3V0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdHZhciBpc0RhdGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQHBhcmFtIGR1ZVxuXHQgKiBAcGFyYW0gZXJyb3JUb1NlbmRcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB0aW1lb3V0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aW1lb3V0KGR1ZSwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGVycm9yVG9TZW5kID09PSB2b2lkIDApIHsgZXJyb3JUb1NlbmQgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuXHQgICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMudGltZW91dCA9IHRpbWVvdXQ7XG5cdHZhciBUaW1lb3V0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG5cdCAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG5cdCAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgVGltZW91dE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hYnNvbHV0ZVRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcy5lcnJvclRvU2VuZCwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGltZW91dE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUaW1lb3V0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGltZW91dFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaW1lb3V0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWJzb2x1dGVUaW1lb3V0LCB3YWl0Rm9yLCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuXHQgICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG5cdCAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICB9XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLCBcInByZXZpb3VzSW5kZXhcIiwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNJbmRleDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleDtcblx0ICAgICAgICBpZiAoIXNvdXJjZS5oYXNDb21wbGV0ZWQgJiYgc291cmNlLnByZXZpb3VzSW5kZXggPT09IGN1cnJlbnRJbmRleCkge1xuXHQgICAgICAgICAgICBzb3VyY2Uubm90aWZ5VGltZW91dCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmluZGV4O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCwgdGhpcy53YWl0Rm9yLCB7IHN1YnNjcmliZXI6IHRoaXMsIGluZGV4OiBjdXJyZW50SW5kZXggfSk7XG5cdCAgICAgICAgdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXg7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVycm9yKHRoaXMuZXJyb3JUb1NlbmQgfHwgbmV3IEVycm9yKCd0aW1lb3V0JykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lb3V0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdGltZW91dFdpdGhfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYzKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXRXaXRoID0gdGltZW91dFdpdGhfMS50aW1lb3V0V2l0aDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc2KTtcblx0dmFyIGlzRGF0ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogQHBhcmFtIGR1ZVxuXHQgKiBAcGFyYW0gd2l0aE9ic2VydmFibGVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB0aW1lb3V0V2l0aFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGltZW91dFdpdGgoZHVlLCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuXHQgICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dFdpdGhPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLnRpbWVvdXRXaXRoID0gdGltZW91dFdpdGg7XG5cdHZhciBUaW1lb3V0V2l0aE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRpbWVvdXRXaXRoT3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcblx0ICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcblx0ICAgICAgICB0aGlzLndpdGhPYnNlcnZhYmxlID0gd2l0aE9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBUaW1lb3V0V2l0aE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFdpdGhTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWJzb2x1dGVUaW1lb3V0LCB0aGlzLndhaXRGb3IsIHRoaXMud2l0aE9ic2VydmFibGUsIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRpbWVvdXRXaXRoT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFRpbWVvdXRXaXRoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGltZW91dFdpdGhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGltZW91dFdpdGhTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhYnNvbHV0ZVRpbWVvdXQsIHdhaXRGb3IsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG5cdCAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcblx0ICAgICAgICB0aGlzLndpdGhPYnNlcnZhYmxlID0gd2l0aE9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy50aW1lb3V0U3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpO1xuXHQgICAgfVxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUsIFwicHJldmlvdXNJbmRleFwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0luZGV4O1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gc3RhdGUuaW5kZXg7XG5cdCAgICAgICAgaWYgKCFzb3VyY2UuaGFzQ29tcGxldGVkICYmIHNvdXJjZS5wcmV2aW91c0luZGV4ID09PSBjdXJyZW50SW5kZXgpIHtcblx0ICAgICAgICAgICAgc291cmNlLmhhbmRsZVRpbWVvdXQoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZVRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHRoaXMuaW5kZXg7XG5cdCAgICAgICAgdmFyIHRpbWVvdXRTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgaW5kZXg6IGN1cnJlbnRJbmRleCB9O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGltZW91dFN0YXRlKTtcblx0ICAgICAgICB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IGN1cnJlbnRJbmRleDtcblx0ICAgIH07XG5cdCAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuaGFuZGxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdmFyIHdpdGhPYnNlcnZhYmxlID0gdGhpcy53aXRoT2JzZXJ2YWJsZTtcblx0ICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmFkZCh0aGlzLnRpbWVvdXRTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHdpdGhPYnNlcnZhYmxlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lb3V0V2l0aFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXRXaXRoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdG9BcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9BcnJheSA9IHRvQXJyYXlfMS50b0FycmF5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHQvKipcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnlbXT58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIHRvQXJyYXlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUb0FycmF5T3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy50b0FycmF5ID0gdG9BcnJheTtcblx0dmFyIFRvQXJyYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUb0FycmF5T3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBUb0FycmF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUb0FycmF5U3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRvQXJyYXlPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVG9BcnJheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRvQXJyYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVG9BcnJheVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5hcnJheSA9IFtdO1xuXHQgICAgfVxuXHQgICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICB0aGlzLmFycmF5LnB1c2goeCk7XG5cdCAgICB9O1xuXHQgICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hcnJheSk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUb0FycmF5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgdG9Qcm9taXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IHRvUHJvbWlzZV8xLnRvUHJvbWlzZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dG9Qcm9taXNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgd2luZG93XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3cgPSB3aW5kb3dfMS53aW5kb3c7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvdy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHdoZW5ldmVyXG5cdCAqIGB3aW5kb3dCb3VuZGFyaWVzYCBlbWl0cy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyfSwgYnV0IGVtaXRzIGEgbmVzdGVkIE9ic2VydmFibGVcblx0ICogaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmdcblx0ICogd2luZG93cy4gSXQgZW1pdHMgdGhlIGN1cnJlbnQgd2luZG93IGFuZCBvcGVucyBhIG5ldyBvbmUgd2hlbmV2ZXIgdGhlXG5cdCAqIE9ic2VydmFibGUgYHdpbmRvd0JvdW5kYXJpZXNgIGVtaXRzIGFuIGl0ZW0uIEJlY2F1c2UgZWFjaCB3aW5kb3cgaXMgYW5cblx0ICogT2JzZXJ2YWJsZSwgdGhlIG91dHB1dCBpcyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JbiBldmVyeSB3aW5kb3cgb2YgMSBzZWNvbmQgZWFjaCwgZW1pdCBhdCBtb3N0IDIgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvdyhpbnRlcnZhbClcblx0ICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSB3aW5kb3dCb3VuZGFyaWVzIEFuIE9ic2VydmFibGUgdGhhdCBjb21wbGV0ZXMgdGhlXG5cdCAqIHByZXZpb3VzIHdpbmRvdyBhbmQgc3RhcnRzIGEgbmV3IHdpbmRvdy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gT2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBhcmVcblx0ICogT2JzZXJ2YWJsZXMgZW1pdHRpbmcgdmFsdWVzIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB3aW5kb3dcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvdyh3aW5kb3dCb3VuZGFyaWVzKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3cgPSB3aW5kb3c7XG5cdHZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3dCb3VuZGFyaWVzID0gd2luZG93Qm91bmRhcmllcztcblx0ICAgIH1cblx0ICAgIFdpbmRvd09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLndpbmRvd0JvdW5kYXJpZXMpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93T3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpbmRvd1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFdpbmRvd1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB3aW5kb3dCb3VuZGFyaWVzKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgd2luZG93Qm91bmRhcmllcykpO1xuXHQgICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuXHQgICAgfVxuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMud2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHByZXZXaW5kb3cgPSB0aGlzLndpbmRvdztcblx0ICAgICAgICBpZiAocHJldldpbmRvdykge1xuXHQgICAgICAgICAgICBwcmV2V2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIG5ld1dpbmRvdyA9IHRoaXMud2luZG93ID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgZGVzdGluYXRpb24uYWRkKG5ld1dpbmRvdyk7XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChuZXdXaW5kb3cpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3cuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB3aW5kb3dDb3VudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93Q291bnQgPSB3aW5kb3dDb3VudF8xLndpbmRvd0NvdW50O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHQvKipcblx0ICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2l0aCBlYWNoXG5cdCAqIG5lc3RlZCBPYnNlcnZhYmxlIGVtaXR0aW5nIGF0IG1vc3QgYHdpbmRvd1NpemVgIHZhbHVlcy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyQ291bnR9LCBidXQgZW1pdHMgYSBuZXN0ZWRcblx0ICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dDb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgZXZlcnkgYHN0YXJ0V2luZG93RXZlcnlgXG5cdCAqIGl0ZW1zLCBlYWNoIGNvbnRhaW5pbmcgbm8gbW9yZSB0aGFuIGB3aW5kb3dTaXplYCBpdGVtcy4gV2hlbiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgY29tcGxldGVzIG9yIGVuY291bnRlcnMgYW4gZXJyb3IsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0c1xuXHQgKiB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gSWYgYHN0YXJ0V2luZG93RXZlcnlgIGlzIG5vdCBwcm92aWRlZCwgdGhlbiBuZXcgd2luZG93cyBhcmVcblx0ICogc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBhbmQgd2hlbiBlYWNoIHdpbmRvdyBjb21wbGV0ZXNcblx0ICogd2l0aCBzaXplIGB3aW5kb3dTaXplYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+SWdub3JlIGV2ZXJ5IDNyZCBjbGljayBldmVudCwgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3Qgb25lPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd0NvdW50KDMpXG5cdCAqICAgLm1hcCh3aW4gPT4gd2luLnNraXAoMSkpIC8vIHNraXAgZmlyc3Qgb2YgZXZlcnkgMyBjbGlja3Ncblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSB0aGlyZCBvbmU8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93Q291bnQoMiwgMylcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3aW5kb3dTaXplIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2YWx1ZXMgZW1pdHRlZCBieSBlYWNoXG5cdCAqIHdpbmRvdy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydFdpbmRvd0V2ZXJ5XSBJbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBhIG5ldyB3aW5kb3cuXG5cdCAqIEZvciBleGFtcGxlIGlmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgd2luZG93IHdpbGwgYmUgc3RhcnRlZFxuXHQgKiBvbiBldmVyeSBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIGF0IHRoZVxuXHQgKiBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBieSBkZWZhdWx0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBPYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cblx0ICogYXJlIE9ic2VydmFibGUgb2YgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIHdpbmRvd0NvdW50XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB3aW5kb3dDb3VudCh3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7XG5cdCAgICBpZiAoc3RhcnRXaW5kb3dFdmVyeSA9PT0gdm9pZCAwKSB7IHN0YXJ0V2luZG93RXZlcnkgPSAwOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dDb3VudE9wZXJhdG9yKHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpKTtcblx0fVxuXHRleHBvcnRzLndpbmRvd0NvdW50ID0gd2luZG93Q291bnQ7XG5cdHZhciBXaW5kb3dDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd0NvdW50T3BlcmF0b3Iod2luZG93U2l6ZSwgc3RhcnRXaW5kb3dFdmVyeSkge1xuXHQgICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID0gc3RhcnRXaW5kb3dFdmVyeTtcblx0ICAgIH1cblx0ICAgIFdpbmRvd0NvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dTaXplLCB0aGlzLnN0YXJ0V2luZG93RXZlcnkpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93Q291bnRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgV2luZG93Q291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID0gc3RhcnRXaW5kb3dFdmVyeTtcblx0ICAgICAgICB0aGlzLndpbmRvd3MgPSBbbmV3IFN1YmplY3RfMS5TdWJqZWN0KCldO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHZhciBmaXJzdFdpbmRvdyA9IHRoaXMud2luZG93c1swXTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5hZGQoZmlyc3RXaW5kb3cpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoZmlyc3RXaW5kb3cpO1xuXHQgICAgfVxuXHQgICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBzdGFydFdpbmRvd0V2ZXJ5ID0gKHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA+IDApID8gdGhpcy5zdGFydFdpbmRvd0V2ZXJ5IDogdGhpcy53aW5kb3dTaXplO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIHdpbmRvd1NpemUgPSB0aGlzLndpbmRvd1NpemU7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgdmFyIGxlbiA9IHdpbmRvd3MubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgd2luZG93c1tpXS5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGMgPSB0aGlzLmNvdW50IC0gd2luZG93U2l6ZSArIDE7XG5cdCAgICAgICAgaWYgKGMgPj0gMCAmJiBjICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCkge1xuXHQgICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCsrdGhpcy5jb3VudCAlIHN0YXJ0V2luZG93RXZlcnkgPT09IDApIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgIHdpbmRvd3MucHVzaCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93XzEpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dDb3VudFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93Q291bnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB3aW5kb3dUaW1lXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3Mik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dUaW1lID0gd2luZG93VGltZV8xLndpbmRvd1RpbWU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdC8qKlxuXHQgKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSBwZXJpb2RpY2FsbHlcblx0ICogaW4gdGltZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyVGltZX0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuXHQgKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd1RpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBzdGFydHMgYSBuZXcgd2luZG93IHBlcmlvZGljYWxseSwgYXNcblx0ICogZGV0ZXJtaW5lZCBieSB0aGUgYHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWxgIGFyZ3VtZW50LiBJdCBlbWl0cyBlYWNoIHdpbmRvd1xuXHQgKiBhZnRlciBhIGZpeGVkIHRpbWVzcGFuLCBzcGVjaWZpZWQgYnkgdGhlIGB3aW5kb3dUaW1lU3BhbmAgYXJndW1lbnQuIFdoZW4gdGhlXG5cdCAqIHNvdXJjZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBvciBlbmNvdW50ZXJzIGFuIGVycm9yLCB0aGUgb3V0cHV0IE9ic2VydmFibGVcblx0ICogZW1pdHMgdGhlIGN1cnJlbnQgd2luZG93IGFuZCBwcm9wYWdhdGVzIHRoZSBub3RpZmljYXRpb24gZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIElmIGB3aW5kb3dDcmVhdGlvbkludGVydmFsYCBpcyBub3QgcHJvdmlkZWQsIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZSBzdGFydHMgYSBuZXcgd2luZG93IHdoZW4gdGhlIHByZXZpb3VzIHdpbmRvdyBvZiBkdXJhdGlvblxuXHQgKiBgd2luZG93VGltZVNwYW5gIGNvbXBsZXRlcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+SW4gZXZlcnkgd2luZG93IG9mIDEgc2Vjb25kIGVhY2gsIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDApXG5cdCAqICAgLm1hcCh3aW4gPT4gd2luLnRha2UoMikpIC8vIGVhY2ggd2luZG93IGhhcyBhdCBtb3N0IDIgZW1pc3Npb25zXG5cdCAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgNSBzZWNvbmRzIHN0YXJ0IGEgd2luZG93IDEgc2Vjb25kIGxvbmcsIGFuZCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHMgcGVyIHdpbmRvdzwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDAsIDUwMDApXG5cdCAqICAgLm1hcCh3aW4gPT4gd2luLnRha2UoMikpIC8vIGVhY2ggd2luZG93IGhhcyBhdCBtb3N0IDIgZW1pc3Npb25zXG5cdCAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgd2luZG93fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gd2luZG93VGltZVNwYW4gVGhlIGFtb3VudCBvZiB0aW1lIHRvIGZpbGwgZWFjaCB3aW5kb3cuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2luZG93Q3JlYXRpb25JbnRlcnZhbF0gVGhlIGludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IG5ld1xuXHQgKiB3aW5kb3dzLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcblx0ICogaW50ZXJ2YWxzIHRoYXQgZGV0ZXJtaW5lIHdpbmRvdyBib3VuZGFyaWVzLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBvYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cblx0ICogYXJlIE9ic2VydmFibGVzLlxuXHQgKiBAbWV0aG9kIHdpbmRvd1RpbWVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvd1RpbWUod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPT09IHZvaWQgMCkgeyB3aW5kb3dDcmVhdGlvbkludGVydmFsID0gbnVsbDsgfVxuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dUaW1lID0gd2luZG93VGltZTtcblx0dmFyIFdpbmRvd1RpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dUaW1lT3BlcmF0b3Iod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMud2luZG93VGltZVNwYW4gPSB3aW5kb3dUaW1lU3Bhbjtcblx0ICAgICAgICB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSB3aW5kb3dDcmVhdGlvbkludGVydmFsO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgV2luZG93VGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dUaW1lU3BhbiwgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpbmRvd1RpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLndpbmRvd1RpbWVTcGFuID0gd2luZG93VGltZVNwYW47XG5cdCAgICAgICAgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsID0gd2luZG93Q3JlYXRpb25JbnRlcnZhbDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLndpbmRvd3MgPSBbXTtcblx0ICAgICAgICBpZiAod2luZG93Q3JlYXRpb25JbnRlcnZhbCAhPT0gbnVsbCAmJiB3aW5kb3dDcmVhdGlvbkludGVydmFsID49IDApIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICAgICAgICAgIHZhciBjbG9zZVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCB3aW5kb3c6IHdpbmRvd18xLCBjb250ZXh0OiBudWxsIH07XG5cdCAgICAgICAgICAgIHZhciBjcmVhdGlvblN0YXRlID0geyB3aW5kb3dUaW1lU3Bhbjogd2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw6IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHN1YnNjcmliZXI6IHRoaXMsIHNjaGVkdWxlcjogc2NoZWR1bGVyIH07XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0Nsb3NlLCB3aW5kb3dUaW1lU3BhbiwgY2xvc2VTdGF0ZSkpO1xuXHQgICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgY3JlYXRpb25TdGF0ZSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18yID0gdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICAgICAgICAgIHZhciB0aW1lU3Bhbk9ubHlTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgd2luZG93OiB3aW5kb3dfMiwgd2luZG93VGltZVNwYW46IHdpbmRvd1RpbWVTcGFuIH07XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuT25seVN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgdmFyIGxlbiA9IHdpbmRvd3MubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd18zID0gd2luZG93c1tpXTtcblx0ICAgICAgICAgICAgaWYgKCF3aW5kb3dfMy5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgd2luZG93XzMubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHZhciB3aW5kb3dfNCA9IHdpbmRvd3Muc2hpZnQoKTtcblx0ICAgICAgICAgICAgaWYgKCF3aW5kb3dfNC5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgd2luZG93XzQuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHdpbmRvdyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuXHQgICAgICAgIHRoaXMud2luZG93cy5wdXNoKHdpbmRvdyk7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5hZGQod2luZG93KTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHdpbmRvdyk7XG5cdCAgICAgICAgcmV0dXJuIHdpbmRvdztcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAod2luZG93KSB7XG5cdCAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG5cdCAgICAgICAgd2luZG93cy5zcGxpY2Uod2luZG93cy5pbmRleE9mKHdpbmRvdyksIDEpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dUaW1lU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seShzdGF0ZSkge1xuXHQgICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCB3aW5kb3dUaW1lU3BhbiA9IHN0YXRlLndpbmRvd1RpbWVTcGFuLCB3aW5kb3cgPSBzdGF0ZS53aW5kb3c7XG5cdCAgICBpZiAod2luZG93KSB7XG5cdCAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICB9XG5cdCAgICBzdGF0ZS53aW5kb3cgPSBzdWJzY3JpYmVyLm9wZW5XaW5kb3coKTtcblx0ICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHdpbmRvd1RpbWVTcGFuKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd0NyZWF0aW9uKHN0YXRlKSB7XG5cdCAgICB2YXIgd2luZG93VGltZVNwYW4gPSBzdGF0ZS53aW5kb3dUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlciwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHN0YXRlLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICB2YXIgd2luZG93ID0gc3Vic2NyaWJlci5vcGVuV2luZG93KCk7XG5cdCAgICB2YXIgYWN0aW9uID0gdGhpcztcblx0ICAgIHZhciBjb250ZXh0ID0geyBhY3Rpb246IGFjdGlvbiwgc3Vic2NyaXB0aW9uOiBudWxsIH07XG5cdCAgICB2YXIgdGltZVNwYW5TdGF0ZSA9IHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgd2luZG93OiB3aW5kb3csIGNvbnRleHQ6IGNvbnRleHQgfTtcblx0ICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uID0gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q2xvc2UsIHdpbmRvd1RpbWVTcGFuLCB0aW1lU3BhblN0YXRlKTtcblx0ICAgIGFjdGlvbi5hZGQoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuXHQgICAgYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCB3aW5kb3dDcmVhdGlvbkludGVydmFsKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd0Nsb3NlKGFyZykge1xuXHQgICAgdmFyIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlciwgd2luZG93ID0gYXJnLndpbmRvdywgY29udGV4dCA9IGFyZy5jb250ZXh0O1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5hY3Rpb24gJiYgY29udGV4dC5zdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICBjb250ZXh0LmFjdGlvbi5yZW1vdmUoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuXHQgICAgfVxuXHQgICAgc3Vic2NyaWJlci5jbG9zZVdpbmRvdyh3aW5kb3cpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdHZhciB3aW5kb3dUb2dnbGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTc0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpbmRvd1RvZ2dsZSA9IHdpbmRvd1RvZ2dsZV8xLndpbmRvd1RvZ2dsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHN0YXJ0aW5nIGZyb21cblx0ICogYW4gZW1pc3Npb24gZnJvbSBgb3BlbmluZ3NgIGFuZCBlbmRpbmcgd2hlbiB0aGUgb3V0cHV0IG9mIGBjbG9zaW5nU2VsZWN0b3JgXG5cdCAqIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJUb2dnbGV9LCBidXQgZW1pdHMgYSBuZXN0ZWRcblx0ICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dUb2dnbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyB3aW5kb3dzIHRoYXQgY29udGFpbiB0aG9zZSBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBiZXR3ZWVuIHRoZSB0aW1lIHdoZW4gdGhlIGBvcGVuaW5nc2Bcblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhbiBpdGVtIGFuZCB3aGVuIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG5cdCAqIGBjbG9zaW5nU2VsZWN0b3JgIGVtaXRzIGFuIGl0ZW0uXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93VG9nZ2xlKG9wZW5pbmdzLCBpID0+XG5cdCAqICAgaSAlIDIgPyBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcblx0ICogKS5tZXJnZUFsbCgpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxPPn0gb3BlbmluZ3MgQW4gb2JzZXJ2YWJsZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuXHQgKiB3aW5kb3dzLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBPKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuXHQgKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUsXG5cdCAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzIChlaXRoZXIgYG5leHRgIG9yIGBjb21wbGV0ZWApLCBzaWduYWxzIHRoYXQgdGhlXG5cdCAqIGFzc29jaWF0ZWQgd2luZG93IHNob3VsZCBjb21wbGV0ZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG5cdCAqIGFyZSBPYnNlcnZhYmxlcy5cblx0ICogQG1ldGhvZCB3aW5kb3dUb2dnbGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvd1RvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dUb2dnbGUgPSB3aW5kb3dUb2dnbGU7XG5cdHZhciBXaW5kb3dUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgV2luZG93VG9nZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd1RvZ2dsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2luZG93VG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMub3BlblN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MsIG9wZW5pbmdzKSk7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgaWYgKGNvbnRleHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHRzW2ldLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBpZiAoY29udGV4dHMpIHtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBpZiAoY29udGV4dHMpIHtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG5cdCAgICAgICAgaWYgKGNvbnRleHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKG91dGVyVmFsdWUgPT09IHRoaXMub3BlbmluZ3MpIHtcblx0ICAgICAgICAgICAgdmFyIGNsb3NpbmdTZWxlY3RvciA9IHRoaXMuY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjbG9zaW5nU2VsZWN0b3IpKGlubmVyVmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7IHdpbmRvdzogd2luZG93XzEsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2goY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllciwgY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dDtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuY2xvc2VXaW5kb3codGhpcy5jb250ZXh0cy5pbmRleE9mKG91dGVyVmFsdWUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyKSB7XG5cdCAgICAgICAgaWYgKGlubmVyICE9PSB0aGlzLm9wZW5TdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2YoaW5uZXIuY29udGV4dCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuXHQgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuXHQgICAgICAgIHZhciB3aW5kb3cgPSBjb250ZXh0LndpbmRvdywgc3Vic2NyaXB0aW9uID0gY29udGV4dC5zdWJzY3JpcHRpb247XG5cdCAgICAgICAgY29udGV4dHMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93VG9nZ2xlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgd2luZG93V2hlbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93V2hlbiA9IHdpbmRvd1doZW5fMS53aW5kb3dXaGVuO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgdXNpbmcgYVxuXHQgKiBmYWN0b3J5IGZ1bmN0aW9uIG9mIGNsb3NpbmcgT2JzZXJ2YWJsZXMgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gc3RhcnQgYSBuZXdcblx0ICogd2luZG93LlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJXaGVufSwgYnV0IGVtaXRzIGEgbmVzdGVkXG5cdCAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIGNvbm5lY3RlZCwgbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MuXG5cdCAqIEl0IGVtaXRzIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgb3BlbnMgYSBuZXcgb25lIHdoZW5ldmVyIHRoZSBPYnNlcnZhYmxlXG5cdCAqIHByb2R1Y2VkIGJ5IHRoZSBzcGVjaWZpZWQgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMgYW4gaXRlbS4gVGhlIGZpcnN0XG5cdCAqIHdpbmRvdyBpcyBvcGVuZWQgaW1tZWRpYXRlbHkgd2hlbiBzdWJzY3JpYmluZyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgb25seSB0aGUgZmlyc3QgdHdvIGNsaWNrcyBldmVudHMgaW4gZXZlcnkgd2luZG93IG9mIFsxLTVdIHJhbmRvbSBzZWNvbmRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzXG5cdCAqICAgLndpbmRvd1doZW4oKCkgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwICsgTWF0aC5yYW5kb20oKSAqIDQwMDApKVxuXHQgKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuXHQgKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd31cblx0ICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbigpOiBPYnNlcnZhYmxlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vXG5cdCAqIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2lnbmFscyAob24gZWl0aGVyIGBuZXh0YCBvclxuXHQgKiBgY29tcGxldGVgKSB3aGVuIHRvIGNsb3NlIHRoZSBwcmV2aW91cyB3aW5kb3cgYW5kIHN0YXJ0IGEgbmV3IG9uZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG5cdCAqIGFyZSBPYnNlcnZhYmxlcy5cblx0ICogQG1ldGhvZCB3aW5kb3dXaGVuXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB3aW5kb3dXaGVuKGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2luZG93T3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dXaGVuID0gd2luZG93V2hlbjtcblx0dmFyIFdpbmRvd09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd09wZXJhdG9yKGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgV2luZG93T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd09wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBXaW5kb3dTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2luZG93U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLm9wZW5XaW5kb3coKTtcblx0ICAgIH1cblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLm9wZW5XaW5kb3coaW5uZXJTdWIpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMub3BlbldpbmRvdyhpbm5lclN1Yik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIGlmIChpbm5lclN1YiA9PT0gdm9pZCAwKSB7IGlubmVyU3ViID0gbnVsbDsgfVxuXHQgICAgICAgIGlmIChpbm5lclN1Yikge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgICAgIGlubmVyU3ViLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBwcmV2V2luZG93ID0gdGhpcy53aW5kb3c7XG5cdCAgICAgICAgaWYgKHByZXZXaW5kb3cpIHtcblx0ICAgICAgICAgICAgcHJldldpbmRvdy5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgd2luZG93ID0gdGhpcy53aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQod2luZG93KTtcblx0ICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmNsb3NpbmdTZWxlY3RvcikoKTtcblx0ICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgIHZhciBlcnIgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHdpbmRvdyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgd2l0aExhdGVzdEZyb21fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTc4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb21fMS53aXRoTGF0ZXN0RnJvbTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2l0aExhdGVzdEZyb20uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzkpO1xuXHQvKipcblx0ICogQ29tYmluZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGVcblx0ICogd2hvc2UgdmFsdWVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCwgb25seSB3aGVuIHRoZVxuXHQgKiBzb3VyY2UgZW1pdHMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcblx0ICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoYXQgdmFsdWUgcGx1cyB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIG90aGVyIGlucHV0XG5cdCAqIE9ic2VydmFibGVzLCB0aGVuIGVtaXRzIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aXRoTGF0ZXN0RnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYHdpdGhMYXRlc3RGcm9tYCBjb21iaW5lcyBlYWNoIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlICh0aGVcblx0ICogaW5zdGFuY2UpIHdpdGggdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSB0aGUgb3RoZXIgaW5wdXQgT2JzZXJ2YWJsZXMgb25seSB3aGVuXG5cdCAqIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZSwgb3B0aW9uYWxseSB1c2luZyBhIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBkZXRlcm1pbmVcblx0ICogdGhlIHZhbHVlIHRvIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBBbGwgaW5wdXQgT2JzZXJ2YWJsZXMgbXVzdFxuXHQgKiBlbWl0IGF0IGxlYXN0IG9uZSB2YWx1ZSBiZWZvcmUgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHdpbGwgZW1pdCBhIHZhbHVlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljayBldmVudCwgZW1pdCBhbiBhcnJheSB3aXRoIHRoZSBsYXRlc3QgdGltZXIgZXZlbnQgcGx1cyB0aGUgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2l0aExhdGVzdEZyb20odGltZXIpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9qZWN0XSBQcm9qZWN0aW9uIGZ1bmN0aW9uIGZvciBjb21iaW5pbmcgdmFsdWVzXG5cdCAqIHRvZ2V0aGVyLiBSZWNlaXZlcyBhbGwgdmFsdWVzIGluIG9yZGVyIG9mIHRoZSBPYnNlcnZhYmxlcyBwYXNzZWQsIHdoZXJlIHRoZVxuXHQgKiBmaXJzdCBwYXJhbWV0ZXIgaXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gKGUuZy5cblx0ICogYGEud2l0aExhdGVzdEZyb20oYiwgYywgKGExLCBiMSwgYzEpID0+IGExICsgYjEgKyBjMSlgKS4gSWYgdGhpcyBpcyBub3Rcblx0ICogcGFzc2VkLCBhcnJheXMgd2lsbCBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB3aXRoTGF0ZXN0RnJvbVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gd2l0aExhdGVzdEZyb20oKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb2plY3Q7XG5cdCAgICBpZiAodHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb2plY3QgPSBhcmdzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgdmFyIG9ic2VydmFibGVzID0gYXJncztcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb207XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdHZhciBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpIHtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgIH1cblx0ICAgIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlcywgdGhpcy5wcm9qZWN0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvYnNlcnZhYmxlcywgcHJvamVjdCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuXHQgICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRoaXMudG9SZXNwb25kLnB1c2goaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuXHQgICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcblx0ICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7XG5cdCAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgICAgIHRvUmVzcG9uZC5zcGxpY2UoZm91bmQsIDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gbm9vcFxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy50b1Jlc3BvbmQubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBhcmdzID0gW3ZhbHVlXS5jb25jYXQodGhpcy52YWx1ZXMpO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl90cnlQcm9qZWN0KGFyZ3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aXRoTGF0ZXN0RnJvbS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHppcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwID0gemlwXzEuemlwUHJvdG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHppcEFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwQWxsID0gemlwQWxsXzEuemlwQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD16aXBBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgemlwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwNCk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gcHJvamVjdFxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB6aXBBbGxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHppcEFsbChwcm9qZWN0KSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyB6aXBfMS5aaXBPcGVyYXRvcihwcm9qZWN0KSk7XG5cdH1cblx0ZXhwb3J0cy56aXBBbGwgPSB6aXBBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcEFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk9wZXJhdG9yID0gT3BlcmF0b3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBhcHBfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODQpO1xyXG5cdHZhciByZWZlcmVuY2Vfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODUpO1xyXG5cdHZhciBzdGFmZl9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4Nik7XHJcblx0dmFyIG5iX25vdGlmeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODcpO1xyXG5cdHZhciBuYXZfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg4KTtcclxuXHR2YXIgcHJvamVjdHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkwKTtcclxuXHR2YXIgcHJvamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTQpO1xyXG5cdHZhciB0YXNrc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTcpO1xyXG5cdHZhciB0YXNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwMCk7XHJcblx0dmFyIHVzZXJfcHJvZmlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDMpO1xyXG5cdHZhciBsb2dpbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDgpO1xyXG5cdHZhciB1c2VyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNik7XHJcblx0dmFyIEFwcCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIEFwcChfcm91dGVyLCBfYXBwU2VydmljZSwgX3JlZmVyZW5jZVNlcnZpY2UsIF9zdGFmZlNlcnZpY2UpIHtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XHJcblx0ICAgICAgICB0aGlzLl9hcHBTZXJ2aWNlID0gX2FwcFNlcnZpY2U7XHJcblx0ICAgICAgICB0aGlzLl9yZWZlcmVuY2VTZXJ2aWNlID0gX3JlZmVyZW5jZVNlcnZpY2U7XHJcblx0ICAgICAgICB0aGlzLl9zdGFmZlNlcnZpY2UgPSBfc3RhZmZTZXJ2aWNlO1xyXG5cdCAgICAgICAgdGhpcy5IRUFERVJfVElUTEUgPSBcIlByb2plY3RzXCI7XHJcblx0ICAgIH1cclxuXHQgICAgQXBwLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAod2luZG93KSB7IHRoaXMub25SZXNpemUod2luZG93KTsgfTtcclxuXHQgICAgO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXBwLnByb3RvdHlwZSwgXCJkZXZpY2VcIiwge1xyXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmlzTW9iaWxlRGV2aWNlOyB9LFxyXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICB9KTtcclxuXHQgICAgO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXBwLnByb3RvdHlwZSwgXCJ0b2dnbGVOYXZWaXNpYmxlXCIsIHtcclxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc05hdkNvbGxhcHNlZDsgfSxcclxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuXHQgICAgfSk7XHJcblx0ICAgIDtcclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFwcC5wcm90b3R5cGUsIFwidG9nZ2xlU2VhcmNoXCIsIHtcclxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc1NlYXJjaE9wZW47IH0sXHJcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgIH0pO1xyXG5cdCAgICA7XHJcblx0ICAgIEFwcC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdGhpcy5pc1NlYXJjaE9wZW4gPSBmYWxzZTtcclxuXHQgICAgICAgIHRoaXMuaXNOYXZDb2xsYXBzZWQgPSBmYWxzZTtcclxuXHQgICAgICAgIHRoaXMubG9nZ2VkVXNlciA9IG5ldyB1c2VyXzEuVXNlcigpO1xyXG5cdCAgICAgICAgdGhpcy5pc01vYmlsZURldmljZSA9IHRoaXMuaXNNb2JpbGUoKTtcclxuXHQgICAgICAgIHRoaXMuX2FwcFNlcnZpY2UuZ2V0VHJhbnNsYXRpb25zKCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChjYXB0aW9ucykgeyByZXR1cm4gY29uc29sZS5sb2coY2FwdGlvbnMpOyB9LCBmdW5jdGlvbiAoZXJyKSB7XHJcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuXHQgICAgICAgICAgICBfdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL2xvZ2luJ10pO1xyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIEFwcC5wcm90b3R5cGUudG9nZ2xlTmF2ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5pc05hdkNvbGxhcHNlZCA9ICF0aGlzLmlzTmF2Q29sbGFwc2VkO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLmhpZGVOYXYgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHQgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0ICAgICAgICB0aGlzLmlzTmF2Q29sbGFwc2VkID0gZmFsc2U7XHJcblx0ICAgICAgICB0aGlzLmlzU2VhcmNoT3BlbiA9IGZhbHNlO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLnNlYXJjaFRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuaXNTZWFyY2hPcGVuID0gIXRoaXMuaXNTZWFyY2hPcGVuO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHQgICAgICAgIC8vIHRoaXMubG9nZ2VkVXNlciA9IG51bGw7XHJcblx0ICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdMb2dvdXQnO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHAucHJvdG90eXBlLmdvQmFjayA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIEFwcC5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAod2luZG93KSB7XHJcblx0ICAgICAgICB0aGlzLmlzTW9iaWxlRGV2aWNlID0gd2luZG93LmlubmVyV2lkdGggPD0gMTAyNCB8fCB0aGlzLmlzTW9iaWxlKCk7XHJcblx0ICAgIH07XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50LnRhcmdldCddKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIEZ1bmN0aW9uKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtPYmplY3RdKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cmV0dXJudHlwZScsIHZvaWQgMClcclxuXHQgICAgXSwgQXBwLnByb3RvdHlwZSwgXCJyZXNpemVcIiwgbnVsbCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkhvc3RCaW5kaW5nKCdjbGFzcy5waG9uZScpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBBcHAucHJvdG90eXBlLCBcImRldmljZVwiLCBudWxsKTtcclxuXHQgICAgX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSG9zdEJpbmRpbmcoJ2NsYXNzLnNpZGUtbmF2LXRvZ2dsZScpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBBcHAucHJvdG90eXBlLCBcInRvZ2dsZU5hdlZpc2libGVcIiwgbnVsbCk7XHJcblx0ICAgIF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkhvc3RCaW5kaW5nKCdjbGFzcy5zZWFyY2gtb3BlbicpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBBcHAucHJvdG90eXBlLCBcInRvZ2dsZVNlYXJjaFwiLCBudWxsKTtcclxuXHQgICAgQXBwID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuQ29tcG9uZW50KHtcclxuXHQgICAgICAgICAgICBzZWxlY3RvcjogJ3Byb2plY3QtYXBwJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXyg2MDkpLFxyXG5cdCAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtyb3V0ZXJfMS5ST1VURVJfRElSRUNUSVZFUywgbmF2XzEuTmF2Q29tcG9uZW50LCBuYl9ub3RpZnlfMS5OQk5vdGlmeUNvbXBvbmVudF1cclxuXHQgICAgICAgIH0pLFxyXG5cdCAgICAgICAgcm91dGVyXzEuUm91dGVzKFtcclxuXHQgICAgICAgICAgICB7IHBhdGg6ICcvdGFza3MvOmZvcicsIGNvbXBvbmVudDogdGFza3NfMS5UYXNrc0NvbXBvbmVudCB9LFxyXG5cdCAgICAgICAgICAgIHsgcGF0aDogJy90YXNrcycsIGNvbXBvbmVudDogdGFza3NfMS5UYXNrc0NvbXBvbmVudCB9LFxyXG5cdCAgICAgICAgICAgIHsgcGF0aDogJy90YXNrLzppZCcsIGNvbXBvbmVudDogdGFza18xLlRhc2tDb21wb25lbnQgfSxcclxuXHQgICAgICAgICAgICB7IHBhdGg6ICcvcHJvamVjdHMvOmlkJywgY29tcG9uZW50OiBwcm9qZWN0XzEuUHJvamVjdENvbXBvbmVudCB9LFxyXG5cdCAgICAgICAgICAgIHsgcGF0aDogJy9wcm9qZWN0cycsIGNvbXBvbmVudDogcHJvamVjdHNfMS5Qcm9qZWN0c0NvbXBvbmVudCB9LFxyXG5cdCAgICAgICAgICAgIHsgcGF0aDogJy91c2VyLXByb2ZpbGUnLCBjb21wb25lbnQ6IHVzZXJfcHJvZmlsZV8xLlVzZXJQcm9maWxlQ29tcG9uZW50IH0sXHJcblx0ICAgICAgICAgICAgeyBwYXRoOiAnL2xvZ2luJywgY29tcG9uZW50OiBsb2dpbl8xLkxvZ2luQ29tcG9uZW50IH1cclxuXHQgICAgICAgIF0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW3JvdXRlcl8xLlJvdXRlciwgYXBwX3NlcnZpY2VfMS5BcHBTZXJ2aWNlLCByZWZlcmVuY2Vfc2VydmljZV8xLlJlZmVyZW5jZVNlcnZpY2UsIHN0YWZmX3NlcnZpY2VfMS5TdGFmZlNlcnZpY2VdKVxyXG5cdCAgICBdLCBBcHApO1xyXG5cdCAgICByZXR1cm4gQXBwO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5BcHAgPSBBcHA7XHJcblxuXG4vKioqLyB9LFxuLyogNTg0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIGh0dHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgxKTtcclxuXHR2YXIgQXBwU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIEFwcFNlcnZpY2UoX2h0dHApIHtcclxuXHQgICAgICAgIHRoaXMuX2h0dHAgPSBfaHR0cDtcclxuXHQgICAgfVxyXG5cdCAgICBBcHBTZXJ2aWNlLnByb3RvdHlwZS5nZXRUcmFuc2xhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgaHR0cF8xLkhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblx0ICAgICAgICB2YXIgdXJsID0gJ3A/aWQ9Y29tbW9uLWNhcHRpb25zJztcclxuXHQgICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh1cmwsIGhlYWRlcilcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2UuanNvbigpLmNhcHRpb25zOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwU2VydmljZS5wcm90b3R5cGUuZ2V0TmF2ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGhlYWRlciA9IHsgaGVhZGVyczogbmV3IGh0dHBfMS5IZWFkZXJzKHsgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSB9O1xyXG5cdCAgICAgICAgdmFyIHVybCA9ICdwP2lkPW91dGxpbmUnO1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZ2V0KHVybCwgaGVhZGVyKTtcclxuXHQgICAgfTtcclxuXHQgICAgQXBwU2VydmljZS5wcm90b3R5cGUuZ2V0VXNlcnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgaHR0cF8xLkhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblx0ICAgICAgICB2YXIgdXJsID0gJ3A/aWQ9dXNlcnMnO1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZ2V0KHVybCwgaGVhZGVyKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0OyB9KVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIEFwcFNlcnZpY2UucHJvdG90eXBlLnVwZGF0ZVVzZXJQcm9maWxlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuXHQgICAgICAgIC8vXHJcblx0ICAgIH07XHJcblx0ICAgIEFwcFNlcnZpY2UucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLl9odHRwLmRlbGV0ZSgnLycpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBBcHBTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2h0dHBfMS5IdHRwXSlcclxuXHQgICAgXSwgQXBwU2VydmljZSk7XHJcblx0ICAgIHJldHVybiBBcHBTZXJ2aWNlO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5BcHBTZXJ2aWNlID0gQXBwU2VydmljZTtcclxuXG5cbi8qKiovIH0sXG4vKiA1ODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgaHR0cF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyODEpO1xyXG5cdHZhciBSZWZlcmVuY2VTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gUmVmZXJlbmNlU2VydmljZShodHRwKSB7XHJcblx0ICAgICAgICB0aGlzLmh0dHAgPSBodHRwO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlZmVyZW5jZVNlcnZpY2UucHJvdG90eXBlLmdldFRhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgaHR0cF8xLkhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblx0ICAgICAgICB2YXIgdXJsID0gJy9SZWZlcmVuY2UvcD9pZD10YWdzJztcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgaGVhZGVyKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0OyB9KVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFJlZmVyZW5jZVNlcnZpY2UucHJvdG90eXBlLmdldFRhc2tUeXBlcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBoZWFkZXIgPSB7IGhlYWRlcnM6IG5ldyBodHRwXzEuSGVhZGVycyh7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSkgfTtcclxuXHQgICAgICAgIHZhciB1cmwgPSAnL1JlZmVyZW5jZS9wP2lkPXRhc2t0eXBlcyc7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIGhlYWRlcilcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2UuanNvbigpLm9iamVjdHNbMF0ubGlzdDsgfSlcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2U7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBSZWZlcmVuY2VTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2h0dHBfMS5IdHRwXSlcclxuXHQgICAgXSwgUmVmZXJlbmNlU2VydmljZSk7XHJcblx0ICAgIHJldHVybiBSZWZlcmVuY2VTZXJ2aWNlO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5SZWZlcmVuY2VTZXJ2aWNlID0gUmVmZXJlbmNlU2VydmljZTtcclxuXG5cbi8qKiovIH0sXG4vKiA1ODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgaHR0cF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyODEpO1xyXG5cdHZhciBTdGFmZlNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBTdGFmZlNlcnZpY2UoaHR0cCkge1xyXG5cdCAgICAgICAgdGhpcy5odHRwID0gaHR0cDtcclxuXHQgICAgfVxyXG5cdCAgICBTdGFmZlNlcnZpY2UucHJvdG90eXBlLmdldE9yZ2FuaXphdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgaHR0cF8xLkhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcblx0ICAgICAgICB2YXIgdXJsID0gJy9TdGFmZi9wP2lkPWdldC1vcmdhbml6YXRpb25zJztcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgaGVhZGVyKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0OyB9KVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFN0YWZmU2VydmljZSA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkluamVjdGFibGUoKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtodHRwXzEuSHR0cF0pXHJcblx0ICAgIF0sIFN0YWZmU2VydmljZSk7XHJcblx0ICAgIHJldHVybiBTdGFmZlNlcnZpY2U7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlN0YWZmU2VydmljZSA9IFN0YWZmU2VydmljZTtcclxuXG5cbi8qKiovIH0sXG4vKiA1ODcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgX05vdHkgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBfTm90eSh0eXBlLCBtZXNzYWdlLCB2aXNpYmxlKSB7XHJcblx0ICAgICAgICB0aGlzLnR5cGUgPSAnJztcclxuXHQgICAgICAgIHRoaXMubWVzc2FnZSA9ICcnO1xyXG5cdCAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcblx0ICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG5cdCAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuXHQgICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIF9Ob3R5O1xyXG5cdH0oKSk7XHJcblx0dmFyIE5CTm90aWZ5Q29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gTkJOb3RpZnlDb21wb25lbnQoKSB7XHJcblx0ICAgICAgICB0aGlzLm5vdGlmeUxpc3QgPSBbXTtcclxuXHQgICAgICAgIC8vIHRoaXMubm90aWZ5TGlzdC5wdXNoKG5ldyBfTm90eSgnaW5mbycsICdoZWxsbycsIHRydWUpKTtcclxuXHQgICAgfVxyXG5cdCAgICBOQk5vdGlmeUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1ub3RpZnknLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibmItbm90aWZ5XFxcIiAqbmdJZj1cXFwibm90aWZ5TGlzdFxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibmItbm90aWZ5LWVudHJ5LXt7bm90aWZ5LnR5cGV9fVxcXCIgc3R5bGU9XFxcImRpc3BsYXk6YmxvY2s7XFxcIiAqbmdGb3I9XFxcImxldCBub3RpZnkgb2Ygbm90aWZ5TGlzdFxcXCI+e3tub3RpZnkubWVzc2FnZX19PC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgXCJcclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXHJcblx0ICAgIF0sIE5CTm90aWZ5Q29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIE5CTm90aWZ5Q29tcG9uZW50O1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5OQk5vdGlmeUNvbXBvbmVudCA9IE5CTm90aWZ5Q29tcG9uZW50O1xyXG5cblxuLyoqKi8gfSxcbi8qIDU4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciByb3V0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzAyKTtcclxuXHR2YXIgYXBwX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg0KTtcclxuXHR2YXIgTmF2Q29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gTmF2Q29tcG9uZW50KF9yb3V0ZXIsIF9hcHBTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xyXG5cdCAgICAgICAgdGhpcy5fYXBwU2VydmljZSA9IF9hcHBTZXJ2aWNlO1xyXG5cdCAgICB9XHJcblx0ICAgIE5hdkNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmF2XScsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oNTg5KSxcclxuXHQgICAgICAgICAgICBkaXJlY3RpdmVzOiBbcm91dGVyXzEuUk9VVEVSX0RJUkVDVElWRVNdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIGFwcF9zZXJ2aWNlXzEuQXBwU2VydmljZV0pXHJcblx0ICAgIF0sIE5hdkNvbXBvbmVudCk7XHJcblx0ICAgIHJldHVybiBOYXZDb21wb25lbnQ7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLk5hdkNvbXBvbmVudCA9IE5hdkNvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA1ODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8dWw+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnaW5ib3gnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtaW5ib3hcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydpbmJveCd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpPlxcclxcbiAgICAgICAgPGEgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrcycsICd0b2RheSddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jYWxlbmRhci1vXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3sndG9kYXknfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnd2VlayddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jYWxlbmRhclxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J3dlZWsnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnYWxsJ11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWRhdGFiYXNlXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3snYWxsJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ2NvbXBsZXRlZCddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jaGVjay1zcXVhcmUtb1xcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J2NvbXBsZXRlZCd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpPlxcclxcbiAgICAgICAgPGEgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrcycsICdteSddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS10aWNrZXRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydteV90YXNrcyd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpIGNsYXNzPVxcXCJkaXZpZGVyXFxcIj48L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Byb2plY3RzJ11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXB1enpsZS1waWVjZVxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J3Byb2plY3RzJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbjwvdWw+XFxyXFxuXCJcblxuLyoqKi8gfSxcbi8qIDU5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciByb3V0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzAyKTtcclxuXHR2YXIgY29tbW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Mik7XHJcblx0dmFyIHByb2plY3Rfc2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTEpO1xyXG5cdHZhciBQcm9qZWN0c0NvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFByb2plY3RzQ29tcG9uZW50KF9yb3V0ZXIsIHByb2plY3RTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcclxuXHQgICAgICAgIHRoaXMucHJvamVjdFNlcnZpY2UgPSBwcm9qZWN0U2VydmljZTtcclxuXHQgICAgICAgIHByb2plY3RTZXJ2aWNlLmdldFByb2plY3RzKCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChwcm9qZWN0cykgeyByZXR1cm4gX3RoaXMucHJvamVjdHMgPSBwcm9qZWN0czsgfSwgZnVuY3Rpb24gKGVycm9yUmVzcG9uc2UpIHsgcmV0dXJuIF90aGlzLmhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpOyB9KTtcclxuXHQgICAgfVxyXG5cdCAgICBQcm9qZWN0c0NvbXBvbmVudC5wcm90b3R5cGUuY29tcG9zZVJlY29yZCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9wcm9qZWN0cycsICduZXcnXSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RzQ29tcG9uZW50LnByb3RvdHlwZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5wcm9qZWN0U2VydmljZS5kZWxldGVQcm9qZWN0KHRoaXMuc2VsZWN0ZWRQcm9qZWN0cykuc3Vic2NyaWJlKCk7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RzQ29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVYaHJFcnJvciA9IGZ1bmN0aW9uIChlcnJvclJlc3BvbnNlKSB7XHJcblx0ICAgICAgICBpZiAoZXJyb3JSZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9sb2dpbiddKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgUHJvamVjdHNDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW3Byb2plY3RzXScsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IF9fd2VicGFja19yZXF1aXJlX18oNTkzKSxcclxuXHQgICAgICAgICAgICBwaXBlczogW2NvbW1vbl8xLkRhdGVQaXBlXVxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbcm91dGVyXzEuUm91dGVyLCBwcm9qZWN0X3NlcnZpY2VfMS5Qcm9qZWN0U2VydmljZV0pXHJcblx0ICAgIF0sIFByb2plY3RzQ29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIFByb2plY3RzQ29tcG9uZW50O1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Qcm9qZWN0c0NvbXBvbmVudCA9IFByb2plY3RzQ29tcG9uZW50O1xyXG5cblxuLyoqKi8gfSxcbi8qIDU5MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBodHRwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4MSk7XHJcblx0dmFyIG9ial91dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTIpO1xyXG5cdHZhciBWSUVXX1VSTCA9ICdwP2lkPXByb2plY3Qtdmlldyc7XHJcblx0dmFyIEZPUk1fVVJMID0gJ3A/aWQ9cHJvamVjdC1mb3JtJztcclxuXHR2YXIgSEVBREVSID0ge1xyXG5cdCAgICBoZWFkZXJzOiBuZXcgaHR0cF8xLkhlYWRlcnMoe1xyXG5cdCAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnLFxyXG5cdCAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG5cdCAgICB9KVxyXG5cdH07XHJcblx0dmFyIFByb2plY3RTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gUHJvamVjdFNlcnZpY2UoX2h0dHApIHtcclxuXHQgICAgICAgIHRoaXMuX2h0dHAgPSBfaHR0cDtcclxuXHQgICAgfVxyXG5cdCAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdHMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQoVklFV19VUkwsIEhFQURFUilcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2UuanNvbigpLm9iamVjdHNbMF0ubGlzdDsgfSlcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2U7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdEJ5SWQgPSBmdW5jdGlvbiAocHJvamVjdElkKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQoRk9STV9VUkwgKyAnJmRvY2lkPScgKyBwcm9qZWN0SWQsIEhFQURFUilcclxuXHQgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2UuanNvbigpLm9iamVjdHNbMV07IH0pXHJcblx0ICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLnNhdmVQcm9qZWN0ID0gZnVuY3Rpb24gKHByb2plY3QpIHtcclxuXHQgICAgICAgIHZhciB1cmwgPSBGT1JNX1VSTCArIChwcm9qZWN0LmlkID8gJyZkb2NpZD0nICsgcHJvamVjdC5pZCA6ICcnKTtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodXJsLCB0aGlzLnNlcmlhbGl6ZVByb2plY3QocHJvamVjdCksIEhFQURFUik7XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RTZXJ2aWNlLnByb3RvdHlwZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24gKHByb2plY3RzKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5kZWxldGUoVklFV19VUkwpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvL1xyXG5cdCAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuc2VyaWFsaXplUHJvamVjdCA9IGZ1bmN0aW9uIChwcm9qZWN0KSB7XHJcblx0ICAgICAgICByZXR1cm4gb2JqX3V0aWxzXzEuc2VyaWFsaXplT2JqKHtcclxuXHQgICAgICAgICAgICBuYW1lOiBwcm9qZWN0Lm5hbWUsXHJcblx0ICAgICAgICAgICAgc3RhdHVzOiBwcm9qZWN0LnN0YXR1cyxcclxuXHQgICAgICAgICAgICBjdXN0b21lcjogcHJvamVjdC5jdXN0b21lciB8fCAnJyxcclxuXHQgICAgICAgICAgICBtYW5hZ2VyOiBwcm9qZWN0Lm1hbmFnZXIgfHwgMCxcclxuXHQgICAgICAgICAgICBwcm9ncmFtbWVyOiBwcm9qZWN0LnByb2dyYW1tZXIgfHwgMCxcclxuXHQgICAgICAgICAgICB0ZXN0ZXI6IHByb2plY3QudGVzdGVyIHx8IDAsXHJcblx0ICAgICAgICAgICAgb2JzZXJ2ZXJzOiBBcnJheS5pc0FycmF5KHByb2plY3Qub2JzZXJ2ZXJzKSA/IHByb2plY3Qub2JzZXJ2ZXJzLmpvaW4oJywnKSA6ICcnLFxyXG5cdCAgICAgICAgICAgIGNvbW1lbnQ6IHByb2plY3QuY29tbWVudCxcclxuXHQgICAgICAgICAgICBmaW5pc2hfZGF0ZTogcHJvamVjdC5maW5pc2hEYXRlID8gcHJvamVjdC5maW5pc2hEYXRlLnRvU3RyaW5nKCkgOiAnJyxcclxuXHQgICAgICAgICAgICBhdHRhY2htZW50czogcHJvamVjdC5hdHRhY2htZW50cyA/IHByb2plY3QuYXR0YWNobWVudHMubWFwKGZ1bmN0aW9uIChpdCkgeyByZXR1cm4gaXQuaWQ7IH0pLmpvaW4oJywnKSA6ICcnXHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgUHJvamVjdFNlcnZpY2UgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbmplY3RhYmxlKCksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbaHR0cF8xLkh0dHBdKVxyXG5cdCAgICBdLCBQcm9qZWN0U2VydmljZSk7XHJcblx0ICAgIHJldHVybiBQcm9qZWN0U2VydmljZTtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuUHJvamVjdFNlcnZpY2UgPSBQcm9qZWN0U2VydmljZTtcclxuXG5cbi8qKiovIH0sXG4vKiA1OTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdGZ1bmN0aW9uIHNlcmlhbGl6ZU9iaihvYmopIHtcclxuXHQgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG5cdCAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmopIHtcclxuXHQgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwcm9wZXJ0eSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3Byb3BlcnR5XSkpO1xyXG5cdCAgICB9XHJcblx0ICAgIHJldHVybiByZXN1bHQuam9pbignJicpO1xyXG5cdH1cclxuXHRleHBvcnRzLnNlcmlhbGl6ZU9iaiA9IHNlcmlhbGl6ZU9iajtcclxuXG5cbi8qKiovIH0sXG4vKiA1OTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgIHt7J3Byb2plY3RzJ319XFxyXFxuICAgIDwvaDE+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY29tcG9zZVJlY29yZCgpXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyduZXdfcHJvamVjdCd9fVxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInZpZXcgdmlldy1wcm9qZWN0XFxcIj5cXHJcXG4gICAgICAgIDxoZWFkZXIgY2xhc3M9XFxcImVudHJpZXMtaGVhZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZC13cmFwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBkYXRhLXRvZ2dsZT1cXFwiZG9jaWRcXFwiIGNsYXNzPVxcXCJhbGxcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWNhcHRpb25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1wcm9qZWN0LW5hbWVcXFwiPnt7J25hbWUnfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9oZWFkZXI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyaWVzXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVxcXCIhcHJvamVjdHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydsb2FkaW5nJ319XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktd3JhcFxcXCIgKm5nRm9yPVxcXCJsZXQgcHJvamVjdCBvZiBwcm9qZWN0c1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cXFwie3twcm9qZWN0LmlkfX1cXFwiIGNsYXNzPVxcXCJlbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImVudHJ5LXNlbGVjdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJkb2NpZFxcXCIgdmFsdWU9XFxcInt7cHJvamVjdC5pZH19XFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJlbnRyeS1saW5rXFxcIiBbcm91dGVyTGlua109XFxcIlsnL3Byb2plY3RzJywgcHJvamVjdC5pZF1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1wcm9qZWN0LW5hbWVcXFwiPnt7cHJvamVjdC5uYW1lfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1wcm9qZWN0LWN1c3RvbWVyXFxcIj57e3Byb2plY3QuY3VzdG9tZXI/Lm5hbWV9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LXByb2plY3QtY29tbWVudFxcXCI+e3twcm9qZWN0LmNvbW1lbnR9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LWRhdGVcXFwiPnt7cHJvamVjdC5maW5pc2hEYXRlIHwgZGF0ZTonZGQuTU0ueSd9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCJcblxuLyoqKi8gfSxcbi8qIDU5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG5cdCAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG5cdCAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG5cdH07XHJcblx0dmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcclxuXHR9O1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciByb3V0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzAyKTtcclxuXHR2YXIgY29tbW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Mik7XHJcblx0dmFyIGFwcF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4NCk7XHJcblx0dmFyIHByb2plY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTk1KTtcclxuXHR2YXIgcHJvamVjdF9zZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5MSk7XHJcblx0dmFyIHN0YWZmX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg2KTtcclxuXHR2YXIgUHJvamVjdENvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFByb2plY3RDb21wb25lbnQoX3JvdXRlciwgX3JvdXRlU2VnbWVudCwgX2Zvcm1CdWlsZGVyLCBfYXBwU2VydmljZSwgX3Byb2plY3RTZXJ2aWNlLCBfc3RhZmZTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlU2VnbWVudCA9IF9yb3V0ZVNlZ21lbnQ7XHJcblx0ICAgICAgICB0aGlzLl9mb3JtQnVpbGRlciA9IF9mb3JtQnVpbGRlcjtcclxuXHQgICAgICAgIHRoaXMuX2FwcFNlcnZpY2UgPSBfYXBwU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuX3Byb2plY3RTZXJ2aWNlID0gX3Byb2plY3RTZXJ2aWNlO1xyXG5cdCAgICAgICAgdGhpcy5fc3RhZmZTZXJ2aWNlID0gX3N0YWZmU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuc3RhdHVzT3B0aW9ucyA9IHByb2plY3RfMS5Qcm9qZWN0U3RhdHVzVHlwZTtcclxuXHQgICAgICAgIHRoaXMuZm9ybSA9IF9mb3JtQnVpbGRlci5ncm91cCh7XHJcblx0ICAgICAgICAgICAgbmFtZTogWycnLCBjb21tb25fMS5WYWxpZGF0b3JzLnJlcXVpcmVkXSxcclxuXHQgICAgICAgICAgICBzdGF0dXM6IFsnJ10sXHJcblx0ICAgICAgICAgICAgY3VzdG9tZXI6IFsnJ10sXHJcblx0ICAgICAgICAgICAgbWFuYWdlcjogWycnXSxcclxuXHQgICAgICAgICAgICBwcm9ncmFtbWVyOiBbJyddLFxyXG5cdCAgICAgICAgICAgIHRlc3RlcjogWycnXSxcclxuXHQgICAgICAgICAgICBvYnNlcnZlcnM6IFsnJ10sXHJcblx0ICAgICAgICAgICAgY29tbWVudDogWycnXSxcclxuXHQgICAgICAgICAgICBmaW5pc2hEYXRlOiBbJyddLFxyXG5cdCAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbJyddXHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIGlmICh0aGlzLl9yb3V0ZVNlZ21lbnQuZ2V0UGFyYW0oJ2lkJykgIT09ICduZXcnKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5fcHJvamVjdFNlcnZpY2UuZ2V0UHJvamVjdEJ5SWQodGhpcy5fcm91dGVTZWdtZW50LmdldFBhcmFtKCdpZCcpKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHByb2plY3QpIHsgcmV0dXJuIF90aGlzLnByb2plY3QgPSBwcm9qZWN0OyB9LCBmdW5jdGlvbiAoZXJyb3JSZXNwb25zZSkgeyByZXR1cm4gX3RoaXMuaGFuZGxlWGhyRXJyb3IoZXJyb3JSZXNwb25zZSk7IH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5wcm9qZWN0ID0gbmV3IHByb2plY3RfMS5Qcm9qZWN0KCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBfc3RhZmZTZXJ2aWNlLmdldE9yZ2FuaXphdGlvbnMoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKG9yZ3MpIHsgcmV0dXJuIF90aGlzLmN1c3RvbWVycyA9IG9yZ3M7IH0pO1xyXG5cdCAgICAgICAgX2FwcFNlcnZpY2UuZ2V0VXNlcnMoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHVzZXJzKSB7IHJldHVybiBfdGhpcy51c2VycyA9IHVzZXJzOyB9KTtcclxuXHQgICAgfVxyXG5cdCAgICBQcm9qZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zYXZlUHJvamVjdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB0aGlzLl9wcm9qZWN0U2VydmljZS5zYXZlUHJvamVjdCh0aGlzLnByb2plY3QpLnN1YnNjcmliZShmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIF90aGlzLmNsb3NlKCk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQcm9qZWN0Q29tcG9uZW50LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9wcm9qZWN0cyddKTtcclxuXHQgICAgfTtcclxuXHQgICAgUHJvamVjdENvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlWGhyRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JSZXNwb25zZSkge1xyXG5cdCAgICAgICAgaWYgKGVycm9yUmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcclxuXHQgICAgICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvbG9naW4nXSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIFByb2plY3RDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW3Byb2plY3RdJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXyg1OTYpLFxyXG5cdCAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFtjb21tb25fMS5GT1JNX0RJUkVDVElWRVNdLFxyXG5cdCAgICAgICAgICAgIHByb3ZpZGVyczogW2NvbW1vbl8xLkZvcm1CdWlsZGVyXVxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbcm91dGVyXzEuUm91dGVyLCByb3V0ZXJfMS5Sb3V0ZVNlZ21lbnQsIGNvbW1vbl8xLkZvcm1CdWlsZGVyLCBhcHBfc2VydmljZV8xLkFwcFNlcnZpY2UsIHByb2plY3Rfc2VydmljZV8xLlByb2plY3RTZXJ2aWNlLCBzdGFmZl9zZXJ2aWNlXzEuU3RhZmZTZXJ2aWNlXSlcclxuXHQgICAgXSwgUHJvamVjdENvbXBvbmVudCk7XHJcblx0ICAgIHJldHVybiBQcm9qZWN0Q29tcG9uZW50O1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Qcm9qZWN0Q29tcG9uZW50ID0gUHJvamVjdENvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA1OTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdGV4cG9ydHMuUHJvamVjdFN0YXR1c1R5cGUgPSBbXHJcblx0ICAgICdEUkFGVCcsXHJcblx0ICAgICdQUk9DRVNTRUQnLFxyXG5cdCAgICAnRklOSVNIRUQnXHJcblx0XTtcclxuXHR2YXIgUHJvamVjdCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFByb2plY3QoKSB7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIFByb2plY3Q7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlByb2plY3QgPSBQcm9qZWN0O1xyXG5cblxuLyoqKi8gfSxcbi8qIDU5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgKm5nSWY9XFxcIiFwcm9qZWN0XFxcIj5cXHJcXG4gICAge3snbG9hZGluZyd9fVxcclxcbjwvZGl2Plxcclxcbjxmb3JtIGNsYXNzPVxcXCJmb3JtXFxcIiBbbmdGb3JtTW9kZWxdPVxcXCJmb3JtXFxcIiAqbmdJZj1cXFwicHJvamVjdFxcXCI+XFxyXFxuICAgIDxoZWFkZXIgY2xhc3M9XFxcImNvbnRlbnQtaGVhZGVyXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0bi1iYWNrXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcImNsb3NlKCRldmVudClcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1jaGV2cm9uLWxlZnRcXFwiPjwvaT5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgPGgxIGNsYXNzPVxcXCJoZWFkZXItdGl0bGVcXFwiPlxcclxcbiAgICAgICAgICAgIHt7J3Byb2plY3QnfX1cXHJcXG4gICAgICAgIDwvaDE+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWFjdGlvbnNcXFwiPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0biBidG4tcHJpbWFyeVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBbZGlzYWJsZWRdPVxcXCIhZm9ybS52YWxpZFxcXCIgKGNsaWNrKT1cXFwic2F2ZVByb2plY3QoKVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIHt7J3NhdmVfY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIHt7J2Nsb3NlJ319XFxyXFxuICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9oZWFkZXI+XFxyXFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJjb250ZW50LWJvZHlcXFwiPlxcclxcbiAgICAgICAgPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy5uYW1lLnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwic3BhbjhcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0Lm5hbWVcXFwiIG5nQ29udHJvbD1cXFwibmFtZVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgW2hpZGRlbl09XFxcImZvcm0uY29udHJvbHMubmFtZS52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLm5hbWUucHJpc3RpbmVcXFwiIGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eydyZXF1aXJlZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2N1c3RvbWVyJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLmN1c3RvbWVyLnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW44XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5jdXN0b21lclxcXCIgbmdDb250cm9sPVxcXCJjdXN0b21lclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBjIG9mIGN1c3RvbWVyc1xcXCIgW3ZhbHVlXT1cXFwiYy5pZFxcXCI+e3tjLm5hbWV9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFtoaWRkZW5dPVxcXCJmb3JtLmNvbnRyb2xzLmN1c3RvbWVyLnZhbGlkIHx8IGZvcm0uY29udHJvbHMuY3VzdG9tZXIucHJpc3RpbmVcXFwiIGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eydyZXF1aXJlZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J21hbmFnZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiIWZvcm0uY29udHJvbHMubWFuYWdlci52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QubWFuYWdlclxcXCIgbmdDb250cm9sPVxcXCJtYW5hZ2VyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IG0gb2YgdXNlcnNcXFwiIFt2YWx1ZV09XFxcIm0uaWRcXFwiPnt7bS5sb2dpbn19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgW2hpZGRlbl09XFxcImZvcm0uY29udHJvbHMubWFuYWdlci52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLm1hbmFnZXIucHJpc3RpbmVcXFwiIGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eydyZXF1aXJlZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3Byb2dyYW1tZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiIWZvcm0uY29udHJvbHMucHJvZ3JhbW1lci52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QucHJvZ3JhbW1lclxcXCIgbmdDb250cm9sPVxcXCJwcm9ncmFtbWVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IHAgb2YgdXNlcnNcXFwiIFt2YWx1ZV09XFxcInAuaWRcXFwiPnt7cC5sb2dpbn19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgW2hpZGRlbl09XFxcImZvcm0uY29udHJvbHMucHJvZ3JhbW1lci52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLnByb2dyYW1tZXIucHJpc3RpbmVcXFwiIGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eydyZXF1aXJlZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3Rlc3Rlcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy50ZXN0ZXIudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjhcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LnRlc3RlclxcXCIgbmdDb250cm9sPVxcXCJ0ZXN0ZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgdCBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwidC5pZFxcXCI+e3t0LmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy50ZXN0ZXIudmFsaWQgfHwgZm9ybS5jb250cm9scy50ZXN0ZXIucHJpc3RpbmVcXFwiIGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eydyZXF1aXJlZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J29ic2VydmVycyd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjhcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0Lm9ic2VydmVyc1xcXCIgbmdDb250cm9sPVxcXCJvYnNlcnZlcnNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgb2JzIG9mIHVzZXJzXFxcIiBbdmFsdWVdPVxcXCJvYnMuaWRcXFwiPnt7b2JzLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGF0dXMnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW44XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5zdGF0dXNcXFwiIG5nQ29udHJvbD1cXFwic3RhdHVzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IHN0IG9mIHN0YXR1c09wdGlvbnNcXFwiIFt2YWx1ZV09XFxcInN0XFxcIj57e3N0fX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydmaW5pc2hEYXRlJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgY2xhc3M9XFxcInNwYW4yXFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5maW5pc2hEYXRlXFxcIiBuZ0NvbnRyb2w9XFxcImZpbmlzaERhdGVcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2NvbW1lbnQnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiIWZvcm0uY29udHJvbHMuY29tbWVudC52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XFxcInNwYW44XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5jb21tZW50XFxcIiBuZ0NvbnRyb2w9XFxcImNvbW1lbnRcXFwiPjwvdGV4dGFyZWE+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFtoaWRkZW5dPVxcXCJmb3JtLmNvbnRyb2xzLmNvbW1lbnQudmFsaWQgfHwgZm9ybS5jb250cm9scy5jb21tZW50LnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZmllbGRzZXQ+XFxyXFxuICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICA8bGVnZW5kIGNsYXNzPVxcXCJsZWdlbmRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydhdHRhY2htZW50cyd9fVxcclxcbiAgICAgICAgICAgIDwvbGVnZW5kPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tdXBsb2FkXFxcIiBkYXRhLXVwbG9hZD1cXFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1wYXBlcmNsaXBcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPnt7J2F0dGFjaF9maWxlJ319PC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYXR0YWNobWVudHNcXFwiIGRhdGEtdXBsb2FkLWZpbGVzPVxcXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYXR0YWNobWVudHMtZmlsZVxcXCIgKm5nRm9yPVxcXCJsZXQgYXR0IG9mIHByb2plY3QuYXR0YWNobWVudHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJmaWxlLW5hbWVcXFwiIGhyZWY9XFxcInt7YXR0LnVybH19XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3thdHQucmVhbEZpbGVOYW1lfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLWxpbmsgYnRuLXJlbW92ZS1maWxlIG9uLWVkaXRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtdGltZXNcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9mb3JtPlxcclxcblwiXG5cbi8qKiovIH0sXG4vKiA1OTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgcm91dGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMik7XHJcblx0dmFyIGNvbW1vbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpO1xyXG5cdHZhciB0YXNrX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTk4KTtcclxuXHR2YXIgVGFza3NDb21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBUYXNrc0NvbXBvbmVudChfcm91dGVyLCBfcm91dGVTZWdtZW50LCBfdGFza1NlcnZpY2UpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVTZWdtZW50ID0gX3JvdXRlU2VnbWVudDtcclxuXHQgICAgICAgIHRoaXMuX3Rhc2tTZXJ2aWNlID0gX3Rhc2tTZXJ2aWNlO1xyXG5cdCAgICAgICAgdGhpcy5fdGFza1NlcnZpY2UuZ2V0VGFza3ModGhpcy5fcm91dGVTZWdtZW50LmdldFBhcmFtKCdmb3InKSkuc3Vic2NyaWJlKGZ1bmN0aW9uICh0YXNrcykgeyByZXR1cm4gX3RoaXMudGFza3MgPSB0YXNrczsgfSwgZnVuY3Rpb24gKGVycm9yUmVzcG9uc2UpIHsgcmV0dXJuIF90aGlzLmhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpOyB9KTtcclxuXHQgICAgfVxyXG5cdCAgICBUYXNrc0NvbXBvbmVudC5wcm90b3R5cGUuY29tcG9zZVJlY29yZCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy90YXNrJywgJ25ldyddKTtcclxuXHQgICAgfTtcclxuXHQgICAgVGFza3NDb21wb25lbnQucHJvdG90eXBlLmRlbGV0ZVRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xyXG5cdCAgICAgICAgdGhpcy5fdGFza1NlcnZpY2UuZGVsZXRlVGFzayh0YXNrKS5zdWJzY3JpYmUoKTtcclxuXHQgICAgfTtcclxuXHQgICAgVGFza3NDb21wb25lbnQucHJvdG90eXBlLmhhbmRsZVhockVycm9yID0gZnVuY3Rpb24gKGVycm9yUmVzcG9uc2UpIHtcclxuXHQgICAgICAgIGlmIChlcnJvclJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL2xvZ2luJ10pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBUYXNrc0NvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdbdGFza3NdJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXyg1OTkpLFxyXG5cdCAgICAgICAgICAgIHBpcGVzOiBbY29tbW9uXzEuRGF0ZVBpcGVdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIHJvdXRlcl8xLlJvdXRlU2VnbWVudCwgdGFza19zZXJ2aWNlXzEuVGFza1NlcnZpY2VdKVxyXG5cdCAgICBdLCBUYXNrc0NvbXBvbmVudCk7XHJcblx0ICAgIHJldHVybiBUYXNrc0NvbXBvbmVudDtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuVGFza3NDb21wb25lbnQgPSBUYXNrc0NvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA1OTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgaHR0cF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyODEpO1xyXG5cdHZhciBvYmpfdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkyKTtcclxuXHR2YXIgVklFV19VUkwgPSAncD9pZD10YXNrLXZpZXcnO1xyXG5cdHZhciBGT1JNX1VSTCA9ICdwP2lkPXRhc2stZm9ybSc7XHJcblx0dmFyIEhFQURFUiA9IHtcclxuXHQgICAgaGVhZGVyczogbmV3IGh0dHBfMS5IZWFkZXJzKHtcclxuXHQgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PXV0Zi04JyxcclxuXHQgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcclxuXHQgICAgfSlcclxuXHR9O1xyXG5cdHZhciBUYXNrU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFRhc2tTZXJ2aWNlKGh0dHApIHtcclxuXHQgICAgICAgIHRoaXMuaHR0cCA9IGh0dHA7XHJcblx0ICAgIH1cclxuXHQgICAgVGFza1NlcnZpY2UucHJvdG90eXBlLmdldFRhc2tzID0gZnVuY3Rpb24gKGF0KSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChWSUVXX1VSTCArIChhdCA/ICcmZm9yPScgKyBhdCA6ICcnKSwgSEVBREVSKVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0OyB9KVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tTZXJ2aWNlLnByb3RvdHlwZS5nZXRUYXNrQnlJZCA9IGZ1bmN0aW9uICh0YXNrSWQpIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KEZPUk1fVVJMICsgJyZkb2NpZD0nICsgdGFza0lkLCBIRUFERVIpXHJcblx0ICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzFdOyB9KVxyXG5cdCAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tTZXJ2aWNlLnByb3RvdHlwZS5zYXZlVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XHJcblx0ICAgICAgICB2YXIgdXJsID0gRk9STV9VUkwgKyAodGFzay5pZCA/ICcmZG9jaWQ9JyArIHRhc2suaWQgOiAnJyk7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCB0aGlzLnNlcmlhbGl6ZVRhc2sodGFzayksIEhFQURFUik7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tTZXJ2aWNlLnByb3RvdHlwZS5kZWxldGVUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKFZJRVdfVVJMKTtcclxuXHQgICAgfTtcclxuXHQgICAgLy9cclxuXHQgICAgVGFza1NlcnZpY2UucHJvdG90eXBlLnNlcmlhbGl6ZVRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xyXG5cdCAgICAgICAgcmV0dXJuIG9ial91dGlsc18xLnNlcmlhbGl6ZU9iaih7XHJcblx0ICAgICAgICAgICAgdHlwZTogdGFzay50eXBlLmlkLFxyXG5cdCAgICAgICAgICAgIHN0YXR1czogdGFzay5zdGF0dXMsXHJcblx0ICAgICAgICAgICAgcHJpb3JpdHk6IHRhc2sucHJpb3JpdHksXHJcblx0ICAgICAgICAgICAgYm9keTogdGFzay5ib2R5LFxyXG5cdCAgICAgICAgICAgIGFzc2lnbmVlOiB0YXNrLmFzc2lnbmVlLFxyXG5cdCAgICAgICAgICAgIHN0YXJ0X2RhdGU6IHRhc2suc3RhcnREYXRlLFxyXG5cdCAgICAgICAgICAgIGR1ZV9kYXRlOiB0YXNrLmR1ZURhdGUsXHJcblx0ICAgICAgICAgICAgdGFnczogQXJyYXkuaXNBcnJheSh0YXNrLnRhZ3MpID8gdGFzay50YWdzLm1hcChmdW5jdGlvbiAoaXQpIHsgcmV0dXJuIGl0LmlkOyB9KS5qb2luKCcsJykgOiB0YXNrLnRhZ3MsXHJcblx0ICAgICAgICAgICAgYXR0YWNobWVudHM6IEFycmF5LmlzQXJyYXkodGFzay5hdHRhY2htZW50cykgPyB0YXNrLmF0dGFjaG1lbnRzLm1hcChmdW5jdGlvbiAoaXQpIHsgcmV0dXJuIGl0LmlkOyB9KS5qb2luKCcsJykgOiAnJ1xyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tTZXJ2aWNlID0gX19kZWNvcmF0ZShbXHJcblx0ICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW2h0dHBfMS5IdHRwXSlcclxuXHQgICAgXSwgVGFza1NlcnZpY2UpO1xyXG5cdCAgICByZXR1cm4gVGFza1NlcnZpY2U7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlRhc2tTZXJ2aWNlID0gVGFza1NlcnZpY2U7XHJcblxuXG4vKioqLyB9LFxuLyogNTk5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICB7eyd0YXNrcyd9fVxcclxcbiAgICA8L2gxPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWFjdGlvbnNcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcImNvbXBvc2VSZWNvcmQoKVxcXCI+XFxyXFxuICAgICAgICAgICAge3snbmV3X3Rhc2snfX1cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjb250ZW50LWJvZHlcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ2aWV3IHZpZXctdGFza1xcXCI+XFxyXFxuICAgICAgICA8aGVhZGVyIGNsYXNzPVxcXCJlbnRyaWVzLWhlYWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWQtd3JhcFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cXFwiZW50cnktc2VsZWN0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgZGF0YS10b2dnbGU9XFxcImRvY2lkXFxcIiBjbGFzcz1cXFwiYWxsXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyeS1jYXB0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57eydib2R5J319PC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvaGVhZGVyPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cmllc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiAqbmdJZj1cXFwiIXRhc2tzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snbG9hZGluZyd9fVxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LXdyYXBcXFwiICpuZ0Zvcj1cXFwibGV0IHRhc2sgb2YgdGFza3NcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGRhdGEtaWQ9XFxcInt7dGFzay5pZH19XFxcIiBjbGFzcz1cXFwiZW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiZG9jaWRcXFwiIHZhbHVlPVxcXCJ7e3Rhc2suaWR9fVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiZW50cnktbGlua1xcXCIgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrJywgdGFzay5pZF1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidnctdGFzay1zdGF0dXNcXFwiPnt7dGFzay5zdGF0dXN9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy10YXNrLXByaW9yaXR5XFxcIj57e3Rhc2sucHJpb3JpdHl9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy10YXNrLWJvZHlcXFwiPnt7dGFzay5ib2R5fX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidnctdGFzay1hc3NpZ25lZVxcXCI+e3t0YXNrLmFzc2lnbmVlfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidnctZGF0ZVxcXCI+e3t0YXNrLnN0YXJ0RGF0ZSB8IGRhdGU6J2RkLk1NLnknfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidnctZGF0ZVxcXCI+e3t0YXNrLmR1ZURhdGUgfCBkYXRlOidkZC5NTS55J319PC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LXRhZ3NcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ0YWdcXFwiICpuZ0Zvcj1cXFwibGV0IHRhZyBvZiB0YWdzXFxcIj57e3RhZy5uYW1lfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG4vKioqLyB9LFxuLyogNjAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBjb21tb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTtcclxuXHR2YXIgYXBwX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg0KTtcclxuXHR2YXIgdGFza18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDEpO1xyXG5cdHZhciB0YXNrX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTk4KTtcclxuXHR2YXIgcmVmZXJlbmNlX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg1KTtcclxuXHR2YXIgVGFza0NvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFRhc2tDb21wb25lbnQoX3JvdXRlciwgX3JvdXRlU2VnbWVudCwgX2Zvcm1CdWlsZGVyLCBfYXBwU2VydmljZSwgX3Rhc2tTZXJ2aWNlLCBfcmVmZXJlbmNlU2VydmljZSkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XHJcblx0ICAgICAgICB0aGlzLl9yb3V0ZVNlZ21lbnQgPSBfcm91dGVTZWdtZW50O1xyXG5cdCAgICAgICAgdGhpcy5fZm9ybUJ1aWxkZXIgPSBfZm9ybUJ1aWxkZXI7XHJcblx0ICAgICAgICB0aGlzLl9hcHBTZXJ2aWNlID0gX2FwcFNlcnZpY2U7XHJcblx0ICAgICAgICB0aGlzLl90YXNrU2VydmljZSA9IF90YXNrU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuX3JlZmVyZW5jZVNlcnZpY2UgPSBfcmVmZXJlbmNlU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMuZm9ybSA9IF9mb3JtQnVpbGRlci5ncm91cCh7XHJcblx0ICAgICAgICAgICAgdHlwZTogWycnXSxcclxuXHQgICAgICAgICAgICBzdGF0dXM6IFsnJ10sXHJcblx0ICAgICAgICAgICAgcHJpb3JpdHk6IFsnJ10sXHJcblx0ICAgICAgICAgICAgYm9keTogWycnLCBjb21tb25fMS5WYWxpZGF0b3JzLnJlcXVpcmVkXSxcclxuXHQgICAgICAgICAgICBhc3NpZ25lZTogWycnXSxcclxuXHQgICAgICAgICAgICBzdGFydERhdGU6IFsnJ10sXHJcblx0ICAgICAgICAgICAgZHVlRGF0ZTogWycnXSxcclxuXHQgICAgICAgICAgICB0YWdzOiBbJyddLFxyXG5cdCAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbJyddXHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIGlmICh0aGlzLl9yb3V0ZVNlZ21lbnQuZ2V0UGFyYW0oJ2lkJykgIT09ICduZXcnKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5fdGFza1NlcnZpY2UuZ2V0VGFza0J5SWQodGhpcy5fcm91dGVTZWdtZW50LmdldFBhcmFtKCdpZCcpKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuIF90aGlzLnRhc2sgPSB0YXNrOyB9LCBmdW5jdGlvbiAoZXJyb3JSZXNwb25zZSkgeyByZXR1cm4gX3RoaXMuaGFuZGxlWGhyRXJyb3IoZXJyb3JSZXNwb25zZSk7IH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IHRhc2tfMS5UYXNrKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB0aGlzLl9hcHBTZXJ2aWNlLmdldFVzZXJzKCkuc3Vic2NyaWJlKGZ1bmN0aW9uICh1c2VycykgeyByZXR1cm4gX3RoaXMudXNlcnMgPSB1c2VyczsgfSk7XHJcblx0ICAgICAgICB0aGlzLl9yZWZlcmVuY2VTZXJ2aWNlLmdldFRhZ3MoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHRhZ3MpIHsgcmV0dXJuIF90aGlzLnRhZ3MgPSB0YWdzOyB9KTtcclxuXHQgICAgfVxyXG5cdCAgICBUYXNrQ29tcG9uZW50LnByb3RvdHlwZS5zYXZlVGFzayA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB0aGlzLl90YXNrU2VydmljZS5zYXZlVGFzayh0aGlzLnRhc2spLnN1YnNjcmliZShmdW5jdGlvbiAocmVzcCkgeyByZXR1cm4gX3RoaXMuY2xvc2UoKTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhc2tDb21wb25lbnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL3Rhc2tzJ10pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBUYXNrQ29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVYaHJFcnJvciA9IGZ1bmN0aW9uIChlcnJvclJlc3BvbnNlKSB7XHJcblx0ICAgICAgICBpZiAoZXJyb3JSZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9sb2dpbiddKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgVGFza0NvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICdbdGFza10nLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwMiksXHJcblx0ICAgICAgICAgICAgZGlyZWN0aXZlczogW2NvbW1vbl8xLkZPUk1fRElSRUNUSVZFU10sXHJcblx0ICAgICAgICAgICAgcHJvdmlkZXJzOiBbY29tbW9uXzEuRm9ybUJ1aWxkZXJdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIHJvdXRlcl8xLlJvdXRlU2VnbWVudCwgY29tbW9uXzEuRm9ybUJ1aWxkZXIsIGFwcF9zZXJ2aWNlXzEuQXBwU2VydmljZSwgdGFza19zZXJ2aWNlXzEuVGFza1NlcnZpY2UsIHJlZmVyZW5jZV9zZXJ2aWNlXzEuUmVmZXJlbmNlU2VydmljZV0pXHJcblx0ICAgIF0sIFRhc2tDb21wb25lbnQpO1xyXG5cdCAgICByZXR1cm4gVGFza0NvbXBvbmVudDtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuVGFza0NvbXBvbmVudCA9IFRhc2tDb21wb25lbnQ7XHJcblxuXG4vKioqLyB9LFxuLyogNjAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRleHBvcnRzLlRhc2tQcmlvcml0eVR5cGUgPSBbXHJcblx0ICAgICdIRUlHSEVTVCcsXHJcblx0ICAgICdIRUlHSFQnLFxyXG5cdCAgICAnTUVESVVNJyxcclxuXHQgICAgJ05PUk1BTCdcclxuXHRdO1xyXG5cdGV4cG9ydHMuVGFza1N0YXR1c1R5cGUgPSBbXHJcblx0ICAgICdEUkFGVCcsXHJcblx0ICAgICdXQUlUSU5HJyxcclxuXHQgICAgJ1BST0NFU1NFRCcsXHJcblx0ICAgICdGSU5JU0hFRCdcclxuXHRdO1xyXG5cdHZhciBUYXNrID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gVGFzaygpIHtcclxuXHQgICAgfVxyXG5cdCAgICByZXR1cm4gVGFzaztcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuVGFzayA9IFRhc2s7XHJcblxuXG4vKioqLyB9LFxuLyogNjAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiAqbmdJZj1cXFwiIXRhc2tcXFwiPlxcclxcbiAgICB7eydsb2FkaW5nJ319XFxyXFxuPC9kaXY+XFxyXFxuPGZvcm0gY2xhc3M9XFxcImZvcm1cXFwiIFtuZ0Zvcm1Nb2RlbF09XFxcImZvcm1cXFwiICpuZ0lmPVxcXCJ0YXNrXFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLWJhY2tcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAge3sndGFzayd9fVxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5XFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIFtkaXNhYmxlZF09XFxcIiFmb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJzYXZlVGFzaygpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0YXNrX3R5cGUnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiIWZvcm0uY29udHJvbHMudHlwZS52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay50eXBlXFxcIiBuZ0NvbnRyb2w9XFxcInR5cGVcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFtoaWRkZW5dPVxcXCJmb3JtLmNvbnRyb2xzLnR5cGUudmFsaWQgfHwgZm9ybS5jb250cm9scy50eXBlLnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGF0dXMnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInN0YXR1c1xcXCIgdmFsdWU9XFxcIjQ1M1xcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suc3RhdHVzXFxcIiBuZ0NvbnRyb2w9XFxcInN0YXR1c1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5EUkFGVDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJzdGF0dXNcXFwiIHZhbHVlPVxcXCI0NTRcXFwiIFsobmdNb2RlbCldPVxcXCJ0YXNrLnN0YXR1c1xcXCIgbmdDb250cm9sPVxcXCJzdGF0dXNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+V0FJVElORzwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJzdGF0dXNcXFwiIHZhbHVlPVxcXCI0NTVcXFwiIFsobmdNb2RlbCldPVxcXCJ0YXNrLnN0YXR1c1xcXCIgbmdDb250cm9sPVxcXCJzdGF0dXNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+UFJPQ0VTU0VEPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInN0YXR1c1xcXCIgdmFsdWU9XFxcIjQ1NlxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suc3RhdHVzXFxcIiBuZ0NvbnRyb2w9XFxcInN0YXR1c1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5GSU5JU0hFRDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3ByaW9yaXR5J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLnByaW9yaXR5LnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW4zXFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay5wcmlvcml0eVxcXCIgbmdDb250cm9sPVxcXCJwcmlvcml0eVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBtIG9mIHByaW9yaXRpZXNcXFwiIFt2YWx1ZV09XFxcIm0udmFsdWVcXFwiPnt7bS5uYW1lfX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5wcmlvcml0eS52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLnByaW9yaXR5LnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydib2R5J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLmJvZHkudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suYm9keVxcXCIgbmdDb250cm9sPVxcXCJib2R5XFxcIj48L3RleHRhcmVhPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5ib2R5LnZhbGlkIHx8IGZvcm0uY29udHJvbHMuYm9keS5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snYXNzaWduZWVfdXNlcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy5hc3NpZ25lZS52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suYXNzaWduZWVcXFwiIG5nQ29udHJvbD1cXFwiYXNzaWduZWVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgbSBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwibS5pZFxcXCI+e3ttLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5hc3NpZ25lZS52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLmFzc2lnbmVlLnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGFydF9kYXRlJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgY2xhc3M9XFxcInNwYW4yXFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay5zdGFydERhdGVcXFwiIG5nQ29udHJvbD1cXFwic3RhcnREYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydkdWVfZGF0ZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImRhdGVcXFwiIGNsYXNzPVxcXCJzcGFuMlxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suZHVlRGF0ZVxcXCIgbmdDb250cm9sPVxcXCJkdWVEYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0YWdzJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLnRhZ3MudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjhcXFwiIG11bHRpcGxlIFsobmdNb2RlbCldPVxcXCJ0YXNrLnRhZ3NcXFwiIG5nQ29udHJvbD1cXFwidGFnc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBtIG9mIHRhZ3NcXFwiIFt2YWx1ZV09XFxcIm0uaWRcXFwiPnt7bS5uYW1lfX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy50YWdzLnZhbGlkIHx8IGZvcm0uY29udHJvbHMudGFncy5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICAgICAgPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldFxcXCI+XFxyXFxuICAgICAgICAgICAgPGxlZ2VuZCBjbGFzcz1cXFwibGVnZW5kXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snYXR0YWNobWVudHMnfX1cXHJcXG4gICAgICAgICAgICA8L2xlZ2VuZD5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLXVwbG9hZFxcXCIgZGF0YS11cGxvYWQ9XFxcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtcGFwZXJjbGlwXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57eydhdHRhY2hfZmlsZSd9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImF0dGFjaG1lbnRzXFxcIiBkYXRhLXVwbG9hZC1maWxlcz1cXFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImF0dGFjaG1lbnRzLWZpbGVcXFwiICpuZ0Zvcj1cXFwibGV0IGF0dCBvZiB0YXNrLmF0dGFjaG1lbnRzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiZmlsZS1uYW1lXFxcIiBocmVmPVxcXCJ7e2F0dC51cmx9fVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7YXR0LnJlYWxGaWxlTmFtZX19XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1saW5rIGJ0bi1yZW1vdmUtZmlsZSBvbi1lZGl0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgPC9zZWN0aW9uPlxcclxcbjwvZm9ybT5cXHJcXG5cIlxuXG4vKioqLyB9LFxuLyogNjAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcblx0ICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcblx0ICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcblx0ICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcblx0ICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcblx0fTtcclxuXHR2YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xyXG5cdH07XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIHJvdXRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xyXG5cdHZhciBjb21tb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTtcclxuXHR2YXIgdGFic18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDQpO1xyXG5cdHZhciB0YWJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNjA1KTtcclxuXHR2YXIgYXBwX3NlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg0KTtcclxuXHR2YXIgdXNlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDYpO1xyXG5cdHZhciBVc2VyUHJvZmlsZUNvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFVzZXJQcm9maWxlQ29tcG9uZW50KF9yb3V0ZXIsIF9mb3JtQnVpbGRlciwgX2FwcFNlcnZpY2UpIHtcclxuXHQgICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XHJcblx0ICAgICAgICB0aGlzLl9mb3JtQnVpbGRlciA9IF9mb3JtQnVpbGRlcjtcclxuXHQgICAgICAgIHRoaXMuX2FwcFNlcnZpY2UgPSBfYXBwU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMudXNlciA9IG5ldyB1c2VyXzEuVXNlcigpO1xyXG5cdCAgICAgICAgdGhpcy5mb3JtID0gX2Zvcm1CdWlsZGVyLmdyb3VwKHtcclxuXHQgICAgICAgICAgICBsb2dpbjogW10sXHJcblx0ICAgICAgICAgICAgcHdkOiBbXSxcclxuXHQgICAgICAgICAgICBwd2RfY29uZmlybTogW10sXHJcblx0ICAgICAgICAgICAgZW1haWw6IFtdXHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgfVxyXG5cdCAgICBVc2VyUHJvZmlsZUNvbXBvbmVudC5wcm90b3R5cGUudXBkYXRlVXNlclByb2ZpbGUgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLl9hcHBTZXJ2aWNlLnVwZGF0ZVVzZXJQcm9maWxlKHRoaXMudXNlcik7XHJcblx0ICAgIH07XHJcblx0ICAgIFVzZXJQcm9maWxlQ29tcG9uZW50LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHQgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuXHQgICAgfTtcclxuXHQgICAgVXNlclByb2ZpbGVDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW3VzZXItcHJvZmlsZV0nLFxyXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyksXHJcblx0ICAgICAgICAgICAgZGlyZWN0aXZlczogW2NvbW1vbl8xLkZPUk1fRElSRUNUSVZFUywgdGFic18xLlRhYnMsIHRhYl8xLlRhYl0sXHJcblx0ICAgICAgICAgICAgcHJvdmlkZXJzOiBbY29tbW9uXzEuRm9ybUJ1aWxkZXJdXHJcblx0ICAgICAgICB9KSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIFtyb3V0ZXJfMS5Sb3V0ZXIsIGNvbW1vbl8xLkZvcm1CdWlsZGVyLCBhcHBfc2VydmljZV8xLkFwcFNlcnZpY2VdKVxyXG5cdCAgICBdLCBVc2VyUHJvZmlsZUNvbXBvbmVudCk7XHJcblx0ICAgIHJldHVybiBVc2VyUHJvZmlsZUNvbXBvbmVudDtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuVXNlclByb2ZpbGVDb21wb25lbnQgPSBVc2VyUHJvZmlsZUNvbXBvbmVudDtcclxuXG5cbi8qKiovIH0sXG4vKiA2MDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgdGFiXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNSk7XHJcblx0dmFyIFRhYnMgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBUYWJzKCkge1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIGNvbnRlbnRDaGlsZHJlbiBhcmUgc2V0XHJcblx0ICAgIFRhYnMucHJvdG90eXBlLm5nQWZ0ZXJDb250ZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIC8vIGdldCBhbGwgYWN0aXZlIHRhYnNcclxuXHQgICAgICAgIHZhciBhY3RpdmVUYWJzID0gdGhpcy50YWJzLmZpbHRlcihmdW5jdGlvbiAodGFiKSB7IHJldHVybiB0YWIuYWN0aXZlOyB9KTtcclxuXHQgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSB0YWIgc2V0LCBhY3RpdmF0ZSB0aGUgZmlyc3RcclxuXHQgICAgICAgIGlmIChhY3RpdmVUYWJzLmxlbmd0aCA9PT0gMCkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKHRoaXMudGFicy5maXJzdCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIFRhYnMucHJvdG90eXBlLnNlbGVjdFRhYiA9IGZ1bmN0aW9uICh0YWIpIHtcclxuXHQgICAgICAgIC8vIGRlYWN0aXZhdGUgYWxsIHRhYnNcclxuXHQgICAgICAgIHRoaXMudGFicy5mb3JFYWNoKGZ1bmN0aW9uICh0YWIpIHsgcmV0dXJuIHRhYi5hY3RpdmUgPSBmYWxzZTsgfSk7XHJcblx0ICAgICAgICAvLyBhY3RpdmF0ZSB0aGUgdGFiIHRoZSB1c2VyIGhhcyBjbGlja2VkIG9uLlxyXG5cdCAgICAgICAgdGFiLmFjdGl2ZSA9IHRydWU7XHJcblx0ICAgIH07XHJcblx0ICAgIFRhYnMucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db250ZW50Q2hpbGRyZW4odGFiXzEuVGFiKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIGNvcmVfMS5RdWVyeUxpc3QpXHJcblx0ICAgIF0sIFRhYnMucHJvdG90eXBlLCBcInRhYnNcIiwgdm9pZCAwKTtcclxuXHQgICAgVGFicyA9IF9fZGVjb3JhdGUoW1xyXG5cdCAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XHJcblx0ICAgICAgICAgICAgc2VsZWN0b3I6ICd0YWJzJyxcclxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgICA8dWwgY2xhc3M9XFxcIm5hdiBuYXYtdGFic1xcXCI+XFxuICAgICAgICA8bGkgKm5nRm9yPVxcXCJsZXQgdGFiIG9mIHRhYnNcXFwiIChjbGljayk9XFxcInNlbGVjdFRhYih0YWIpXFxcIiBbY2xhc3MuYWN0aXZlXT1cXFwidGFiLmFjdGl2ZVxcXCI+XFxuICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIChjbGljayk9XFxcInByZXZlbnREZWZhdWx0KCRldmVudClcXFwiPnt7dGFiLnRpdGxlfX08L2E+XFxuICAgICAgICA8L2xpPlxcbiAgICAgIDwvdWw+XFxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICBcIlxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbXSlcclxuXHQgICAgXSwgVGFicyk7XHJcblx0ICAgIHJldHVybiBUYWJzO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5UYWJzID0gVGFicztcclxuXG5cbi8qKiovIH0sXG4vKiA2MDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgVGFiID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gVGFiKCkge1xyXG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuXHQgICAgfVxyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbnB1dCgndGFiVGl0bGUnKSwgXHJcblx0ICAgICAgICBfX21ldGFkYXRhKCdkZXNpZ246dHlwZScsIFN0cmluZylcclxuXHQgICAgXSwgVGFiLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xyXG5cdCAgICBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5JbnB1dCgpLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgT2JqZWN0KVxyXG5cdCAgICBdLCBUYWIucHJvdG90eXBlLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5cdCAgICBUYWIgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAndGFiJyxcclxuXHQgICAgICAgICAgICBzdHlsZXM6IFtcIi5uYXYtdGFicyAucGFuZSB7IH1cIl0sXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiIWFjdGl2ZVxcXCIgY2xhc3M9XFxcInBhbmVcXFwiPlxcbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICAgIDwvZGl2PlxcbiAgICBcIlxyXG5cdCAgICAgICAgfSksIFxyXG5cdCAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbXSlcclxuXHQgICAgXSwgVGFiKTtcclxuXHQgICAgcmV0dXJuIFRhYjtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuVGFiID0gVGFiO1xyXG5cblxuLyoqKi8gfSxcbi8qIDYwNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIFVzZXIgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBVc2VyKCkge1xyXG5cdCAgICAgICAgdGhpcy51c2VyX25hbWUgPSAnQGFub255bW91cyc7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIFVzZXI7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLlVzZXIgPSBVc2VyO1xyXG5cblxuLyoqKi8gfSxcbi8qIDYwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxmb3JtIGNsYXNzPVxcXCJmb3JtIGZvcm0tdXNlcnByb2ZpbGVcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBbbmdGb3JtTW9kZWxdPVxcXCJmb3JtXFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLWJhY2tcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAge3snZW1wbG95ZWUnfX0ge3t1c2VyLm5hbWV9fVxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5XFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIFtkaXNhYmxlZF09XFxcIiFmb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJ1cGRhdGVVc2VyUHJvZmlsZSgpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8dGFicz5cXHJcXG4gICAgICAgICAgICA8dGFiIGNsYXNzPVxcXCJ0YWItcGFuZVxcXCIgdGFiVGl0bGU9XFxcInt7J3Byb3BlcnRpZXMnfX1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8IS0tPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldCBmaWVsZHNldC11c2VyLWF2YXRhclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInVzZXItYXZhdGFyXFxcIiBzcmM9XFxcImltZy9hdmF0YXIucG5nXFxcIi8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+LS0+XFxyXFxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXQgZmllbGRzZXQtdXNlci1maWVsZHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7J3VzZXJfbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dXNlci5uYW1lfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3snbG9naW5fbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJzcGFuM1xcXCIgWyhuZ01vZGVsKV09XFxcInVzZXIubG9naW5cXFwiIG5nQ29udHJvbD1cXFwibG9naW5cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydwYXNzd29yZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInBhc3N3b3JkXFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIFsobmdNb2RlbCldPVxcXCJ1c2VyLnB3ZFxcXCIgbmdDb250cm9sPVxcXCJwd2RcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydwYXNzd29yZF9jb25maXJtJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicGFzc3dvcmRcXFwiIGNsYXNzPVxcXCJzcGFuM1xcXCIgWyhuZ01vZGVsKV09XFxcInVzZXIucHdkX2NvbmZpcm1cXFwiIG5nQ29udHJvbD1cXFwicHdkX2NvbmZpcm1cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydlbWFpbCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImVtYWlsXFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIFsobmdNb2RlbCldPVxcXCJ1c2VyLmVtYWlsXFxcIiBuZ0NvbnRyb2w9XFxcImVtYWlsXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3snb3JnX25hbWUnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e3VzZXIub3JnYW5pemF0aW9ufX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3snZGVwYXJ0bWVudCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dXNlci5kZXBhcnRtZW50fX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sncG9zaXRpb24nfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e3VzZXIucG9zaXRpb259fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydyb2xlcyd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlciBsaXN0LXN0eWxlLW5vbmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDpmb3ItZWFjaCBzZWxlY3Q9XFxcImZpZWxkcy9yb2xlcy9lbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLlxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6Zm9yLWVhY2g+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgICAgICAgICA8L3RhYj5cXHJcXG4gICAgICAgICAgICA8dGFiIGNsYXNzPVxcXCJ0YWItcGFuZVxcXCIgdGFiVGl0bGU9XFxcInt7J2ludGVyZmFjZSd9fVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7J2xpbWl0X3ZpZXcnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwicGFnZXNpemVcXFwiIGNsYXNzPVxcXCJuYXRpdmUgc3BhbjJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICcxMCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjIwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmlmIHRlc3Q9XFxcIi8vcGFnZXNpemUgPSAnMjAnXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3hzbDppZj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIzMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDppZiB0ZXN0PVxcXCIvL3BhZ2VzaXplID0gJzMwJ1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6YXR0cmlidXRlIG5hbWU9XFxcInNlbGVjdGVkXFxcIiBzZWxlY3Q9XFxcIidzZWxlY3RlZCdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMzBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiNTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICc1MCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydpbnRlcmZhY2VfbGFuZyd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YXJpYWJsZSBuYW1lPVxcXCJjdXJyZW50bGFuZ1xcXCIgc2VsZWN0PVxcXCIvcmVxdWVzdC9AbGFuZ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJsYW5nXFxcIiBjbGFzcz1cXFwibmF0aXZlIHNwYW4yXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6Zm9yLWVhY2ggc2VsZWN0PVxcXCIvL3F1ZXJ5W0BlbnRpdHkgPSAnbGFuZ3VhZ2UnXS9lbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwie3ZpZXdjb250ZW50L2xhbmcvQGlkfVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwidmlld2NvbnRlbnQvbGFuZy9AaWQgPSAkY3VycmVudGxhbmdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCJ2aWV3Y29udGVudC9sYW5nXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6Zm9yLWVhY2g+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCIgZGF0YS10b2dnbGUtdGhlbWU9XFxcInRoZW1lMVxcXCIgY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7J2NoYW5nZV9za2luJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICAgICAgICAgIDwvdGFiPlxcclxcbiAgICAgICAgPC90YWJzPlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9mb3JtPlxcclxcblwiXG5cbi8qKiovIH0sXG4vKiA2MDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuXHQgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuXHQgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuXHQgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuXHQgICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxuXHR9O1xyXG5cdHZhciBfX21ldGFkYXRhID0gKHRoaXMgJiYgdGhpcy5fX21ldGFkYXRhKSB8fCBmdW5jdGlvbiAoaywgdikge1xyXG5cdCAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XHJcblx0fTtcclxuXHR2YXIgY29yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcclxuXHR2YXIgTG9naW5Db21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBMb2dpbkNvbXBvbmVudCgpIHtcclxuXHQgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ0xvZ291dCc7XHJcblx0ICAgIH1cclxuXHQgICAgTG9naW5Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcclxuXHQgICAgICAgIGNvcmVfMS5Db21wb25lbnQoe1xyXG5cdCAgICAgICAgICAgIHNlbGVjdG9yOiAnW2xvZ2luXScsXHJcblx0ICAgICAgICAgICAgdGVtcGxhdGU6ICdsb2dpbidcclxuXHQgICAgICAgIH0pLCBcclxuXHQgICAgICAgIF9fbWV0YWRhdGEoJ2Rlc2lnbjpwYXJhbXR5cGVzJywgW10pXHJcblx0ICAgIF0sIExvZ2luQ29tcG9uZW50KTtcclxuXHQgICAgcmV0dXJuIExvZ2luQ29tcG9uZW50O1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Mb2dpbkNvbXBvbmVudCA9IExvZ2luQ29tcG9uZW50O1xyXG5cblxuLyoqKi8gfSxcbi8qIDYwOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxuYi1ub3RpZnk+PC9uYi1ub3RpZnk+XFxyXFxuPGRpdiBjbGFzcz1cXFwibGF5b3V0XFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1vdmVybGF5XFxcIiAobW91c2Vkb3duKT1cXFwiaGlkZU5hdigkZXZlbnQpXFxcIiAodG91Y2hzdGFydCk9XFxcImhpZGVOYXYoJGV2ZW50KVxcXCI+PC9kaXY+XFxyXFxuICAgIDxoZWFkZXIgY2xhc3M9XFxcImhlYWRlciBuYXZiYXIgbmF2YmFyLWZpeGVkLXRvcFxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250YWluZXJcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5hdmJhci1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4tc2lkZS1uYXYtdG9nZ2xlXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcInRvZ2dsZU5hdigpXFxcIj48L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiYnJhbmQtbG9nb1xcXCIgYWx0PVxcXCJsb2dvXFxcIiBzcmM9XFxcImltZy9sb2dvLnBuZ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImJyYW5kLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7SEVBREVSX1RJVExFfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxuYXYgY2xhc3M9XFxcIm5hdmJhci1uYXYgbmF2YmFyLXJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJuYXYgbmF2YmFyLXJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiZHJvcGRvd25cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGNsYXNzPVxcXCJkcm9wZG93bi10b2dnbGVcXFwiIGRhdGEtdG9nZ2xlPVxcXCJkcm9wZG93blxcXCIgKGNsaWNrKT1cXFwicHJldmVudERlZmF1bHQoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS11c2VyXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwiZHJvcGRvd24tbWVudSByaWdodFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJ1c2VyLXByb2ZpbGVcXFwiIFtyb3V0ZXJMaW5rXT1cXFwiWycvdXNlci1wcm9maWxlJ11cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7bG9nZ2VkVXNlci51c2VyX25hbWV9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XFxcImRpdmlkZXJcXFwiPjwvbGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJsb2dvdXRcXFwiIGhyZWY9XFxcIiNsb2dvdXRcXFwiIChjbGljayk9XFxcImxvZ291dCgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dvdXRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgPC91bD5cXHJcXG4gICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XFxcIm5hdmJhci1mb3JtIG5hdmJhci1zZWFyY2hcXFwiIG5hbWU9XFxcImZ0LXNlYXJjaFxcXCIgKHN1Ym1pdCk9XFxcImZ0U2VhcmNoKClcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiaWRcXFwiIHZhbHVlPVxcXCJzZWFyY2hcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwic2VhcmNoXFxcIiBjbGFzcz1cXFwicVxcXCIgbmFtZT1cXFwia2V5d29yZFxcXCIgdmFsdWU9XFxcInt7c2VhcmNoX2tleXdvcmR9fVxcXCIgcGxhY2Vob2xkZXI9XFxcInt7J3NlYXJjaCd9fVxcXCIgcmVxdWlyZWQgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiIChmb2N1cyk9XFxcInNlYXJjaFRvZ2dsZSgpXFxcIiAoYmx1cik9XFxcInNlYXJjaFRvZ2dsZSgpXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJyZXNldFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJzdWJtaXRcXFwiIHZhbHVlPVxcXCJzZWFyY2hcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZm9ybT5cXHJcXG4gICAgICAgICAgICA8L25hdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRhaW5lclxcXCI+XFxyXFxuICAgICAgICA8YXNpZGUgbmF2IGNsYXNzPVxcXCJhc2lkZSBzaWRlLW5hdlxcXCI+PC9hc2lkZT5cXHJcXG4gICAgICAgIDxtYWluIGNsYXNzPVxcXCJjb250ZW50XFxcIj5cXHJcXG4gICAgICAgICAgICA8cm91dGVyLW91dGxldD48L3JvdXRlci1vdXRsZXQ+XFxyXFxuICAgICAgICA8L21haW4+XFxyXFxuICAgIDwvc2VjdGlvbj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG4vKioqLyB9XG5dKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBidW5kbGUuanNcbiAqKi8iLCJpbXBvcnQge2Jvb3RzdHJhcH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcclxuaW1wb3J0IHtiaW5kLCBwcm92aWRlLCBlbmFibGVQcm9kTW9kZSwgUExBVEZPUk1fRElSRUNUSVZFU30gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7SFRUUF9QUk9WSURFUlMsIFJlcXVlc3RPcHRpb25zLCBCYXNlUmVxdWVzdE9wdGlvbnMsIEhlYWRlcnN9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xyXG5pbXBvcnQge1JPVVRFUl9ESVJFQ1RJVkVTLCBST1VURVJfUFJPVklERVJTfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge0ZPUk1fUFJPVklERVJTLCBMb2NhdGlvblN0cmF0ZWd5LCBIYXNoTG9jYXRpb25TdHJhdGVneX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0ICdyeGpzL1J4JztcclxuXHJcbmltcG9ydCB7QXBwfSBmcm9tICcuL2NvbXBvbmVudHMvYXBwJztcclxuaW1wb3J0IHtOQk5vdGlmeUNvbXBvbmVudH0gZnJvbSAnLi9jb21wb25lbnRzL25iLW5vdGlmeSc7XHJcbmltcG9ydCB7QXBwU2VydmljZX0gZnJvbSAnLi9zZXJ2aWNlcy9hcHAuc2VydmljZSc7XHJcbmltcG9ydCB7VGFza1NlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvdGFzay5zZXJ2aWNlJztcclxuaW1wb3J0IHtQcm9qZWN0U2VydmljZX0gZnJvbSAnLi9zZXJ2aWNlcy9wcm9qZWN0LnNlcnZpY2UnO1xyXG5pbXBvcnQge1JlZmVyZW5jZVNlcnZpY2V9IGZyb20gJy4vc2VydmljZXMvcmVmZXJlbmNlLnNlcnZpY2UnO1xyXG5pbXBvcnQge1N0YWZmU2VydmljZX0gZnJvbSAnLi9zZXJ2aWNlcy9zdGFmZi5zZXJ2aWNlJztcclxuXHJcbmRlY2xhcmUgbGV0IF9fUFJPRFVDVElPTl9fOiBhbnk7XHJcbmlmIChfX1BST0RVQ1RJT05fXykge1xyXG4gICAgZW5hYmxlUHJvZE1vZGUoKTtcclxufVxyXG5cclxuYm9vdHN0cmFwKEFwcCwgW1xyXG4gICAgSFRUUF9QUk9WSURFUlMsXHJcbiAgICBST1VURVJfRElSRUNUSVZFUyxcclxuICAgIFJPVVRFUl9QUk9WSURFUlMsXHJcbiAgICBwcm92aWRlKFBMQVRGT1JNX0RJUkVDVElWRVMsIHsgdXNlVmFsdWU6IFJPVVRFUl9ESVJFQ1RJVkVTLCBtdWx0aTogdHJ1ZSB9KSxcclxuICAgIHByb3ZpZGUoTG9jYXRpb25TdHJhdGVneSwgeyB1c2VDbGFzczogSGFzaExvY2F0aW9uU3RyYXRlZ3kgfSksXHJcbiAgICBGT1JNX1BST1ZJREVSUyxcclxuICAgIE5CTm90aWZ5Q29tcG9uZW50LFxyXG4gICAgQXBwU2VydmljZSxcclxuICAgIFRhc2tTZXJ2aWNlLFxyXG4gICAgUHJvamVjdFNlcnZpY2UsXHJcbiAgICBSZWZlcmVuY2VTZXJ2aWNlLFxyXG4gICAgU3RhZmZTZXJ2aWNlXHJcbl0pLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9tYWluLnRzXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cbi8vIFN1YmplY3QgaW1wb3J0ZWQgYmVmb3JlIE9ic2VydmFibGUgdG8gYnlwYXNzIGNpcmN1bGFyIGRlcGVuZGVuY3kgaXNzdWUgc2luY2Vcbi8vIFN1YmplY3QgZXh0ZW5kcyBPYnNlcnZhYmxlIGFuZCBPYnNlcnZhYmxlIHJlZmVyZW5jZXMgU3ViamVjdCBpbiBpdCdzXG4vLyBkZWZpbml0aW9uXG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi9TdWJqZWN0Jyk7XG5leHBvcnRzLlN1YmplY3QgPSBTdWJqZWN0XzEuU3ViamVjdDtcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9PYnNlcnZhYmxlJyk7XG5leHBvcnRzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZTtcbi8vIHN0YXRpY3Ncbi8qIHRzbGludDpkaXNhYmxlOm5vLXVzZS1iZWZvcmUtZGVjbGFyZSAqL1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9iaW5kQ2FsbGJhY2snKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFjaycpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2NvbmNhdCcpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9kZWZlcicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9lbXB0eScpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9mb3JrSm9pbicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9mcm9tJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudCcpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2dlbmVyYXRlJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2ludGVydmFsJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL21lcmdlJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL3JhY2UnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvbmV2ZXInKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvb2YnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvcmFuZ2UnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvdGhyb3cnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvdGltZXInKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvemlwJyk7XG4vL29wZXJhdG9yc1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvYnVmZmVyJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXJDb3VudCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvYnVmZmVyVGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvYnVmZmVyVG9nZ2xlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXJXaGVuJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jYWNoZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY2F0Y2gnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvbWJpbmVBbGwnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvbmNhdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29uY2F0QWxsJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jb25jYXRNYXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvbmNhdE1hcFRvJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jb3VudCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVtYXRlcmlhbGl6ZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVib3VuY2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2RlYm91bmNlVGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVmYXVsdElmRW1wdHknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2RlbGF5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZWxheVdoZW4nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kbycpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZXhwYW5kJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9maWx0ZXInKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2ZpbmFsbHknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2ZpcnN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9ncm91cEJ5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9pZ25vcmVFbGVtZW50cycpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvYXVkaXQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2F1ZGl0VGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbGFzdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbGV0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9ldmVyeScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWFwJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tYXBUbycpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWF0ZXJpYWxpemUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL21lcmdlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tZXJnZUFsbCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL21lcmdlTWFwVG8nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL211bHRpY2FzdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivb2JzZXJ2ZU9uJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9wYXJ0aXRpb24nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3BsdWNrJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9wdWJsaXNoJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3InKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3B1Ymxpc2hMYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9yYWNlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9yZWR1Y2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3JlcGVhdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcmV0cnknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3JldHJ5V2hlbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc2FtcGxlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zYW1wbGVUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zY2FuJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zaGFyZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc2luZ2xlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9za2lwJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9za2lwVW50aWwnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NraXBXaGlsZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc3RhcnRXaXRoJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zdWJzY3JpYmVPbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc3dpdGNoJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zd2l0Y2hNYXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3N3aXRjaE1hcFRvJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90YWtlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90YWtlTGFzdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGFrZVVudGlsJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90YWtlV2hpbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rocm90dGxlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90aHJvdHRsZVRpbWUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3RpbWVvdXQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3RpbWVvdXRXaXRoJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90b0FycmF5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90b1Byb21pc2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3dpbmRvdycpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93Q291bnQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3dpbmRvd1RpbWUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3dpbmRvd1RvZ2dsZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93V2hlbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb20nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3ppcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvemlwQWxsJyk7XG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cbnZhciBPcGVyYXRvcl8xID0gcmVxdWlyZSgnLi9PcGVyYXRvcicpO1xuZXhwb3J0cy5PcGVyYXRvciA9IE9wZXJhdG9yXzEuT3BlcmF0b3I7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuL1N1YnNjcmlwdGlvbicpO1xuZXhwb3J0cy5TdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb247XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpYmVyJyk7XG5leHBvcnRzLlN1YnNjcmliZXIgPSBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcjtcbnZhciBBc3luY1N1YmplY3RfMSA9IHJlcXVpcmUoJy4vQXN5bmNTdWJqZWN0Jyk7XG5leHBvcnRzLkFzeW5jU3ViamVjdCA9IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdDtcbnZhciBSZXBsYXlTdWJqZWN0XzEgPSByZXF1aXJlKCcuL1JlcGxheVN1YmplY3QnKTtcbmV4cG9ydHMuUmVwbGF5U3ViamVjdCA9IFJlcGxheVN1YmplY3RfMS5SZXBsYXlTdWJqZWN0O1xudmFyIEJlaGF2aW9yU3ViamVjdF8xID0gcmVxdWlyZSgnLi9CZWhhdmlvclN1YmplY3QnKTtcbmV4cG9ydHMuQmVoYXZpb3JTdWJqZWN0ID0gQmVoYXZpb3JTdWJqZWN0XzEuQmVoYXZpb3JTdWJqZWN0O1xudmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5Db25uZWN0YWJsZU9ic2VydmFibGUgPSBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGU7XG52YXIgTm90aWZpY2F0aW9uXzEgPSByZXF1aXJlKCcuL05vdGlmaWNhdGlvbicpO1xuZXhwb3J0cy5Ob3RpZmljYXRpb24gPSBOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb247XG52YXIgRW1wdHlFcnJvcl8xID0gcmVxdWlyZSgnLi91dGlsL0VtcHR5RXJyb3InKTtcbmV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yO1xudmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InKTtcbmV4cG9ydHMuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xudmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InKTtcbmV4cG9ydHMuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO1xudmFyIFVuc3Vic2NyaXB0aW9uRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yJyk7XG5leHBvcnRzLlVuc3Vic2NyaXB0aW9uRXJyb3IgPSBVbnN1YnNjcmlwdGlvbkVycm9yXzEuVW5zdWJzY3JpcHRpb25FcnJvcjtcbnZhciBhc2FwXzEgPSByZXF1aXJlKCcuL3NjaGVkdWxlci9hc2FwJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgcXVldWVfMSA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyL3F1ZXVlJyk7XG52YXIgcnhTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL3N5bWJvbC9yeFN1YnNjcmliZXInKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi9zeW1ib2wvaXRlcmF0b3InKTtcbnZhciBvYnNlcnZhYmxlID0gcmVxdWlyZSgnc3ltYm9sLW9ic2VydmFibGUnKTtcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJ4LlNjaGVkdWxlclxuICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IHF1ZXVlIFNjaGVkdWxlcyBvbiBhIHF1ZXVlIGluIHRoZSBjdXJyZW50IGV2ZW50IGZyYW1lXG4gKiAodHJhbXBvbGluZSBzY2hlZHVsZXIpLiBVc2UgdGhpcyBmb3IgaXRlcmF0aW9uIG9wZXJhdGlvbnMuXG4gKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXNhcCBTY2hlZHVsZXMgb24gdGhlIG1pY3JvIHRhc2sgcXVldWUsIHdoaWNoIHVzZXMgdGhlXG4gKiBmYXN0ZXN0IHRyYW5zcG9ydCBtZWNoYW5pc20gYXZhaWxhYmxlLCBlaXRoZXIgTm9kZS5qcycgYHByb2Nlc3MubmV4dFRpY2soKWBcbiAqIG9yIFdlYiBXb3JrZXIgTWVzc2FnZUNoYW5uZWwgb3Igc2V0VGltZW91dCBvciBvdGhlcnMuIFVzZSB0aGlzIGZvclxuICogYXN5bmNocm9ub3VzIGNvbnZlcnNpb25zLlxuICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IGFzeW5jIFNjaGVkdWxlcyB3b3JrIHdpdGggYHNldEludGVydmFsYC4gVXNlIHRoaXMgZm9yXG4gKiB0aW1lLWJhc2VkIG9wZXJhdGlvbnMuXG4gKi9cbnZhciBTY2hlZHVsZXIgPSB7XG4gICAgYXNhcDogYXNhcF8xLmFzYXAsXG4gICAgYXN5bmM6IGFzeW5jXzEuYXN5bmMsXG4gICAgcXVldWU6IHF1ZXVlXzEucXVldWVcbn07XG5leHBvcnRzLlNjaGVkdWxlciA9IFNjaGVkdWxlcjtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUnguU3ltYm9sXG4gKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IHJ4U3Vic2NyaWJlciBBIHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvXG4gKiByZXRyaWV2ZSBhbiBcIlJ4IHNhZmVcIiBPYnNlcnZlciBmcm9tIGFuIG9iamVjdC4gXCJSeCBzYWZldHlcIiBjYW4gYmUgZGVmaW5lZCBhc1xuICogYW4gb2JqZWN0IHRoYXQgaGFzIGFsbCBvZiB0aGUgdHJhaXRzIG9mIGFuIFJ4IFN1YnNjcmliZXIsIGluY2x1ZGluZyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc3Vic2NyaXB0aW9uIGNoYWluIGFuZFxuICogZ3VhcmFudGVlcyBpbnZvbHZpbmcgZXZlbnQgdHJpZ2dlcmluZyAoY2FuJ3QgXCJuZXh0XCIgYWZ0ZXIgdW5zdWJzY3JpcHRpb24sXG4gKiBldGMpLlxuICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSBvYnNlcnZhYmxlIEEgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWUgdG9cbiAqIHJldHJpZXZlIGFuIE9ic2VydmFibGUgYXMgZGVmaW5lZCBieSB0aGUgW0VDTUFTY3JpcHQgXCJPYnNlcnZhYmxlXCIgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZSkuXG4gKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IGl0ZXJhdG9yIFRoZSBFUzYgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWVcbiAqIHRvIHJldHJpZXZlIGFuIGl0ZXJhdG9yIGZyb20gYW4gb2JqZWN0LlxuICovXG52YXIgU3ltYm9sID0ge1xuICAgIHJ4U3Vic2NyaWJlcjogcnhTdWJzY3JpYmVyXzEuJCRyeFN1YnNjcmliZXIsXG4gICAgb2JzZXJ2YWJsZTogb2JzZXJ2YWJsZSxcbiAgICBpdGVyYXRvcjogaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXG59O1xuZXhwb3J0cy5TeW1ib2wgPSBTeW1ib2w7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SeC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL1J4LmpzXG4gKiogbW9kdWxlIGlkID0gMzI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYmluZENhbGxiYWNrXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjaycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZENhbGxiYWNrID0gYmluZENhbGxiYWNrXzEuYmluZENhbGxiYWNrO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZENhbGxiYWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvYmluZENhbGxiYWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5iaW5kQ2FsbGJhY2sgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRDYWxsYmFjay5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvYmluZENhbGxiYWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgQXN5bmNTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9Bc3luY1N1YmplY3QnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgQm91bmRDYWxsYmFja09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZShjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgY2FsbGJhY2sgQVBJIHRvIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIE9ic2VydmFibGUuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+R2l2ZSBpdCBhIGZ1bmN0aW9uIGBmYCBvZiB0eXBlIGBmKHgsIGNhbGxiYWNrKWAgYW5kXG4gICAgICogaXQgd2lsbCByZXR1cm4gYSBmdW5jdGlvbiBgZ2AgdGhhdCB3aGVuIGNhbGxlZCBhcyBgZyh4KWAgd2lsbCBvdXRwdXQgYW5cbiAgICAgKiBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIGBiaW5kQ2FsbGJhY2tgIGlzIG5vdCBhbiBvcGVyYXRvciBiZWNhdXNlIGl0cyBpbnB1dCBhbmQgb3V0cHV0IGFyZSBub3RcbiAgICAgKiBPYnNlcnZhYmxlcy4gVGhlIGlucHV0IGlzIGEgZnVuY3Rpb24gYGZ1bmNgIHdpdGggc29tZSBwYXJhbWV0ZXJzLCBidXQgdGhlXG4gICAgICogbGFzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYGZ1bmNgIGNhbGxzIHdoZW4gaXQgaXNcbiAgICAgKiBkb25lLiBUaGUgb3V0cHV0IG9mIGBiaW5kQ2FsbGJhY2tgIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgc2FtZVxuICAgICAqIHBhcmFtZXRlcnMgYXMgYGZ1bmNgLCBleGNlcHQgdGhlIGxhc3Qgb25lICh0aGUgY2FsbGJhY2spLiBXaGVuIHRoZSBvdXRwdXRcbiAgICAgKiBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhcmd1bWVudHMsIGl0IHdpbGwgcmV0dXJuIGFuIE9ic2VydmFibGUgd2hlcmUgdGhlXG4gICAgICogcmVzdWx0cyB3aWxsIGJlIGRlbGl2ZXJlZCB0by5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbnZlcnQgalF1ZXJ5J3MgZ2V0SlNPTiB0byBhbiBPYnNlcnZhYmxlIEFQSTwvY2FwdGlvbj5cbiAgICAgKiAvLyBTdXBwb3NlIHdlIGhhdmUgalF1ZXJ5LmdldEpTT04oJy9teS91cmwnLCBjYWxsYmFjaylcbiAgICAgKiB2YXIgZ2V0SlNPTkFzT2JzZXJ2YWJsZSA9IFJ4Lk9ic2VydmFibGUuYmluZENhbGxiYWNrKGpRdWVyeS5nZXRKU09OKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gZ2V0SlNPTkFzT2JzZXJ2YWJsZSgnL215L3VybCcpO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGJpbmROb2RlQ2FsbGJhY2t9XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbX1cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tUHJvbWlzZX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gd2l0aCBhIGNhbGxiYWNrIGFzIHRoZSBsYXN0IHBhcmFtZXRlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzZWxlY3RvciBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGVcbiAgICAgKiBjYWxsYmFjayBhbmQgbWFwcyB0aG9zZSBhIHZhbHVlIHRvIGVtaXQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuICAgICAqIGNhbGxiYWNrcy5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5wYXJhbXM6ICopOiBPYnNlcnZhYmxlfSBBIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlXG4gICAgICogT2JzZXJ2YWJsZSB0aGF0IGRlbGl2ZXJzIHRoZSBzYW1lIHZhbHVlcyB0aGUgY2FsbGJhY2sgd291bGQgZGVsaXZlci5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBiaW5kQ2FsbGJhY2tcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmdW5jLCBzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChzZWxlY3RvciA9PT0gdm9pZCAwKSB7IHNlbGVjdG9yID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZShmdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHRoaXMuY2FsbGJhY2tGdW5jO1xuICAgICAgICB2YXIgYXJncyA9IHRoaXMuYXJncztcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcbiAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICAgICAgICAgIHN1YmplY3QgPSB0aGlzLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkodGhpcywgaW5uZXJBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZXN1bHRfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gaW5zdGFuY2UgdG8gYXZvaWQgY2xvc3VyZS5cbiAgICAgICAgICAgICAgICBoYW5kbGVyLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgeyBzb3VyY2U6IHRoaXMsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuQm91bmRDYWxsYmFja09ic2VydmFibGUgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZTtcbmZ1bmN0aW9uIGRpc3BhdGNoKHN0YXRlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2UsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgIHZhciBjYWxsYmFja0Z1bmMgPSBzb3VyY2UuY2FsbGJhY2tGdW5jLCBhcmdzID0gc291cmNlLmFyZ3MsIHNjaGVkdWxlciA9IHNvdXJjZS5zY2hlZHVsZXI7XG4gICAgdmFyIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcbiAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcbiAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8yID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEVycm9yLCAwLCB7IGVycjogZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHJlc3VsdF8yLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzO1xuICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gdXNlIG5hbWVkIGZ1bmN0aW9uIHRvIHBhc3MgdmFsdWVzIGluIHdpdGhvdXQgY2xvc3VyZVxuICAgICAgICBoYW5kbGVyLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxmLmFkZChzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG59XG5mdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG4gICAgdmFyIHZhbHVlID0gYXJnLnZhbHVlLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG4gICAgc3ViamVjdC5uZXh0KHZhbHVlKTtcbiAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG59XG5mdW5jdGlvbiBkaXNwYXRjaEVycm9yKGFyZykge1xuICAgIHZhciBlcnIgPSBhcmcuZXJyLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG4gICAgc3ViamVjdC5lcnJvcihlcnIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm91bmRDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0JvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4vU3ViamVjdCcpO1xuLyoqXG4gKiBAY2xhc3MgQXN5bmNTdWJqZWN0PFQ+XG4gKi9cbnZhciBBc3luY1N1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc3luY1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXN5bmNTdWJqZWN0KCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzTmV4dCA9IGZhbHNlO1xuICAgIH1cbiAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5oYXNOZXh0KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzTmV4dCA9IHRydWU7XG4gICAgfTtcbiAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIC8vIG9wdGltaXphdGlvbiB0byBibG9jayBvdXIgU3ViamVjdFN1YnNjcmlwdGlvbnMgZnJvbVxuICAgICAgICAvLyBzcGxpY2luZyB0aGVtc2VsdmVzIG91dCBvZiB0aGUgb2JzZXJ2ZXJzIGxpc3Qgb25lIGJ5IG9uZS5cbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmhhc05leHQpIHtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSBvYnNlcnZlcnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIG8ubmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBvLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyc1tpbmRleF0uY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY1N1YmplY3Q7XG59KFN1YmplY3RfMS5TdWJqZWN0KSk7XG5leHBvcnRzLkFzeW5jU3ViamVjdCA9IEFzeW5jU3ViamVjdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jU3ViamVjdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL0FzeW5jU3ViamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDMyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGJpbmROb2RlQ2FsbGJhY2tfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFjaycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZE5vZGVDYWxsYmFjayA9IGJpbmROb2RlQ2FsbGJhY2tfMS5iaW5kTm9kZUNhbGxiYWNrO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZE5vZGVDYWxsYmFjay5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2suanNcbiAqKiBtb2R1bGUgaWQgPSAzMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUnKTtcbmV4cG9ydHMuYmluZE5vZGVDYWxsYmFjayA9IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZV8xLkJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kTm9kZUNhbGxiYWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgQXN5bmNTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9Bc3luY1N1YmplY3QnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgTm9kZS5qcy1zdHlsZSBjYWxsYmFjayBBUEkgdG8gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW5cbiAgICAgKiBPYnNlcnZhYmxlLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MganVzdCBsaWtlIHtAbGluayBiaW5kQ2FsbGJhY2t9LCBidXQgdGhlXG4gICAgICogY2FsbGJhY2sgaXMgZXhwZWN0ZWQgdG8gYmUgb2YgdHlwZSBgY2FsbGJhY2soZXJyb3IsIHJlc3VsdClgLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIGBiaW5kTm9kZUNhbGxiYWNrYCBpcyBub3QgYW4gb3BlcmF0b3IgYmVjYXVzZSBpdHMgaW5wdXQgYW5kIG91dHB1dCBhcmUgbm90XG4gICAgICogT2JzZXJ2YWJsZXMuIFRoZSBpbnB1dCBpcyBhIGZ1bmN0aW9uIGBmdW5jYCB3aXRoIHNvbWUgcGFyYW1ldGVycywgYnV0IHRoZVxuICAgICAqIGxhc3QgcGFyYW1ldGVyIG11c3QgYmUgYSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGBmdW5jYCBjYWxscyB3aGVuIGl0IGlzXG4gICAgICogZG9uZS4gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGV4cGVjdGVkIHRvIGZvbGxvdyBOb2RlLmpzIGNvbnZlbnRpb25zLFxuICAgICAqIHdoZXJlIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2sgaXMgYW4gZXJyb3IsIHdoaWxlIHJlbWFpbmluZ1xuICAgICAqIGFyZ3VtZW50cyBhcmUgdGhlIGNhbGxiYWNrIHJlc3VsdC4gVGhlIG91dHB1dCBvZiBgYmluZE5vZGVDYWxsYmFja2AgaXMgYVxuICAgICAqIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHNhbWUgcGFyYW1ldGVycyBhcyBgZnVuY2AsIGV4Y2VwdCB0aGUgbGFzdCBvbmUgKHRoZVxuICAgICAqIGNhbGxiYWNrKS4gV2hlbiB0aGUgb3V0cHV0IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFyZ3VtZW50cywgaXQgd2lsbFxuICAgICAqIHJldHVybiBhbiBPYnNlcnZhYmxlIHdoZXJlIHRoZSByZXN1bHRzIHdpbGwgYmUgZGVsaXZlcmVkIHRvLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+UmVhZCBhIGZpbGUgZnJvbSB0aGUgZmlsZXN5c3RlbSBhbmQgZ2V0IHRoZSBkYXRhIGFzIGFuIE9ic2VydmFibGU8L2NhcHRpb24+XG4gICAgICogaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuICAgICAqIHZhciByZWFkRmlsZUFzT2JzZXJ2YWJsZSA9IFJ4Lk9ic2VydmFibGUuYmluZE5vZGVDYWxsYmFjayhmcy5yZWFkRmlsZSk7XG4gICAgICogdmFyIHJlc3VsdCA9IHJlYWRGaWxlQXNPYnNlcnZhYmxlKCcuL3JvYWROYW1lcy50eHQnLCAndXRmOCcpO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGJpbmRDYWxsYmFja31cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21Qcm9taXNlfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuYyBGdW5jdGlvbiB3aXRoIGEgY2FsbGJhY2sgYXMgdGhlIGxhc3QgcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIEEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZVxuICAgICAqIGNhbGxiYWNrIGFuZCBtYXBzIHRob3NlIGEgdmFsdWUgdG8gZW1pdCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG4gICAgICogY2FsbGJhY2tzLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLnBhcmFtczogKik6IE9ic2VydmFibGV9IEEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGVcbiAgICAgKiBPYnNlcnZhYmxlIHRoYXQgZGVsaXZlcnMgdGhlIHNhbWUgdmFsdWVzIHRoZSBOb2RlLmpzIGNhbGxiYWNrIHdvdWxkXG4gICAgICogZGVsaXZlci5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBiaW5kTm9kZUNhbGxiYWNrXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGZ1bmMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShmdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBjYWxsYmFja0Z1bmMgPSB0aGlzLmNhbGxiYWNrRnVuYztcbiAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmFyZ3M7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIGlmICghc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgICAgICAgICBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlckZuKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJBcmdzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHNvdXJjZS5zZWxlY3Rvciwgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gaW5uZXJBcmdzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkodGhpcywgaW5uZXJBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZXN1bHRfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gaW5zdGFuY2UgdG8gYXZvaWQgY2xvc3VyZS5cbiAgICAgICAgICAgICAgICBoYW5kbGVyLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgeyBzb3VyY2U6IHRoaXMsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSA9IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZTtcbmZ1bmN0aW9uIGRpc3BhdGNoKHN0YXRlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2UsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgIHZhciBjYWxsYmFja0Z1bmMgPSBzb3VyY2UuY2FsbGJhY2tGdW5jLCBhcmdzID0gc291cmNlLmFyZ3MsIHNjaGVkdWxlciA9IHNvdXJjZS5zY2hlZHVsZXI7XG4gICAgdmFyIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcbiAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXJGbigpIHtcbiAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJBcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb3VyY2Uuc2VsZWN0b3IsIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdDtcbiAgICAgICAgICAgIHZhciBlcnIgPSBpbm5lckFyZ3Muc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8yID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEVycm9yLCAwLCB7IGVycjogZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHJlc3VsdF8yLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzO1xuICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gdXNlIG5hbWVkIGZ1bmN0aW9uIHRvIHBhc3MgdmFsdWVzIGluIHdpdGhvdXQgY2xvc3VyZVxuICAgICAgICBoYW5kbGVyLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goY2FsbGJhY2tGdW5jKS5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChoYW5kbGVyKSk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxmLmFkZChzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG59XG5mdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG4gICAgdmFyIHZhbHVlID0gYXJnLnZhbHVlLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG4gICAgc3ViamVjdC5uZXh0KHZhbHVlKTtcbiAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG59XG5mdW5jdGlvbiBkaXNwYXRjaEVycm9yKGFyZykge1xuICAgIHZhciBlcnIgPSBhcmcuZXJyLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG4gICAgc3ViamVjdC5lcnJvcihlcnIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb21iaW5lTGF0ZXN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb21iaW5lTGF0ZXN0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0ID0gY29tYmluZUxhdGVzdF8xLmNvbWJpbmVMYXRlc3RTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lTGF0ZXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvY29tYmluZUxhdGVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDMzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5Jyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIENvbWJpbmVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvIGNyZWF0ZSBhbiBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmVcbiAqIGNhbGN1bGF0ZWQgZnJvbSB0aGUgbGF0ZXN0IHZhbHVlcyBvZiBlYWNoIG9mIGl0cyBpbnB1dCBPYnNlcnZhYmxlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgYW55IGlucHV0IE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcbiAqIGNvbXB1dGVzIGEgZm9ybXVsYSB1c2luZyB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5wdXRzLCB0aGVuIGVtaXRzXG4gKiB0aGUgb3V0cHV0IG9mIHRoYXQgZm9ybXVsYS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb21iaW5lTGF0ZXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBjb21iaW5lTGF0ZXN0YCBjb21iaW5lcyB0aGUgdmFsdWVzIGZyb20gdGhpcyBPYnNlcnZhYmxlIHdpdGggdmFsdWVzIGZyb21cbiAqIE9ic2VydmFibGVzIHBhc3NlZCBhcyBhcmd1bWVudHMuIFRoaXMgaXMgZG9uZSBieSBzdWJzY3JpYmluZyB0byBlYWNoXG4gKiBPYnNlcnZhYmxlLCBpbiBvcmRlciwgYW5kIGNvbGxlY3RpbmcgYW4gYXJyYXkgb2YgZWFjaCBvZiB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlcyBhbnkgdGltZSBhbnkgb2YgdGhlIGlucHV0IE9ic2VydmFibGVzIGVtaXRzLCB0aGVuIGVpdGhlciB0YWtpbmcgdGhhdFxuICogYXJyYXkgYW5kIHBhc3NpbmcgaXQgYXMgYXJndW1lbnRzIHRvIGFuIG9wdGlvbmFsIGBwcm9qZWN0YCBmdW5jdGlvbiBhbmRcbiAqIGVtaXR0aW5nIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhhdCwgb3IganVzdCBlbWl0dGluZyB0aGUgYXJyYXkgb2YgcmVjZW50XG4gKiB2YWx1ZXMgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm8gYHByb2plY3RgIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkR5bmFtaWNhbGx5IGNhbGN1bGF0ZSB0aGUgQm9keS1NYXNzIEluZGV4IGZyb20gYW4gT2JzZXJ2YWJsZSBvZiB3ZWlnaHQgYW5kIG9uZSBmb3IgaGVpZ2h0PC9jYXB0aW9uPlxuICogdmFyIHdlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoNzAsIDcyLCA3NiwgNzksIDc1KTtcbiAqIHZhciBoZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDEuNzYsIDEuNzcsIDEuNzgpO1xuICogdmFyIGJtaSA9IHdlaWdodC5jb21iaW5lTGF0ZXN0KGhlaWdodCwgKHcsIGgpID0+IHcgLyAoaCAqIGgpKTtcbiAqIGJtaS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnQk1JIGlzICcgKyB4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgd2l0aExhdGVzdEZyb219XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbWJpbmUgd2l0aCB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSB2YWx1ZXMgZnJvbVxuICogdGhlIGNvbWJpbmVkIGxhdGVzdCB2YWx1ZXMgaW50byBhIG5ldyB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIHByb2plY3RlZCB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG4gKiBlYWNoIGlucHV0IE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIGNvbWJpbmVMYXRlc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVMYXRlc3QoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBwcm9qZWN0ID0gbnVsbDtcbiAgICBpZiAodHlwZW9mIG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb2plY3QgPSBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIGZpcnN0IGFuZCBvbmx5IG90aGVyIGFyZ3VtZW50IGJlc2lkZXMgdGhlIHJlc3VsdFNlbGVjdG9yIGlzIGFuIGFycmF5XG4gICAgLy8gYXNzdW1lIGl0J3MgYmVlbiBjYWxsZWQgd2l0aCBgY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIHByb2plY3QpYFxuICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG4gICAgICAgIG9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXNbMF07XG4gICAgfVxuICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMpLmxpZnQobmV3IENvbWJpbmVMYXRlc3RPcGVyYXRvcihwcm9qZWN0KSk7XG59XG5leHBvcnRzLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0O1xuLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbi8qKlxuICogQ29tYmluZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGUgd2hvc2UgdmFsdWVzIGFyZVxuICogY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2ggb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciBhbnkgaW5wdXQgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLCBpdFxuICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dHMsIHRoZW4gZW1pdHNcbiAqIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVMYXRlc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYGNvbWJpbmVMYXRlc3RgIGNvbWJpbmVzIHRoZSB2YWx1ZXMgZnJvbSBhbGwgdGhlIE9ic2VydmFibGVzIHBhc3NlZCBhc1xuICogYXJndW1lbnRzLiBUaGlzIGlzIGRvbmUgYnkgc3Vic2NyaWJpbmcgdG8gZWFjaCBPYnNlcnZhYmxlLCBpbiBvcmRlciwgYW5kXG4gKiBjb2xsZWN0aW5nIGFuIGFycmF5IG9mIGVhY2ggb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBhbnkgdGltZSBhbnkgb2YgdGhlXG4gKiBpbnB1dCBPYnNlcnZhYmxlcyBlbWl0cywgdGhlbiBlaXRoZXIgdGFraW5nIHRoYXQgYXJyYXkgYW5kIHBhc3NpbmcgaXQgYXNcbiAqIGFyZ3VtZW50cyB0byBhbiBvcHRpb25hbCBgcHJvamVjdGAgZnVuY3Rpb24gYW5kIGVtaXR0aW5nIHRoZSByZXR1cm4gdmFsdWUgb2ZcbiAqIHRoYXQsIG9yIGp1c3QgZW1pdHRpbmcgdGhlIGFycmF5IG9mIHJlY2VudCB2YWx1ZXMgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm9cbiAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5EeW5hbWljYWxseSBjYWxjdWxhdGUgdGhlIEJvZHktTWFzcyBJbmRleCBmcm9tIGFuIE9ic2VydmFibGUgb2Ygd2VpZ2h0IGFuZCBvbmUgZm9yIGhlaWdodDwvY2FwdGlvbj5cbiAqIHZhciB3ZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDcwLCA3MiwgNzYsIDc5LCA3NSk7XG4gKiB2YXIgaGVpZ2h0ID0gUnguT2JzZXJ2YWJsZS5vZigxLjc2LCAxLjc3LCAxLjc4KTtcbiAqIHZhciBibWkgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qod2VpZ2h0LCBoZWlnaHQsICh3LCBoKSA9PiB3IC8gKGggKiBoKSk7XG4gKiBibWkuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coJ0JNSSBpcyAnICsgeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZX1cbiAqIEBzZWUge0BsaW5rIHdpdGhMYXRlc3RGcm9tfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZTEgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb21iaW5lIHdpdGggdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZTIgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb21iaW5lIHdpdGggdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gcHJvamVjdCB0aGUgdmFsdWVzIGZyb21cbiAqIHRoZSBjb21iaW5lZCBsYXRlc3QgdmFsdWVzIGludG8gYSBuZXcgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIHN1YnNjcmliaW5nIHRvXG4gKiBlYWNoIGlucHV0IE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIHByb2plY3RlZCB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG4gKiBlYWNoIGlucHV0IE9ic2VydmFibGUuXG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIGNvbWJpbmVMYXRlc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVMYXRlc3RTdGF0aWMoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBwcm9qZWN0ID0gbnVsbDtcbiAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSkpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvamVjdCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcbiAgICAvLyBhc3N1bWUgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGBjb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgcHJvamVjdClgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcbiAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuY29tYmluZUxhdGVzdFN0YXRpYyA9IGNvbWJpbmVMYXRlc3RTdGF0aWM7XG52YXIgQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgIH1cbiAgICBDb21iaW5lTGF0ZXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gW107XG4gICAgICAgIHRoaXMudG9SZXNwb25kID0gW107XG4gICAgfVxuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG4gICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcbiAgICAgICAgdG9SZXNwb25kLnB1c2godG9SZXNwb25kLmxlbmd0aCk7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcbiAgICAgICAgaWYgKCh0aGlzLmFjdGl2ZSAtPSAxKSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXM7XG4gICAgICAgIHZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG4gICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcbiAgICAgICAgaWYgKHRvUmVzcG9uZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSB0b1Jlc3BvbmQuaW5kZXhPZihvdXRlckluZGV4KTtcbiAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0b1Jlc3BvbmQuc3BsaWNlKGZvdW5kLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QodmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuYXBwbHkodGhpcywgdmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5Db21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFycmF5WzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFycmF5T2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXksIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcbiAgICAgKiBpbW1lZGlhdGVseSBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBhbmQgdGhlbiBlbWl0cyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuICAgICAqIGJlIHVzZWQgZm9yIGNvbXBvc2luZyB3aXRoIG90aGVyIE9ic2VydmFibGVzLCBzdWNoIGFzIHdpdGgge0BsaW5rIGNvbmNhdH0uXG4gICAgICogQnkgZGVmYXVsdCwgaXQgdXNlcyBhIGBudWxsYCBTY2hlZHVsZXIsIHdoaWNoIG1lYW5zIHRoZSBgbmV4dGBcbiAgICAgKiBub3RpZmljYXRpb25zIGFyZSBzZW50IHN5bmNocm9ub3VzbHksIGFsdGhvdWdoIHdpdGggYSBkaWZmZXJlbnQgU2NoZWR1bGVyXG4gICAgICogaXQgaXMgcG9zc2libGUgdG8gZGV0ZXJtaW5lIHdoZW4gdGhvc2Ugbm90aWZpY2F0aW9ucyB3aWxsIGJlIGRlbGl2ZXJlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgMTAsIDIwLCAzMCwgdGhlbiAnYScsICdiJywgJ2MnLCB0aGVuIHN0YXJ0IHRpY2tpbmcgZXZlcnkgc2Vjb25kLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUub2YoMTAsIDIwLCAzMCk7XG4gICAgICogdmFyIGxldHRlcnMgPSBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpO1xuICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gICAgICogdmFyIHJlc3VsdCA9IG51bWJlcnMuY29uY2F0KGxldHRlcnMpLmNvbmNhdChpbnRlcnZhbCk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKiBAc2VlIHtAbGluayBlbXB0eX1cbiAgICAgKiBAc2VlIHtAbGluayBuZXZlcn1cbiAgICAgKiBAc2VlIHtAbGluayB0aHJvd31cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uVH0gdmFsdWVzIEFyZ3VtZW50cyB0aGF0IHJlcHJlc2VudCBgbmV4dGAgdmFsdWVzIHRvIGJlIGVtaXR0ZWQuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9ucyBvZiB0aGUgYG5leHRgIG5vdGlmaWNhdGlvbnMuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgb2ZcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEFycmF5T2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NoZWR1bGVyID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHN0YXRlLmFycmF5LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2luZGV4XSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuICAgIH07XG4gICAgQXJyYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTtcbiAgICAgICAgdmFyIGNvdW50ID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoQXJyYXlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgYXJyYXk6IGFycmF5LCBpbmRleDogaW5kZXgsIGNvdW50OiBjb3VudCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50ICYmICFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5BcnJheU9ic2VydmFibGUgPSBBcnJheU9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFNjYWxhck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTY2FsYXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgIH1cbiAgICBTY2FsYXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIFNjYWxhck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBzdGF0ZS5kb25lLCB2YWx1ZSA9IHN0YXRlLnZhbHVlLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmRvbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIFNjYWxhck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNjYWxhck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLlNjYWxhck9ic2VydmFibGUgPSBTY2FsYXJPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2NhbGFyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvU2NhbGFyT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtcHR5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICAgICAqIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIG9ubHkgb2RkIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYyc8L2NhcHRpb24+XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICAgICAqICAgeCAlIDIgPT09IDEgPyBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG4gICAgICogKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIG9mfVxuICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9uIG9mIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG4gICAgICogbm90aWZpY2F0aW9uLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGVtcHR5XG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBFbXB0eU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBFbXB0eU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkVtcHR5T2JzZXJ2YWJsZSA9IEVtcHR5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5T2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzM2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzU2NoZWR1bGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zY2hlZHVsZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNTY2hlZHVsZXIgPSBpc1NjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2NoZWR1bGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9pc1NjaGVkdWxlci5qc1xuICoqIG1vZHVsZSBpZCA9IDMzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgT3V0ZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT3V0ZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE91dGVyU3Vic2NyaWJlcigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIE91dGVyU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuT3V0ZXJTdWJzY3JpYmVyID0gT3V0ZXJTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3V0ZXJTdWJzY3JpYmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvT3V0ZXJTdWJzY3JpYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3Jvb3QnKTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuL2lzQXJyYXknKTtcbnZhciBpc1Byb21pc2VfMSA9IHJlcXVpcmUoJy4vaXNQcm9taXNlJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIGl0ZXJhdG9yXzEgPSByZXF1aXJlKCcuLi9zeW1ib2wvaXRlcmF0b3InKTtcbnZhciBJbm5lclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL0lubmVyU3Vic2NyaWJlcicpO1xudmFyICQkb2JzZXJ2YWJsZSA9IHJlcXVpcmUoJ3N5bWJvbC1vYnNlcnZhYmxlJyk7XG5mdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KTtcbiAgICBpZiAoZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5faXNTY2FsYXIpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShkZXN0aW5hdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlc3VsdC5sZW5ndGg7IGkgPCBsZW4gJiYgIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkOyBpKyspIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUHJvbWlzZV8xLmlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGRlc3RpbmF0aW9uLmVycm9yKGVycik7IH0pXG4gICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAvLyBFc2NhcGluZyB0aGUgUHJvbWlzZSB0cmFwOiBnbG9iYWxseSB0aHJvdyB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgICAgICByb290XzEucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSByZXN1bHQ7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbSk7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRbJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgb2JzID0gcmVzdWx0WyQkb2JzZXJ2YWJsZV0oKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnMuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcignaW52YWxpZCBvYnNlcnZhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzLnN1YnNjcmliZShuZXcgSW5uZXJTdWJzY3JpYmVyXzEuSW5uZXJTdWJzY3JpYmVyKG91dGVyU3Vic2NyaWJlciwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgVHlwZUVycm9yKCd1bmtub3duIHR5cGUgcmV0dXJuZWQnKSk7XG4gICAgfVxufVxuZXhwb3J0cy5zdWJzY3JpYmVUb1Jlc3VsdCA9IHN1YnNjcmliZVRvUmVzdWx0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9SZXN1bHQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0LmpzXG4gKiogbW9kdWxlIGlkID0gMzM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzUHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc1Byb21pc2UgPSBpc1Byb21pc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc1Byb21pc2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2lzUHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9yb290Jyk7XG52YXIgU3ltYm9sID0gcm9vdF8xLnJvb3QuU3ltYm9sO1xuaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoU3ltYm9sLml0ZXJhdG9yKSB7XG4gICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9IFN5bWJvbC5pdGVyYXRvcjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIFN5bWJvbC5mb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gU3ltYm9sLmZvcignaXRlcmF0b3InKTtcbiAgICB9XG59XG5lbHNlIHtcbiAgICBpZiAocm9vdF8xLnJvb3QuU2V0ICYmIHR5cGVvZiBuZXcgcm9vdF8xLnJvb3QuU2V0KClbJ0BAaXRlcmF0b3InXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBCdWcgZm9yIG1vemlsbGEgdmVyc2lvblxuICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSAnQEBpdGVyYXRvcic7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvb3RfMS5yb290Lk1hcCkge1xuICAgICAgICAvLyBlczYtc2hpbSBzcGVjaWZpYyBsb2dpY1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJvb3RfMS5yb290Lk1hcC5wcm90b3R5cGUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2VudHJpZXMnICYmIGtleSAhPT0gJ3NpemUnICYmIHJvb3RfMS5yb290Lk1hcC5wcm90b3R5cGVba2V5XSA9PT0gcm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZVsnZW50cmllcyddKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0ga2V5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSAnQEBpdGVyYXRvcic7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmF0b3IuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zeW1ib2wvaXRlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElubmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKElubmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJbm5lclN1YnNjcmliZXIocGFyZW50LCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5vdXRlclZhbHVlID0gb3V0ZXJWYWx1ZTtcbiAgICAgICAgdGhpcy5vdXRlckluZGV4ID0gb3V0ZXJJbmRleDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5TmV4dCh0aGlzLm91dGVyVmFsdWUsIHZhbHVlLCB0aGlzLm91dGVySW5kZXgsIHRoaXMuaW5kZXgrKywgdGhpcyk7XG4gICAgfTtcbiAgICBJbm5lclN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlFcnJvcihlcnJvciwgdGhpcyk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlDb21wbGV0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIElubmVyU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuSW5uZXJTdWJzY3JpYmVyID0gSW5uZXJTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZXJTdWJzY3JpYmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvSW5uZXJTdWJzY3JpYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29uY2F0XzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2NvbmNhdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuY29uY2F0ID0gY29uY2F0XzEuY29uY2F0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvY29uY2F0LmpzXG4gKiogbW9kdWxlIGlkID0gMzQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBjb25jYXRfMSA9IHJlcXVpcmUoJy4uL29wZXJhdG9yL2NvbmNhdCcpO1xuZXhwb3J0cy5jb25jYXQgPSBjb25jYXRfMS5jb25jYXRTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2NvbmNhdC5qc1xuICoqIG1vZHVsZSBpZCA9IDM0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgbWVyZ2VBbGxfMSA9IHJlcXVpcmUoJy4vbWVyZ2VBbGwnKTtcbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgT2JzZXJ2YWJsZSB3aGljaCBzZXF1ZW50aWFsbHkgZW1pdHMgYWxsIHZhbHVlcyBmcm9tIGV2ZXJ5XG4gKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIGFmdGVyIHRoZSBjdXJyZW50IE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbmNhdGVuYXRlcyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0b2dldGhlciBieVxuICogc2VxdWVudGlhbGx5IGVtaXR0aW5nIHRoZWlyIHZhbHVlcywgb25lIE9ic2VydmFibGUgYWZ0ZXIgdGhlIG90aGVyLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBKb2lucyB0aGlzIE9ic2VydmFibGUgd2l0aCBtdWx0aXBsZSBvdGhlciBPYnNlcnZhYmxlcyBieSBzdWJzY3JpYmluZyB0byB0aGVtXG4gKiBvbmUgYXQgYSB0aW1lLCBzdGFydGluZyB3aXRoIHRoZSBzb3VyY2UsIGFuZCBtZXJnaW5nIHRoZWlyIHJlc3VsdHMgaW50byB0aGVcbiAqIG91dHB1dCBPYnNlcnZhYmxlLiBXaWxsIHdhaXQgZm9yIGVhY2ggT2JzZXJ2YWJsZSB0byBjb21wbGV0ZSBiZWZvcmUgbW92aW5nXG4gKiBvbiB0byB0aGUgbmV4dC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSBhIHRpbWVyIGNvdW50aW5nIGZyb20gMCB0byAzIHdpdGggYSBzeW5jaHJvbm91cyBzZXF1ZW5jZSBmcm9tIDEgdG8gMTA8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCk7XG4gKiB2YXIgc2VxdWVuY2UgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDEwKTtcbiAqIHZhciByZXN1bHQgPSB0aW1lci5jb25jYXQoc2VxdWVuY2UpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSAzIE9ic2VydmFibGVzPC9jYXB0aW9uPlxuICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG4gKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcbiAqIHZhciByZXN1bHQgPSB0aW1lcjEuY29uY2F0KHRpbWVyMiwgdGltZXIzKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIGFmdGVyIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gQW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHNjaGVkdWxlIGVhY2hcbiAqIE9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQWxsIHZhbHVlcyBvZiBlYWNoIHBhc3NlZCBPYnNlcnZhYmxlIG1lcmdlZCBpbnRvIGFcbiAqIHNpbmdsZSBPYnNlcnZhYmxlLCBpbiBvcmRlciwgaW4gc2VyaWFsIGZhc2hpb24uXG4gKiBAbWV0aG9kIGNvbmNhdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29uY2F0KCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gY29uY2F0U3RhdGljLmFwcGx5KHZvaWQgMCwgW3RoaXNdLmNvbmNhdChvYnNlcnZhYmxlcykpO1xufVxuZXhwb3J0cy5jb25jYXQgPSBjb25jYXQ7XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIHNlcXVlbnRpYWxseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcbiAqIGdpdmVuIGlucHV0IE9ic2VydmFibGUgYWZ0ZXIgdGhlIGN1cnJlbnQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29uY2F0ZW5hdGVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5XG4gKiBzZXF1ZW50aWFsbHkgZW1pdHRpbmcgdGhlaXIgdmFsdWVzLCBvbmUgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEpvaW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IHN1YnNjcmliaW5nIHRvIHRoZW0gb25lIGF0IGEgdGltZSBhbmRcbiAqIG1lcmdpbmcgdGhlaXIgcmVzdWx0cyBpbnRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gV2lsbCB3YWl0IGZvciBlYWNoXG4gKiBPYnNlcnZhYmxlIHRvIGNvbXBsZXRlIGJlZm9yZSBtb3Zpbmcgb24gdG8gdGhlIG5leHQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q29uY2F0ZW5hdGUgYSB0aW1lciBjb3VudGluZyBmcm9tIDAgdG8gMyB3aXRoIGEgc3luY2hyb25vdXMgc2VxdWVuY2UgZnJvbSAxIHRvIDEwPC9jYXB0aW9uPlxuICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpO1xuICogdmFyIHNlcXVlbmNlID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG4gKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5jb25jYXQodGltZXIsIHNlcXVlbmNlKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q29uY2F0ZW5hdGUgMyBPYnNlcnZhYmxlczwvY2FwdGlvbj5cbiAqIHZhciB0aW1lcjEgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApO1xuICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcbiAqIHZhciB0aW1lcjMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkudGFrZSgxMCk7XG4gKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5jb25jYXQodGltZXIxLCB0aW1lcjIsIHRpbWVyMyk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQxIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgd2l0aCBvdGhlcnMuXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MiBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIHdpdGggb3RoZXJzLlxuICogTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBBbiBvcHRpb25hbCBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgZWFjaFxuICogT2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbGwgdmFsdWVzIG9mIGVhY2ggcGFzc2VkIE9ic2VydmFibGUgbWVyZ2VkIGludG8gYVxuICogc2luZ2xlIE9ic2VydmFibGUsIGluIG9yZGVyLCBpbiBzZXJpYWwgZmFzaGlvbi5cbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgY29uY2F0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb25jYXRTdGF0aWMoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuICAgIHZhciBhcmdzID0gb2JzZXJ2YWJsZXM7XG4gICAgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoYXJnc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSkpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gYXJncy5wb3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKDEpKTtcbn1cbmV4cG9ydHMuY29uY2F0U3RhdGljID0gY29uY2F0U3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0LmpzXG4gKiogbW9kdWxlIGlkID0gMzQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSB3aGljaFxuICogY29uY3VycmVudGx5IGRlbGl2ZXJzIGFsbCB2YWx1ZXMgdGhhdCBhcmUgZW1pdHRlZCBvbiB0aGUgaW5uZXIgT2JzZXJ2YWJsZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2VBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYG1lcmdlQWxsYCBzdWJzY3JpYmVzIHRvIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBPYnNlcnZhYmxlcywgYWxzbyBrbm93biBhc1xuICogYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZS4gRWFjaCB0aW1lIGl0IG9ic2VydmVzIG9uZSBvZiB0aGVzZSBlbWl0dGVkIGlubmVyXG4gKiBPYnNlcnZhYmxlcywgaXQgc3Vic2NyaWJlcyB0byB0aGF0IGFuZCBkZWxpdmVycyBhbGwgdGhlIHZhbHVlcyBmcm9tIHRoZVxuICogaW5uZXIgT2JzZXJ2YWJsZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5XG4gKiBjb21wbGV0ZXMgb25jZSBhbGwgaW5uZXIgT2JzZXJ2YWJsZXMgaGF2ZSBjb21wbGV0ZWQuIEFueSBlcnJvciBkZWxpdmVyZWQgYnlcbiAqIGEgaW5uZXIgT2JzZXJ2YWJsZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlNwYXduIGEgbmV3IGludGVydmFsIE9ic2VydmFibGUgZm9yIGVhY2ggY2xpY2sgZXZlbnQsIGFuZCBibGVuZCB0aGVpciBvdXRwdXRzIGFzIG9uZSBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIubWVyZ2VBbGwoKTtcbiAqIGZpcnN0T3JkZXIuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50IGZyb20gMCB0byA5IGV2ZXJ5IHNlY29uZCBmb3IgZWFjaCBjbGljaywgYnV0IG9ubHkgYWxsb3cgMiBjb25jdXJyZW50IHRpbWVyczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKSk7XG4gKiB2YXIgZmlyc3RPcmRlciA9IGhpZ2hlck9yZGVyLm1lcmdlQWxsKDIpO1xuICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cbiAqIEBzZWUge0BsaW5rIGV4aGF1c3R9XG4gKiBAc2VlIHtAbGluayBtZXJnZX1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cbiAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaH1cbiAqIEBzZWUge0BsaW5rIHppcEFsbH1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbm5lclxuICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdmFsdWVzIGNvbWluZyBmcm9tIGFsbCB0aGVcbiAqIGlubmVyIE9ic2VydmFibGVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBtZXJnZUFsbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2VBbGwoY29uY3VycmVudCkge1xuICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1lcmdlQWxsT3BlcmF0b3IoY29uY3VycmVudCkpO1xufVxuZXhwb3J0cy5tZXJnZUFsbCA9IG1lcmdlQWxsO1xudmFyIE1lcmdlQWxsT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lcmdlQWxsT3BlcmF0b3IoY29uY3VycmVudCkge1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgIH1cbiAgICBNZXJnZUFsbE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNZXJnZUFsbFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMuY29uY3VycmVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlQWxsT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5NZXJnZUFsbE9wZXJhdG9yID0gTWVyZ2VBbGxPcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWVyZ2VBbGxTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVyZ2VBbGxTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1lcmdlQWxsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29uY3VycmVudCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICB9XG4gICAgTWVyZ2VBbGxTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUrKztcbiAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb2JzZXJ2YWJsZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChvYnNlcnZhYmxlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VBbGxTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNZXJnZUFsbFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5NZXJnZUFsbFN1YnNjcmliZXIgPSBNZXJnZUFsbFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21lcmdlQWxsLmpzXG4gKiogbW9kdWxlIGlkID0gMzQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVmZXJfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZGVmZXInKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmRlZmVyID0gZGVmZXJfMS5kZWZlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZGVmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIERlZmVyT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9EZWZlck9ic2VydmFibGUnKTtcbmV4cG9ydHMuZGVmZXIgPSBEZWZlck9ic2VydmFibGVfMS5EZWZlck9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2RlZmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIERlZmVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERlZmVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZUZhY3RvcnkgPSBvYnNlcnZhYmxlRmFjdG9yeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQsIG9uIHN1YnNjcmliZSwgY2FsbHMgYW4gT2JzZXJ2YWJsZSBmYWN0b3J5IHRvXG4gICAgICogbWFrZSBhbiBPYnNlcnZhYmxlIGZvciBlYWNoIG5ldyBPYnNlcnZlci5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5DcmVhdGVzIHRoZSBPYnNlcnZhYmxlIGxhemlseSwgdGhhdCBpcywgb25seSB3aGVuIGl0XG4gICAgICogaXMgc3Vic2NyaWJlZC5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogYGRlZmVyYCBhbGxvd3MgeW91IHRvIGNyZWF0ZSB0aGUgT2JzZXJ2YWJsZSBvbmx5IHdoZW4gdGhlIE9ic2VydmVyXG4gICAgICogc3Vic2NyaWJlcywgYW5kIGNyZWF0ZSBhIGZyZXNoIE9ic2VydmFibGUgZm9yIGVhY2ggT2JzZXJ2ZXIuIEl0IHdhaXRzIHVudGlsXG4gICAgICogYW4gT2JzZXJ2ZXIgc3Vic2NyaWJlcyB0byBpdCwgYW5kIHRoZW4gaXQgZ2VuZXJhdGVzIGFuIE9ic2VydmFibGUsXG4gICAgICogdHlwaWNhbGx5IHdpdGggYW4gT2JzZXJ2YWJsZSBmYWN0b3J5IGZ1bmN0aW9uLiBJdCBkb2VzIHRoaXMgYWZyZXNoIGZvciBlYWNoXG4gICAgICogc3Vic2NyaWJlciwgc28gYWx0aG91Z2ggZWFjaCBzdWJzY3JpYmVyIG1heSB0aGluayBpdCBpcyBzdWJzY3JpYmluZyB0byB0aGVcbiAgICAgKiBzYW1lIE9ic2VydmFibGUsIGluIGZhY3QgZWFjaCBzdWJzY3JpYmVyIGdldHMgaXRzIG93biBpbmRpdmlkdWFsXG4gICAgICogT2JzZXJ2YWJsZS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPlN1YnNjcmliZSB0byBlaXRoZXIgYW4gT2JzZXJ2YWJsZSBvZiBjbGlja3Mgb3IgYW4gT2JzZXJ2YWJsZSBvZiBpbnRlcnZhbCwgYXQgcmFuZG9tPC9jYXB0aW9uPlxuICAgICAqIHZhciBjbGlja3NPckludGVydmFsID0gUnguT2JzZXJ2YWJsZS5kZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICogICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAqICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICAgICAqICAgfSBlbHNlIHtcbiAgICAgKiAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogY2xpY2tzT3JJbnRlcnZhbC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IE9ic2VydmFibGV8UHJvbWlzZX0gb2JzZXJ2YWJsZUZhY3RvcnkgVGhlIE9ic2VydmFibGVcbiAgICAgKiBmYWN0b3J5IGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBPYnNlcnZlciB0aGF0IHN1YnNjcmliZXMgdG8gdGhlIG91dHB1dFxuICAgICAqIE9ic2VydmFibGUuIE1heSBhbHNvIHJldHVybiBhIFByb21pc2UsIHdoaWNoIHdpbGwgYmUgY29udmVydGVkIG9uIHRoZSBmbHlcbiAgICAgKiB0byBhbiBPYnNlcnZhYmxlLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgd2hvc2UgT2JzZXJ2ZXJzJyBzdWJzY3JpcHRpb25zIHRyaWdnZXJcbiAgICAgKiBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZGVmZXJcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIERlZmVyT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAob2JzZXJ2YWJsZUZhY3RvcnkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpO1xuICAgIH07XG4gICAgRGVmZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlRmFjdG9yeSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVmZXJPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5EZWZlck9ic2VydmFibGUgPSBEZWZlck9ic2VydmFibGU7XG52YXIgRGVmZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVmZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlZmVyU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZmFjdG9yeSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgICAgIHRoaXMudHJ5RGVmZXIoKTtcbiAgICB9XG4gICAgRGVmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEZWZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX2NhbGxGYWN0b3J5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY2FsbEZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmZhY3RvcnkoKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXN1bHQpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERlZmVyU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZlck9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0RlZmVyT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGVtcHR5XzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2VtcHR5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5lbXB0eSA9IGVtcHR5XzEuZW1wdHk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbXB0eS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2VtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gMzUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmVtcHR5ID0gRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtcHR5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9lbXB0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZvcmtKb2luXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2ZvcmtKb2luJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mb3JrSm9pbiA9IGZvcmtKb2luXzEuZm9ya0pvaW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mb3JrSm9pbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzXG4gKiogbW9kdWxlIGlkID0gMzUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGb3JrSm9pbk9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRm9ya0pvaW5PYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZvcmtKb2luID0gRm9ya0pvaW5PYnNlcnZhYmxlXzEuRm9ya0pvaW5PYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvcmtKb2luLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mb3JrSm9pbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0VtcHR5T2JzZXJ2YWJsZScpO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRm9ya0pvaW5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRm9ya0pvaW5PYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZvcmtKb2luT2JzZXJ2YWJsZShzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc291cmNlc1xuICAgICAqIEByZXR1cm4ge2FueX1cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBmb3JrSm9pblxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRm9ya0pvaW5PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHNvdXJjZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZXMgPT09IG51bGwgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZXNbc291cmNlcy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBzb3VyY2VzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBmaXJzdCBhbmQgb25seSBvdGhlciBhcmd1bWVudCBiZXNpZGVzIHRoZSByZXN1bHRTZWxlY3RvciBpcyBhbiBhcnJheVxuICAgICAgICAvLyBhc3N1bWUgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGBmb3JrSm9pbihbb2JzMSwgb2JzMiwgb2JzM10sIHJlc3VsdFNlbGVjdG9yKWBcbiAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KHNvdXJjZXNbMF0pKSB7XG4gICAgICAgICAgICBzb3VyY2VzID0gc291cmNlc1swXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pbk9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpO1xuICAgIH07XG4gICAgRm9ya0pvaW5PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zb3VyY2VzLCB0aGlzLnJlc3VsdFNlbGVjdG9yKTtcbiAgICB9O1xuICAgIHJldHVybiBGb3JrSm9pbk9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkZvcmtKb2luT2JzZXJ2YWJsZSA9IEZvcmtKb2luT2JzZXJ2YWJsZTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRm9ya0pvaW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRm9ya0pvaW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZvcmtKb2luU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gMDtcbiAgICAgICAgdGhpcy5oYXZlVmFsdWVzID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHNvdXJjZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLnRvdGFsID0gbGVuO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpXTtcbiAgICAgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgc291cmNlLCBudWxsLCBpKTtcbiAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLm91dGVySW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuICAgICAgICBpZiAoIWlubmVyU3ViLl9oYXNWYWx1ZSkge1xuICAgICAgICAgICAgaW5uZXJTdWIuX2hhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGF2ZVZhbHVlcysrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGhhdmVWYWx1ZXMgPSBfYS5oYXZlVmFsdWVzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCB2YWx1ZXMgPSBfYS52YWx1ZXM7XG4gICAgICAgIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgICAgICBpZiAoIWlubmVyU3ViLl9oYXNWYWx1ZSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBsZXRlZCsrO1xuICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWQgIT09IGxlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXZlVmFsdWVzID09PSBsZW4pIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdFNlbGVjdG9yID8gcmVzdWx0U2VsZWN0b3IuYXBwbHkodGhpcywgdmFsdWVzKSA6IHZhbHVlcztcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gRm9ya0pvaW5TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvcmtKb2luT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRm9ya0pvaW5PYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZnJvbV8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tID0gZnJvbV8xLmZyb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRnJvbU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRnJvbU9ic2VydmFibGUnKTtcbmV4cG9ydHMuZnJvbSA9IEZyb21PYnNlcnZhYmxlXzEuRnJvbU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZnJvbS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbnZhciBpc0Z1bmN0aW9uXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzRnVuY3Rpb24nKTtcbnZhciBpc1Byb21pc2VfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNQcm9taXNlJyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbnZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Qcm9taXNlT2JzZXJ2YWJsZScpO1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9JdGVyYXRvck9ic2VydmFibGUnKTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9BcnJheUxpa2VPYnNlcnZhYmxlJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBvYnNlcnZlT25fMSA9IHJlcXVpcmUoJy4uL29wZXJhdG9yL29ic2VydmVPbicpO1xudmFyICQkb2JzZXJ2YWJsZSA9IHJlcXVpcmUoJ3N5bWJvbC1vYnNlcnZhYmxlJyk7XG52YXIgaXNBcnJheUxpa2UgPSAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJzsgfSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG4gICAgICAgIHRoaXMuaXNoID0gaXNoO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGZyb20gYW4gQXJyYXksIGFuIGFycmF5LWxpa2Ugb2JqZWN0LCBhIFByb21pc2UsIGFuXG4gICAgICogaXRlcmFibGUgb2JqZWN0LCBvciBhbiBPYnNlcnZhYmxlLWxpa2Ugb2JqZWN0LlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFsbW9zdCBhbnl0aGluZyB0byBhbiBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIENvbnZlcnQgdmFyaW91cyBvdGhlciBvYmplY3RzIGFuZCBkYXRhIHR5cGVzIGludG8gT2JzZXJ2YWJsZXMuIGBmcm9tYFxuICAgICAqIGNvbnZlcnRzIGEgUHJvbWlzZSBvciBhbiBhcnJheS1saWtlIG9yIGFuXG4gICAgICogW2l0ZXJhYmxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9JdGVyYXRpb25fcHJvdG9jb2xzI2l0ZXJhYmxlKVxuICAgICAqIG9iamVjdCBpbnRvIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgaXRlbXMgaW4gdGhhdCBwcm9taXNlIG9yIGFycmF5IG9yXG4gICAgICogaXRlcmFibGUuIEEgU3RyaW5nLCBpbiB0aGlzIGNvbnRleHQsIGlzIHRyZWF0ZWQgYXMgYW4gYXJyYXkgb2YgY2hhcmFjdGVycy5cbiAgICAgKiBPYnNlcnZhYmxlLWxpa2Ugb2JqZWN0cyAoY29udGFpbnMgYSBmdW5jdGlvbiBuYW1lZCB3aXRoIHRoZSBFUzIwMTUgU3ltYm9sXG4gICAgICogZm9yIE9ic2VydmFibGUpIGNhbiBhbHNvIGJlIGNvbnZlcnRlZCB0aHJvdWdoIHRoaXMgb3BlcmF0b3IuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db252ZXJ0cyBhbiBhcnJheSB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIHZhciBhcnJheSA9IFsxMCwgMjAsIDMwXTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5mcm9tKGFycmF5KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q29udmVydCBhbiBpbmZpbml0ZSBpdGVyYWJsZSAoZnJvbSBhIGdlbmVyYXRvcikgdG8gYW4gT2JzZXJ2YWJsZTwvY2FwdGlvbj5cbiAgICAgKiBmdW5jdGlvbiogZ2VuZXJhdGVEb3VibGVzKHNlZWQpIHtcbiAgICAgKiAgIHZhciBpID0gc2VlZDtcbiAgICAgKiAgIHdoaWxlICh0cnVlKSB7XG4gICAgICogICAgIHlpZWxkIGk7XG4gICAgICogICAgIGkgPSAyICogaTsgLy8gZG91YmxlIGl0XG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGl0ZXJhdG9yID0gZ2VuZXJhdGVEb3VibGVzKDMpO1xuICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmZyb20oaXRlcmF0b3IpLnRha2UoMTApO1xuICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50fVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudFBhdHRlcm59XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbVByb21pc2V9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09ic2VydmFibGVJbnB1dDxUPn0gaXNoIEEgc3Vic2NyaWJhYmxlIG9iamVjdCwgYSBQcm9taXNlLCBhblxuICAgICAqIE9ic2VydmFibGUtbGlrZSwgYW4gQXJyYXksIGFuIGl0ZXJhYmxlIG9yIGFuIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGJlXG4gICAgICogY29udmVydGVkLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oeDogYW55LCBpOiBudW1iZXIpOiBUfSBbbWFwRm5dIEEgXCJtYXBcIiBmdW5jdGlvbiB0byBjYWxsXG4gICAgICogd2hlbiBjb252ZXJ0aW5nIGFycmF5LWxpa2Ugb2JqZWN0cywgd2hlcmUgYHhgIGlzIGEgdmFsdWUgZnJvbSB0aGVcbiAgICAgKiBhcnJheS1saWtlIGFuZCBgaWAgaXMgdGhlIGluZGV4IG9mIHRoYXQgdmFsdWUgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gVGhlIGNvbnRleHQgb2JqZWN0IHRvIHVzZSB3aGVuIGNhbGxpbmcgdGhlIGBtYXBGbmAsXG4gICAgICogaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG4gICAgICogZW1pc3Npb25zIG9mIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBUaGUgT2JzZXJ2YWJsZSB3aG9zZSB2YWx1ZXMgYXJlIG9yaWdpbmFsbHkgZnJvbSB0aGVcbiAgICAgKiBpbnB1dCBvYmplY3QgdGhhdCB3YXMgY29udmVydGVkLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGZyb21cbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEZyb21PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpc2gsIG1hcEZuT3JTY2hlZHVsZXIsIHRoaXNBcmcsIGxhc3RTY2hlZHVsZXIpIHtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IG51bGw7XG4gICAgICAgIHZhciBtYXBGbiA9IG51bGw7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihtYXBGbk9yU2NoZWR1bGVyKSkge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gbGFzdFNjaGVkdWxlciB8fCBudWxsO1xuICAgICAgICAgICAgbWFwRm4gPSBtYXBGbk9yU2NoZWR1bGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSkge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gbWFwRm5PclNjaGVkdWxlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNoWyQkb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNoIGluc3RhbmNlb2YgT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUgJiYgIXNjaGVkdWxlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZyb21PYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlfMS5pc0FycmF5KGlzaCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UoaXNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZU9ic2VydmFibGVfMS5Qcm9taXNlT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXNoW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGlzaCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yT2JzZXJ2YWJsZV8xLkl0ZXJhdG9yT2JzZXJ2YWJsZShpc2gsIG51bGwsIG51bGwsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5TGlrZShpc2gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlXzEuQXJyYXlMaWtlT2JzZXJ2YWJsZShpc2gsIG1hcEZuLCB0aGlzQXJnLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKGlzaCAhPT0gbnVsbCAmJiB0eXBlb2YgaXNoIHx8IGlzaCkgKyAnIGlzIG5vdCBvYnNlcnZhYmxlJyk7XG4gICAgfTtcbiAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpc2ggPSB0aGlzLmlzaDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpc2hbJCRvYnNlcnZhYmxlXSgpLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpc2hbJCRvYnNlcnZhYmxlXSgpLnN1YnNjcmliZShuZXcgb2JzZXJ2ZU9uXzEuT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzY2hlZHVsZXIsIDApKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZyb21PYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Gcm9tT2JzZXJ2YWJsZSA9IEZyb21PYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIGlzT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzT2JqZWN0Jyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgaXNGdW5jdGlvbl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0Z1bmN0aW9uJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEl0ZXJhdG9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJdGVyYXRvck9ic2VydmFibGUoaXRlcmF0b3IsIHByb2plY3QsIHRoaXNBcmcsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKGl0ZXJhdG9yID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmF0b3IgY2Fubm90IGJlIG51bGwuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0XzEuaXNPYmplY3QocHJvamVjdCkpIHtcbiAgICAgICAgICAgIHRoaXMudGhpc0FyZyA9IHByb2plY3Q7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHRoaXNBcmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbl8xLmlzRnVuY3Rpb24ocHJvamVjdCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvamVjdCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gcHJvdmlkZWQsIGBwcm9qZWN0YCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pdGVyYXRvciA9IGdldEl0ZXJhdG9yKGl0ZXJhdG9yKTtcbiAgICB9XG4gICAgSXRlcmF0b3JPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpdGVyYXRvciwgcHJvamVjdCwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlKGl0ZXJhdG9yLCBwcm9qZWN0LCB0aGlzQXJnLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgSXRlcmF0b3JPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YXRlLmluZGV4LCBoYXNFcnJvciA9IHN0YXRlLmhhc0Vycm9yLCB0aGlzQXJnID0gc3RhdGUudGhpc0FyZywgcHJvamVjdCA9IHN0YXRlLnByb2plY3QsIGl0ZXJhdG9yID0gc3RhdGUuaXRlcmF0b3IsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoaGFzRXJyb3IpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3Ioc3RhdGUuZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHByb2plY3QpLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG4gICAgICAgICAgICAgICAgc3RhdGUuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBJdGVyYXRvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBpdGVyYXRvciA9IF9hLml0ZXJhdG9yLCBwcm9qZWN0ID0gX2EucHJvamVjdCwgdGhpc0FyZyA9IF9hLnRoaXNBcmcsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShJdGVyYXRvck9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsIHRoaXNBcmc6IHRoaXNBcmcsIHByb2plY3Q6IHByb2plY3QsIGl0ZXJhdG9yOiBpdGVyYXRvciwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHByb2plY3QpLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCBpbmRleCsrKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJdGVyYXRvck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkl0ZXJhdG9yT2JzZXJ2YWJsZSA9IEl0ZXJhdG9yT2JzZXJ2YWJsZTtcbnZhciBTdHJpbmdJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Ioc3RyLCBpZHgsIGxlbikge1xuICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gc3RyLmxlbmd0aDsgfVxuICAgICAgICB0aGlzLnN0ciA9IHN0cjtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xuICAgIH1cbiAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzKTsgfTtcbiAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0ci5jaGFyQXQodGhpcy5pZHgrKylcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gU3RyaW5nSXRlcmF0b3I7XG59KCkpO1xudmFyIEFycmF5SXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFycmF5SXRlcmF0b3IoYXJyLCBpZHgsIGxlbikge1xuICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gdG9MZW5ndGgoYXJyKTsgfVxuICAgICAgICB0aGlzLmFyciA9IGFycjtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xuICAgIH1cbiAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbiAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZHggPCB0aGlzLmxlbiA/IHtcbiAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuYXJyW3RoaXMuaWR4KytdXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIEFycmF5SXRlcmF0b3I7XG59KCkpO1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3Iob2JqKSB7XG4gICAgdmFyIGkgPSBvYmpbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXTtcbiAgICBpZiAoIWkgJiYgdHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdJdGVyYXRvcihvYmopO1xuICAgIH1cbiAgICBpZiAoIWkgJiYgb2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcihvYmopO1xuICAgIH1cbiAgICBpZiAoIWkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0oKTtcbn1cbnZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5mdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkge1xuICAgICAgICByZXR1cm4gbGVuO1xuICAgIH1cbiAgICBsZW4gPSBzaWduKGxlbikgKiBNYXRoLmZsb29yKE1hdGguYWJzKGxlbikpO1xuICAgIGlmIChsZW4gPD0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYXhTYWZlSW50ZWdlcjtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbn1cbmZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdF8xLnJvb3QuaXNGaW5pdGUodmFsdWUpO1xufVxuZnVuY3Rpb24gc2lnbih2YWx1ZSkge1xuICAgIHZhciB2YWx1ZUFzTnVtYmVyID0gK3ZhbHVlO1xuICAgIGlmICh2YWx1ZUFzTnVtYmVyID09PSAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4odmFsdWVBc051bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyIDwgMCA/IC0xIDogMTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUl0ZXJhdG9yT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvSXRlcmF0b3JPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1NjYWxhck9ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEFycmF5TGlrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheUxpa2VPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5TGlrZSA9IGFycmF5TGlrZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghbWFwRm4gJiYgIXNjaGVkdWxlciAmJiBhcnJheUxpa2UubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gYXJyYXlMaWtlWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXBGbikge1xuICAgICAgICAgICAgdGhpcy5tYXBGbiA9IG1hcEZuLmJpbmQodGhpc0FyZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA9PT0gMSAmJiAhbWFwRm4pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGFycmF5TGlrZSA9IHN0YXRlLmFycmF5TGlrZSwgaW5kZXggPSBzdGF0ZS5pbmRleCwgbGVuZ3RoID0gc3RhdGUubGVuZ3RoLCBtYXBGbiA9IHN0YXRlLm1hcEZuLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2luZGV4XSwgaW5kZXgpIDogYXJyYXlMaWtlW2luZGV4XTtcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIEFycmF5TGlrZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBhcnJheUxpa2UgPSBfYS5hcnJheUxpa2UsIG1hcEZuID0gX2EubWFwRm4sIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoQXJyYXlMaWtlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGFycmF5TGlrZTogYXJyYXlMaWtlLCBpbmRleDogaW5kZXgsIGxlbmd0aDogbGVuZ3RoLCBtYXBGbjogbWFwRm4sIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBtYXBGbiA/IG1hcEZuKGFycmF5TGlrZVtpXSwgaSkgOiBhcnJheUxpa2VbaV07XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBcnJheUxpa2VPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5BcnJheUxpa2VPYnNlcnZhYmxlID0gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5TGlrZU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0FycmF5TGlrZU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIE5vdGlmaWNhdGlvbl8xID0gcmVxdWlyZSgnLi4vTm90aWZpY2F0aW9uJyk7XG4vKipcbiAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cbiAqXG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcGFyYW0gZGVsYXlcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCBvYnNlcnZlT25cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG9ic2VydmVPbihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgT2JzZXJ2ZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkpO1xufVxuZXhwb3J0cy5vYnNlcnZlT24gPSBvYnNlcnZlT247XG52YXIgT2JzZXJ2ZU9uT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgfVxuICAgIE9ic2VydmVPbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZlT25PcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmVPbk9wZXJhdG9yID0gT2JzZXJ2ZU9uT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE9ic2VydmVPblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYnNlcnZlT25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICB9XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGFyZy5ub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uID0gYXJnLmRlc3RpbmF0aW9uO1xuICAgICAgICBub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgfTtcbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU1lc3NhZ2UgPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKE9ic2VydmVPblN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIG5ldyBPYnNlcnZlT25NZXNzYWdlKG5vdGlmaWNhdGlvbiwgdGhpcy5kZXN0aW5hdGlvbikpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvcihlcnIpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmVPblN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5leHBvcnRzLk9ic2VydmVPblN1YnNjcmliZXIgPSBPYnNlcnZlT25TdWJzY3JpYmVyO1xudmFyIE9ic2VydmVPbk1lc3NhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gT2JzZXJ2ZU9uTWVzc2FnZTtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmVPbk1lc3NhZ2UgPSBPYnNlcnZlT25NZXNzYWdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2ZU9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivb2JzZXJ2ZU9uLmpzXG4gKiogbW9kdWxlIGlkID0gMzYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL09ic2VydmFibGUnKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHB1c2gtYmFzZWQgZXZlbnQgb3IgdmFsdWUgdGhhdCBhbiB7QGxpbmsgT2JzZXJ2YWJsZX0gY2FuIGVtaXQuXG4gKiBUaGlzIGNsYXNzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIG9wZXJhdG9ycyB0aGF0IG1hbmFnZSBub3RpZmljYXRpb25zLFxuICogbGlrZSB7QGxpbmsgbWF0ZXJpYWxpemV9LCB7QGxpbmsgZGVtYXRlcmlhbGl6ZX0sIHtAbGluayBvYnNlcnZlT259LCBhbmRcbiAqIG90aGVycy4gQmVzaWRlcyB3cmFwcGluZyB0aGUgYWN0dWFsIGRlbGl2ZXJlZCB2YWx1ZSwgaXQgYWxzbyBhbm5vdGF0ZXMgaXRcbiAqIHdpdGggbWV0YWRhdGEgb2YsIGZvciBpbnN0YW5jZSwgd2hhdCB0eXBlIG9mIHB1c2ggbWVzc2FnZSBpdCBpcyAoYG5leHRgLFxuICogYGVycm9yYCwgb3IgYGNvbXBsZXRlYCkuXG4gKlxuICogQHNlZSB7QGxpbmsgbWF0ZXJpYWxpemV9XG4gKiBAc2VlIHtAbGluayBkZW1hdGVyaWFsaXplfVxuICogQHNlZSB7QGxpbmsgb2JzZXJ2ZU9ufVxuICpcbiAqIEBjbGFzcyBOb3RpZmljYXRpb248VD5cbiAqL1xudmFyIE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKGtpbmQsIHZhbHVlLCBleGNlcHRpb24pIHtcbiAgICAgICAgdGhpcy5raW5kID0ga2luZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmV4Y2VwdGlvbiA9IGV4Y2VwdGlvbjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09ICdOJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsaXZlcnMgdG8gdGhlIGdpdmVuIGBvYnNlcnZlcmAgdGhlIHZhbHVlIHdyYXBwZWQgYnkgdGhpcyBOb3RpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcbiAgICAgKiBAcmV0dXJuXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKHRoaXMuZXhjZXB0aW9uKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5jb21wbGV0ZSAmJiBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBzb21lIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2tzLCBkZWxpdmVyIHRoZSB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGVcbiAgICAgKiBjdXJyZW50IE5vdGlmaWNhdGlvbiB0byB0aGUgY29ycmVjdGx5IGNvcnJlc3BvbmRpbmcgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IHZvaWR9IG5leHQgQW4gT2JzZXJ2ZXIgYG5leHRgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuZG8gPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0ICYmIG5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IgJiYgZXJyb3IodGhpcy5leGNlcHRpb24pO1xuICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRha2VzIGFuIE9ic2VydmVyIG9yIGl0cyBpbmRpdmlkdWFsIGNhbGxiYWNrIGZ1bmN0aW9ucywgYW5kIGNhbGxzIGBvYnNlcnZlYFxuICAgICAqIG9yIGBkb2AgbWV0aG9kcyBhY2NvcmRpbmdseS5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dE9yT2JzZXJ2ZXIgQW4gT2JzZXJ2ZXIgb3JcbiAgICAgKiB0aGUgYG5leHRgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyICYmIHR5cGVvZiBuZXh0T3JPYnNlcnZlci5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlKG5leHRPck9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb24gcmVwcmVzZW50ZWRcbiAgICAgKiBieSB0aGlzIE5vdGlmaWNhdGlvbiBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZih0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aHJvdyh0aGlzLmV4Y2VwdGlvbik7XG4gICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuICAgICAqIGdpdmVuIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcIm5leHRcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignTicsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy51bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnRjdXQgdG8gY3JlYXRlIGEgTm90aWZpY2F0aW9uIGluc3RhbmNlIG9mIHRoZSB0eXBlIGBlcnJvcmAgZnJvbSBhXG4gICAgICogZ2l2ZW4gZXJyb3IuXG4gICAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcImVycm9yXCIgTm90aWZpY2F0aW9uIHJlcHJlc2VudGluZyB0aGVcbiAgICAgKiBhcmd1bWVudC5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24uY3JlYXRlRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGNvbXBsZXRlYC5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248YW55Pn0gVGhlIHZhbHVlbGVzcyBcImNvbXBsZXRlXCIgTm90aWZpY2F0aW9uLlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVOb3RpZmljYXRpb247XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG4gICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignTicsIHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbn0oKSk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vdGlmaWNhdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL05vdGlmaWNhdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21FdmVudF8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tRXZlbnQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb21FdmVudCA9IGZyb21FdmVudF8xLmZyb21FdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDM2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRnJvbUV2ZW50T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gcm9tRXZlbnRPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZyb21FdmVudCA9IEZyb21FdmVudE9ic2VydmFibGVfMS5Gcm9tRXZlbnRPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZnJvbUV2ZW50LmpzXG4gKiogbW9kdWxlIGlkID0gMzYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbmZ1bmN0aW9uIGlzTm9kZVN0eWxlRXZlbnRFbW1pdHRlcihzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLm9mZiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGlzTm9kZUxpc3Qoc291cmNlT2JqKSB7XG4gICAgcmV0dXJuICEhc291cmNlT2JqICYmIHNvdXJjZU9iai50b1N0cmluZygpID09PSAnW29iamVjdCBOb2RlTGlzdF0nO1xufVxuZnVuY3Rpb24gaXNIVE1MQ29sbGVjdGlvbihzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgc291cmNlT2JqLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXSc7XG59XG5mdW5jdGlvbiBpc0V2ZW50VGFyZ2V0KHNvdXJjZU9iaikge1xuICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBGcm9tRXZlbnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbUV2ZW50T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tRXZlbnRPYnNlcnZhYmxlKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2VPYmogPSBzb3VyY2VPYmo7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgY29taW5nIGZyb20gdGhlXG4gICAgICogZ2l2ZW4gZXZlbnQgdGFyZ2V0LlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNyZWF0ZXMgYW4gT2JzZXJ2YWJsZSBmcm9tIERPTSBldmVudHMsIG9yIE5vZGVcbiAgICAgKiBFdmVudEVtaXR0ZXIgZXZlbnRzIG9yIG90aGVycy48L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSBieSBhdHRhY2hpbmcgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYW4gXCJldmVudCB0YXJnZXRcIixcbiAgICAgKiB3aGljaCBtYXkgYmUgYW4gb2JqZWN0IHdpdGggYGFkZEV2ZW50TGlzdGVuZXJgIGFuZCBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAsXG4gICAgICogYSBOb2RlLmpzIEV2ZW50RW1pdHRlciwgYSBqUXVlcnkgc3R5bGUgRXZlbnRFbWl0dGVyLCBhIE5vZGVMaXN0IGZyb20gdGhlXG4gICAgICogRE9NLCBvciBhbiBIVE1MQ29sbGVjdGlvbiBmcm9tIHRoZSBET00uIFRoZSBldmVudCBoYW5kbGVyIGlzIGF0dGFjaGVkIHdoZW5cbiAgICAgKiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIHJlbW92ZWQgd2hlbiB0aGUgU3Vic2NyaXB0aW9uIGlzXG4gICAgICogdW5zdWJzY3JpYmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuICAgICAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gICAgICogY2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGZyb219XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50UGF0dGVybn1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgVGhlIERPTUVsZW1lbnQsIGV2ZW50IHRhcmdldCwgTm9kZS5qc1xuICAgICAqIEV2ZW50RW1pdHRlciwgTm9kZUxpc3Qgb3IgSFRNTENvbGxlY3Rpb24gdG8gYXR0YWNoIHRoZSBldmVudCBoYW5kbGVyIHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgb2YgaW50ZXJlc3QsIGJlaW5nIGVtaXR0ZWQgYnkgdGhlXG4gICAgICogYHRhcmdldGAuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbiguLi5hcmdzOiBhbnkpOiBUfSBbc2VsZWN0b3JdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvXG4gICAgICogcG9zdC1wcm9jZXNzIHJlc3VsdHMuIEl0IHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciBhbmRcbiAgICAgKiBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59XG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbUV2ZW50XG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcm9tRXZlbnRPYnNlcnZhYmxlKHRhcmdldCwgZXZlbnROYW1lLCBzZWxlY3Rvcik7XG4gICAgfTtcbiAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnNldHVwU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBoYW5kbGVyLCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciB1bnN1YnNjcmliZTtcbiAgICAgICAgaWYgKGlzTm9kZUxpc3Qoc291cmNlT2JqKSB8fCBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzb3VyY2VPYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnNldHVwU3Vic2NyaXB0aW9uKHNvdXJjZU9ialtpXSwgZXZlbnROYW1lLCBoYW5kbGVyLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0V2ZW50VGFyZ2V0KHNvdXJjZU9iaikpIHtcbiAgICAgICAgICAgIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvdXJjZU9iai5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopKSB7XG4gICAgICAgICAgICBzb3VyY2VPYmoub24oZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLm9mZihldmVudE5hbWUsIGhhbmRsZXIpOyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzTm9kZVN0eWxlRXZlbnRFbW1pdHRlcihzb3VyY2VPYmopKSB7XG4gICAgICAgICAgICBzb3VyY2VPYmouYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5hZGQobmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbih1bnN1YnNjcmliZSkpO1xuICAgIH07XG4gICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2VPYmogPSB0aGlzLnNvdXJjZU9iajtcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuZXZlbnROYW1lO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yO1xuICAgICAgICB2YXIgaGFuZGxlciA9IHNlbGVjdG9yID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHN1YnNjcmliZXIubmV4dChlKTsgfTtcbiAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmosIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICByZXR1cm4gRnJvbUV2ZW50T2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRnJvbUV2ZW50T2JzZXJ2YWJsZSA9IEZyb21FdmVudE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Gcm9tRXZlbnRPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZnJvbUV2ZW50UGF0dGVybl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tRXZlbnRQYXR0ZXJuID0gZnJvbUV2ZW50UGF0dGVybl8xLmZyb21FdmVudFBhdHRlcm47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVybi5qc1xuICoqIG1vZHVsZSBpZCA9IDM2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUnKTtcbmV4cG9ydHMuZnJvbUV2ZW50UGF0dGVybiA9IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50UGF0dGVybi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVybi5qc1xuICoqIG1vZHVsZSBpZCA9IDM2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYWRkSGFuZGxlciA9IGFkZEhhbmRsZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGZyb20gYW4gQVBJIGJhc2VkIG9uIGFkZEhhbmRsZXIvcmVtb3ZlSGFuZGxlclxuICAgICAqIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db252ZXJ0cyBhbnkgYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyIEFQSSB0byBhblxuICAgICAqIE9ic2VydmFibGUuPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy9mcm9tRXZlbnRQYXR0ZXJuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGJ5IHVzaW5nIHRoZSBgYWRkSGFuZGxlcmAgYW5kIGByZW1vdmVIYW5kbGVyYFxuICAgICAqIGZ1bmN0aW9ucyB0byBhZGQgYW5kIHJlbW92ZSB0aGUgaGFuZGxlcnMsIHdpdGggYW4gb3B0aW9uYWwgc2VsZWN0b3JcbiAgICAgKiBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSBldmVudCBhcmd1bWVudHMgdG8gYSByZXN1bHQuIFRoZSBgYWRkSGFuZGxlcmAgaXNcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIGByZW1vdmVIYW5kbGVyYCBpc1xuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gaXMgdW5zdWJzY3JpYmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuICAgICAqIGZ1bmN0aW9uIGFkZENsaWNrSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICogICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHJlbW92ZUNsaWNrSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICogICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4oXG4gICAgICogICBhZGRDbGlja0hhbmRsZXIsXG4gICAgICogICByZW1vdmVDbGlja0hhbmRsZXJcbiAgICAgKiApO1xuICAgICAqIGNsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaGFuZGxlcjogRnVuY3Rpb24pOiBhbnl9IGFkZEhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG4gICAgICogYSBgaGFuZGxlcmAgZnVuY3Rpb24gYXMgYXJndW1lbnQgYW5kIGF0dGFjaGVzIGl0IHNvbWVob3cgdG8gdGhlIGFjdHVhbFxuICAgICAqIHNvdXJjZSBvZiBldmVudHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihoYW5kbGVyOiBGdW5jdGlvbik6IHZvaWR9IHJlbW92ZUhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0XG4gICAgICogdGFrZXMgYSBgaGFuZGxlcmAgZnVuY3Rpb24gYXMgYXJndW1lbnQgYW5kIHJlbW92ZXMgaXQgaW4gY2FzZSBpdCB3YXNcbiAgICAgKiBwcmV2aW91c2x5IGF0dGFjaGVkIHVzaW5nIGBhZGRIYW5kbGVyYC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFyZ3M6IGFueSk6IFR9IFtzZWxlY3Rvcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG9cbiAgICAgKiBwb3N0LXByb2Nlc3MgcmVzdWx0cy4gSXQgdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBldmVudCBoYW5kbGVyIGFuZFxuICAgICAqIHNob3VsZCByZXR1cm4gYSBzaW5nbGUgdmFsdWUuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn1cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBmcm9tRXZlbnRQYXR0ZXJuXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcik7XG4gICAgfTtcbiAgICBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBhZGRIYW5kbGVyID0gdGhpcy5hZGRIYW5kbGVyO1xuICAgICAgICB2YXIgcmVtb3ZlSGFuZGxlciA9IHRoaXMucmVtb3ZlSGFuZGxlcjtcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcjtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBzZWxlY3RvciA/IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHJlc3VsdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IDogZnVuY3Rpb24gKGUpIHsgc3Vic2NyaWJlci5uZXh0KGUpOyB9O1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChhZGRIYW5kbGVyKShoYW5kbGVyKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihyZXN1bHQuZSk7XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5hZGQobmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL1RPRE86IGRldGVybWluZSB3aGV0aGVyIG9yIG5vdCB0byBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcbiAgICAgICAgICAgIHJlbW92ZUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21Qcm9taXNlXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZSA9IGZyb21Qcm9taXNlXzEuZnJvbVByb21pc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tUHJvbWlzZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Qcm9taXNlT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5mcm9tUHJvbWlzZSA9IFByb21pc2VPYnNlcnZhYmxlXzEuUHJvbWlzZU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgR2VuZXJhdGVPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL0dlbmVyYXRlT2JzZXJ2YWJsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZ2VuZXJhdGUgPSBHZW5lcmF0ZU9ic2VydmFibGVfMS5HZW5lcmF0ZU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2VuZXJhdGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9nZW5lcmF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbnZhciBzZWxmU2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBHZW5lcmF0ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHZW5lcmF0ZU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR2VuZXJhdGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgICAgICAgdGhpcy5jb25kaXRpb24gPSBjb25kaXRpb247XG4gICAgICAgIHRoaXMuaXRlcmF0ZSA9IGl0ZXJhdGU7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIEdlbmVyYXRlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlT3JPcHRpb25zLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlT3JPcHRpb25zLmluaXRpYWxTdGF0ZSwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLmNvbmRpdGlvbiwgaW5pdGlhbFN0YXRlT3JPcHRpb25zLml0ZXJhdGUsIGluaXRpYWxTdGF0ZU9yT3B0aW9ucy5yZXN1bHRTZWxlY3RvciB8fCBzZWxmU2VsZWN0b3IsIGluaXRpYWxTdGF0ZU9yT3B0aW9ucy5zY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSA9PT0gdW5kZWZpbmVkIHx8IGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIocmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGVPck9wdGlvbnMsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgc2VsZlNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlT3JPcHRpb25zLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgR2VuZXJhdGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5pbml0aWFsU3RhdGU7XG4gICAgICAgIGlmICh0aGlzLnNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKEdlbmVyYXRlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXI6IHN1YnNjcmliZXIsXG4gICAgICAgICAgICAgICAgaXRlcmF0ZTogdGhpcy5pdGVyYXRlLFxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogdGhpcy5jb25kaXRpb24sXG4gICAgICAgICAgICAgICAgcmVzdWx0U2VsZWN0b3I6IHRoaXMucmVzdWx0U2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGNvbmRpdGlvbiA9IF9hLmNvbmRpdGlvbiwgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgaXRlcmF0ZSA9IF9hLml0ZXJhdGU7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uUmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvblJlc3VsdCA9IGNvbmRpdGlvbihzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY29uZGl0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdFNlbGVjdG9yKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gaXRlcmF0ZShzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XG4gICAgfTtcbiAgICBHZW5lcmF0ZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBjb25kaXRpb24gPSBzdGF0ZS5jb25kaXRpb247XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLm5lZWRJdGVyYXRlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0YXRlLnN0YXRlID0gc3RhdGUuaXRlcmF0ZShzdGF0ZS5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlLm5lZWRJdGVyYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uUmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25kaXRpb25SZXN1bHQgPSBjb25kaXRpb24oc3RhdGUuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbmRpdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHN0YXRlLnJlc3VsdFNlbGVjdG9yKHN0YXRlLnN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBHZW5lcmF0ZU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkdlbmVyYXRlT2JzZXJ2YWJsZSA9IEdlbmVyYXRlT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlbmVyYXRlT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvR2VuZXJhdGVPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzcxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgaW50ZXJ2YWxfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvaW50ZXJ2YWwnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmludGVydmFsID0gaW50ZXJ2YWxfMS5pbnRlcnZhbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVydmFsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvaW50ZXJ2YWwuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEludGVydmFsT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9JbnRlcnZhbE9ic2VydmFibGUnKTtcbmV4cG9ydHMuaW50ZXJ2YWwgPSBJbnRlcnZhbE9ic2VydmFibGVfMS5JbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJ2YWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2ludGVydmFsLmpzXG4gKiogbW9kdWxlIGlkID0gMzczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGlzTnVtZXJpY18xID0gcmVxdWlyZSgnLi4vdXRpbC9pc051bWVyaWMnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBJbnRlcnZhbE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbnRlcnZhbE9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSW50ZXJ2YWxPYnNlcnZhYmxlKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChwZXJpb2QgPT09IHZvaWQgMCkgeyBwZXJpb2QgPSAwOyB9XG4gICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghaXNOdW1lcmljXzEuaXNOdW1lcmljKHBlcmlvZCkgfHwgcGVyaW9kIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5wZXJpb2QgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2NoZWR1bGVyIHx8IHR5cGVvZiBzY2hlZHVsZXIuc2NoZWR1bGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBzZXF1ZW50aWFsIG51bWJlcnMgZXZlcnkgc3BlY2lmaWVkXG4gICAgICogaW50ZXJ2YWwgb2YgdGltZSwgb24gYSBzcGVjaWZpZWQgU2NoZWR1bGVyLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGluY3JlbWVudGFsIG51bWJlcnMgcGVyaW9kaWNhbGx5IGluIHRpbWUuXG4gICAgICogPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy9pbnRlcnZhbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIGBpbnRlcnZhbGAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYW4gaW5maW5pdGUgc2VxdWVuY2Ugb2ZcbiAgICAgKiBhc2NlbmRpbmcgaW50ZWdlcnMsIHdpdGggYSBjb25zdGFudCBpbnRlcnZhbCBvZiB0aW1lIG9mIHlvdXIgY2hvb3NpbmdcbiAgICAgKiBiZXR3ZWVuIHRob3NlIGVtaXNzaW9ucy4gVGhlIGZpcnN0IGVtaXNzaW9uIGlzIG5vdCBzZW50IGltbWVkaWF0ZWx5LCBidXRcbiAgICAgKiBvbmx5IGFmdGVyIHRoZSBmaXJzdCBwZXJpb2QgaGFzIHBhc3NlZC4gQnkgZGVmYXVsdCwgdGhpcyBvcGVyYXRvciB1c2VzIHRoZVxuICAgICAqIGBhc3luY2AgU2NoZWR1bGVyIHRvIHByb3ZpZGUgYSBub3Rpb24gb2YgdGltZSwgYnV0IHlvdSBtYXkgcGFzcyBhbnlcbiAgICAgKiBTY2hlZHVsZXIgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBhc2NlbmRpbmcgbnVtYmVycywgb25lIGV2ZXJ5IHNlY29uZCAoMTAwMG1zKTwvY2FwdGlvbj5cbiAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gICAgICogbnVtYmVycy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayB0aW1lcn1cbiAgICAgKiBAc2VlIHtAbGluayBkZWxheX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGVyaW9kPTBdIFRoZSBpbnRlcnZhbCBzaXplIGluIG1pbGxpc2Vjb25kcyAoYnkgZGVmYXVsdClcbiAgICAgKiBvciB0aGUgdGltZSB1bml0IGRldGVybWluZWQgYnkgdGhlIHNjaGVkdWxlcidzIGNsb2NrLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICAgICAqIHRoZSBlbWlzc2lvbiBvZiB2YWx1ZXMsIGFuZCBwcm92aWRpbmcgYSBub3Rpb24gb2YgXCJ0aW1lXCIuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgc2VxdWVudGlhbCBudW1iZXIgZWFjaCB0aW1lXG4gICAgICogaW50ZXJ2YWwuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgaW50ZXJ2YWxcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEludGVydmFsT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAocGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHBlcmlvZCA9PT0gdm9pZCAwKSB7IHBlcmlvZCA9IDA7IH1cbiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbE9ic2VydmFibGUocGVyaW9kLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgSW50ZXJ2YWxPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YXRlLmluZGV4LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgcGVyaW9kID0gc3RhdGUucGVyaW9kO1xuICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5kZXgpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmluZGV4ICs9IDE7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHBlcmlvZCk7XG4gICAgfTtcbiAgICBJbnRlcnZhbE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgcGVyaW9kID0gdGhpcy5wZXJpb2Q7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgc3Vic2NyaWJlci5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKEludGVydmFsT2JzZXJ2YWJsZS5kaXNwYXRjaCwgcGVyaW9kLCB7XG4gICAgICAgICAgICBpbmRleDogaW5kZXgsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIHBlcmlvZDogcGVyaW9kXG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBJbnRlcnZhbE9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkludGVydmFsT2JzZXJ2YWJsZSA9IEludGVydmFsT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVydmFsT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvSW50ZXJ2YWxPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbmZ1bmN0aW9uIGlzTnVtZXJpYyh2YWwpIHtcbiAgICAvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfFwiXCIpXG4gICAgLy8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuICAgIC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuICAgIC8vIGFkZGluZyAxIGNvcnJlY3RzIGxvc3Mgb2YgcHJlY2lzaW9uIGZyb20gcGFyc2VGbG9hdCAoIzE1MTAwKVxuICAgIHJldHVybiAhaXNBcnJheV8xLmlzQXJyYXkodmFsKSAmJiAodmFsIC0gcGFyc2VGbG9hdCh2YWwpICsgMSkgPj0gMDtcbn1cbmV4cG9ydHMuaXNOdW1lcmljID0gaXNOdW1lcmljO1xuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNOdW1lcmljLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9pc051bWVyaWMuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFzeW5jU2NoZWR1bGVyXzEgPSByZXF1aXJlKCcuL0FzeW5jU2NoZWR1bGVyJyk7XG5leHBvcnRzLmFzeW5jID0gbmV3IEFzeW5jU2NoZWR1bGVyXzEuQXN5bmNTY2hlZHVsZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL2FzeW5jLmpzXG4gKiogbW9kdWxlIGlkID0gMzc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEZ1dHVyZUFjdGlvbl8xID0gcmVxdWlyZSgnLi9GdXR1cmVBY3Rpb24nKTtcbnZhciBRdWV1ZVNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9RdWV1ZVNjaGVkdWxlcicpO1xudmFyIEFzeW5jU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXN5bmNTY2hlZHVsZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXN5bmNTY2hlZHVsZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBBc3luY1NjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUsIDApO1xuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jU2NoZWR1bGVyO1xufShRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKSk7XG5leHBvcnRzLkFzeW5jU2NoZWR1bGVyID0gQXN5bmNTY2hlZHVsZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY1NjaGVkdWxlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9Bc3luY1NjaGVkdWxlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGdXR1cmVBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGdXR1cmVBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRnV0dXJlQWN0aW9uKHNjaGVkdWxlciwgd29yaykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMud29yayA9IHdvcms7XG4gICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBGdXR1cmVBY3Rpb24ucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gbmV3IEVycm9yKCdleGVjdXRpbmcgYSBjYW5jZWxsZWQgYWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMud29yayh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBGdXR1cmVBY3Rpb24ucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuICAgIH07XG4gICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICAvLyBBbHdheXMgcmVwbGFjZSB0aGUgY3VycmVudCBzdGF0ZSB3aXRoIHRoZSBuZXcgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgLy8gU2V0IHRoZSBwZW5kaW5nIGZsYWcgaW5kaWNhdGluZyB0aGF0IHRoaXMgYWN0aW9uIGhhcyBiZWVuIHNjaGVkdWxlZCwgb3JcbiAgICAgICAgLy8gaGFzIHJlY3Vyc2l2ZWx5IHJlc2NoZWR1bGVkIGl0c2VsZi5cbiAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgdmFyIGlkID0gdGhpcy5pZDtcbiAgICAgICAgLy8gSWYgdGhpcyBhY3Rpb24gaGFzIGFuIGludGVydmFsSUQgYW5kIHRoZSBzcGVjaWZpZWQgZGVsYXkgbWF0Y2hlcyB0aGVcbiAgICAgICAgLy8gZGVsYXkgd2UgdXNlZCB0byBjcmVhdGUgdGhlIGludGVydmFsSUQsIGRvbid0IGNhbGwgYHNldEludGVydmFsYCBhZ2Fpbi5cbiAgICAgICAgaWYgKGlkICE9IG51bGwgJiYgdGhpcy5kZWxheSA9PT0gZGVsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgLy8gSWYgdGhpcyBhY3Rpb24gaGFzIGFuIGludGVydmFsSUQsIGJ1dCB3YXMgcmVzY2hlZHVsZWQgd2l0aCBhIGRpZmZlcmVudFxuICAgICAgICAvLyBgZGVsYXlgIHRpbWUsIGNhbmNlbCB0aGUgY3VycmVudCBpbnRlcnZhbElEIGFuZCBjYWxsIGBzZXRJbnRlcnZhbGAgd2l0aFxuICAgICAgICAvLyB0aGUgbmV3IGBkZWxheWAgdGltZS5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBudWxsO1xuICAgICAgICAgICAgcm9vdF8xLnJvb3QuY2xlYXJJbnRlcnZhbChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW1wb3J0YW50IGltcGxlbWVudGF0aW9uIG5vdGU6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEJ5IGRlZmF1bHQsIEZ1dHVyZUFjdGlvbiBvbmx5IGV4ZWN1dGVzIG9uY2UuIEhvd2V2ZXIsIEFjdGlvbnMgaGF2ZSB0aGVcbiAgICAgICAgLy8gYWJpbGl0eSB0byBiZSByZXNjaGVkdWxlZCBmcm9tIHdpdGhpbiB0aGUgc2NoZWR1bGVkIGNhbGxiYWNrIChtaW1pY2tpbmdcbiAgICAgICAgLy8gcmVjdXJzaW9uIGZvciBhc3luY2hyb25vdXMgbWV0aG9kcykuIFRoaXMgYWxsb3dzIHVzIHRvIGltcGxlbWVudCBzaW5nbGVcbiAgICAgICAgLy8gYW5kIHJlcGVhdGVkIGFjdGlvbnMgd2l0aCB0aGUgc2FtZSBjb2RlIHBhdGggd2l0aG91dCBhZGRpbmcgQVBJIHN1cmZhY2VcbiAgICAgICAgLy8gYXJlYSwgYW5kIGltcGxlbWVudCB0YWlsLWNhbGwgb3B0aW1pemF0aW9uIG92ZXIgYXN5bmNocm9ub3VzIGJvdW5kYXJpZXMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEhvd2V2ZXIsIEpTIHJ1bnRpbWVzIG1ha2UgYSBkaXN0aW5jdGlvbiBiZXR3ZWVuIGludGVydmFscyBzY2hlZHVsZWQgYnlcbiAgICAgICAgLy8gcmVwZWF0ZWRseSBjYWxsaW5nIGBzZXRUaW1lb3V0YCB2cy4gYSBzaW5nbGUgYHNldEludGVydmFsYCBjYWxsLCB3aXRoXG4gICAgICAgIC8vIHRoZSBsYXR0ZXIgcHJvdmlkaW5nIGEgYmV0dGVyIGd1YXJhbnRlZSBvZiBwcmVjaXNpb24uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGFjY29tbW9kYXRlIGJvdGggc2luZ2xlIGFuZCByZXBlYXRlZGx5IHJlc2NoZWR1bGVkIGFjdGlvbnMsXG4gICAgICAgIC8vIHVzZSBgc2V0SW50ZXJ2YWxgIGhlcmUgZm9yIGJvdGggY2FzZXMuIEJ5IGRlZmF1bHQsIHRoZSBpbnRlcnZhbCB3aWxsIGJlXG4gICAgICAgIC8vIGNhbmNlbGVkIGFmdGVyIGl0cyBmaXJzdCBleGVjdXRpb24sIG9yIGlmIHRoZSBhY3Rpb24gc2NoZWR1bGVzIGl0c2VsZiB0b1xuICAgICAgICAvLyBydW4gYWdhaW4gd2l0aCBhIGRpZmZlcmVudCBgZGVsYXlgIHRpbWUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZSBhY3Rpb24gcmVjdXJzaXZlbHkgc2NoZWR1bGVzIGl0c2VsZiB0byBydW4gYWdhaW4gd2l0aCB0aGUgc2FtZVxuICAgICAgICAvLyBgZGVsYXlgIHRpbWUsIHRoZSBpbnRlcnZhbCBpcyBub3QgY2FuY2VsZWQsIGJ1dCBhbGxvd2VkIHRvIGxvb3AgYWdhaW4uXG4gICAgICAgIC8vIFRoZSBjaGVjayBvZiB3aGV0aGVyIHRoZSBpbnRlcnZhbCBzaG91bGQgYmUgY2FuY2VsZWQgb3Igbm90IGlzIHJ1biBldmVyeVxuICAgICAgICAvLyB0aW1lIHRoZSBpbnRlcnZhbCBpcyBleGVjdXRlZC4gVGhlIGZpcnN0IHRpbWUgYW4gYWN0aW9uIGZhaWxzIHRvXG4gICAgICAgIC8vIHJlc2NoZWR1bGUgaXRzZWxmLCB0aGUgaW50ZXJ2YWwgaXMgY2FuY2VsZWQuXG4gICAgICAgIC8vXG4gICAgICAgIHRoaXMuaWQgPSByb290XzEucm9vdC5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcywgaWQgPSBfYS5pZCwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuICAgICAgICAgICAgc2NoZWR1bGVyLmFjdGlvbnMucHVzaChfdGhpcyk7XG4gICAgICAgICAgICBzY2hlZHVsZXIuZmx1c2goKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUZXJtaW5hdGUgdGhpcyBpbnRlcnZhbCBpZiB0aGUgYWN0aW9uIGRpZG4ndCByZXNjaGVkdWxlIGl0c2VsZi5cbiAgICAgICAgICAgIC8vIERvbid0IGNhbGwgYHRoaXMudW5zdWJzY3JpYmUoKWAgaGVyZSwgYmVjYXVzZSB0aGUgYWN0aW9uIGNvdWxkIGJlXG4gICAgICAgICAgICAvLyByZXNjaGVkdWxlZCBsYXRlci4gRm9yIGV4YW1wbGU6XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gYGBgXG4gICAgICAgICAgICAvLyBzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gZG9Xb3JrKGNvdW50ZXIpIHtcbiAgICAgICAgICAgIC8vICAgLyogLi4uIEknbSBhIGJ1c3kgd29ya2VyIGJlZSAuLi4gKi9cbiAgICAgICAgICAgIC8vICAgdmFyIG9yaWdpbmFsQWN0aW9uID0gdGhpcztcbiAgICAgICAgICAgIC8vICAgLyogd2FpdCAxMDBtcyBiZWZvcmUgcmVzY2hlZHVsaW5nIHRoaXMgYWN0aW9uIGFnYWluICovXG4gICAgICAgICAgICAvLyAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgIG9yaWdpbmFsQWN0aW9uLnNjaGVkdWxlKGNvdW50ZXIgKyAxKTtcbiAgICAgICAgICAgIC8vICAgfSwgMTAwKTtcbiAgICAgICAgICAgIC8vIH0sIDEwMDApO1xuICAgICAgICAgICAgLy8gYGBgXG4gICAgICAgICAgICBpZiAoX3RoaXMucGVuZGluZyA9PT0gZmFsc2UgJiYgaWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmlkID0gbnVsbDtcbiAgICAgICAgICAgICAgICByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgaWQgPSBfYS5pZCwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuICAgICAgICB2YXIgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuICAgICAgICB2YXIgaW5kZXggPSBhY3Rpb25zLmluZGV4T2YodGhpcyk7XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gbnVsbDtcbiAgICAgICAgICAgIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGFjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIEZ1dHVyZUFjdGlvbjtcbn0oU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKSk7XG5leHBvcnRzLkZ1dHVyZUFjdGlvbiA9IEZ1dHVyZUFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZ1dHVyZUFjdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFF1ZXVlQWN0aW9uXzEgPSByZXF1aXJlKCcuL1F1ZXVlQWN0aW9uJyk7XG52YXIgRnV0dXJlQWN0aW9uXzEgPSByZXF1aXJlKCcuL0Z1dHVyZUFjdGlvbicpO1xudmFyIFF1ZXVlU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWV1ZVNjaGVkdWxlcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107IC8vIFhYWDogdXNlIGBhbnlgIHRvIHJlbW92ZSB0eXBlIHBhcmFtIGBUYCBmcm9tIGBWaXJ0dWFsVGltZVNjaGVkdWxlcmAuXG4gICAgICAgIHRoaXMuc2NoZWR1bGVkSWQgPSBudWxsO1xuICAgIH1cbiAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgICB9O1xuICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIHx8IHRoaXMuc2NoZWR1bGVkSWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zO1xuICAgICAgICAvLyBYWFg6IHVzZSBgYW55YCB0byByZW1vdmUgdHlwZSBwYXJhbSBgVGAgZnJvbSBgVmlydHVhbFRpbWVTY2hlZHVsZXJgLlxuICAgICAgICBmb3IgKHZhciBhY3Rpb24gPSBudWxsOyBhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCk7KSB7XG4gICAgICAgICAgICBhY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICAgICAgaWYgKGFjdGlvbi5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhyb3cgYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgfTtcbiAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAod29yaywgZGVsYXksIHN0YXRlKSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICByZXR1cm4gKGRlbGF5IDw9IDApID9cbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVOb3cod29yaywgc3RhdGUpIDpcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVMYXRlcih3b3JrLCBkZWxheSwgc3RhdGUpO1xuICAgIH07XG4gICAgUXVldWVTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlTm93ID0gZnVuY3Rpb24gKHdvcmssIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVldWVBY3Rpb25fMS5RdWV1ZUFjdGlvbih0aGlzLCB3b3JrKS5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVMYXRlciA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUsIGRlbGF5KTtcbiAgICB9O1xuICAgIHJldHVybiBRdWV1ZVNjaGVkdWxlcjtcbn0oKSk7XG5leHBvcnRzLlF1ZXVlU2NoZWR1bGVyID0gUXVldWVTY2hlZHVsZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1RdWV1ZVNjaGVkdWxlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9RdWV1ZVNjaGVkdWxlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBGdXR1cmVBY3Rpb25fMSA9IHJlcXVpcmUoJy4vRnV0dXJlQWN0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFF1ZXVlQWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUXVldWVBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUXVldWVBY3Rpb24oKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBRdWV1ZUFjdGlvbi5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3NjaGVkdWxlLmNhbGwodGhpcywgc3RhdGUsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuICAgICAgICBzY2hlZHVsZXIuZmx1c2goKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gUXVldWVBY3Rpb247XG59KEZ1dHVyZUFjdGlvbl8xLkZ1dHVyZUFjdGlvbikpO1xuZXhwb3J0cy5RdWV1ZUFjdGlvbiA9IFF1ZXVlQWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVldWVBY3Rpb24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvUXVldWVBY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtZXJnZV8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9tZXJnZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUubWVyZ2UgPSBtZXJnZV8xLm1lcmdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9tZXJnZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbWVyZ2VfMSA9IHJlcXVpcmUoJy4uL29wZXJhdG9yL21lcmdlJyk7XG5leHBvcnRzLm1lcmdlID0gbWVyZ2VfMS5tZXJnZVN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9tZXJnZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlQWxsXzEgPSByZXF1aXJlKCcuL21lcmdlQWxsJyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgT2JzZXJ2YWJsZSB3aGljaCBjb25jdXJyZW50bHkgZW1pdHMgYWxsIHZhbHVlcyBmcm9tIGV2ZXJ5XG4gKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0b2dldGhlciBieSBibGVuZGluZ1xuICogdGhlaXIgdmFsdWVzIGludG8gb25lIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYG1lcmdlYCBzdWJzY3JpYmVzIHRvIGVhY2ggZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSAoZWl0aGVyIHRoZSBzb3VyY2Ugb3IgYW5cbiAqIE9ic2VydmFibGUgZ2l2ZW4gYXMgYXJndW1lbnQpLCBhbmQgc2ltcGx5IGZvcndhcmRzICh3aXRob3V0IGRvaW5nIGFueVxuICogdHJhbnNmb3JtYXRpb24pIGFsbCB0aGUgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dCBPYnNlcnZhYmxlcyB0byB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgb25seSBjb21wbGV0ZXMgb25jZSBhbGwgaW5wdXQgT2JzZXJ2YWJsZXNcbiAqIGhhdmUgY29tcGxldGVkLiBBbnkgZXJyb3IgZGVsaXZlcmVkIGJ5IGFuIGlucHV0IE9ic2VydmFibGUgd2lsbCBiZSBpbW1lZGlhdGVseVxuICogZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgdHdvIE9ic2VydmFibGVzOiAxcyBpbnRlcnZhbCBhbmQgY2xpY2tzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgY2xpY2tzT3JUaW1lciA9IGNsaWNrcy5tZXJnZSh0aW1lcik7XG4gKiBjbGlja3NPclRpbWVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciAzIE9ic2VydmFibGVzLCBidXQgb25seSAyIHJ1biBjb25jdXJyZW50bHk8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcbiAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG4gKiB2YXIgdGltZXIzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApLnRha2UoMTApO1xuICogdmFyIGNvbmN1cnJlbnQgPSAyOyAvLyB0aGUgYXJndW1lbnRcbiAqIHZhciBtZXJnZWQgPSB0aW1lcjEubWVyZ2UodGltZXIyLCB0aW1lcjMsIGNvbmN1cnJlbnQpO1xuICogbWVyZ2VkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cbiAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gbWVyZ2Ugd2l0aCB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZ1xuICogY29uY3VycmVuY3kgb2YgaW5wdXQgT2JzZXJ2YWJsZXMuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgdGhhdCBhcmUgdGhlIHJlc3VsdCBvZlxuICogZXZlcnkgaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgbWVyZ2VcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBvYnNlcnZhYmxlcy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiBtZXJnZVN0YXRpYy5hcHBseSh0aGlzLCBvYnNlcnZhYmxlcyk7XG59XG5leHBvcnRzLm1lcmdlID0gbWVyZ2U7XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIGNvbmN1cnJlbnRseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcbiAqIGdpdmVuIGlucHV0IE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IGJsZW5kaW5nXG4gKiB0aGVpciB2YWx1ZXMgaW50byBvbmUgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgbWVyZ2VgIHN1YnNjcmliZXMgdG8gZWFjaCBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIChhcyBhcmd1bWVudHMpLCBhbmQgc2ltcGx5XG4gKiBmb3J3YXJkcyAod2l0aG91dCBkb2luZyBhbnkgdHJhbnNmb3JtYXRpb24pIGFsbCB0aGUgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dFxuICogT2JzZXJ2YWJsZXMgdG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgb25seSBjb21wbGV0ZXNcbiAqIG9uY2UgYWxsIGlucHV0IE9ic2VydmFibGVzIGhhdmUgY29tcGxldGVkLiBBbnkgZXJyb3IgZGVsaXZlcmVkIGJ5IGFuIGlucHV0XG4gKiBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgdHdvIE9ic2VydmFibGVzOiAxcyBpbnRlcnZhbCBhbmQgY2xpY2tzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgY2xpY2tzT3JUaW1lciA9IFJ4Lk9ic2VydmFibGUubWVyZ2UoY2xpY2tzLCB0aW1lcik7XG4gKiBjbGlja3NPclRpbWVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciAzIE9ic2VydmFibGVzLCBidXQgb25seSAyIHJ1biBjb25jdXJyZW50bHk8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcbiAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG4gKiB2YXIgdGltZXIzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApLnRha2UoMTApO1xuICogdmFyIGNvbmN1cnJlbnQgPSAyOyAvLyB0aGUgYXJndW1lbnRcbiAqIHZhciBtZXJnZWQgPSBSeC5PYnNlcnZhYmxlLm1lcmdlKHRpbWVyMSwgdGltZXIyLCB0aW1lcjMsIGNvbmN1cnJlbnQpO1xuICogbWVyZ2VkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cbiAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IGlucHV0MSBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggb3RoZXJzLlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbnB1dDIgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBtZXJnZSB3aXRoIG90aGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIFRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZ1xuICogY29uY3VycmVuY3kgb2YgaW5wdXQgT2JzZXJ2YWJsZXMuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgdGhhdCBhcmUgdGhlIHJlc3VsdCBvZlxuICogZXZlcnkgaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgbWVyZ2VcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG1lcmdlU3RhdGljKCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcbiAgICB2YXIgbGFzdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKGxhc3QpKSB7XG4gICAgICAgIHNjaGVkdWxlciA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgICAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID4gMSAmJiB0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjb25jdXJyZW50ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGxhc3QgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICB9XG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZXNbMF07XG4gICAgfVxuICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzLCBzY2hlZHVsZXIpLmxpZnQobmV3IG1lcmdlQWxsXzEuTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSk7XG59XG5leHBvcnRzLm1lcmdlU3RhdGljID0gbWVyZ2VTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21lcmdlLmpzXG4gKiogbW9kdWxlIGlkID0gMzgzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmFjZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcmFjZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucmFjZSA9IHJhY2VfMS5yYWNlU3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3JhY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5Jyk7XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZScpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgZmlyc3Qgc291cmNlIE9ic2VydmFibGUgdG8gZW1pdCBhbiBpdGVtXG4gKiBmcm9tIHRoZSBjb21iaW5hdGlvbiBvZiB0aGlzIE9ic2VydmFibGUgYW5kIHN1cHBsaWVkIE9ic2VydmFibGVzXG4gKiBAcGFyYW0gey4uLk9ic2VydmFibGVzfSAuLi5vYnNlcnZhYmxlcyBzb3VyY2VzIHVzZWQgdG8gcmFjZSBmb3Igd2hpY2ggT2JzZXJ2YWJsZSBlbWl0cyBmaXJzdC5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBvdXRwdXQgb2YgdGhlIGZpcnN0IE9ic2VydmFibGUgdG8gZW1pdCBhbiBpdGVtLlxuICogQG1ldGhvZCByYWNlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiByYWNlKCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG4gICAgLy8gYHBhaXIoW29iczEsIG9iczIsIC4uLl0pYFxuICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG4gICAgICAgIG9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXNbMF07XG4gICAgfVxuICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIHJhY2VTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xufVxuZXhwb3J0cy5yYWNlID0gcmFjZTtcbmZ1bmN0aW9uIHJhY2VTdGF0aWMoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIC8vIGlmIHRoZSBvbmx5IGFyZ3VtZW50IGlzIGFuIGFycmF5LCBpdCB3YXMgbW9zdCBsaWtlbHkgY2FsbGVkIHdpdGhcbiAgICAvLyBgcGFpcihbb2JzMSwgb2JzMiwgLi4uXSlgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAoaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG4gICAgICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVzWzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzKS5saWZ0KG5ldyBSYWNlT3BlcmF0b3IoKSk7XG59XG5leHBvcnRzLnJhY2VTdGF0aWMgPSByYWNlU3RhdGljO1xudmFyIFJhY2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmFjZU9wZXJhdG9yKCkge1xuICAgIH1cbiAgICBSYWNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmFjZVN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFJhY2VPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLlJhY2VPcGVyYXRvciA9IFJhY2VPcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmFjZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYWNlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSYWNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaGFzRmlyc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IFtdO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB9XG4gICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUpO1xuICAgIH07XG4gICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGVzID0gdGhpcy5vYnNlcnZhYmxlcztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG4gICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSwgaSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzRmlyc3QpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzRmlyc3QgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gb3V0ZXJJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIHJldHVybiBSYWNlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLlJhY2VTdWJzY3JpYmVyID0gUmFjZVN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcmFjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG5ldmVyXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL25ldmVyJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5uZXZlciA9IG5ldmVyXzEubmV2ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL25ldmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBOZXZlck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vTmV2ZXJPYnNlcnZhYmxlJyk7XG5leHBvcnRzLm5ldmVyID0gTmV2ZXJPYnNlcnZhYmxlXzEuTmV2ZXJPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9uZXZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgbm9vcF8xID0gcmVxdWlyZSgnLi4vdXRpbC9ub29wJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIE5ldmVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5ldmVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOZXZlck9ic2VydmFibGUoKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+QW4gT2JzZXJ2YWJsZSB0aGF0IG5ldmVyIGVtaXRzIGFueXRoaW5nLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvbmV2ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBUaGlzIHN0YXRpYyBvcGVyYXRvciBpcyB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBlbWl0c1xuICAgICAqIG5laXRoZXIgdmFsdWVzIG5vciBlcnJvcnMgbm9yIHRoZSBjb21wbGV0aW9uIG5vdGlmaWNhdGlvbi4gSXQgY2FuIGJlIHVzZWRcbiAgICAgKiBmb3IgdGVzdGluZyBwdXJwb3NlcyBvciBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMuIFBsZWFzZSBub3RcbiAgICAgKiB0aGF0IGJ5IG5ldmVyIGVtaXR0aW5nIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLCB0aGlzIE9ic2VydmFibGUga2VlcHMgdGhlXG4gICAgICogc3Vic2NyaXB0aW9uIGZyb20gYmVpbmcgZGlzcG9zZWQgYXV0b21hdGljYWxseS4gU3Vic2NyaXB0aW9ucyBuZWVkIHRvIGJlXG4gICAgICogbWFudWFsbHkgZGlzcG9zZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBuZXZlciBlbWl0IGFueXRoaW5nIGVsc2UgKG5vdCBldmVuIGNvbXBsZXRlKS48L2NhcHRpb24+XG4gICAgICogZnVuY3Rpb24gaW5mbygpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKCdXaWxsIG5vdCBiZSBjYWxsZWQnKTtcbiAgICAgKiB9XG4gICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUubmV2ZXIoKS5zdGFydFdpdGgoNyk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBpbmZvLCBpbmZvKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKiBAc2VlIHtAbGluayBlbXB0eX1cbiAgICAgKiBAc2VlIHtAbGluayBvZn1cbiAgICAgKiBAc2VlIHtAbGluayB0aHJvd31cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEEgXCJuZXZlclwiIE9ic2VydmFibGU6IG5ldmVyIGVtaXRzIGFueXRoaW5nLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIG5ldmVyXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBOZXZlck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuICAgIH07XG4gICAgTmV2ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgbm9vcF8xLm5vb3AoKTtcbiAgICB9O1xuICAgIHJldHVybiBOZXZlck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLk5ldmVyT2JzZXJ2YWJsZSA9IE5ldmVyT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5ldmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvTmV2ZXJPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzg4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG5mdW5jdGlvbiBub29wKCkgeyB9XG5leHBvcnRzLm5vb3AgPSBub29wO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvbm9vcC5qc1xuICoqIG1vZHVsZSBpZCA9IDM4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG9mXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL29mJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZiA9IG9mXzEub2Y7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vZi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL29mLmpzXG4gKiogbW9kdWxlIGlkID0gMzkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vQXJyYXlPYnNlcnZhYmxlJyk7XG5leHBvcnRzLm9mID0gQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlLm9mO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2YuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL29mLmpzXG4gKiogbW9kdWxlIGlkID0gMzkxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmFuZ2VfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvcmFuZ2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhbmdlID0gcmFuZ2VfMS5yYW5nZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhbmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvcmFuZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFJhbmdlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9SYW5nZU9ic2VydmFibGUnKTtcbmV4cG9ydHMucmFuZ2UgPSBSYW5nZU9ic2VydmFibGVfMS5SYW5nZU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL3JhbmdlLmpzXG4gKiogbW9kdWxlIGlkID0gMzkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmFuZ2VPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW5jZSBvZiBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZFxuICAgICAqIHJhbmdlLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGEgc2VxdWVuY2Ugb2YgbnVtYmVycyBpbiBhIHJhbmdlLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvcmFuZ2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBgcmFuZ2VgIG9wZXJhdG9yIGVtaXRzIGEgcmFuZ2Ugb2Ygc2VxdWVudGlhbCBpbnRlZ2VycywgaW4gb3JkZXIsIHdoZXJlIHlvdVxuICAgICAqIHNlbGVjdCB0aGUgYHN0YXJ0YCBvZiB0aGUgcmFuZ2UgYW5kIGl0cyBgbGVuZ3RoYC4gQnkgZGVmYXVsdCwgdXNlcyBub1xuICAgICAqIFNjaGVkdWxlciBhbmQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9ucyBzeW5jaHJvbm91c2x5LCBidXQgbWF5IHVzZVxuICAgICAqIGFuIG9wdGlvbmFsIFNjaGVkdWxlciB0byByZWd1bGF0ZSB0aG9zZSBkZWxpdmVyaWVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgdGhlIG51bWJlcnMgMSB0byAxMDwvY2FwdGlvbj5cbiAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTApO1xuICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgdGltZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgaW50ZXJ2YWx9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgaW50ZWdlciBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb3VudD0wXSBUaGUgbnVtYmVyIG9mIHNlcXVlbnRpYWwgaW50ZWdlcnMgdG8gZ2VuZXJhdGUuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9ucyBvZiB0aGUgbm90aWZpY2F0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIG51bWJlcnMgdGhhdCBlbWl0cyBhIGZpbml0ZSByYW5nZSBvZlxuICAgICAqIHNlcXVlbnRpYWwgaW50ZWdlcnMuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgcmFuZ2VcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIFJhbmdlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgc3RhcnQgPSAwOyB9XG4gICAgICAgIGlmIChjb3VudCA9PT0gdm9pZCAwKSB7IGNvdW50ID0gMDsgfVxuICAgICAgICByZXR1cm4gbmV3IFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBSYW5nZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gc3RhdGUuc3RhcnQsIGluZGV4ID0gc3RhdGUuaW5kZXgsIGNvdW50ID0gc3RhdGUuY291bnQsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoaW5kZXggPj0gY291bnQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQoc3RhcnQpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBzdGF0ZS5zdGFydCA9IHN0YXJ0ICsgMTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBSYW5nZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuICAgICAgICB2YXIgY291bnQgPSB0aGlzLl9jb3VudDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwgY291bnQ6IGNvdW50LCBzdGFydDogc3RhcnQsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCsrID49IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChzdGFydCsrKTtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJhbmdlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuUmFuZ2VPYnNlcnZhYmxlID0gUmFuZ2VPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmFuZ2VPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9SYW5nZU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aHJvd18xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS90aHJvdycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUudGhyb3cgPSB0aHJvd18xLl90aHJvdztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvdGhyb3cuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEVycm9yT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FcnJvck9ic2VydmFibGUnKTtcbmV4cG9ydHMuX3Rocm93ID0gRXJyb3JPYnNlcnZhYmxlXzEuRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS90aHJvdy5qc1xuICoqIG1vZHVsZSBpZCA9IDM5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEVycm9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVycm9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFcnJvck9ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICAgICAqIGVtaXRzIGFuIGVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5KdXN0IGVtaXRzICdlcnJvcicsIGFuZCBub3RoaW5nIGVsc2UuXG4gICAgICogPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy90aHJvdy5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcbiAgICAgKiBlbWl0cyB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLiBJdCBjYW4gYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXJcbiAgICAgKiBPYnNlcnZhYmxlcywgc3VjaCBhcyBpbiBhIHtAbGluayBtZXJnZU1hcH0uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBlbWl0IGFuIGVycm9yLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoJ29vcHMhJykpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW5zIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYycsIGJ1dCB0aHJvdyBhbiBlcnJvciBmb3IgMTM8L2NhcHRpb24+XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICAgICAqICAgeCA9PT0gMTMgP1xuICAgICAqICAgICBSeC5PYnNlcnZhYmxlLnRocm93KCdUaGlydGVlbnMgYXJlIGJhZCcpIDpcbiAgICAgKiAgICAgUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKVxuICAgICAqICk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIG9mfVxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IGVycm9yIFRoZSBwYXJ0aWN1bGFyIEVycm9yIHRvIHBhc3MgdG8gdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAgICAgKiB0aGUgZW1pc3Npb24gb2YgdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBlcnJvciBPYnNlcnZhYmxlOiBlbWl0cyBvbmx5IHRoZSBlcnJvciBub3RpZmljYXRpb25cbiAgICAgKiB1c2luZyB0aGUgZ2l2ZW4gZXJyb3IgYXJndW1lbnQuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgdGhyb3dcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEVycm9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yT2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIGVycm9yID0gYXJnLmVycm9yLCBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG4gICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgRXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGVycm9yID0gdGhpcy5lcnJvcjtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEVycm9yT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRXJyb3JPYnNlcnZhYmxlID0gRXJyb3JPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXJyb3JPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9FcnJvck9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aW1lcl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS90aW1lcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUudGltZXIgPSB0aW1lcl8xLnRpbWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS90aW1lci5qc1xuICoqIG1vZHVsZSBpZCA9IDM5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgVGltZXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1RpbWVyT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy50aW1lciA9IFRpbWVyT2JzZXJ2YWJsZV8xLlRpbWVyT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvdGltZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgaXNOdW1lcmljXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzTnVtZXJpYycpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbnZhciBpc0RhdGVfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNEYXRlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFRpbWVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbWVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaW1lck9ic2VydmFibGUoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGR1ZVRpbWUgPT09IHZvaWQgMCkgeyBkdWVUaW1lID0gMDsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wZXJpb2QgPSAtMTtcbiAgICAgICAgdGhpcy5kdWVUaW1lID0gMDtcbiAgICAgICAgaWYgKGlzTnVtZXJpY18xLmlzTnVtZXJpYyhwZXJpb2QpKSB7XG4gICAgICAgICAgICB0aGlzLnBlcmlvZCA9IE51bWJlcihwZXJpb2QpIDwgMSAmJiAxIHx8IE51bWJlcihwZXJpb2QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIocGVyaW9kKSkge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gcGVyaW9kO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmR1ZVRpbWUgPSBpc0RhdGVfMS5pc0RhdGUoZHVlVGltZSkgP1xuICAgICAgICAgICAgKCtkdWVUaW1lIC0gdGhpcy5zY2hlZHVsZXIubm93KCkpIDpcbiAgICAgICAgICAgIGR1ZVRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IHN0YXJ0cyBlbWl0dGluZyBhZnRlciBhbiBgaW5pdGlhbERlbGF5YCBhbmRcbiAgICAgKiBlbWl0cyBldmVyIGluY3JlYXNpbmcgbnVtYmVycyBhZnRlciBlYWNoIGBwZXJpb2RgIG9mIHRpbWUgdGhlcmVhZnRlci5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdHMgbGlrZSB7QGxpbmsgaW50ZXJ2YWx9LCBidXQgeW91IGNhbiBzcGVjaWZ5IHdoZW5cbiAgICAgKiBzaG91bGQgdGhlIGVtaXNzaW9ucyBzdGFydC48L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3RpbWVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogYHRpbWVyYCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbiBpbmZpbml0ZSBzZXF1ZW5jZSBvZiBhc2NlbmRpbmdcbiAgICAgKiBpbnRlZ2Vycywgd2l0aCBhIGNvbnN0YW50IGludGVydmFsIG9mIHRpbWUsIGBwZXJpb2RgIG9mIHlvdXIgY2hvb3NpbmdcbiAgICAgKiBiZXR3ZWVuIHRob3NlIGVtaXNzaW9ucy4gVGhlIGZpcnN0IGVtaXNzaW9uIGhhcHBlbnMgYWZ0ZXIgdGhlIHNwZWNpZmllZFxuICAgICAqIGBpbml0aWFsRGVsYXlgLiBUaGUgaW5pdGlhbCBkZWxheSBtYXkgYmUgYSB7QGxpbmsgRGF0ZX0uIEJ5IGRlZmF1bHQsIHRoaXNcbiAgICAgKiBvcGVyYXRvciB1c2VzIHRoZSBgYXN5bmNgIFNjaGVkdWxlciB0byBwcm92aWRlIGEgbm90aW9uIG9mIHRpbWUsIGJ1dCB5b3VcbiAgICAgKiBtYXkgcGFzcyBhbnkgU2NoZWR1bGVyIHRvIGl0LiBJZiBgcGVyaW9kYCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgb3V0cHV0XG4gICAgICogT2JzZXJ2YWJsZSBlbWl0cyBvbmx5IG9uZSB2YWx1ZSwgYDBgLiBPdGhlcndpc2UsIGl0IGVtaXRzIGFuIGluZmluaXRlXG4gICAgICogc2VxdWVuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBhc2NlbmRpbmcgbnVtYmVycywgb25lIGV2ZXJ5IHNlY29uZCAoMTAwMG1zKSwgc3RhcnRpbmcgYWZ0ZXIgMyBzZWNvbmRzPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcigzMDAwLCAxMDAwKTtcbiAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIG9uZSBudW1iZXIgYWZ0ZXIgZml2ZSBzZWNvbmRzPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcig1MDAwKTtcbiAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuICAgICAqIEBzZWUge0BsaW5rIGRlbGF5fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8RGF0ZX0gaW5pdGlhbERlbGF5IFRoZSBpbml0aWFsIGRlbGF5IHRpbWUgdG8gd2FpdCBiZWZvcmVcbiAgICAgKiBlbWl0dGluZyB0aGUgZmlyc3QgdmFsdWUgb2YgYDBgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGVyaW9kXSBUaGUgcGVyaW9kIG9mIHRpbWUgYmV0d2VlbiBlbWlzc2lvbnMgb2YgdGhlXG4gICAgICogc3Vic2VxdWVudCBudW1iZXJzLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICAgICAqIHRoZSBlbWlzc2lvbiBvZiB2YWx1ZXMsIGFuZCBwcm92aWRpbmcgYSBub3Rpb24gb2YgXCJ0aW1lXCIuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgYDBgIGFmdGVyIHRoZVxuICAgICAqIGBpbml0aWFsRGVsYXlgIGFuZCBldmVyIGluY3JlYXNpbmcgbnVtYmVycyBhZnRlciBlYWNoIGBwZXJpb2RgIG9mIHRpbWVcbiAgICAgKiB0aGVyZWFmdGVyLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIHRpbWVyXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBUaW1lck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGluaXRpYWxEZWxheSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGluaXRpYWxEZWxheSA9PT0gdm9pZCAwKSB7IGluaXRpYWxEZWxheSA9IDA7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lck9ic2VydmFibGUoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBUaW1lck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5kZXgpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBlcmlvZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgcGVyaW9kKTtcbiAgICB9O1xuICAgIFRpbWVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHBlcmlvZCA9IF9hLnBlcmlvZCwgZHVlVGltZSA9IF9hLmR1ZVRpbWUsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShUaW1lck9ic2VydmFibGUuZGlzcGF0Y2gsIGR1ZVRpbWUsIHtcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCwgcGVyaW9kOiBwZXJpb2QsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGltZXJPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5UaW1lck9ic2VydmFibGUgPSBUaW1lck9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaW1lck9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL1RpbWVyT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTigrdmFsdWUpO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0RhdGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2lzRGF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQwMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHppcF8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS96aXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnppcCA9IHppcF8xLnppcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3ppcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgemlwXzEgPSByZXF1aXJlKCcuLi9vcGVyYXRvci96aXAnKTtcbmV4cG9ydHMuemlwID0gemlwXzEuemlwU3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS96aXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZScpO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xuLyoqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZXNcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59XG4gKiBAbWV0aG9kIHppcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gemlwUHJvdG8oKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIHppcFN0YXRpYy5hcHBseSh0aGlzLCBvYnNlcnZhYmxlcyk7XG59XG5leHBvcnRzLnppcFByb3RvID0gemlwUHJvdG87XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZXNcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59XG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIHppcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gemlwU3RhdGljKCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgcHJvamVjdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuICAgIGlmICh0eXBlb2YgcHJvamVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMpLmxpZnQobmV3IFppcE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuemlwU3RhdGljID0gemlwU3RhdGljO1xudmFyIFppcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBaaXBPcGVyYXRvcihwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgfVxuICAgIFppcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gWmlwT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5aaXBPcGVyYXRvciA9IFppcE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBaaXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoWmlwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBaaXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHZhbHVlcyA9PT0gdm9pZCAwKSB7IHZhbHVlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5pdGVyYXRvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLnByb2plY3QgPSAodHlwZW9mIHByb2plY3QgPT09ICdmdW5jdGlvbicpID8gcHJvamVjdCA6IG51bGw7XG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgIH1cbiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0FycmF5SXRlcmF0b3IodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0l0ZXJhdG9yKHZhbHVlW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0oKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFppcEJ1ZmZlckl0ZXJhdG9yKHRoaXMuZGVzdGluYXRpb24sIHRoaXMsIHZhbHVlLCBpbmRleCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcbiAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAoaXRlcmF0b3Iuc3RpbGxVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpdGVyYXRvci5zdWJzY3JpYmUoaXRlcmF0b3IsIGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlLS07IC8vIG5vdCBhbiBvYnNlcnZhYmxlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcbiAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIC8vIGFib3J0IGlmIG5vdCBhbGwgb2YgdGhlbSBoYXZlIHZhbHVlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yLmhhc1ZhbHVlID09PSAnZnVuY3Rpb24nICYmICFpdGVyYXRvci5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaG91bGRDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGl0J3MgY29tcGxldGVkIG5vdyB0aGF0IHlvdSd2ZSBnb3R0ZW5cbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmhhc0NvbXBsZXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzLnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl90cnlQcm9qZWN0KGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkQ29tcGxldGUpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcm9qZWN0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gWmlwU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuWmlwU3Vic2NyaWJlciA9IFppcFN1YnNjcmliZXI7XG52YXIgU3RhdGljSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRpY0l0ZXJhdG9yKGl0ZXJhdG9yKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdGVyYXRvcjtcbiAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgIH1cbiAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG4gICAgICAgIHRoaXMubmV4dFJlc3VsdCA9IHRoaXMuaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5leHRSZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG4gICAgICAgIHJldHVybiBuZXh0UmVzdWx0ICYmIG5leHRSZXN1bHQuZG9uZTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0aWNJdGVyYXRvcjtcbn0oKSk7XG52YXIgU3RhdGljQXJyYXlJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGljQXJyYXlJdGVyYXRvcihhcnJheSkge1xuICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIH1cbiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgICAgIHJldHVybiBpIDwgdGhpcy5sZW5ndGggPyB7IHZhbHVlOiBhcnJheVtpXSwgZG9uZTogZmFsc2UgfSA6IHsgZG9uZTogdHJ1ZSB9O1xuICAgIH07XG4gICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA+IHRoaXMuaW5kZXg7XG4gICAgfTtcbiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA9PT0gdGhpcy5pbmRleDtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0aWNBcnJheUl0ZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgWmlwQnVmZmVySXRlcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhaaXBCdWZmZXJJdGVyYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBaaXBCdWZmZXJJdGVyYXRvcihkZXN0aW5hdGlvbiwgcGFyZW50LCBvYnNlcnZhYmxlLCBpbmRleCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuc3RpbGxVbnN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICB9XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLy8gTk9URTogdGhlcmUgaXMgYWN0dWFsbHkgYSBuYW1lIGNvbGxpc2lvbiBoZXJlIHdpdGggU3Vic2NyaWJlci5uZXh0IGFuZCBJdGVyYXRvci5uZXh0XG4gICAgLy8gICAgdGhpcyBpcyBsZWdpdCBiZWNhdXNlIGBuZXh0KClgIHdpbGwgbmV2ZXIgYmUgY2FsbGVkIGJ5IGEgc3Vic2NyaXB0aW9uIGluIHRoaXMgY2FzZS5cbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBidWZmZXIuc2hpZnQoKSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlO1xuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnB1c2goaW5uZXJWYWx1ZSk7XG4gICAgICAgIHRoaXMucGFyZW50LmNoZWNrSXRlcmF0b3JzKCk7XG4gICAgfTtcbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB0aGlzLm9ic2VydmFibGUsIHRoaXMsIGluZGV4KTtcbiAgICB9O1xuICAgIHJldHVybiBaaXBCdWZmZXJJdGVyYXRvcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD16aXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci96aXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2J1ZmZlcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlciA9IGJ1ZmZlcl8xLmJ1ZmZlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgdW50aWwgYGNsb3NpbmdOb3RpZmllcmAgZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcbiAqIHRoYXQgYXJyYXkgb25seSB3aGVuIGFub3RoZXIgT2JzZXJ2YWJsZSBlbWl0cy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQnVmZmVycyB0aGUgaW5jb21pbmcgT2JzZXJ2YWJsZSB2YWx1ZXMgdW50aWwgdGhlIGdpdmVuIGBjbG9zaW5nTm90aWZpZXJgXG4gKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGF0IHdoaWNoIHBvaW50IGl0IGVtaXRzIHRoZSBidWZmZXIgb24gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZSBhbmQgc3RhcnRzIGEgbmV3IGJ1ZmZlciBpbnRlcm5hbGx5LCBhd2FpdGluZyB0aGUgbmV4dCB0aW1lXG4gKiBgY2xvc2luZ05vdGlmaWVyYCBlbWl0cy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljaywgZW1pdCBhcnJheSBvZiBtb3N0IHJlY2VudCBpbnRlcnZhbCBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBidWZmZXJlZCA9IGludGVydmFsLmJ1ZmZlcihjbGlja3MpO1xuICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlPGFueT59IGNsb3NpbmdOb3RpZmllciBBbiBPYnNlcnZhYmxlIHRoYXQgc2lnbmFscyB0aGVcbiAqIGJ1ZmZlciB0byBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gT2JzZXJ2YWJsZSBvZiBidWZmZXJzLCB3aGljaCBhcmUgYXJyYXlzIG9mXG4gKiB2YWx1ZXMuXG4gKiBAbWV0aG9kIGJ1ZmZlclxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyKGNsb3NpbmdOb3RpZmllcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikpO1xufVxuZXhwb3J0cy5idWZmZXIgPSBidWZmZXI7XG52YXIgQnVmZmVyT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikge1xuICAgICAgICB0aGlzLmNsb3NpbmdOb3RpZmllciA9IGNsb3NpbmdOb3RpZmllcjtcbiAgICB9XG4gICAgQnVmZmVyT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdOb3RpZmllcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlck9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQnVmZmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1ZmZlclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQnVmZmVyU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ05vdGlmaWVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIpKTtcbiAgICB9XG4gICAgQnVmZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgfTtcbiAgICBCdWZmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9idWZmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJDb3VudF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYnVmZmVyQ291bnQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50XzEuYnVmZmVyQ291bnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJDb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJDb3VudC5qc1xuICoqIG1vZHVsZSBpZCA9IDQwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyB1bnRpbCB0aGUgc2l6ZSBoaXRzIHRoZSBtYXhpbXVtXG4gKiBgYnVmZmVyU2l6ZWAgZ2l2ZW4uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcbiAqIHRoYXQgYXJyYXkgb25seSB3aGVuIGl0cyBzaXplIHJlYWNoZXMgYGJ1ZmZlclNpemVgLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlckNvdW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEJ1ZmZlcnMgYSBudW1iZXIgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGBidWZmZXJTaXplYCB0aGVuXG4gKiBlbWl0cyB0aGUgYnVmZmVyIGFuZCBjbGVhcnMgaXQsIGFuZCBzdGFydHMgYSBuZXcgYnVmZmVyIGVhY2hcbiAqIGBzdGFydEJ1ZmZlckV2ZXJ5YCB2YWx1ZXMuIElmIGBzdGFydEJ1ZmZlckV2ZXJ5YCBpcyBub3QgcHJvdmlkZWQgb3IgaXNcbiAqIGBudWxsYCwgdGhlbiBuZXcgYnVmZmVycyBhcmUgc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZVxuICogYW5kIHdoZW4gZWFjaCBidWZmZXIgY2xvc2VzIGFuZCBpcyBlbWl0dGVkLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyQ291bnQoMik7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2ssIGVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyQ291bnQoMiwgMSk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKiBAc2VlIHtAbGluayBwYWlyd2lzZX1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJTaXplIFRoZSBtYXhpbXVtIHNpemUgb2YgdGhlIGJ1ZmZlciBlbWl0dGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydEJ1ZmZlckV2ZXJ5XSBJbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBhIG5ldyBidWZmZXIuXG4gKiBGb3IgZXhhbXBsZSBpZiBgc3RhcnRCdWZmZXJFdmVyeWAgaXMgYDJgLCB0aGVuIGEgbmV3IGJ1ZmZlciB3aWxsIGJlIHN0YXJ0ZWRcbiAqIG9uIGV2ZXJ5IG90aGVyIHZhbHVlIGZyb20gdGhlIHNvdXJjZS4gQSBuZXcgYnVmZmVyIGlzIHN0YXJ0ZWQgYXQgdGhlXG4gKiBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBieSBkZWZhdWx0LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBPYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG4gKiBAbWV0aG9kIGJ1ZmZlckNvdW50XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBidWZmZXJDb3VudChidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7XG4gICAgaWYgKHN0YXJ0QnVmZmVyRXZlcnkgPT09IHZvaWQgMCkgeyBzdGFydEJ1ZmZlckV2ZXJ5ID0gbnVsbDsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlckNvdW50T3BlcmF0b3IoYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkpO1xufVxuZXhwb3J0cy5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50O1xudmFyIEJ1ZmZlckNvdW50T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1ZmZlckNvdW50T3BlcmF0b3IoYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkge1xuICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuICAgICAgICB0aGlzLnN0YXJ0QnVmZmVyRXZlcnkgPSBzdGFydEJ1ZmZlckV2ZXJ5O1xuICAgIH1cbiAgICBCdWZmZXJDb3VudE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlckNvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmJ1ZmZlclNpemUsIHRoaXMuc3RhcnRCdWZmZXJFdmVyeSkpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlckNvdW50T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBCdWZmZXJDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdWZmZXJDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQnVmZmVyQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcbiAgICAgICAgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID0gc3RhcnRCdWZmZXJFdmVyeTtcbiAgICAgICAgdGhpcy5idWZmZXJzID0gW1tdXTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuICAgIEJ1ZmZlckNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gKHRoaXMuY291bnQgKz0gMSk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciBidWZmZXJTaXplID0gdGhpcy5idWZmZXJTaXplO1xuICAgICAgICB2YXIgc3RhcnRCdWZmZXJFdmVyeSA9ICh0aGlzLnN0YXJ0QnVmZmVyRXZlcnkgPT0gbnVsbCkgPyBidWZmZXJTaXplIDogdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5O1xuICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcbiAgICAgICAgdmFyIGxlbiA9IGJ1ZmZlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgcmVtb3ZlID0gLTE7XG4gICAgICAgIGlmIChjb3VudCAlIHN0YXJ0QnVmZmVyRXZlcnkgPT09IDApIHtcbiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChbXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGJ1ZmZlcnNbaV07XG4gICAgICAgICAgICBidWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZSA9IGk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdmUgIT09IC0xKSB7XG4gICAgICAgICAgICBidWZmZXJzLnNwbGljZShyZW1vdmUsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCdWZmZXJDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSB0aGlzLmJ1ZmZlcnM7XG4gICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBidWZmZXJzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJDb3VudFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJDb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlckNvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gNDA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYnVmZmVyVGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYnVmZmVyVGltZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlclRpbWUgPSBidWZmZXJUaW1lXzEuYnVmZmVyVGltZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlclRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQwOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgZm9yIGEgc3BlY2lmaWMgdGltZSBwZXJpb2QuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcbiAqIHRob3NlIGFycmF5cyBwZXJpb2RpY2FsbHkgaW4gdGltZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEJ1ZmZlcnMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBmb3IgYSBzcGVjaWZpYyB0aW1lIGR1cmF0aW9uIGBidWZmZXJUaW1lU3BhbmAuXG4gKiBVbmxlc3MgdGhlIG9wdGlvbmFsIGFyZ3VtZW50IGBidWZmZXJDcmVhdGlvbkludGVydmFsYCBpcyBnaXZlbiwgaXQgZW1pdHMgYW5kXG4gKiByZXNldHMgdGhlIGJ1ZmZlciBldmVyeSBgYnVmZmVyVGltZVNwYW5gIG1pbGxpc2Vjb25kcy4gSWZcbiAqIGBidWZmZXJDcmVhdGlvbkludGVydmFsYCBpcyBnaXZlbiwgdGhpcyBvcGVyYXRvciBvcGVucyB0aGUgYnVmZmVyIGV2ZXJ5XG4gKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgbWlsbGlzZWNvbmRzIGFuZCBjbG9zZXMgKGVtaXRzIGFuZCByZXNldHMpIHRoZVxuICogYnVmZmVyIGV2ZXJ5IGBidWZmZXJUaW1lU3BhbmAgbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IHNlY29uZCwgZW1pdCBhbiBhcnJheSBvZiB0aGUgcmVjZW50IGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyVGltZSgxMDAwKTtcbiAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSA1IHNlY29uZHMsIGVtaXQgdGhlIGNsaWNrIGV2ZW50cyBmcm9tIHRoZSBuZXh0IDIgc2Vjb25kczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyVGltZSgyMDAwLCA1MDAwKTtcbiAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBidWZmZXJ9XG4gKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJUaW1lU3BhbiBUaGUgYW1vdW50IG9mIHRpbWUgdG8gZmlsbCBlYWNoIGJ1ZmZlciBhcnJheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbYnVmZmVyQ3JlYXRpb25JbnRlcnZhbF0gVGhlIGludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IG5ld1xuICogYnVmZmVycy5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuICogaW50ZXJ2YWxzIHRoYXQgZGV0ZXJtaW5lIGJ1ZmZlciBib3VuZGFyaWVzLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBvYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG4gKiBAbWV0aG9kIGJ1ZmZlclRpbWVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlclRpbWUoYnVmZmVyVGltZVNwYW4sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuICAgIGlmIChidWZmZXJDcmVhdGlvbkludGVydmFsID09PSB2b2lkIDApIHsgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IG51bGw7IH1cbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlclRpbWVPcGVyYXRvcihidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmJ1ZmZlclRpbWUgPSBidWZmZXJUaW1lO1xudmFyIEJ1ZmZlclRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnVmZmVyVGltZU9wZXJhdG9yKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuICAgICAgICB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBidWZmZXJDcmVhdGlvbkludGVydmFsO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgQnVmZmVyVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlclRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYnVmZmVyVGltZVNwYW4sIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJUaW1lT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBCdWZmZXJUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1ZmZlclRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJ1ZmZlclRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuICAgICAgICB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBidWZmZXJDcmVhdGlvbkludGVydmFsO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5idWZmZXJzID0gW107XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLm9wZW5CdWZmZXIoKTtcbiAgICAgICAgaWYgKGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgIT09IG51bGwgJiYgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgYnVmZmVyOiBidWZmZXIgfTtcbiAgICAgICAgICAgIHZhciBjcmVhdGlvblN0YXRlID0geyBidWZmZXJUaW1lU3BhbjogYnVmZmVyVGltZVNwYW4sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw6IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHN1YnNjcmliZXI6IHRoaXMsIHNjaGVkdWxlcjogc2NoZWR1bGVyIH07XG4gICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDbG9zZSwgYnVmZmVyVGltZVNwYW4sIGNsb3NlU3RhdGUpKTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNyZWF0aW9uLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBjcmVhdGlvblN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGltZVNwYW5Pbmx5U3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIGJ1ZmZlcjogYnVmZmVyLCBidWZmZXJUaW1lU3BhbjogYnVmZmVyVGltZVNwYW4gfTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlclRpbWVTcGFuT25seSwgYnVmZmVyVGltZVNwYW4sIHRpbWVTcGFuT25seVN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGJ1ZmZlcnNbaV0ucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycy5sZW5ndGggPSAwO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIGVycik7XG4gICAgfTtcbiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBidWZmZXJzID0gX2EuYnVmZmVycywgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcbiAgICAgICAgd2hpbGUgKGJ1ZmZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXJzLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBudWxsO1xuICAgIH07XG4gICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9O1xuICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuICAgICAgICBidWZmZXJzLnNwbGljZShidWZmZXJzLmluZGV4T2YoYnVmZmVyKSwgMSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyVGltZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5mdW5jdGlvbiBkaXNwYXRjaEJ1ZmZlclRpbWVTcGFuT25seShzdGF0ZSkge1xuICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICB2YXIgcHJldkJ1ZmZlciA9IHN0YXRlLmJ1ZmZlcjtcbiAgICBpZiAocHJldkJ1ZmZlcikge1xuICAgICAgICBzdWJzY3JpYmVyLmNsb3NlQnVmZmVyKHByZXZCdWZmZXIpO1xuICAgIH1cbiAgICBzdGF0ZS5idWZmZXIgPSBzdWJzY3JpYmVyLm9wZW5CdWZmZXIoKTtcbiAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgc3RhdGUuYnVmZmVyVGltZVNwYW4pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ3JlYXRpb24oc3RhdGUpIHtcbiAgICB2YXIgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IHN0YXRlLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIGJ1ZmZlclRpbWVTcGFuID0gc3RhdGUuYnVmZmVyVGltZVNwYW4sIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXI7XG4gICAgdmFyIGJ1ZmZlciA9IHN1YnNjcmliZXIub3BlbkJ1ZmZlcigpO1xuICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICBhY3Rpb24uYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNsb3NlLCBidWZmZXJUaW1lU3BhbiwgeyBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCBidWZmZXI6IGJ1ZmZlciB9KSk7XG4gICAgICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJDbG9zZShhcmcpIHtcbiAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyLCBidWZmZXIgPSBhcmcuYnVmZmVyO1xuICAgIHN1YnNjcmliZXIuY2xvc2VCdWZmZXIoYnVmZmVyKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlclRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9idWZmZXJUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNDEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYnVmZmVyVG9nZ2xlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9idWZmZXJUb2dnbGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJUb2dnbGUgPSBidWZmZXJUb2dnbGVfMS5idWZmZXJUb2dnbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUb2dnbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyVG9nZ2xlLmpzXG4gKiogbW9kdWxlIGlkID0gNDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgc3RhcnRpbmcgZnJvbSBhbiBlbWlzc2lvbiBmcm9tXG4gKiBgb3BlbmluZ3NgIGFuZCBlbmRpbmcgd2hlbiB0aGUgb3V0cHV0IG9mIGBjbG9zaW5nU2VsZWN0b3JgIGVtaXRzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db2xsZWN0cyB2YWx1ZXMgZnJvbSB0aGUgcGFzdCBhcyBhbiBhcnJheS4gU3RhcnRzXG4gKiBjb2xsZWN0aW5nIG9ubHkgd2hlbiBgb3BlbmluZ2AgZW1pdHMsIGFuZCBjYWxscyB0aGUgYGNsb3NpbmdTZWxlY3RvcmBcbiAqIGZ1bmN0aW9uIHRvIGdldCBhbiBPYnNlcnZhYmxlIHRoYXQgdGVsbHMgd2hlbiB0byBjbG9zZSB0aGUgYnVmZmVyLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlclRvZ2dsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBCdWZmZXJzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgYnkgb3BlbmluZyB0aGUgYnVmZmVyIHZpYSBzaWduYWxzIGZyb20gYW5cbiAqIE9ic2VydmFibGUgcHJvdmlkZWQgdG8gYG9wZW5pbmdzYCwgYW5kIGNsb3NpbmcgYW5kIHNlbmRpbmcgdGhlIGJ1ZmZlcnMgd2hlblxuICogYSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYGNsb3NpbmdTZWxlY3RvcmAgZnVuY3Rpb24gZW1pdHMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgb3RoZXIgc2Vjb25kLCBlbWl0IHRoZSBjbGljayBldmVudHMgZnJvbSB0aGUgbmV4dCA1MDBtczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgb3BlbmluZ3MgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRvZ2dsZShvcGVuaW5ncywgaSA9PlxuICogICBpICUgMiA/IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKSA6IFJ4Lk9ic2VydmFibGUuZW1wdHkoKVxuICogKTtcbiAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBidWZmZXJ9XG4gKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG4gKiBAc2VlIHtAbGluayBidWZmZXJXaGVufVxuICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuICpcbiAqIEBwYXJhbSB7U3Vic2NyaWJhYmxlT3JQcm9taXNlPE8+fSBvcGVuaW5ncyBBIFN1YnNjcmliYWJsZSBvciBQcm9taXNlIG9mIG5vdGlmaWNhdGlvbnMgdG8gc3RhcnQgbmV3XG4gKiBidWZmZXJzLlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogTyk6IFN1YnNjcmliYWJsZU9yUHJvbWlzZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuICogdGhlIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIGBvcGVuaW5nc2Agb2JzZXJ2YWJsZSBhbmQgcmV0dXJucyBhIFN1YnNjcmliYWJsZSBvciBQcm9taXNlLFxuICogd2hpY2gsIHdoZW4gaXQgZW1pdHMsIHNpZ25hbHMgdGhhdCB0aGUgYXNzb2NpYXRlZCBidWZmZXIgc2hvdWxkIGJlIGVtaXR0ZWRcbiAqIGFuZCBjbGVhcmVkLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBvYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG4gKiBAbWV0aG9kIGJ1ZmZlclRvZ2dsZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyVG9nZ2xlKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG59XG5leHBvcnRzLmJ1ZmZlclRvZ2dsZSA9IGJ1ZmZlclRvZ2dsZTtcbnZhciBCdWZmZXJUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnVmZmVyVG9nZ2xlT3BlcmF0b3Iob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgIH1cbiAgICBCdWZmZXJUb2dnbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyVG9nZ2xlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVmZmVyVG9nZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9wZW5pbmdzKSk7XG4gICAgfVxuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnRleHRzW2ldLmJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0cy5zaGlmdCgpO1xuICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGNvbnRleHQuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCBlcnIpO1xuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0cy5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGNvbnRleHQuYnVmZmVyKTtcbiAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjb250ZXh0LmJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIG91dGVyVmFsdWUgPyB0aGlzLmNsb3NlQnVmZmVyKG91dGVyVmFsdWUpIDogdGhpcy5vcGVuQnVmZmVyKGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5jbG9zZUJ1ZmZlcihpbm5lclN1Yi5jb250ZXh0KTtcbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBjbG9zaW5nU2VsZWN0b3IgPSB0aGlzLmNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSBjbG9zaW5nU2VsZWN0b3IuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlTdWJzY3JpYmUoY2xvc2luZ05vdGlmaWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIGlmIChjb250ZXh0cyAmJiBjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gY29udGV4dC5idWZmZXIsIHN1YnNjcmlwdGlvbiA9IGNvbnRleHQuc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgICAgICAgICBjb250ZXh0cy5zcGxpY2UoY29udGV4dHMuaW5kZXhPZihjb250ZXh0KSwgMSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLnRyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChjbG9zaW5nTm90aWZpZXIpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdmFyIGJ1ZmZlciA9IFtdO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHsgYnVmZmVyOiBidWZmZXIsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG4gICAgICAgIGNvbnRleHRzLnB1c2goY29udGV4dCk7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKCFpbm5lclN1YnNjcmlwdGlvbiB8fCBpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUJ1ZmZlcihjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlclRvZ2dsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlclRvZ2dsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGJ1ZmZlcldoZW5fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2J1ZmZlcldoZW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJXaGVuID0gYnVmZmVyV2hlbl8xLmJ1ZmZlcldoZW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlcldoZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA0MTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMsIHVzaW5nIGEgZmFjdG9yeSBmdW5jdGlvbiBvZiBjbG9zaW5nXG4gKiBPYnNlcnZhYmxlcyB0byBkZXRlcm1pbmUgd2hlbiB0byBjbG9zZSwgZW1pdCwgYW5kIHJlc2V0IHRoZSBidWZmZXIuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LiBXaGVuIGl0XG4gKiBzdGFydHMgY29sbGVjdGluZyB2YWx1ZXMsIGl0IGNhbGxzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdFxuICogdGVsbHMgd2hlbiB0byBjbG9zZSB0aGUgYnVmZmVyIGFuZCByZXN0YXJ0IGNvbGxlY3RpbmcuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyV2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBPcGVucyBhIGJ1ZmZlciBpbW1lZGlhdGVseSwgdGhlbiBjbG9zZXMgdGhlIGJ1ZmZlciB3aGVuIHRoZSBvYnNlcnZhYmxlXG4gKiByZXR1cm5lZCBieSBjYWxsaW5nIGBjbG9zaW5nU2VsZWN0b3JgIGZ1bmN0aW9uIGVtaXRzIGEgdmFsdWUuIFdoZW4gaXQgY2xvc2VzXG4gKiB0aGUgYnVmZmVyLCBpdCBpbW1lZGlhdGVseSBvcGVucyBhIG5ldyBidWZmZXIgYW5kIHJlcGVhdHMgdGhlIHByb2Nlc3MuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBhbiBhcnJheSBvZiB0aGUgbGFzdCBjbGlja3MgZXZlcnkgWzEtNV0gcmFuZG9tIHNlY29uZHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlcldoZW4oKCkgPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwICsgTWF0aC5yYW5kb20oKSAqIDQwMDApXG4gKiApO1xuICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigpOiBPYnNlcnZhYmxlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vXG4gKiBhcmd1bWVudHMgYW5kIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNpZ25hbHMgYnVmZmVyIGNsb3N1cmUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIG9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cbiAqIEBtZXRob2QgYnVmZmVyV2hlblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyV2hlbihjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJXaGVuT3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSk7XG59XG5leHBvcnRzLmJ1ZmZlcldoZW4gPSBidWZmZXJXaGVuO1xudmFyIEJ1ZmZlcldoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnVmZmVyV2hlbk9wZXJhdG9yKGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjtcbiAgICB9XG4gICAgQnVmZmVyV2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlcldoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyV2hlbk9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQnVmZmVyV2hlblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdWZmZXJXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCdWZmZXJXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vcGVuQnVmZmVyKCk7XG4gICAgfVxuICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICB9O1xuICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlO1xuICAgIH07XG4gICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5vcGVuQnVmZmVyKCk7XG4gICAgfTtcbiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmliaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbG9zaW5nU3Vic2NyaXB0aW9uID0gdGhpcy5jbG9zaW5nU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoY2xvc2luZ1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoY2xvc2luZ1N1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY2xvc2luZ1NlbGVjdG9yKSgpO1xuICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5jbG9zaW5nU3Vic2NyaXB0aW9uID0gY2xvc2luZ1N1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHRoaXMuYWRkKGNsb3NpbmdTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IHRydWU7XG4gICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllcikpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyV2hlblN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyV2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlcldoZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA0MTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjYWNoZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY2FjaGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jYWNoZSA9IGNhY2hlXzEuY2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcHVibGlzaFJlcGxheV8xID0gcmVxdWlyZSgnLi9wdWJsaXNoUmVwbGF5Jyk7XG4vKipcbiAqIEBwYXJhbSBidWZmZXJTaXplXG4gKiBAcGFyYW0gd2luZG93VGltZVxuICogQHBhcmFtIHNjaGVkdWxlclxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnk+fVxuICogQG1ldGhvZCBjYWNoZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY2FjaGUoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgcmV0dXJuIHB1Ymxpc2hSZXBsYXlfMS5wdWJsaXNoUmVwbGF5LmNhbGwodGhpcywgYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKS5yZWZDb3VudCgpO1xufVxuZXhwb3J0cy5jYWNoZSA9IGNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUmVwbGF5U3ViamVjdF8xID0gcmVxdWlyZSgnLi4vUmVwbGF5U3ViamVjdCcpO1xudmFyIG11bHRpY2FzdF8xID0gcmVxdWlyZSgnLi9tdWx0aWNhc3QnKTtcbi8qKlxuICogQHBhcmFtIGJ1ZmZlclNpemVcbiAqIEBwYXJhbSB3aW5kb3dUaW1lXG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHB1Ymxpc2hSZXBsYXlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hSZXBsYXkoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgcmV0dXJuIG11bHRpY2FzdF8xLm11bHRpY2FzdC5jYWxsKHRoaXMsIG5ldyBSZXBsYXlTdWJqZWN0XzEuUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoUmVwbGF5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaFJlcGxheS5qc1xuICoqIG1vZHVsZSBpZCA9IDQxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuL1N1YmplY3QnKTtcbnZhciBxdWV1ZV8xID0gcmVxdWlyZSgnLi9zY2hlZHVsZXIvcXVldWUnKTtcbnZhciBvYnNlcnZlT25fMSA9IHJlcXVpcmUoJy4vb3BlcmF0b3Ivb2JzZXJ2ZU9uJyk7XG4vKipcbiAqIEBjbGFzcyBSZXBsYXlTdWJqZWN0PFQ+XG4gKi9cbnZhciBSZXBsYXlTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVwbGF5U3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoYnVmZmVyU2l6ZSA9PT0gdm9pZCAwKSB7IGJ1ZmZlclNpemUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmV2ZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZSA8IDEgPyAxIDogYnVmZmVyU2l6ZTtcbiAgICAgICAgdGhpcy5fd2luZG93VGltZSA9IHdpbmRvd1RpbWUgPCAxID8gMSA6IHdpbmRvd1RpbWU7XG4gICAgfVxuICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBub3cgPSB0aGlzLl9nZXROb3coKTtcbiAgICAgICAgdGhpcy5ldmVudHMucHVzaChuZXcgUmVwbGF5RXZlbnQobm93LCB2YWx1ZSkpO1xuICAgICAgICB0aGlzLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyhub3cpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH07XG4gICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBldmVudHMgPSB0aGlzLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyh0aGlzLl9nZXROb3coKSk7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQoc3Vic2NyaWJlciA9IG5ldyBvYnNlcnZlT25fMS5PYnNlcnZlT25TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHNjaGVkdWxlcikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgbGVuID0gZXZlbnRzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4gJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChldmVudHNbaW5kZXhdLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fZ2V0Tm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuc2NoZWR1bGVyIHx8IHF1ZXVlXzEucXVldWUpLm5vdygpO1xuICAgIH07XG4gICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzID0gZnVuY3Rpb24gKG5vdykge1xuICAgICAgICB2YXIgYnVmZmVyU2l6ZSA9IHRoaXMuYnVmZmVyU2l6ZTtcbiAgICAgICAgdmFyIF93aW5kb3dUaW1lID0gdGhpcy5fd2luZG93VGltZTtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzO1xuICAgICAgICB2YXIgZXZlbnRzQ291bnQgPSBldmVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgc3BsaWNlQ291bnQgPSAwO1xuICAgICAgICAvLyBUcmltIGV2ZW50cyB0aGF0IGZhbGwgb3V0IG9mIHRoZSB0aW1lIHdpbmRvdy5cbiAgICAgICAgLy8gU3RhcnQgYXQgdGhlIGZyb250IG9mIHRoZSBsaXN0LiBCcmVhayBlYXJseSBvbmNlXG4gICAgICAgIC8vIHdlIGVuY291bnRlciBhbiBldmVudCB0aGF0IGZhbGxzIHdpdGhpbiB0aGUgd2luZG93LlxuICAgICAgICB3aGlsZSAoc3BsaWNlQ291bnQgPCBldmVudHNDb3VudCkge1xuICAgICAgICAgICAgaWYgKChub3cgLSBldmVudHNbc3BsaWNlQ291bnRdLnRpbWUpIDwgX3dpbmRvd1RpbWUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwbGljZUNvdW50ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50c0NvdW50ID4gYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgc3BsaWNlQ291bnQgPSBNYXRoLm1heChzcGxpY2VDb3VudCwgZXZlbnRzQ291bnQgLSBidWZmZXJTaXplKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3BsaWNlQ291bnQgPiAwKSB7XG4gICAgICAgICAgICBldmVudHMuc3BsaWNlKDAsIHNwbGljZUNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcGxheVN1YmplY3Q7XG59KFN1YmplY3RfMS5TdWJqZWN0KSk7XG5leHBvcnRzLlJlcGxheVN1YmplY3QgPSBSZXBsYXlTdWJqZWN0O1xudmFyIFJlcGxheUV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXBsYXlFdmVudCh0aW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBSZXBsYXlFdmVudDtcbn0oKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXlTdWJqZWN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvUmVwbGF5U3ViamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUXVldWVTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4vUXVldWVTY2hlZHVsZXInKTtcbmV4cG9ydHMucXVldWUgPSBuZXcgUXVldWVTY2hlZHVsZXJfMS5RdWV1ZVNjaGVkdWxlcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvcXVldWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGUnKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdHMgb2YgaW52b2tpbmcgYSBzcGVjaWZpZWQgc2VsZWN0b3Igb24gaXRlbXNcbiAqIGVtaXR0ZWQgYnkgYSBDb25uZWN0YWJsZU9ic2VydmFibGUgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL211bHRpY2FzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciAtIGEgZnVuY3Rpb24gdGhhdCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc3RyZWFtXG4gKiBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzdHJlYW0uXG4gKiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgcmVjZWl2ZSBhbGwgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIGZyb20gdGhlXG4gKiB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gZm9yd2FyZC5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3JcbiAqIG9uIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IGEgYENvbm5lY3RhYmxlT2JzZXJ2YWJsZWAgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvXG4gKiB0aGUgdW5kZXJseWluZyBzdHJlYW0uXG4gKiBAbWV0aG9kIG11bHRpY2FzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbXVsdGljYXN0KHN1YmplY3RPclN1YmplY3RGYWN0b3J5KSB7XG4gICAgdmFyIHN1YmplY3RGYWN0b3J5O1xuICAgIGlmICh0eXBlb2Ygc3ViamVjdE9yU3ViamVjdEZhY3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN1YmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gc3ViamVjdEZhY3RvcnkoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdE9yU3ViamVjdEZhY3Rvcnk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBuZXcgQ29ubmVjdGFibGVPYnNlcnZhYmxlXzEuQ29ubmVjdGFibGVPYnNlcnZhYmxlKHRoaXMsIHN1YmplY3RGYWN0b3J5KTtcbn1cbmV4cG9ydHMubXVsdGljYXN0ID0gbXVsdGljYXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bXVsdGljYXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbXVsdGljYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbi8qKlxuICogQGNsYXNzIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPlxuICovXG52YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29ubmVjdGFibGVPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbm5lY3RhYmxlT2JzZXJ2YWJsZShzb3VyY2UsIHN1YmplY3RGYWN0b3J5KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5zdWJqZWN0RmFjdG9yeSA9IHN1YmplY3RGYWN0b3J5O1xuICAgIH1cbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdWJqZWN0KCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5nZXRTdWJqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcbiAgICAgICAgaWYgKHN1YmplY3QgJiYgIXN1YmplY3QuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJqZWN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAodGhpcy5zdWJqZWN0ID0gdGhpcy5zdWJqZWN0RmFjdG9yeSgpKTtcbiAgICB9O1xuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb247XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMuZ2V0U3ViamVjdCgpKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24odGhpcykpO1xuICAgICAgICByZXR1cm4gKHRoaXMuc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVmQ291bnRPYnNlcnZhYmxlKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgb3BlbmVkIGZvciBgQ29ubmVjdGFibGVTdWJzY3JpcHRpb25gLlxuICAgICAqIE5vdCB0byBjYWxsIGZyb20gb3RoZXJzLlxuICAgICAqL1xuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX2Nsb3NlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN1YmplY3QgPSBudWxsO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQ29ubmVjdGFibGVPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Db25uZWN0YWJsZU9ic2VydmFibGUgPSBDb25uZWN0YWJsZU9ic2VydmFibGU7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29ubmVjdGFibGVTdWJzY3JpcHRpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVTdWJzY3JpcHRpb24oY29ubmVjdGFibGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBjb25uZWN0YWJsZTtcbiAgICB9XG4gICAgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24ucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTtcbiAgICAgICAgY29ubmVjdGFibGUuX2Nsb3NlU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmVmQ291bnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVmQ291bnRPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlZkNvdW50T2JzZXJ2YWJsZShjb25uZWN0YWJsZSwgcmVmQ291bnQpIHtcbiAgICAgICAgaWYgKHJlZkNvdW50ID09PSB2b2lkIDApIHsgcmVmQ291bnQgPSAwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG4gICAgICAgIHRoaXMucmVmQ291bnQgPSByZWZDb3VudDtcbiAgICB9XG4gICAgUmVmQ291bnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTtcbiAgICAgICAgdmFyIHJlZkNvdW50U3Vic2NyaWJlciA9IG5ldyBSZWZDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcyk7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBjb25uZWN0YWJsZS5zdWJzY3JpYmUocmVmQ291bnRTdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQgJiYgKyt0aGlzLnJlZkNvdW50ID09PSAxKSB7XG4gICAgICAgICAgICByZWZDb3VudFN1YnNjcmliZXIuY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3RhYmxlLmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIFJlZkNvdW50T2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmVmQ291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVmQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlZkNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcmVmQ291bnRPYnNlcnZhYmxlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIG51bGwpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMucmVmQ291bnRPYnNlcnZhYmxlID0gcmVmQ291bnRPYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSByZWZDb3VudE9ic2VydmFibGUuY29ubmVjdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24uYWRkKHRoaXMpO1xuICAgIH1cbiAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRDb25uZWN0YWJsZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRDb25uZWN0YWJsZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9yZXNldENvbm5lY3RhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHRoaXMucmVmQ291bnRPYnNlcnZhYmxlO1xuICAgICAgICB2YXIgb2JzQ29ubmVjdGlvbiA9IG9ic2VydmFibGUuY29ubmVjdGlvbjtcbiAgICAgICAgdmFyIHN1YkNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb247XG4gICAgICAgIGlmIChzdWJDb25uZWN0aW9uICYmIHN1YkNvbm5lY3Rpb24gPT09IG9ic0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIG9ic2VydmFibGUucmVmQ291bnQgPSAwO1xuICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgb2JzZXJ2YWJsZS5jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG4gICAgICAgIGlmIChvYnNlcnZhYmxlLnJlZkNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKC0tb2JzZXJ2YWJsZS5yZWZDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIG9ic0Nvbm5lY3Rpb24gPSBvYnNlcnZhYmxlLmNvbm5lY3Rpb247XG4gICAgICAgICAgICB2YXIgc3ViQ29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcbiAgICAgICAgICAgIGlmIChzdWJDb25uZWN0aW9uICYmIHN1YkNvbm5lY3Rpb24gPT09IG9ic0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBvYnNDb25uZWN0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJlZkNvdW50U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gNDIxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY2F0Y2hfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NhdGNoJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY2F0Y2ggPSBjYXRjaF8xLl9jYXRjaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NhdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gNDIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQ2F0Y2hlcyBlcnJvcnMgb24gdGhlIG9ic2VydmFibGUgdG8gYmUgaGFuZGxlZCBieSByZXR1cm5pbmcgYSBuZXcgb2JzZXJ2YWJsZSBvciB0aHJvd2luZyBhbiBlcnJvci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhcyBhcmd1bWVudHMgYGVycmAsIHdoaWNoIGlzIHRoZSBlcnJvciwgYW5kIGBjYXVnaHRgLCB3aGljaFxuICogIGlzIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSwgaW4gY2FzZSB5b3UnZCBsaWtlIHRvIFwicmV0cnlcIiB0aGF0IG9ic2VydmFibGUgYnkgcmV0dXJuaW5nIGl0IGFnYWluLiBXaGF0ZXZlciBvYnNlcnZhYmxlXG4gKiAgaXMgcmV0dXJuZWQgYnkgdGhlIGBzZWxlY3RvcmAgd2lsbCBiZSB1c2VkIHRvIGNvbnRpbnVlIHRoZSBvYnNlcnZhYmxlIGNoYWluLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gb2JzZXJ2YWJsZSB0aGF0IG9yaWdpbmF0ZXMgZnJvbSBlaXRoZXIgdGhlIHNvdXJjZSBvciB0aGUgb2JzZXJ2YWJsZSByZXR1cm5lZCBieSB0aGVcbiAqICBjYXRjaCBgc2VsZWN0b3JgIGZ1bmN0aW9uLlxuICogQG1ldGhvZCBjYXRjaFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gX2NhdGNoKHNlbGVjdG9yKSB7XG4gICAgdmFyIG9wZXJhdG9yID0gbmV3IENhdGNoT3BlcmF0b3Ioc2VsZWN0b3IpO1xuICAgIHZhciBjYXVnaHQgPSB0aGlzLmxpZnQob3BlcmF0b3IpO1xuICAgIHJldHVybiAob3BlcmF0b3IuY2F1Z2h0ID0gY2F1Z2h0KTtcbn1cbmV4cG9ydHMuX2NhdGNoID0gX2NhdGNoO1xudmFyIENhdGNoT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENhdGNoT3BlcmF0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIH1cbiAgICBDYXRjaE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IENhdGNoU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNlbGVjdG9yLCB0aGlzLmNhdWdodCkpO1xuICAgIH07XG4gICAgcmV0dXJuIENhdGNoT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBDYXRjaFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYXRjaFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ2F0Y2hTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzZWxlY3RvciwgY2F1Z2h0KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLmNhdWdodCA9IGNhdWdodDtcbiAgICB9XG4gICAgLy8gTk9URTogb3ZlcnJpZGluZyBgZXJyb3JgIGluc3RlYWQgb2YgYF9lcnJvcmAgYmVjYXVzZSB3ZSBkb24ndCB3YW50XG4gICAgLy8gdG8gaGF2ZSB0aGlzIGZsYWcgdGhpcyBzdWJzY3JpYmVyIGFzIGBpc1N0b3BwZWRgLlxuICAgIENhdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuc2VsZWN0b3IoZXJyLCB0aGlzLmNhdWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENhdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ucmVtb3ZlKHRoaXMpO1xuICAgICAgICByZXN1bHQuc3Vic2NyaWJlKHRoaXMuZGVzdGluYXRpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIENhdGNoU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY2F0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA0MjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb21iaW5lQWxsXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb21iaW5lQWxsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29tYmluZUFsbCA9IGNvbWJpbmVBbGxfMS5jb21iaW5lQWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb21iaW5lQWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBjb21iaW5lTGF0ZXN0XzEgPSByZXF1aXJlKCcuL2NvbWJpbmVMYXRlc3QnKTtcbi8qKlxuICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgdGhlIG91dGVyIE9ic2VydmFibGUgdG8gY29tcGxldGUsIHRoZW4gYXBwbHlpbmcge0BsaW5rIGNvbWJpbmVMYXRlc3R9LlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBhbiBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzIGJ5IGFwcGx5aW5nXG4gKiB7QGxpbmsgY29tYmluZUxhdGVzdH0gd2hlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBjb21wbGV0ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29tYmluZUFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBUYWtlcyBhbiBPYnNlcnZhYmxlIG9mIE9ic2VydmFibGVzLCBhbmQgY29sbGVjdHMgYWxsIE9ic2VydmFibGVzIGZyb20gaXQuXG4gKiBPbmNlIHRoZSBvdXRlciBPYnNlcnZhYmxlIGNvbXBsZXRlcywgaXQgc3Vic2NyaWJlcyB0byBhbGwgY29sbGVjdGVkXG4gKiBPYnNlcnZhYmxlcyBhbmQgY29tYmluZXMgdGhlaXIgdmFsdWVzIHVzaW5nIHRoZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cbiAqIHN0cmF0ZWd5LCBzdWNoIHRoYXQ6XG4gKiAtIEV2ZXJ5IHRpbWUgYW4gaW5uZXIgT2JzZXJ2YWJsZSBlbWl0cywgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzLlxuICogLSBXaGVuIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlIGVtaXRzLCBpdCBlbWl0cyBhbGwgb2YgdGhlIGxhdGVzdCB2YWx1ZXMgYnk6XG4gKiAgIC0gSWYgYSBgcHJvamVjdGAgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIGl0IGlzIGNhbGxlZCB3aXRoIGVhY2ggcmVjZW50IHZhbHVlXG4gKiAgICAgZnJvbSBlYWNoIGlubmVyIE9ic2VydmFibGUgaW4gd2hhdGV2ZXIgb3JkZXIgdGhleSBhcnJpdmVkLCBhbmQgdGhlIHJlc3VsdFxuICogICAgIG9mIHRoZSBgcHJvamVjdGAgZnVuY3Rpb24gaXMgd2hhdCBpcyBlbWl0dGVkIGJ5IHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqICAgLSBJZiB0aGVyZSBpcyBubyBgcHJvamVjdGAgZnVuY3Rpb24sIGFuIGFycmF5IG9mIGFsbCBvZiB0aGUgbW9zdCByZWNlbnRcbiAqICAgICB2YWx1ZXMgaXMgZW1pdHRlZCBieSB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIHR3byBjbGljayBldmVudHMgdG8gYSBmaW5pdGUgaW50ZXJ2YWwgT2JzZXJ2YWJsZSwgdGhlbiBhcHBseSBjb21iaW5lQWxsPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbChNYXRoLnJhbmRvbSgpKjIwMDApLnRha2UoMylcbiAqICkudGFrZSgyKTtcbiAqIHZhciByZXN1bHQgPSBoaWdoZXJPcmRlci5jb21iaW5lQWxsKCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbWJpbmVMYXRlc3R9XG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gbWFwIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbm5lciBPYnNlcnZhYmxlIGludG8gYSBuZXcgcmVzdWx0LiBUYWtlcyBlYWNoIG9mIHRoZSBtb3N0XG4gKiByZWNlbnQgdmFsdWVzIGZyb20gZWFjaCBjb2xsZWN0ZWQgaW5uZXIgT2JzZXJ2YWJsZSBhcyBhcmd1bWVudHMsIGluIG9yZGVyLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgcmVzdWx0cyBvciBhcnJheXMgb2YgcmVjZW50XG4gKiB2YWx1ZXMuXG4gKiBAbWV0aG9kIGNvbWJpbmVBbGxcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVBbGwocHJvamVjdCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IGNvbWJpbmVMYXRlc3RfMS5Db21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkpO1xufVxuZXhwb3J0cy5jb21iaW5lQWxsID0gY29tYmluZUFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb21iaW5lQWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29tYmluZUxhdGVzdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY29tYmluZUxhdGVzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVMYXRlc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY29tYmluZUxhdGVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbmNhdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY29uY2F0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0ID0gY29uY2F0XzEuY29uY2F0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbmNhdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbmNhdEFsbF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY29uY2F0QWxsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0QWxsID0gY29uY2F0QWxsXzEuY29uY2F0QWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0QWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbmNhdEFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDQyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbWVyZ2VBbGxfMSA9IHJlcXVpcmUoJy4vbWVyZ2VBbGwnKTtcbi8qKlxuICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieVxuICogY29uY2F0ZW5hdGluZyB0aGUgaW5uZXIgT2JzZXJ2YWJsZXMgaW4gb3JkZXIuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgYnkgcHV0dGluZyBvbmVcbiAqIGlubmVyIE9ic2VydmFibGUgYWZ0ZXIgdGhlIG90aGVyLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdEFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBKb2lucyBldmVyeSBPYnNlcnZhYmxlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSAoYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSksIGluXG4gKiBhIHNlcmlhbCBmYXNoaW9uLiBJdCBzdWJzY3JpYmVzIHRvIGVhY2ggaW5uZXIgT2JzZXJ2YWJsZSBvbmx5IGFmdGVyIHRoZVxuICogcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZSBoYXMgY29tcGxldGVkLCBhbmQgbWVyZ2VzIGFsbCBvZiB0aGVpciB2YWx1ZXMgaW50b1xuICogdGhlIHJldHVybmVkIG9ic2VydmFibGUuXG4gKlxuICogX19XYXJuaW5nOl9fIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBPYnNlcnZhYmxlcyBxdWlja2x5IGFuZFxuICogZW5kbGVzc2x5LCBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVzIGl0IGVtaXRzIGdlbmVyYWxseSBjb21wbGV0ZSBzbG93ZXIgdGhhblxuICogdGhlIHNvdXJjZSBlbWl0cywgeW91IGNhbiBydW4gaW50byBtZW1vcnkgaXNzdWVzIGFzIHRoZSBpbmNvbWluZyBPYnNlcnZhYmxlc1xuICogY29sbGVjdCBpbiBhbiB1bmJvdW5kZWQgYnVmZmVyLlxuICpcbiAqIE5vdGU6IGBjb25jYXRBbGxgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlQWxsYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcbiAqIHRvIGAxYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcChldiA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCkpO1xuICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5jb25jYXRBbGwoKTtcbiAqIGZpcnN0T3JkZXIuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG4gKiBAc2VlIHtAbGluayBjb25jYXR9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cbiAqIEBzZWUge0BsaW5rIGV4aGF1c3R9XG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaH1cbiAqIEBzZWUge0BsaW5rIHppcEFsbH1cbiAqXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIGVtaXR0aW5nIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5uZXJcbiAqIE9ic2VydmFibGVzIGNvbmNhdGVuYXRlZC5cbiAqIEBtZXRob2QgY29uY2F0QWxsXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb25jYXRBbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKDEpKTtcbn1cbmV4cG9ydHMuY29uY2F0QWxsID0gY29uY2F0QWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0QWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0QWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29uY2F0TWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb25jYXRNYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRNYXAgPSBjb25jYXRNYXBfMS5jb25jYXRNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0TWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBtZXJnZU1hcF8xID0gcmVxdWlyZSgnLi9tZXJnZU1hcCcpO1xuLyoqXG4gKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLCBpbiBhIHNlcmlhbGl6ZWQgZmFzaGlvbiB3YWl0aW5nIGZvciBlYWNoIG9uZSB0byBjb21wbGV0ZSBiZWZvcmVcbiAqIG1lcmdpbmcgdGhlIG5leHQuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIGNvbmNhdEFsbH0uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0TWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3VcbiAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cbiAqIHJldHVybnMgYW4gKHNvLWNhbGxlZCBcImlubmVyXCIpIE9ic2VydmFibGUuIEVhY2ggbmV3IGlubmVyIE9ic2VydmFibGUgaXNcbiAqIGNvbmNhdGVuYXRlZCB3aXRoIHRoZSBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlLlxuICpcbiAqIF9fV2FybmluZzpfXyBpZiBzb3VyY2UgdmFsdWVzIGFycml2ZSBlbmRsZXNzbHkgYW5kIGZhc3RlciB0aGFuIHRoZWlyXG4gKiBjb3JyZXNwb25kaW5nIGlubmVyIE9ic2VydmFibGVzIGNhbiBjb21wbGV0ZSwgaXQgd2lsbCByZXN1bHQgaW4gbWVtb3J5IGlzc3Vlc1xuICogYXMgaW5uZXIgT2JzZXJ2YWJsZXMgYW1hc3MgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlciB3YWl0aW5nIGZvciB0aGVpciB0dXJuIHRvXG4gKiBiZSBzdWJzY3JpYmVkIHRvLlxuICpcbiAqIE5vdGU6IGBjb25jYXRNYXBgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlTWFwYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcbiAqIHRvIGAxYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5jb25jYXRNYXAoZXYgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0fVxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cbiAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG4gKiBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIG9ic2VydmFibGUgb2YgdmFsdWVzIG1lcmdlZCBmcm9tIHRoZSBwcm9qZWN0ZWRcbiAqIE9ic2VydmFibGVzIGFzIHRoZXkgd2VyZSBzdWJzY3JpYmVkIHRvLCBvbmUgYXQgYSB0aW1lLiBPcHRpb25hbGx5LCB0aGVzZVxuICogdmFsdWVzIG1heSBoYXZlIGJlZW4gcHJvamVjdGVkIGZyb20gYSBwYXNzZWQgYHByb2plY3RSZXN1bHRgIGFyZ3VtZW50LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG4gKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIHRha2luZyB2YWx1ZXMgZnJvbSBlYWNoIHByb2plY3RlZCBpbm5lclxuICogT2JzZXJ2YWJsZSBzZXF1ZW50aWFsbHkuXG4gKiBAbWV0aG9kIGNvbmNhdE1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29uY2F0TWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VNYXBfMS5NZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCAxKSk7XG59XG5leHBvcnRzLmNvbmNhdE1hcCA9IGNvbmNhdE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdE1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdE1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIG1lcmdlQWxsfS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG4gKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG4gKiByZXR1cm5zIGFuIE9ic2VydmFibGUsIGFuZCB0aGVuIG1lcmdpbmcgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGFuZFxuICogZW1pdHRpbmcgdGhlIHJlc3VsdHMgb2YgdGhpcyBtZXJnZXIuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIGVhY2ggbGV0dGVyIHRvIGFuIE9ic2VydmFibGUgdGlja2luZyBldmVyeSAxIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcbiAqIHZhciByZXN1bHQgPSBsZXR0ZXJzLm1lcmdlTWFwKHggPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS5tYXAoaSA9PiB4K2kpXG4gKiApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG4gKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2V9XG4gKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG4gKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlfSBwcm9qZWN0IEEgZnVuY3Rpb25cbiAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG4gKiBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBtZXJnaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBPYnNlcnZhYmxlcyBvYnRhaW5lZFxuICogZnJvbSB0aGlzIHRyYW5zZm9ybWF0aW9uLlxuICogQG1ldGhvZCBtZXJnZU1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHJlc3VsdFNlbGVjdG9yID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkpO1xufVxuZXhwb3J0cy5tZXJnZU1hcCA9IG1lcmdlTWFwO1xudmFyIE1lcmdlTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICB9XG4gICAgTWVyZ2VNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWVyZ2VNYXBTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByb2plY3QsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMuY29uY3VycmVudCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlTWFwT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5NZXJnZU1hcE9wZXJhdG9yID0gTWVyZ2VNYXBPcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWVyZ2VNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVyZ2VNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuICAgICAgICAgICAgdGhpcy5fdHJ5TmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5TmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmUrKztcbiAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAoaXNoLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBpc2gsIHZhbHVlLCBpbmRleCkpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9ub3RpZnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG4gICAgICAgIHRoaXMuYWN0aXZlLS07XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlTWFwU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLk1lcmdlTWFwU3Vic2NyaWJlciA9IE1lcmdlTWFwU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb25jYXRNYXBUb18xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY29uY2F0TWFwVG8nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRNYXBUbyA9IGNvbmNhdE1hcFRvXzEuY29uY2F0TWFwVG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXBUby5qc1xuICoqIG1vZHVsZSBpZCA9IDQzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbWVyZ2VNYXBUb18xID0gcmVxdWlyZSgnLi9tZXJnZU1hcFRvJyk7XG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBzYW1lIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIG11bHRpcGxlXG4gKiB0aW1lcyBpbiBhIHNlcmlhbGl6ZWQgZmFzaGlvbiBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgY29uY2F0TWFwfSwgYnV0IG1hcHMgZWFjaCB2YWx1ZVxuICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0TWFwVG8ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgZ2l2ZW4gT2JzZXJ2YWJsZSBgaW5uZXJPYnNlcnZhYmxlYCByZWdhcmRsZXNzXG4gKiBvZiB0aGUgc291cmNlIHZhbHVlLCBhbmQgdGhlbiBmbGF0dGVucyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgaW50byBvbmVcbiAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIEVhY2ggbmV3IGBpbm5lck9ic2VydmFibGVgXG4gKiBpbnN0YW5jZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBjb25jYXRlbmF0ZWQgd2l0aCB0aGUgcHJldmlvdXNcbiAqIGBpbm5lck9ic2VydmFibGVgIGluc3RhbmNlLlxuICpcbiAqIF9fV2FybmluZzpfXyBpZiBzb3VyY2UgdmFsdWVzIGFycml2ZSBlbmRsZXNzbHkgYW5kIGZhc3RlciB0aGFuIHRoZWlyXG4gKiBjb3JyZXNwb25kaW5nIGlubmVyIE9ic2VydmFibGVzIGNhbiBjb21wbGV0ZSwgaXQgd2lsbCByZXN1bHQgaW4gbWVtb3J5IGlzc3Vlc1xuICogYXMgaW5uZXIgT2JzZXJ2YWJsZXMgYW1hc3MgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlciB3YWl0aW5nIGZvciB0aGVpciB0dXJuIHRvXG4gKiBiZSBzdWJzY3JpYmVkIHRvLlxuICpcbiAqIE5vdGU6IGBjb25jYXRNYXBUb2AgaXMgZXF1aXZhbGVudCB0byBgbWVyZ2VNYXBUb2Agd2l0aCBjb25jdXJyZW5jeSBwYXJhbWV0ZXJcbiAqIHNldCB0byBgMWAuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHRpY2sgZXZlcnkgc2Vjb25kIGZyb20gMCB0byAzLCB3aXRoIG5vIGNvbmN1cnJlbmN5PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MuY29uY2F0TWFwVG8oUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0fVxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5uZXJPYnNlcnZhYmxlIEFuIE9ic2VydmFibGUgdG8gcmVwbGFjZSBlYWNoIHZhbHVlIGZyb21cbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG4gKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG4gKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIG9mIHZhbHVlcyBtZXJnZWQgdG9nZXRoZXIgYnkgam9pbmluZyB0aGVcbiAqIHBhc3NlZCBvYnNlcnZhYmxlIHdpdGggaXRzZWxmLCBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkXG4gKiBmcm9tIHRoZSBzb3VyY2UuXG4gKiBAbWV0aG9kIGNvbmNhdE1hcFRvXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb25jYXRNYXBUbyhpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VNYXBUb18xLk1lcmdlTWFwVG9PcGVyYXRvcihpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yLCAxKSk7XG59XG5leHBvcnRzLmNvbmNhdE1hcFRvID0gY29uY2F0TWFwVG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdE1hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNDM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgbXVsdGlwbGVcbiAqIHRpbWVzIGluIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBtZXJnZU1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWUgYWx3YXlzXG4gKiB0byB0aGUgc2FtZSBpbm5lciBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlTWFwVG8ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgZ2l2ZW4gT2JzZXJ2YWJsZSBgaW5uZXJPYnNlcnZhYmxlYCByZWdhcmRsZXNzXG4gKiBvZiB0aGUgc291cmNlIHZhbHVlLCBhbmQgdGhlbiBtZXJnZXMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG4gKiBzaW5nbGUgT2JzZXJ2YWJsZSwgd2hpY2ggaXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkZvciBlYWNoIGNsaWNrIGV2ZW50LCBzdGFydCBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIHRpY2tpbmcgZXZlcnkgMSBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5tZXJnZU1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlU2Nhbn1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5uZXJPYnNlcnZhYmxlIEFuIE9ic2VydmFibGUgdG8gcmVwbGFjZSBlYWNoIHZhbHVlIGZyb21cbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG4gKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG4gKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgZ2l2ZW5cbiAqIGBpbm5lck9ic2VydmFibGVgIChhbmQgb3B0aW9uYWxseSB0cmFuc2Zvcm1lZCB0aHJvdWdoIGByZXN1bHRTZWxlY3RvcmApIGV2ZXJ5XG4gKiB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIG1lcmdlTWFwVG9cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG1lcmdlTWFwVG8oaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNZXJnZU1hcFRvT3BlcmF0b3IoaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkpO1xufVxuZXhwb3J0cy5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUbztcbi8vIFRPRE86IEZpZ3VyZSBvdXQgY29ycmVjdCBzaWduYXR1cmUgaGVyZTogYW4gT3BlcmF0b3I8T2JzZXJ2YWJsZTxUPiwgUj5cbi8vICAgICAgIG5lZWRzIHRvIGltcGxlbWVudCBjYWxsKG9ic2VydmVyOiBTdWJzY3JpYmVyPFI+KTogU3Vic2NyaWJlcjxPYnNlcnZhYmxlPFQ+PlxudmFyIE1lcmdlTWFwVG9PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBUb09wZXJhdG9yKGlzaCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIHRoaXMuaXNoID0gaXNoO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgfVxuICAgIE1lcmdlTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWVyZ2VNYXBUb1N1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMuaXNoLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmNvbmN1cnJlbnQpKTtcbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcFRvT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5NZXJnZU1hcFRvT3BlcmF0b3IgPSBNZXJnZU1hcFRvT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE1lcmdlTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVyZ2VNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlzaCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gdGhpcy5yZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgICAgIHZhciBpc2ggPSB0aGlzLmlzaDtcbiAgICAgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICAgICAgdGhpcy5faW5uZXJTdWIoaXNoLCBkZXN0aW5hdGlvbiwgcmVzdWx0U2VsZWN0b3IsIHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIGRlc3RpbmF0aW9uLCByZXN1bHRTZWxlY3RvciwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgaXNoLCB2YWx1ZSwgaW5kZXgpKTtcbiAgICB9O1xuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5U2VsZWN0UmVzdWx0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLnRyeVNlbGVjdFJlc3VsdCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcFRvU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLk1lcmdlTWFwVG9TdWJzY3JpYmVyID0gTWVyZ2VNYXBUb1N1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VNYXBUby5qc1xuICoqIG1vZHVsZSBpZCA9IDQzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvdW50XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jb3VudCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvdW50ID0gY291bnRfMS5jb3VudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gNDM2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgZW1pc3Npb25zIG9uIHRoZSBzb3VyY2UgYW5kIGVtaXRzIHRoYXQgbnVtYmVyIHdoZW4gdGhlXG4gKiBzb3VyY2UgY29tcGxldGVzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UZWxscyBob3cgbWFueSB2YWx1ZXMgd2VyZSBlbWl0dGVkLCB3aGVuIHRoZSBzb3VyY2VcbiAqIGNvbXBsZXRlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgY291bnRgIHRyYW5zZm9ybXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHZhbHVlcyBpbnRvIGFuIE9ic2VydmFibGUgdGhhdFxuICogZW1pdHMgYSBzaW5nbGUgdmFsdWUgdGhhdCByZXByZXNlbnRzIHRoZSBudW1iZXIgb2YgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRlcm1pbmF0ZXMgd2l0aCBhbiBlcnJvciwgYGNvdW50YFxuICogd2lsbCBwYXNzIHRoaXMgZXJyb3Igbm90aWZpY2F0aW9uIGFsb25nIHdpdGhvdXQgZW1pdHRpbmcgYW4gdmFsdWUgZmlyc3QuIElmXG4gKiB0aGUgc291cmNlIE9ic2VydmFibGUgZG9lcyBub3QgdGVybWluYXRlIGF0IGFsbCwgYGNvdW50YCB3aWxsIG5laXRoZXIgZW1pdFxuICogYSB2YWx1ZSBub3IgdGVybWluYXRlLiBUaGlzIG9wZXJhdG9yIHRha2VzIGFuIG9wdGlvbmFsIGBwcmVkaWNhdGVgIGZ1bmN0aW9uXG4gKiBhcyBhcmd1bWVudCwgaW4gd2hpY2ggY2FzZSB0aGUgb3V0cHV0IGVtaXNzaW9uIHdpbGwgcmVwcmVzZW50IHRoZSBudW1iZXIgb2ZcbiAqIHNvdXJjZSB2YWx1ZXMgdGhhdCBtYXRjaGVkIGB0cnVlYCB3aXRoIHRoZSBgcHJlZGljYXRlYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db3VudHMgaG93IG1hbnkgc2Vjb25kcyBoYXZlIHBhc3NlZCBiZWZvcmUgdGhlIGZpcnN0IGNsaWNrIGhhcHBlbmVkPC9jYXB0aW9uPlxuICogdmFyIHNlY29uZHMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBzZWNvbmRzQmVmb3JlQ2xpY2sgPSBzZWNvbmRzLnRha2VVbnRpbChjbGlja3MpO1xuICogdmFyIHJlc3VsdCA9IHNlY29uZHNCZWZvcmVDbGljay5jb3VudCgpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db3VudHMgaG93IG1hbnkgb2RkIG51bWJlcnMgYXJlIHRoZXJlIGJldHdlZW4gMSBhbmQgNzwvY2FwdGlvbj5cbiAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCA3KTtcbiAqIHZhciByZXN1bHQgPSBudW1iZXJzLmNvdW50KGkgPT4gaSAlIDIgPT09IDEpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXh9XG4gKiBAc2VlIHtAbGluayBtaW59XG4gKiBAc2VlIHtAbGluayByZWR1Y2V9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaTogbnVtYmVyLCBzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBib29sZWFufSBbcHJlZGljYXRlXSBBXG4gKiBib29sZWFuIGZ1bmN0aW9uIHRvIHNlbGVjdCB3aGF0IHZhbHVlcyBhcmUgdG8gYmUgY291bnRlZC4gSXQgaXMgcHJvdmlkZWQgd2l0aFxuICogYXJndW1lbnRzIG9mOlxuICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiAtIGBpbmRleGA6IHRoZSAoemVyby1iYXNlZCkgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIC0gYHNvdXJjZWA6IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnN0YW5jZSBpdHNlbGYuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIG9uZSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSBjb3VudCBhc1xuICogZGVzY3JpYmVkIGFib3ZlLlxuICogQG1ldGhvZCBjb3VudFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY291bnQocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQ291bnRPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXMpKTtcbn1cbmV4cG9ydHMuY291bnQgPSBjb3VudDtcbnZhciBDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb3VudE9wZXJhdG9yKHByZWRpY2F0ZSwgc291cmNlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgQ291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ291bnRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIENvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlQcmVkaWNhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4KyssIHRoaXMuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuY291bnQpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ291bnRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb3VudC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlbWF0ZXJpYWxpemVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2RlbWF0ZXJpYWxpemUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZV8xLmRlbWF0ZXJpYWxpemU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlbWF0ZXJpYWxpemUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCB0cmFuc2Zvcm1zIE5vdGlmaWNhdGlvbiBvYmplY3RzIGludG8gdGhlIGl0ZW1zIG9yIG5vdGlmaWNhdGlvbnMgdGhleSByZXByZXNlbnQuXG4gKlxuICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBhbmQgbm90aWZpY2F0aW9ucyBlbWJlZGRlZCBpbiBOb3RpZmljYXRpb24gb2JqZWN0cyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgZGVtYXRlcmlhbGl6ZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVtYXRlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSk7XG59XG5leHBvcnRzLmRlbWF0ZXJpYWxpemUgPSBkZW1hdGVyaWFsaXplO1xudmFyIERlTWF0ZXJpYWxpemVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVNYXRlcmlhbGl6ZU9wZXJhdG9yKCkge1xuICAgIH1cbiAgICBEZU1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERlTWF0ZXJpYWxpemVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICBEZU1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFsdWUub2JzZXJ2ZSh0aGlzLmRlc3RpbmF0aW9uKTtcbiAgICB9O1xuICAgIHJldHVybiBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbWF0ZXJpYWxpemUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kZW1hdGVyaWFsaXplLmpzXG4gKiogbW9kdWxlIGlkID0gNDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVib3VuY2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2RlYm91bmNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVib3VuY2UgPSBkZWJvdW5jZV8xLmRlYm91bmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9ubHkgYWZ0ZXIgYSBwYXJ0aWN1bGFyIHRpbWUgc3BhblxuICogZGV0ZXJtaW5lZCBieSBhbm90aGVyIE9ic2VydmFibGUgaGFzIHBhc3NlZCB3aXRob3V0IGFub3RoZXIgc291cmNlIGVtaXNzaW9uLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlYm91bmNlVGltZX0sIGJ1dCB0aGUgdGltZSBzcGFuIG9mXG4gKiBlbWlzc2lvbiBzaWxlbmNlIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9kZWJvdW5jZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgZGVib3VuY2VgIGRlbGF5cyB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCBkcm9wcyBwcmV2aW91c1xuICogcGVuZGluZyBkZWxheWVkIGVtaXNzaW9ucyBpZiBhIG5ldyB2YWx1ZSBhcnJpdmVzIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIFRoaXMgb3BlcmF0b3Iga2VlcHMgdHJhY2sgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSwgYW5kIHNwYXducyBhIGR1cmF0aW9uIE9ic2VydmFibGUgYnkgY2FsbGluZyB0aGVcbiAqIGBkdXJhdGlvblNlbGVjdG9yYCBmdW5jdGlvbi4gVGhlIHZhbHVlIGlzIGVtaXR0ZWQgb25seSB3aGVuIHRoZSBkdXJhdGlvblxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgYW5kIGlmIG5vIG90aGVyIHZhbHVlIHdhcyBlbWl0dGVkIG9uXG4gKiB0aGUgc291cmNlIE9ic2VydmFibGUgc2luY2UgdGhlIGR1cmF0aW9uIE9ic2VydmFibGUgd2FzIHNwYXduZWQuIElmIGEgbmV3XG4gKiB2YWx1ZSBhcHBlYXJzIGJlZm9yZSB0aGUgZHVyYXRpb24gT2JzZXJ2YWJsZSBlbWl0cywgdGhlIHByZXZpb3VzIHZhbHVlIHdpbGxcbiAqIGJlIGRyb3BwZWQgYW5kIHdpbGwgbm90IGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIExpa2Uge0BsaW5rIGRlYm91bmNlVGltZX0sIHRoaXMgaXMgYSByYXRlLWxpbWl0aW5nIG9wZXJhdG9yLCBhbmQgYWxzbyBhXG4gKiBkZWxheS1saWtlIG9wZXJhdG9yIHNpbmNlIG91dHB1dCBlbWlzc2lvbnMgZG8gbm90IG5lY2Vzc2FyaWx5IG9jY3VyIGF0IHRoZVxuICogc2FtZSB0aW1lIGFzIHRoZXkgZGlkIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBtb3N0IHJlY2VudCBjbGljayBhZnRlciBhIGJ1cnN0IG9mIGNsaWNrczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmRlYm91bmNlKCgpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBhdWRpdH1cbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cbiAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBPYnNlcnZhYmxlfFByb21pc2V9IGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvblxuICogdGhhdCByZWNlaXZlcyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBmb3IgY29tcHV0aW5nIHRoZSB0aW1lb3V0XG4gKiBkdXJhdGlvbiBmb3IgZWFjaCBzb3VyY2UgdmFsdWUsIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGRlbGF5cyB0aGUgZW1pc3Npb25zIG9mIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgYnkgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG4gKiBgZHVyYXRpb25TZWxlY3RvcmAsIGFuZCBtYXkgZHJvcCBzb21lIHZhbHVlcyBpZiB0aGV5IG9jY3VyIHRvbyBmcmVxdWVudGx5LlxuICogQG1ldGhvZCBkZWJvdW5jZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZHVyYXRpb25TZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlYm91bmNlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikpO1xufVxuZXhwb3J0cy5kZWJvdW5jZSA9IGRlYm91bmNlO1xudmFyIERlYm91bmNlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlYm91bmNlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICBEZWJvdW5jZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlYm91bmNlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWJvdW5jZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVib3VuY2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVib3VuY2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgfVxuICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5TmV4dCh2YWx1ZSwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgZHVyYXRpb24pO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcbiAgICB9O1xuICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuZW1pdFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEZWJvdW5jZVN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kZWJvdW5jZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlYm91bmNlVGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGVib3VuY2VUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVib3VuY2VUaW1lID0gZGVib3VuY2VUaW1lXzEuZGVib3VuY2VUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2VUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlYm91bmNlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG9ubHkgYWZ0ZXIgYSBwYXJ0aWN1bGFyIHRpbWUgc3BhblxuICogaGFzIHBhc3NlZCB3aXRob3V0IGFub3RoZXIgc291cmNlIGVtaXNzaW9uLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGRlbGF5fSwgYnV0IHBhc3NlcyBvbmx5IHRoZSBtb3N0XG4gKiByZWNlbnQgdmFsdWUgZnJvbSBlYWNoIGJ1cnN0IG9mIGVtaXNzaW9ucy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9kZWJvdW5jZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYGRlYm91bmNlVGltZWAgZGVsYXlzIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IGRyb3BzXG4gKiBwcmV2aW91cyBwZW5kaW5nIGRlbGF5ZWQgZW1pc3Npb25zIGlmIGEgbmV3IHZhbHVlIGFycml2ZXMgb24gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhpcyBvcGVyYXRvciBrZWVwcyB0cmFjayBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWUgZnJvbSB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhhdCBvbmx5IHdoZW4gYGR1ZVRpbWVgIGVub3VnaCB0aW1lIGhhcyBwYXNzZWRcbiAqIHdpdGhvdXQgYW55IG90aGVyIHZhbHVlIGFwcGVhcmluZyBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGEgbmV3IHZhbHVlXG4gKiBhcHBlYXJzIGJlZm9yZSBgZHVlVGltZWAgc2lsZW5jZSBvY2N1cnMsIHRoZSBwcmV2aW91cyB2YWx1ZSB3aWxsIGJlIGRyb3BwZWRcbiAqIGFuZCB3aWxsIG5vdCBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBUaGlzIGlzIGEgcmF0ZS1saW1pdGluZyBvcGVyYXRvciwgYmVjYXVzZSBpdCBpcyBpbXBvc3NpYmxlIGZvciBtb3JlIHRoYW4gb25lXG4gKiB2YWx1ZSB0byBiZSBlbWl0dGVkIGluIGFueSB0aW1lIHdpbmRvdyBvZiBkdXJhdGlvbiBgZHVlVGltZWAsIGJ1dCBpdCBpcyBhbHNvXG4gKiBhIGRlbGF5LWxpa2Ugb3BlcmF0b3Igc2luY2Ugb3V0cHV0IGVtaXNzaW9ucyBkbyBub3Qgb2NjdXIgYXQgdGhlIHNhbWUgdGltZSBhc1xuICogdGhleSBkaWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBPcHRpb25hbGx5IHRha2VzIGEge0BsaW5rIFNjaGVkdWxlcn0gZm9yXG4gKiBtYW5hZ2luZyB0aW1lcnMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCB0aGUgbW9zdCByZWNlbnQgY2xpY2sgYWZ0ZXIgYSBidXJzdCBvZiBjbGlja3M8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5kZWJvdW5jZVRpbWUoMTAwMCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGF1ZGl0VGltZX1cbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlfVxuICogQHNlZSB7QGxpbmsgZGVsYXl9XG4gKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuICogQHNlZSB7QGxpbmsgdGhyb3R0bGVUaW1lfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdWVUaW1lIFRoZSB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWVcbiAqIHVuaXQgZGV0ZXJtaW5lZCBpbnRlcm5hbGx5IGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYCkgZm9yIHRoZSB3aW5kb3cgb2ZcbiAqIHRpbWUgcmVxdWlyZWQgdG8gd2FpdCBmb3IgZW1pc3Npb24gc2lsZW5jZSBiZWZvcmUgZW1pdHRpbmcgdGhlIG1vc3QgcmVjZW50XG4gKiBzb3VyY2UgdmFsdWUuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3JcbiAqIG1hbmFnaW5nIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGhlIHRpbWVvdXQgZm9yIGVhY2ggdmFsdWUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIGBkdWVUaW1lYCwgYW5kIG1heSBkcm9wIHNvbWUgdmFsdWVzIGlmIHRoZXkgb2NjdXJcbiAqIHRvbyBmcmVxdWVudGx5LlxuICogQG1ldGhvZCBkZWJvdW5jZVRpbWVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlVGltZShkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlYm91bmNlVGltZU9wZXJhdG9yKGR1ZVRpbWUsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5kZWJvdW5jZVRpbWUgPSBkZWJvdW5jZVRpbWU7XG52YXIgRGVib3VuY2VUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZU9wZXJhdG9yKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmR1ZVRpbWUgPSBkdWVUaW1lO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgRGVib3VuY2VUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVib3VuY2VUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmR1ZVRpbWUsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVib3VuY2VUaW1lT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVib3VuY2VUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmR1ZVRpbWUgPSBkdWVUaW1lO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5kZWJvdW5jZWRTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jbGVhckRlYm91bmNlKCk7XG4gICAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICB0aGlzLmFkZCh0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgdGhpcy5kdWVUaW1lLCB0aGlzKSk7XG4gICAgfTtcbiAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVib3VuY2VkTmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5kZWJvdW5jZWROZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmxhc3RWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyRGVib3VuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZWJvdW5jZWRTdWJzY3JpcHRpb24gPSB0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGRlYm91bmNlZFN1YnNjcmlwdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoZGVib3VuY2VkU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGRlYm91bmNlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZWRTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRGVib3VuY2VUaW1lU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChzdWJzY3JpYmVyKSB7XG4gICAgc3Vic2NyaWJlci5kZWJvdW5jZWROZXh0KCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZVRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kZWJvdW5jZVRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkZWZhdWx0SWZFbXB0eV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGVmYXVsdElmRW1wdHknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5XzEuZGVmYXVsdElmRW1wdHk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0SWZFbXB0eS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEVtaXRzIGEgZ2l2ZW4gdmFsdWUgaWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyB3aXRob3V0IGVtaXR0aW5nIGFueVxuICogYG5leHRgIHZhbHVlLCBvdGhlcndpc2UgbWlycm9ycyB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPklmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0dXJucyBvdXQgdG8gYmUgZW1wdHksIHRoZW5cbiAqIHRoaXMgb3BlcmF0b3Igd2lsbCBlbWl0IGEgZGVmYXVsdCB2YWx1ZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9kZWZhdWx0SWZFbXB0eS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgZGVmYXVsdElmRW1wdHlgIGVtaXRzIHRoZSB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgb3IgYVxuICogc3BlY2lmaWVkIGRlZmF1bHQgdmFsdWUgaWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGlzIGVtcHR5IChjb21wbGV0ZXMgd2l0aG91dFxuICogaGF2aW5nIGVtaXR0ZWQgYW55IGBuZXh0YCB2YWx1ZSkuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+SWYgbm8gY2xpY2tzIGhhcHBlbiBpbiA1IHNlY29uZHMsIHRoZW4gZW1pdCBcIm5vIGNsaWNrc1wiPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBjbGlja3NCZWZvcmVGaXZlID0gY2xpY2tzLnRha2VVbnRpbChSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMDApKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3NCZWZvcmVGaXZlLmRlZmF1bHRJZkVtcHR5KCdubyBjbGlja3MnKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgZW1wdHl9XG4gKiBAc2VlIHtAbGluayBsYXN0fVxuICpcbiAqIEBwYXJhbSB7YW55fSBbZGVmYXVsdFZhbHVlPW51bGxdIFRoZSBkZWZhdWx0IHZhbHVlIHVzZWQgaWYgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBpcyBlbXB0eS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBlaXRoZXIgdGhlIHNwZWNpZmllZFxuICogYGRlZmF1bHRWYWx1ZWAgaWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIG5vIGl0ZW1zLCBvciB0aGUgdmFsdWVzIGVtaXR0ZWRcbiAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgZGVmYXVsdElmRW1wdHlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRJZkVtcHR5KGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHZvaWQgMCkgeyBkZWZhdWx0VmFsdWUgPSBudWxsOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVmYXVsdElmRW1wdHlPcGVyYXRvcihkZWZhdWx0VmFsdWUpKTtcbn1cbmV4cG9ydHMuZGVmYXVsdElmRW1wdHkgPSBkZWZhdWx0SWZFbXB0eTtcbnZhciBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgRGVmYXVsdElmRW1wdHlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kZWZhdWx0VmFsdWUpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7XG4gICAgfVxuICAgIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmYXVsdElmRW1wdHkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlbGF5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWxheScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5ID0gZGVsYXlfMS5kZWxheTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gNDQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbnZhciBpc0RhdGVfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNEYXRlJyk7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIE5vdGlmaWNhdGlvbl8xID0gcmVxdWlyZSgnLi4vTm90aWZpY2F0aW9uJyk7XG4vKipcbiAqIERlbGF5cyB0aGUgZW1pc3Npb24gb2YgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYSBnaXZlbiB0aW1lb3V0IG9yXG4gKiB1bnRpbCBhIGdpdmVuIERhdGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRpbWUgc2hpZnRzIGVhY2ggaXRlbSBieSBzb21lIHNwZWNpZmllZCBhbW91bnQgb2ZcbiAqIG1pbGxpc2Vjb25kcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9kZWxheS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBJZiB0aGUgZGVsYXkgYXJndW1lbnQgaXMgYSBOdW1iZXIsIHRoaXMgb3BlcmF0b3IgdGltZSBzaGlmdHMgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBieSB0aGF0IGFtb3VudCBvZiB0aW1lIGV4cHJlc3NlZCBpbiBtaWxsaXNlY29uZHMuIFRoZSByZWxhdGl2ZVxuICogdGltZSBpbnRlcnZhbHMgYmV0d2VlbiB0aGUgdmFsdWVzIGFyZSBwcmVzZXJ2ZWQuXG4gKlxuICogSWYgdGhlIGRlbGF5IGFyZ3VtZW50IGlzIGEgRGF0ZSwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc3RhcnQgb2YgdGhlXG4gKiBPYnNlcnZhYmxlIGV4ZWN1dGlvbiB1bnRpbCB0aGUgZ2l2ZW4gZGF0ZSBvY2N1cnMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgZWFjaCBjbGljayBieSBvbmUgc2Vjb25kPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBkZWxheWVkQ2xpY2tzID0gY2xpY2tzLmRlbGF5KDEwMDApOyAvLyBlYWNoIGNsaWNrIGVtaXR0ZWQgYWZ0ZXIgMSBzZWNvbmRcbiAqIGRlbGF5ZWRDbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkRlbGF5IGFsbCBjbGlja3MgdW50aWwgYSBmdXR1cmUgZGF0ZSBoYXBwZW5zPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBkYXRlID0gbmV3IERhdGUoJ01hcmNoIDE1LCAyMDUwIDEyOjAwOjAwJyk7IC8vIGluIHRoZSBmdXR1cmVcbiAqIHZhciBkZWxheWVkQ2xpY2tzID0gY2xpY2tzLmRlbGF5KGRhdGUpOyAvLyBjbGljayBlbWl0dGVkIG9ubHkgYWZ0ZXIgdGhhdCBkYXRlXG4gKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWxheVdoZW59XG4gKlxuICogQHBhcmFtIHtudW1iZXJ8RGF0ZX0gZGVsYXkgVGhlIGRlbGF5IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcyAoYSBgbnVtYmVyYCkgb3JcbiAqIGEgYERhdGVgIHVudGlsIHdoaWNoIHRoZSBlbWlzc2lvbiBvZiB0aGUgc291cmNlIGl0ZW1zIGlzIGRlbGF5ZWQuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yXG4gKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSB0aW1lLXNoaWZ0IGZvciBlYWNoIGl0ZW0uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIHRpbWVvdXQgb3IgRGF0ZS5cbiAqIEBtZXRob2QgZGVsYXlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGRlbGF5KGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHZhciBhYnNvbHV0ZURlbGF5ID0gaXNEYXRlXzEuaXNEYXRlKGRlbGF5KTtcbiAgICB2YXIgZGVsYXlGb3IgPSBhYnNvbHV0ZURlbGF5ID8gKCtkZWxheSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkZWxheSk7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlPcGVyYXRvcihkZWxheUZvciwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmRlbGF5ID0gZGVsYXk7XG52YXIgRGVsYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIERlbGF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVsYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXksIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERlbGF5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERlbGF5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZWxheVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXJyb3JlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBEZWxheVN1YnNjcmliZXIuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZTtcbiAgICAgICAgdmFyIHF1ZXVlID0gc291cmNlLnF1ZXVlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gc3RhdGUuc2NoZWR1bGVyO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSBzdGF0ZS5kZXN0aW5hdGlvbjtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDAgJiYgKHF1ZXVlWzBdLnRpbWUgLSBzY2hlZHVsZXIubm93KCkpIDw9IDApIHtcbiAgICAgICAgICAgIHF1ZXVlLnNoaWZ0KCkubm90aWZpY2F0aW9uLm9ic2VydmUoZGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZGVsYXlfMSA9IE1hdGgubWF4KDAsIHF1ZXVlWzBdLnRpbWUgLSBzY2hlZHVsZXIubm93KCkpO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgZGVsYXlfMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2UuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShEZWxheVN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIHtcbiAgICAgICAgICAgIHNvdXJjZTogdGhpcywgZGVzdGluYXRpb246IHRoaXMuZGVzdGluYXRpb24sIHNjaGVkdWxlcjogc2NoZWR1bGVyXG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLmVycm9yZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBtZXNzYWdlID0gbmV3IERlbGF5TWVzc2FnZShzY2hlZHVsZXIubm93KCkgKyB0aGlzLmRlbGF5LCBub3RpZmljYXRpb24pO1xuICAgICAgICB0aGlzLnF1ZXVlLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZXJyb3JlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24oTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIERlbGF5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbnZhciBEZWxheU1lc3NhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlbGF5TWVzc2FnZSh0aW1lLCBub3RpZmljYXRpb24pIHtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSBub3RpZmljYXRpb247XG4gICAgfVxuICAgIHJldHVybiBEZWxheU1lc3NhZ2U7XG59KCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kZWxheS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlbGF5V2hlbl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGVsYXlXaGVuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVsYXlXaGVuID0gZGVsYXlXaGVuXzEuZGVsYXlXaGVuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlbGF5V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogRGVsYXlzIHRoZSBlbWlzc2lvbiBvZiBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBhIGdpdmVuIHRpbWUgc3BhblxuICogZGV0ZXJtaW5lZCBieSB0aGUgZW1pc3Npb25zIG9mIGFub3RoZXIgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBkZWxheX0sIGJ1dCB0aGUgdGltZSBzcGFuIG9mIHRoZVxuICogZGVsYXkgZHVyYXRpb24gaXMgZGV0ZXJtaW5lZCBieSBhIHNlY29uZCBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlbGF5V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgZGVsYXlXaGVuYCB0aW1lIHNoaWZ0cyBlYWNoIGVtaXR0ZWQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgYVxuICogdGltZSBzcGFuIGRldGVybWluZWQgYnkgYW5vdGhlciBPYnNlcnZhYmxlLiBXaGVuIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZSxcbiAqIHRoZSBgZGVsYXlEdXJhdGlvblNlbGVjdG9yYCBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgc291cmNlIHZhbHVlIGFzXG4gKiBhcmd1bWVudCwgYW5kIHNob3VsZCByZXR1cm4gYW4gT2JzZXJ2YWJsZSwgY2FsbGVkIHRoZSBcImR1cmF0aW9uXCIgT2JzZXJ2YWJsZS5cbiAqIFRoZSBzb3VyY2UgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgb25seSB3aGVuIHRoZSBkdXJhdGlvblxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcy5cbiAqXG4gKiBPcHRpb25hbGx5LCBgZGVsYXlXaGVuYCB0YWtlcyBhIHNlY29uZCBhcmd1bWVudCwgYHN1YnNjcmlwdGlvbkRlbGF5YCwgd2hpY2hcbiAqIGlzIGFuIE9ic2VydmFibGUuIFdoZW4gYHN1YnNjcmlwdGlvbkRlbGF5YCBlbWl0cyBpdHMgZmlyc3QgdmFsdWUgb3JcbiAqIGNvbXBsZXRlcywgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQgdG8gYW5kIHN0YXJ0cyBiZWhhdmluZyBsaWtlXG4gKiBkZXNjcmliZWQgaW4gdGhlIHByZXZpb3VzIHBhcmFncmFwaC4gSWYgYHN1YnNjcmlwdGlvbkRlbGF5YCBpcyBub3QgcHJvdmlkZWQsXG4gKiBgZGVsYXlXaGVuYCB3aWxsIHN1YnNjcmliZSB0byB0aGUgc291cmNlIE9ic2VydmFibGUgYXMgc29vbiBhcyB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlIGlzIHN1YnNjcmliZWQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgZWFjaCBjbGljayBieSBhIHJhbmRvbSBhbW91bnQgb2YgdGltZSwgYmV0d2VlbiAwIGFuZCA1IHNlY29uZHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXlXaGVuKGV2ZW50ID0+XG4gKiAgIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoTWF0aC5yYW5kb20oKSAqIDUwMDApXG4gKiApO1xuICogZGVsYXllZENsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZX0gZGVsYXlEdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdFxuICogcmV0dXJucyBhbiBPYnNlcnZhYmxlIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGljaFxuICogaXMgdGhlbiB1c2VkIHRvIGRlbGF5IHRoZSBlbWlzc2lvbiBvZiB0aGF0IGl0ZW0gb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlXG4gKiB1bnRpbCB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBmcm9tIHRoaXMgZnVuY3Rpb24gZW1pdHMgYSB2YWx1ZS5cbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc3Vic2NyaXB0aW9uRGVsYXkgQW4gT2JzZXJ2YWJsZSB0aGF0IHRyaWdnZXJzIHRoZVxuICogc3Vic2NyaXB0aW9uIHRvIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbmNlIGl0IGVtaXRzIGFueSB2YWx1ZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IGFuIGFtb3VudCBvZiB0aW1lIHNwZWNpZmllZCBieSB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBieVxuICogYGRlbGF5RHVyYXRpb25TZWxlY3RvcmAuXG4gKiBAbWV0aG9kIGRlbGF5V2hlblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVsYXlXaGVuKGRlbGF5RHVyYXRpb25TZWxlY3Rvciwgc3Vic2NyaXB0aW9uRGVsYXkpIHtcbiAgICBpZiAoc3Vic2NyaXB0aW9uRGVsYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUodGhpcywgc3Vic2NyaXB0aW9uRGVsYXkpXG4gICAgICAgICAgICAubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlbGF5V2hlbk9wZXJhdG9yKGRlbGF5RHVyYXRpb25TZWxlY3RvcikpO1xufVxuZXhwb3J0cy5kZWxheVdoZW4gPSBkZWxheVdoZW47XG52YXIgRGVsYXlXaGVuT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlbGF5V2hlbk9wZXJhdG9yKGRlbGF5RHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3RvcjtcbiAgICB9XG4gICAgRGVsYXlXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVsYXlXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERlbGF5V2hlbk9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVsYXlXaGVuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERlbGF5V2hlblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVsYXlXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZWxheUR1cmF0aW9uU2VsZWN0b3IgPSBkZWxheUR1cmF0aW9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB9XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQob3V0ZXJWYWx1ZSk7XG4gICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGlubmVyU3ViKTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcbiAgICB9O1xuICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgZGVsYXlOb3RpZmllciA9IHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChkZWxheU5vdGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlEZWxheShkZWxheU5vdGlmaWVyLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbklkeCA9IHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuICAgICAgICB2YXIgdmFsdWUgPSBudWxsO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc1tzdWJzY3JpcHRpb25JZHhdO1xuICAgICAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5zcGxpY2Uoc3Vic2NyaXB0aW9uSWR4LCAxKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnNwbGljZShzdWJzY3JpcHRpb25JZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLnRyeURlbGF5ID0gZnVuY3Rpb24gKGRlbGF5Tm90aWZpZXIsIHZhbHVlKSB7XG4gICAgICAgIHZhciBub3RpZmllclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgZGVsYXlOb3RpZmllciwgdmFsdWUpO1xuICAgICAgICB0aGlzLmFkZChub3RpZmllclN1YnNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMucHVzaChub3RpZmllclN1YnNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAmJiB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlXaGVuU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUoc291cmNlLCBzdWJzY3JpcHRpb25EZWxheSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uRGVsYXkgPSBzdWJzY3JpcHRpb25EZWxheTtcbiAgICB9XG4gICAgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25EZWxheS5zdWJzY3JpYmUobmV3IFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcihwYXJlbnQsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1NvdXJjZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5wYXJlbnQuZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvU291cmNlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLnN1YnNjcmliZVRvU291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuc291cmNlU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VTdWJzY3JpYmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzLnBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheVdoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kZWxheVdoZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA0NDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkaXN0aW5jdFVudGlsQ2hhbmdlZF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kaXN0aW5jdFVudGlsQ2hhbmdlZCA9IGRpc3RpbmN0VW50aWxDaGFuZ2VkXzEuZGlzdGluY3RVbnRpbENoYW5nZWQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaXN0aW5jdFVudGlsQ2hhbmdlZC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBlcnJvck9iamVjdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9lcnJvck9iamVjdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBhcmUgZGlzdGluY3QgYnkgY29tcGFyaXNvbiBmcm9tIHRoZSBwcmV2aW91cyBpdGVtLlxuICogSWYgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIGlzIHByb3ZpZGVkLCB0aGVuIGl0IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGl0ZW0gdG8gdGVzdCBmb3Igd2hldGhlciBvciBub3QgdGhhdCB2YWx1ZSBzaG91bGQgYmUgZW1pdHRlZC5cbiAqIElmIGEgY29tcGFyYXRvciBmdW5jdGlvbiBpcyBub3QgcHJvdmlkZWQsIGFuIGVxdWFsaXR5IGNoZWNrIGlzIHVzZWQgYnkgZGVmYXVsdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjb21wYXJlXSBvcHRpb25hbCBjb21wYXJpc29uIGZ1bmN0aW9uIGNhbGxlZCB0byB0ZXN0IGlmIGFuIGl0ZW0gaXMgZGlzdGluY3QgZnJvbSB0aGUgcHJldmlvdXMgaXRlbSBpbiB0aGUgc291cmNlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGggZGlzdGluY3QgdmFsdWVzLlxuICogQG1ldGhvZCBkaXN0aW5jdFVudGlsQ2hhbmdlZFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGlzdGluY3RVbnRpbENoYW5nZWQoY29tcGFyZSwga2V5U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWQ7XG52YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcihjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJlO1xuICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG4gICAgfVxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY29tcGFyZSwgdGhpcy5rZXlTZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5oYXNLZXkgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb21wYXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB4ID09PSB5O1xuICAgIH07XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIga2V5U2VsZWN0b3IgPSB0aGlzLmtleVNlbGVjdG9yO1xuICAgICAgICB2YXIga2V5ID0gdmFsdWU7XG4gICAgICAgIGlmIChrZXlTZWxlY3Rvcikge1xuICAgICAgICAgICAga2V5ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmtleVNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmhhc0tleSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmNvbXBhcmUpKHRoaXMua2V5LCBrZXkpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhc0tleSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEJvb2xlYW4ocmVzdWx0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RpbmN0VW50aWxDaGFuZ2VkLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkb18xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZG8nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kbyA9IGRvXzEuX2RvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0NTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBQZXJmb3JtIGEgc2lkZSBlZmZlY3QgZm9yIGV2ZXJ5IGVtaXNzaW9uIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IHJldHVyblxuICogYW4gT2JzZXJ2YWJsZSB0aGF0IGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JbnRlcmNlcHRzIGVhY2ggZW1pc3Npb24gb24gdGhlIHNvdXJjZSBhbmQgcnVucyBhXG4gKiBmdW5jdGlvbiwgYnV0IHJldHVybnMgYW4gb3V0cHV0IHdoaWNoIGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYSBtaXJyb3JlZCBPYnNlcnZhYmxlIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IG1vZGlmaWVkIHNvIHRoYXRcbiAqIHRoZSBwcm92aWRlZCBPYnNlcnZlciBpcyBjYWxsZWQgdG8gcGVyZm9ybSBhIHNpZGUgZWZmZWN0IGZvciBldmVyeSB2YWx1ZSxcbiAqIGVycm9yLCBhbmQgY29tcGxldGlvbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UuIEFueSBlcnJvcnMgdGhhdCBhcmUgdGhyb3duIGluXG4gKiB0aGUgYWZvcmVtZW50aW9uZWQgT2JzZXJ2ZXIgb3IgaGFuZGxlcnMgYXJlIHNhZmVseSBzZW50IGRvd24gdGhlIGVycm9yIHBhdGhcbiAqIG9mIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBUaGlzIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nIHlvdXIgT2JzZXJ2YWJsZXMgZm9yIHRoZSBjb3JyZWN0IHZhbHVlc1xuICogb3IgcGVyZm9ybWluZyBvdGhlciBzaWRlIGVmZmVjdHMuXG4gKlxuICogTm90ZTogdGhpcyBpcyBkaWZmZXJlbnQgdG8gYSBgc3Vic2NyaWJlYCBvbiB0aGUgT2JzZXJ2YWJsZS4gSWYgdGhlIE9ic2VydmFibGVcbiAqIHJldHVybmVkIGJ5IGBkb2AgaXMgbm90IHN1YnNjcmliZWQsIHRoZSBzaWRlIGVmZmVjdHMgc3BlY2lmaWVkIGJ5IHRoZVxuICogT2JzZXJ2ZXIgd2lsbCBuZXZlciBoYXBwZW4uIGBkb2AgdGhlcmVmb3JlIHNpbXBseSBzcGllcyBvbiBleGlzdGluZ1xuICogZXhlY3V0aW9uLCBpdCBkb2VzIG5vdCB0cmlnZ2VyIGFuIGV4ZWN1dGlvbiB0byBoYXBwZW4gbGlrZSBgc3Vic2NyaWJlYCBkb2VzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrLCB3aGlsZSBhbHNvIGxvZ2dpbmcgdGhlIGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3NcbiAqICAgLmRvKGV2ID0+IGNvbnNvbGUubG9nKGV2KSlcbiAqICAgLm1hcChldiA9PiBldi5jbGllbnRYKTtcbiAqIHBvc2l0aW9ucy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWFwfVxuICogQHNlZSB7QGxpbmsgc3Vic2NyaWJlfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2ZXJ8ZnVuY3Rpb259IFtuZXh0T3JPYnNlcnZlcl0gQSBub3JtYWwgT2JzZXJ2ZXIgb2JqZWN0IG9yIGFcbiAqIGNhbGxiYWNrIGZvciBgbmV4dGAuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBbZXJyb3JdIENhbGxiYWNrIGZvciBlcnJvcnMgaW4gdGhlIHNvdXJjZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtjb21wbGV0ZV0gQ2FsbGJhY2sgZm9yIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBzb3VyY2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIGlkZW50aWNhbCB0byB0aGUgc291cmNlLCBidXQgcnVucyB0aGVcbiAqIHNwZWNpZmllZCBPYnNlcnZlciBvciBjYWxsYmFjayhzKSBmb3IgZWFjaCBpdGVtLlxuICogQG1ldGhvZCBkb1xuICogQG5hbWUgZG9cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIF9kbyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRG9PcGVyYXRvcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSk7XG59XG5leHBvcnRzLl9kbyA9IF9kbztcbnZhciBEb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEb09wZXJhdG9yKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5uZXh0T3JPYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICB9XG4gICAgRG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5uZXh0T3JPYnNlcnZlciwgdGhpcy5lcnJvciwgdGhpcy5jb21wbGV0ZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIERvT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEb1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gbmV3IFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmFkZChzYWZlU3Vic2NyaWJlcik7XG4gICAgICAgIHRoaXMuc2FmZVN1YnNjcmliZXIgPSBzYWZlU3Vic2NyaWJlcjtcbiAgICB9XG4gICAgRG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgc2FmZVN1YnNjcmliZXIgPSB0aGlzLnNhZmVTdWJzY3JpYmVyO1xuICAgICAgICBzYWZlU3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgaWYgKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93bikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEb1N1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcbiAgICAgICAgc2FmZVN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgaWYgKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93bikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2FmZVN1YnNjcmliZXIgPSB0aGlzLnNhZmVTdWJzY3JpYmVyO1xuICAgICAgICBzYWZlU3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERvU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0NTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBleHBhbmRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2V4cGFuZCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmV4cGFuZCA9IGV4cGFuZF8xLmV4cGFuZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9leHBhbmQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBlcnJvck9iamVjdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9lcnJvck9iamVjdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHdoZXJlIGZvciBlYWNoIGl0ZW0gaW4gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGUgc3VwcGxpZWQgZnVuY3Rpb24gaXMgYXBwbGllZCB0byBlYWNoIGl0ZW0sXG4gKiByZXN1bHRpbmcgaW4gYSBuZXcgdmFsdWUgdG8gdGhlbiBiZSBhcHBsaWVkIGFnYWluIHdpdGggdGhlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gcHJvamVjdCB0aGUgZnVuY3Rpb24gZm9yIHByb2plY3RpbmcgdGhlIG5leHQgZW1pdHRlZCBpdGVtIG9mIHRoZSBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50XSB0aGUgbWF4IG51bWJlciBvZiBvYnNlcnZhYmxlcyB0aGF0IGNhbiBiZSBjcmVhdGVkIGNvbmN1cnJlbnRseS4gZGVmYXVsdHMgdG8gaW5maW5pdHkuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nIHRoZSBleHBhbnNpb25zLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSBjb250YWluaW5nIHRoZSBleHBhbnNpb25zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgZXhwYW5kXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBleHBhbmQocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IHVuZGVmaW5lZDsgfVxuICAgIGNvbmN1cnJlbnQgPSAoY29uY3VycmVudCB8fCAwKSA8IDEgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBjb25jdXJyZW50O1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEV4cGFuZE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5leHBhbmQgPSBleHBhbmQ7XG52YXIgRXhwYW5kT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV4cGFuZE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgRXhwYW5kT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRXhwYW5kU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMuY29uY3VycmVudCwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBFeHBhbmRPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLkV4cGFuZE9wZXJhdG9yID0gRXhwYW5kT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEV4cGFuZFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFeHBhbmRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEV4cGFuZFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoY29uY3VycmVudCA8IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyLCByZXN1bHQgPSBhcmcucmVzdWx0LCB2YWx1ZSA9IGFyZy52YWx1ZSwgaW5kZXggPSBhcmcuaW5kZXg7XG4gICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLnByb2plY3QpKHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLnNjaGVkdWxlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgcmVzdWx0OiByZXN1bHQsIHZhbHVlOiB2YWx1ZSwgaW5kZXg6IGluZGV4IH07XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoRXhwYW5kU3Vic2NyaWJlci5kaXNwYXRjaCwgMCwgc3RhdGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5zdWJzY3JpYmVUb1Byb2plY3Rpb24gPSBmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUrKztcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXN1bHQsIHZhbHVlLCBpbmRleCkpO1xuICAgIH07XG4gICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX25leHQoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgaWYgKGJ1ZmZlciAmJiBidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcGxldGVkICYmIHRoaXMuYWN0aXZlID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBFeHBhbmRTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydHMuRXhwYW5kU3Vic2NyaWJlciA9IEV4cGFuZFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHBhbmQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9leHBhbmQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmaWx0ZXJfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2ZpbHRlcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZpbHRlciA9IGZpbHRlcl8xLmZpbHRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbHRlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9maWx0ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBGaWx0ZXIgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYnkgb25seSBlbWl0dGluZyB0aG9zZSB0aGF0XG4gKiBzYXRpc2Z5IGEgc3BlY2lmaWVkIHByZWRpY2F0ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZVxuICogW0FycmF5LnByb3RvdHlwZS5maWx0ZXIoKV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZmlsdGVyKSxcbiAqIGl0IG9ubHkgZW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgaWYgaXQgcGFzc2VzIGEgY3JpdGVyaW9uIGZ1bmN0aW9uLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2ZpbHRlci5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBTaW1pbGFyIHRvIHRoZSB3ZWxsLWtub3duIGBBcnJheS5wcm90b3R5cGUuZmlsdGVyYCBtZXRob2QsIHRoaXMgb3BlcmF0b3JcbiAqIHRha2VzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcGFzc2VzIHRoZW0gdGhyb3VnaCBhIGBwcmVkaWNhdGVgXG4gKiBmdW5jdGlvbiBhbmQgb25seSBlbWl0cyB0aG9zZSB2YWx1ZXMgdGhhdCB5aWVsZGVkIGB0cnVlYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IG9ubHkgY2xpY2sgZXZlbnRzIHdob3NlIHRhcmdldCB3YXMgYSBESVYgZWxlbWVudDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgY2xpY2tzT25EaXZzID0gY2xpY2tzLmZpbHRlcihldiA9PiBldi50YXJnZXQudGFnTmFtZSA9PT0gJ0RJVicpO1xuICogY2xpY2tzT25EaXZzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBkaXN0aW5jdH1cbiAqIEBzZWUge0BsaW5rIGRpc3RpbmN0S2V5fVxuICogQHNlZSB7QGxpbmsgZGlzdGluY3RVbnRpbENoYW5nZWR9XG4gKiBAc2VlIHtAbGluayBkaXN0aW5jdFVudGlsS2V5Q2hhbmdlZH1cbiAqIEBzZWUge0BsaW5rIGlnbm9yZUVsZW1lbnRzfVxuICogQHNlZSB7QGxpbmsgcGFydGl0aW9ufVxuICogQHNlZSB7QGxpbmsgc2tpcH1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogYm9vbGVhbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdGhhdFxuICogZXZhbHVhdGVzIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIElmIGl0IHJldHVybnMgYHRydWVgLFxuICogdGhlIHZhbHVlIGlzIGVtaXR0ZWQsIGlmIGBmYWxzZWAgdGhlIHZhbHVlIGlzIG5vdCBwYXNzZWQgdG8gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2VcbiAqIGVtaXNzaW9uIHRoYXQgaGFzIGhhcHBlbmVkIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIHN0YXJ0aW5nIGZyb20gdGhlIG51bWJlclxuICogYDBgLlxuICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuICogaW4gdGhlIGBwcmVkaWNhdGVgIGZ1bmN0aW9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIHRoYXQgd2VyZVxuICogYWxsb3dlZCBieSB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIGZpbHRlclxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZmlsdGVyKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEZpbHRlck9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZykpO1xufVxuZXhwb3J0cy5maWx0ZXIgPSBmaWx0ZXI7XG52YXIgRmlsdGVyT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZpbHRlck9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcbiAgICB9XG4gICAgRmlsdGVyT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmlsdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy50aGlzQXJnKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRmlsdGVyT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGaWx0ZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRmlsdGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGaWx0ZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgIH1cbiAgICAvLyB0aGUgdHJ5IGNhdGNoIGJsb2NrIGJlbG93IGlzIGxlZnQgc3BlY2lmaWNhbGx5IGZvclxuICAgIC8vIG9wdGltaXphdGlvbiBhbmQgcGVyZiByZWFzb25zLiBhIHRyeUNhdGNoZXIgaXMgbm90IG5lY2Vzc2FyeSBoZXJlLlxuICAgIEZpbHRlclN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZS5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuY291bnQrKyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGaWx0ZXJTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZmlsdGVyLmpzXG4gKiogbW9kdWxlIGlkID0gNDU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZmluYWxseV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZmluYWxseScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZpbmFsbHkgPSBmaW5hbGx5XzEuX2ZpbmFsbHk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5hbGx5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2ZpbmFsbHkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgd2lsbCBjYWxsIGEgc3BlY2lmaWVkIGZ1bmN0aW9uIHdoZW5cbiAqIHRoZSBzb3VyY2UgdGVybWluYXRlcyBvbiBjb21wbGV0ZSBvciBlcnJvci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZpbmFsbHlTZWxlY3RvciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBzb3VyY2UgdGVybWluYXRlcy5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBzb3VyY2UsIGJ1dCB3aWxsIGNhbGwgdGhlIHNwZWNpZmllZCBmdW5jdGlvbiBvbiB0ZXJtaW5hdGlvbi5cbiAqIEBtZXRob2QgZmluYWxseVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gX2ZpbmFsbHkoZmluYWxseVNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRmluYWxseU9wZXJhdG9yKGZpbmFsbHlTZWxlY3RvcikpO1xufVxuZXhwb3J0cy5fZmluYWxseSA9IF9maW5hbGx5O1xudmFyIEZpbmFsbHlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRmluYWxseU9wZXJhdG9yKGZpbmFsbHlTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmZpbmFsbHlTZWxlY3RvciA9IGZpbmFsbHlTZWxlY3RvcjtcbiAgICB9XG4gICAgRmluYWxseU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEZpbmFsbHlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZmluYWxseVNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRmluYWxseU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRmluYWxseVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGaW5hbGx5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGaW5hbGx5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZmluYWxseVNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hZGQobmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbihmaW5hbGx5U2VsZWN0b3IpKTtcbiAgICB9XG4gICAgcmV0dXJuIEZpbmFsbHlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluYWxseS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2ZpbmFsbHkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmaXJzdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZmlyc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maXJzdCA9IGZpcnN0XzEuZmlyc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maXJzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9maXJzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgRW1wdHlFcnJvcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9FbXB0eUVycm9yJyk7XG4vKipcbiAqIEVtaXRzIG9ubHkgdGhlIGZpcnN0IHZhbHVlIChvciB0aGUgZmlyc3QgdmFsdWUgdGhhdCBtZWV0cyBzb21lIGNvbmRpdGlvbilcbiAqIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyBvbmx5IHRoZSBmaXJzdCB2YWx1ZS4gT3IgZW1pdHMgb25seSB0aGUgZmlyc3RcbiAqIHZhbHVlIHRoYXQgcGFzc2VzIHNvbWUgdGVzdC48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9maXJzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGBmaXJzdGAgZW1pdHMgdGhlIGZpcnN0IHZhbHVlIG9mIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUsIHRoZW4gY29tcGxldGVzLiBJZiBjYWxsZWQgd2l0aCBhIGBwcmVkaWNhdGVgIGZ1bmN0aW9uLCBgZmlyc3RgXG4gKiBlbWl0cyB0aGUgZmlyc3QgdmFsdWUgb2YgdGhlIHNvdXJjZSB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBjb25kaXRpb24uIEl0XG4gKiBtYXkgYWxzbyB0YWtlIGEgYHJlc3VsdFNlbGVjdG9yYCBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSBvdXRwdXQgdmFsdWUgZnJvbVxuICogdGhlIGlucHV0IHZhbHVlLCBhbmQgYSBgZGVmYXVsdFZhbHVlYCB0byBlbWl0IGluIGNhc2UgdGhlIHNvdXJjZSBjb21wbGV0ZXNcbiAqIGJlZm9yZSBpdCBpcyBhYmxlIHRvIGVtaXQgYSB2YWxpZCB2YWx1ZS4gVGhyb3dzIGFuIGVycm9yIGlmIGBkZWZhdWx0VmFsdWVgXG4gKiB3YXMgbm90IHByb3ZpZGVkIGFuZCBhIG1hdGNoaW5nIGVsZW1lbnQgaXMgbm90IGZvdW5kLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgb25seSB0aGUgZmlyc3QgY2xpY2sgdGhhdCBoYXBwZW5zIG9uIHRoZSBET008L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5maXJzdCgpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyB0aGUgZmlyc3QgY2xpY2sgdGhhdCBoYXBwZW5zIG9uIGEgRElWPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MuZmlyc3QoZXYgPT4gZXYudGFyZ2V0LnRhZ05hbWUgPT09ICdESVYnKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgZmlsdGVyfVxuICogQHNlZSB7QGxpbmsgZmluZH1cbiAqIEBzZWUge0BsaW5rIHRha2V9XG4gKlxuICogQHRocm93cyB7RW1wdHlFcnJvcn0gRGVsaXZlcnMgYW4gRW1wdHlFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgXG4gKiBjYWxsYmFjayBpZiB0aGUgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgYmVmb3JlIGFueSBgbmV4dGAgbm90aWZpY2F0aW9uIHdhcyBzZW50LlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIsIHNvdXJjZTogT2JzZXJ2YWJsZTxUPik6IGJvb2xlYW59IFtwcmVkaWNhdGVdXG4gKiBBbiBvcHRpb25hbCBmdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIGl0ZW0gdG8gdGVzdCBmb3IgY29uZGl0aW9uIG1hdGNoaW5nLlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IFJ9IFtyZXN1bHRTZWxlY3Rvcl0gQSBmdW5jdGlvbiB0b1xuICogcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUuIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXNcbiAqIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYHZhbHVlYDogdGhlIHZhbHVlIHRoYXQgd2FzIGVtaXR0ZWQgb24gdGhlIHNvdXJjZS5cbiAqIC0gYGluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlLlxuICogQHBhcmFtIHtSfSBbZGVmYXVsdFZhbHVlXSBUaGUgZGVmYXVsdCB2YWx1ZSBlbWl0dGVkIGluIGNhc2Ugbm8gdmFsaWQgdmFsdWVcbiAqIHdhcyBmb3VuZCBvbiB0aGUgc291cmNlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUfFI+fSBhbiBPYnNlcnZhYmxlIG9mIHRoZSBmaXJzdCBpdGVtIHRoYXQgbWF0Y2hlcyB0aGVcbiAqIGNvbmRpdGlvbi5cbiAqIEBtZXRob2QgZmlyc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGZpcnN0KHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEZpcnN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCB0aGlzKSk7XG59XG5leHBvcnRzLmZpcnN0ID0gZmlyc3Q7XG52YXIgRmlyc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRmlyc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIEZpcnN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEZpcnN0U3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMuZGVmYXVsdFZhbHVlLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIEZpcnN0T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGaXJzdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGaXJzdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRmlyc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgfVxuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeVByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZW1pdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5fZW1pdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9lbWl0ID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lbWl0RmluYWwodmFsdWUpO1xuICAgIH07XG4gICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2VtaXRGaW5hbChyZXN1bHQpO1xuICAgIH07XG4gICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fZW1pdEZpbmFsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0NvbXBsZXRlZCAmJiB0eXBlb2YgdGhpcy5kZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRmlyc3RTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zmlyc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9maXJzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gYW4gT2JzZXJ2YWJsZSBvciBhIHNlcXVlbmNlIHdhcyBxdWVyaWVkIGJ1dCBoYXMgbm9cbiAqIGVsZW1lbnRzLlxuICpcbiAqIEBzZWUge0BsaW5rIGZpcnN0fVxuICogQHNlZSB7QGxpbmsgbGFzdH1cbiAqIEBzZWUge0BsaW5rIHNpbmdsZX1cbiAqXG4gKiBAY2xhc3MgRW1wdHlFcnJvclxuICovXG52YXIgRW1wdHlFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtcHR5RXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRW1wdHlFcnJvcigpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgJ25vIGVsZW1lbnRzIGluIHNlcXVlbmNlJyk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdFbXB0eUVycm9yJztcbiAgICB9XG4gICAgcmV0dXJuIEVtcHR5RXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLkVtcHR5RXJyb3IgPSBFbXB0eUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW1wdHlFcnJvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvRW1wdHlFcnJvci5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGdyb3VwQnlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2dyb3VwQnknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5ncm91cEJ5ID0gZ3JvdXBCeV8xLmdyb3VwQnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cEJ5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2dyb3VwQnkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciBNYXBfMSA9IHJlcXVpcmUoJy4uL3V0aWwvTWFwJyk7XG52YXIgRmFzdE1hcF8xID0gcmVxdWlyZSgnLi4vdXRpbC9GYXN0TWFwJyk7XG4vKipcbiAqIEdyb3VwcyB0aGUgaXRlbXMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlIGFjY29yZGluZyB0byBhIHNwZWNpZmllZCBjcml0ZXJpb24sXG4gKiBhbmQgZW1pdHMgdGhlc2UgZ3JvdXBlZCBpdGVtcyBhcyBgR3JvdXBlZE9ic2VydmFibGVzYCwgb25lXG4gKiB7QGxpbmsgR3JvdXBlZE9ic2VydmFibGV9IHBlciBncm91cC5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2dyb3VwQnkucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IEt9IGtleVNlbGVjdG9yIGEgZnVuY3Rpb24gdGhhdCBleHRyYWN0cyB0aGUga2V5XG4gKiBmb3IgZWFjaCBpdGVtLlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IFJ9IFtlbGVtZW50U2VsZWN0b3JdIGEgZnVuY3Rpb24gdGhhdCBleHRyYWN0cyB0aGVcbiAqIHJldHVybiBlbGVtZW50IGZvciBlYWNoIGl0ZW0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGdyb3VwZWQ6IEdyb3VwZWRPYnNlcnZhYmxlPEssUj4pOiBPYnNlcnZhYmxlPGFueT59IFtkdXJhdGlvblNlbGVjdG9yXVxuICogYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0byBkZXRlcm1pbmUgaG93IGxvbmcgZWFjaCBncm91cCBzaG91bGRcbiAqIGV4aXN0LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxHcm91cGVkT2JzZXJ2YWJsZTxLLFI+Pn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzXG4gKiBHcm91cGVkT2JzZXJ2YWJsZXMsIGVhY2ggb2Ygd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB1bmlxdWUga2V5IHZhbHVlIGFuZCBlYWNoXG4gKiBvZiB3aGljaCBlbWl0cyB0aG9zZSBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IHNoYXJlIHRoYXQga2V5XG4gKiB2YWx1ZS5cbiAqIEBtZXRob2QgZ3JvdXBCeVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZ3JvdXBCeShrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgR3JvdXBCeU9wZXJhdG9yKHRoaXMsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuZ3JvdXBCeSA9IGdyb3VwQnk7XG52YXIgR3JvdXBCeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHcm91cEJ5T3BlcmF0b3Ioc291cmNlLCBrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZWxlbWVudFNlbGVjdG9yID0gZWxlbWVudFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICBHcm91cEJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgR3JvdXBCeVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5rZXlTZWxlY3RvciwgdGhpcy5lbGVtZW50U2VsZWN0b3IsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEdyb3VwQnlPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEdyb3VwQnlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JvdXBCeVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JvdXBCeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZ3JvdXBzID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMuYWRkKGRlc3RpbmF0aW9uKTtcbiAgICB9XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBrZXkgPSB0aGlzLmtleVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ3JvdXAodmFsdWUsIGtleSk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2dyb3VwID0gZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuICAgICAgICBpZiAoIWdyb3Vwcykge1xuICAgICAgICAgICAgZ3JvdXBzID0gdGhpcy5ncm91cHMgPSB0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyA/IG5ldyBGYXN0TWFwXzEuRmFzdE1hcCgpIDogbmV3IE1hcF8xLk1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBncm91cCA9IGdyb3Vwcy5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFncm91cCkge1xuICAgICAgICAgICAgZ3JvdXBzLnNldChrZXksIGdyb3VwID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCkpO1xuICAgICAgICAgICAgdmFyIGdyb3VwZWRPYnNlcnZhYmxlID0gbmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXAsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdER1cmF0aW9uKGtleSwgZ3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGdyb3VwZWRPYnNlcnZhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lbGVtZW50U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdEVsZW1lbnQodmFsdWUsIGdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudHJ5R3JvdXBOZXh0KHZhbHVlLCBncm91cCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2VsZWN0RWxlbWVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgZ3JvdXApIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZWxlbWVudFNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cnlHcm91cE5leHQocmVzdWx0LCBncm91cCk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX3NlbGVjdER1cmF0aW9uID0gZnVuY3Rpb24gKGtleSwgZ3JvdXApIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IobmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXApKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGQoZHVyYXRpb24uc3Vic2NyaWJlKG5ldyBHcm91cER1cmF0aW9uU3Vic2NyaWJlcihrZXksIGdyb3VwLCB0aGlzKSkpO1xuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnRyeUdyb3VwTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSwgZ3JvdXApIHtcbiAgICAgICAgaWYgKCFncm91cC5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgZ3JvdXAubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3VwcztcbiAgICAgICAgaWYgKGdyb3Vwcykge1xuICAgICAgICAgICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBncm91cC5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncm91cHMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG4gICAgICAgIGlmIChncm91cHMpIHtcbiAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCwga2V5KSB7XG4gICAgICAgICAgICAgICAgZ3JvdXAuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ3JvdXBzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnJlbW92ZUdyb3VwID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB0aGlzLmdyb3Vwcy5kZWxldGUoa2V5KTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVW5zdWJzY3JpYmVkICYmICF0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEdyb3VwQnlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBHcm91cER1cmF0aW9uU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHBhcmVudCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgfVxuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLnRyeUVycm9yKGVycik7XG4gICAgfTtcbiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG4gICAgICAgIGlmICghZ3JvdXAuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlR3JvdXAodGhpcy5rZXkpO1xuICAgIH07XG4gICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLnRyeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3VwO1xuICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBncm91cC5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUdyb3VwKHRoaXMua2V5KTtcbiAgICB9O1xuICAgIHJldHVybiBHcm91cER1cmF0aW9uU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8qKlxuICogQW4gT2JzZXJ2YWJsZSByZXByZXNlbnRpbmcgdmFsdWVzIGJlbG9uZ2luZyB0byB0aGUgc2FtZSBncm91cCByZXByZXNlbnRlZCBieVxuICogYSBjb21tb24ga2V5LiBUaGUgdmFsdWVzIGVtaXR0ZWQgYnkgYSBHcm91cGVkT2JzZXJ2YWJsZSBjb21lIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIGNvbW1vbiBrZXkgaXMgYXZhaWxhYmxlIGFzIHRoZSBmaWVsZCBga2V5YCBvbiBhXG4gKiBHcm91cGVkT2JzZXJ2YWJsZSBpbnN0YW5jZS5cbiAqXG4gKiBAY2xhc3MgR3JvdXBlZE9ic2VydmFibGU8SywgVD5cbiAqL1xudmFyIEdyb3VwZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JvdXBlZE9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cFN1YmplY3QsIHJlZkNvdW50U3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5ncm91cFN1YmplY3QgPSBncm91cFN1YmplY3Q7XG4gICAgICAgIHRoaXMucmVmQ291bnRTdWJzY3JpcHRpb24gPSByZWZDb3VudFN1YnNjcmlwdGlvbjtcbiAgICB9XG4gICAgR3JvdXBlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCByZWZDb3VudFN1YnNjcmlwdGlvbiA9IF9hLnJlZkNvdW50U3Vic2NyaXB0aW9uLCBncm91cFN1YmplY3QgPSBfYS5ncm91cFN1YmplY3Q7XG4gICAgICAgIGlmIChyZWZDb3VudFN1YnNjcmlwdGlvbiAmJiAhcmVmQ291bnRTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQobmV3IElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ocmVmQ291bnRTdWJzY3JpcHRpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpcHRpb24uYWRkKGdyb3VwU3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcikpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIEdyb3VwZWRPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Hcm91cGVkT2JzZXJ2YWJsZSA9IEdyb3VwZWRPYnNlcnZhYmxlO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHBhcmVudCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHBhcmVudC5jb3VudCsrO1xuICAgIH1cbiAgICBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50O1xuICAgICAgICBpZiAoIXBhcmVudC5pc1Vuc3Vic2NyaWJlZCAmJiAhdGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgcGFyZW50LmNvdW50IC09IDE7XG4gICAgICAgICAgICBpZiAocGFyZW50LmNvdW50ID09PSAwICYmIHBhcmVudC5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwQnkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9ncm91cEJ5LmpzXG4gKiogbW9kdWxlIGlkID0gNDY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3Jvb3QnKTtcbnZhciBNYXBQb2x5ZmlsbF8xID0gcmVxdWlyZSgnLi9NYXBQb2x5ZmlsbCcpO1xuZXhwb3J0cy5NYXAgPSByb290XzEucm9vdC5NYXAgfHwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1hcFBvbHlmaWxsXzEuTWFwUG9seWZpbGw7IH0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL01hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgTWFwUG9seWZpbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcFBvbHlmaWxsKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fa2V5cyA9IFtdO1xuICAgIH1cbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgICByZXR1cm4gaSA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLl92YWx1ZXNbaV07XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcbiAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9rZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92YWx1ZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICB0aGlzLl9rZXlzLnNwbGljZShpLCAxKTtcbiAgICAgICAgdGhpcy5zaXplLS07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9rZXlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH07XG4gICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2IsIHRoaXNBcmcpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkrKykge1xuICAgICAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB0aGlzLl92YWx1ZXNbaV0sIHRoaXMuX2tleXNbaV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWFwUG9seWZpbGw7XG59KCkpO1xuZXhwb3J0cy5NYXBQb2x5ZmlsbCA9IE1hcFBvbHlmaWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwUG9seWZpbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL01hcFBvbHlmaWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGYXN0TWFwID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGYXN0TWFwKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgIH1cbiAgICBGYXN0TWFwLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRoaXMudmFsdWVzW2tleV0gPSBudWxsO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIEZhc3RNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBGYXN0TWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1trZXldO1xuICAgIH07XG4gICAgRmFzdE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXM7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiB2YWx1ZXNba2V5XSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNiLmNhbGwodGhpc0FyZywgdmFsdWVzW2tleV0sIGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZhc3RNYXAucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgIH07XG4gICAgcmV0dXJuIEZhc3RNYXA7XG59KCkpO1xuZXhwb3J0cy5GYXN0TWFwID0gRmFzdE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZhc3RNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL0Zhc3RNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0NjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBpZ25vcmVFbGVtZW50c18xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvaWdub3JlRWxlbWVudHMnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5pZ25vcmVFbGVtZW50cyA9IGlnbm9yZUVsZW1lbnRzXzEuaWdub3JlRWxlbWVudHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVFbGVtZW50cy5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9pZ25vcmVFbGVtZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgbm9vcF8xID0gcmVxdWlyZSgnLi4vdXRpbC9ub29wJyk7XG4vKipcbiAqIElnbm9yZXMgYWxsIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBvbmx5IHBhc3NlcyBjYWxscyBvZiBgY29tcGxldGVgIG9yIGBlcnJvcmAuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9pZ25vcmVFbGVtZW50cy5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBlbXB0eSBPYnNlcnZhYmxlIHRoYXQgb25seSBjYWxscyBgY29tcGxldGVgXG4gKiBvciBgZXJyb3JgLCBiYXNlZCBvbiB3aGljaCBvbmUgaXMgY2FsbGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgaWdub3JlRWxlbWVudHNcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGlnbm9yZUVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IElnbm9yZUVsZW1lbnRzT3BlcmF0b3IoKSk7XG59XG5leHBvcnRzLmlnbm9yZUVsZW1lbnRzID0gaWdub3JlRWxlbWVudHM7XG47XG52YXIgSWdub3JlRWxlbWVudHNPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgSWdub3JlRWxlbWVudHNPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcbiAgICAgICAgbm9vcF8xLm5vb3AoKTtcbiAgICB9O1xuICAgIHJldHVybiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVFbGVtZW50cy5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gNDY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYXVkaXRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2F1ZGl0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYXVkaXQgPSBhdWRpdF8xLmF1ZGl0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvYXVkaXQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBlcnJvck9iamVjdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9lcnJvck9iamVjdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogSWdub3JlcyBzb3VyY2UgdmFsdWVzIGZvciBhIGR1cmF0aW9uIGRldGVybWluZWQgYnkgYW5vdGhlciBPYnNlcnZhYmxlLCB0aGVuXG4gKiBlbWl0cyB0aGUgbW9zdCByZWNlbnQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gcmVwZWF0cyB0aGlzXG4gKiBwcm9jZXNzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGF1ZGl0VGltZX0sIGJ1dCB0aGUgc2lsZW5jaW5nXG4gKiBkdXJhdGlvbiBpcyBkZXRlcm1pbmVkIGJ5IGEgc2Vjb25kIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvYXVkaXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYGF1ZGl0YCBpcyBzaW1pbGFyIHRvIGB0aHJvdHRsZWAsIGJ1dCBlbWl0cyB0aGUgbGFzdCB2YWx1ZSBmcm9tIHRoZSBzaWxlbmNlZFxuICogdGltZSB3aW5kb3csIGluc3RlYWQgb2YgdGhlIGZpcnN0IHZhbHVlLiBgYXVkaXRgIGVtaXRzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZVxuICogZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGFzIHNvb24gYXMgaXRzIGludGVybmFsXG4gKiB0aW1lciBiZWNvbWVzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoaWxlIHRoZSB0aW1lciBpcyBlbmFibGVkLlxuICogSW5pdGlhbGx5LCB0aGUgdGltZXIgaXMgZGlzYWJsZWQuIEFzIHNvb24gYXMgdGhlIGZpcnN0IHNvdXJjZSB2YWx1ZSBhcnJpdmVzLFxuICogdGhlIHRpbWVyIGlzIGVuYWJsZWQgYnkgY2FsbGluZyB0aGUgYGR1cmF0aW9uU2VsZWN0b3JgIGZ1bmN0aW9uIHdpdGggdGhlXG4gKiBzb3VyY2UgdmFsdWUsIHdoaWNoIHJldHVybnMgdGhlIFwiZHVyYXRpb25cIiBPYnNlcnZhYmxlLiBXaGVuIHRoZSBkdXJhdGlvblxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlIG9yIGNvbXBsZXRlcywgdGhlIHRpbWVyIGlzIGRpc2FibGVkLCB0aGVuIHRoZSBtb3N0XG4gKiByZWNlbnQgc291cmNlIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLCBhbmQgdGhpcyBwcm9jZXNzXG4gKiByZXBlYXRzIGZvciB0aGUgbmV4dCBzb3VyY2UgdmFsdWUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGlja3MgYXQgYSByYXRlIG9mIGF0IG1vc3Qgb25lIGNsaWNrIHBlciBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5hdWRpdChldiA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG4gKiBAc2VlIHtAbGluayBkZWxheVdoZW59XG4gKiBAc2VlIHtAbGluayBzYW1wbGV9XG4gKiBAc2VlIHtAbGluayB0aHJvdHRsZX1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBkdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb25cbiAqIHRoYXQgcmVjZWl2ZXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgZm9yIGNvbXB1dGluZyB0aGUgc2lsZW5jaW5nXG4gKiBkdXJhdGlvbiwgcmV0dXJuZWQgYXMgYW4gT2JzZXJ2YWJsZSBvciBhIFByb21pc2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgcmF0ZS1saW1pdGluZyBvZlxuICogZW1pc3Npb25zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBhdWRpdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYXVkaXQoZHVyYXRpb25TZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikpO1xufVxuZXhwb3J0cy5hdWRpdCA9IGF1ZGl0O1xudmFyIEF1ZGl0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICBBdWRpdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEF1ZGl0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBBdWRpdE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQXVkaXRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXVkaXRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEF1ZGl0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuZHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgdmFsdWUgPSBfYS52YWx1ZSwgaGFzVmFsdWUgPSBfYS5oYXNWYWx1ZSwgdGhyb3R0bGVkID0gX2EudGhyb3R0bGVkO1xuICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHRoaXMuY2xlYXJUaHJvdHRsZSgpO1xuICAgIH07XG4gICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQXVkaXRTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvYXVkaXQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBhdWRpdFRpbWVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2F1ZGl0VGltZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmF1ZGl0VGltZSA9IGF1ZGl0VGltZV8xLmF1ZGl0VGltZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0VGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9hdWRpdFRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogSWdub3JlcyBzb3VyY2UgdmFsdWVzIGZvciBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcywgdGhlbiBlbWl0cyB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIHJlcGVhdHMgdGhpcyBwcm9jZXNzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuIGl0IHNlZXMgYSBzb3VyY2UgdmFsdWVzLCBpdCBpZ25vcmVzIHRoYXQgcGx1c1xuICogdGhlIG5leHQgb25lcyBmb3IgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGl0IGVtaXRzIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWUgZnJvbSB0aGUgc291cmNlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2F1ZGl0VGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgYXVkaXRUaW1lYCBpcyBzaW1pbGFyIHRvIGB0aHJvdHRsZVRpbWVgLCBidXQgZW1pdHMgdGhlIGxhc3QgdmFsdWUgZnJvbSB0aGVcbiAqIHNpbGVuY2VkIHRpbWUgd2luZG93LCBpbnN0ZWFkIG9mIHRoZSBmaXJzdCB2YWx1ZS4gYGF1ZGl0VGltZWAgZW1pdHMgdGhlIG1vc3RcbiAqIHJlY2VudCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYXMgc29vbiBhc1xuICogaXRzIGludGVybmFsIHRpbWVyIGJlY29tZXMgZGlzYWJsZWQsIGFuZCBpZ25vcmVzIHNvdXJjZSB2YWx1ZXMgd2hpbGUgdGhlXG4gKiB0aW1lciBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3RcbiAqIHNvdXJjZSB2YWx1ZSBhcnJpdmVzLCB0aGUgdGltZXIgaXMgZW5hYmxlZC4gQWZ0ZXIgYGR1cmF0aW9uYCBtaWxsaXNlY29uZHMgKG9yXG4gKiB0aGUgdGltZSB1bml0IGRldGVybWluZWQgaW50ZXJuYWxseSBieSB0aGUgb3B0aW9uYWwgYHNjaGVkdWxlcmApIGhhcyBwYXNzZWQsXG4gKiB0aGUgdGltZXIgaXMgZGlzYWJsZWQsIHRoZW4gdGhlIG1vc3QgcmVjZW50IHNvdXJjZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZVxuICogb3V0cHV0IE9ic2VydmFibGUsIGFuZCB0aGlzIHByb2Nlc3MgcmVwZWF0cyBmb3IgdGhlIG5leHQgc291cmNlIHZhbHVlLlxuICogT3B0aW9uYWxseSB0YWtlcyBhIHtAbGluayBTY2hlZHVsZXJ9IGZvciBtYW5hZ2luZyB0aW1lcnMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGlja3MgYXQgYSByYXRlIG9mIGF0IG1vc3Qgb25lIGNsaWNrIHBlciBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5hdWRpdFRpbWUoMTAwMCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2VUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVsYXl9XG4gKiBAc2VlIHtAbGluayBzYW1wbGVUaW1lfVxuICogQHNlZSB7QGxpbmsgdGhyb3R0bGVUaW1lfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaW1lIHRvIHdhaXQgYmVmb3JlIGVtaXR0aW5nIHRoZSBtb3N0IHJlY2VudCBzb3VyY2VcbiAqIHZhbHVlLCBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGludGVybmFsbHlcbiAqIGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgcmF0ZS1saW1pdGluZyBiZWhhdmlvci5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBwZXJmb3JtcyByYXRlLWxpbWl0aW5nIG9mXG4gKiBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIGF1ZGl0VGltZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYXVkaXRUaW1lKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0VGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMuYXVkaXRUaW1lID0gYXVkaXRUaW1lO1xudmFyIEF1ZGl0VGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBdWRpdFRpbWVPcGVyYXRvcihkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIEF1ZGl0VGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEF1ZGl0VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBBdWRpdFRpbWVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEF1ZGl0VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdWRpdFRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEF1ZGl0VGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIEF1ZGl0VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy50aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1cmF0aW9uLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEF1ZGl0VGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyVGhyb3R0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHZhbHVlID0gX2EudmFsdWUsIGhhc1ZhbHVlID0gX2EuaGFzVmFsdWUsIHRocm90dGxlZCA9IF9hLnRocm90dGxlZDtcbiAgICAgICAgaWYgKHRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcbiAgICAgICAgICAgIHRoaXMudGhyb3R0bGVkID0gbnVsbDtcbiAgICAgICAgICAgIHRocm90dGxlZC51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXVkaXRUaW1lU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChzdWJzY3JpYmVyKSB7XG4gICAgc3Vic2NyaWJlci5jbGVhclRocm90dGxlKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdFRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9hdWRpdFRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBsYXN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9sYXN0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGFzdCA9IGxhc3RfMS5sYXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9sYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBFbXB0eUVycm9yXzEgPSByZXF1aXJlKCcuLi91dGlsL0VtcHR5RXJyb3InKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgbGFzdCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogSXQgb3B0aW9uYWxseSB0YWtlcyBhIHByZWRpY2F0ZSBmdW5jdGlvbiBhcyBhIHBhcmFtZXRlciwgaW4gd2hpY2ggY2FzZSwgcmF0aGVyIHRoYW4gZW1pdHRpbmdcbiAqIHRoZSBsYXN0IGl0ZW0gZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSB3aWxsIGVtaXQgdGhlIGxhc3QgaXRlbVxuICogZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2xhc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHRocm93cyB7RW1wdHlFcnJvcn0gRGVsaXZlcnMgYW4gRW1wdHlFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgXG4gKiBjYWxsYmFjayBpZiB0aGUgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgYmVmb3JlIGFueSBgbmV4dGAgbm90aWZpY2F0aW9uIHdhcyBzZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gcHJlZGljYXRlIC0gdGhlIGNvbmRpdGlvbiBhbnkgc291cmNlIGVtaXR0ZWQgaXRlbSBoYXMgdG8gc2F0aXNmeS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBsYXN0IGl0ZW0gc2F0aXNmeWluZyB0aGUgZ2l2ZW4gY29uZGl0aW9uXG4gKiBmcm9tIHRoZSBzb3VyY2UsIG9yIGFuIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gaWYgbm8gc3VjaCBpdGVtcyBhcmUgZW1pdHRlZC5cbiAqIEB0aHJvd3MgLSBUaHJvd3MgaWYgbm8gaXRlbXMgdGhhdCBtYXRjaCB0aGUgcHJlZGljYXRlIGFyZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgbGFzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbGFzdChwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBMYXN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCB0aGlzKSk7XG59XG5leHBvcnRzLmxhc3QgPSBsYXN0O1xudmFyIExhc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTGFzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBMYXN0U3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMuZGVmYXVsdFZhbHVlLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIExhc3RPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIExhc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGFzdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTGFzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlQcmVkaWNhdGUodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJlZGljYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIGluZGV4LCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdFZhbHVlID0gcmVzdWx0O1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICB9O1xuICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTGFzdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbGFzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGxldF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvbGV0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGV0ID0gbGV0XzEubGV0UHJvdG87XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGV0QmluZCA9IGxldF8xLmxldFByb3RvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGV0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2xldC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBwYXJhbSBmdW5jXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fVxuICogQG1ldGhvZCBsZXRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGxldFByb3RvKGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuYyh0aGlzKTtcbn1cbmV4cG9ydHMubGV0UHJvdG8gPSBsZXRQcm90bztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxldC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2xldC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGV2ZXJ5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9ldmVyeScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmV2ZXJ5ID0gZXZlcnlfMS5ldmVyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZXJ5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2V2ZXJ5LmpzXG4gKiogbW9kdWxlIGlkID0gNDc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2hldGhlciBvciBub3QgZXZlcnkgaXRlbSBvZiB0aGUgc291cmNlIHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIHNwZWNpZmllZC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHByZWRpY2F0ZSBhIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyBpZiBhbiBpdGVtIG1lZXRzIGEgc3BlY2lmaWVkIGNvbmRpdGlvbi5cbiAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gb3B0aW9uYWwgb2JqZWN0IHRvIHVzZSBmb3IgYHRoaXNgIGluIHRoZSBjYWxsYmFja1xuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSBvZiBib29sZWFucyB0aGF0IGRldGVybWluZXMgaWYgYWxsIGl0ZW1zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtZWV0IHRoZSBjb25kaXRpb24gc3BlY2lmaWVkLlxuICogQG1ldGhvZCBldmVyeVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZXZlcnkocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRXZlcnlPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcsIHRoaXMpKTtcbn1cbmV4cG9ydHMuZXZlcnkgPSBldmVyeTtcbnZhciBFdmVyeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFdmVyeU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgRXZlcnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRXZlcnlTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy50aGlzQXJnLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZXJ5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBFdmVyeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFdmVyeVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXZlcnlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcbiAgICB9XG4gICAgRXZlcnlTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChldmVyeVZhbHVlTWF0Y2gpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGV2ZXJ5VmFsdWVNYXRjaCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmluZGV4KyssIHRoaXMuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5Q29tcGxldGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFdmVyeVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZSh0cnVlKTtcbiAgICB9O1xuICAgIHJldHVybiBFdmVyeVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVyeS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2V2ZXJ5LmpzXG4gKiogbW9kdWxlIGlkID0gNDc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXAgPSBtYXBfMS5tYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQXBwbGllcyBhIGdpdmVuIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoZSByZXN1bHRpbmcgdmFsdWVzIGFzIGFuIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxpa2UgW0FycmF5LnByb3RvdHlwZS5tYXAoKV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvbWFwKSxcbiAqIGl0IHBhc3NlcyBlYWNoIHNvdXJjZSB2YWx1ZSB0aHJvdWdoIGEgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb24gdG8gZ2V0XG4gKiBjb3JyZXNwb25kaW5nIG91dHB1dCB2YWx1ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFNpbWlsYXIgdG8gdGhlIHdlbGwga25vd24gYEFycmF5LnByb3RvdHlwZS5tYXBgIGZ1bmN0aW9uLCB0aGlzIG9wZXJhdG9yXG4gKiBhcHBsaWVzIGEgcHJvamVjdGlvbiB0byBlYWNoIHZhbHVlIGFuZCBlbWl0cyB0aGF0IHByb2plY3Rpb24gaW4gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIGNsaWVudFggcG9zaXRpb24gb2YgdGhhdCBjbGljazwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcG9zaXRpb25zID0gY2xpY2tzLm1hcChldiA9PiBldi5jbGllbnRYKTtcbiAqIHBvc2l0aW9ucy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWFwVG99XG4gKiBAc2VlIHtAbGluayBwbHVja31cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogUn0gcHJvamVjdCBUaGUgZnVuY3Rpb24gdG8gYXBwbHlcbiAqIHRvIGVhY2ggYHZhbHVlYCBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzXG4gKiB0aGUgbnVtYmVyIGBpYCBmb3IgdGhlIGktdGggZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlXG4gKiBzdWJzY3JpcHRpb24sIHN0YXJ0aW5nIGZyb20gdGhlIG51bWJlciBgMGAuXG4gKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGRlZmluZSB3aGF0IGB0aGlzYCBpcyBpbiB0aGVcbiAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSB0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uLlxuICogQG1ldGhvZCBtYXBcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9qZWN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLiBBcmUgeW91IGxvb2tpbmcgZm9yIGBtYXBUbygpYD8nKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWFwT3BlcmF0b3IocHJvamVjdCwgdGhpc0FyZykpO1xufVxuZXhwb3J0cy5tYXAgPSBtYXA7XG52YXIgTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcE9wZXJhdG9yKHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcbiAgICB9XG4gICAgTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMudGhpc0FyZykpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWFwU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgdGhpc0FyZykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnIHx8IHRoaXM7XG4gICAgfVxuICAgIC8vIE5PVEU6IFRoaXMgbG9va3MgdW5vcHRpbWl6ZWQsIGJ1dCBpdCdzIGFjdHVhbGx5IHB1cnBvc2VmdWxseSBOT1RcbiAgICAvLyB1c2luZyB0cnkvY2F0Y2ggb3B0aW1pemF0aW9ucy5cbiAgICBNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1hcFRvXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tYXBUbycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1hcFRvID0gbWFwVG9fMS5tYXBUbztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNDgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogRW1pdHMgdGhlIGdpdmVuIGNvbnN0YW50IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBldmVyeSB0aW1lIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSB7QGxpbmsgbWFwfSwgYnV0IGl0IG1hcHMgZXZlcnkgc291cmNlIHZhbHVlIHRvXG4gKiB0aGUgc2FtZSBvdXRwdXQgdmFsdWUgZXZlcnkgdGltZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBUYWtlcyBhIGNvbnN0YW50IGB2YWx1ZWAgYXMgYXJndW1lbnQsIGFuZCBlbWl0cyB0aGF0IHdoZW5ldmVyIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS4gSW4gb3RoZXIgd29yZHMsIGlnbm9yZXMgdGhlIGFjdHVhbCBzb3VyY2UgdmFsdWUsXG4gKiBhbmQgc2ltcGx5IHVzZXMgdGhlIGVtaXNzaW9uIG1vbWVudCB0byBrbm93IHdoZW4gdG8gZW1pdCB0aGUgZ2l2ZW4gYHZhbHVlYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIHN0cmluZyAnSGknPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBncmVldGluZ3MgPSBjbGlja3MubWFwVG8oJ0hpJyk7XG4gKiBncmVldGluZ3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIG1hcH1cbiAqXG4gKiBAcGFyYW0ge2FueX0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcCBlYWNoIHNvdXJjZSB2YWx1ZSB0by5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgZ2l2ZW4gYHZhbHVlYCBldmVyeSB0aW1lXG4gKiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgc29tZXRoaW5nLlxuICogQG1ldGhvZCBtYXBUb1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWFwVG8odmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXBUb09wZXJhdG9yKHZhbHVlKSk7XG59XG5leHBvcnRzLm1hcFRvID0gbWFwVG87XG52YXIgTWFwVG9PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwVG9PcGVyYXRvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIE1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWFwVG9TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudmFsdWUpKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBUb09wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwVG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdmFsdWUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy52YWx1ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwVG9TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tYXBUby5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1hdGVyaWFsaXplXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tYXRlcmlhbGl6ZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1hdGVyaWFsaXplID0gbWF0ZXJpYWxpemVfMS5tYXRlcmlhbGl6ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGVyaWFsaXplLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21hdGVyaWFsaXplLmpzXG4gKiogbW9kdWxlIGlkID0gNDg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBOb3RpZmljYXRpb25fMSA9IHJlcXVpcmUoJy4uL05vdGlmaWNhdGlvbicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCByZXByZXNlbnRzIGFsbCBvZiB0aGUgZW1pc3Npb25zIGFuZCBub3RpZmljYXRpb25zXG4gKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnRvIGVtaXNzaW9ucyBtYXJrZWQgd2l0aCB0aGVpciBvcmlnaW5hbCB0eXBlc1xuICogd2l0aGluIGEgYE5vdGlmaWNhdGlvbmAgb2JqZWN0cy5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21hdGVyaWFsaXplLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cbiAqXG4gKiBAc2NoZWR1bGVyIG1hdGVyaWFsaXplIGRvZXMgbm90IG9wZXJhdGUgYnkgZGVmYXVsdCBvbiBhIHBhcnRpY3VsYXIgU2NoZWR1bGVyLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxOb3RpZmljYXRpb248VD4+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgdGhhdCBhcmUgdGhlIHJlc3VsdCBvZlxuICogbWF0ZXJpYWxpemluZyB0aGUgaXRlbXMgYW5kIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBtYXRlcmlhbGl6ZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWF0ZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWF0ZXJpYWxpemVPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMubWF0ZXJpYWxpemUgPSBtYXRlcmlhbGl6ZTtcbnZhciBNYXRlcmlhbGl6ZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZU9wZXJhdG9yKCkge1xuICAgIH1cbiAgICBNYXRlcmlhbGl6ZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWF0ZXJpYWxpemVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE1hdGVyaWFsaXplU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hdGVyaWFsaXplU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuICAgIH07XG4gICAgTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGVycikpO1xuICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hdGVyaWFsaXplU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGVyaWFsaXplLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWF0ZXJpYWxpemUuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtZXJnZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvbWVyZ2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZSA9IG1lcmdlXzEubWVyZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlQWxsXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tZXJnZUFsbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlQWxsID0gbWVyZ2VBbGxfMS5tZXJnZUFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlQWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlQWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWVyZ2VNYXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21lcmdlTWFwJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VNYXAgPSBtZXJnZU1hcF8xLm1lcmdlTWFwO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZsYXRNYXAgPSBtZXJnZU1hcF8xLm1lcmdlTWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtZXJnZU1hcFRvXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tZXJnZU1hcFRvJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VNYXBUbyA9IG1lcmdlTWFwVG9fMS5tZXJnZU1hcFRvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNDg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tdWx0aWNhc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tdWx0aWNhc3QgPSBtdWx0aWNhc3RfMS5tdWx0aWNhc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tdWx0aWNhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbXVsdGljYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgb2JzZXJ2ZU9uXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9vYnNlcnZlT24nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5vYnNlcnZlT24gPSBvYnNlcnZlT25fMS5vYnNlcnZlT247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivb2JzZXJ2ZU9uLmpzXG4gKiogbW9kdWxlIGlkID0gNDkxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcGFydGl0aW9uXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9wYXJ0aXRpb24nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wYXJ0aXRpb24gPSBwYXJ0aXRpb25fMS5wYXJ0aXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0aXRpb24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcGFydGl0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNDkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBub3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvbm90Jyk7XG52YXIgZmlsdGVyXzEgPSByZXF1aXJlKCcuL2ZpbHRlcicpO1xuLyoqXG4gKiBTcGxpdHMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGludG8gdHdvLCBvbmUgd2l0aCB2YWx1ZXMgdGhhdCBzYXRpc2Z5IGFcbiAqIHByZWRpY2F0ZSwgYW5kIGFub3RoZXIgd2l0aCB2YWx1ZXMgdGhhdCBkb24ndCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgZmlsdGVyfSwgYnV0IHJldHVybnMgdHdvIE9ic2VydmFibGVzOlxuICogb25lIGxpa2UgdGhlIG91dHB1dCBvZiB7QGxpbmsgZmlsdGVyfSwgYW5kIHRoZSBvdGhlciB3aXRoIHZhbHVlcyB0aGF0IGRpZCBub3RcbiAqIHBhc3MgdGhlIGNvbmRpdGlvbi48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9wYXJ0aXRpb24ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHBhcnRpdGlvbmAgb3V0cHV0cyBhbiBhcnJheSB3aXRoIHR3byBPYnNlcnZhYmxlcyB0aGF0IHBhcnRpdGlvbiB0aGUgdmFsdWVzXG4gKiBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aHJvdWdoIHRoZSBnaXZlbiBgcHJlZGljYXRlYCBmdW5jdGlvbi4gVGhlIGZpcnN0XG4gKiBPYnNlcnZhYmxlIGluIHRoYXQgYXJyYXkgZW1pdHMgc291cmNlIHZhbHVlcyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSBhcmd1bWVudFxuICogcmV0dXJucyB0cnVlLiBUaGUgc2Vjb25kIE9ic2VydmFibGUgZW1pdHMgc291cmNlIHZhbHVlcyBmb3Igd2hpY2ggdGhlXG4gKiBwcmVkaWNhdGUgcmV0dXJucyBmYWxzZS4gVGhlIGZpcnN0IGJlaGF2ZXMgbGlrZSB7QGxpbmsgZmlsdGVyfSBhbmQgdGhlIHNlY29uZFxuICogYmVoYXZlcyBsaWtlIHtAbGluayBmaWx0ZXJ9IHdpdGggdGhlIHByZWRpY2F0ZSBuZWdhdGVkLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlBhcnRpdGlvbiBjbGljayBldmVudHMgaW50byB0aG9zZSBvbiBESVYgZWxlbWVudHMgYW5kIHRob3NlIGVsc2V3aGVyZTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcGFydHMgPSBjbGlja3MucGFydGl0aW9uKGV2ID0+IGV2LnRhcmdldC50YWdOYW1lID09PSAnRElWJyk7XG4gKiB2YXIgY2xpY2tzT25EaXZzID0gcGFydHNbMF07XG4gKiB2YXIgY2xpY2tzRWxzZXdoZXJlID0gcGFydHNbMV07XG4gKiBjbGlja3NPbkRpdnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coJ0RJViBjbGlja2VkOiAnLCB4KSk7XG4gKiBjbGlja3NFbHNld2hlcmUuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coJ090aGVyIGNsaWNrZWQ6ICcsIHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBmaWx0ZXJ9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IGJvb2xlYW59IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRoYXRcbiAqIGV2YWx1YXRlcyBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiBpdCByZXR1cm5zIGB0cnVlYCxcbiAqIHRoZSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBmaXJzdCBPYnNlcnZhYmxlIGluIHRoZSByZXR1cm5lZCBhcnJheSwgaWZcbiAqIGBmYWxzZWAgdGhlIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIHNlY29uZCBPYnNlcnZhYmxlIGluIHRoZSBhcnJheS4gVGhlXG4gKiBgaW5kZXhgIHBhcmFtZXRlciBpcyB0aGUgbnVtYmVyIGBpYCBmb3IgdGhlIGktdGggc291cmNlIGVtaXNzaW9uIHRoYXQgaGFzXG4gKiBoYXBwZW5lZCBzaW5jZSB0aGUgc3Vic2NyaXB0aW9uLCBzdGFydGluZyBmcm9tIHRoZSBudW1iZXIgYDBgLlxuICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuICogaW4gdGhlIGBwcmVkaWNhdGVgIGZ1bmN0aW9uLlxuICogQHJldHVybiB7W09ic2VydmFibGU8VD4sIE9ic2VydmFibGU8VD5dfSBBbiBhcnJheSB3aXRoIHR3byBPYnNlcnZhYmxlczogb25lXG4gKiB3aXRoIHZhbHVlcyB0aGF0IHBhc3NlZCB0aGUgcHJlZGljYXRlLCBhbmQgYW5vdGhlciB3aXRoIHZhbHVlcyB0aGF0IGRpZCBub3RcbiAqIHBhc3MgdGhlIHByZWRpY2F0ZS5cbiAqIEBtZXRob2QgcGFydGl0aW9uXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBwYXJ0aXRpb24ocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgZmlsdGVyXzEuZmlsdGVyLmNhbGwodGhpcywgcHJlZGljYXRlKSxcbiAgICAgICAgZmlsdGVyXzEuZmlsdGVyLmNhbGwodGhpcywgbm90XzEubm90KHByZWRpY2F0ZSwgdGhpc0FyZykpXG4gICAgXTtcbn1cbmV4cG9ydHMucGFydGl0aW9uID0gcGFydGl0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydGl0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcGFydGl0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNDkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIG5vdChwcmVkLCB0aGlzQXJnKSB7XG4gICAgZnVuY3Rpb24gbm90UHJlZCgpIHtcbiAgICAgICAgcmV0dXJuICEobm90UHJlZC5wcmVkLmFwcGx5KG5vdFByZWQudGhpc0FyZywgYXJndW1lbnRzKSk7XG4gICAgfVxuICAgIG5vdFByZWQucHJlZCA9IHByZWQ7XG4gICAgbm90UHJlZC50aGlzQXJnID0gdGhpc0FyZztcbiAgICByZXR1cm4gbm90UHJlZDtcbn1cbmV4cG9ydHMubm90ID0gbm90O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm90LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9ub3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0OTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwbHVja18xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcGx1Y2snKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wbHVjayA9IHBsdWNrXzEucGx1Y2s7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbHVjay5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wbHVjay5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbWFwXzEgPSByZXF1aXJlKCcuL21hcCcpO1xuLyoqXG4gKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIChhbiBvYmplY3QpIHRvIGl0cyBzcGVjaWZpZWQgbmVzdGVkIHByb3BlcnR5LlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlIHtAbGluayBtYXB9LCBidXQgbWVhbnQgb25seSBmb3IgcGlja2luZyBvbmUgb2ZcbiAqIHRoZSBuZXN0ZWQgcHJvcGVydGllcyBvZiBldmVyeSBlbWl0dGVkIG9iamVjdC48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9wbHVjay5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBHaXZlbiBhIGxpc3Qgb2Ygc3RyaW5ncyBkZXNjcmliaW5nIGEgcGF0aCB0byBhbiBvYmplY3QgcHJvcGVydHksIHJldHJpZXZlc1xuICogdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFsbCB2YWx1ZXMgaW4gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gSWYgYSBwcm9wZXJ0eSBjYW4ndCBiZSByZXNvbHZlZCwgaXQgd2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgZm9yXG4gKiB0aGF0IHZhbHVlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgdGFnTmFtZSBvZiB0aGUgY2xpY2tlZCB0YXJnZXQgZWxlbWVudDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgdGFnTmFtZXMgPSBjbGlja3MucGx1Y2soJ3RhcmdldCcsICd0YWdOYW1lJyk7XG4gKiB0YWdOYW1lcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWFwfVxuICpcbiAqIEBwYXJhbSB7Li4uc3RyaW5nfSBwcm9wZXJ0aWVzIFRoZSBuZXN0ZWQgcHJvcGVydGllcyB0byBwbHVjayBmcm9tIGVhY2ggc291cmNlXG4gKiB2YWx1ZSAoYW4gb2JqZWN0KS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IFJldHVybnMgYSBuZXcgT2JzZXJ2YWJsZSBvZiBwcm9wZXJ0eSB2YWx1ZXMgZnJvbSB0aGVcbiAqIHNvdXJjZSB2YWx1ZXMuXG4gKiBAbWV0aG9kIHBsdWNrXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBwbHVjaygpIHtcbiAgICB2YXIgcHJvcGVydGllcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHByb3BlcnRpZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBsZW5ndGggPSBwcm9wZXJ0aWVzLmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTGlzdCBvZiBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBlbXB0eS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcF8xLm1hcC5jYWxsKHRoaXMsIHBsdWNrZXIocHJvcGVydGllcywgbGVuZ3RoKSk7XG59XG5leHBvcnRzLnBsdWNrID0gcGx1Y2s7XG5mdW5jdGlvbiBwbHVja2VyKHByb3BzLCBsZW5ndGgpIHtcbiAgICB2YXIgbWFwcGVyID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRQcm9wID0geDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHAgPSBjdXJyZW50UHJvcFtwcm9wc1tpXV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFByb3AgPSBwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudFByb3A7XG4gICAgfTtcbiAgICByZXR1cm4gbWFwcGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx1Y2suanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9wbHVjay5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHB1Ymxpc2hfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3B1Ymxpc2gnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoID0gcHVibGlzaF8xLnB1Ymxpc2g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2guanNcbiAqKiBtb2R1bGUgaWQgPSA0OTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciBtdWx0aWNhc3RfMSA9IHJlcXVpcmUoJy4vbXVsdGljYXN0Jyk7XG4vKipcbiAqIFJldHVybnMgYSBDb25uZWN0YWJsZU9ic2VydmFibGUsIHdoaWNoIGlzIGEgdmFyaWV0eSBvZiBPYnNlcnZhYmxlIHRoYXQgd2FpdHMgdW50aWwgaXRzIGNvbm5lY3QgbWV0aG9kIGlzIGNhbGxlZFxuICogYmVmb3JlIGl0IGJlZ2lucyBlbWl0dGluZyBpdGVtcyB0byB0aG9zZSBPYnNlcnZlcnMgdGhhdCBoYXZlIHN1YnNjcmliZWQgdG8gaXQuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9wdWJsaXNoLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEByZXR1cm4gYSBDb25uZWN0YWJsZU9ic2VydmFibGUgdGhhdCB1cG9uIGNvbm5lY3Rpb24gY2F1c2VzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGl0ZW1zIHRvIGl0cyBPYnNlcnZlcnMuXG4gKiBAbWV0aG9kIHB1Ymxpc2hcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2goKSB7XG4gICAgcmV0dXJuIG11bHRpY2FzdF8xLm11bHRpY2FzdC5jYWxsKHRoaXMsIG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpKTtcbn1cbmV4cG9ydHMucHVibGlzaCA9IHB1Ymxpc2g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHB1Ymxpc2hCZWhhdmlvcl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaEJlaGF2aW9yID0gcHVibGlzaEJlaGF2aW9yXzEucHVibGlzaEJlaGF2aW9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaEJlaGF2aW9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvci5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQmVoYXZpb3JTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9CZWhhdmlvclN1YmplY3QnKTtcbnZhciBtdWx0aWNhc3RfMSA9IHJlcXVpcmUoJy4vbXVsdGljYXN0Jyk7XG4vKipcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybiB7Q29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCBwdWJsaXNoQmVoYXZpb3JcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hCZWhhdmlvcih2YWx1ZSkge1xuICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgQmVoYXZpb3JTdWJqZWN0XzEuQmVoYXZpb3JTdWJqZWN0KHZhbHVlKSk7XG59XG5leHBvcnRzLnB1Ymxpc2hCZWhhdmlvciA9IHB1Ymxpc2hCZWhhdmlvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hCZWhhdmlvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvci5qc1xuICoqIG1vZHVsZSBpZCA9IDUwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuL1N1YmplY3QnKTtcbnZhciB0aHJvd0Vycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvdGhyb3dFcnJvcicpO1xudmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InKTtcbi8qKlxuICogQGNsYXNzIEJlaGF2aW9yU3ViamVjdDxUPlxuICovXG52YXIgQmVoYXZpb3JTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmVoYXZpb3JTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJlaGF2aW9yU3ViamVjdChfdmFsdWUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgIH1cbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcmVkKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yXzEudGhyb3dFcnJvcih0aGlzLmVycm9yVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3JfMS50aHJvd0Vycm9yKG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh0aGlzLl92YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHRoaXMuX3ZhbHVlID0gdmFsdWUpO1xuICAgIH07XG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuaGFzRXJyb3JlZCA9IHRydWU7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgdGhpcy5lcnJvclZhbHVlID0gZXJyKTtcbiAgICB9O1xuICAgIHJldHVybiBCZWhhdmlvclN1YmplY3Q7XG59KFN1YmplY3RfMS5TdWJqZWN0KSk7XG5leHBvcnRzLkJlaGF2aW9yU3ViamVjdCA9IEJlaGF2aW9yU3ViamVjdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJlaGF2aW9yU3ViamVjdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL0JlaGF2aW9yU3ViamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDUwMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHB1Ymxpc2hSZXBsYXlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoUmVwbGF5ID0gcHVibGlzaFJlcGxheV8xLnB1Ymxpc2hSZXBsYXk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoUmVwbGF5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwdWJsaXNoTGFzdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcHVibGlzaExhc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoTGFzdCA9IHB1Ymxpc2hMYXN0XzEucHVibGlzaExhc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoTGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoTGFzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDUwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXN5bmNTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9Bc3luY1N1YmplY3QnKTtcbnZhciBtdWx0aWNhc3RfMSA9IHJlcXVpcmUoJy4vbXVsdGljYXN0Jyk7XG4vKipcbiAqIEByZXR1cm4ge0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgcHVibGlzaExhc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hMYXN0KCkge1xuICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCkpO1xufVxuZXhwb3J0cy5wdWJsaXNoTGFzdCA9IHB1Ymxpc2hMYXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaExhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoTGFzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDUwNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHJhY2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3JhY2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yYWNlID0gcmFjZV8xLnJhY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3JhY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByZWR1Y2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3JlZHVjZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJlZHVjZSA9IHJlZHVjZV8xLnJlZHVjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZWR1Y2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBhcHBsaWVzIGEgc3BlY2lmaWVkIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIHRvIHRoZSBmaXJzdCBpdGVtIGVtaXR0ZWQgYnkgYSBzb3VyY2UgT2JzZXJ2YWJsZSxcbiAqIHRoZW4gZmVlZHMgdGhlIHJlc3VsdCBvZiB0aGF0IGZ1bmN0aW9uIGFsb25nIHdpdGggdGhlIHNlY29uZCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGludG8gdGhlIHNhbWVcbiAqIGZ1bmN0aW9uLCBhbmQgc28gb24gdW50aWwgYWxsIGl0ZW1zIGhhdmUgYmVlbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoZSBmaW5hbCByZXN1bHQgZnJvbVxuICogdGhlIGZpbmFsIGNhbGwgdG8geW91ciBmdW5jdGlvbiBhcyBpdHMgc29sZSBpdGVtLlxuICogVGhpcyB0ZWNobmlxdWUsIHdoaWNoIGlzIGNhbGxlZCBcInJlZHVjZVwiIGhlcmUsIGlzIHNvbWV0aW1lcyBjYWxsZWQgXCJhZ2dyZWdhdGUsXCIgXCJmb2xkLFwiIFwiYWNjdW11bGF0ZSxcIiBcImNvbXByZXNzLFwiIG9yXG4gKiBcImluamVjdFwiIGluIG90aGVyIHByb2dyYW1taW5nIGNvbnRleHRzLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvcmVkdWNlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7aW5pdGlhbFZhbHVlfSB0aGUgaW5pdGlhbCAoc2VlZCkgYWNjdW11bGF0b3IgdmFsdWVcbiAqIEBwYXJhbSB7YWNjdW11bGF0b3J9IGFuIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgb24gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVcbiAqIHJlc3VsdCBvZiB3aGljaCB3aWxsIGJlIHVzZWQgaW4gdGhlIG5leHQgYWNjdW11bGF0b3IgY2FsbC5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhIHNpbmdsZSBpdGVtIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhY2N1bXVsYXRpbmcgdGhlIG91dHB1dCBmcm9tIHRoZVxuICogaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHJlZHVjZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcmVkdWNlKHByb2plY3QsIHNlZWQpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBSZWR1Y2VPcGVyYXRvcihwcm9qZWN0LCBzZWVkKSk7XG59XG5leHBvcnRzLnJlZHVjZSA9IHJlZHVjZTtcbnZhciBSZWR1Y2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVkdWNlT3BlcmF0b3IocHJvamVjdCwgc2VlZCkge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuICAgIH1cbiAgICBSZWR1Y2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSZWR1Y2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy5zZWVkKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVkdWNlT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5SZWR1Y2VPcGVyYXRvciA9IFJlZHVjZU9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSZWR1Y2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVkdWNlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZWR1Y2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCBzZWVkKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjYyA9IHNlZWQ7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuaGFzU2VlZCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcbiAgICB9XG4gICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUgfHwgKHRoaXMuaGFzVmFsdWUgPSB0aGlzLmhhc1NlZWQpKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlSZWR1Y2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY2MgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZWR1Y2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVkdWNlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QodGhpcy5hY2MsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY2MgPSByZXN1bHQ7XG4gICAgfTtcbiAgICBSZWR1Y2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlIHx8IHRoaXMuaGFzU2VlZCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVkdWNlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuUmVkdWNlU3Vic2NyaWJlciA9IFJlZHVjZVN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWR1Y2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9yZWR1Y2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByZXBlYXRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3JlcGVhdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJlcGVhdCA9IHJlcGVhdF8xLnJlcGVhdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcGVhdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZXBlYXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUnKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgcmVwZWF0cyB0aGUgc3RyZWFtIG9mIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IG1vc3QgY291bnQgdGltZXMsXG4gKiBvbiBhIHBhcnRpY3VsYXIgU2NoZWR1bGVyLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvcmVwZWF0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSB0aGUgU2NoZWR1bGVyIHRvIGVtaXQgdGhlIGl0ZW1zIG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb3VudF0gdGhlIG51bWJlciBvZiB0aW1lcyB0aGUgc291cmNlIE9ic2VydmFibGUgaXRlbXMgYXJlIHJlcGVhdGVkLCBhIGNvdW50IG9mIDAgd2lsbCB5aWVsZFxuICogYW4gZW1wdHkgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCByZXBlYXRzIHRoZSBzdHJlYW0gb2YgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXQgbW9zdFxuICogY291bnQgdGltZXMuXG4gKiBAbWV0aG9kIHJlcGVhdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcmVwZWF0KGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAtMTsgfVxuICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb3VudCA8IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVwZWF0T3BlcmF0b3IoLTEsIHRoaXMpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlcGVhdE9wZXJhdG9yKGNvdW50IC0gMSwgdGhpcykpO1xuICAgIH1cbn1cbmV4cG9ydHMucmVwZWF0ID0gcmVwZWF0O1xudmFyIFJlcGVhdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXBlYXRPcGVyYXRvcihjb3VudCwgc291cmNlKSB7XG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIFJlcGVhdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJlcGVhdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb3VudCwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuICAgIHJldHVybiBSZXBlYXRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJlcGVhdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXBlYXRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlcGVhdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBSZXBlYXRTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcywgc291cmNlID0gX2Euc291cmNlLCBjb3VudCA9IF9hLmNvdW50O1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHNvdXJjZS5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBSZXBlYXRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwZWF0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcmVwZWF0LmpzXG4gKiogbW9kdWxlIGlkID0gNTA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmV0cnlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3JldHJ5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmV0cnkgPSByZXRyeV8xLnJldHJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcmV0cnkuanNcbiAqKiBtb2R1bGUgaWQgPSA1MTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmVzdWJzY3JpYmluZyB0byBpdCBpZiBpdCBjYWxscyBgZXJyb3JgIGFuZCB0aGVcbiAqIHByZWRpY2F0ZSByZXR1cm5zIHRydWUgZm9yIHRoYXQgc3BlY2lmaWMgZXhjZXB0aW9uIGFuZCByZXRyeSBjb3VudC5cbiAqIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBjYWxscyBgZXJyb3JgLCB0aGlzIG1ldGhvZCB3aWxsIHJlc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBmb3IgYSBtYXhpbXVtIG9mXG4gKiBjb3VudCByZXN1YnNjcmlwdGlvbnMgKGdpdmVuIGFzIGEgbnVtYmVyIHBhcmFtZXRlcikgcmF0aGVyIHRoYW4gcHJvcGFnYXRpbmcgdGhlIGBlcnJvcmAgY2FsbC5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3JldHJ5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEFueSBhbmQgYWxsIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpbGwgYmUgZW1pdHRlZCBieSB0aGUgcmVzdWx0aW5nIE9ic2VydmFibGUsIGV2ZW4gdGhvc2UgZW1pdHRlZFxuICogZHVyaW5nIGZhaWxlZCBzdWJzY3JpcHRpb25zLiBGb3IgZXhhbXBsZSwgaWYgYW4gT2JzZXJ2YWJsZSBmYWlscyBhdCBmaXJzdCBidXQgZW1pdHMgWzEsIDJdIHRoZW4gc3VjY2VlZHMgdGhlIHNlY29uZFxuICogdGltZSBhbmQgZW1pdHM6IFsxLCAyLCAzLCA0LCA1XSB0aGVuIHRoZSBjb21wbGV0ZSBzdHJlYW0gb2YgZW1pc3Npb25zIGFuZCBub3RpZmljYXRpb25zXG4gKiB3b3VsZCBiZTogWzEsIDIsIDEsIDIsIDMsIDQsIDUsIGBjb21wbGV0ZWBdLlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciBvZiByZXRyeSBhdHRlbXB0cyBiZWZvcmUgZmFpbGluZy5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtb2RpZmllZCB3aXRoIHRoZSByZXRyeSBsb2dpYy5cbiAqIEBtZXRob2QgcmV0cnlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHJldHJ5KGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAtMTsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJldHJ5T3BlcmF0b3IoY291bnQsIHRoaXMpKTtcbn1cbmV4cG9ydHMucmV0cnkgPSByZXRyeTtcbnZhciBSZXRyeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXRyeU9wZXJhdG9yKGNvdW50LCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgUmV0cnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSZXRyeVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb3VudCwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuICAgIHJldHVybiBSZXRyeU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmV0cnlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmV0cnlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJldHJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY291bnQsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIFJldHJ5U3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsIHNvdXJjZSA9IF9hLnNvdXJjZSwgY291bnQgPSBfYS5jb3VudDtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHNvdXJjZS5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBSZXRyeVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3JldHJ5LmpzXG4gKiogbW9kdWxlIGlkID0gNTExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmV0cnlXaGVuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9yZXRyeVdoZW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXRyeVdoZW4gPSByZXRyeVdoZW5fMS5yZXRyeVdoZW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeVdoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcmV0cnlXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNTEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHdpdGggdGhlIGV4Y2VwdGlvbiBvZiBhbiBgZXJyb3JgLlxuICogQW4gYGVycm9yYCB3aWxsIGNhdXNlIHRoZSBlbWlzc2lvbiBvZiB0aGUgVGhyb3dhYmxlIHRoYXQgY2F1c2UgdGhlIGVycm9yIHRvIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGZyb21cbiAqIG5vdGlmaWNhdGlvbkhhbmRsZXIuIElmIHRoYXQgT2JzZXJ2YWJsZSBjYWxscyBvbkNvbXBsZXRlIG9yIGBlcnJvcmAgdGhlbiByZXRyeSB3aWxsIGNhbGwgYGNvbXBsZXRlYCBvciBgZXJyb3JgXG4gKiBvbiB0aGUgY2hpbGQgc3Vic2NyaXB0aW9uLiBPdGhlcndpc2UsIHRoaXMgT2JzZXJ2YWJsZSB3aWxsIHJlc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSwgb24gYSBwYXJ0aWN1bGFyXG4gKiBTY2hlZHVsZXIuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9yZXRyeVdoZW4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtub3RpZmljYXRpb25IYW5kbGVyfSByZWNlaXZlcyBhbiBPYnNlcnZhYmxlIG9mIG5vdGlmaWNhdGlvbnMgd2l0aCB3aGljaCBhIHVzZXIgY2FuIGBjb21wbGV0ZWAgb3IgYGVycm9yYCxcbiAqIGFib3J0aW5nIHRoZSByZXRyeS5cbiAqIEBwYXJhbSB7c2NoZWR1bGVyfSB0aGUgU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHN1YnNjcmliZSB0byB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSB0aGUgc291cmNlIE9ic2VydmFibGUgbW9kaWZpZWQgd2l0aCByZXRyeSBsb2dpYy5cbiAqIEBtZXRob2QgcmV0cnlXaGVuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiByZXRyeVdoZW4obm90aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBSZXRyeVdoZW5PcGVyYXRvcihub3RpZmllciwgdGhpcykpO1xufVxuZXhwb3J0cy5yZXRyeVdoZW4gPSByZXRyeVdoZW47XG52YXIgUmV0cnlXaGVuT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJldHJ5V2hlbk9wZXJhdG9yKG5vdGlmaWVyLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgUmV0cnlXaGVuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmV0cnlXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJldHJ5V2hlbk9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmV0cnlXaGVuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJldHJ5V2hlblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmV0cnlXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgbm90aWZpZXIsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JzID0gdGhpcy5lcnJvcnM7XG4gICAgICAgICAgICB2YXIgcmV0cmllcyA9IHRoaXMucmV0cmllcztcbiAgICAgICAgICAgIHZhciByZXRyaWVzU3Vic2NyaXB0aW9uID0gdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgaWYgKCFyZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG4gICAgICAgICAgICAgICAgcmV0cmllcyA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5ub3RpZmllcikoZXJyb3JzKTtcbiAgICAgICAgICAgICAgICBpZiAocmV0cmllcyA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJldHJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgICAgIHRoaXMucmV0cmllcyA9IHJldHJpZXM7XG4gICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSByZXRyaWVzU3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgZXJyb3JzLm5leHQoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBlcnJvcnMgPSBfYS5lcnJvcnMsIHJldHJpZXNTdWJzY3JpcHRpb24gPSBfYS5yZXRyaWVzU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICBlcnJvcnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmV0cmllc1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0cmllc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJldHJpZXMgPSBudWxsO1xuICAgIH07XG4gICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBlcnJvcnMgPSBfYS5lcnJvcnMsIHJldHJpZXMgPSBfYS5yZXRyaWVzLCByZXRyaWVzU3Vic2NyaXB0aW9uID0gX2EucmV0cmllc1N1YnNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsO1xuICAgICAgICB0aGlzLnJldHJpZXMgPSBudWxsO1xuICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIHRoaXMucmV0cmllcyA9IHJldHJpZXM7XG4gICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IHJldHJpZXNTdWJzY3JpcHRpb247XG4gICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBSZXRyeVdoZW5TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5V2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3JldHJ5V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDUxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNhbXBsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2FtcGxlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2FtcGxlID0gc2FtcGxlXzEuc2FtcGxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NhbXBsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEVtaXRzIHRoZSBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgd2hlbmV2ZXJcbiAqIGFub3RoZXIgT2JzZXJ2YWJsZSwgdGhlIGBub3RpZmllcmAsIGVtaXRzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHNhbXBsZVRpbWV9LCBidXQgc2FtcGxlcyB3aGVuZXZlclxuICogdGhlIGBub3RpZmllcmAgT2JzZXJ2YWJsZSBlbWl0cyBzb21ldGhpbmcuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc2FtcGxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFdoZW5ldmVyIHRoZSBgbm90aWZpZXJgIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSBvciBjb21wbGV0ZXMsIGBzYW1wbGVgXG4gKiBsb29rcyBhdCB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIGVtaXRzIHdoaWNoZXZlciB2YWx1ZSBpdCBoYXMgbW9zdCByZWNlbnRseVxuICogZW1pdHRlZCBzaW5jZSB0aGUgcHJldmlvdXMgc2FtcGxpbmcsIHVubGVzcyB0aGUgc291cmNlIGhhcyBub3QgZW1pdHRlZFxuICogYW55dGhpbmcgc2luY2UgdGhlIHByZXZpb3VzIHNhbXBsaW5nLiBUaGUgYG5vdGlmaWVyYCBpcyBzdWJzY3JpYmVkIHRvIGFzIHNvb25cbiAqIGFzIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBzdWJzY3JpYmVkLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBzYW1wbGUgdGhlIG1vc3QgcmVjZW50IFwic2Vjb25kc1wiIHRpbWVyPC9jYXB0aW9uPlxuICogdmFyIHNlY29uZHMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBzZWNvbmRzLnNhbXBsZShjbGlja3MpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBhdWRpdH1cbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlfVxuICogQHNlZSB7QGxpbmsgc2FtcGxlVGltZX1cbiAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSBub3RpZmllciBUaGUgT2JzZXJ2YWJsZSB0byB1c2UgZm9yIHNhbXBsaW5nIHRoZVxuICogc291cmNlIE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdHMgb2Ygc2FtcGxpbmcgdGhlXG4gKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2hlbmV2ZXIgdGhlIG5vdGlmaWVyIE9ic2VydmFibGVcbiAqIGVtaXRzIHZhbHVlIG9yIGNvbXBsZXRlcy5cbiAqIEBtZXRob2Qgc2FtcGxlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzYW1wbGUobm90aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVPcGVyYXRvcihub3RpZmllcikpO1xufVxuZXhwb3J0cy5zYW1wbGUgPSBzYW1wbGU7XG52YXIgU2FtcGxlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNhbXBsZU9wZXJhdG9yKG5vdGlmaWVyKSB7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICB9XG4gICAgU2FtcGxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2FtcGxlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FtcGxlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTYW1wbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FtcGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuICAgIH1cbiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgIH07XG4gICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuICAgIH07XG4gICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgfTtcbiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTYW1wbGVTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NhbXBsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNhbXBsZVRpbWVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NhbXBsZVRpbWUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zYW1wbGVUaW1lID0gc2FtcGxlVGltZV8xLnNhbXBsZVRpbWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGVUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NhbXBsZVRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogRW1pdHMgdGhlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aXRoaW5cbiAqIHBlcmlvZGljIHRpbWUgaW50ZXJ2YWxzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5TYW1wbGVzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBwZXJpb2RpYyB0aW1lXG4gKiBpbnRlcnZhbHMsIGVtaXR0aW5nIHdoYXQgaXQgc2FtcGxlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zYW1wbGVUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBzYW1wbGVUaW1lYCBwZXJpb2RpY2FsbHkgbG9va3MgYXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBlbWl0cyB3aGljaGV2ZXJcbiAqIHZhbHVlIGl0IGhhcyBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgc2luY2UgdGhlIHByZXZpb3VzIHNhbXBsaW5nLCB1bmxlc3MgdGhlXG4gKiBzb3VyY2UgaGFzIG5vdCBlbWl0dGVkIGFueXRoaW5nIHNpbmNlIHRoZSBwcmV2aW91cyBzYW1wbGluZy4gVGhlIHNhbXBsaW5nXG4gKiBoYXBwZW5zIHBlcmlvZGljYWxseSBpbiB0aW1lIGV2ZXJ5IGBwZXJpb2RgIG1pbGxpc2Vjb25kcyAob3IgdGhlIHRpbWUgdW5pdFxuICogZGVmaW5lZCBieSB0aGUgb3B0aW9uYWwgYHNjaGVkdWxlcmAgYXJndW1lbnQpLiBUaGUgc2FtcGxpbmcgc3RhcnRzIGFzIHNvb24gYXNcbiAqIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBzdWJzY3JpYmVkLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IHNlY29uZCwgZW1pdCB0aGUgbW9zdCByZWNlbnQgY2xpY2sgYXQgbW9zdCBvbmNlPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Muc2FtcGxlVGltZSgxMDAwKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYXVkaXRUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2VUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVsYXl9XG4gKiBAc2VlIHtAbGluayBzYW1wbGV9XG4gKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHBlcmlvZCBUaGUgc2FtcGxpbmcgcGVyaW9kIGV4cHJlc3NlZCBpbiBtaWxsaXNlY29uZHMgb3IgdGhlXG4gKiB0aW1lIHVuaXQgZGV0ZXJtaW5lZCBpbnRlcm5hbGx5IGJ5IHRoZSBvcHRpb25hbCBgc2NoZWR1bGVyYC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvclxuICogbWFuYWdpbmcgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aGUgc2FtcGxpbmcuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdHMgb2Ygc2FtcGxpbmcgdGhlXG4gKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXQgdGhlIHNwZWNpZmllZCB0aW1lIGludGVydmFsLlxuICogQG1ldGhvZCBzYW1wbGVUaW1lXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzYW1wbGVUaW1lKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVUaW1lT3BlcmF0b3IocGVyaW9kLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMuc2FtcGxlVGltZSA9IHNhbXBsZVRpbWU7XG52YXIgU2FtcGxlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTYW1wbGVUaW1lT3BlcmF0b3IocGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5wZXJpb2QgPSBwZXJpb2Q7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBTYW1wbGVUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2FtcGxlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wZXJpb2QsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FtcGxlVGltZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2FtcGxlVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTYW1wbGVUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTm90aWZpY2F0aW9uLCBwZXJpb2QsIHsgc3Vic2NyaWJlcjogdGhpcywgcGVyaW9kOiBwZXJpb2QgfSkpO1xuICAgIH1cbiAgICBTYW1wbGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgfTtcbiAgICBTYW1wbGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmxhc3RWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTYW1wbGVUaW1lU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGRpc3BhdGNoTm90aWZpY2F0aW9uKHN0YXRlKSB7XG4gICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwZXJpb2QgPSBzdGF0ZS5wZXJpb2Q7XG4gICAgc3Vic2NyaWJlci5ub3RpZnlOZXh0KCk7XG4gICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgcGVyaW9kKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZVRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zYW1wbGVUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNTE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc2Nhbl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2NhbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNjYW4gPSBzY2FuXzEuc2Nhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjYW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2Nhbi5qc1xuICoqIG1vZHVsZSBpZCA9IDUxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEFwcGxpZXMgYW4gYWNjdW11bGF0aW9uIGZ1bmN0aW9uIG92ZXIgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgcmV0dXJucyBlYWNoXG4gKiBpbnRlcm1lZGlhdGUgcmVzdWx0LCB3aXRoIGFuIG9wdGlvbmFsIHNlZWQgdmFsdWUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgcmVkdWNlfSwgYnV0IGVtaXRzIHRoZSBjdXJyZW50XG4gKiBhY2N1bXVsYXRpb24gd2hlbmV2ZXIgdGhlIHNvdXJjZSBlbWl0cyBhIHZhbHVlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NjYW4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQ29tYmluZXMgdG9nZXRoZXIgYWxsIHZhbHVlcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UsIHVzaW5nIGFuIGFjY3VtdWxhdG9yXG4gKiBmdW5jdGlvbiB0aGF0IGtub3dzIGhvdyB0byBqb2luIGEgbmV3IHNvdXJjZSB2YWx1ZSBpbnRvIHRoZSBhY2N1bXVsYXRpb24gZnJvbVxuICogdGhlIHBhc3QuIElzIHNpbWlsYXIgdG8ge0BsaW5rIHJlZHVjZX0sIGJ1dCBlbWl0cyB0aGUgaW50ZXJtZWRpYXRlXG4gKiBhY2N1bXVsYXRpb25zLlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGFwcGxpZXMgYSBzcGVjaWZpZWQgYGFjY3VtdWxhdG9yYCBmdW5jdGlvbiB0byBlYWNoXG4gKiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiBhIGBzZWVkYCB2YWx1ZSBpcyBzcGVjaWZpZWQsIHRoZW5cbiAqIHRoYXQgdmFsdWUgd2lsbCBiZSB1c2VkIGFzIHRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGUgYWNjdW11bGF0b3IuIElmIG5vIHNlZWRcbiAqIHZhbHVlIGlzIHNwZWNpZmllZCwgdGhlIGZpcnN0IGl0ZW0gb2YgdGhlIHNvdXJjZSBpcyB1c2VkIGFzIHRoZSBzZWVkLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50IHRoZSBudW1iZXIgb2YgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBvbmVzID0gY2xpY2tzLm1hcFRvKDEpO1xuICogdmFyIHNlZWQgPSAwO1xuICogdmFyIGNvdW50ID0gb25lcy5zY2FuKChhY2MsIG9uZSkgPT4gYWNjICsgb25lLCBzZWVkKTtcbiAqIGNvdW50LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBleHBhbmR9XG4gKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG4gKiBAc2VlIHtAbGluayByZWR1Y2V9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihhY2M6IFIsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogUn0gYWNjdW11bGF0b3JcbiAqIFRoZSBhY2N1bXVsYXRvciBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBzb3VyY2UgdmFsdWUuXG4gKiBAcGFyYW0ge1R8Un0gW3NlZWRdIFRoZSBpbml0aWFsIGFjY3VtdWxhdGlvbiB2YWx1ZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59IEFuIG9ic2VydmFibGUgb2YgdGhlIGFjY3VtdWxhdGVkIHZhbHVlcy5cbiAqIEBtZXRob2Qgc2NhblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2NhbihhY2N1bXVsYXRvciwgc2VlZCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNjYW5PcGVyYXRvcihhY2N1bXVsYXRvciwgc2VlZCkpO1xufVxuZXhwb3J0cy5zY2FuID0gc2NhbjtcbnZhciBTY2FuT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNjYW5PcGVyYXRvcihhY2N1bXVsYXRvciwgc2VlZCkge1xuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG4gICAgfVxuICAgIFNjYW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTY2FuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmFjY3VtdWxhdG9yLCB0aGlzLnNlZWQpKTtcbiAgICB9O1xuICAgIHJldHVybiBTY2FuT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTY2FuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNjYW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNjYW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhY2N1bXVsYXRvciwgc2VlZCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3JTZXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJzZWVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0b3JTZXQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fc2VlZCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTY2FuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFjY3VtdWxhdG9yU2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNlZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJ5TmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5TmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmFjY3VtdWxhdG9yKHRoaXMuc2VlZCwgdmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWVkID0gcmVzdWx0O1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBTY2FuU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjYW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zY2FuLmpzXG4gKiogbW9kdWxlIGlkID0gNTE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc2hhcmVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NoYXJlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2hhcmUgPSBzaGFyZV8xLnNoYXJlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcmUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2hhcmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG11bHRpY2FzdF8xID0gcmVxdWlyZSgnLi9tdWx0aWNhc3QnKTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9TdWJqZWN0Jyk7XG5mdW5jdGlvbiBzaGFyZVN1YmplY3RGYWN0b3J5KCkge1xuICAgIHJldHVybiBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIG5ldyBPYnNlcnZhYmxlIHRoYXQgbXVsdGljYXN0cyAoc2hhcmVzKSB0aGUgb3JpZ2luYWwgT2JzZXJ2YWJsZS4gQXMgbG9uZyBhcyB0aGVyZSBpcyBhdCBsZWFzdCBvbmVcbiAqIFN1YnNjcmliZXIgdGhpcyBPYnNlcnZhYmxlIHdpbGwgYmUgc3Vic2NyaWJlZCBhbmQgZW1pdHRpbmcgZGF0YS4gV2hlbiBhbGwgc3Vic2NyaWJlcnMgaGF2ZSB1bnN1YnNjcmliZWQgaXQgd2lsbFxuICogdW5zdWJzY3JpYmUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuIEJlY2F1c2UgdGhlIE9ic2VydmFibGUgaXMgbXVsdGljYXN0aW5nIGl0IG1ha2VzIHRoZSBzdHJlYW0gYGhvdGAuXG4gKiBUaGlzIGlzIGFuIGFsaWFzIGZvciAucHVibGlzaCgpLnJlZkNvdW50KCkuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zaGFyZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgdXBvbiBjb25uZWN0aW9uIGNhdXNlcyB0aGUgc291cmNlIE9ic2VydmFibGUgdG8gZW1pdCBpdGVtcyB0byBpdHMgT2JzZXJ2ZXJzXG4gKiBAbWV0aG9kIHNoYXJlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzaGFyZSgpIHtcbiAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgc2hhcmVTdWJqZWN0RmFjdG9yeSkucmVmQ291bnQoKTtcbn1cbmV4cG9ydHMuc2hhcmUgPSBzaGFyZTtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2hhcmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzaW5nbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NpbmdsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNpbmdsZSA9IHNpbmdsZV8xLnNpbmdsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpbmdsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zaW5nbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIEVtcHR5RXJyb3JfMSA9IHJlcXVpcmUoJy4uL3V0aWwvRW1wdHlFcnJvcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2luZ2xlIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBtYXRjaGVzIGEgc3BlY2lmaWVkXG4gKiBwcmVkaWNhdGUsIGlmIHRoYXQgT2JzZXJ2YWJsZSBlbWl0cyBvbmUgc3VjaCBpdGVtLiBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgbW9yZSB0aGFuIG9uZSBzdWNoIGl0ZW0gb3Igbm9cbiAqIHN1Y2ggaXRlbXMsIG5vdGlmeSBvZiBhbiBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gb3IgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbiByZXNwZWN0aXZlbHkuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zaW5nbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHRocm93cyB7RW1wdHlFcnJvcn0gRGVsaXZlcnMgYW4gRW1wdHlFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgXG4gKiBjYWxsYmFjayBpZiB0aGUgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgYmVmb3JlIGFueSBgbmV4dGAgbm90aWZpY2F0aW9uIHdhcyBzZW50LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gYSBwcmVkaWNhdGUgZnVuY3Rpb24gdG8gZXZhbHVhdGUgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHNpbmdsZSBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgbWF0Y2hlc1xuICogdGhlIHByZWRpY2F0ZS5cbiAuXG4gKiBAbWV0aG9kIHNpbmdsZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2luZ2xlKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNpbmdsZU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpcykpO1xufVxuZXhwb3J0cy5zaW5nbGUgPSBzaW5nbGU7XG52YXIgU2luZ2xlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNpbmdsZU9wZXJhdG9yKHByZWRpY2F0ZSwgc291cmNlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgU2luZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2luZ2xlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuICAgIHJldHVybiBTaW5nbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNpbmdsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTaW5nbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNpbmdsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLnNlZW5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgU2luZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuYXBwbHlTaW5nbGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5zZWVuVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgZWxlbWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWVuVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaW5nbGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcHJlZGljYXRlID0gdGhpcy5wcmVkaWNhdGU7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgaWYgKHByZWRpY2F0ZSkge1xuICAgICAgICAgICAgdGhpcy50cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTaW5nbGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLnRyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCwgdGhpcy5zb3VyY2UpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaW5nbGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmICh0aGlzLmluZGV4ID4gMCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh0aGlzLnNlZW5WYWx1ZSA/IHRoaXMuc2luZ2xlVmFsdWUgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBFbXB0eUVycm9yXzEuRW1wdHlFcnJvcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTaW5nbGVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2luZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2luZ2xlLmpzXG4gKiogbW9kdWxlIGlkID0gNTIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc2tpcF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2tpcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXAgPSBza2lwXzEuc2tpcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcC5qc1xuICoqIG1vZHVsZSBpZCA9IDUyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGBuYCBpdGVtcyBlbWl0dGVkIGJ5IGFuIE9ic2VydmFibGUuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9za2lwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aGUgYG5gIG9mIHRpbWVzLCBpdGVtcyBlbWl0dGVkIGJ5IHNvdXJjZSBPYnNlcnZhYmxlIHNob3VsZCBiZSBza2lwcGVkLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAbWV0aG9kIHNraXBcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNraXAodG90YWwpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTa2lwT3BlcmF0b3IodG90YWwpKTtcbn1cbmV4cG9ydHMuc2tpcCA9IHNraXA7XG52YXIgU2tpcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTa2lwT3BlcmF0b3IodG90YWwpIHtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgIH1cbiAgICBTa2lwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2tpcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFNraXBPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNraXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2tpcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2tpcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgU2tpcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKCsrdGhpcy5jb3VudCA+IHRoaXMudG90YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh4KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNraXBTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NraXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBza2lwVW50aWxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NraXBVbnRpbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBVbnRpbCA9IHNraXBVbnRpbF8xLnNraXBVbnRpbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBVbnRpbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwVW50aWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB1bnRpbCBhIHNlY29uZCBPYnNlcnZhYmxlIGVtaXRzIGFuIGl0ZW0uXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9za2lwVW50aWwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSB0aGUgc2Vjb25kIE9ic2VydmFibGUgdGhhdCBoYXMgdG8gZW1pdCBhbiBpdGVtIGJlZm9yZSB0aGUgc291cmNlIE9ic2VydmFibGUncyBlbGVtZW50cyBiZWdpbiB0b1xuICogYmUgbWlycm9yZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHVudGlsIHRoZSBzZWNvbmQgT2JzZXJ2YWJsZSBlbWl0c1xuICogYW4gaXRlbSwgdGhlbiBlbWl0cyB0aGUgcmVtYWluaW5nIGl0ZW1zLlxuICogQG1ldGhvZCBza2lwVW50aWxcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNraXBVbnRpbChub3RpZmllcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNraXBVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSk7XG59XG5leHBvcnRzLnNraXBVbnRpbCA9IHNraXBVbnRpbDtcbnZhciBTa2lwVW50aWxPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpIHtcbiAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuICAgIH1cbiAgICBTa2lwVW50aWxPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBTa2lwVW50aWxPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNraXBVbnRpbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTa2lwVW50aWxTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNraXBVbnRpbFN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzSW5uZXJTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgbm90aWZpZXIpKTtcbiAgICB9XG4gICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNJbm5lclN0b3BwZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgfTtcbiAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0lubmVyU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNraXBVbnRpbFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcFVudGlsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2tpcFVudGlsLmpzXG4gKiogbW9kdWxlIGlkID0gNTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc2tpcFdoaWxlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9za2lwV2hpbGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwV2hpbGUgPSBza2lwV2hpbGVfMS5za2lwV2hpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2lwV2hpbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFdoaWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgYWxsIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGhvbGRzXG4gKiB0cnVlLCBidXQgZW1pdHMgYWxsIGZ1cnRoZXIgc291cmNlIGl0ZW1zIGFzIHNvb24gYXMgdGhlIGNvbmRpdGlvbiBiZWNvbWVzIGZhbHNlLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc2tpcFdoaWxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSAtIGEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGl0ZW0gZW1pdHRlZCBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IGFuIE9ic2VydmFibGUgdGhhdCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2hlbiB0aGVcbiAqIHNwZWNpZmllZCBwcmVkaWNhdGUgYmVjb21lcyBmYWxzZS5cbiAqIEBtZXRob2Qgc2tpcFdoaWxlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBza2lwV2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSk7XG59XG5leHBvcnRzLnNraXBXaGlsZSA9IHNraXBXaGlsZTtcbnZhciBTa2lwV2hpbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2tpcFdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgIH1cbiAgICBTa2lwV2hpbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFdoaWxlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTa2lwV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2tpcFdoaWxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5za2lwcGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBTa2lwV2hpbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAodGhpcy5za2lwcGluZykge1xuICAgICAgICAgICAgdGhpcy50cnlDYWxsUHJlZGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2tpcHBpbmcpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTa2lwV2hpbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlDYWxsUHJlZGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIHRoaXMuaW5kZXgrKyk7XG4gICAgICAgICAgICB0aGlzLnNraXBwaW5nID0gQm9vbGVhbihyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNraXBXaGlsZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2lwV2hpbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9za2lwV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzdGFydFdpdGhfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3N0YXJ0V2l0aCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN0YXJ0V2l0aCA9IHN0YXJ0V2l0aF8xLnN0YXJ0V2l0aDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXJ0V2l0aC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zdGFydFdpdGguanNcbiAqKiBtb2R1bGUgaWQgPSA1MzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL1NjYWxhck9ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlJyk7XG52YXIgY29uY2F0XzEgPSByZXF1aXJlKCcuL2NvbmNhdCcpO1xudmFyIGlzU2NoZWR1bGVyXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzU2NoZWR1bGVyJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiBhIHNwZWNpZmllZCBJdGVyYWJsZSBiZWZvcmUgaXQgYmVnaW5zIHRvIGVtaXQgaXRlbXMgZW1pdHRlZCBieSB0aGVcbiAqIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3RhcnRXaXRoLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7VmFsdWVzfSBhbiBJdGVyYWJsZSB0aGF0IGNvbnRhaW5zIHRoZSBpdGVtcyB5b3Ugd2FudCB0aGUgbW9kaWZpZWQgT2JzZXJ2YWJsZSB0byBlbWl0IGZpcnN0LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiB0aGUgc3BlY2lmaWVkIEl0ZXJhYmxlIGFuZCB0aGVuIGVtaXRzIHRoZSBpdGVtc1xuICogZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHN0YXJ0V2l0aFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc3RhcnRXaXRoKCkge1xuICAgIHZhciBhcnJheSA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFycmF5W19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgc2NoZWR1bGVyID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSkge1xuICAgICAgICBhcnJheS5wb3AoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNjaGVkdWxlciA9IG51bGw7XG4gICAgfVxuICAgIHZhciBsZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgaWYgKGxlbiA9PT0gMSkge1xuICAgICAgICByZXR1cm4gY29uY2F0XzEuY29uY2F0U3RhdGljKG5ldyBTY2FsYXJPYnNlcnZhYmxlXzEuU2NhbGFyT2JzZXJ2YWJsZShhcnJheVswXSwgc2NoZWR1bGVyKSwgdGhpcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgcmV0dXJuIGNvbmNhdF8xLmNvbmNhdFN0YXRpYyhuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpLCB0aGlzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBjb25jYXRfMS5jb25jYXRTdGF0aWMobmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpLCB0aGlzKTtcbiAgICB9XG59XG5leHBvcnRzLnN0YXJ0V2l0aCA9IHN0YXJ0V2l0aDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXJ0V2l0aC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3N0YXJ0V2l0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN1YnNjcmliZU9uXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zdWJzY3JpYmVPbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZU9uID0gc3Vic2NyaWJlT25fMS5zdWJzY3JpYmVPbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZU9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3N1YnNjcmliZU9uLmpzXG4gKiogbW9kdWxlIGlkID0gNTMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBTdWJzY3JpYmVPbk9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvU3Vic2NyaWJlT25PYnNlcnZhYmxlJyk7XG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IHN1YnNjcmliZXMgT2JzZXJ2ZXJzIHRvIHRoaXMgT2JzZXJ2YWJsZSBvbiB0aGUgc3BlY2lmaWVkIFNjaGVkdWxlci5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3N1YnNjcmliZU9uLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSB0aGUgU2NoZWR1bGVyIHRvIHBlcmZvcm0gc3Vic2NyaXB0aW9uIGFjdGlvbnMgb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSB0aGUgc291cmNlIE9ic2VydmFibGUgbW9kaWZpZWQgc28gdGhhdCBpdHMgc3Vic2NyaXB0aW9ucyBoYXBwZW4gb24gdGhlIHNwZWNpZmllZCBTY2hlZHVsZXJcbiAuXG4gKiBAbWV0aG9kIHN1YnNjcmliZU9uXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzdWJzY3JpYmVPbihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGVfMS5TdWJzY3JpYmVPbk9ic2VydmFibGUodGhpcywgZGVsYXksIHNjaGVkdWxlcik7XG59XG5leHBvcnRzLnN1YnNjcmliZU9uID0gc3Vic2NyaWJlT247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVPbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3N1YnNjcmliZU9uLmpzXG4gKiogbW9kdWxlIGlkID0gNTMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBhc2FwXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXNhcCcpO1xudmFyIGlzTnVtZXJpY18xID0gcmVxdWlyZSgnLi4vdXRpbC9pc051bWVyaWMnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3Vic2NyaWJlT25PYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIGRlbGF5VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChkZWxheVRpbWUgPT09IHZvaWQgMCkgeyBkZWxheVRpbWUgPSAwOyB9XG4gICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc2FwXzEuYXNhcDsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuZGVsYXlUaW1lID0gZGVsYXlUaW1lO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgaWYgKCFpc051bWVyaWNfMS5pc051bWVyaWMoZGVsYXlUaW1lKSB8fCBkZWxheVRpbWUgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGF5VGltZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBhc2FwXzEuYXNhcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNvdXJjZSwgZGVsYXksIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzYXBfMS5hc2FwOyB9XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlT25PYnNlcnZhYmxlKHNvdXJjZSwgZGVsYXksIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmcuc291cmNlLCBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlT25PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5kZWxheVRpbWU7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCwgZGVsYXksIHtcbiAgICAgICAgICAgIHNvdXJjZTogc291cmNlLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmliZU9uT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaWJlT25PYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFzYXBTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4vQXNhcFNjaGVkdWxlcicpO1xuZXhwb3J0cy5hc2FwID0gbmV3IEFzYXBTY2hlZHVsZXJfMS5Bc2FwU2NoZWR1bGVyKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc2FwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL2FzYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1MzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgQXNhcEFjdGlvbl8xID0gcmVxdWlyZSgnLi9Bc2FwQWN0aW9uJyk7XG52YXIgUXVldWVTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4vUXVldWVTY2hlZHVsZXInKTtcbnZhciBBc2FwU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXNhcFNjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc2FwU2NoZWR1bGVyKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgQXNhcFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBc2FwQWN0aW9uXzEuQXNhcEFjdGlvbih0aGlzLCB3b3JrKS5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gQXNhcFNjaGVkdWxlcjtcbn0oUXVldWVTY2hlZHVsZXJfMS5RdWV1ZVNjaGVkdWxlcikpO1xuZXhwb3J0cy5Bc2FwU2NoZWR1bGVyID0gQXNhcFNjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzYXBTY2hlZHVsZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvQXNhcFNjaGVkdWxlci5qc1xuICoqIG1vZHVsZSBpZCA9IDUzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBJbW1lZGlhdGVfMSA9IHJlcXVpcmUoJy4uL3V0aWwvSW1tZWRpYXRlJyk7XG52YXIgRnV0dXJlQWN0aW9uXzEgPSByZXF1aXJlKCcuL0Z1dHVyZUFjdGlvbicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBBc2FwQWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXNhcEFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc2FwQWN0aW9uKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgQXNhcEFjdGlvbi5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3NjaGVkdWxlLmNhbGwodGhpcywgc3RhdGUsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuICAgICAgICBpZiAoIXNjaGVkdWxlci5zY2hlZHVsZWRJZCkge1xuICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZElkID0gSW1tZWRpYXRlXzEuSW1tZWRpYXRlLnNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZElkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZXIuZmx1c2goKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQXNhcEFjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBzY2hlZHVsZWRJZCA9IHNjaGVkdWxlci5zY2hlZHVsZWRJZCwgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl91bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoYWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHNjaGVkdWxlci5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzY2hlZHVsZWRJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZElkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBJbW1lZGlhdGVfMS5JbW1lZGlhdGUuY2xlYXJJbW1lZGlhdGUoc2NoZWR1bGVkSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXNhcEFjdGlvbjtcbn0oRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKSk7XG5leHBvcnRzLkFzYXBBY3Rpb24gPSBBc2FwQWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcEFjdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9Bc2FwQWN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNTM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcblNvbWUgY3JlZGl0IGZvciB0aGlzIGhlbHBlciBnb2VzIHRvIGh0dHA6Ly9naXRodWIuY29tL1l1enVKUy9zZXRJbW1lZGlhdGVcbiovXG5cInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3Jvb3QnKTtcbnZhciBJbW1lZGlhdGVEZWZpbml0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbW1lZGlhdGVEZWZpbml0aW9uKHJvb3QpIHtcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICAgICAgaWYgKHJvb3Quc2V0SW1tZWRpYXRlICYmIHR5cGVvZiByb290LnNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSByb290LnNldEltbWVkaWF0ZS5iaW5kKHJvb3QpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZSA9IHJvb3QuY2xlYXJJbW1lZGlhdGUuYmluZChyb290KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV4dEhhbmRsZSA9IDE7XG4gICAgICAgICAgICB0aGlzLnRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgICAgICAgICBpZiAodGhpcy5jYW5Vc2VQcm9jZXNzTmV4dFRpY2soKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHRoaXMuY3JlYXRlUHJvY2Vzc05leHRUaWNrU2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVBvc3RNZXNzYWdlU2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhblVzZU1lc3NhZ2VDaGFubmVsKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1tZWRpYXRlID0gdGhpcy5jcmVhdGVNZXNzYWdlQ2hhbm5lbFNldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHRoaXMuY3JlYXRlUmVhZHlTdGF0ZUNoYW5nZVNldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVNldFRpbWVvdXRTZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaSA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBjbGVhckltbWVkaWF0ZS5pbnN0YW5jZS50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2kuaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZSA9IGNpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VQcm9jZXNzTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkZW50aWZ5KHRoaXMucm9vdC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlTWVzc2FnZUNoYW5uZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMucm9vdC5NZXNzYWdlQ2hhbm5lbCk7XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZG9jdW1lbnQgPSB0aGlzLnJvb3QuZG9jdW1lbnQ7XG4gICAgICAgIHJldHVybiBCb29sZWFuKGRvY3VtZW50ICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKTtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNhblVzZVBvc3RNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdDtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgcm9vdC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChyb290LnBvc3RNZXNzYWdlICYmICFyb290LmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzXzEgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IHJvb3Qub25tZXNzYWdlO1xuICAgICAgICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcm9vdC5wb3N0TWVzc2FnZSgnJywgJyonKTtcbiAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXNfMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGFjY2VwdHMgdGhlIHNhbWUgYXJndW1lbnRzIGFzIHNldEltbWVkaWF0ZSwgYnV0XG4gICAgLy8gcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmVxdWlyZXMgbm8gYXJndW1lbnRzLlxuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLnBhcnRpYWxseUFwcGxpZWQgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiByZXN1bHQoKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSByZXN1bHQsIGhhbmRsZXIgPSBfYS5oYW5kbGVyLCBhcmdzID0gX2EuYXJncztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIChuZXcgRnVuY3Rpb24oJycgKyBoYW5kbGVyKSkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm4uaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgIGZuLmFyZ3MgPSBhcmdzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdGhpcy50YXNrc0J5SGFuZGxlW3RoaXMubmV4dEhhbmRsZV0gPSB0aGlzLnBhcnRpYWxseUFwcGxpZWQuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dEhhbmRsZSsrO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlUHJvY2Vzc05leHRUaWNrU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wcm9jZXNzLm5leHRUaWNrKGluc3RhbmNlLnBhcnRpYWxseUFwcGxpZWQoaW5zdGFuY2UucnVuSWZQcmVzZW50LCBoYW5kbGUpKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG4gICAgICAgIH07XG4gICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuICAgICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdDtcbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSAnc2V0SW1tZWRpYXRlJCcgKyByb290Lk1hdGgucmFuZG9tKCkgKyAnJCc7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBnbG9iYWxNZXNzYWdlSGFuZGxlcihldmVudCkge1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gZ2xvYmFsTWVzc2FnZUhhbmRsZXIuaW5zdGFuY2U7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSByb290ICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG9uR2xvYmFsTWVzc2FnZS5pbnN0YW5jZSA9IHRoaXM7XG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBzZXRJbW1lZGlhdGUsIG1lc3NhZ2VQcmVmaXggPSBfYS5tZXNzYWdlUHJlZml4LCBpbnN0YW5jZSA9IF9hLmluc3RhbmNlO1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGluc3RhbmNlLnJvb3QucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgJyonKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG4gICAgICAgIH07XG4gICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgZm4ubWVzc2FnZVByZWZpeCA9IG1lc3NhZ2VQcmVmaXg7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLnJ1bklmUHJlc2VudCA9IGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogJ1dhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLidcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gJ3RvbyBtdWNoIHJlY3Vyc2lvbicgZXJyb3IuXG4gICAgICAgICAgICB0aGlzLnJvb3Quc2V0VGltZW91dCh0aGlzLnBhcnRpYWxseUFwcGxpZWQodGhpcy5ydW5JZlByZXNlbnQsIGhhbmRsZSksIDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLnRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyB0aGlzLnJvb3QuTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgX3RoaXMucnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHNldEltbWVkaWF0ZSwgY2hhbm5lbCA9IF9hLmNoYW5uZWwsIGluc3RhbmNlID0gX2EuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uY2hhbm5lbCA9IGNoYW5uZWw7XG4gICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlUmVhZHlTdGF0ZUNoYW5nZVNldEltbWVkaWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gc2V0SW1tZWRpYXRlLmluc3RhbmNlO1xuICAgICAgICAgICAgdmFyIHJvb3QgPSBpbnN0YW5jZS5yb290O1xuICAgICAgICAgICAgdmFyIGRvYyA9IHJvb3QuZG9jdW1lbnQ7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVTZXRUaW1lb3V0U2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5zZXRUaW1lb3V0KGluc3RhbmNlLnBhcnRpYWxseUFwcGxpZWQoaW5zdGFuY2UucnVuSWZQcmVzZW50LCBoYW5kbGUpLCAwKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG4gICAgICAgIH07XG4gICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH07XG4gICAgcmV0dXJuIEltbWVkaWF0ZURlZmluaXRpb247XG59KCkpO1xuZXhwb3J0cy5JbW1lZGlhdGVEZWZpbml0aW9uID0gSW1tZWRpYXRlRGVmaW5pdGlvbjtcbmV4cG9ydHMuSW1tZWRpYXRlID0gbmV3IEltbWVkaWF0ZURlZmluaXRpb24ocm9vdF8xLnJvb3QpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1tZWRpYXRlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9JbW1lZGlhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MvYnJvd3Nlci5qcycpLm5leHRUaWNrO1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xudmFyIG5leHRJbW1lZGlhdGVJZCA9IDA7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBUaGF0J3Mgbm90IGhvdyBub2RlLmpzIGltcGxlbWVudHMgaXQgYnV0IHRoZSBleHBvc2VkIGFwaSBpcyB0aGUgc2FtZS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gc2V0SW1tZWRpYXRlIDogZnVuY3Rpb24oZm4pIHtcbiAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBmYWxzZSA6IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblxuICBuZXh0VGljayhmdW5jdGlvbiBvbk5leHRUaWNrKCkge1xuICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG4gICAgICAvLyBmbi5jYWxsKCkgaXMgZmFzdGVyIHNvIHdlIG9wdGltaXplIGZvciB0aGUgY29tbW9uIHVzZS1jYXNlXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2NhbGwtYXBwbHktc2VndVxuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbi5jYWxsKG51bGwpO1xuICAgICAgfVxuICAgICAgLy8gUHJldmVudCBpZHMgZnJvbSBsZWFraW5nXG4gICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpZDtcbn07XG5cbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSB0eXBlb2YgY2xlYXJJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGNsZWFySW1tZWRpYXRlIDogZnVuY3Rpb24oaWQpIHtcbiAgZGVsZXRlIGltbWVkaWF0ZUlkc1tpZF07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4gKiogbW9kdWxlIGlkID0gNTM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3dpdGNoXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zd2l0Y2gnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2ggPSBzd2l0Y2hfMS5fc3dpdGNoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDU0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnlcbiAqIHN1YnNjcmliaW5nIHRvIG9ubHkgdGhlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBvZiB0aG9zZSBpbm5lciBPYnNlcnZhYmxlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBkcm9wcGluZyB0aGVcbiAqIHByZXZpb3VzIGlubmVyIE9ic2VydmFibGUgb25jZSBhIG5ldyBvbmUgYXBwZWFycy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zd2l0Y2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHN3aXRjaGAgc3Vic2NyaWJlcyB0byBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgT2JzZXJ2YWJsZXMsIGFsc28ga25vd24gYXMgYVxuICogaGlnaGVyLW9yZGVyIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2UgZW1pdHRlZCBpbm5lclxuICogT2JzZXJ2YWJsZXMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBzdWJzY3JpYmVzIHRvIHRoZSBpbm5lciBPYnNlcnZhYmxlIGFuZFxuICogYmVnaW5zIGVtaXR0aW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoYXQuIFNvIGZhciwgaXQgYmVoYXZlc1xuICogbGlrZSB7QGxpbmsgbWVyZ2VBbGx9LiBIb3dldmVyLCB3aGVuIGEgbmV3IGlubmVyIE9ic2VydmFibGUgaXMgZW1pdHRlZCxcbiAqIGBzd2l0Y2hgIHVuc3Vic2NyaWJlcyBmcm9tIHRoZSBlYXJsaWVyLWVtaXR0ZWQgaW5uZXIgT2JzZXJ2YWJsZSBhbmRcbiAqIHN1YnNjcmliZXMgdG8gdGhlIG5ldyBpbm5lciBPYnNlcnZhYmxlIGFuZCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgZnJvbSBpdC4gSXRcbiAqIGNvbnRpbnVlcyB0byBiZWhhdmUgbGlrZSB0aGlzIGZvciBzdWJzZXF1ZW50IGlubmVyIE9ic2VydmFibGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogLy8gRWFjaCBjbGljayBldmVudCBpcyBtYXBwZWQgdG8gYW4gT2JzZXJ2YWJsZSB0aGF0IHRpY2tzIGV2ZXJ5IHNlY29uZFxuICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogdmFyIHN3aXRjaGVkID0gaGlnaGVyT3JkZXIuc3dpdGNoKCk7XG4gKiAvLyBUaGUgb3V0Y29tZSBpcyB0aGF0IGBzd2l0Y2hlZGAgaXMgZXNzZW50aWFsbHkgYSB0aW1lciB0aGF0IHJlc3RhcnRzXG4gKiAvLyBvbiBldmVyeSBjbGljay4gVGhlIGludGVydmFsIE9ic2VydmFibGVzIGZyb20gb2xkZXIgY2xpY2tzIGRvIG5vdCBtZXJnZVxuICogLy8gd2l0aCB0aGUgY3VycmVudCBpbnRlcnZhbCBPYnNlcnZhYmxlLlxuICogc3dpdGNoZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG4gKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG4gKiBAc2VlIHtAbGluayBleGhhdXN0fVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cbiAqIEBzZWUge0BsaW5rIHppcEFsbH1cbiAqXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlXG4gKiBPYnNlcnZhYmxlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHN3aXRjaFxuICogQG5hbWUgc3dpdGNoXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBfc3dpdGNoKCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE9wZXJhdG9yKCkpO1xufVxuZXhwb3J0cy5fc3dpdGNoID0gX3N3aXRjaDtcbnZhciBTd2l0Y2hPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3dpdGNoT3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIFN3aXRjaE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaFN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFN3aXRjaE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3dpdGNoU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN3aXRjaFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3dpdGNoU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUlubmVyKCk7XG4gICAgICAgIHRoaXMuYWN0aXZlKys7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHZhbHVlKSk7XG4gICAgfTtcbiAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlSW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdGhpcy5hY3RpdmUgPiAwID8gdGhpcy5hY3RpdmUgLSAxIDogMDtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUlubmVyKCk7XG4gICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3dpdGNoU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2guanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zd2l0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA1NDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzd2l0Y2hNYXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3N3aXRjaE1hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN3aXRjaE1hcCA9IHN3aXRjaE1hcF8xLnN3aXRjaE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2hNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1NDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLCBlbWl0dGluZyB2YWx1ZXMgb25seSBmcm9tIHRoZSBtb3N0IHJlY2VudGx5IHByb2plY3RlZCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5NYXBzIGVhY2ggdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSwgdGhlbiBmbGF0dGVucyBhbGwgb2ZcbiAqIHRoZXNlIGlubmVyIE9ic2VydmFibGVzIHVzaW5nIHtAbGluayBzd2l0Y2h9Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG4gKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG4gKiByZXR1cm5zIGFuIChzby1jYWxsZWQgXCJpbm5lclwiKSBPYnNlcnZhYmxlLiBFYWNoIHRpbWUgaXQgb2JzZXJ2ZXMgb25lIG9mIHRoZXNlXG4gKiBpbm5lciBPYnNlcnZhYmxlcywgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJlZ2lucyBlbWl0dGluZyB0aGUgaXRlbXMgZW1pdHRlZCBieVxuICogdGhhdCBpbm5lciBPYnNlcnZhYmxlLiBXaGVuIGEgbmV3IGlubmVyIE9ic2VydmFibGUgaXMgZW1pdHRlZCwgYHN3aXRjaE1hcGBcbiAqIHN0b3BzIGVtaXR0aW5nIGl0ZW1zIGZyb20gdGhlIGVhcmxpZXItZW1pdHRlZCBpbm5lciBPYnNlcnZhYmxlIGFuZCBiZWdpbnNcbiAqIGVtaXR0aW5nIGl0ZW1zIGZyb20gdGhlIG5ldyBvbmUuIEl0IGNvbnRpbnVlcyB0byBiZWhhdmUgbGlrZSB0aGlzIGZvclxuICogc3Vic2VxdWVudCBpbm5lciBPYnNlcnZhYmxlcy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Muc3dpdGNoTWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cbiAqIEBzZWUge0BsaW5rIGV4aGF1c3RNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcFRvfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZX0gcHJvamVjdCBBIGZ1bmN0aW9uXG4gKiB0aGF0LCB3aGVuIGFwcGxpZWQgdG8gYW4gaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmV0dXJucyBhblxuICogT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG4gKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG4gKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcbiAqIHByb2plY3Rpb24gZnVuY3Rpb24gKGFuZCB0aGUgb3B0aW9uYWwgYHJlc3VsdFNlbGVjdG9yYCkgdG8gZWFjaCBpdGVtIGVtaXR0ZWRcbiAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgdGFraW5nIG9ubHkgdGhlIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudGx5XG4gKiBwcm9qZWN0ZWQgaW5uZXIgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgc3dpdGNoTWFwXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzd2l0Y2hNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTd2l0Y2hNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvcikpO1xufVxuZXhwb3J0cy5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXA7XG52YXIgU3dpdGNoTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN3aXRjaE1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICB9XG4gICAgU3dpdGNoTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3dpdGNoTWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN3aXRjaE1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaE1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG4gICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeU5vdGlmeU5leHQob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOb3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFN3aXRjaE1hcFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3dpdGNoTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNTQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3dpdGNoTWFwVG9fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3N3aXRjaE1hcFRvJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoTWFwVG8gPSBzd2l0Y2hNYXBUb18xLnN3aXRjaE1hcFRvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA1NDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgc2FtZSBPYnNlcnZhYmxlIHdoaWNoIGlzIGZsYXR0ZW5lZCBtdWx0aXBsZVxuICogdGltZXMgd2l0aCB7QGxpbmsgc3dpdGNofSBpbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgc3dpdGNoTWFwfSwgYnV0IG1hcHMgZWFjaCB2YWx1ZVxuICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3dpdGNoTWFwVG8ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgZ2l2ZW4gT2JzZXJ2YWJsZSBgaW5uZXJPYnNlcnZhYmxlYCByZWdhcmRsZXNzXG4gKiBvZiB0aGUgc291cmNlIHZhbHVlLCBhbmQgdGhlbiBmbGF0dGVucyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgaW50byBvbmVcbiAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZXNcbiAqIGVtaXRzIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50bHkgZW1pdHRlZCBpbnN0YW5jZSBvZlxuICogYGlubmVyT2JzZXJ2YWJsZWAuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+UmVydW4gYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSBvbiBldmVyeSBjbGljayBldmVudDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnN3aXRjaE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cbiAqIEBzZWUge0BsaW5rIHN3aXRjaH1cbiAqIEBzZWUge0BsaW5rIHN3aXRjaE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbm5lck9ic2VydmFibGUgQW4gT2JzZXJ2YWJsZSB0byByZXBsYWNlIGVhY2ggdmFsdWUgZnJvbVxuICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuICogYGlubmVyT2JzZXJ2YWJsZWAgZXZlcnkgdGltZSBhIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlIGdpdmVuXG4gKiBgaW5uZXJPYnNlcnZhYmxlYCAoYW5kIG9wdGlvbmFsbHkgdHJhbnNmb3JtZWQgdGhyb3VnaCBgcmVzdWx0U2VsZWN0b3JgKSBldmVyeVxuICogdGltZSBhIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgdGFraW5nIG9ubHkgdGhlIHZhbHVlc1xuICogZnJvbSB0aGUgbW9zdCByZWNlbnRseSBwcm9qZWN0ZWQgaW5uZXIgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgc3dpdGNoTWFwVG9cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHN3aXRjaE1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTd2l0Y2hNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuc3dpdGNoTWFwVG8gPSBzd2l0Y2hNYXBUbztcbnZhciBTd2l0Y2hNYXBUb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBUb09wZXJhdG9yKG9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICB9XG4gICAgU3dpdGNoTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTd2l0Y2hNYXBUb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlLCB0aGlzLnJlc3VsdFNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3dpdGNoTWFwVG9PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN3aXRjaE1hcFRvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN3aXRjaE1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlubmVyLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lcjtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGQodGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgdGhpcy5pbm5lciwgdmFsdWUsIHRoaXMuaW5kZXgrKykpO1xuICAgIH07XG4gICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9O1xuICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRyeVJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBUb1N1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zd2l0Y2hNYXBUby5qc1xuICoqIG1vZHVsZSBpZCA9IDU0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRha2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3Rha2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlID0gdGFrZV8xLnRha2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1NDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEgPSByZXF1aXJlKCcuLi91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJyk7XG52YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBFbWl0cyBvbmx5IHRoZSBmaXJzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGFrZXMgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSwgdGhlblxuICogY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHRha2VgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWRcbiAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGAgdmFsdWVzIHRoZW5cbiAqIGFsbCBvZiBpdHMgdmFsdWVzIGFyZSBlbWl0dGVkLiBBZnRlciB0aGF0LCBpdCBjb21wbGV0ZXMsIHJlZ2FyZGxlc3MgaWYgdGhlXG4gKiBzb3VyY2UgY29tcGxldGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlRha2UgdGhlIGZpcnN0IDUgc2Vjb25kcyBvZiBhbiBpbmZpbml0ZSAxLXNlY29uZCBpbnRlcnZhbCBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBmaXZlID0gaW50ZXJ2YWwudGFrZSg1KTtcbiAqIGZpdmUuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuICogQHNlZSB7QGxpbmsgdGFrZVVudGlsfVxuICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuICogQHNlZSB7QGxpbmsgc2tpcH1cbiAqXG4gKiBAdGhyb3dzIHtBcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0gV2hlbiB1c2luZyBgdGFrZShpKWAsIGl0IGRlbGl2ZXJzIGFuXG4gKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBgbmV4dGAgdmFsdWVzIHRvIGVtaXQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgYGNvdW50YFxuICogdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBvciBhbGwgb2YgdGhlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIGlmIHRoZSBzb3VyY2UgZW1pdHMgZmV3ZXIgdGhhbiBgY291bnRgIHZhbHVlcy5cbiAqIEBtZXRob2QgdGFrZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdGFrZShjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZU9wZXJhdG9yKGNvdW50KSk7XG4gICAgfVxufVxuZXhwb3J0cy50YWtlID0gdGFrZTtcbnZhciBUYWtlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRha2VPcGVyYXRvcih0b3RhbCkge1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgVGFrZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRha2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcbiAgICB9O1xuICAgIHJldHVybiBUYWtlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUYWtlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRha2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRha2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB0b3RhbCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuICAgIFRha2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsO1xuICAgICAgICBpZiAoKyt0aGlzLmNvdW50IDw9IHRvdGFsKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY291bnQgPT09IHRvdGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRha2VTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3Rha2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1NDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIGFuIGVsZW1lbnQgd2FzIHF1ZXJpZWQgYXQgYSBjZXJ0YWluIGluZGV4IG9mIGFuXG4gKiBPYnNlcnZhYmxlLCBidXQgbm8gc3VjaCBpbmRleCBvciBwb3NpdGlvbiBleGlzdHMgaW4gdGhhdCBzZXF1ZW5jZS5cbiAqXG4gKiBAc2VlIHtAbGluayBlbGVtZW50QXR9XG4gKiBAc2VlIHtAbGluayB0YWtlfVxuICogQHNlZSB7QGxpbmsgdGFrZUxhc3R9XG4gKlxuICogQGNsYXNzIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXG4gKi9cbnZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnYXJndW1lbnQgb3V0IG9mIHJhbmdlJyk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdBcmd1bWVudE91dE9mUmFuZ2VFcnJvcic7XG4gICAgfVxuICAgIHJldHVybiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qc1xuICoqIG1vZHVsZSBpZCA9IDU0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRha2VMYXN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90YWtlTGFzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2VMYXN0ID0gdGFrZUxhc3RfMS50YWtlTGFzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VMYXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VMYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcicpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUnKTtcbi8qKlxuICogRW1pdHMgb25seSB0aGUgbGFzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+UmVtZW1iZXJzIHRoZSBsYXRlc3QgYGNvdW50YCB2YWx1ZXMsIHRoZW4gZW1pdHMgdGhvc2VcbiAqIG9ubHkgd2hlbiB0aGUgc291cmNlIGNvbXBsZXRlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy90YWtlTGFzdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgdGFrZUxhc3RgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGF0IG1vc3QgdGhlIGxhc3QgYGNvdW50YCB2YWx1ZXNcbiAqIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiB0aGUgc291cmNlIGVtaXRzIGZld2VyIHRoYW4gYGNvdW50YFxuICogdmFsdWVzIHRoZW4gYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIFRoaXMgb3BlcmF0b3IgbXVzdCB3YWl0IHVudGlsIHRoZVxuICogYGNvbXBsZXRlYCBub3RpZmljYXRpb24gZW1pc3Npb24gZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGVtaXQgdGhlIGBuZXh0YFxuICogdmFsdWVzIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSwgYmVjYXVzZSBvdGhlcndpc2UgaXQgaXMgaW1wb3NzaWJsZSB0byBrbm93XG4gKiB3aGV0aGVyIG9yIG5vdCBtb3JlIHZhbHVlcyB3aWxsIGJlIGVtaXR0ZWQgb24gdGhlIHNvdXJjZS4gRm9yIHRoaXMgcmVhc29uLFxuICogYWxsIHZhbHVlcyBhcmUgZW1pdHRlZCBzeW5jaHJvbm91c2x5LCBmb2xsb3dlZCBieSB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlRha2UgdGhlIGxhc3QgMyB2YWx1ZXMgb2YgYW4gT2JzZXJ2YWJsZSB3aXRoIG1hbnkgdmFsdWVzPC9jYXB0aW9uPlxuICogdmFyIG1hbnkgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDEwMCk7XG4gKiB2YXIgbGFzdFRocmVlID0gbWFueS50YWtlTGFzdCgzKTtcbiAqIGxhc3RUaHJlZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqIEBzZWUge0BsaW5rIHRha2VVbnRpbH1cbiAqIEBzZWUge0BsaW5rIHRha2VXaGlsZX1cbiAqIEBzZWUge0BsaW5rIHNraXB9XG4gKlxuICogQHRocm93cyB7QXJndW1lbnRPdXRPZlJhbmdlRXJyb3J9IFdoZW4gdXNpbmcgYHRha2VMYXN0KGkpYCwgaXQgZGVsaXZlcnMgYW5cbiAqIEFyZ3VtZW50T3V0T3JSYW5nZUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmAgY2FsbGJhY2sgaWYgYGkgPCAwYC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIHZhbHVlcyB0byBlbWl0IGZyb20gdGhlIGVuZCBvZlxuICogdGhlIHNlcXVlbmNlIG9mIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhdCBtb3N0IHRoZSBsYXN0IGNvdW50XG4gKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHRha2VMYXN0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlTGFzdChjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZUxhc3RPcGVyYXRvcihjb3VudCkpO1xuICAgIH1cbn1cbmV4cG9ydHMudGFrZUxhc3QgPSB0YWtlTGFzdDtcbnZhciBUYWtlTGFzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYWtlTGFzdE9wZXJhdG9yKHRvdGFsKSB7XG4gICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcbiAgICAgICAgaWYgKHRoaXMudG90YWwgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBUYWtlTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRha2VMYXN0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZUxhc3RPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRha2VMYXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRha2VMYXN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlTGFzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICB0aGlzLnJpbmcgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuICAgIFRha2VMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJpbmcgPSB0aGlzLnJpbmc7XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG4gICAgICAgIHZhciBjb3VudCA9IHRoaXMuY291bnQrKztcbiAgICAgICAgaWYgKHJpbmcubGVuZ3RoIDwgdG90YWwpIHtcbiAgICAgICAgICAgIHJpbmcucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBjb3VudCAlIHRvdGFsO1xuICAgICAgICAgICAgcmluZ1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGFrZUxhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciBjb3VudCA9IHRoaXMuY291bnQ7XG4gICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IHRoaXMuY291bnQgPj0gdGhpcy50b3RhbCA/IHRoaXMudG90YWwgOiB0aGlzLmNvdW50O1xuICAgICAgICAgICAgdmFyIHJpbmcgPSB0aGlzLnJpbmc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gKGNvdW50KyspICUgdG90YWw7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyaW5nW2lkeF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZUxhc3RTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZUxhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90YWtlTGFzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRha2VVbnRpbF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGFrZVVudGlsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZVVudGlsID0gdGFrZVVudGlsXzEudGFrZVVudGlsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZVVudGlsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VVbnRpbC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEVtaXRzIHRoZSB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgYSBgbm90aWZpZXJgXG4gKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxldHMgdmFsdWVzIHBhc3MgdW50aWwgYSBzZWNvbmQgT2JzZXJ2YWJsZSxcbiAqIGBub3RpZmllcmAsIGVtaXRzIHNvbWV0aGluZy4gVGhlbiwgaXQgY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2VVbnRpbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgdGFrZVVudGlsYCBzdWJzY3JpYmVzIGFuZCBiZWdpbnMgbWlycm9yaW5nIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSXQgYWxzb1xuICogbW9uaXRvcnMgYSBzZWNvbmQgT2JzZXJ2YWJsZSwgYG5vdGlmaWVyYCB0aGF0IHlvdSBwcm92aWRlLiBJZiB0aGUgYG5vdGlmaWVyYFxuICogZW1pdHMgYSB2YWx1ZSBvciBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbiwgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHN0b3BzXG4gKiBtaXJyb3JpbmcgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBjb21wbGV0ZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VGljayBldmVyeSBzZWNvbmQgdW50aWwgdGhlIGZpcnN0IGNsaWNrIGhhcHBlbnM8L2NhcHRpb24+XG4gKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBpbnRlcnZhbC50YWtlVW50aWwoY2xpY2tzKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuICogQHNlZSB7QGxpbmsgc2tpcH1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG5vdGlmaWVyIFRoZSBPYnNlcnZhYmxlIHdob3NlIGZpcnN0IGVtaXR0ZWQgdmFsdWUgd2lsbFxuICogY2F1c2UgdGhlIG91dHB1dCBPYnNlcnZhYmxlIG9mIGB0YWtlVW50aWxgIHRvIHN0b3AgZW1pdHRpbmcgdmFsdWVzIGZyb20gdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSB1bnRpbCBzdWNoIHRpbWUgYXMgYG5vdGlmaWVyYCBlbWl0cyBpdHMgZmlyc3QgdmFsdWUuXG4gKiBAbWV0aG9kIHRha2VVbnRpbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdGFrZVVudGlsKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZVVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcbn1cbmV4cG9ydHMudGFrZVVudGlsID0gdGFrZVVudGlsO1xudmFyIFRha2VVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYWtlVW50aWxPcGVyYXRvcihub3RpZmllcikge1xuICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgfVxuICAgIFRha2VVbnRpbE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRha2VVbnRpbFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFRha2VVbnRpbE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGFrZVVudGlsU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRha2VVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGFrZVVudGlsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgbm90aWZpZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgbm90aWZpZXIpKTtcbiAgICB9XG4gICAgVGFrZVVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBUYWtlVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gbm9vcFxuICAgIH07XG4gICAgcmV0dXJuIFRha2VVbnRpbFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZVVudGlsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdGFrZVVudGlsLmpzXG4gKiogbW9kdWxlIGlkID0gNTUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGFrZVdoaWxlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90YWtlV2hpbGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlV2hpbGUgPSB0YWtlV2hpbGVfMS50YWtlV2hpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZVdoaWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogRW1pdHMgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHNvIGxvbmcgYXMgZWFjaCB2YWx1ZSBzYXRpc2ZpZXNcbiAqIHRoZSBnaXZlbiBgcHJlZGljYXRlYCwgYW5kIHRoZW4gY29tcGxldGVzIGFzIHNvb24gYXMgdGhpcyBgcHJlZGljYXRlYCBpcyBub3RcbiAqIHNhdGlzZmllZC5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGFrZXMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvbmx5IHdoaWxlIHRoZXkgcGFzcyB0aGVcbiAqIGNvbmRpdGlvbiBnaXZlbi4gV2hlbiB0aGUgZmlyc3QgdmFsdWUgZG9lcyBub3Qgc2F0aXNmeSwgaXQgY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2VXaGlsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgdGFrZVdoaWxlYCBzdWJzY3JpYmVzIGFuZCBiZWdpbnMgbWlycm9yaW5nIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gRWFjaCB2YWx1ZVxuICogZW1pdHRlZCBvbiB0aGUgc291cmNlIGlzIGdpdmVuIHRvIHRoZSBgcHJlZGljYXRlYCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFcbiAqIGJvb2xlYW4sIHJlcHJlc2VudGluZyBhIGNvbmRpdGlvbiB0byBiZSBzYXRpc2ZpZWQgYnkgdGhlIHNvdXJjZSB2YWx1ZXMuIFRoZVxuICogb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgdGhlIHNvdXJjZSB2YWx1ZXMgdW50aWwgc3VjaCB0aW1lIGFzIHRoZSBgcHJlZGljYXRlYFxuICogcmV0dXJucyBmYWxzZSwgYXQgd2hpY2ggcG9pbnQgYHRha2VXaGlsZWAgc3RvcHMgbWlycm9yaW5nIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgYW5kIGNvbXBsZXRlcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGljayBldmVudHMgb25seSB3aGlsZSB0aGUgY2xpZW50WCBwcm9wZXJ0eSBpcyBncmVhdGVyIHRoYW4gMjAwPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MudGFrZVdoaWxlKGV2ID0+IGV2LmNsaWVudFggPiAyMDApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB0YWtlfVxuICogQHNlZSB7QGxpbmsgdGFrZUxhc3R9XG4gKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG4gKiBAc2VlIHtAbGluayBza2lwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBib29sZWFufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0aGF0XG4gKiBldmFsdWF0ZXMgYSB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgcmV0dXJucyBhIGJvb2xlYW4uXG4gKiBBbHNvIHRha2VzIHRoZSAoemVyby1iYXNlZCkgaW5kZXggYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBzbyBsb25nIGFzIGVhY2ggdmFsdWUgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gZGVmaW5lZCBieSB0aGVcbiAqIGBwcmVkaWNhdGVgLCB0aGVuIGNvbXBsZXRlcy5cbiAqIEBtZXRob2QgdGFrZVdoaWxlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlV2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZVdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSk7XG59XG5leHBvcnRzLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcbnZhciBUYWtlV2hpbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGFrZVdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgIH1cbiAgICBUYWtlV2hpbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVdoaWxlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUYWtlV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZVdoaWxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIFRha2VXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dE9yQ29tcGxldGUodmFsdWUsIHJlc3VsdCk7XG4gICAgfTtcbiAgICBUYWtlV2hpbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0T3JDb21wbGV0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJlZGljYXRlUmVzdWx0KSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChCb29sZWFuKHByZWRpY2F0ZVJlc3VsdCkpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRha2VXaGlsZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90YWtlV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aHJvdHRsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGhyb3R0bGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50aHJvdHRsZSA9IHRocm90dGxlXzEudGhyb3R0bGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEVtaXRzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZW4gaWdub3JlcyBzdWJzZXF1ZW50IHNvdXJjZVxuICogdmFsdWVzIGZvciBhIGR1cmF0aW9uIGRldGVybWluZWQgYnkgYW5vdGhlciBPYnNlcnZhYmxlLCB0aGVuIHJlcGVhdHMgdGhpc1xuICogcHJvY2Vzcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayB0aHJvdHRsZVRpbWV9LCBidXQgdGhlIHNpbGVuY2luZ1xuICogZHVyYXRpb24gaXMgZGV0ZXJtaW5lZCBieSBhIHNlY29uZCBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm90dGxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGB0aHJvdHRsZWAgZW1pdHMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGVcbiAqIHdoZW4gaXRzIGludGVybmFsIHRpbWVyIGlzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoZW4gdGhlIHRpbWVyXG4gKiBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Qgc291cmNlXG4gKiB2YWx1ZSBhcnJpdmVzLCBpdCBpcyBmb3J3YXJkZWQgdG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLCBhbmQgdGhlbiB0aGUgdGltZXJcbiAqIGlzIGVuYWJsZWQgYnkgY2FsbGluZyB0aGUgYGR1cmF0aW9uU2VsZWN0b3JgIGZ1bmN0aW9uIHdpdGggdGhlIHNvdXJjZSB2YWx1ZSxcbiAqIHdoaWNoIHJldHVybnMgdGhlIFwiZHVyYXRpb25cIiBPYnNlcnZhYmxlLiBXaGVuIHRoZSBkdXJhdGlvbiBPYnNlcnZhYmxlIGVtaXRzIGFcbiAqIHZhbHVlIG9yIGNvbXBsZXRlcywgdGhlIHRpbWVyIGlzIGRpc2FibGVkLCBhbmQgdGhpcyBwcm9jZXNzIHJlcGVhdHMgZm9yIHRoZVxuICogbmV4dCBzb3VyY2UgdmFsdWUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBjbGlja3MgYXQgYSByYXRlIG9mIGF0IG1vc3Qgb25lIGNsaWNrIHBlciBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy50aHJvdHRsZShldiA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYXVkaXR9XG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cbiAqIEBzZWUge0BsaW5rIHNhbXBsZX1cbiAqIEBzZWUge0BsaW5rIHRocm90dGxlVGltZX1cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBkdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb25cbiAqIHRoYXQgcmVjZWl2ZXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgZm9yIGNvbXB1dGluZyB0aGUgc2lsZW5jaW5nXG4gKiBkdXJhdGlvbiBmb3IgZWFjaCBzb3VyY2UgdmFsdWUsIHJldHVybmVkIGFzIGFuIE9ic2VydmFibGUgb3IgYSBQcm9taXNlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IHBlcmZvcm1zIHRoZSB0aHJvdHRsZSBvcGVyYXRpb24gdG9cbiAqIGxpbWl0IHRoZSByYXRlIG9mIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UuXG4gKiBAbWV0aG9kIHRocm90dGxlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0aHJvdHRsZShkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGhyb3R0bGVPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLnRocm90dGxlID0gdGhyb3R0bGU7XG52YXIgVGhyb3R0bGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGhyb3R0bGVPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIFRocm90dGxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGhyb3R0bGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFRocm90dGxlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUaHJvdHRsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaHJvdHRsZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGhyb3R0bGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy50aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5RHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RHVyYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXRBbmRUaHJvdHRsZSh2YWx1ZSwgZHVyYXRpb24pO1xuICAgIH07XG4gICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0QW5kVGhyb3R0bGUgPSBmdW5jdGlvbiAodmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbikpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0aHJvdHRsZWQgPSB0aGlzLnRocm90dGxlZDtcbiAgICAgICAgaWYgKHRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcbiAgICAgICAgICAgIHRoaXMudGhyb3R0bGVkID0gbnVsbDtcbiAgICAgICAgICAgIHRocm90dGxlZC51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVGhyb3R0bGVTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm90dGxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdGhyb3R0bGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aHJvdHRsZVRpbWVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3Rocm90dGxlVGltZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRocm90dGxlVGltZSA9IHRocm90dGxlVGltZV8xLnRocm90dGxlVGltZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm90dGxlVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZVRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogRW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlbiBpZ25vcmVzIHN1YnNlcXVlbnQgc291cmNlXG4gKiB2YWx1ZXMgZm9yIGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzLCB0aGVuIHJlcGVhdHMgdGhpcyBwcm9jZXNzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MZXRzIGEgdmFsdWUgcGFzcywgdGhlbiBpZ25vcmVzIHNvdXJjZSB2YWx1ZXMgZm9yIHRoZVxuICogbmV4dCBgZHVyYXRpb25gIG1pbGxpc2Vjb25kcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy90aHJvdHRsZVRpbWUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHRocm90dGxlVGltZWAgZW1pdHMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGVcbiAqIHdoZW4gaXRzIGludGVybmFsIHRpbWVyIGlzIGRpc2FibGVkLCBhbmQgaWdub3JlcyBzb3VyY2UgdmFsdWVzIHdoZW4gdGhlIHRpbWVyXG4gKiBpcyBlbmFibGVkLiBJbml0aWFsbHksIHRoZSB0aW1lciBpcyBkaXNhYmxlZC4gQXMgc29vbiBhcyB0aGUgZmlyc3Qgc291cmNlXG4gKiB2YWx1ZSBhcnJpdmVzLCBpdCBpcyBmb3J3YXJkZWQgdG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLCBhbmQgdGhlbiB0aGUgdGltZXJcbiAqIGlzIGVuYWJsZWQuIEFmdGVyIGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzIChvciB0aGUgdGltZSB1bml0IGRldGVybWluZWRcbiAqIGludGVybmFsbHkgYnkgdGhlIG9wdGlvbmFsIGBzY2hlZHVsZXJgKSBoYXMgcGFzc2VkLCB0aGUgdGltZXIgaXMgZGlzYWJsZWQsXG4gKiBhbmQgdGhpcyBwcm9jZXNzIHJlcGVhdHMgZm9yIHRoZSBuZXh0IHNvdXJjZSB2YWx1ZS4gT3B0aW9uYWxseSB0YWtlcyBhXG4gKiB7QGxpbmsgU2NoZWR1bGVyfSBmb3IgbWFuYWdpbmcgdGltZXJzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgY2xpY2tzIGF0IGEgcmF0ZSBvZiBhdCBtb3N0IG9uZSBjbGljayBwZXIgc2Vjb25kPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MudGhyb3R0bGVUaW1lKDEwMDApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBhdWRpdFRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWJvdW5jZVRpbWV9XG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqIEBzZWUge0BsaW5rIHNhbXBsZVRpbWV9XG4gKiBAc2VlIHtAbGluayB0aHJvdHRsZX1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gVGltZSB0byB3YWl0IGJlZm9yZSBlbWl0dGluZyBhbm90aGVyIHZhbHVlIGFmdGVyXG4gKiBlbWl0dGluZyB0aGUgbGFzdCB2YWx1ZSwgbWVhc3VyZWQgaW4gbWlsbGlzZWNvbmRzIG9yIHRoZSB0aW1lIHVuaXQgZGV0ZXJtaW5lZFxuICogaW50ZXJuYWxseSBieSB0aGUgb3B0aW9uYWwgYHNjaGVkdWxlcmAuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3JcbiAqIG1hbmFnaW5nIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGhlIHNhbXBsaW5nLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IHBlcmZvcm1zIHRoZSB0aHJvdHRsZSBvcGVyYXRpb24gdG9cbiAqIGxpbWl0IHRoZSByYXRlIG9mIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UuXG4gKiBAbWV0aG9kIHRocm90dGxlVGltZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGVUaW1lKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMudGhyb3R0bGVUaW1lID0gdGhyb3R0bGVUaW1lO1xudmFyIFRocm90dGxlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUaHJvdHRsZVRpbWVPcGVyYXRvcihkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFRocm90dGxlVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRocm90dGxlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBUaHJvdHRsZVRpbWVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRocm90dGxlVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaHJvdHRsZVRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRocm90dGxlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgdGhpcy5kdXJhdGlvbiwgeyBzdWJzY3JpYmVyOiB0aGlzIH0pKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRocm90dGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyVGhyb3R0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0aHJvdHRsZWQgPSB0aGlzLnRocm90dGxlZDtcbiAgICAgICAgaWYgKHRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGhyb3R0bGVUaW1lU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcbiAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgIHN1YnNjcmliZXIuY2xlYXJUaHJvdHRsZSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdGhyb3R0bGVUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNTU5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGltZW91dF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGltZW91dCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXQgPSB0aW1lb3V0XzEudGltZW91dDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGltZW91dC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgaXNEYXRlXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzRGF0ZScpO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQHBhcmFtIGR1ZVxuICogQHBhcmFtIGVycm9yVG9TZW5kXG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgdGltZW91dFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdGltZW91dChkdWUsIGVycm9yVG9TZW5kLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoZXJyb3JUb1NlbmQgPT09IHZvaWQgMCkgeyBlcnJvclRvU2VuZCA9IG51bGw7IH1cbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHZhciBhYnNvbHV0ZVRpbWVvdXQgPSBpc0RhdGVfMS5pc0RhdGUoZHVlKTtcbiAgICB2YXIgd2FpdEZvciA9IGFic29sdXRlVGltZW91dCA/ICgrZHVlIC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGR1ZSk7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy50aW1lb3V0ID0gdGltZW91dDtcbnZhciBUaW1lb3V0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRpbWVvdXRPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIGVycm9yVG9TZW5kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcbiAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG4gICAgICAgIHRoaXMuZXJyb3JUb1NlbmQgPSBlcnJvclRvU2VuZDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFRpbWVvdXRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUaW1lb3V0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmFic29sdXRlVGltZW91dCwgdGhpcy53YWl0Rm9yLCB0aGlzLmVycm9yVG9TZW5kLCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbWVvdXRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRpbWVvdXRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGltZW91dFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGltZW91dFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGFic29sdXRlVGltZW91dCwgd2FpdEZvciwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yO1xuICAgICAgICB0aGlzLmVycm9yVG9TZW5kID0gZXJyb3JUb1NlbmQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLCBcInByZXZpb3VzSW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0luZGV4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLCBcImhhc0NvbXBsZXRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgVGltZW91dFN1YnNjcmliZXIuZGlzcGF0Y2hUaW1lb3V0ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gc3RhdGUuaW5kZXg7XG4gICAgICAgIGlmICghc291cmNlLmhhc0NvbXBsZXRlZCAmJiBzb3VyY2UucHJldmlvdXNJbmRleCA9PT0gY3VycmVudEluZGV4KSB7XG4gICAgICAgICAgICBzb3VyY2Uubm90aWZ5VGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoVGltZW91dFN1YnNjcmliZXIuZGlzcGF0Y2hUaW1lb3V0LCB0aGlzLndhaXRGb3IsIHsgc3Vic2NyaWJlcjogdGhpcywgaW5kZXg6IGN1cnJlbnRJbmRleCB9KTtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0luZGV4ID0gY3VycmVudEluZGV4O1xuICAgIH07XG4gICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIGlmICghdGhpcy5hYnNvbHV0ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVycm9yKHRoaXMuZXJyb3JUb1NlbmQgfHwgbmV3IEVycm9yKCd0aW1lb3V0JykpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbWVvdXRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3RpbWVvdXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aW1lb3V0V2l0aF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGltZW91dFdpdGgnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50aW1lb3V0V2l0aCA9IHRpbWVvdXRXaXRoXzEudGltZW91dFdpdGg7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0V2l0aC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0V2l0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgaXNEYXRlXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzRGF0ZScpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQHBhcmFtIGR1ZVxuICogQHBhcmFtIHdpdGhPYnNlcnZhYmxlXG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgdGltZW91dFdpdGhcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRpbWVvdXRXaXRoKGR1ZSwgd2l0aE9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuICAgIHZhciB3YWl0Rm9yID0gYWJzb2x1dGVUaW1lb3V0ID8gKCtkdWUgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZHVlKTtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaW1lb3V0V2l0aE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgd2l0aE9ic2VydmFibGUsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy50aW1lb3V0V2l0aCA9IHRpbWVvdXRXaXRoO1xudmFyIFRpbWVvdXRXaXRoT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRpbWVvdXRXaXRoT3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG4gICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuICAgICAgICB0aGlzLndpdGhPYnNlcnZhYmxlID0gd2l0aE9ic2VydmFibGU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBUaW1lb3V0V2l0aE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRpbWVvdXRXaXRoU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmFic29sdXRlVGltZW91dCwgdGhpcy53YWl0Rm9yLCB0aGlzLndpdGhPYnNlcnZhYmxlLCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbWVvdXRXaXRoT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUaW1lb3V0V2l0aFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaW1lb3V0V2l0aFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGltZW91dFdpdGhTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhYnNvbHV0ZVRpbWVvdXQsIHdhaXRGb3IsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG4gICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG4gICAgICAgIHRoaXMud2l0aE9ic2VydmFibGUgPSB3aXRoT2JzZXJ2YWJsZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMudGltZW91dFN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgZGVzdGluYXRpb24uYWRkKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJwcmV2aW91c0luZGV4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNJbmRleDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faGFzQ29tcGxldGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIuZGlzcGF0Y2hUaW1lb3V0ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gc3RhdGUuaW5kZXg7XG4gICAgICAgIGlmICghc291cmNlLmhhc0NvbXBsZXRlZCAmJiBzb3VyY2UucHJldmlvdXNJbmRleCA9PT0gY3VycmVudEluZGV4KSB7XG4gICAgICAgICAgICBzb3VyY2UuaGFuZGxlVGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgIHZhciB0aW1lb3V0U3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIGluZGV4OiBjdXJyZW50SW5kZXggfTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoVGltZW91dFdpdGhTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCwgdGhpcy53YWl0Rm9yLCB0aW1lb3V0U3RhdGUpO1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXg7XG4gICAgfTtcbiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIGlmICghdGhpcy5hYnNvbHV0ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5oYW5kbGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHZhciB3aXRoT2JzZXJ2YWJsZSA9IHRoaXMud2l0aE9ic2VydmFibGU7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmFkZCh0aGlzLnRpbWVvdXRTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHdpdGhPYnNlcnZhYmxlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaW1lb3V0V2l0aFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dFdpdGguanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90aW1lb3V0V2l0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRvQXJyYXlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3RvQXJyYXknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50b0FycmF5ID0gdG9BcnJheV8xLnRvQXJyYXk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3RvQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueVtdPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHRvQXJyYXlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVG9BcnJheU9wZXJhdG9yKCkpO1xufVxuZXhwb3J0cy50b0FycmF5ID0gdG9BcnJheTtcbnZhciBUb0FycmF5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRvQXJyYXlPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgVG9BcnJheU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRvQXJyYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBUb0FycmF5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUb0FycmF5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRvQXJyYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRvQXJyYXlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IFtdO1xuICAgIH1cbiAgICBUb0FycmF5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICB0aGlzLmFycmF5LnB1c2goeCk7XG4gICAgfTtcbiAgICBUb0FycmF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBUb0FycmF5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvQXJyYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90b0FycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gNTY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdG9Qcm9taXNlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90b1Byb21pc2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSB0b1Byb21pc2VfMS50b1Byb21pc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1Byb21pc2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdG9Qcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gNTY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aW5kb3cnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3cgPSB3aW5kb3dfMS53aW5kb3c7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3cuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93LmpzXG4gKiogbW9kdWxlIGlkID0gNTY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHdoZW5ldmVyXG4gKiBgd2luZG93Qm91bmRhcmllc2AgZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyfSwgYnV0IGVtaXRzIGEgbmVzdGVkIE9ic2VydmFibGVcbiAqIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmdcbiAqIHdpbmRvd3MuIEl0IGVtaXRzIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgb3BlbnMgYSBuZXcgb25lIHdoZW5ldmVyIHRoZVxuICogT2JzZXJ2YWJsZSBgd2luZG93Qm91bmRhcmllc2AgZW1pdHMgYW4gaXRlbS4gQmVjYXVzZSBlYWNoIHdpbmRvdyBpcyBhblxuICogT2JzZXJ2YWJsZSwgdGhlIG91dHB1dCBpcyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkluIGV2ZXJ5IHdpbmRvdyBvZiAxIHNlY29uZCBlYWNoLCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93KGludGVydmFsKVxuICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcbiAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGU8YW55Pn0gd2luZG93Qm91bmRhcmllcyBBbiBPYnNlcnZhYmxlIHRoYXQgY29tcGxldGVzIHRoZVxuICogcHJldmlvdXMgd2luZG93IGFuZCBzdGFydHMgYSBuZXcgd2luZG93LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gT2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBhcmVcbiAqIE9ic2VydmFibGVzIGVtaXR0aW5nIHZhbHVlcyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHdpbmRvd1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gd2luZG93KHdpbmRvd0JvdW5kYXJpZXMpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSk7XG59XG5leHBvcnRzLndpbmRvdyA9IHdpbmRvdztcbnZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93T3BlcmF0b3Iod2luZG93Qm91bmRhcmllcykge1xuICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzO1xuICAgIH1cbiAgICBXaW5kb3dPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93Qm91bmRhcmllcykpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpbmRvd09wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgV2luZG93U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpbmRvd1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gV2luZG93U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgd2luZG93Qm91bmRhcmllcykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy53aW5kb3dCb3VuZGFyaWVzID0gd2luZG93Qm91bmRhcmllcztcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB3aW5kb3dCb3VuZGFyaWVzKSk7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuICAgIH1cbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJldldpbmRvdyA9IHRoaXMud2luZG93O1xuICAgICAgICBpZiAocHJldldpbmRvdykge1xuICAgICAgICAgICAgcHJldldpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciBuZXdXaW5kb3cgPSB0aGlzLndpbmRvdyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQobmV3V2luZG93KTtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChuZXdXaW5kb3cpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpbmRvd1N1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93LmpzXG4gKiogbW9kdWxlIGlkID0gNTY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93Q291bnRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3dpbmRvd0NvdW50Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93Q291bnQgPSB3aW5kb3dDb3VudF8xLndpbmRvd0NvdW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93Q291bnQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93Q291bnQuanNcbiAqKiBtb2R1bGUgaWQgPSA1NjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbi8qKlxuICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2l0aCBlYWNoXG4gKiBuZXN0ZWQgT2JzZXJ2YWJsZSBlbWl0dGluZyBhdCBtb3N0IGB3aW5kb3dTaXplYCB2YWx1ZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyQ291bnR9LCBidXQgZW1pdHMgYSBuZXN0ZWRcbiAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dDb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgZXZlcnkgYHN0YXJ0V2luZG93RXZlcnlgXG4gKiBpdGVtcywgZWFjaCBjb250YWluaW5nIG5vIG1vcmUgdGhhbiBgd2luZG93U2l6ZWAgaXRlbXMuIFdoZW4gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBjb21wbGV0ZXMgb3IgZW5jb3VudGVycyBhbiBlcnJvciwgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzXG4gKiB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIElmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBub3QgcHJvdmlkZWQsIHRoZW4gbmV3IHdpbmRvd3MgYXJlXG4gKiBzdGFydGVkIGltbWVkaWF0ZWx5IGF0IHRoZSBzdGFydCBvZiB0aGUgc291cmNlIGFuZCB3aGVuIGVhY2ggd2luZG93IGNvbXBsZXRlc1xuICogd2l0aCBzaXplIGB3aW5kb3dTaXplYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBvbmU8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dDb3VudCgzKVxuICogICAubWFwKHdpbiA9PiB3aW4uc2tpcCgxKSkgLy8gc2tpcCBmaXJzdCBvZiBldmVyeSAzIGNsaWNrc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSB0aGlyZCBvbmU8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dDb3VudCgyLCAzKVxuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aW5kb3dTaXplIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2YWx1ZXMgZW1pdHRlZCBieSBlYWNoXG4gKiB3aW5kb3cuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0V2luZG93RXZlcnldIEludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IGEgbmV3IHdpbmRvdy5cbiAqIEZvciBleGFtcGxlIGlmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgd2luZG93IHdpbGwgYmUgc3RhcnRlZFxuICogb24gZXZlcnkgb3RoZXIgdmFsdWUgZnJvbSB0aGUgc291cmNlLiBBIG5ldyB3aW5kb3cgaXMgc3RhcnRlZCBhdCB0aGVcbiAqIGJlZ2lubmluZyBvZiB0aGUgc291cmNlIGJ5IGRlZmF1bHQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBPYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cbiAqIGFyZSBPYnNlcnZhYmxlIG9mIHZhbHVlcy5cbiAqIEBtZXRob2Qgd2luZG93Q291bnRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHdpbmRvd0NvdW50KHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcbiAgICBpZiAoc3RhcnRXaW5kb3dFdmVyeSA9PT0gdm9pZCAwKSB7IHN0YXJ0V2luZG93RXZlcnkgPSAwOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSk7XG59XG5leHBvcnRzLndpbmRvd0NvdW50ID0gd2luZG93Q291bnQ7XG52YXIgV2luZG93Q291bnRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7XG4gICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG4gICAgICAgIHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA9IHN0YXJ0V2luZG93RXZlcnk7XG4gICAgfVxuICAgIFdpbmRvd0NvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93Q291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93U2l6ZSwgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5KSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93Q291bnRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFdpbmRvd0NvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpbmRvd0NvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG4gICAgICAgIHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA9IHN0YXJ0V2luZG93RXZlcnk7XG4gICAgICAgIHRoaXMud2luZG93cyA9IFtuZXcgU3ViamVjdF8xLlN1YmplY3QoKV07XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB2YXIgZmlyc3RXaW5kb3cgPSB0aGlzLndpbmRvd3NbMF07XG4gICAgICAgIGRlc3RpbmF0aW9uLmFkZChmaXJzdFdpbmRvdyk7XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQoZmlyc3RXaW5kb3cpO1xuICAgIH1cbiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBzdGFydFdpbmRvd0V2ZXJ5ID0gKHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA+IDApID8gdGhpcy5zdGFydFdpbmRvd0V2ZXJ5IDogdGhpcy53aW5kb3dTaXplO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICB2YXIgd2luZG93U2l6ZSA9IHRoaXMud2luZG93U2l6ZTtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHZhciBsZW4gPSB3aW5kb3dzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgd2luZG93c1tpXS5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYyA9IHRoaXMuY291bnQgLSB3aW5kb3dTaXplICsgMTtcbiAgICAgICAgaWYgKGMgPj0gMCAmJiBjICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCkge1xuICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCsrdGhpcy5jb3VudCAlIHN0YXJ0V2luZG93RXZlcnkgPT09IDApIHtcbiAgICAgICAgICAgIHZhciB3aW5kb3dfMSA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICAgICAgd2luZG93cy5wdXNoKHdpbmRvd18xKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh3aW5kb3dfMSk7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHdpbmRvd18xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dDb3VudFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3dpbmRvd0NvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gNTcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93VGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivd2luZG93VGltZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpbmRvd1RpbWUgPSB3aW5kb3dUaW1lXzEud2luZG93VGltZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgcGVyaW9kaWNhbGx5XG4gKiBpbiB0aW1lLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGJ1ZmZlclRpbWV9LCBidXQgZW1pdHMgYSBuZXN0ZWRcbiAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgc3RhcnRzIGEgbmV3IHdpbmRvdyBwZXJpb2RpY2FsbHksIGFzXG4gKiBkZXRlcm1pbmVkIGJ5IHRoZSBgd2luZG93Q3JlYXRpb25JbnRlcnZhbGAgYXJndW1lbnQuIEl0IGVtaXRzIGVhY2ggd2luZG93XG4gKiBhZnRlciBhIGZpeGVkIHRpbWVzcGFuLCBzcGVjaWZpZWQgYnkgdGhlIGB3aW5kb3dUaW1lU3BhbmAgYXJndW1lbnQuIFdoZW4gdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgb3IgZW5jb3VudGVycyBhbiBlcnJvciwgdGhlIG91dHB1dCBPYnNlcnZhYmxlXG4gKiBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIElmIGB3aW5kb3dDcmVhdGlvbkludGVydmFsYCBpcyBub3QgcHJvdmlkZWQsIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUgc3RhcnRzIGEgbmV3IHdpbmRvdyB3aGVuIHRoZSBwcmV2aW91cyB3aW5kb3cgb2YgZHVyYXRpb25cbiAqIGB3aW5kb3dUaW1lU3BhbmAgY29tcGxldGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkluIGV2ZXJ5IHdpbmRvdyBvZiAxIHNlY29uZCBlYWNoLCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDApXG4gKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSA1IHNlY29uZHMgc3RhcnQgYSB3aW5kb3cgMSBzZWNvbmQgbG9uZywgYW5kIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50cyBwZXIgd2luZG93PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93VGltZSgxMDAwLCA1MDAwKVxuICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcbiAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgd2luZG93fVxuICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2luZG93VGltZVNwYW4gVGhlIGFtb3VudCBvZiB0aW1lIHRvIGZpbGwgZWFjaCB3aW5kb3cuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dpbmRvd0NyZWF0aW9uSW50ZXJ2YWxdIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBuZXdcbiAqIHdpbmRvd3MuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAqIGludGVydmFscyB0aGF0IGRldGVybWluZSB3aW5kb3cgYm91bmRhcmllcy5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIG9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuICogYXJlIE9ic2VydmFibGVzLlxuICogQG1ldGhvZCB3aW5kb3dUaW1lXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB3aW5kb3dUaW1lKHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAod2luZG93Q3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUaW1lT3BlcmF0b3Iod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy53aW5kb3dUaW1lID0gd2luZG93VGltZTtcbnZhciBXaW5kb3dUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93VGltZVNwYW4gPSB3aW5kb3dUaW1lU3BhbjtcbiAgICAgICAgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsID0gd2luZG93Q3JlYXRpb25JbnRlcnZhbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFdpbmRvd1RpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLndpbmRvd1RpbWVTcGFuLCB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VGltZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgV2luZG93VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhXaW5kb3dUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgd2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy53aW5kb3dUaW1lU3BhbiA9IHdpbmRvd1RpbWVTcGFuO1xuICAgICAgICB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSB3aW5kb3dDcmVhdGlvbkludGVydmFsO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy53aW5kb3dzID0gW107XG4gICAgICAgIGlmICh3aW5kb3dDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gdGhpcy5vcGVuV2luZG93KCk7XG4gICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgd2luZG93OiB3aW5kb3dfMSwgY29udGV4dDogbnVsbCB9O1xuICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IHdpbmRvd1RpbWVTcGFuOiB3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbDogd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0Nsb3NlLCB3aW5kb3dUaW1lU3BhbiwgY2xvc2VTdGF0ZSkpO1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q3JlYXRpb24sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIGNyZWF0aW9uU3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB3aW5kb3dfMiA9IHRoaXMub3BlbldpbmRvdygpO1xuICAgICAgICAgICAgdmFyIHRpbWVTcGFuT25seVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCB3aW5kb3c6IHdpbmRvd18yLCB3aW5kb3dUaW1lU3Bhbjogd2luZG93VGltZVNwYW4gfTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuT25seVN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB2YXIgbGVuID0gd2luZG93cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB3aW5kb3dfMyA9IHdpbmRvd3NbaV07XG4gICAgICAgICAgICBpZiAoIXdpbmRvd18zLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgd2luZG93XzMubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcbiAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHdpbmRvd180ID0gd2luZG93cy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCF3aW5kb3dfNC5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIHdpbmRvd180LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgdGhpcy53aW5kb3dzLnB1c2god2luZG93KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24uYWRkKHdpbmRvdyk7XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93KTtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9O1xuICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aW5kb3dzLnNwbGljZSh3aW5kb3dzLmluZGV4T2Yod2luZG93KSwgMSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VGltZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5mdW5jdGlvbiBkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seShzdGF0ZSkge1xuICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgd2luZG93VGltZVNwYW4gPSBzdGF0ZS53aW5kb3dUaW1lU3Bhbiwgd2luZG93ID0gc3RhdGUud2luZG93O1xuICAgIGlmICh3aW5kb3cpIHtcbiAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIHN0YXRlLndpbmRvdyA9IHN1YnNjcmliZXIub3BlbldpbmRvdygpO1xuICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHdpbmRvd1RpbWVTcGFuKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoV2luZG93Q3JlYXRpb24oc3RhdGUpIHtcbiAgICB2YXIgd2luZG93VGltZVNwYW4gPSBzdGF0ZS53aW5kb3dUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlciwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHN0YXRlLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7XG4gICAgdmFyIHdpbmRvdyA9IHN1YnNjcmliZXIub3BlbldpbmRvdygpO1xuICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuICAgIHZhciBjb250ZXh0ID0geyBhY3Rpb246IGFjdGlvbiwgc3Vic2NyaXB0aW9uOiBudWxsIH07XG4gICAgdmFyIHRpbWVTcGFuU3RhdGUgPSB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIHdpbmRvdzogd2luZG93LCBjb250ZXh0OiBjb250ZXh0IH07XG4gICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDbG9zZSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuU3RhdGUpO1xuICAgIGFjdGlvbi5hZGQoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCk7XG59XG5mdW5jdGlvbiBkaXNwYXRjaFdpbmRvd0Nsb3NlKGFyZykge1xuICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHdpbmRvdyA9IGFyZy53aW5kb3csIGNvbnRleHQgPSBhcmcuY29udGV4dDtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmFjdGlvbiAmJiBjb250ZXh0LnN1YnNjcmlwdGlvbikge1xuICAgICAgICBjb250ZXh0LmFjdGlvbi5yZW1vdmUoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVyLmNsb3NlV2luZG93KHdpbmRvdyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHdpbmRvd1RvZ2dsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivd2luZG93VG9nZ2xlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93VG9nZ2xlID0gd2luZG93VG9nZ2xlXzEud2luZG93VG9nZ2xlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3dpbmRvd1RvZ2dsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9TdWJqZWN0Jyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSBzdGFydGluZyBmcm9tXG4gKiBhbiBlbWlzc2lvbiBmcm9tIGBvcGVuaW5nc2AgYW5kIGVuZGluZyB3aGVuIHRoZSBvdXRwdXQgb2YgYGNsb3NpbmdTZWxlY3RvcmBcbiAqIGVtaXRzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGJ1ZmZlclRvZ2dsZX0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd1RvZ2dsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgdGhhdCBjb250YWluIHRob3NlIGl0ZW1zXG4gKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBiZXR3ZWVuIHRoZSB0aW1lIHdoZW4gdGhlIGBvcGVuaW5nc2BcbiAqIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbSBhbmQgd2hlbiB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBieVxuICogYGNsb3NpbmdTZWxlY3RvcmAgZW1pdHMgYW4gaXRlbS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSBvdGhlciBzZWNvbmQsIGVtaXQgdGhlIGNsaWNrIGV2ZW50cyBmcm9tIHRoZSBuZXh0IDUwMG1zPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd1RvZ2dsZShvcGVuaW5ncywgaSA9PlxuICogICBpICUgMiA/IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKSA6IFJ4Lk9ic2VydmFibGUuZW1wdHkoKVxuICogKS5tZXJnZUFsbCgpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxPPn0gb3BlbmluZ3MgQW4gb2JzZXJ2YWJsZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuICogd2luZG93cy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IE8pOiBPYnNlcnZhYmxlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG4gKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUsXG4gKiB3aGljaCwgd2hlbiBpdCBlbWl0cyAoZWl0aGVyIGBuZXh0YCBvciBgY29tcGxldGVgKSwgc2lnbmFscyB0aGF0IHRoZVxuICogYXNzb2NpYXRlZCB3aW5kb3cgc2hvdWxkIGNvbXBsZXRlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG4gKiBhcmUgT2JzZXJ2YWJsZXMuXG4gKiBAbWV0aG9kIHdpbmRvd1RvZ2dsZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gd2luZG93VG9nZ2xlKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG59XG5leHBvcnRzLndpbmRvd1RvZ2dsZSA9IHdpbmRvd1RvZ2dsZTtcbnZhciBXaW5kb3dUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93VG9nZ2xlT3BlcmF0b3Iob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgIH1cbiAgICBXaW5kb3dUb2dnbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VG9nZ2xlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2luZG93VG9nZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuICAgICAgICB0aGlzLmFkZCh0aGlzLm9wZW5TdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9wZW5pbmdzLCBvcGVuaW5ncykpO1xuICAgIH1cbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICBpZiAoY29udGV4dHMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dHNbaV0ud2luZG93Lm5leHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsO1xuICAgICAgICBpZiAoY29udGV4dHMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07XG4gICAgICAgICAgICAgICAgY29udGV4dC53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIGlmIChjb250ZXh0cykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIGlmIChjb250ZXh0cykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgaWYgKG91dGVyVmFsdWUgPT09IHRoaXMub3BlbmluZ3MpIHtcbiAgICAgICAgICAgIHZhciBjbG9zaW5nU2VsZWN0b3IgPSB0aGlzLmNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNsb3NpbmdTZWxlY3RvcikoaW5uZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dfMSA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7IHdpbmRvdzogd2luZG93XzEsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24uY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQod2luZG93XzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2Yob3V0ZXJWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXIpIHtcbiAgICAgICAgaWYgKGlubmVyICE9PSB0aGlzLm9wZW5TdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VXaW5kb3codGhpcy5jb250ZXh0cy5pbmRleE9mKGlubmVyLmNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuICAgICAgICB2YXIgd2luZG93ID0gY29udGV4dC53aW5kb3csIHN1YnNjcmlwdGlvbiA9IGNvbnRleHQuc3Vic2NyaXB0aW9uO1xuICAgICAgICBjb250ZXh0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VG9nZ2xlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dUb2dnbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci93aW5kb3dUb2dnbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB3aW5kb3dXaGVuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aW5kb3dXaGVuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93V2hlbiA9IHdpbmRvd1doZW5fMS53aW5kb3dXaGVuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93V2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNTc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSB1c2luZyBhXG4gKiBmYWN0b3J5IGZ1bmN0aW9uIG9mIGNsb3NpbmcgT2JzZXJ2YWJsZXMgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gc3RhcnQgYSBuZXdcbiAqIHdpbmRvdy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJXaGVufSwgYnV0IGVtaXRzIGEgbmVzdGVkXG4gKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIGNvbm5lY3RlZCwgbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MuXG4gKiBJdCBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIG9wZW5zIGEgbmV3IG9uZSB3aGVuZXZlciB0aGUgT2JzZXJ2YWJsZVxuICogcHJvZHVjZWQgYnkgdGhlIHNwZWNpZmllZCBgY2xvc2luZ1NlbGVjdG9yYCBmdW5jdGlvbiBlbWl0cyBhbiBpdGVtLiBUaGUgZmlyc3RcbiAqIHdpbmRvdyBpcyBvcGVuZWQgaW1tZWRpYXRlbHkgd2hlbiBzdWJzY3JpYmluZyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IHRoZSBmaXJzdCB0d28gY2xpY2tzIGV2ZW50cyBpbiBldmVyeSB3aW5kb3cgb2YgWzEtNV0gcmFuZG9tIHNlY29uZHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrc1xuICogICAud2luZG93V2hlbigoKSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAgKyBNYXRoLnJhbmRvbSgpICogNDAwMCkpXG4gKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayBidWZmZXJXaGVufVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIChvbiBlaXRoZXIgYG5leHRgIG9yXG4gKiBgY29tcGxldGVgKSB3aGVuIHRvIGNsb3NlIHRoZSBwcmV2aW91cyB3aW5kb3cgYW5kIHN0YXJ0IGEgbmV3IG9uZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIG9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuICogYXJlIE9ic2VydmFibGVzLlxuICogQG1ldGhvZCB3aW5kb3dXaGVuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB3aW5kb3dXaGVuKGNsb3NpbmdTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd09wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikpO1xufVxuZXhwb3J0cy53aW5kb3dXaGVuID0gd2luZG93V2hlbjtcbnZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93T3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgIH1cbiAgICBXaW5kb3dPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBXaW5kb3dTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2luZG93U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICB0aGlzLm9wZW5XaW5kb3coKTtcbiAgICB9XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLm9wZW5XaW5kb3coaW5uZXJTdWIpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdyhpbm5lclN1Yik7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlQ2xvc2luZ05vdGlmaWNhdGlvbigpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuV2luZG93ID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIGlmIChpbm5lclN1YiA9PT0gdm9pZCAwKSB7IGlubmVyU3ViID0gbnVsbDsgfVxuICAgICAgICBpZiAoaW5uZXJTdWIpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgICAgIGlubmVyU3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZXaW5kb3cgPSB0aGlzLndpbmRvdztcbiAgICAgICAgaWYgKHByZXZXaW5kb3cpIHtcbiAgICAgICAgICAgIHByZXZXaW5kb3cuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2luZG93ID0gdGhpcy53aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHdpbmRvdyk7XG4gICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY2xvc2luZ1NlbGVjdG9yKSgpO1xuICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG4gICAgICAgICAgICB0aGlzLmFkZCh3aW5kb3cpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93U3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDU3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHdpdGhMYXRlc3RGcm9tXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb21fMS53aXRoTGF0ZXN0RnJvbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGhMYXRlc3RGcm9tLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gNTc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQ29tYmluZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGVcbiAqIHdob3NlIHZhbHVlcyBhcmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2gsIG9ubHkgd2hlbiB0aGVcbiAqIHNvdXJjZSBlbWl0cy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGl0XG4gKiBjb21wdXRlcyBhIGZvcm11bGEgdXNpbmcgdGhhdCB2YWx1ZSBwbHVzIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gb3RoZXIgaW5wdXRcbiAqIE9ic2VydmFibGVzLCB0aGVuIGVtaXRzIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3dpdGhMYXRlc3RGcm9tLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGB3aXRoTGF0ZXN0RnJvbWAgY29tYmluZXMgZWFjaCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSAodGhlXG4gKiBpbnN0YW5jZSkgd2l0aCB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIHRoZSBvdGhlciBpbnB1dCBPYnNlcnZhYmxlcyBvbmx5IHdoZW5cbiAqIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZSwgb3B0aW9uYWxseSB1c2luZyBhIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBkZXRlcm1pbmVcbiAqIHRoZSB2YWx1ZSB0byBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gQWxsIGlucHV0IE9ic2VydmFibGVzIG11c3RcbiAqIGVtaXQgYXQgbGVhc3Qgb25lIHZhbHVlIGJlZm9yZSB0aGUgb3V0cHV0IE9ic2VydmFibGUgd2lsbCBlbWl0IGEgdmFsdWUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2sgZXZlbnQsIGVtaXQgYW4gYXJyYXkgd2l0aCB0aGUgbGF0ZXN0IHRpbWVyIGV2ZW50IHBsdXMgdGhlIGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpdGhMYXRlc3RGcm9tKHRpbWVyKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb2plY3RdIFByb2plY3Rpb24gZnVuY3Rpb24gZm9yIGNvbWJpbmluZyB2YWx1ZXNcbiAqIHRvZ2V0aGVyLiBSZWNlaXZlcyBhbGwgdmFsdWVzIGluIG9yZGVyIG9mIHRoZSBPYnNlcnZhYmxlcyBwYXNzZWQsIHdoZXJlIHRoZVxuICogZmlyc3QgcGFyYW1ldGVyIGlzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuIChlLmcuXG4gKiBgYS53aXRoTGF0ZXN0RnJvbShiLCBjLCAoYTEsIGIxLCBjMSkgPT4gYTEgKyBiMSArIGMxKWApLiBJZiB0aGlzIGlzIG5vdFxuICogcGFzc2VkLCBhcnJheXMgd2lsbCBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbnB1dCBPYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb21cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgd2l0aExhdGVzdEZyb21cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHdpdGhMYXRlc3RGcm9tKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHByb2plY3Q7XG4gICAgaWYgKHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvamVjdCA9IGFyZ3MucG9wKCk7XG4gICAgfVxuICAgIHZhciBvYnNlcnZhYmxlcyA9IGFyZ3M7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2l0aExhdGVzdEZyb21PcGVyYXRvcihvYnNlcnZhYmxlcywgcHJvamVjdCkpO1xufVxuZXhwb3J0cy53aXRoTGF0ZXN0RnJvbSA9IHdpdGhMYXRlc3RGcm9tO1xuLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbnZhciBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yKG9ic2VydmFibGVzLCBwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlcztcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICB9XG4gICAgV2l0aExhdGVzdEZyb21PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlcywgdGhpcy5wcm9qZWN0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9ic2VydmFibGVzLCBwcm9qZWN0KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2YWJsZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRvUmVzcG9uZC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG4gICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuICAgICAgICB2YXIgdG9SZXNwb25kID0gdGhpcy50b1Jlc3BvbmQ7XG4gICAgICAgIGlmICh0b1Jlc3BvbmQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdG9SZXNwb25kLnNwbGljZShmb3VuZCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIG5vb3BcbiAgICB9O1xuICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudG9SZXNwb25kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbdmFsdWVdLmNvbmNhdCh0aGlzLnZhbHVlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UHJvamVjdChhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJvamVjdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aXRoTGF0ZXN0RnJvbS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gNTc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgemlwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci96aXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS56aXAgPSB6aXBfMS56aXBQcm90bztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci96aXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1NzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB6aXBBbGxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3ppcEFsbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnppcEFsbCA9IHppcEFsbF8xLnppcEFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcEFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci96aXBBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA1ODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHppcF8xID0gcmVxdWlyZSgnLi96aXAnKTtcbi8qKlxuICogQHBhcmFtIHByb2plY3RcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCB6aXBBbGxcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHppcEFsbChwcm9qZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgemlwXzEuWmlwT3BlcmF0b3IocHJvamVjdCkpO1xufVxuZXhwb3J0cy56aXBBbGwgPSB6aXBBbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD16aXBBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci96aXBBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA1ODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4vU3Vic2NyaWJlcicpO1xudmFyIE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuT3BlcmF0b3IgPSBPcGVyYXRvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvT3BlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSA1ODJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCB7Q29tcG9uZW50LCBIb3N0QmluZGluZywgSG9zdExpc3RlbmVyLCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUm91dGVzLCBSb3V0ZVRyZWUsIFJPVVRFUl9ESVJFQ1RJVkVTfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5cclxuaW1wb3J0IHtBcHBTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9hcHAuc2VydmljZSc7XHJcbmltcG9ydCB7UmVmZXJlbmNlU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvcmVmZXJlbmNlLnNlcnZpY2UnO1xyXG5pbXBvcnQge1N0YWZmU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvc3RhZmYuc2VydmljZSc7XHJcblxyXG5pbXBvcnQge05CTm90aWZ5Q29tcG9uZW50fSBmcm9tICcuL25iLW5vdGlmeSc7XHJcbmltcG9ydCB7TmF2Q29tcG9uZW50fSBmcm9tICcuL25hdic7XHJcbmltcG9ydCB7UHJvamVjdHNDb21wb25lbnR9IGZyb20gJy4vcHJvamVjdHMnO1xyXG5pbXBvcnQge1Byb2plY3RDb21wb25lbnR9IGZyb20gJy4vcHJvamVjdCc7XHJcbmltcG9ydCB7VGFza3NDb21wb25lbnR9IGZyb20gJy4vdGFza3MnO1xyXG5pbXBvcnQge1Rhc2tDb21wb25lbnR9IGZyb20gJy4vdGFzayc7XHJcbmltcG9ydCB7VXNlclByb2ZpbGVDb21wb25lbnR9IGZyb20gJy4vdXNlci1wcm9maWxlJztcclxuaW1wb3J0IHtMb2dpbkNvbXBvbmVudH0gZnJvbSAnLi9sb2dpbic7XHJcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi4vbW9kZWxzL3VzZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3Byb2plY3QtYXBwJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuLi90ZW1wbGF0ZXMvYXBwLmh0bWwnKSxcclxuICAgIGRpcmVjdGl2ZXM6IFtST1VURVJfRElSRUNUSVZFUywgTmF2Q29tcG9uZW50LCBOQk5vdGlmeUNvbXBvbmVudF1cclxufSlcclxuXHJcbkBSb3V0ZXMoW1xyXG4gICAgeyBwYXRoOiAnL3Rhc2tzLzpmb3InLCBjb21wb25lbnQ6IFRhc2tzQ29tcG9uZW50IH0sXHJcbiAgICB7IHBhdGg6ICcvdGFza3MnLCBjb21wb25lbnQ6IFRhc2tzQ29tcG9uZW50IH0sXHJcbiAgICB7IHBhdGg6ICcvdGFzay86aWQnLCBjb21wb25lbnQ6IFRhc2tDb21wb25lbnQgfSxcclxuICAgIHsgcGF0aDogJy9wcm9qZWN0cy86aWQnLCBjb21wb25lbnQ6IFByb2plY3RDb21wb25lbnQgfSxcclxuICAgIHsgcGF0aDogJy9wcm9qZWN0cycsIGNvbXBvbmVudDogUHJvamVjdHNDb21wb25lbnQgfSxcclxuICAgIHsgcGF0aDogJy91c2VyLXByb2ZpbGUnLCBjb21wb25lbnQ6IFVzZXJQcm9maWxlQ29tcG9uZW50IH0sXHJcbiAgICB7IHBhdGg6ICcvbG9naW4nLCBjb21wb25lbnQ6IExvZ2luQ29tcG9uZW50IH1cclxuXSlcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHAgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgbG9nZ2VkVXNlcjogVXNlcjtcclxuICAgIEhFQURFUl9USVRMRTogc3RyaW5nID0gXCJQcm9qZWN0c1wiO1xyXG4gICAgaXNOYXZDb2xsYXBzZWQ6IEJvb2xlYW47XHJcbiAgICBpc1NlYXJjaE9wZW46IEJvb2xlYW47XHJcbiAgICBpc01vYmlsZURldmljZTogQm9vbGVhbjtcclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQudGFyZ2V0J10pIHJlc2l6ZSh3aW5kb3cpIHsgdGhpcy5vblJlc2l6ZSh3aW5kb3cpOyB9O1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5waG9uZScpIGdldCBkZXZpY2UoKSB7IHJldHVybiB0aGlzLmlzTW9iaWxlRGV2aWNlOyB9O1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zaWRlLW5hdi10b2dnbGUnKSBnZXQgdG9nZ2xlTmF2VmlzaWJsZSgpIHsgcmV0dXJuIHRoaXMuaXNOYXZDb2xsYXBzZWQ7IH07XHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNlYXJjaC1vcGVuJykgZ2V0IHRvZ2dsZVNlYXJjaCgpIHsgcmV0dXJuIHRoaXMuaXNTZWFyY2hPcGVuOyB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgX3JvdXRlcjogUm91dGVyLFxyXG4gICAgICAgIHByaXZhdGUgX2FwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfcmVmZXJlbmNlU2VydmljZTogUmVmZXJlbmNlU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIF9zdGFmZlNlcnZpY2U6IFN0YWZmU2VydmljZVxyXG4gICAgKSB7IH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLmlzU2VhcmNoT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNOYXZDb2xsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxvZ2dlZFVzZXIgPSBuZXcgVXNlcigpO1xyXG4gICAgICAgIHRoaXMuaXNNb2JpbGVEZXZpY2UgPSB0aGlzLmlzTW9iaWxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FwcFNlcnZpY2UuZ2V0VHJhbnNsYXRpb25zKCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICBjYXB0aW9ucyA9PiBjb25zb2xlLmxvZyhjYXB0aW9ucyksXHJcbiAgICAgICAgICAgIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL2xvZ2luJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVOYXYoKSB7XHJcbiAgICAgICAgdGhpcy5pc05hdkNvbGxhcHNlZCA9ICF0aGlzLmlzTmF2Q29sbGFwc2VkO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVOYXYoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuaXNOYXZDb2xsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzU2VhcmNoT3BlbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHNlYXJjaFRvZ2dsZSgpIHtcclxuICAgICAgICB0aGlzLmlzU2VhcmNoT3BlbiA9ICF0aGlzLmlzU2VhcmNoT3BlbjtcclxuICAgIH1cclxuXHJcbiAgICBsb2dvdXQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vIHRoaXMubG9nZ2VkVXNlciA9IG51bGw7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnTG9nb3V0JztcclxuICAgIH1cclxuXHJcbiAgICBnb0JhY2soKSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc01vYmlsZSgpIHtcclxuICAgICAgICByZXR1cm4gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXplKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMuaXNNb2JpbGVEZXZpY2UgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0IHx8IHRoaXMuaXNNb2JpbGUoKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb21wb25lbnRzL2FwcC50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi4vbW9kZWxzL3VzZXInO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQXBwU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBfaHR0cDogSHR0cFxyXG4gICAgKSB7IH1cclxuXHJcbiAgICBnZXRUcmFuc2xhdGlvbnMoKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlciA9IHsgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcbiAgICAgICAgbGV0IHVybCA9ICdwP2lkPWNvbW1vbi1jYXB0aW9ucyc7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh1cmwsIGhlYWRlcilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkuY2FwdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5hdigpIHtcclxuICAgICAgICBsZXQgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSkgfTtcclxuICAgICAgICBsZXQgdXJsID0gJ3A/aWQ9b3V0bGluZSc7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh1cmwsIGhlYWRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlcnMoKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlciA9IHsgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcbiAgICAgICAgbGV0IHVybCA9ICdwP2lkPXVzZXJzJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZ2V0KHVybCwgaGVhZGVyKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3QpXHJcbiAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBVc2VyW10pID0+IHJlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVc2VyUHJvZmlsZSh1c2VyOiBVc2VyKSB7XHJcbiAgICAgICAgLy9cclxuICAgIH1cclxuXHJcbiAgICBsb2dvdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZGVsZXRlKCcvJyk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvc2VydmljZXMvYXBwLnNlcnZpY2UudHNcbiAqKi8iLCJpbXBvcnQge0luamVjdGFibGUsIEluamVjdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7SHR0cCwgSGVhZGVyc30gZnJvbSAnQGFuZ3VsYXIvaHR0cCc7XHJcblxyXG5pbXBvcnQge1RhZ30gZnJvbSAnLi4vbW9kZWxzL3RhZyc7XHJcbmltcG9ydCB7VGFza1R5cGV9IGZyb20gJy4uL21vZGVscy90YXNrLXR5cGUnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUmVmZXJlbmNlU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwXHJcbiAgICApIHsgfVxyXG5cclxuICAgIGdldFRhZ3MoKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlciA9IHsgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pIH07XHJcbiAgICAgICAgbGV0IHVybCA9ICcvUmVmZXJlbmNlL3A/aWQ9dGFncyc7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgaGVhZGVyKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3QpXHJcbiAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBUYWdbXSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhc2tUeXBlcygpIHtcclxuICAgICAgICBsZXQgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSkgfTtcclxuICAgICAgICBsZXQgdXJsID0gJy9SZWZlcmVuY2UvcD9pZD10YXNrdHlwZXMnO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIGhlYWRlcilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0KVxyXG4gICAgICAgICAgICAubWFwKChyZXNwb25zZTogVGFza1R5cGVbXSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL3NlcnZpY2VzL3JlZmVyZW5jZS5zZXJ2aWNlLnRzXG4gKiovIiwiaW1wb3J0IHtJbmplY3RhYmxlLCBJbmplY3R9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0h0dHAsIEhlYWRlcnN9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xyXG5cclxuaW1wb3J0IHtPcmdhbml6YXRpb259IGZyb20gJy4uL21vZGVscy9vcmdhbml6YXRpb24nO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU3RhZmZTZXJ2aWNlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBcclxuICAgICkgeyB9XHJcblxyXG4gICAgZ2V0T3JnYW5pemF0aW9ucygpIHtcclxuICAgICAgICBsZXQgaGVhZGVyID0geyBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicgfSkgfTtcclxuICAgICAgICBsZXQgdXJsID0gJy9TdGFmZi9wP2lkPWdldC1vcmdhbml6YXRpb25zJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsLCBoZWFkZXIpXHJcbiAgICAgICAgICAgIC5tYXAocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpLm9iamVjdHNbMF0ubGlzdClcclxuICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IE9yZ2FuaXphdGlvbltdKSA9PiByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvc2VydmljZXMvc3RhZmYuc2VydmljZS50c1xuICoqLyIsImltcG9ydCB7Q29tcG9uZW50LCBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5jbGFzcyBfTm90eSB7XHJcbiAgICB0eXBlID0gJyc7XHJcbiAgICBtZXNzYWdlID0gJyc7XHJcbiAgICB2aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IodHlwZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIHZpc2libGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgIH1cclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ25iLW5vdGlmeScsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJuYi1ub3RpZnlcIiAqbmdJZj1cIm5vdGlmeUxpc3RcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5iLW5vdGlmeS1lbnRyeS17e25vdGlmeS50eXBlfX1cIiBzdHlsZT1cImRpc3BsYXk6YmxvY2s7XCIgKm5nRm9yPVwibGV0IG5vdGlmeSBvZiBub3RpZnlMaXN0XCI+e3tub3RpZnkubWVzc2FnZX19PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOQk5vdGlmeUNvbXBvbmVudCB7XHJcbiAgICBub3RpZnlMaXN0OiBfTm90eVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5ub3RpZnlMaXN0LnB1c2gobmV3IF9Ob3R5KCdpbmZvJywgJ2hlbGxvJywgdHJ1ZSkpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2NvbXBvbmVudHMvbmItbm90aWZ5LnRzXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUk9VVEVSX0RJUkVDVElWRVN9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcblxyXG5pbXBvcnQge0FwcFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL2FwcC5zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbbmF2XScsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vdGVtcGxhdGVzL25hdi5odG1sJyksXHJcbiAgICBkaXJlY3RpdmVzOiBbUk9VVEVSX0RJUkVDVElWRVNdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgTmF2Q29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgX3JvdXRlcjogUm91dGVyLFxyXG4gICAgICAgIHByaXZhdGUgX2FwcFNlcnZpY2U6IEFwcFNlcnZpY2VcclxuICAgICkgeyB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy9uYXYudHNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHVsPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ2luYm94J11cXFwiIGNsYXNzPVxcXCJuYXYtbGlua1xcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWluYm94XFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3snaW5ib3gnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAndG9kYXknXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2FsZW5kYXItb1xcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J3RvZGF5J319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ3dlZWsnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2FsZW5kYXJcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eyd3ZWVrJ319PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICA8YSBbcm91dGVyTGlua109XFxcIlsnL3Rhc2tzJywgJ2FsbCddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1kYXRhYmFzZVxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7J2FsbCd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpPlxcclxcbiAgICAgICAgPGEgW3JvdXRlckxpbmtdPVxcXCJbJy90YXNrcycsICdjb21wbGV0ZWQnXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2hlY2stc3F1YXJlLW9cXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydjb21wbGV0ZWQnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT5cXHJcXG4gICAgICAgIDxhIFtyb3V0ZXJMaW5rXT1cXFwiWycvdGFza3MnLCAnbXknXVxcXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtdGlja2V0XFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPHNwYW4+e3snbXlfdGFza3MnfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaSBjbGFzcz1cXFwiZGl2aWRlclxcXCI+PC9saT5cXHJcXG4gICAgPGxpPlxcclxcbiAgICAgICAgPGEgW3JvdXRlckxpbmtdPVxcXCJbJy9wcm9qZWN0cyddXFxcIiBjbGFzcz1cXFwibmF2LWxpbmtcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS1wdXp6bGUtcGllY2VcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8c3Bhbj57eydwcm9qZWN0cyd9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvYT5cXHJcXG4gICAgPC9saT5cXHJcXG48L3VsPlxcclxcblwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2FwcC90ZW1wbGF0ZXMvbmF2Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA1ODlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCB7Q29tcG9uZW50LCBJbmplY3R9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUm91dGVzfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge0RhdGVQaXBlfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5cclxuaW1wb3J0IHtQcm9qZWN0fSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcbmltcG9ydCB7UHJvamVjdFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3Byb2plY3Quc2VydmljZSc7XHJcbmltcG9ydCB7RGF0ZUZvcm1hdFBpcGV9IGZyb20gJy4uL3BpcGVzL2RhdGUtZm9ybWF0LnBpcGUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ1twcm9qZWN0c10nLFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4uL3RlbXBsYXRlcy9wcm9qZWN0cy5odG1sJyksXHJcbiAgICBwaXBlczogW0RhdGVQaXBlXVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RzQ29tcG9uZW50IHtcclxuICAgIHByb2plY3RzOiBQcm9qZWN0W107XHJcbiAgICBzZWxlY3RlZFByb2plY3RzOiBQcm9qZWN0W107XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBwcm9qZWN0U2VydmljZTogUHJvamVjdFNlcnZpY2VcclxuICAgICkge1xyXG4gICAgICAgIHByb2plY3RTZXJ2aWNlLmdldFByb2plY3RzKCkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICBwcm9qZWN0cyA9PiB0aGlzLnByb2plY3RzID0gcHJvamVjdHMsXHJcbiAgICAgICAgICAgIGVycm9yUmVzcG9uc2UgPT4gdGhpcy5oYW5kbGVYaHJFcnJvcihlcnJvclJlc3BvbnNlKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9zZVJlY29yZCgpIHtcclxuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvcHJvamVjdHMnLCAnbmV3J10pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVByb2plY3QoKSB7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0U2VydmljZS5kZWxldGVQcm9qZWN0KHRoaXMuc2VsZWN0ZWRQcm9qZWN0cykuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlWGhyRXJyb3IoZXJyb3JSZXNwb25zZSkge1xyXG4gICAgICAgIGlmIChlcnJvclJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJy9sb2dpbiddKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy9wcm9qZWN0cy50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmltcG9ydCB7UHJvamVjdH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5pbXBvcnQge3NlcmlhbGl6ZU9ian0gZnJvbSAnLi4vdXRpbHMvb2JqLXV0aWxzJztcclxuXHJcbmNvbnN0IFZJRVdfVVJMID0gJ3A/aWQ9cHJvamVjdC12aWV3JztcclxuY29uc3QgRk9STV9VUkwgPSAncD9pZD1wcm9qZWN0LWZvcm0nO1xyXG5jb25zdCBIRUFERVIgPSB7XHJcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH0pXHJcbn07XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0U2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBfaHR0cDogSHR0cFxyXG4gICAgKSB7IH1cclxuXHJcbiAgICBnZXRQcm9qZWN0cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQoVklFV19VUkwsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkub2JqZWN0c1swXS5saXN0KVxyXG4gICAgICAgICAgICAubWFwKChyZXNwb25zZTogUHJvamVjdFtdKSA9PiByZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvamVjdEJ5SWQocHJvamVjdElkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQoRk9STV9VUkwgKyAnJmRvY2lkPScgKyBwcm9qZWN0SWQsIEhFQURFUilcclxuICAgICAgICAgICAgLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkub2JqZWN0c1sxXSlcclxuICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFByb2plY3QpID0+IHJlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlUHJvamVjdChwcm9qZWN0OiBQcm9qZWN0KSB7XHJcbiAgICAgICAgbGV0IHVybCA9IEZPUk1fVVJMICsgKHByb2plY3QuaWQgPyAnJmRvY2lkPScgKyBwcm9qZWN0LmlkIDogJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodXJsLCB0aGlzLnNlcmlhbGl6ZVByb2plY3QocHJvamVjdCksIEhFQURFUik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlUHJvamVjdChwcm9qZWN0czogUHJvamVjdFtdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZGVsZXRlKFZJRVdfVVJMKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgc2VyaWFsaXplUHJvamVjdChwcm9qZWN0OiBQcm9qZWN0KTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gc2VyaWFsaXplT2JqKHtcclxuICAgICAgICAgICAgbmFtZTogcHJvamVjdC5uYW1lLFxyXG4gICAgICAgICAgICBzdGF0dXM6IHByb2plY3Quc3RhdHVzLFxyXG4gICAgICAgICAgICBjdXN0b21lcjogcHJvamVjdC5jdXN0b21lciB8fCAnJyxcclxuICAgICAgICAgICAgbWFuYWdlcjogcHJvamVjdC5tYW5hZ2VyIHx8IDAsXHJcbiAgICAgICAgICAgIHByb2dyYW1tZXI6IHByb2plY3QucHJvZ3JhbW1lciB8fCAwLFxyXG4gICAgICAgICAgICB0ZXN0ZXI6IHByb2plY3QudGVzdGVyIHx8IDAsXHJcbiAgICAgICAgICAgIG9ic2VydmVyczogQXJyYXkuaXNBcnJheShwcm9qZWN0Lm9ic2VydmVycykgPyBwcm9qZWN0Lm9ic2VydmVycy5qb2luKCcsJykgOiAnJyxcclxuICAgICAgICAgICAgY29tbWVudDogcHJvamVjdC5jb21tZW50LFxyXG4gICAgICAgICAgICBmaW5pc2hfZGF0ZTogcHJvamVjdC5maW5pc2hEYXRlID8gcHJvamVjdC5maW5pc2hEYXRlLnRvU3RyaW5nKCkgOiAnJyxcclxuICAgICAgICAgICAgYXR0YWNobWVudHM6IHByb2plY3QuYXR0YWNobWVudHMgPyBwcm9qZWN0LmF0dGFjaG1lbnRzLm1hcChpdCA9PiBpdC5pZCkuam9pbignLCcpIDogJydcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9zZXJ2aWNlcy9wcm9qZWN0LnNlcnZpY2UudHNcbiAqKi8iLCJleHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplT2JqKG9iaikge1xyXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iaikge1xyXG4gICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwcm9wZXJ0eSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3Byb3BlcnR5XSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQuam9pbignJicpO1xyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL3V0aWxzL29iai11dGlscy50c1xuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgIHt7J3Byb2plY3RzJ319XFxyXFxuICAgIDwvaDE+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY29tcG9zZVJlY29yZCgpXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyduZXdfcHJvamVjdCd9fVxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInZpZXcgdmlldy1wcm9qZWN0XFxcIj5cXHJcXG4gICAgICAgIDxoZWFkZXIgY2xhc3M9XFxcImVudHJpZXMtaGVhZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZC13cmFwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBkYXRhLXRvZ2dsZT1cXFwiZG9jaWRcXFwiIGNsYXNzPVxcXCJhbGxcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWNhcHRpb25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1wcm9qZWN0LW5hbWVcXFwiPnt7J25hbWUnfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9oZWFkZXI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyaWVzXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVxcXCIhcHJvamVjdHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydsb2FkaW5nJ319XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktd3JhcFxcXCIgKm5nRm9yPVxcXCJsZXQgcHJvamVjdCBvZiBwcm9qZWN0c1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cXFwie3twcm9qZWN0LmlkfX1cXFwiIGNsYXNzPVxcXCJlbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImVudHJ5LXNlbGVjdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJkb2NpZFxcXCIgdmFsdWU9XFxcInt7cHJvamVjdC5pZH19XFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJlbnRyeS1saW5rXFxcIiBbcm91dGVyTGlua109XFxcIlsnL3Byb2plY3RzJywgcHJvamVjdC5pZF1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWZpZWxkc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1wcm9qZWN0LW5hbWVcXFwiPnt7cHJvamVjdC5uYW1lfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1wcm9qZWN0LWN1c3RvbWVyXFxcIj57e3Byb2plY3QuY3VzdG9tZXI/Lm5hbWV9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LXByb2plY3QtY29tbWVudFxcXCI+e3twcm9qZWN0LmNvbW1lbnR9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LWRhdGVcXFwiPnt7cHJvamVjdC5maW5pc2hEYXRlIHwgZGF0ZTonZGQuTU0ueSd9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL3RlbXBsYXRlcy9wcm9qZWN0cy5odG1sXG4gKiogbW9kdWxlIGlkID0gNTkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQge0NvbXBvbmVudCwgSW5qZWN0LCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUm91dGVTZWdtZW50fSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge0Zvcm1CdWlsZGVyLCBWYWxpZGF0b3JzLCBDb250cm9sR3JvdXAsIENvbnRyb2wsIEZPUk1fRElSRUNUSVZFU30gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuXHJcbmltcG9ydCB7QXBwU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvYXBwLnNlcnZpY2UnO1xyXG5pbXBvcnQge1Byb2plY3QsIFByb2plY3RTdGF0dXNUeXBlfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcbmltcG9ydCB7UHJvamVjdFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3Byb2plY3Quc2VydmljZSc7XHJcbmltcG9ydCB7U3RhZmZTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9zdGFmZi5zZXJ2aWNlJztcclxuaW1wb3J0IHtPcmdhbml6YXRpb259IGZyb20gJy4uL21vZGVscy9vcmdhbml6YXRpb24nO1xyXG5pbXBvcnQge1VzZXJ9IGZyb20gJy4uL21vZGVscy91c2VyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbcHJvamVjdF0nLFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4uL3RlbXBsYXRlcy9wcm9qZWN0Lmh0bWwnKSxcclxuICAgIGRpcmVjdGl2ZXM6IFtGT1JNX0RJUkVDVElWRVNdLFxyXG4gICAgcHJvdmlkZXJzOiBbRm9ybUJ1aWxkZXJdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdENvbXBvbmVudCB7XHJcbiAgICBwcm9qZWN0OiBQcm9qZWN0O1xyXG4gICAgZm9ybTogQ29udHJvbEdyb3VwO1xyXG4gICAgdXNlcnM6IFVzZXJbXTtcclxuICAgIGN1c3RvbWVyczogT3JnYW5pemF0aW9uW107XHJcbiAgICBzdGF0dXNPcHRpb25zID0gUHJvamVjdFN0YXR1c1R5cGU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVTZWdtZW50OiBSb3V0ZVNlZ21lbnQsXHJcbiAgICAgICAgcHJpdmF0ZSBfZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyLFxyXG4gICAgICAgIHByaXZhdGUgX2FwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfcHJvamVjdFNlcnZpY2U6IFByb2plY3RTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgX3N0YWZmU2VydmljZTogU3RhZmZTZXJ2aWNlXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmZvcm0gPSBfZm9ybUJ1aWxkZXIuZ3JvdXAoe1xyXG4gICAgICAgICAgICBuYW1lOiBbJycsIFZhbGlkYXRvcnMucmVxdWlyZWRdLFxyXG4gICAgICAgICAgICBzdGF0dXM6IFsnJ10sXHJcbiAgICAgICAgICAgIGN1c3RvbWVyOiBbJyddLFxyXG4gICAgICAgICAgICBtYW5hZ2VyOiBbJyddLFxyXG4gICAgICAgICAgICBwcm9ncmFtbWVyOiBbJyddLFxyXG4gICAgICAgICAgICB0ZXN0ZXI6IFsnJ10sXHJcbiAgICAgICAgICAgIG9ic2VydmVyczogWycnXSxcclxuICAgICAgICAgICAgY29tbWVudDogWycnXSxcclxuICAgICAgICAgICAgZmluaXNoRGF0ZTogWycnXSxcclxuICAgICAgICAgICAgYXR0YWNobWVudHM6IFsnJ11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3JvdXRlU2VnbWVudC5nZXRQYXJhbSgnaWQnKSAhPT0gJ25ldycpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvamVjdFNlcnZpY2UuZ2V0UHJvamVjdEJ5SWQodGhpcy5fcm91dGVTZWdtZW50LmdldFBhcmFtKCdpZCcpKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0ID0+IHRoaXMucHJvamVjdCA9IHByb2plY3QsXHJcbiAgICAgICAgICAgICAgICBlcnJvclJlc3BvbnNlID0+IHRoaXMuaGFuZGxlWGhyRXJyb3IoZXJyb3JSZXNwb25zZSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByb2plY3QgPSBuZXcgUHJvamVjdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3N0YWZmU2VydmljZS5nZXRPcmdhbml6YXRpb25zKCkuc3Vic2NyaWJlKG9yZ3MgPT4gdGhpcy5jdXN0b21lcnMgPSBvcmdzKTtcclxuICAgICAgICBfYXBwU2VydmljZS5nZXRVc2VycygpLnN1YnNjcmliZSh1c2VycyA9PiB0aGlzLnVzZXJzID0gdXNlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVQcm9qZWN0KCkge1xyXG4gICAgICAgIHRoaXMuX3Byb2plY3RTZXJ2aWNlLnNhdmVQcm9qZWN0KHRoaXMucHJvamVjdCkuc3Vic2NyaWJlKHJlc3BvbnNlID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL3Byb2plY3RzJ10pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAoZXJyb3JSZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvbG9naW4nXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2NvbXBvbmVudHMvcHJvamVjdC50c1xuICoqLyIsImltcG9ydCB7QXR0YWNobWVudH0gZnJvbSAnLi9hdHRhY2htZW50JztcclxuaW1wb3J0IHtPcmdhbml6YXRpb259IGZyb20gJy4vb3JnYW5pemF0aW9uJztcclxuaW1wb3J0IHtVc2VyfSBmcm9tICcuL3VzZXInO1xyXG5cclxuZXhwb3J0IGNvbnN0IFByb2plY3RTdGF0dXNUeXBlID0gW1xyXG4gICAgJ0RSQUZUJyxcclxuICAgICdQUk9DRVNTRUQnLFxyXG4gICAgJ0ZJTklTSEVEJ1xyXG5dO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGF1dGhvcjogVXNlcjtcclxuICAgIHJlZ0RhdGU6IERhdGU7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICAgIHdhc1JlYWQ6IGJvb2xlYW47XHJcblxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgICBjdXN0b21lcjogc3RyaW5nO1xyXG4gICAgbWFuYWdlcjogbnVtYmVyO1xyXG4gICAgcHJvZ3JhbW1lcjogbnVtYmVyO1xyXG4gICAgdGVzdGVyOiBudW1iZXI7XHJcbiAgICBvYnNlcnZlcnM6IG51bWJlcltdO1xyXG4gICAgY29tbWVudDogc3RyaW5nO1xyXG4gICAgZmluaXNoRGF0ZTogRGF0ZTtcclxuICAgIGF0dGFjaG1lbnRzOiBBdHRhY2htZW50W107XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvbW9kZWxzL3Byb2plY3QudHNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiAqbmdJZj1cXFwiIXByb2plY3RcXFwiPlxcclxcbiAgICB7eydsb2FkaW5nJ319XFxyXFxuPC9kaXY+XFxyXFxuPGZvcm0gY2xhc3M9XFxcImZvcm1cXFwiIFtuZ0Zvcm1Nb2RlbF09XFxcImZvcm1cXFwiICpuZ0lmPVxcXCJwcm9qZWN0XFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLWJhY2tcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAge3sncHJvamVjdCd9fVxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5XFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIFtkaXNhYmxlZF09XFxcIiFmb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJzYXZlUHJvamVjdCgpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyduYW1lJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLm5hbWUudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QubmFtZVxcXCIgbmdDb250cm9sPVxcXCJuYW1lXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5uYW1lLnZhbGlkIHx8IGZvcm0uY29udHJvbHMubmFtZS5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snY3VzdG9tZXInfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiIWZvcm0uY29udHJvbHMuY3VzdG9tZXIudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjhcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LmN1c3RvbWVyXFxcIiBuZ0NvbnRyb2w9XFxcImN1c3RvbWVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cXFwibGV0IGMgb2YgY3VzdG9tZXJzXFxcIiBbdmFsdWVdPVxcXCJjLmlkXFxcIj57e2MubmFtZX19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgW2hpZGRlbl09XFxcImZvcm0uY29udHJvbHMuY3VzdG9tZXIudmFsaWQgfHwgZm9ybS5jb250cm9scy5jdXN0b21lci5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snbWFuYWdlcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy5tYW5hZ2VyLnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW44XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5tYW5hZ2VyXFxcIiBuZ0NvbnRyb2w9XFxcIm1hbmFnZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgbSBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwibS5pZFxcXCI+e3ttLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5tYW5hZ2VyLnZhbGlkIHx8IGZvcm0uY29udHJvbHMubWFuYWdlci5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3sncHJvZ3JhbW1lcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy5wcm9ncmFtbWVyLnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW44XFxcIiBbKG5nTW9kZWwpXT1cXFwicHJvamVjdC5wcm9ncmFtbWVyXFxcIiBuZ0NvbnRyb2w9XFxcInByb2dyYW1tZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgcCBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwicC5pZFxcXCI+e3twLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5wcm9ncmFtbWVyLnZhbGlkIHx8IGZvcm0uY29udHJvbHMucHJvZ3JhbW1lci5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3sndGVzdGVyJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLnRlc3Rlci52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3QudGVzdGVyXFxcIiBuZ0NvbnRyb2w9XFxcInRlc3RlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCB0IG9mIHVzZXJzXFxcIiBbdmFsdWVdPVxcXCJ0LmlkXFxcIj57e3QubG9naW59fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFtoaWRkZW5dPVxcXCJmb3JtLmNvbnRyb2xzLnRlc3Rlci52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLnRlc3Rlci5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snb2JzZXJ2ZXJzJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInByb2plY3Qub2JzZXJ2ZXJzXFxcIiBuZ0NvbnRyb2w9XFxcIm9ic2VydmVyc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBvYnMgb2YgdXNlcnNcXFwiIFt2YWx1ZV09XFxcIm9icy5pZFxcXCI+e3tvYnMubG9naW59fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3N0YXR1cyd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjhcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LnN0YXR1c1xcXCIgbmdDb250cm9sPVxcXCJzdGF0dXNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgc3Qgb2Ygc3RhdHVzT3B0aW9uc1xcXCIgW3ZhbHVlXT1cXFwic3RcXFwiPnt7c3R9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J2ZpbmlzaERhdGUnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJkYXRlXFxcIiBjbGFzcz1cXFwic3BhbjJcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LmZpbmlzaERhdGVcXFwiIG5nQ29udHJvbD1cXFwiZmluaXNoRGF0ZVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snY29tbWVudCd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy5jb21tZW50LnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cXFwic3BhbjhcXFwiIFsobmdNb2RlbCldPVxcXCJwcm9qZWN0LmNvbW1lbnRcXFwiIG5nQ29udHJvbD1cXFwiY29tbWVudFxcXCI+PC90ZXh0YXJlYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgW2hpZGRlbl09XFxcImZvcm0uY29udHJvbHMuY29tbWVudC52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLmNvbW1lbnQucHJpc3RpbmVcXFwiIGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB7eydyZXF1aXJlZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXRcXFwiPlxcclxcbiAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9XFxcImxlZ2VuZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIHt7J2F0dGFjaG1lbnRzJ319XFxyXFxuICAgICAgICAgICAgPC9sZWdlbmQ+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi11cGxvYWRcXFwiIGRhdGEtdXBsb2FkPVxcXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXBhcGVyY2xpcFxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3snYXR0YWNoX2ZpbGUnfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhdHRhY2htZW50c1xcXCIgZGF0YS11cGxvYWQtZmlsZXM9XFxcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhdHRhY2htZW50cy1maWxlXFxcIiAqbmdGb3I9XFxcImxldCBhdHQgb2YgcHJvamVjdC5hdHRhY2htZW50c1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImZpbGUtbmFtZVxcXCIgaHJlZj1cXFwie3thdHQudXJsfX1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e2F0dC5yZWFsRmlsZU5hbWV9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tbGluayBidG4tcmVtb3ZlLWZpbGUgb24tZWRpdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS10aW1lc1xcXCI+PC9pPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZmllbGRzZXQ+XFxyXFxuICAgIDwvc2VjdGlvbj5cXHJcXG48L2Zvcm0+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXBwL3RlbXBsYXRlcy9wcm9qZWN0Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA1OTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCB7Q29tcG9uZW50LCBJbmplY3R9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlciwgUm91dGVzLCBSb3V0ZVNlZ21lbnQsIFJvdXRlVHJlZX0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHtEYXRlUGlwZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuXHJcbmltcG9ydCB7VGFza30gZnJvbSAnLi4vbW9kZWxzL3Rhc2snO1xyXG5pbXBvcnQge1Rhc2tTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy90YXNrLnNlcnZpY2UnO1xyXG5pbXBvcnQge1Rhc2tDb21wb25lbnR9IGZyb20gJy4uL2NvbXBvbmVudHMvdGFzayc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnW3Rhc2tzXScsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vdGVtcGxhdGVzL3Rhc2tzLmh0bWwnKSxcclxuICAgIHBpcGVzOiBbRGF0ZVBpcGVdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVGFza3NDb21wb25lbnQge1xyXG4gICAgdGFza3M6IFRhc2tbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIF9yb3V0ZXI6IFJvdXRlcixcclxuICAgICAgICBwcml2YXRlIF9yb3V0ZVNlZ21lbnQ6IFJvdXRlU2VnbWVudCxcclxuICAgICAgICBwcml2YXRlIF90YXNrU2VydmljZTogVGFza1NlcnZpY2VcclxuICAgICkge1xuICAgICAgICB0aGlzLl90YXNrU2VydmljZS5nZXRUYXNrcyh0aGlzLl9yb3V0ZVNlZ21lbnQuZ2V0UGFyYW0oJ2ZvcicpKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgIHRhc2tzID0+IHRoaXMudGFza3MgPSB0YXNrcyxcclxuICAgICAgICAgICAgZXJyb3JSZXNwb25zZSA9PiB0aGlzLmhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpXHJcbiAgICAgICAgKTtcbiAgICB9XHJcblxyXG4gICAgY29tcG9zZVJlY29yZCgpIHtcclxuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvdGFzaycsICduZXcnXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlVGFzayh0YXNrOiBUYXNrKSB7XHJcbiAgICAgICAgdGhpcy5fdGFza1NlcnZpY2UuZGVsZXRlVGFzayh0YXNrKS5zdWJzY3JpYmUoKTtcclxuICAgIH1cblxuICAgIGhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKGVycm9yUmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL2xvZ2luJ10pO1xyXG4gICAgICAgIH1cbiAgICB9XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy90YXNrcy50c1xuICoqLyIsImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtIdHRwLCBIZWFkZXJzfSBmcm9tICdAYW5ndWxhci9odHRwJztcclxuXHJcbmltcG9ydCB7VGFza30gZnJvbSAnLi4vbW9kZWxzL3Rhc2snO1xyXG5pbXBvcnQge3NlcmlhbGl6ZU9ian0gZnJvbSAnLi4vdXRpbHMvb2JqLXV0aWxzJztcclxuXHJcbmNvbnN0IFZJRVdfVVJMID0gJ3A/aWQ9dGFzay12aWV3JztcclxuY29uc3QgRk9STV9VUkwgPSAncD9pZD10YXNrLWZvcm0nO1xyXG5jb25zdCBIRUFERVIgPSB7XHJcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH0pXHJcbn07XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBUYXNrU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwXHJcbiAgICApIHsgfVxyXG5cclxuICAgIGdldFRhc2tzKGF0OiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChWSUVXX1VSTCArIChhdCA/ICcmZm9yPScgKyBhdCA6ICcnKSwgSEVBREVSKVxyXG4gICAgICAgICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKS5vYmplY3RzWzBdLmxpc3QpXHJcbiAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBUYXNrW10pID0+IHJlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXNrQnlJZCh0YXNrSWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KEZPUk1fVVJMICsgJyZkb2NpZD0nICsgdGFza0lkLCBIRUFERVIpXHJcbiAgICAgICAgICAgIC5tYXAocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpLm9iamVjdHNbMV0pXHJcbiAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBUYXNrKSA9PiByZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVRhc2sodGFzazogVGFzaykge1xyXG4gICAgICAgIGxldCB1cmwgPSBGT1JNX1VSTCArICh0YXNrLmlkID8gJyZkb2NpZD0nICsgdGFzay5pZCA6ICcnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCB0aGlzLnNlcmlhbGl6ZVRhc2sodGFzayksIEhFQURFUik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlVGFzayh0YXNrOiBUYXNrKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUoVklFV19VUkwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICBzZXJpYWxpemVUYXNrKHRhc2s6IFRhc2spOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBzZXJpYWxpemVPYmooe1xyXG4gICAgICAgICAgICB0eXBlOiB0YXNrLnR5cGUuaWQsXHJcbiAgICAgICAgICAgIHN0YXR1czogdGFzay5zdGF0dXMsXHJcbiAgICAgICAgICAgIHByaW9yaXR5OiB0YXNrLnByaW9yaXR5LFxyXG4gICAgICAgICAgICBib2R5OiB0YXNrLmJvZHksXHJcbiAgICAgICAgICAgIGFzc2lnbmVlOiB0YXNrLmFzc2lnbmVlLFxyXG4gICAgICAgICAgICBzdGFydF9kYXRlOiB0YXNrLnN0YXJ0RGF0ZSxcclxuICAgICAgICAgICAgZHVlX2RhdGU6IHRhc2suZHVlRGF0ZSxcclxuICAgICAgICAgICAgdGFnczogQXJyYXkuaXNBcnJheSh0YXNrLnRhZ3MpID8gdGFzay50YWdzLm1hcChpdCA9PiBpdC5pZCkuam9pbignLCcpIDogdGFzay50YWdzLFxyXG4gICAgICAgICAgICBhdHRhY2htZW50czogQXJyYXkuaXNBcnJheSh0YXNrLmF0dGFjaG1lbnRzKSA/IHRhc2suYXR0YWNobWVudHMubWFwKGl0ID0+IGl0LmlkKS5qb2luKCcsJykgOiAnJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL3NlcnZpY2VzL3Rhc2suc2VydmljZS50c1xuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWhlYWRlclxcXCI+XFxyXFxuICAgIDxoMSBjbGFzcz1cXFwiaGVhZGVyLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgIHt7J3Rhc2tzJ319XFxyXFxuICAgIDwvaDE+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG5cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY29tcG9zZVJlY29yZCgpXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyduZXdfdGFzayd9fVxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInZpZXcgdmlldy10YXNrXFxcIj5cXHJcXG4gICAgICAgIDxoZWFkZXIgY2xhc3M9XFxcImVudHJpZXMtaGVhZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZC13cmFwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJlbnRyeS1zZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBkYXRhLXRvZ2dsZT1cXFwiZG9jaWRcXFwiIGNsYXNzPVxcXCJhbGxcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVudHJ5LWNhcHRpb25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPnt7J2JvZHknfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9oZWFkZXI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlbnRyaWVzXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVxcXCIhdGFza3NcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eydsb2FkaW5nJ319XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktd3JhcFxcXCIgKm5nRm9yPVxcXCJsZXQgdGFzayBvZiB0YXNrc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgZGF0YS1pZD1cXFwie3t0YXNrLmlkfX1cXFwiIGNsYXNzPVxcXCJlbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImVudHJ5LXNlbGVjdFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJkb2NpZFxcXCIgdmFsdWU9XFxcInt7dGFzay5pZH19XFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJlbnRyeS1saW5rXFxcIiBbcm91dGVyTGlua109XFxcIlsnL3Rhc2snLCB0YXNrLmlkXVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktZmllbGRzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW50cnktZmllbGRzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy10YXNrLXN0YXR1c1xcXCI+e3t0YXNrLnN0YXR1c319PC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LXRhc2stcHJpb3JpdHlcXFwiPnt7dGFzay5wcmlvcml0eX19PC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZ3LXRhc2stYm9keVxcXCI+e3t0YXNrLmJvZHl9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy10YXNrLWFzc2lnbmVlXFxcIj57e3Rhc2suYXNzaWduZWV9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1kYXRlXFxcIj57e3Rhc2suc3RhcnREYXRlIHwgZGF0ZTonZGQuTU0ueSd9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2dy1kYXRlXFxcIj57e3Rhc2suZHVlRGF0ZSB8IGRhdGU6J2RkLk1NLnknfX08L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidnctdGFnc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInRhZ1xcXCIgKm5nRm9yPVxcXCJsZXQgdGFnIG9mIHRhZ3NcXFwiPnt7dGFnLm5hbWV9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2FwcC90ZW1wbGF0ZXMvdGFza3MuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDU5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnQsIEluamVjdCwgT25Jbml0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtSb3V0ZXIsIFJvdXRlU2VnbWVudH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHtGb3JtQnVpbGRlciwgVmFsaWRhdG9ycywgQ29udHJvbEdyb3VwLCBDb250cm9sLCBGT1JNX0RJUkVDVElWRVN9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcblxyXG5pbXBvcnQge0FwcFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL2FwcC5zZXJ2aWNlJztcclxuaW1wb3J0IHtUYXNrfSBmcm9tICcuLi9tb2RlbHMvdGFzayc7XHJcbmltcG9ydCB7VGFza1NlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3Rhc2suc2VydmljZSc7XHJcbmltcG9ydCB7UmVmZXJlbmNlU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvcmVmZXJlbmNlLnNlcnZpY2UnO1xyXG5pbXBvcnQge1RhZ30gZnJvbSAnLi4vbW9kZWxzL3RhZyc7XHJcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi4vbW9kZWxzL3VzZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ1t0YXNrXScsXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi4vdGVtcGxhdGVzL3Rhc2suaHRtbCcpLFxyXG4gICAgZGlyZWN0aXZlczogW0ZPUk1fRElSRUNUSVZFU10sXHJcbiAgICBwcm92aWRlcnM6IFtGb3JtQnVpbGRlcl1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrQ29tcG9uZW50IHtcclxuICAgIHRhc2s6IFRhc2s7XHJcbiAgICBmb3JtOiBDb250cm9sR3JvdXA7XHJcbiAgICB1c2VyczogVXNlcltdO1xyXG4gICAgdGFnczogVGFnW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVyOiBSb3V0ZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBfcm91dGVTZWdtZW50OiBSb3V0ZVNlZ21lbnQsXHJcbiAgICAgICAgcHJpdmF0ZSBfZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyLFxyXG4gICAgICAgIHByaXZhdGUgX2FwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBfdGFza1NlcnZpY2U6IFRhc2tTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgX3JlZmVyZW5jZVNlcnZpY2U6IFJlZmVyZW5jZVNlcnZpY2VcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZm9ybSA9IF9mb3JtQnVpbGRlci5ncm91cCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFsnJ10sXHJcbiAgICAgICAgICAgIHN0YXR1czogWycnXSxcclxuICAgICAgICAgICAgcHJpb3JpdHk6IFsnJ10sXHJcbiAgICAgICAgICAgIGJvZHk6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgICAgICAgIGFzc2lnbmVlOiBbJyddLFxyXG4gICAgICAgICAgICBzdGFydERhdGU6IFsnJ10sXHJcbiAgICAgICAgICAgIGR1ZURhdGU6IFsnJ10sXHJcbiAgICAgICAgICAgIHRhZ3M6IFsnJ10sXHJcbiAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbJyddXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9yb3V0ZVNlZ21lbnQuZ2V0UGFyYW0oJ2lkJykgIT09ICduZXcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Rhc2tTZXJ2aWNlLmdldFRhc2tCeUlkKHRoaXMuX3JvdXRlU2VnbWVudC5nZXRQYXJhbSgnaWQnKSkuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgdGFzayA9PiB0aGlzLnRhc2sgPSB0YXNrLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JSZXNwb25zZSA9PiB0aGlzLmhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IFRhc2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2FwcFNlcnZpY2UuZ2V0VXNlcnMoKS5zdWJzY3JpYmUodXNlcnMgPT4gdGhpcy51c2VycyA9IHVzZXJzKTtcclxuICAgICAgICB0aGlzLl9yZWZlcmVuY2VTZXJ2aWNlLmdldFRhZ3MoKS5zdWJzY3JpYmUodGFncyA9PiB0aGlzLnRhZ3MgPSB0YWdzKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlVGFzaygpIHtcclxuICAgICAgICB0aGlzLl90YXNrU2VydmljZS5zYXZlVGFzayh0aGlzLnRhc2spLnN1YnNjcmliZShyZXNwID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnL3Rhc2tzJ10pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVhockVycm9yKGVycm9yUmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAoZXJyb3JSZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWycvbG9naW4nXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2NvbXBvbmVudHMvdGFzay50c1xuICoqLyIsImltcG9ydCB7QXR0YWNobWVudH0gZnJvbSAnLi9hdHRhY2htZW50JztcclxuaW1wb3J0IHtUYWd9IGZyb20gJy4vdGFnJztcclxuaW1wb3J0IHtUYXNrVHlwZX0gZnJvbSAnLi90YXNrLXR5cGUnO1xyXG5pbXBvcnQge1VzZXJ9IGZyb20gJy4vdXNlcic7XHJcblxyXG5leHBvcnQgY29uc3QgVGFza1ByaW9yaXR5VHlwZSA9IFtcclxuICAgICdIRUlHSEVTVCcsXHJcbiAgICAnSEVJR0hUJyxcclxuICAgICdNRURJVU0nLFxyXG4gICAgJ05PUk1BTCdcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrU3RhdHVzVHlwZSA9IFtcclxuICAgICdEUkFGVCcsXHJcbiAgICAnV0FJVElORycsXHJcbiAgICAnUFJPQ0VTU0VEJyxcclxuICAgICdGSU5JU0hFRCdcclxuXTtcclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBhdXRob3I6IFVzZXI7XHJcbiAgICByZWdEYXRlOiBEYXRlO1xyXG4gICAgd2FzUmVhZDogYm9vbGVhbjtcclxuXHJcbiAgICBwYXJlbnQ6IFRhc2s7XHJcbiAgICBjaGlsZHJlbjogVGFza1tdO1xyXG5cclxuICAgIHR5cGU6IFRhc2tUeXBlO1xyXG4gICAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgICBwcmlvcml0eTogc3RyaW5nO1xyXG4gICAgYm9keTogc3RyaW5nO1xyXG4gICAgYXNzaWduZWU6IG51bWJlcjtcclxuICAgIHN0YXJ0RGF0ZTogRGF0ZTtcclxuICAgIGR1ZURhdGU6IERhdGU7XHJcbiAgICB0YWdzOiBUYWdbXTtcclxuICAgIGF0dGFjaG1lbnRzOiBBdHRhY2htZW50W107XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvbW9kZWxzL3Rhc2sudHNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiAqbmdJZj1cXFwiIXRhc2tcXFwiPlxcclxcbiAgICB7eydsb2FkaW5nJ319XFxyXFxuPC9kaXY+XFxyXFxuPGZvcm0gY2xhc3M9XFxcImZvcm1cXFwiIFtuZ0Zvcm1Nb2RlbF09XFxcImZvcm1cXFwiICpuZ0lmPVxcXCJ0YXNrXFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLWJhY2tcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAge3sndGFzayd9fVxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5XFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIFtkaXNhYmxlZF09XFxcIiFmb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJzYXZlVGFzaygpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8ZmllbGRzZXQgY2xhc3M9XFxcImZpZWxkc2V0XFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0YXNrX3R5cGUnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIiBbY2xhc3MuaGFzLWVycm9yXT1cXFwiIWZvcm0uY29udHJvbHMudHlwZS52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcInNwYW42XFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay50eXBlXFxcIiBuZ0NvbnRyb2w9XFxcInR5cGVcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFtoaWRkZW5dPVxcXCJmb3JtLmNvbnRyb2xzLnR5cGUudmFsaWQgfHwgZm9ybS5jb250cm9scy50eXBlLnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGF0dXMnfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInN0YXR1c1xcXCIgdmFsdWU9XFxcIjQ1M1xcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suc3RhdHVzXFxcIiBuZ0NvbnRyb2w9XFxcInN0YXR1c1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5EUkFGVDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJzdGF0dXNcXFwiIHZhbHVlPVxcXCI0NTRcXFwiIFsobmdNb2RlbCldPVxcXCJ0YXNrLnN0YXR1c1xcXCIgbmdDb250cm9sPVxcXCJzdGF0dXNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+V0FJVElORzwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJzdGF0dXNcXFwiIHZhbHVlPVxcXCI0NTVcXFwiIFsobmdNb2RlbCldPVxcXCJ0YXNrLnN0YXR1c1xcXCIgbmdDb250cm9sPVxcXCJzdGF0dXNcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+UFJPQ0VTU0VEPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInN0YXR1c1xcXCIgdmFsdWU9XFxcIjQ1NlxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suc3RhdHVzXFxcIiBuZ0NvbnRyb2w9XFxcInN0YXR1c1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5GSU5JU0hFRDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7J3ByaW9yaXR5J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLnByaW9yaXR5LnZhbGlkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcInNwYW4zXFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay5wcmlvcml0eVxcXCIgbmdDb250cm9sPVxcXCJwcmlvcml0eVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBtIG9mIHByaW9yaXRpZXNcXFwiIFt2YWx1ZV09XFxcIm0udmFsdWVcXFwiPnt7bS5uYW1lfX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5wcmlvcml0eS52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLnByaW9yaXR5LnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydib2R5J319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLmJvZHkudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suYm9keVxcXCIgbmdDb250cm9sPVxcXCJib2R5XFxcIj48L3RleHRhcmVhPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5ib2R5LnZhbGlkIHx8IGZvcm0uY29udHJvbHMuYm9keS5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAge3snYXNzaWduZWVfdXNlcid9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiIFtjbGFzcy5oYXMtZXJyb3JdPVxcXCIhZm9ybS5jb250cm9scy5hc3NpZ25lZS52YWxpZFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJzcGFuOFxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suYXNzaWduZWVcXFwiIG5nQ29udHJvbD1cXFwiYXNzaWduZWVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVxcXCJsZXQgbSBvZiB1c2Vyc1xcXCIgW3ZhbHVlXT1cXFwibS5pZFxcXCI+e3ttLmxvZ2lufX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy5hc3NpZ25lZS52YWxpZCB8fCBmb3JtLmNvbnRyb2xzLmFzc2lnbmVlLnByaXN0aW5lXFxcIiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAge3sncmVxdWlyZWQnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydzdGFydF9kYXRlJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgY2xhc3M9XFxcInNwYW4yXFxcIiBbKG5nTW9kZWwpXT1cXFwidGFzay5zdGFydERhdGVcXFwiIG5nQ29udHJvbD1cXFwic3RhcnREYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eydkdWVfZGF0ZSd9fVxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImRhdGVcXFwiIGNsYXNzPVxcXCJzcGFuMlxcXCIgWyhuZ01vZGVsKV09XFxcInRhc2suZHVlRGF0ZVxcXCIgbmdDb250cm9sPVxcXCJkdWVEYXRlXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICB7eyd0YWdzJ319XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCIgW2NsYXNzLmhhcy1lcnJvcl09XFxcIiFmb3JtLmNvbnRyb2xzLnRhZ3MudmFsaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cXFwic3BhbjhcXFwiIG11bHRpcGxlIFsobmdNb2RlbCldPVxcXCJ0YXNrLnRhZ3NcXFwiIG5nQ29udHJvbD1cXFwidGFnc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAqbmdGb3I9XFxcImxldCBtIG9mIHRhZ3NcXFwiIFt2YWx1ZV09XFxcIm0uaWRcXFwiPnt7bS5uYW1lfX08L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cXFwiZm9ybS5jb250cm9scy50YWdzLnZhbGlkIHx8IGZvcm0uY29udHJvbHMudGFncy5wcmlzdGluZVxcXCIgY2xhc3M9XFxcImVycm9yLW1lc3NhZ2VcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7J3JlcXVpcmVkJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICAgICAgPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldFxcXCI+XFxyXFxuICAgICAgICAgICAgPGxlZ2VuZCBjbGFzcz1cXFwibGVnZW5kXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snYXR0YWNobWVudHMnfX1cXHJcXG4gICAgICAgICAgICA8L2xlZ2VuZD5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLXVwbG9hZFxcXCIgZGF0YS11cGxvYWQ9XFxcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmEgZmEtcGFwZXJjbGlwXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57eydhdHRhY2hfZmlsZSd9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImF0dGFjaG1lbnRzXFxcIiBkYXRhLXVwbG9hZC1maWxlcz1cXFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImF0dGFjaG1lbnRzLWZpbGVcXFwiICpuZ0Zvcj1cXFwibGV0IGF0dCBvZiB0YXNrLmF0dGFjaG1lbnRzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiZmlsZS1uYW1lXFxcIiBocmVmPVxcXCJ7e2F0dC51cmx9fVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7YXR0LnJlYWxGaWxlTmFtZX19XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1saW5rIGJ0bi1yZW1vdmUtZmlsZSBvbi1lZGl0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgPC9zZWN0aW9uPlxcclxcbjwvZm9ybT5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hcHAvdGVtcGxhdGVzL3Rhc2suaHRtbFxuICoqIG1vZHVsZSBpZCA9IDYwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1JvdXRlcn0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHtGb3JtQnVpbGRlciwgVmFsaWRhdG9ycywgQ29udHJvbEdyb3VwLCBDb250cm9sLCBGT1JNX0RJUkVDVElWRVN9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcblxyXG5pbXBvcnQge1RhYnN9IGZyb20gJy4vdGFicy90YWJzJztcclxuaW1wb3J0IHtUYWJ9IGZyb20gJy4vdGFicy90YWInO1xyXG5cclxuaW1wb3J0IHtBcHBTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9hcHAuc2VydmljZSc7XHJcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi4vbW9kZWxzL3VzZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ1t1c2VyLXByb2ZpbGVdJyxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuLi90ZW1wbGF0ZXMvdXNlci1wcm9maWxlLmh0bWwnKSxcclxuICAgIGRpcmVjdGl2ZXM6IFtGT1JNX0RJUkVDVElWRVMsIFRhYnMsIFRhYl0sXHJcbiAgICBwcm92aWRlcnM6IFtGb3JtQnVpbGRlcl1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyUHJvZmlsZUNvbXBvbmVudCB7XHJcbiAgICB1c2VyOiBVc2VyID0gbmV3IFVzZXIoKTtcclxuICAgIGZvcm06IENvbnRyb2xHcm91cDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIF9yb3V0ZXI6IFJvdXRlcixcclxuICAgICAgICBwcml2YXRlIF9mb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBfYXBwU2VydmljZTogQXBwU2VydmljZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtID0gX2Zvcm1CdWlsZGVyLmdyb3VwKHtcclxuICAgICAgICAgICAgbG9naW46IFtdLFxyXG4gICAgICAgICAgICBwd2Q6IFtdLFxyXG4gICAgICAgICAgICBwd2RfY29uZmlybTogW10sXHJcbiAgICAgICAgICAgIGVtYWlsOiBbXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVVzZXJQcm9maWxlKCkge1xyXG4gICAgICAgIHRoaXMuX2FwcFNlcnZpY2UudXBkYXRlVXNlclByb2ZpbGUodGhpcy51c2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZShldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL2NvbXBvbmVudHMvdXNlci1wcm9maWxlLnRzXG4gKiovIiwiaW1wb3J0IHtDb21wb25lbnQsIENvbnRlbnRDaGlsZHJlbiwgUXVlcnlMaXN0LCBBZnRlckNvbnRlbnRJbml0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtUYWJ9IGZyb20gJy4vdGFiJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICd0YWJzJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgIDx1bCBjbGFzcz1cIm5hdiBuYXYtdGFic1wiPlxyXG4gICAgICAgIDxsaSAqbmdGb3I9XCJsZXQgdGFiIG9mIHRhYnNcIiAoY2xpY2spPVwic2VsZWN0VGFiKHRhYilcIiBbY2xhc3MuYWN0aXZlXT1cInRhYi5hY3RpdmVcIj5cclxuICAgICAgICAgIDxhIGhyZWY9XCIjXCIgKGNsaWNrKT1cInByZXZlbnREZWZhdWx0KCRldmVudClcIj57e3RhYi50aXRsZX19PC9hPlxyXG4gICAgICAgIDwvbGk+XHJcbiAgICAgIDwvdWw+XHJcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuICAgIGBcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWJzIGltcGxlbWVudHMgQWZ0ZXJDb250ZW50SW5pdCB7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihUYWIpIHRhYnM6IFF1ZXJ5TGlzdDxUYWI+O1xyXG5cclxuICAgIC8vIGNvbnRlbnRDaGlsZHJlbiBhcmUgc2V0XHJcbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBhY3RpdmUgdGFic1xyXG4gICAgICAgIGxldCBhY3RpdmVUYWJzID0gdGhpcy50YWJzLmZpbHRlcih0YWIgPT4gdGFiLmFjdGl2ZSk7XHJcblxyXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSB0YWIgc2V0LCBhY3RpdmF0ZSB0aGUgZmlyc3RcclxuICAgICAgICBpZiAoYWN0aXZlVGFicy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIodGhpcy50YWJzLmZpcnN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0VGFiKHRhYjogVGFiKSB7XHJcbiAgICAgICAgLy8gZGVhY3RpdmF0ZSBhbGwgdGFic1xyXG4gICAgICAgIHRoaXMudGFicy5mb3JFYWNoKHRhYiA9PiB0YWIuYWN0aXZlID0gZmFsc2UpO1xyXG5cclxuICAgICAgICAvLyBhY3RpdmF0ZSB0aGUgdGFiIHRoZSB1c2VyIGhhcyBjbGlja2VkIG9uLlxyXG4gICAgICAgIHRhYi5hY3RpdmUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb21wb25lbnRzL3RhYnMvdGFicy50c1xuICoqLyIsImltcG9ydCB7Q29tcG9uZW50LCBJbnB1dH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndGFiJyxcclxuICAgIHN0eWxlczogW2AubmF2LXRhYnMgLnBhbmUgeyB9YF0sXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICA8ZGl2IFtoaWRkZW5dPVwiIWFjdGl2ZVwiIGNsYXNzPVwicGFuZVwiPlxyXG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgVGFiIHtcclxuICAgIEBJbnB1dCgndGFiVGl0bGUnKSB0aXRsZTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgYWN0aXZlID0gZmFsc2U7XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAvY29tcG9uZW50cy90YWJzL3RhYi50c1xuICoqLyIsImV4cG9ydCBjbGFzcyBVc2VyIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBsb2dpbjogc3RyaW5nO1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICAgIHVzZXJfbmFtZTogc3RyaW5nID0gJ0Bhbm9ueW1vdXMnO1xyXG4gICAgcHdkOiBzdHJpbmc7XHJcbiAgICBwd2RfY29uZmlybTogc3RyaW5nO1xyXG4gICAgb3JnYW5pemF0aW9uOiBzdHJpbmc7XHJcbiAgICBkZXBhcnRtZW50OiBzdHJpbmc7XHJcbiAgICBwb3NpdGlvbjogc3RyaW5nO1xyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwL21vZGVscy91c2VyLnRzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxmb3JtIGNsYXNzPVxcXCJmb3JtIGZvcm0tdXNlcnByb2ZpbGVcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBbbmdGb3JtTW9kZWxdPVxcXCJmb3JtXFxcIj5cXHJcXG4gICAgPGhlYWRlciBjbGFzcz1cXFwiY29udGVudC1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuLWJhY2tcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgKGNsaWNrKT1cXFwiY2xvc2UoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgPC9idXR0b24+XFxyXFxuICAgICAgICA8aDEgY2xhc3M9XFxcImhlYWRlci10aXRsZVxcXCI+XFxyXFxuICAgICAgICAgICAge3snZW1wbG95ZWUnfX0ge3t1c2VyLm5hbWV9fVxcclxcbiAgICAgICAgPC9oMT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtYWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5XFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIFtkaXNhYmxlZF09XFxcIiFmb3JtLnZhbGlkXFxcIiAoY2xpY2spPVxcXCJ1cGRhdGVVc2VyUHJvZmlsZSgpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snc2F2ZV9jbG9zZSd9fVxcclxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0blxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJjbG9zZSgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAge3snY2xvc2UnfX1cXHJcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQtYm9keVxcXCI+XFxyXFxuICAgICAgICA8dGFicz5cXHJcXG4gICAgICAgICAgICA8dGFiIGNsYXNzPVxcXCJ0YWItcGFuZVxcXCIgdGFiVGl0bGU9XFxcInt7J3Byb3BlcnRpZXMnfX1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8IS0tPGZpZWxkc2V0IGNsYXNzPVxcXCJmaWVsZHNldCBmaWVsZHNldC11c2VyLWF2YXRhclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInVzZXItYXZhdGFyXFxcIiBzcmM9XFxcImltZy9hdmF0YXIucG5nXFxcIi8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+LS0+XFxyXFxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXQgZmllbGRzZXQtdXNlci1maWVsZHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7J3VzZXJfbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dXNlci5uYW1lfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3snbG9naW5fbmFtZSd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJzcGFuM1xcXCIgWyhuZ01vZGVsKV09XFxcInVzZXIubG9naW5cXFwiIG5nQ29udHJvbD1cXFwibG9naW5cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydwYXNzd29yZCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInBhc3N3b3JkXFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIFsobmdNb2RlbCldPVxcXCJ1c2VyLnB3ZFxcXCIgbmdDb250cm9sPVxcXCJwd2RcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydwYXNzd29yZF9jb25maXJtJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicGFzc3dvcmRcXFwiIGNsYXNzPVxcXCJzcGFuM1xcXCIgWyhuZ01vZGVsKV09XFxcInVzZXIucHdkX2NvbmZpcm1cXFwiIG5nQ29udHJvbD1cXFwicHdkX2NvbmZpcm1cXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydlbWFpbCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImVtYWlsXFxcIiBjbGFzcz1cXFwic3BhbjNcXFwiIFsobmdNb2RlbCldPVxcXCJ1c2VyLmVtYWlsXFxcIiBuZ0NvbnRyb2w9XFxcImVtYWlsXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3snb3JnX25hbWUnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e3VzZXIub3JnYW5pemF0aW9ufX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3snZGVwYXJ0bWVudCd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dXNlci5kZXBhcnRtZW50fX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sncG9zaXRpb24nfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e3VzZXIucG9zaXRpb259fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydyb2xlcyd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJpbnB1dC1wbGFjZWhvbGRlciBsaXN0LXN0eWxlLW5vbmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDpmb3ItZWFjaCBzZWxlY3Q9XFxcImZpZWxkcy9yb2xlcy9lbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOnZhbHVlLW9mIHNlbGVjdD1cXFwiLlxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6Zm9yLWVhY2g+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgICAgICAgICA8L3RhYj5cXHJcXG4gICAgICAgICAgICA8dGFiIGNsYXNzPVxcXCJ0YWItcGFuZVxcXCIgdGFiVGl0bGU9XFxcInt7J2ludGVyZmFjZSd9fVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz1cXFwiZmllbGRzZXRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udHJvbC1sYWJlbFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7J2xpbWl0X3ZpZXcnfX1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cXFwicGFnZXNpemVcXFwiIGNsYXNzPVxcXCJuYXRpdmUgc3BhbjJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICcxMCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjIwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmlmIHRlc3Q9XFxcIi8vcGFnZXNpemUgPSAnMjAnXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3hzbDppZj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIzMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDppZiB0ZXN0PVxcXCIvL3BhZ2VzaXplID0gJzMwJ1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6YXR0cmlidXRlIG5hbWU9XFxcInNlbGVjdGVkXFxcIiBzZWxlY3Q9XFxcIidzZWxlY3RlZCdcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMzBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiNTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwiLy9wYWdlc2l6ZSA9ICc1MCdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8eHNsOmF0dHJpYnV0ZSBuYW1lPVxcXCJzZWxlY3RlZFxcXCIgc2VsZWN0PVxcXCInc2VsZWN0ZWQnXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwveHNsOmlmPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2wtbGFiZWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eydpbnRlcmZhY2VfbGFuZyd9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRyb2xzXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDp2YXJpYWJsZSBuYW1lPVxcXCJjdXJyZW50bGFuZ1xcXCIgc2VsZWN0PVxcXCIvcmVxdWVzdC9AbGFuZ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVxcXCJsYW5nXFxcIiBjbGFzcz1cXFwibmF0aXZlIHNwYW4yXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6Zm9yLWVhY2ggc2VsZWN0PVxcXCIvL3F1ZXJ5W0BlbnRpdHkgPSAnbGFuZ3VhZ2UnXS9lbnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwie3ZpZXdjb250ZW50L2xhbmcvQGlkfVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6aWYgdGVzdD1cXFwidmlld2NvbnRlbnQvbGFuZy9AaWQgPSAkY3VycmVudGxhbmdcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHhzbDphdHRyaWJ1dGUgbmFtZT1cXFwic2VsZWN0ZWRcXFwiIHNlbGVjdD1cXFwiJ3NlbGVjdGVkJ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6aWY+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx4c2w6dmFsdWUtb2Ygc2VsZWN0PVxcXCJ2aWV3Y29udGVudC9sYW5nXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC94c2w6Zm9yLWVhY2g+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sLWxhYmVsXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250cm9sc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCIgZGF0YS10b2dnbGUtdGhlbWU9XFxcInRoZW1lMVxcXCIgY2xhc3M9XFxcImlucHV0LXBsYWNlaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7J2NoYW5nZV9za2luJ319XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PlxcclxcbiAgICAgICAgICAgIDwvdGFiPlxcclxcbiAgICAgICAgPC90YWJzPlxcclxcbiAgICA8L3NlY3Rpb24+XFxyXFxuPC9mb3JtPlxcclxcblwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2FwcC90ZW1wbGF0ZXMvdXNlci1wcm9maWxlLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA2MDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCB7Q29tcG9uZW50fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbbG9naW5dJyxcclxuICAgIHRlbXBsYXRlOiAnbG9naW4nXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgTG9naW5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnTG9nb3V0JztcclxuICAgIH1cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9jb21wb25lbnRzL2xvZ2luLnRzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxuYi1ub3RpZnk+PC9uYi1ub3RpZnk+XFxyXFxuPGRpdiBjbGFzcz1cXFwibGF5b3V0XFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1vdmVybGF5XFxcIiAobW91c2Vkb3duKT1cXFwiaGlkZU5hdigkZXZlbnQpXFxcIiAodG91Y2hzdGFydCk9XFxcImhpZGVOYXYoJGV2ZW50KVxcXCI+PC9kaXY+XFxyXFxuICAgIDxoZWFkZXIgY2xhc3M9XFxcImhlYWRlciBuYXZiYXIgbmF2YmFyLWZpeGVkLXRvcFxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250YWluZXJcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5hdmJhci1oZWFkZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4tc2lkZS1uYXYtdG9nZ2xlXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIChjbGljayk9XFxcInRvZ2dsZU5hdigpXFxcIj48L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiYnJhbmQtbG9nb1xcXCIgYWx0PVxcXCJsb2dvXFxcIiBzcmM9XFxcImltZy9sb2dvLnBuZ1xcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImJyYW5kLXRpdGxlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIHt7SEVBREVSX1RJVExFfX1cXHJcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxuYXYgY2xhc3M9XFxcIm5hdmJhci1uYXYgbmF2YmFyLXJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVxcXCJuYXYgbmF2YmFyLXJpZ2h0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiZHJvcGRvd25cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGNsYXNzPVxcXCJkcm9wZG93bi10b2dnbGVcXFwiIGRhdGEtdG9nZ2xlPVxcXCJkcm9wZG93blxcXCIgKGNsaWNrKT1cXFwicHJldmVudERlZmF1bHQoJGV2ZW50KVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYSBmYS11c2VyXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwiZHJvcGRvd24tbWVudSByaWdodFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJ1c2VyLXByb2ZpbGVcXFwiIFtyb3V0ZXJMaW5rXT1cXFwiWycvdXNlci1wcm9maWxlJ11cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7bG9nZ2VkVXNlci51c2VyX25hbWV9fVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XFxcImRpdmlkZXJcXFwiPjwvbGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJsb2dvdXRcXFwiIGhyZWY9XFxcIiNsb2dvdXRcXFwiIChjbGljayk9XFxcImxvZ291dCgkZXZlbnQpXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dvdXRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICAgICAgPC91bD5cXHJcXG4gICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XFxcIm5hdmJhci1mb3JtIG5hdmJhci1zZWFyY2hcXFwiIG5hbWU9XFxcImZ0LXNlYXJjaFxcXCIgKHN1Ym1pdCk9XFxcImZ0U2VhcmNoKClcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiaWRcXFwiIHZhbHVlPVxcXCJzZWFyY2hcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwic2VhcmNoXFxcIiBjbGFzcz1cXFwicVxcXCIgbmFtZT1cXFwia2V5d29yZFxcXCIgdmFsdWU9XFxcInt7c2VhcmNoX2tleXdvcmR9fVxcXCIgcGxhY2Vob2xkZXI9XFxcInt7J3NlYXJjaCd9fVxcXCIgcmVxdWlyZWQgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiIChmb2N1cyk9XFxcInNlYXJjaFRvZ2dsZSgpXFxcIiAoYmx1cik9XFxcInNlYXJjaFRvZ2dsZSgpXFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJyZXNldFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJzdWJtaXRcXFwiIHZhbHVlPVxcXCJzZWFyY2hcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgIDwvZm9ybT5cXHJcXG4gICAgICAgICAgICA8L25hdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2hlYWRlcj5cXHJcXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRhaW5lclxcXCI+XFxyXFxuICAgICAgICA8YXNpZGUgbmF2IGNsYXNzPVxcXCJhc2lkZSBzaWRlLW5hdlxcXCI+PC9hc2lkZT5cXHJcXG4gICAgICAgIDxtYWluIGNsYXNzPVxcXCJjb250ZW50XFxcIj5cXHJcXG4gICAgICAgICAgICA8cm91dGVyLW91dGxldD48L3JvdXRlci1vdXRsZXQ+XFxyXFxuICAgICAgICA8L21haW4+XFxyXFxuICAgIDwvc2VjdGlvbj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hcHAvdGVtcGxhdGVzL2FwcC5odG1sXG4gKiogbW9kdWxlIGlkID0gNjA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9